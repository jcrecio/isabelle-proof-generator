{"file_name": "/home/qj213/afp-2021-10-22/thys/Ergodic_Theory/Transfer_Operator.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Ergodic_Theory", "problem_names": ["lemma borel_measurable_nn_transfer_operator [measurable]:\n  \"nn_transfer_operator f \\<in> borel_measurable M\"", "lemma borel_measurable_nn_transfer_operator_iterates [measurable]:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"(nn_transfer_operator^^n) f \\<in> borel_measurable M\"", "lemma nn_transfer_operator_intg:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"(\\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M)\"", "lemma nn_transfer_operator_intTn_g:\n  assumes \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"(\\<integral>\\<^sup>+ x. f x * (nn_transfer_operator^^n) g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f ((T^^n) x) * g x \\<partial>M)\"", "lemma nn_transfer_operator_intg_Tn:\n  assumes \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"(\\<integral>\\<^sup>+ x. (nn_transfer_operator^^n) g x * f x \\<partial>M) = (\\<integral>\\<^sup>+ x. g x * f ((T^^n) x) \\<partial>M)\"", "lemma nn_transfer_operator_charact:\n  assumes \"\\<And>A. A \\<in> sets M \\<Longrightarrow> (\\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M) = (\\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M)\" and\n          [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator f x = g x\"", "lemma (in mpt) nn_transfer_operator_foT:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (f o T) x = f x\"", "lemma nn_transfer_operator_foT_g:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x = f x * nn_transfer_operator g x\"", "lemma nn_transfer_operator_cmult:\n  assumes [measurable]: \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (\\<lambda>x. c * g x) x = c * nn_transfer_operator g x\"", "lemma nn_transfer_operator_zero:\n  \"AE x in M. nn_transfer_operator (\\<lambda>x. 0) x = 0\"", "lemma nn_transfer_operator_sum:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (\\<lambda>x. f x + g x) x = nn_transfer_operator f x + nn_transfer_operator g x\"", "lemma nn_transfer_operator_cong:\n  assumes \"AE x in M. f x = g x\"\n      and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator f x = nn_transfer_operator g x\"", "lemma nn_transfer_operator_mono:\n  assumes \"AE x in M. f x \\<le> g x\"\n      and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x\"", "lemma borel_measurable_transfer_operator [measurable]:\n  \"real_transfer_operator f \\<in> borel_measurable M\"", "lemma borel_measurable_transfer_operator_iterates [measurable]:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"(real_transfer_operator^^n) f \\<in> borel_measurable M\"", "lemma real_transfer_operator_abs:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. abs (real_transfer_operator f x) \\<le> nn_transfer_operator (\\<lambda>x. ennreal (abs(f x))) x\"", "lemma real_transfer_operator_intg_fpos:\n  assumes \"integrable M (\\<lambda>x. f (T x) * g x)\" and f_pos[simp]: \"\\<And>x. f x \\<ge> 0\" and\n          [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"integrable M (\\<lambda>x. f x * real_transfer_operator g x)\"\n        \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. f (T x) * g x \\<partial>M)\"", "lemma real_transfer_operator_intg:\n  assumes \"integrable M (\\<lambda>x. f (T x) * g x)\" and\n          [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"integrable M (\\<lambda>x. f x * real_transfer_operator g x)\"\n        \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. f (T x) * g x \\<partial>M)\"", "lemma real_transfer_operator_int [intro]:\n  assumes \"integrable M f\"\n  shows \"integrable M (real_transfer_operator f)\"\n        \"(\\<integral>x. real_transfer_operator f x \\<partial>M) = (\\<integral>x. f x \\<partial>M)\"", "lemma real_transfer_operator_charact:\n  assumes \"\\<And>A. A \\<in> sets M \\<Longrightarrow> (\\<integral>x. indicator A x * g x \\<partial>M) = (\\<integral>x. indicator A (T x) * f x \\<partial>M)\"\n      and [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator f x = g x\"", "lemma (in mpt) real_transfer_operator_foT:\n  assumes \"integrable M f\"\n  shows \"AE x in M. real_transfer_operator (f o T) x = f x\"", "lemma real_transfer_operator_foT_g:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\" \"integrable M (\\<lambda>x. f (T x) * g x)\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x = f x * real_transfer_operator g x\"", "lemma real_transfer_operator_add [intro]:\n  assumes [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f x + g x) x = real_transfer_operator f x + real_transfer_operator g x\"", "lemma real_transfer_operator_cong:\n  assumes ae: \"AE x in M. f x = g x\" and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. real_transfer_operator f x = real_transfer_operator g x\"", "lemma real_transfer_operator_cmult [intro, simp]:\n  fixes c::real\n  assumes \"integrable M f\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. c * f x) x = c * real_transfer_operator f x\"", "lemma real_transfer_operator_cdiv [intro, simp]:\n  fixes c::real\n  assumes \"integrable M f\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f x / c) x = real_transfer_operator f x / c\"", "lemma real_transfer_operator_diff [intro, simp]:\n  assumes [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x = real_transfer_operator f x - real_transfer_operator g x\"", "lemma real_transfer_operator_pos [intro]:\n  assumes \"AE x in M. f x \\<ge> 0\" and [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. real_transfer_operator f x \\<ge> 0\"", "lemma real_transfer_operator_mono:\n  assumes \"AE x in M. f x \\<le> g x\" and [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x\"", "lemma real_transfer_operator_sum [intro, simp]:\n  fixes f::\"'b \\<Rightarrow> 'a \\<Rightarrow> real\"\n  assumes [measurable]: \"\\<And>i. integrable M (f i)\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. \\<Sum>i\\<in>I. f i x) x = (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)\"", "theorem (in conservative) recurrence_series_infinite_transfer_operator:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. f x > 0 \\<longrightarrow> (\\<Sum>n. (nn_transfer_operator^^n) f x) = \\<infinity>\""], "translations": [["", "lemma borel_measurable_nn_transfer_operator [measurable]:\n  \"nn_transfer_operator f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nn_transfer_operator f \\<in> borel_measurable M", "unfolding nn_transfer_operator_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if f \\<in> borel_measurable M then RN_deriv M (distr (density M f) M T)\n     else (\\<lambda>_. 0))\n    \\<in> borel_measurable M", "by auto"], ["", "lemma borel_measurable_nn_transfer_operator_iterates [measurable]:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"(nn_transfer_operator^^n) f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (nn_transfer_operator ^^ n) f \\<in> borel_measurable M", "by (cases n, auto)"], ["", "text \\<open>The next lemma is arguably the most fundamental property of the transfer operator: it is the\nadjoint of the composition by $T$. If one defined it as an abstract adjoint, it would be defined\non the dual of $L^\\infty$, which is a large unwieldy space. The point is that it can be defined\non genuine functions, using the push-forward point of view above. However, once we have this\nproperty, we can forget completely about the definition, since this property characterizes\nthe transfer operator, as the second lemma below shows.\nFrom this point on, we will only work with it, and forget completely about\nthe definition using Radon-Nikodym derivatives.\n\\<close>"], ["", "lemma nn_transfer_operator_intg:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"(\\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "have *: \"density M (RN_deriv M (distr (density M g) M T)) = distr (density M g) M T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. density M (RN_deriv M (distr (density M g) M T)) =\n    distr (density M g) M T", "by (rule density_RN_deriv) (auto intro!: quasi_measure_preserving_absolutely_continuous simp add: Tqm)"], ["proof (state)\nthis:\n  density M (RN_deriv M (distr (density M g) M T)) = distr (density M g) M T\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "have \"(\\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f x \\<partial>(density M (RN_deriv M (distr (density M g) M T))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f", "unfolding nn_transfer_operator_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x *\n                           (if g \\<in> borel_measurable M\n                            then RN_deriv M (distr (density M g) M T)\n                            else (\\<lambda>_. 0))\n                            x\n                       \\<partial>M =\n    integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f", "by (simp add: nn_integral_densityR)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n  integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n  integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "have \"... = (\\<integral>\\<^sup>+ x. f x \\<partial>(distr (density M g) M T))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f =\n    integral\\<^sup>N (distr (density M g) M T) f", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N (distr (density M g) M T) f =\n    integral\\<^sup>N (distr (density M g) M T) f", "by simp"], ["proof (state)\nthis:\n  integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f =\n  integral\\<^sup>N (distr (density M g) M T) f\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "also"], ["proof (state)\nthis:\n  integral\\<^sup>N (density M (RN_deriv M (distr (density M g) M T))) f =\n  integral\\<^sup>N (distr (density M g) M T) f\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "have \"... = (\\<integral>\\<^sup>+ x. f (T x) \\<partial>(density M g))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N (distr (density M g) M T) f =\n    \\<integral>\\<^sup>+ x. f (T x) \\<partial>density M g", "by (rule nn_integral_distr, auto)"], ["proof (state)\nthis:\n  integral\\<^sup>N (distr (density M g) M T) f =\n  \\<integral>\\<^sup>+ x. f (T x) \\<partial>density M g\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "also"], ["proof (state)\nthis:\n  integral\\<^sup>N (distr (density M g) M T) f =\n  \\<integral>\\<^sup>+ x. f (T x) \\<partial>density M g\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "have \"... = (\\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f (T x) \\<partial>density M g =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "by (simp add: nn_integral_densityR)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f (T x) \\<partial>density M g =\n  \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * nn_transfer_operator g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T x) * g x \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nn_transfer_operator_intTn_g:\n  assumes \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"(\\<integral>\\<^sup>+ x. f x * (nn_transfer_operator^^n) g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f ((T^^n) x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M", "have \"\\<And>f g. f \\<in> borel_measurable M \\<Longrightarrow> g \\<in> borel_measurable M \\<Longrightarrow> (\\<integral>\\<^sup>+ x. f x * (nn_transfer_operator^^n) g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f ((T^^n) x) * g x \\<partial>M)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x\n      \\<partial>M", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>?f3 \\<in> borel_measurable M;\n   ?g3 \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ?f3 x * (nn_transfer_operator ^^ n) ?g3 x\n \\<partial>M =\n                    \\<integral>\\<^sup>+ x. ?f3 ((T ^^ n) x) * ?g3 x\n \\<partial>M\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "have [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M &&& g \\<in> borel_measurable M", "by fact+"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "have \"(\\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x \\<partial>M) = (\\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ((nn_transfer_operator^^n) g)) x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f x *\n                           nn_transfer_operator\n                            ((nn_transfer_operator ^^ n) g) x\n                       \\<partial>M", "apply (rule nn_integral_cong)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       f x * (nn_transfer_operator ^^ Suc n) g x =\n       f x * nn_transfer_operator ((nn_transfer_operator ^^ n) g) x", "using funpow.simps(2)"], ["proof (prove)\nusing this:\n  ?f ^^ Suc ?n = ?f \\<circ> ?f ^^ ?n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       f x * (nn_transfer_operator ^^ Suc n) g x =\n       f x * nn_transfer_operator ((nn_transfer_operator ^^ n) g) x", "unfolding comp_def"], ["proof (prove)\nusing this:\n  ?f ^^ Suc ?n = (\\<lambda>x. ?f ((?f ^^ ?n) x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       f x * (nn_transfer_operator ^^ Suc n) g x =\n       f x * nn_transfer_operator ((nn_transfer_operator ^^ n) g) x", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f x *\n                         nn_transfer_operator\n                          ((nn_transfer_operator ^^ n) g) x\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f x *\n                         nn_transfer_operator\n                          ((nn_transfer_operator ^^ n) g) x\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "have \"... = (\\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator^^n) g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x *\n                           nn_transfer_operator\n                            ((nn_transfer_operator ^^ n) g) x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M", "by (rule nn_transfer_operator_intg, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x *\n                         nn_transfer_operator\n                          ((nn_transfer_operator ^^ n) g) x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator ^^ n) g x\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x *\n                         nn_transfer_operator\n                          ((nn_transfer_operator ^^ n) g) x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator ^^ n) g x\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "have \"... = (\\<integral>\\<^sup>+ x. (\\<lambda>x. f (T x)) ((T^^n) x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f (T ((T ^^ n) x)) * g x \\<partial>M", "by (rule Suc.IH, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator ^^ n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T ((T ^^ n) x)) * g x \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f (T x) * (nn_transfer_operator ^^ n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f (T ((T ^^ n) x)) * g x \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "have \"... = (\\<integral>\\<^sup>+ x. f ((T^^(Suc n)) x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f (T ((T ^^ n) x)) * g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x \\<partial>M", "apply (rule nn_integral_cong)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       f (T ((T ^^ n) x)) * g x = f ((T ^^ Suc n) x) * g x", "using funpow.simps(2)"], ["proof (prove)\nusing this:\n  ?f ^^ Suc ?n = ?f \\<circ> ?f ^^ ?n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       f (T ((T ^^ n) x)) * g x = f ((T ^^ Suc n) x) * g x", "unfolding comp_def"], ["proof (prove)\nusing this:\n  ?f ^^ Suc ?n = (\\<lambda>x. ?f ((?f ^^ ?n) x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       f (T ((T ^^ n) x)) * g x = f ((T ^^ Suc n) x) * g x", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f (T ((T ^^ n) x)) * g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x \\<partial>M\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>f \\<in> borel_measurable M;\n                    g \\<in> borel_measurable M\\<rbrakk>\n                   \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n                    f x * (nn_transfer_operator ^^ n) g x\n                  \\<partial>M =\n                                     \\<integral>\\<^sup>+ x.\n                    f ((T ^^ n) x) * g x\n                  \\<partial>M;\n        f \\<in> borel_measurable M; g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ Suc n) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x\n      \\<partial>M", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x \\<partial>M", "show ?case"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ Suc n) g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. f ((T ^^ Suc n) x) * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>f \\<in> borel_measurable M;\n        g \\<in> borel_measurable M\\<rbrakk>\n       \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n        f x * (nn_transfer_operator ^^ 0) g x\n      \\<partial>M =\n                         \\<integral>\\<^sup>+ x. f ((T ^^ 0) x) * g x\n      \\<partial>M", "qed (simp)"], ["proof (state)\nthis:\n  \\<lbrakk>?f3 \\<in> borel_measurable M;\n   ?g3 \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ?f3 x * (nn_transfer_operator ^^ ?n4) ?g3 x\n \\<partial>M =\n                    \\<integral>\\<^sup>+ x. ?f3 ((T ^^ ?n4) x) * ?g3 x\n \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?f3 \\<in> borel_measurable M;\n   ?g3 \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ?f3 x * (nn_transfer_operator ^^ ?n4) ?g3 x\n \\<partial>M =\n                    \\<integral>\\<^sup>+ x. ?f3 ((T ^^ ?n4) x) * ?g3 x\n \\<partial>M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f3 \\<in> borel_measurable M;\n   ?g3 \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ?f3 x * (nn_transfer_operator ^^ ?n4) ?g3 x\n \\<partial>M =\n                    \\<integral>\\<^sup>+ x. ?f3 ((T ^^ ?n4) x) * ?g3 x\n \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f3 \\<in> borel_measurable M;\n   ?g3 \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ?f3 x * (nn_transfer_operator ^^ ?n4) ?g3 x\n \\<partial>M =\n                    \\<integral>\\<^sup>+ x. ?f3 ((T ^^ ?n4) x) * ?g3 x\n \\<partial>M\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nn_transfer_operator_intg_Tn:\n  assumes \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"(\\<integral>\\<^sup>+ x. (nn_transfer_operator^^n) g x * f x \\<partial>M) = (\\<integral>\\<^sup>+ x. g x * f ((T^^n) x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ n) g x * f x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. g x * f ((T ^^ n) x) \\<partial>M", "using nn_transfer_operator_intTn_g[OF assms, of n]"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. f x * (nn_transfer_operator ^^ n) g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. f ((T ^^ n) x) * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ n) g x * f x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. g x * f ((T ^^ n) x) \\<partial>M", "by (simp add: algebra_simps)"], ["", "lemma nn_transfer_operator_charact:\n  assumes \"\\<And>A. A \\<in> sets M \\<Longrightarrow> (\\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M) = (\\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M)\" and\n          [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator f x = g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x = g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x = g x", "have *:\"set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)\" if [measurable]: \"A \\<in> sets M\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "have \"set_nn_integral M A g = (\\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_nn_integral M A g =\n    \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M", "using mult.commute"], ["proof (prove)\nusing this:\n  ?a * ?b = ?b * ?a\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g =\n    \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M", "by metis"], ["proof (state)\nthis:\n  set_nn_integral M A g =\n  \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "also"], ["proof (state)\nthis:\n  set_nn_integral M A g =\n  \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "have \"... = (\\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M", "using assms(1)"], ["proof (prove)\nusing this:\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  \\<integral>\\<^sup>+ x. indicator ?A3 x * g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator ?A3 (T x) * f x \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x * g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "have \"... = (\\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                       \\<partial>M", "by (rule nn_transfer_operator_intg[symmetric], auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "finally"], ["proof (chain)\npicking this:\n  set_nn_integral M A g =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M", "show ?thesis"], ["proof (prove)\nusing this:\n  set_nn_integral M A g =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "using mult.commute"], ["proof (prove)\nusing this:\n  set_nn_integral M A g =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M\n  ?a * ?b = ?b * ?a\n\ngoal (1 subgoal):\n 1. set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)", "by (metis (no_types, lifting) nn_integral_cong)"], ["proof (state)\nthis:\n  set_nn_integral M A g = set_nn_integral M A (nn_transfer_operator f)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  set_nn_integral M ?A3 g = set_nn_integral M ?A3 (nn_transfer_operator f)\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x = g x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x = g x", "by (rule sigma_finite_measure.density_unique2, auto simp add: sigma_finite_measure_axioms *)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator f x = g x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>When $T$ is measure-preserving, $\\hat T(f \\circ T) = f$.\\<close>"], ["", "lemma (in mpt) nn_transfer_operator_foT:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (f o T) x = f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (f \\<circ> T) x = f x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (f \\<circ> T) x = f x", "have *: \"(\\<integral>\\<^sup>+ x. indicator A x * f x \\<partial>M) = (\\<integral>\\<^sup>+ x. indicator A (T x) * f (T x) \\<partial>M)\" if [measurable]: \"A \\<in> sets M\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x * f x \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * f (T x) \\<partial>M", "by (subst T_nn_integral_preserving[symmetric]) auto"], ["proof (state)\nthis:\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  \\<integral>\\<^sup>+ x. indicator ?A3 x * f x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator ?A3 (T x) * f (T x) \\<partial>M\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (f \\<circ> T) x = f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (f \\<circ> T) x = f x", "by (rule nn_transfer_operator_charact) (auto simp add: assms *)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (f \\<circ> T) x = f x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In general, one only has $\\hat T(f\\circ T \\cdot g) = f \\cdot \\hat T g$.\\<close>"], ["", "lemma nn_transfer_operator_foT_g:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x = f x * nn_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * nn_transfer_operator g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * nn_transfer_operator g x", "have *: \"(\\<integral>\\<^sup>+ x. indicator A x * (f x * nn_transfer_operator g x) \\<partial>M) = (\\<integral>\\<^sup>+ x. indicator A (T x) * (f (T x) * g x) \\<partial>M)\"\n    if [measurable]: \"A \\<in> sets M\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x * (f x * nn_transfer_operator g x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * (f (T x) * g x) \\<partial>M", "by (simp add: mult.assoc[symmetric] nn_transfer_operator_intg)"], ["proof (state)\nthis:\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  \\<integral>\\<^sup>+ x. indicator ?A3 x * (f x * nn_transfer_operator g x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator ?A3 (T x) * (f (T x) * g x) \\<partial>M\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * nn_transfer_operator g x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * nn_transfer_operator g x", "by (rule nn_transfer_operator_charact) (auto simp add: assms *)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n             f x * nn_transfer_operator g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nn_transfer_operator_cmult:\n  assumes [measurable]: \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (\\<lambda>x. c * g x) x = c * nn_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. c * g x) x =\n               c * nn_transfer_operator g x", "apply (rule nn_transfer_operator_foT_g)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. c) \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  g \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. c) \\<in> borel_measurable M\n 2. g \\<in> borel_measurable M", "by auto"], ["", "lemma nn_transfer_operator_zero:\n  \"AE x in M. nn_transfer_operator (\\<lambda>x. 0) x = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. 0) x = 0", "using nn_transfer_operator_cmult[of \"\\<lambda>x. 0\" 0]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. 0) \\<in> borel_measurable M \\<Longrightarrow>\n  AE x in M. nn_transfer_operator (\\<lambda>x. 0 * 0) x =\n             0 * nn_transfer_operator (\\<lambda>x. 0) x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. 0) x = 0", "by auto"], ["", "lemma nn_transfer_operator_sum:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator (\\<lambda>x. f x + g x) x = nn_transfer_operator f x + nn_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. f x + g x) x =\n               nn_transfer_operator f x + nn_transfer_operator g x", "proof (rule nn_transfer_operator_charact)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "fix A"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "assume [measurable]: \"A \\<in> sets M\""], ["proof (state)\nthis:\n  A \\<in> sets M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "have \"(\\<integral>\\<^sup>+ x. indicator A x * (nn_transfer_operator f x + nn_transfer_operator g x) \\<partial>M) =\n        (\\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x + indicator A x * nn_transfer_operator g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x *\n                           (nn_transfer_operator f x +\n                            nn_transfer_operator g x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x +\n                           indicator A x * nn_transfer_operator g x\n                       \\<partial>M", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x *\n                         (nn_transfer_operator f x +\n                          nn_transfer_operator g x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x +\n                         indicator A x * nn_transfer_operator g x\n                     \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x *\n                         (nn_transfer_operator f x +\n                          nn_transfer_operator g x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x +\n                         indicator A x * nn_transfer_operator g x\n                     \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "have \"... = (\\<integral>\\<^sup>+x. indicator A x * nn_transfer_operator f x \\<partial>M) + (\\<integral>\\<^sup>+x. indicator A x * nn_transfer_operator g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x +\n                           indicator A x * nn_transfer_operator g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                       \\<partial>M +\n    \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                       \\<partial>M", "by (rule nn_integral_add, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x +\n                         indicator A x * nn_transfer_operator g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                     \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x +\n                         indicator A x * nn_transfer_operator g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                     \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "have \"... = (\\<integral>\\<^sup>+x. indicator A (T x) * f x \\<partial>M) + (\\<integral>\\<^sup>+x. indicator A (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                       \\<partial>M +\n    \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M +\n    \\<integral>\\<^sup>+ x. indicator A (T x) * g x \\<partial>M", "by (simp add: nn_transfer_operator_intg)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A (T x) * g x \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator f x\n                     \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A (T x) * g x \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "have \"... = (\\<integral>\\<^sup>+x. indicator A (T x) * f x + indicator A (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M +\n    \\<integral>\\<^sup>+ x. indicator A (T x) * g x \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * f x + indicator A (T x) * g x\n                       \\<partial>M", "by (rule nn_integral_add[symmetric], auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A (T x) * g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x + indicator A (T x) * g x\n                     \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M +\n  \\<integral>\\<^sup>+ x. indicator A (T x) * g x \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x + indicator A (T x) * g x\n                     \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "have \"... = (\\<integral>\\<^sup>+x. indicator A (T x) * (f x + g x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A (T x) * f x + indicator A (T x) * g x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A (T x) * f x + indicator A (T x) * g x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x *\n                              (nn_transfer_operator f x +\n                               nn_transfer_operator g x)\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n 2. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 3. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. indicator A x *\n                         (nn_transfer_operator f x +\n                          nn_transfer_operator g x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M", "show \"(\\<integral>\\<^sup>+ x. indicator A x * (nn_transfer_operator f x + nn_transfer_operator g x) \\<partial>M) = (\\<integral>\\<^sup>+x. indicator A (T x) * (f x + g x) \\<partial>M)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. indicator A x *\n                         (nn_transfer_operator f x +\n                          nn_transfer_operator g x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator A x *\n                           (nn_transfer_operator f x +\n                            nn_transfer_operator g x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator A x *\n                         (nn_transfer_operator f x +\n                          nn_transfer_operator g x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. indicator A (T x) * (f x + g x) \\<partial>M\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. f x + g x) \\<in> borel_measurable M\n 2. (\\<lambda>x. nn_transfer_operator f x + nn_transfer_operator g x)\n    \\<in> borel_measurable M", "qed (auto simp add: assms)"], ["", "lemma nn_transfer_operator_cong:\n  assumes \"AE x in M. f x = g x\"\n      and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator f x = nn_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x = nn_transfer_operator g x", "apply (rule nn_transfer_operator_charact)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. indicator A x * nn_transfer_operator g x\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ x. indicator A (T x) * f x \\<partial>M\n 2. f \\<in> borel_measurable M\n 3. nn_transfer_operator g \\<in> borel_measurable M", "apply (auto simp add: nn_transfer_operator_intg assms intro!: nn_integral_cong_AE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       AE x in M. indicator A (T x) * g x = indicator A (T x) * f x", "using assms"], ["proof (prove)\nusing this:\n  AE x in M. f x = g x\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       AE x in M. indicator A (T x) * g x = indicator A (T x) * f x", "by auto"], ["", "lemma nn_transfer_operator_mono:\n  assumes \"AE x in M. f x \\<le> g x\"\n      and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "define h where \"h = (\\<lambda>x. g x - f x)\""], ["proof (state)\nthis:\n  h = (\\<lambda>x. g x - f x)\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "have [measurable]: \"h \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> borel_measurable M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. g x - f x) \\<in> borel_measurable M", "by simp"], ["proof (state)\nthis:\n  h \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "have *: \"AE x in M. g x = f x + h x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. g x = f x + h x", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. g x = f x + (g x - f x)", "using assms(1)"], ["proof (prove)\nusing this:\n  AE x in M. f x \\<le> g x\n\ngoal (1 subgoal):\n 1. AE x in M. g x = f x + (g x - f x)", "by (auto simp: ennreal_ineq_diff_add)"], ["proof (state)\nthis:\n  AE x in M. g x = f x + h x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "have \"AE x in M. nn_transfer_operator g x = nn_transfer_operator (\\<lambda>x. f x + h x) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator g x =\n               nn_transfer_operator (\\<lambda>x. f x + h x) x", "by (rule nn_transfer_operator_cong) (auto simp add: * assms)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator (\\<lambda>x. f x + h x) x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "moreover"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator (\\<lambda>x. f x + h x) x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "have \"AE x in M. nn_transfer_operator (\\<lambda>x. f x + h x) x = nn_transfer_operator f x + nn_transfer_operator h x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. f x + h x) x =\n               nn_transfer_operator f x + nn_transfer_operator h x", "by (rule nn_transfer_operator_sum) (auto simp add: assms)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. f x + h x) x =\n             nn_transfer_operator f x + nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator (\\<lambda>x. f x + h x) x\n  AE x in M. nn_transfer_operator (\\<lambda>x. f x + h x) x =\n             nn_transfer_operator f x + nn_transfer_operator h x", "have \"AE x in M. nn_transfer_operator g x = nn_transfer_operator f x + nn_transfer_operator h x\""], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator (\\<lambda>x. f x + h x) x\n  AE x in M. nn_transfer_operator (\\<lambda>x. f x + h x) x =\n             nn_transfer_operator f x + nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator g x =\n               nn_transfer_operator f x + nn_transfer_operator h x", "by auto"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator f x + nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "then"], ["proof (chain)\npicking this:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator f x + nn_transfer_operator h x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator g x =\n             nn_transfer_operator f x + nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x", "by force"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator f x \\<le> nn_transfer_operator g x\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>The transfer operator on real functions\\<close>"], ["", "text \\<open>Once the transfer operator of positive functions is defined, the definition for real-valued\nfunctions follows readily, by taking the difference of positive and negative parts.\n\\<close>"], ["", "definition real_transfer_operator :: \"('a \\<Rightarrow> real) \\<Rightarrow> ('a \\<Rightarrow> real)\" where\n  \"real_transfer_operator f =\n    (\\<lambda>x. enn2real(nn_transfer_operator (\\<lambda>x. ennreal (f x)) x) - enn2real(nn_transfer_operator (\\<lambda>x. ennreal (-f x)) x))\""], ["", "lemma borel_measurable_transfer_operator [measurable]:\n  \"real_transfer_operator f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_transfer_operator f \\<in> borel_measurable M", "unfolding real_transfer_operator_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        enn2real (nn_transfer_operator (\\<lambda>x. ennreal (f x)) x) -\n        enn2real (nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x))\n    \\<in> borel_measurable M", "by auto"], ["", "lemma borel_measurable_transfer_operator_iterates [measurable]:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"(real_transfer_operator^^n) f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real_transfer_operator ^^ n) f \\<in> borel_measurable M", "by (cases n, auto)"], ["", "lemma real_transfer_operator_abs:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. abs (real_transfer_operator f x) \\<le> nn_transfer_operator (\\<lambda>x. ennreal (abs(f x))) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "define fp where \"fp = (\\<lambda>x. ennreal (f x))\""], ["proof (state)\nthis:\n  fp = (\\<lambda>x. ennreal (f x))\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "define fm where \"fm = (\\<lambda>x. ennreal (- f x))\""], ["proof (state)\nthis:\n  fm = (\\<lambda>x. ennreal (- f x))\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "have [measurable]: \"fp \\<in> borel_measurable M\" \"fm \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fp \\<in> borel_measurable M &&& fm \\<in> borel_measurable M", "unfolding fp_def fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal (f x)) \\<in> borel_measurable M &&&\n    (\\<lambda>x. ennreal (- f x)) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  fp \\<in> borel_measurable M\n  fm \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "have eq: \"\\<And>x. ennreal \\<bar>f x\\<bar> = fp x + fm x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. ennreal \\<bar>f x\\<bar> = fp x + fm x", "unfolding fp_def fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. ennreal \\<bar>f x\\<bar> = ennreal (f x) + ennreal (- f x)", "by (simp add: abs_real_def ennreal_neg)"], ["proof (state)\nthis:\n  ennreal \\<bar>f ?x3\\<bar> = fp ?x3 + fm ?x3\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "{"], ["proof (state)\nthis:\n  ennreal \\<bar>f ?x3\\<bar> = fp ?x3 + fm ?x3\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "assume H: \"nn_transfer_operator (\\<lambda>x. fp x + fm x) x = nn_transfer_operator fp x + nn_transfer_operator fm x\""], ["proof (state)\nthis:\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) x =\n  nn_transfer_operator fp x + nn_transfer_operator fm x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "have \"\\<bar>real_transfer_operator f x\\<bar> \\<le> \\<bar>enn2real(nn_transfer_operator fp x)\\<bar> + \\<bar>enn2real(nn_transfer_operator fm x)\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>real_transfer_operator f x\\<bar>\n    \\<le> \\<bar>enn2real (nn_transfer_operator fp x)\\<bar> +\n          \\<bar>enn2real (nn_transfer_operator fm x)\\<bar>", "unfolding real_transfer_operator_def fp_def fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>enn2real (nn_transfer_operator (\\<lambda>x. ennreal (f x)) x) -\n          enn2real\n           (nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x)\\<bar>\n    \\<le> \\<bar>enn2real\n                 (nn_transfer_operator (\\<lambda>x. ennreal (f x))\n                   x)\\<bar> +\n          \\<bar>enn2real\n                 (nn_transfer_operator (\\<lambda>x. ennreal (- f x))\n                   x)\\<bar>", "by (auto intro: abs_triangle_ineq4 simp del: enn2real_nonneg)"], ["proof (state)\nthis:\n  \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> \\<bar>enn2real (nn_transfer_operator fp x)\\<bar> +\n        \\<bar>enn2real (nn_transfer_operator fm x)\\<bar>\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "from ennreal_leI[OF this]"], ["proof (chain)\npicking this:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> ennreal\n         (\\<bar>enn2real (nn_transfer_operator fp x)\\<bar> +\n          \\<bar>enn2real (nn_transfer_operator fm x)\\<bar>)", "have \"abs(real_transfer_operator f x) \\<le> nn_transfer_operator fp x + nn_transfer_operator fm x\""], ["proof (prove)\nusing this:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> ennreal\n         (\\<bar>enn2real (nn_transfer_operator fp x)\\<bar> +\n          \\<bar>enn2real (nn_transfer_operator fm x)\\<bar>)\n\ngoal (1 subgoal):\n 1. ennreal \\<bar>real_transfer_operator f x\\<bar>\n    \\<le> nn_transfer_operator fp x + nn_transfer_operator fm x", "by simp (metis add.commute ennreal_enn2real le_iff_add not_le top_unique)"], ["proof (state)\nthis:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> nn_transfer_operator fp x + nn_transfer_operator fm x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "also"], ["proof (state)\nthis:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> nn_transfer_operator fp x + nn_transfer_operator fm x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "have \"... = nn_transfer_operator (\\<lambda>x. fp x + fm x) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nn_transfer_operator fp x + nn_transfer_operator fm x =\n    nn_transfer_operator (\\<lambda>x. fp x + fm x) x", "using H"], ["proof (prove)\nusing this:\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) x =\n  nn_transfer_operator fp x + nn_transfer_operator fm x\n\ngoal (1 subgoal):\n 1. nn_transfer_operator fp x + nn_transfer_operator fm x =\n    nn_transfer_operator (\\<lambda>x. fp x + fm x) x", "by simp"], ["proof (state)\nthis:\n  nn_transfer_operator fp x + nn_transfer_operator fm x =\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "finally"], ["proof (chain)\npicking this:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x", "have \"abs(real_transfer_operator f x) \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\""], ["proof (prove)\nusing this:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\n\ngoal (1 subgoal):\n 1. ennreal \\<bar>real_transfer_operator f x\\<bar>\n    \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x", "by simp"], ["proof (state)\nthis:\n  ennreal \\<bar>real_transfer_operator f x\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "}"], ["proof (state)\nthis:\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5 =\n  nn_transfer_operator fp ?x5 +\n  nn_transfer_operator fm ?x5 \\<Longrightarrow>\n  ennreal \\<bar>real_transfer_operator f ?x5\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "moreover"], ["proof (state)\nthis:\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5 =\n  nn_transfer_operator fp ?x5 +\n  nn_transfer_operator fm ?x5 \\<Longrightarrow>\n  ennreal \\<bar>real_transfer_operator f ?x5\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "have \"AE x in M. nn_transfer_operator (\\<lambda>x. fp x + fm x) x = nn_transfer_operator fp x + nn_transfer_operator fm x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. fp x + fm x) x =\n               nn_transfer_operator fp x + nn_transfer_operator fm x", "by (rule nn_transfer_operator_sum) (auto simp add: fp_def fm_def)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. fp x + fm x) x =\n             nn_transfer_operator fp x + nn_transfer_operator fm x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "ultimately"], ["proof (chain)\npicking this:\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5 =\n  nn_transfer_operator fp ?x5 +\n  nn_transfer_operator fm ?x5 \\<Longrightarrow>\n  ennreal \\<bar>real_transfer_operator f ?x5\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5\n  AE x in M. nn_transfer_operator (\\<lambda>x. fp x + fm x) x =\n             nn_transfer_operator fp x + nn_transfer_operator fm x", "have \"AE x in M. abs(real_transfer_operator f x) \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\""], ["proof (prove)\nusing this:\n  nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5 =\n  nn_transfer_operator fp ?x5 +\n  nn_transfer_operator fm ?x5 \\<Longrightarrow>\n  ennreal \\<bar>real_transfer_operator f ?x5\\<bar>\n  \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) ?x5\n  AE x in M. nn_transfer_operator (\\<lambda>x. fp x + fm x) x =\n             nn_transfer_operator fp x + nn_transfer_operator fm x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x", "by auto"], ["proof (state)\nthis:\n  AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n             \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "then"], ["proof (chain)\npicking this:\n  AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n             \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n             \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "using eq"], ["proof (prove)\nusing this:\n  AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n             \\<le> nn_transfer_operator (\\<lambda>x. fp x + fm x) x\n  ennreal \\<bar>f ?x3\\<bar> = fp ?x3 + fm ?x3\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n               \\<le> nn_transfer_operator\n                      (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x", "by simp"], ["proof (state)\nthis:\n  AE x in M. ennreal \\<bar>real_transfer_operator f x\\<bar>\n             \\<le> nn_transfer_operator\n                    (\\<lambda>x. ennreal \\<bar>f x\\<bar>) x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The next lemma shows that the transfer operator as we have defined it satisfies the basic\nduality relation $\\int \\hat T f \\cdot g = \\int f \\cdot g \\circ T$. It follows from the same relation\nfor nonnegative functions, and splitting into positive and negative parts.\n\nMoreover, this relation characterizes the transfer operator. Hence, once this lemma is proved, we\nwill never come back to the original definition of the transfer operator.\\<close>"], ["", "lemma real_transfer_operator_intg_fpos:\n  assumes \"integrable M (\\<lambda>x. f (T x) * g x)\" and f_pos[simp]: \"\\<And>x. f x \\<ge> 0\" and\n          [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"integrable M (\\<lambda>x. f x * real_transfer_operator g x)\"\n        \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x) &&&\n    LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "define gp where \"gp = (\\<lambda>x. ennreal (g x))\""], ["proof (state)\nthis:\n  gp = (\\<lambda>x. ennreal (g x))\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "define gm where \"gm = (\\<lambda>x. ennreal (- g x))\""], ["proof (state)\nthis:\n  gm = (\\<lambda>x. ennreal (- g x))\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have [measurable]: \"gp \\<in> borel_measurable M\" \"gm \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gp \\<in> borel_measurable M &&& gm \\<in> borel_measurable M", "unfolding gp_def gm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal (g x)) \\<in> borel_measurable M &&&\n    (\\<lambda>x. ennreal (- g x)) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  gp \\<in> borel_measurable M\n  gm \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "define h where \"h = (\\<lambda>x. ennreal(abs(g x)))\""], ["proof (state)\nthis:\n  h = (\\<lambda>x. ennreal \\<bar>g x\\<bar>)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have hgpgm: \"\\<And>x. h x = gp x + gm x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. h x = gp x + gm x", "unfolding gp_def gm_def h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. ennreal \\<bar>g x\\<bar> = ennreal (g x) + ennreal (- g x)", "by (simp add: abs_real_def ennreal_neg)"], ["proof (state)\nthis:\n  h ?x3 = gp ?x3 + gm ?x3\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have [measurable]: \"h \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> borel_measurable M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal \\<bar>g x\\<bar>) \\<in> borel_measurable M", "by simp"], ["proof (state)\nthis:\n  h \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have pos[simp]: \"\\<And>x. h x \\<ge> 0\" \"\\<And>x. gp x \\<ge> 0\" \"\\<And>x. gm x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x. 0 \\<le> h x) &&&\n    (\\<And>x. 0 \\<le> gp x) &&& (\\<And>x. 0 \\<le> gm x)", "unfolding h_def gp_def gm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x. 0 \\<le> ennreal \\<bar>g x\\<bar>) &&&\n    (\\<And>x. 0 \\<le> ennreal (g x)) &&& (\\<And>x. 0 \\<le> ennreal (- g x))", "by simp_all"], ["proof (state)\nthis:\n  0 \\<le> h ?x3\n  0 \\<le> gp ?x3\n  0 \\<le> gm ?x3\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have gp_real: \"\\<And>x. enn2real(gp x) = max (g x) 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. enn2real (gp x) = max (g x) 0", "unfolding gp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. enn2real (ennreal (g x)) = max (g x) 0", "by (simp add: max_def ennreal_neg)"], ["proof (state)\nthis:\n  enn2real (gp ?x3) = max (g ?x3) 0\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have gm_real: \"\\<And>x. enn2real(gm x) = max (-g x) 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. enn2real (gm x) = max (- g x) 0", "unfolding gm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. enn2real (ennreal (- g x)) = max (- g x) 0", "by (simp add: max_def ennreal_neg)"], ["proof (state)\nthis:\n  enn2real (gm ?x3) = max (- g ?x3) 0\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+ x. norm(f (T x) * max (g x) 0) \\<partial>M) \\<le> (\\<integral>\\<^sup>+ x. norm(f (T x) * g x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0))\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M", "by (simp add: nn_integral_mono)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "using assms(1)"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. f (T x) * g x)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "by (simp add: integrable_iff_bounded)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  < \\<infinity>", "have \"(\\<integral>\\<^sup>+ x. norm(f (T x) * max (g x) 0) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0))\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  < \\<infinity>", "have int1: \"integrable M (\\<lambda>x. f (T x) * max (g x) 0)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (g x) 0)) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f (T x) * max (g x) 0)", "by (simp add: integrableI_bounded)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f (T x) * max (g x) 0)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+ x. norm(f (T x) * max (-g x) 0) \\<partial>M) \\<le> (\\<integral>\\<^sup>+ x. norm(f (T x) * g x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M", "by (simp add: nn_integral_mono)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "using assms(1)"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. f (T x) * g x)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "by (simp add: integrable_iff_bounded)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  < \\<infinity>", "have \"(\\<integral>\\<^sup>+ x. norm(f (T x) * max (-g x) 0) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  < \\<infinity>", "have int2: \"integrable M (\\<lambda>x. f (T x) * max (-g x) 0)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * max (- g x) 0))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f (T x) * max (- g x) 0)", "by (simp add: integrableI_bounded)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f (T x) * max (- g x) 0)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+x. f x * nn_transfer_operator h x \\<partial>M) = (\\<integral>\\<^sup>+x. f (T x) * h x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x)) * h x \\<partial>M", "by (rule nn_transfer_operator_intg) auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * h x \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * h x \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"\\<dots> = \\<integral>\\<^sup>+ x. ennreal (f (T x) * max (g x) 0 + f (T x) * max (- g x) 0) \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f (T x)) * h x \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (f (T x) * max (g x) 0 +\n                             f (T x) * max (- g x) 0)\n                       \\<partial>M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f (T x)) * ennreal \\<bar>g x\\<bar>\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (f (T x) * max (g x) 0 +\n                             f (T x) * max (- g x) 0)\n                       \\<partial>M", "by (intro nn_integral_cong)(auto simp: ennreal_mult[symmetric] abs_mult split: split_max)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * h x \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f (T x) * max (g x) 0 + f (T x) * max (- g x) 0)\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * h x \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f (T x) * max (g x) 0 + f (T x) * max (- g x) 0)\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f (T x) * max (g x) 0 +\n                             f (T x) * max (- g x) 0)\n                       \\<partial>M\n    < \\<infinity>", "using Bochner_Integration.integrable_add[OF int1 int2, THEN integrableD(2)]"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f (T x) * max (g x) 0 + f (T x) * max (- g x) 0)\n                     \\<partial>M \\<noteq>\n  \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f (T x) * max (g x) 0 +\n                             f (T x) * max (- g x) 0)\n                       \\<partial>M\n    < \\<infinity>", "by (auto simp add: less_top)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f (T x) * max (g x) 0 + f (T x) * max (- g x) 0)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M\n  < \\<infinity>", "have *: \"(\\<integral>\\<^sup>+x. f x * nn_transfer_operator h x \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+x. norm(f x * real_transfer_operator g x) \\<partial>M) = (\\<integral>\\<^sup>+x. f x * abs(real_transfer_operator g x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (f x * \\<bar>real_transfer_operator g x\\<bar>)\n                       \\<partial>M", "by (simp add: abs_mult)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * \\<bar>real_transfer_operator g x\\<bar>)\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * \\<bar>real_transfer_operator g x\\<bar>)\n                     \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... \\<le> (\\<integral>\\<^sup>+x. f x * nn_transfer_operator h x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f x * \\<bar>real_transfer_operator g x\\<bar>)\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                             \\<partial>M", "proof (rule nn_integral_mono_AE)"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "assume *: \"abs(real_transfer_operator g x) \\<le> nn_transfer_operator h x\""], ["proof (state)\nthis:\n  ennreal \\<bar>real_transfer_operator g x\\<bar>\n  \\<le> nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "have \"ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>) = f x * ennreal(\\<bar>real_transfer_operator g x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>) =\n    ennreal (f x) * ennreal \\<bar>real_transfer_operator g x\\<bar>", "by (simp add: ennreal_mult)"], ["proof (state)\nthis:\n  ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>) =\n  ennreal (f x) * ennreal \\<bar>real_transfer_operator g x\\<bar>\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "also"], ["proof (state)\nthis:\n  ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>) =\n  ennreal (f x) * ennreal \\<bar>real_transfer_operator g x\\<bar>\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "have \"... \\<le> f x * nn_transfer_operator h x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (f x) * ennreal \\<bar>real_transfer_operator g x\\<bar>\n    \\<le> ennreal (f x) * nn_transfer_operator h x", "using *"], ["proof (prove)\nusing this:\n  ennreal \\<bar>real_transfer_operator g x\\<bar>\n  \\<le> nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. ennreal (f x) * ennreal \\<bar>real_transfer_operator g x\\<bar>\n    \\<le> ennreal (f x) * nn_transfer_operator h x", "by (auto intro!: mult_left_mono)"], ["proof (state)\nthis:\n  ennreal (f x) * ennreal \\<bar>real_transfer_operator g x\\<bar>\n  \\<le> ennreal (f x) * nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "finally"], ["proof (chain)\npicking this:\n  ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n  \\<le> ennreal (f x) * nn_transfer_operator h x", "have \"ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>) \\<le> f x * nn_transfer_operator h x\""], ["proof (prove)\nusing this:\n  ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n  \\<le> ennreal (f x) * nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n    \\<le> ennreal (f x) * nn_transfer_operator h x", "by simp"], ["proof (state)\nthis:\n  ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n  \\<le> ennreal (f x) * nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "}"], ["proof (state)\nthis:\n  ennreal \\<bar>real_transfer_operator g ?x5\\<bar>\n  \\<le> nn_transfer_operator h ?x5 \\<Longrightarrow>\n  ennreal (f ?x5 * \\<bar>real_transfer_operator g ?x5\\<bar>)\n  \\<le> ennreal (f ?x5) * nn_transfer_operator h ?x5\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "then"], ["proof (chain)\npicking this:\n  ennreal \\<bar>real_transfer_operator g ?x5\\<bar>\n  \\<le> nn_transfer_operator h ?x5 \\<Longrightarrow>\n  ennreal (f ?x5 * \\<bar>real_transfer_operator g ?x5\\<bar>)\n  \\<le> ennreal (f ?x5) * nn_transfer_operator h ?x5", "show \"AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>) \\<le> f x * nn_transfer_operator h x\""], ["proof (prove)\nusing this:\n  ennreal \\<bar>real_transfer_operator g ?x5\\<bar>\n  \\<le> nn_transfer_operator h ?x5 \\<Longrightarrow>\n  ennreal (f ?x5 * \\<bar>real_transfer_operator g ?x5\\<bar>)\n  \\<le> ennreal (f ?x5) * nn_transfer_operator h ?x5\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "using real_transfer_operator_abs[OF assms(4)] h_def"], ["proof (prove)\nusing this:\n  ennreal \\<bar>real_transfer_operator g ?x5\\<bar>\n  \\<le> nn_transfer_operator h ?x5 \\<Longrightarrow>\n  ennreal (f ?x5 * \\<bar>real_transfer_operator g ?x5\\<bar>)\n  \\<le> ennreal (f ?x5) * nn_transfer_operator h ?x5\n  AE x in M. ennreal \\<bar>real_transfer_operator g x\\<bar>\n             \\<le> nn_transfer_operator\n                    (\\<lambda>x. ennreal \\<bar>g x\\<bar>) x\n  h = (\\<lambda>x. ennreal \\<bar>g x\\<bar>)\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "by auto"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x * \\<bar>real_transfer_operator g x\\<bar>)\n             \\<le> ennreal (f x) * nn_transfer_operator h x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * \\<bar>real_transfer_operator g x\\<bar>)\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M", "have **: \"(\\<integral>\\<^sup>+x. norm(f x * real_transfer_operator g x) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                       \\<partial>M\n    < \\<infinity>", "using *"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                       \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "show \"integrable M (\\<lambda>x. f x * real_transfer_operator g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)", "using **"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f x * real_transfer_operator g x))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)", "by (intro integrableI_bounded) auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+x. f x * nn_transfer_operator gp x \\<partial>M) \\<le> (\\<integral>\\<^sup>+x. f x * nn_transfer_operator h x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                             \\<partial>M", "proof (rule nn_integral_mono_AE)"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gp x\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "have \"AE x in M. nn_transfer_operator gp x \\<le> nn_transfer_operator h x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator gp x \\<le> nn_transfer_operator h x", "by (rule nn_transfer_operator_mono) (auto simp add: hgpgm)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator gp x \\<le> nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gp x\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "then"], ["proof (chain)\npicking this:\n  AE x in M. nn_transfer_operator gp x \\<le> nn_transfer_operator h x", "show \"AE x in M. f x * nn_transfer_operator gp x \\<le> f x * nn_transfer_operator h x\""], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator gp x \\<le> nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gp x\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "by (auto simp: mult_left_mono)"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x) * nn_transfer_operator gp x\n             \\<le> ennreal (f x) * nn_transfer_operator h x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M", "have a: \"(\\<integral>\\<^sup>+x. f x * nn_transfer_operator gp x \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M\n    < \\<infinity>", "using *"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"ennreal(norm(f x * enn2real(nn_transfer_operator gp x))) \\<le> f x * nn_transfer_operator gp x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (norm (f x * enn2real (nn_transfer_operator gp x)))\n    \\<le> ennreal (f x) * nn_transfer_operator gp x", "by (auto simp add: ennreal_mult intro!: mult_left_mono)\n       (metis enn2real_ennreal enn2real_nonneg le_cases le_ennreal_iff)"], ["proof (state)\nthis:\n  ennreal (norm (f ?x3 * enn2real (nn_transfer_operator gp ?x3)))\n  \\<le> ennreal (f ?x3) * nn_transfer_operator gp ?x3\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  ennreal (norm (f ?x3 * enn2real (nn_transfer_operator gp ?x3)))\n  \\<le> ennreal (f ?x3) * nn_transfer_operator gp ?x3", "have \"(\\<integral>\\<^sup>+x. norm(f x * enn2real(nn_transfer_operator gp x)) \\<partial>M) \\<le> (\\<integral>\\<^sup>+x. f x * nn_transfer_operator gp x \\<partial>M)\""], ["proof (prove)\nusing this:\n  ennreal (norm (f ?x3 * enn2real (nn_transfer_operator gp ?x3)))\n  \\<le> ennreal (f ?x3) * nn_transfer_operator gp ?x3\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (f x * enn2real (nn_transfer_operator gp x)))\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                             \\<partial>M", "by (simp add: nn_integral_mono)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                           \\<partial>M", "have \"(\\<integral>\\<^sup>+x. norm(f x * enn2real(nn_transfer_operator gp x)) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (f x * enn2real (nn_transfer_operator gp x)))\n                       \\<partial>M\n    < \\<infinity>", "using a"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                           \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (f x * enn2real (nn_transfer_operator gp x)))\n                       \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  < \\<infinity>", "have gp_int: \"integrable M (\\<lambda>x. f x * enn2real(nn_transfer_operator gp x))\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gp x)))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * enn2real (nn_transfer_operator gp x))", "by (simp add: integrableI_bounded)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * enn2real (nn_transfer_operator gp x))\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have gp_fin: \"AE x in M. f x * nn_transfer_operator gp x \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gp x \\<noteq>\n               \\<infinity>", "apply (rule nn_integral_PInf_AE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. ennreal (f x) * nn_transfer_operator gp x)\n    \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M \\<noteq>\n    \\<infinity>", "using a"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. ennreal (f x) * nn_transfer_operator gp x)\n    \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M \\<noteq>\n    \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x) * nn_transfer_operator gp x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral> x. f x * enn2real(nn_transfer_operator gp x) \\<partial>M) = enn2real (\\<integral>\\<^sup>+ x. f x * enn2real(nn_transfer_operator gp x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M)", "by (rule integral_eq_nn_integral) auto"], ["proof (state)\nthis:\n  LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = enn2real(\\<integral>\\<^sup>+ x. ennreal(f (T x) * enn2real(gp x)) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "assume \"f x * nn_transfer_operator gp x \\<noteq> \\<infinity>\""], ["proof (state)\nthis:\n  ennreal (f x) * nn_transfer_operator gp x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  ennreal (f x) * nn_transfer_operator gp x \\<noteq> \\<infinity>", "have \"ennreal (f x * enn2real (nn_transfer_operator gp x)) = ennreal (f x) * nn_transfer_operator gp x\""], ["proof (prove)\nusing this:\n  ennreal (f x) * nn_transfer_operator gp x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n    ennreal (f x) * nn_transfer_operator gp x", "by (auto simp add: ennreal_mult ennreal_mult_eq_top_iff less_top intro!: ennreal_mult_left_cong)"], ["proof (state)\nthis:\n  ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n  ennreal (f x) * nn_transfer_operator gp x\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "}"], ["proof (state)\nthis:\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gp ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gp ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5", "have \"AE x in M. ennreal (f x * enn2real (nn_transfer_operator gp x)) = ennreal (f x) * nn_transfer_operator gp x\""], ["proof (prove)\nusing this:\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gp ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n               ennreal (f x) * nn_transfer_operator gp x", "using gp_fin"], ["proof (prove)\nusing this:\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gp ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gp ?x5\n  AE x in M. ennreal (f x) * nn_transfer_operator gp x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n               ennreal (f x) * nn_transfer_operator gp x", "by auto"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n             ennreal (f x) * nn_transfer_operator gp x\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  AE x in M. ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n             ennreal (f x) * nn_transfer_operator gp x", "have \"(\\<integral>\\<^sup>+ x. f x * enn2real(nn_transfer_operator gp x) \\<partial>M) = (\\<integral>\\<^sup>+ x. f x * nn_transfer_operator gp x \\<partial>M)\""], ["proof (prove)\nusing this:\n  AE x in M. ennreal (f x * enn2real (nn_transfer_operator gp x)) =\n             ennreal (f x) * nn_transfer_operator gp x\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M", "by (rule nn_integral_cong_AE)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "have \"... = (\\<integral>\\<^sup>+ x. f (T x) * gp x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gp x \\<partial>M", "by (rule nn_transfer_operator_intg) (auto simp add: gp_def)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gp x \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gp x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gp x \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "have \"... = (\\<integral>\\<^sup>+ x. ennreal(f (T x) * enn2real(gp x)) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gp x \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M", "by (rule nn_integral_cong_AE) (auto simp: ennreal_mult gp_def)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gp x \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M", "have \"(\\<integral>\\<^sup>+ x. f x * enn2real(nn_transfer_operator gp x) \\<partial>M) = (\\<integral>\\<^sup>+ x. ennreal(f (T x) * enn2real(gp x)) \\<partial>M)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gp x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gp x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M)", "by simp"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gp x))\n                       \\<partial>M) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x)) \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f (T x) * enn2real(gp x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                         \\<partial>M) =\n    LINT x|M. f (T x) * enn2real (gp x)", "by (rule integral_eq_nn_integral[symmetric]) (auto simp add: gp_def)"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gp x))\n                       \\<partial>M) =\n  LINT x|M. f (T x) * enn2real (gp x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n  LINT x|M. f (T x) * enn2real (gp x)", "have gp_expr: \"(\\<integral> x. f x * enn2real(nn_transfer_operator gp x) \\<partial>M) = (\\<integral> x. f (T x) * enn2real(gp x) \\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n  LINT x|M. f (T x) * enn2real (gp x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n    LINT x|M. f (T x) * enn2real (gp x)", "by simp"], ["proof (state)\nthis:\n  LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n  LINT x|M. f (T x) * enn2real (gp x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+x. f x * nn_transfer_operator gm x \\<partial>M) \\<le> (\\<integral>\\<^sup>+x. f x * nn_transfer_operator h x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                             \\<partial>M", "proof (rule nn_integral_mono_AE)"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gm x\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "have \"AE x in M. nn_transfer_operator gm x \\<le> nn_transfer_operator h x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator gm x \\<le> nn_transfer_operator h x", "by (rule nn_transfer_operator_mono) (auto simp add: hgpgm)"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator gm x \\<le> nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gm x\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "then"], ["proof (chain)\npicking this:\n  AE x in M. nn_transfer_operator gm x \\<le> nn_transfer_operator h x", "show \"AE x in M. f x * nn_transfer_operator gm x \\<le> f x * nn_transfer_operator h x\""], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator gm x \\<le> nn_transfer_operator h x\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gm x\n               \\<le> ennreal (f x) * nn_transfer_operator h x", "by (auto simp: mult_left_mono)"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x) * nn_transfer_operator gm x\n             \\<le> ennreal (f x) * nn_transfer_operator h x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M", "have a: \"(\\<integral>\\<^sup>+x. f x * nn_transfer_operator gm x \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M\n    < \\<infinity>", "using *"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                           \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator h x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"\\<And>x. ennreal(norm(f x * enn2real(nn_transfer_operator gm x))) \\<le> f x * nn_transfer_operator gm x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       ennreal (norm (f x * enn2real (nn_transfer_operator gm x)))\n       \\<le> ennreal (f x) * nn_transfer_operator gm x", "by (auto simp add: ennreal_mult intro!: mult_left_mono)\n       (metis enn2real_ennreal enn2real_nonneg le_cases le_ennreal_iff)"], ["proof (state)\nthis:\n  ennreal (norm (f ?x3 * enn2real (nn_transfer_operator gm ?x3)))\n  \\<le> ennreal (f ?x3) * nn_transfer_operator gm ?x3\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  ennreal (norm (f ?x3 * enn2real (nn_transfer_operator gm ?x3)))\n  \\<le> ennreal (f ?x3) * nn_transfer_operator gm ?x3", "have \"(\\<integral>\\<^sup>+x. norm(f x * enn2real(nn_transfer_operator gm x)) \\<partial>M) \\<le> (\\<integral>\\<^sup>+x. f x * nn_transfer_operator gm x \\<partial>M)\""], ["proof (prove)\nusing this:\n  ennreal (norm (f ?x3 * enn2real (nn_transfer_operator gm ?x3)))\n  \\<le> ennreal (f ?x3) * nn_transfer_operator gm ?x3\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (f x * enn2real (nn_transfer_operator gm x)))\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                             \\<partial>M", "by (simp add: nn_integral_mono)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                           \\<partial>M", "have \"(\\<integral>\\<^sup>+x. norm(f x * enn2real(nn_transfer_operator gm x)) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                           \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (f x * enn2real (nn_transfer_operator gm x)))\n                       \\<partial>M\n    < \\<infinity>", "using a"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                           \\<partial>M\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (f x * enn2real (nn_transfer_operator gm x)))\n                       \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  < \\<infinity>", "have gm_int: \"integrable M (\\<lambda>x. f x * enn2real(nn_transfer_operator gm x))\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (f x * enn2real (nn_transfer_operator gm x)))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * enn2real (nn_transfer_operator gm x))", "by (simp add: integrableI_bounded)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * enn2real (nn_transfer_operator gm x))\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have gm_fin: \"AE x in M. f x * nn_transfer_operator gm x \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x) * nn_transfer_operator gm x \\<noteq>\n               \\<infinity>", "apply (rule nn_integral_PInf_AE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. ennreal (f x) * nn_transfer_operator gm x)\n    \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M \\<noteq>\n    \\<infinity>", "using a"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. ennreal (f x) * nn_transfer_operator gm x)\n    \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M \\<noteq>\n    \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x) * nn_transfer_operator gm x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral> x. f x * enn2real(nn_transfer_operator gm x) \\<partial>M) = enn2real (\\<integral>\\<^sup>+ x. f x * enn2real(nn_transfer_operator gm x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M)", "by (rule integral_eq_nn_integral) auto"], ["proof (state)\nthis:\n  LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = enn2real(\\<integral>\\<^sup>+ x. ennreal(f (T x) * enn2real(gm x)) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "assume \"f x * nn_transfer_operator gm x \\<noteq> \\<infinity>\""], ["proof (state)\nthis:\n  ennreal (f x) * nn_transfer_operator gm x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  ennreal (f x) * nn_transfer_operator gm x \\<noteq> \\<infinity>", "have \"ennreal (f x * enn2real (nn_transfer_operator gm x)) = ennreal (f x) * nn_transfer_operator gm x\""], ["proof (prove)\nusing this:\n  ennreal (f x) * nn_transfer_operator gm x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n    ennreal (f x) * nn_transfer_operator gm x", "by (auto simp add: ennreal_mult ennreal_mult_eq_top_iff less_top intro!: ennreal_mult_left_cong)"], ["proof (state)\nthis:\n  ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n  ennreal (f x) * nn_transfer_operator gm x\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "}"], ["proof (state)\nthis:\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gm ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gm ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5", "have \"AE x in M. ennreal (f x * enn2real (nn_transfer_operator gm x)) = ennreal (f x) * nn_transfer_operator gm x\""], ["proof (prove)\nusing this:\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gm ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n               ennreal (f x) * nn_transfer_operator gm x", "using gm_fin"], ["proof (prove)\nusing this:\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5 \\<noteq>\n  \\<infinity> \\<Longrightarrow>\n  ennreal (f ?x5 * enn2real (nn_transfer_operator gm ?x5)) =\n  ennreal (f ?x5) * nn_transfer_operator gm ?x5\n  AE x in M. ennreal (f x) * nn_transfer_operator gm x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n               ennreal (f x) * nn_transfer_operator gm x", "by auto"], ["proof (state)\nthis:\n  AE x in M. ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n             ennreal (f x) * nn_transfer_operator gm x\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  AE x in M. ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n             ennreal (f x) * nn_transfer_operator gm x", "have \"(\\<integral>\\<^sup>+ x. f x * enn2real(nn_transfer_operator gm x) \\<partial>M) = (\\<integral>\\<^sup>+ x. f x * nn_transfer_operator gm x \\<partial>M)\""], ["proof (prove)\nusing this:\n  AE x in M. ennreal (f x * enn2real (nn_transfer_operator gm x)) =\n             ennreal (f x) * nn_transfer_operator gm x\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M", "by (rule nn_integral_cong_AE)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "have \"... = (\\<integral>\\<^sup>+ x. f (T x) * gm x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gm x \\<partial>M", "by (rule nn_transfer_operator_intg) (auto simp add: gm_def)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gm x \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f x) * nn_transfer_operator gm x\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gm x \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "have \"... = (\\<integral>\\<^sup>+ x. ennreal(f (T x) * enn2real(gm x)) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gm x \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M", "by (rule nn_integral_cong_AE) (auto simp: ennreal_mult gm_def)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (f (T x)) * gm x \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M", "have \"(\\<integral>\\<^sup>+ x. f x * enn2real(nn_transfer_operator gm x) \\<partial>M) = (\\<integral>\\<^sup>+ x. ennreal(f (T x) * enn2real(gm x)) \\<partial>M)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (f x * enn2real (nn_transfer_operator gm x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M\n\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal\n                              (f x * enn2real (nn_transfer_operator gm x))\n                         \\<partial>M) =\n    enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M)", "by simp"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal\n                            (f x * enn2real (nn_transfer_operator gm x))\n                       \\<partial>M) =\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x)) \\<partial>M)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f (T x) * enn2real(gm x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. enn2real\n     (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                         \\<partial>M) =\n    LINT x|M. f (T x) * enn2real (gm x)", "by (rule integral_eq_nn_integral[symmetric]) (auto simp add: gm_def)"], ["proof (state)\nthis:\n  enn2real\n   (\\<integral>\\<^sup>+ x. ennreal (f (T x) * enn2real (gm x))\n                       \\<partial>M) =\n  LINT x|M. f (T x) * enn2real (gm x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n  LINT x|M. f (T x) * enn2real (gm x)", "have gm_expr: \"(\\<integral> x. f x * enn2real(nn_transfer_operator gm x) \\<partial>M) = (\\<integral> x. f (T x) * enn2real(gm x) \\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n  LINT x|M. f (T x) * enn2real (gm x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n    LINT x|M. f (T x) * enn2real (gm x)", "by simp"], ["proof (state)\nthis:\n  LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n  LINT x|M. f (T x) * enn2real (gm x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. f x * enn2real(nn_transfer_operator gp x) - f x * enn2real(nn_transfer_operator gm x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x =\n    LINT x|M.\n       f x * enn2real (nn_transfer_operator gp x) -\n       f x * enn2real (nn_transfer_operator gm x)", "unfolding real_transfer_operator_def gp_def gm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       f x *\n       (enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x) -\n        enn2real (nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x)) =\n    LINT x|M.\n       f x * enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x) -\n       f x * enn2real (nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x)", "by (simp add: right_diff_distrib)"], ["proof (state)\nthis:\n  LINT x|M. f x * real_transfer_operator g x =\n  LINT x|M.\n     f x * enn2real (nn_transfer_operator gp x) -\n     f x * enn2real (nn_transfer_operator gm x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  LINT x|M. f x * real_transfer_operator g x =\n  LINT x|M.\n     f x * enn2real (nn_transfer_operator gp x) -\n     f x * enn2real (nn_transfer_operator gm x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f x * enn2real(nn_transfer_operator gp x) \\<partial>M) - (\\<integral> x. f x * enn2real(nn_transfer_operator gm x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       f x * enn2real (nn_transfer_operator gp x) -\n       f x * enn2real (nn_transfer_operator gm x) =\n    (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n    (LINT x|M. f x * enn2real (nn_transfer_operator gm x))", "by (rule Bochner_Integration.integral_diff) (simp_all add: gp_int gm_int)"], ["proof (state)\nthis:\n  LINT x|M.\n     f x * enn2real (nn_transfer_operator gp x) -\n     f x * enn2real (nn_transfer_operator gm x) =\n  (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n  (LINT x|M. f x * enn2real (nn_transfer_operator gm x))\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     f x * enn2real (nn_transfer_operator gp x) -\n     f x * enn2real (nn_transfer_operator gm x) =\n  (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n  (LINT x|M. f x * enn2real (nn_transfer_operator gm x))\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f (T x) * enn2real(gp x) \\<partial>M) - (\\<integral> x. f (T x) * enn2real(gm x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n    (LINT x|M. f x * enn2real (nn_transfer_operator gm x)) =\n    (LINT x|M. f (T x) * enn2real (gp x)) -\n    (LINT x|M. f (T x) * enn2real (gm x))", "using gp_expr gm_expr"], ["proof (prove)\nusing this:\n  LINT x|M. f x * enn2real (nn_transfer_operator gp x) =\n  LINT x|M. f (T x) * enn2real (gp x)\n  LINT x|M. f x * enn2real (nn_transfer_operator gm x) =\n  LINT x|M. f (T x) * enn2real (gm x)\n\ngoal (1 subgoal):\n 1. (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n    (LINT x|M. f x * enn2real (nn_transfer_operator gm x)) =\n    (LINT x|M. f (T x) * enn2real (gp x)) -\n    (LINT x|M. f (T x) * enn2real (gm x))", "by simp"], ["proof (state)\nthis:\n  (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n  (LINT x|M. f x * enn2real (nn_transfer_operator gm x)) =\n  (LINT x|M. f (T x) * enn2real (gp x)) -\n  (LINT x|M. f (T x) * enn2real (gm x))\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  (LINT x|M. f x * enn2real (nn_transfer_operator gp x)) -\n  (LINT x|M. f x * enn2real (nn_transfer_operator gm x)) =\n  (LINT x|M. f (T x) * enn2real (gp x)) -\n  (LINT x|M. f (T x) * enn2real (gm x))\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f (T x) * max (g x) 0 \\<partial>M) - (\\<integral> x. f (T x) * max (-g x) 0 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. f (T x) * enn2real (gp x)) -\n    (LINT x|M. f (T x) * enn2real (gm x)) =\n    (LINT x|M. f (T x) * max (g x) 0) - (LINT x|M. f (T x) * max (- g x) 0)", "using gp_real gm_real"], ["proof (prove)\nusing this:\n  enn2real (gp ?x3) = max (g ?x3) 0\n  enn2real (gm ?x3) = max (- g ?x3) 0\n\ngoal (1 subgoal):\n 1. (LINT x|M. f (T x) * enn2real (gp x)) -\n    (LINT x|M. f (T x) * enn2real (gm x)) =\n    (LINT x|M. f (T x) * max (g x) 0) - (LINT x|M. f (T x) * max (- g x) 0)", "by simp"], ["proof (state)\nthis:\n  (LINT x|M. f (T x) * enn2real (gp x)) -\n  (LINT x|M. f (T x) * enn2real (gm x)) =\n  (LINT x|M. f (T x) * max (g x) 0) - (LINT x|M. f (T x) * max (- g x) 0)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  (LINT x|M. f (T x) * enn2real (gp x)) -\n  (LINT x|M. f (T x) * enn2real (gm x)) =\n  (LINT x|M. f (T x) * max (g x) 0) - (LINT x|M. f (T x) * max (- g x) 0)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f (T x) * max (g x) 0 - f (T x) * max (-g x) 0 \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. f (T x) * max (g x) 0) -\n    (LINT x|M. f (T x) * max (- g x) 0) =\n    LINT x|M. f (T x) * max (g x) 0 - f (T x) * max (- g x) 0", "by (rule Bochner_Integration.integral_diff[symmetric]) (simp_all add: int1 int2)"], ["proof (state)\nthis:\n  (LINT x|M. f (T x) * max (g x) 0) - (LINT x|M. f (T x) * max (- g x) 0) =\n  LINT x|M. f (T x) * max (g x) 0 - f (T x) * max (- g x) 0\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  (LINT x|M. f (T x) * max (g x) 0) - (LINT x|M. f (T x) * max (- g x) 0) =\n  LINT x|M. f (T x) * max (g x) 0 - f (T x) * max (- g x) 0\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral>x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f (T x) * max (g x) 0 - f (T x) * max (- g x) 0 =\n    LINT x|M. f (T x) * g x", "by (metis (mono_tags, hide_lams) diff_0 diff_zero eq_iff max.cobounded2 max_def minus_minus neg_le_0_iff_le right_diff_distrib)"], ["proof (state)\nthis:\n  LINT x|M. f (T x) * max (g x) 0 - f (T x) * max (- g x) 0 =\n  LINT x|M. f (T x) * g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "show \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral>x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "by simp"], ["proof (state)\nthis:\n  LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_intg:\n  assumes \"integrable M (\\<lambda>x. f (T x) * g x)\" and\n          [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"integrable M (\\<lambda>x. f x * real_transfer_operator g x)\"\n        \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x) &&&\n    LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "define fp where \"fp = (\\<lambda>x. max (f x) 0)\""], ["proof (state)\nthis:\n  fp = (\\<lambda>x. max (f x) 0)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "define fm where \"fm = (\\<lambda>x. max (-f x) 0)\""], ["proof (state)\nthis:\n  fm = (\\<lambda>x. max (- f x) 0)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have [measurable]: \"fp \\<in> borel_measurable M\" \"fm \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fp \\<in> borel_measurable M &&& fm \\<in> borel_measurable M", "unfolding fp_def fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. max (f x) 0) \\<in> borel_measurable M &&&\n    (\\<lambda>x. max (- f x) 0) \\<in> borel_measurable M", "by simp_all"], ["proof (state)\nthis:\n  fp \\<in> borel_measurable M\n  fm \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+ x. norm(fp (T x) * g x) \\<partial>M) \\<le> (\\<integral>\\<^sup>+ x. norm(f (T x) * g x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M", "by (simp add: fp_def nn_integral_mono)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "using assms(1)"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. f (T x) * g x)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "by (simp add: integrable_iff_bounded)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  < \\<infinity>", "have \"(\\<integral>\\<^sup>+ x. norm(fp (T x) * g x) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  < \\<infinity>", "have intp: \"integrable M (\\<lambda>x. fp (T x) * g x)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fp (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. fp (T x) * g x)", "by (simp add: integrableI_bounded)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. fp (T x) * g x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "moreover"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. fp (T x) * g x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"\\<And>x. fp x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> fp x", "unfolding fp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> max (f x) 0", "by simp"], ["proof (state)\nthis:\n  0 \\<le> fp ?x3\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "ultimately"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. fp (T x) * g x)\n  0 \\<le> fp ?x3", "have Rp: \"integrable M (\\<lambda>x. fp x * real_transfer_operator g x)\"\n    \"(\\<integral> x. fp x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. fp (T x) * g x \\<partial>M)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fp (T x) * g x)\n  0 \\<le> fp ?x3\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. fp x * real_transfer_operator g x) &&&\n    LINT x|M. fp x * real_transfer_operator g x = LINT x|M. fp (T x) * g x", "using real_transfer_operator_intg_fpos"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fp (T x) * g x)\n  0 \\<le> fp ?x3\n  \\<lbrakk>integrable M (\\<lambda>x. ?f (T x) * ?g x);\n   \\<And>x. 0 \\<le> ?f x; ?f \\<in> borel_measurable M;\n   ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> integrable M\n                     (\\<lambda>x. ?f x * real_transfer_operator ?g x)\n  \\<lbrakk>integrable M (\\<lambda>x. ?f (T x) * ?g x);\n   \\<And>x. 0 \\<le> ?f x; ?f \\<in> borel_measurable M;\n   ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> LINT x|M. ?f x * real_transfer_operator ?g x =\n                    LINT x|M. ?f (T x) * ?g x\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. fp x * real_transfer_operator g x) &&&\n    LINT x|M. fp x * real_transfer_operator g x = LINT x|M. fp (T x) * g x", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. fp x * real_transfer_operator g x)\n  LINT x|M. fp x * real_transfer_operator g x = LINT x|M. fp (T x) * g x\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral>\\<^sup>+ x. norm(fm (T x) * g x) \\<partial>M) \\<le> (\\<integral>\\<^sup>+ x. norm(f (T x) * g x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M", "by (simp add: fm_def nn_integral_mono)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "using assms(1)"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. f (T x) * g x)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n    < \\<infinity>", "by (simp add: integrable_iff_bounded)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (f (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  < \\<infinity>", "have \"(\\<integral>\\<^sup>+ x. norm(fm (T x) * g x) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  < \\<infinity>", "have intm: \"integrable M (\\<lambda>x. fm (T x) * g x)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (norm (fm (T x) * g x)) \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. fm (T x) * g x)", "by (simp add: integrableI_bounded)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. fm (T x) * g x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "moreover"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. fm (T x) * g x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"\\<And>x. fm x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> fm x", "unfolding fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> max (- f x) 0", "by simp"], ["proof (state)\nthis:\n  0 \\<le> fm ?x3\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "ultimately"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>x. fm (T x) * g x)\n  0 \\<le> fm ?x3", "have Rm: \"integrable M (\\<lambda>x. fm x * real_transfer_operator g x)\"\n    \"(\\<integral> x. fm x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. fm (T x) * g x \\<partial>M)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fm (T x) * g x)\n  0 \\<le> fm ?x3\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. fm x * real_transfer_operator g x) &&&\n    LINT x|M. fm x * real_transfer_operator g x = LINT x|M. fm (T x) * g x", "using real_transfer_operator_intg_fpos"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fm (T x) * g x)\n  0 \\<le> fm ?x3\n  \\<lbrakk>integrable M (\\<lambda>x. ?f (T x) * ?g x);\n   \\<And>x. 0 \\<le> ?f x; ?f \\<in> borel_measurable M;\n   ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> integrable M\n                     (\\<lambda>x. ?f x * real_transfer_operator ?g x)\n  \\<lbrakk>integrable M (\\<lambda>x. ?f (T x) * ?g x);\n   \\<And>x. 0 \\<le> ?f x; ?f \\<in> borel_measurable M;\n   ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> LINT x|M. ?f x * real_transfer_operator ?g x =\n                    LINT x|M. ?f (T x) * ?g x\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. fm x * real_transfer_operator g x) &&&\n    LINT x|M. fm x * real_transfer_operator g x = LINT x|M. fm (T x) * g x", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. fm x * real_transfer_operator g x)\n  LINT x|M. fm x * real_transfer_operator g x = LINT x|M. fm (T x) * g x\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"integrable M (\\<lambda>x. fp x * real_transfer_operator g x - fm x * real_transfer_operator g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x.\n         fp x * real_transfer_operator g x -\n         fm x * real_transfer_operator g x)", "using Rp(1) Rm(1) integrable_diff"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fp x * real_transfer_operator g x)\n  integrable M (\\<lambda>x. fm x * real_transfer_operator g x)\n  \\<lbrakk>?f integrable_on ?S; ?g integrable_on ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x - ?g x) integrable_on ?S\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x.\n         fp x * real_transfer_operator g x -\n         fm x * real_transfer_operator g x)", "by simp"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x.\n       fp x * real_transfer_operator g x -\n       fm x * real_transfer_operator g x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "moreover"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x.\n       fp x * real_transfer_operator g x -\n       fm x * real_transfer_operator g x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have *: \"\\<And>x. f x * real_transfer_operator g x = fp x * real_transfer_operator g x - fm x * real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       f x * real_transfer_operator g x =\n       fp x * real_transfer_operator g x - fm x * real_transfer_operator g x", "unfolding fp_def fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       f x * real_transfer_operator g x =\n       max (f x) 0 * real_transfer_operator g x -\n       max (- f x) 0 * real_transfer_operator g x", "by (simp add: max_def)"], ["proof (state)\nthis:\n  f ?x3 * real_transfer_operator g ?x3 =\n  fp ?x3 * real_transfer_operator g ?x3 -\n  fm ?x3 * real_transfer_operator g ?x3\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n 2. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "ultimately"], ["proof (chain)\npicking this:\n  integrable M\n   (\\<lambda>x.\n       fp x * real_transfer_operator g x -\n       fm x * real_transfer_operator g x)\n  f ?x3 * real_transfer_operator g ?x3 =\n  fp ?x3 * real_transfer_operator g ?x3 -\n  fm ?x3 * real_transfer_operator g ?x3", "show \"integrable M (\\<lambda>x. f x * real_transfer_operator g x)\""], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>x.\n       fp x * real_transfer_operator g x -\n       fm x * real_transfer_operator g x)\n  f ?x3 * real_transfer_operator g ?x3 =\n  fp ?x3 * real_transfer_operator g ?x3 -\n  fm ?x3 * real_transfer_operator g ?x3\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x * real_transfer_operator g x)", "by simp"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. f x * real_transfer_operator g x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. fp x * real_transfer_operator g x - fm x * real_transfer_operator g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x =\n    LINT x|M.\n       fp x * real_transfer_operator g x - fm x * real_transfer_operator g x", "using *"], ["proof (prove)\nusing this:\n  f ?x3 * real_transfer_operator g ?x3 =\n  fp ?x3 * real_transfer_operator g ?x3 -\n  fm ?x3 * real_transfer_operator g ?x3\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x =\n    LINT x|M.\n       fp x * real_transfer_operator g x - fm x * real_transfer_operator g x", "by simp"], ["proof (state)\nthis:\n  LINT x|M. f x * real_transfer_operator g x =\n  LINT x|M.\n     fp x * real_transfer_operator g x - fm x * real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  LINT x|M. f x * real_transfer_operator g x =\n  LINT x|M.\n     fp x * real_transfer_operator g x - fm x * real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. fp x * real_transfer_operator g x \\<partial>M) - (\\<integral> x. fm x * real_transfer_operator g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       fp x * real_transfer_operator g x -\n       fm x * real_transfer_operator g x =\n    (LINT x|M. fp x * real_transfer_operator g x) -\n    (LINT x|M. fm x * real_transfer_operator g x)", "using Rp(1) Rm(1)"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fp x * real_transfer_operator g x)\n  integrable M (\\<lambda>x. fm x * real_transfer_operator g x)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       fp x * real_transfer_operator g x -\n       fm x * real_transfer_operator g x =\n    (LINT x|M. fp x * real_transfer_operator g x) -\n    (LINT x|M. fm x * real_transfer_operator g x)", "by simp"], ["proof (state)\nthis:\n  LINT x|M.\n     fp x * real_transfer_operator g x - fm x * real_transfer_operator g x =\n  (LINT x|M. fp x * real_transfer_operator g x) -\n  (LINT x|M. fm x * real_transfer_operator g x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     fp x * real_transfer_operator g x - fm x * real_transfer_operator g x =\n  (LINT x|M. fp x * real_transfer_operator g x) -\n  (LINT x|M. fm x * real_transfer_operator g x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. fp (T x) * g x \\<partial>M) - (\\<integral> x. fm (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. fp x * real_transfer_operator g x) -\n    (LINT x|M. fm x * real_transfer_operator g x) =\n    (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x)", "using Rp(2) Rm(2)"], ["proof (prove)\nusing this:\n  LINT x|M. fp x * real_transfer_operator g x = LINT x|M. fp (T x) * g x\n  LINT x|M. fm x * real_transfer_operator g x = LINT x|M. fm (T x) * g x\n\ngoal (1 subgoal):\n 1. (LINT x|M. fp x * real_transfer_operator g x) -\n    (LINT x|M. fm x * real_transfer_operator g x) =\n    (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x)", "by simp"], ["proof (state)\nthis:\n  (LINT x|M. fp x * real_transfer_operator g x) -\n  (LINT x|M. fm x * real_transfer_operator g x) =\n  (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  (LINT x|M. fp x * real_transfer_operator g x) -\n  (LINT x|M. fm x * real_transfer_operator g x) =\n  (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x)\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. fp (T x) * g x - fm (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x) =\n    LINT x|M. fp (T x) * g x - fm (T x) * g x", "using intm intp"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. fm (T x) * g x)\n  integrable M (\\<lambda>x. fp (T x) * g x)\n\ngoal (1 subgoal):\n 1. (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x) =\n    LINT x|M. fp (T x) * g x - fm (T x) * g x", "by simp"], ["proof (state)\nthis:\n  (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x) =\n  LINT x|M. fp (T x) * g x - fm (T x) * g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "also"], ["proof (state)\nthis:\n  (LINT x|M. fp (T x) * g x) - (LINT x|M. fm (T x) * g x) =\n  LINT x|M. fp (T x) * g x - fm (T x) * g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "have \"... = (\\<integral> x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. fp (T x) * g x - fm (T x) * g x = LINT x|M. f (T x) * g x", "unfolding fp_def fm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. max (f (T x)) 0 * g x - max (- f (T x)) 0 * g x =\n    LINT x|M. f (T x) * g x", "by (metis (no_types, hide_lams) diff_0 diff_zero max.commute\n    max_def minus_minus mult.commute neg_le_iff_le right_diff_distrib)"], ["proof (state)\nthis:\n  LINT x|M. fp (T x) * g x - fm (T x) * g x = LINT x|M. f (T x) * g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "show \"(\\<integral> x. f x * real_transfer_operator g x \\<partial>M) = (\\<integral> x. f (T x) * g x \\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x\n\ngoal (1 subgoal):\n 1. LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x", "by simp"], ["proof (state)\nthis:\n  LINT x|M. f x * real_transfer_operator g x = LINT x|M. f (T x) * g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_int [intro]:\n  assumes \"integrable M f\"\n  shows \"integrable M (real_transfer_operator f)\"\n        \"(\\<integral>x. real_transfer_operator f x \\<partial>M) = (\\<integral>x. f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (real_transfer_operator f) &&&\n    integral\\<^sup>L M (real_transfer_operator f) = integral\\<^sup>L M f", "using real_transfer_operator_intg[where ?f = \"\\<lambda>x. 1\" and ?g = f] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable M (\\<lambda>x. 1 * f x);\n   (\\<lambda>x. 1) \\<in> borel_measurable M;\n   f \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> integrable M\n                     (\\<lambda>x. 1 * real_transfer_operator f x)\n  \\<lbrakk>integrable M (\\<lambda>x. 1 * f x);\n   (\\<lambda>x. 1) \\<in> borel_measurable M;\n   f \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> LINT x|M. 1 * real_transfer_operator f x =\n                    LINT x|M. 1 * f x\n  integrable M f\n\ngoal (1 subgoal):\n 1. integrable M (real_transfer_operator f) &&&\n    integral\\<^sup>L M (real_transfer_operator f) = integral\\<^sup>L M f", "by auto"], ["", "lemma real_transfer_operator_charact:\n  assumes \"\\<And>A. A \\<in> sets M \\<Longrightarrow> (\\<integral>x. indicator A x * g x \\<partial>M) = (\\<integral>x. indicator A (T x) * f x \\<partial>M)\"\n      and [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator f x = g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = g x", "proof (rule AE_symmetric[OF density_unique_real])"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "fix A"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "assume [measurable]: \"A \\<in> sets M\""], ["proof (state)\nthis:\n  A \\<in> sets M\n\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "have \"set_lebesgue_integral M A (real_transfer_operator f) = (\\<integral>x. indicator A x * real_transfer_operator f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_lebesgue_integral M A (real_transfer_operator f) =\n    LINT x|M. indicat_real A x * real_transfer_operator f x", "unfolding set_lebesgue_integral_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A x *\\<^sub>R real_transfer_operator f x =\n    LINT x|M. indicat_real A x * real_transfer_operator f x", "by auto"], ["proof (state)\nthis:\n  set_lebesgue_integral M A (real_transfer_operator f) =\n  LINT x|M. indicat_real A x * real_transfer_operator f x\n\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "also"], ["proof (state)\nthis:\n  set_lebesgue_integral M A (real_transfer_operator f) =\n  LINT x|M. indicat_real A x * real_transfer_operator f x\n\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "have \"... = (\\<integral>x. indicator A (T x) * f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A x * real_transfer_operator f x =\n    LINT x|M. indicat_real A (T x) * f x", "apply (rule real_transfer_operator_intg, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. indicat_real A (T x) * f x)", "by (rule Bochner_Integration.integrable_bound[of _ \"\\<lambda>x. abs(f x)\"], auto simp add: assms indicator_def)"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A x * real_transfer_operator f x =\n  LINT x|M. indicat_real A (T x) * f x\n\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "also"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A x * real_transfer_operator f x =\n  LINT x|M. indicat_real A (T x) * f x\n\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "have \"... = set_lebesgue_integral M A g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A (T x) * f x = set_lebesgue_integral M A g", "unfolding set_lebesgue_integral_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A (T x) * f x =\n    LINT x|M. indicat_real A x *\\<^sub>R g x", "using assms(1)[OF \\<open>A \\<in> sets M\\<close>]"], ["proof (prove)\nusing this:\n  LINT x|M. indicat_real A x * g x = LINT x|M. indicat_real A (T x) * f x\n\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A (T x) * f x =\n    LINT x|M. indicat_real A x *\\<^sub>R g x", "by auto"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A (T x) * f x = set_lebesgue_integral M A g\n\ngoal (3 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)\n 3. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       set_lebesgue_integral M A g =\n       set_lebesgue_integral M A (real_transfer_operator f)", "finally"], ["proof (chain)\npicking this:\n  set_lebesgue_integral M A (real_transfer_operator f) =\n  set_lebesgue_integral M A g", "show \"set_lebesgue_integral M A g = set_lebesgue_integral M A (real_transfer_operator f)\""], ["proof (prove)\nusing this:\n  set_lebesgue_integral M A (real_transfer_operator f) =\n  set_lebesgue_integral M A g\n\ngoal (1 subgoal):\n 1. set_lebesgue_integral M A g =\n    set_lebesgue_integral M A (real_transfer_operator f)", "by simp"], ["proof (state)\nthis:\n  set_lebesgue_integral M A g =\n  set_lebesgue_integral M A (real_transfer_operator f)\n\ngoal (2 subgoals):\n 1. integrable M g\n 2. integrable M (real_transfer_operator f)", "qed (auto simp add: assms real_transfer_operator_int)"], ["", "lemma (in mpt) real_transfer_operator_foT:\n  assumes \"integrable M f\"\n  shows \"AE x in M. real_transfer_operator (f o T) x = f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (f \\<circ> T) x = f x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (f \\<circ> T) x = f x", "have *: \"(\\<integral> x. indicator A x * f x \\<partial>M) = (\\<integral>x. indicator A (T x) * f (T x) \\<partial>M)\" if [measurable]: \"A \\<in> sets M\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A x * f x =\n    LINT x|M. indicat_real A (T x) * f (T x)", "apply (subst T_integral_preserving)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>a. indicat_real A a * f a)\n 2. LINT x|M. indicat_real A x * f x = LINT x|M. indicat_real A x * f x", "using integrable_real_mult_indicator[OF that assms]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. f x * indicat_real A x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>a. indicat_real A a * f a)\n 2. LINT x|M. indicat_real A x * f x = LINT x|M. indicat_real A x * f x", "by (auto simp add: mult.commute)"], ["proof (state)\nthis:\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  LINT x|M. indicat_real ?A3 x * f x =\n  LINT x|M. indicat_real ?A3 (T x) * f (T x)\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (f \\<circ> T) x = f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (f \\<circ> T) x = f x", "apply (rule real_transfer_operator_charact)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M. indicat_real A x * f x =\n       LINT x|M. indicat_real A (T x) * (f \\<circ> T) x\n 2. integrable M (f \\<circ> T)\n 3. integrable M f", "using assms *"], ["proof (prove)\nusing this:\n  integrable M f\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  LINT x|M. indicat_real ?A3 x * f x =\n  LINT x|M. indicat_real ?A3 (T x) * f (T x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M. indicat_real A x * f x =\n       LINT x|M. indicat_real A (T x) * (f \\<circ> T) x\n 2. integrable M (f \\<circ> T)\n 3. integrable M f", "by (auto simp add: comp_def T_integral_preserving)"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator (f \\<circ> T) x = f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_foT_g:\n  assumes [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\" \"integrable M (\\<lambda>x. f (T x) * g x)\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x = f x * real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * real_transfer_operator g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * real_transfer_operator g x", "have *: \"(\\<integral>x. indicator A x * (f x * real_transfer_operator g x) \\<partial>M) = (\\<integral>x. indicator A (T x) * (f (T x) * g x) \\<partial>M)\"\n    if [measurable]: \"A \\<in> sets M\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A x * (f x * real_transfer_operator g x) =\n    LINT x|M. indicat_real A (T x) * (f (T x) * g x)", "apply (simp add: mult.assoc[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A x * f x * real_transfer_operator g x =\n    LINT x|M. indicat_real A (T x) * f (T x) * g x", "apply (subst real_transfer_operator_intg)"], ["proof (prove)\ngoal (4 subgoals):\n 1. integrable M (\\<lambda>x. indicat_real A (T x) * f (T x) * g x)\n 2. (\\<lambda>x. indicat_real A x * f x) \\<in> borel_measurable M\n 3. g \\<in> borel_measurable M\n 4. LINT x|M. indicat_real A (T x) * f (T x) * g x =\n    LINT x|M. indicat_real A (T x) * f (T x) * g x", "apply (rule Bochner_Integration.integrable_bound[of _ \"(\\<lambda>x. f (T x) * g x)\"])"], ["proof (prove)\ngoal (6 subgoals):\n 1. integrable M (\\<lambda>x. f (T x) * g x)\n 2. (\\<lambda>x. indicat_real A (T x) * f (T x) * g x)\n    \\<in> borel_measurable M\n 3. AE x in M. norm (indicat_real A (T x) * f (T x) * g x)\n               \\<le> norm (f (T x) * g x)\n 4. (\\<lambda>x. indicat_real A x * f x) \\<in> borel_measurable M\n 5. g \\<in> borel_measurable M\n 6. LINT x|M. indicat_real A (T x) * f (T x) * g x =\n    LINT x|M. indicat_real A (T x) * f (T x) * g x", "by (auto simp add: assms indicator_def)"], ["proof (state)\nthis:\n  ?A3 \\<in> sets M \\<Longrightarrow>\n  LINT x|M. indicat_real ?A3 x * (f x * real_transfer_operator g x) =\n  LINT x|M. indicat_real ?A3 (T x) * (f (T x) * g x)\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * real_transfer_operator g x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n               f x * real_transfer_operator g x", "by (rule real_transfer_operator_charact) (auto simp add: assms * intro!: real_transfer_operator_intg)"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator (\\<lambda>x. f (T x) * g x) x =\n             f x * real_transfer_operator g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_add [intro]:\n  assumes [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f x + g x) x = real_transfer_operator f x + real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x + g x) x =\n               real_transfer_operator f x + real_transfer_operator g x", "proof (rule real_transfer_operator_charact)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)\n 3. integrable M\n     (\\<lambda>x. real_transfer_operator f x + real_transfer_operator g x)", "have \"integrable M (real_transfer_operator f)\" \"integrable M (real_transfer_operator g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (real_transfer_operator f) &&&\n    integrable M (real_transfer_operator g)", "using real_transfer_operator_int(1) assms"], ["proof (prove)\nusing this:\n  integrable M ?f \\<Longrightarrow> integrable M (real_transfer_operator ?f)\n  integrable M f\n  integrable M g\n\ngoal (1 subgoal):\n 1. integrable M (real_transfer_operator f) &&&\n    integrable M (real_transfer_operator g)", "by auto"], ["proof (state)\nthis:\n  integrable M (real_transfer_operator f)\n  integrable M (real_transfer_operator g)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)\n 3. integrable M\n     (\\<lambda>x. real_transfer_operator f x + real_transfer_operator g x)", "then"], ["proof (chain)\npicking this:\n  integrable M (real_transfer_operator f)\n  integrable M (real_transfer_operator g)", "show \"integrable M (\\<lambda>x. real_transfer_operator f x + real_transfer_operator g x)\""], ["proof (prove)\nusing this:\n  integrable M (real_transfer_operator f)\n  integrable M (real_transfer_operator g)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. real_transfer_operator f x + real_transfer_operator g x)", "by auto"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. real_transfer_operator f x + real_transfer_operator g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "fix A"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "assume [measurable]: \"A \\<in> sets M\""], ["proof (state)\nthis:\n  A \\<in> sets M\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have intAf: \"integrable M (\\<lambda>x. indicator A (T x) * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. indicat_real A (T x) * f x)", "apply (rule Bochner_Integration.integrable_bound[OF assms(1)])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. indicat_real A (T x) * f x) \\<in> borel_measurable M\n 2. AE x in M. norm (indicat_real A (T x) * f x) \\<le> norm (f x)", "unfolding indicator_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. (if T x \\<in> A then 1 else 0) * f x)\n    \\<in> borel_measurable M\n 2. AE x in M. norm ((if T x \\<in> A then 1 else 0) * f x) \\<le> norm (f x)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. indicat_real A (T x) * f x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have intAg: \"integrable M (\\<lambda>x. indicator A (T x) * g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. indicat_real A (T x) * g x)", "apply (rule Bochner_Integration.integrable_bound[OF assms(2)])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. indicat_real A (T x) * g x) \\<in> borel_measurable M\n 2. AE x in M. norm (indicat_real A (T x) * g x) \\<le> norm (g x)", "unfolding indicator_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. (if T x \\<in> A then 1 else 0) * g x)\n    \\<in> borel_measurable M\n 2. AE x in M. norm ((if T x \\<in> A then 1 else 0) * g x) \\<le> norm (g x)", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. indicat_real A (T x) * g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have \"(\\<integral>x. indicator A x * (real_transfer_operator f x + real_transfer_operator g x)\\<partial>M)\n      = (\\<integral>x. indicator A x * real_transfer_operator f x + indicator A x* real_transfer_operator g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       indicat_real A x *\n       (real_transfer_operator f x + real_transfer_operator g x) =\n    LINT x|M.\n       indicat_real A x * real_transfer_operator f x +\n       indicat_real A x * real_transfer_operator g x", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  LINT x|M.\n     indicat_real A x *\n     (real_transfer_operator f x + real_transfer_operator g x) =\n  LINT x|M.\n     indicat_real A x * real_transfer_operator f x +\n     indicat_real A x * real_transfer_operator g x\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     indicat_real A x *\n     (real_transfer_operator f x + real_transfer_operator g x) =\n  LINT x|M.\n     indicat_real A x * real_transfer_operator f x +\n     indicat_real A x * real_transfer_operator g x\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have \"... = (\\<integral>x. indicator A x * real_transfer_operator f x \\<partial>M) + (\\<integral>x. indicator A x * real_transfer_operator g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       indicat_real A x * real_transfer_operator f x +\n       indicat_real A x * real_transfer_operator g x =\n    (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n    (LINT x|M. indicat_real A x * real_transfer_operator g x)", "apply (rule Bochner_Integration.integral_add)"], ["proof (prove)\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. indicat_real A x * real_transfer_operator f x)\n 2. integrable M (\\<lambda>x. indicat_real A x * real_transfer_operator g x)", "using integrable_real_mult_indicator[OF \\<open>A \\<in> sets M\\<close> real_transfer_operator_int(1)[OF assms(1)]]\n          integrable_real_mult_indicator[OF \\<open>A \\<in> sets M\\<close> real_transfer_operator_int(1)[OF assms(2)]]"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>x. real_transfer_operator f x * indicat_real A x)\n  integrable M (\\<lambda>x. real_transfer_operator g x * indicat_real A x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. indicat_real A x * real_transfer_operator f x)\n 2. integrable M (\\<lambda>x. indicat_real A x * real_transfer_operator g x)", "by (auto simp add: mult.commute)"], ["proof (state)\nthis:\n  LINT x|M.\n     indicat_real A x * real_transfer_operator f x +\n     indicat_real A x * real_transfer_operator g x =\n  (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n  (LINT x|M. indicat_real A x * real_transfer_operator g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     indicat_real A x * real_transfer_operator f x +\n     indicat_real A x * real_transfer_operator g x =\n  (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n  (LINT x|M. indicat_real A x * real_transfer_operator g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have \"... = (\\<integral>x. indicator A (T x) * f x \\<partial>M) + (\\<integral>x. indicator A (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n    (LINT x|M. indicat_real A x * real_transfer_operator g x) =\n    (LINT x|M. indicat_real A (T x) * f x) +\n    (LINT x|M. indicat_real A (T x) * g x)", "using real_transfer_operator_intg(2) assms \\<open>A \\<in> sets M\\<close> intAf intAg"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable M (\\<lambda>x. ?f (T x) * ?g x);\n   ?f \\<in> borel_measurable M; ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> LINT x|M. ?f x * real_transfer_operator ?g x =\n                    LINT x|M. ?f (T x) * ?g x\n  integrable M f\n  integrable M g\n  A \\<in> sets M\n  integrable M (\\<lambda>x. indicat_real A (T x) * f x)\n  integrable M (\\<lambda>x. indicat_real A (T x) * g x)\n\ngoal (1 subgoal):\n 1. (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n    (LINT x|M. indicat_real A x * real_transfer_operator g x) =\n    (LINT x|M. indicat_real A (T x) * f x) +\n    (LINT x|M. indicat_real A (T x) * g x)", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n  (LINT x|M. indicat_real A x * real_transfer_operator g x) =\n  (LINT x|M. indicat_real A (T x) * f x) +\n  (LINT x|M. indicat_real A (T x) * g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "also"], ["proof (state)\nthis:\n  (LINT x|M. indicat_real A x * real_transfer_operator f x) +\n  (LINT x|M. indicat_real A x * real_transfer_operator g x) =\n  (LINT x|M. indicat_real A (T x) * f x) +\n  (LINT x|M. indicat_real A (T x) * g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have \"... = (\\<integral>x. indicator A (T x) * f x + indicator A (T x) * g x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. indicat_real A (T x) * f x) +\n    (LINT x|M. indicat_real A (T x) * g x) =\n    LINT x|M. indicat_real A (T x) * f x + indicat_real A (T x) * g x", "by (rule Bochner_Integration.integral_add[symmetric]) (auto simp add: assms \\<open>A \\<in> sets M\\<close> intAf intAg)"], ["proof (state)\nthis:\n  (LINT x|M. indicat_real A (T x) * f x) +\n  (LINT x|M. indicat_real A (T x) * g x) =\n  LINT x|M. indicat_real A (T x) * f x + indicat_real A (T x) * g x\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "also"], ["proof (state)\nthis:\n  (LINT x|M. indicat_real A (T x) * f x) +\n  (LINT x|M. indicat_real A (T x) * g x) =\n  LINT x|M. indicat_real A (T x) * f x + indicat_real A (T x) * g x\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "have \"... = \\<integral>x. indicator A (T x) * (f x + g x)\\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A (T x) * f x + indicat_real A (T x) * g x =\n    LINT x|M. indicat_real A (T x) * (f x + g x)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A (T x) * f x + indicat_real A (T x) * g x =\n  LINT x|M. indicat_real A (T x) * (f x + g x)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (real_transfer_operator f x + real_transfer_operator g x) =\n       LINT x|M. indicat_real A (T x) * (f x + g x)\n 2. integrable M (\\<lambda>x. f x + g x)", "finally"], ["proof (chain)\npicking this:\n  LINT x|M.\n     indicat_real A x *\n     (real_transfer_operator f x + real_transfer_operator g x) =\n  LINT x|M. indicat_real A (T x) * (f x + g x)", "show \"(\\<integral>x. indicator A x * (real_transfer_operator f x + real_transfer_operator g x)\\<partial>M) = \\<integral>x. indicator A (T x) * (f x + g x)\\<partial>M\""], ["proof (prove)\nusing this:\n  LINT x|M.\n     indicat_real A x *\n     (real_transfer_operator f x + real_transfer_operator g x) =\n  LINT x|M. indicat_real A (T x) * (f x + g x)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       indicat_real A x *\n       (real_transfer_operator f x + real_transfer_operator g x) =\n    LINT x|M. indicat_real A (T x) * (f x + g x)", "by simp"], ["proof (state)\nthis:\n  LINT x|M.\n     indicat_real A x *\n     (real_transfer_operator f x + real_transfer_operator g x) =\n  LINT x|M. indicat_real A (T x) * (f x + g x)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. f x + g x)", "qed (auto simp add: assms)"], ["", "lemma real_transfer_operator_cong:\n  assumes ae: \"AE x in M. f x = g x\" and [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\"\n  shows \"AE x in M. real_transfer_operator f x = real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "have \"AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x = nn_transfer_operator (\\<lambda>x. ennreal (g x)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x =\n               nn_transfer_operator (\\<lambda>x. ennreal (g x)) x", "apply (rule nn_transfer_operator_cong)"], ["proof (prove)\ngoal (3 subgoals):\n 1. AE x in M. ennreal (f x) = ennreal (g x)\n 2. (\\<lambda>x. ennreal (f x)) \\<in> borel_measurable M\n 3. (\\<lambda>x. ennreal (g x)) \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  AE x in M. f x = g x\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (3 subgoals):\n 1. AE x in M. ennreal (f x) = ennreal (g x)\n 2. (\\<lambda>x. ennreal (f x)) \\<in> borel_measurable M\n 3. (\\<lambda>x. ennreal (g x)) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (g x)) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "moreover"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (g x)) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "have \"AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (-f x)) x = nn_transfer_operator (\\<lambda>x. ennreal(-g x)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x =\n               nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x", "apply (rule nn_transfer_operator_cong)"], ["proof (prove)\ngoal (3 subgoals):\n 1. AE x in M. ennreal (- f x) = ennreal (- g x)\n 2. (\\<lambda>x. ennreal (- f x)) \\<in> borel_measurable M\n 3. (\\<lambda>x. ennreal (- g x)) \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  AE x in M. f x = g x\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n\ngoal (3 subgoals):\n 1. AE x in M. ennreal (- f x) = ennreal (- g x)\n 2. (\\<lambda>x. ennreal (- f x)) \\<in> borel_measurable M\n 3. (\\<lambda>x. ennreal (- g x)) \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (g x)) x\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x", "show \"AE x in M. real_transfer_operator f x = real_transfer_operator g x\""], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (g x)) x\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "unfolding real_transfer_operator_def"], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (g x)) x\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x =\n             nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x\n\ngoal (1 subgoal):\n 1. AE x in M. enn2real\n                (nn_transfer_operator (\\<lambda>x. ennreal (f x)) x) -\n               enn2real\n                (nn_transfer_operator (\\<lambda>x. ennreal (- f x)) x) =\n               enn2real\n                (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x) -\n               enn2real\n                (nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x)", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator f x = real_transfer_operator g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_cmult [intro, simp]:\n  fixes c::real\n  assumes \"integrable M f\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. c * f x) x = c * real_transfer_operator f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. c * f x) x =\n               c * real_transfer_operator f x", "by (rule real_transfer_operator_foT_g) (auto simp add: assms borel_measurable_integrable)"], ["", "lemma real_transfer_operator_cdiv [intro, simp]:\n  fixes c::real\n  assumes \"integrable M f\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f x / c) x = real_transfer_operator f x / c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x / c) x =\n               real_transfer_operator f x / c", "using real_transfer_operator_cmult[of _ \"1/c\", OF assms]"], ["proof (prove)\nusing this:\n  AE x in M. real_transfer_operator (\\<lambda>x. 1 / c * f x) x =\n             1 / c * real_transfer_operator f x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x / c) x =\n               real_transfer_operator f x / c", "by (auto simp add: divide_simps)"], ["", "lemma real_transfer_operator_diff [intro, simp]:\n  assumes [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x = real_transfer_operator f x - real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n               real_transfer_operator f x - real_transfer_operator g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n               real_transfer_operator f x - real_transfer_operator g x", "have \"AE x in M. real_transfer_operator (\\<lambda>x. f x + (- g x)) x = real_transfer_operator f x + real_transfer_operator (\\<lambda>x. -g x) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x + - g x) x =\n               real_transfer_operator f x +\n               real_transfer_operator (\\<lambda>x. - g x) x", "using real_transfer_operator_add[where ?f = f and ?g = \"\\<lambda>x. - g x\"] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable M f; integrable M (\\<lambda>x. - g x)\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_transfer_operator\n                                (\\<lambda>x. f x + - g x) x =\n                               real_transfer_operator f x +\n                               real_transfer_operator (\\<lambda>x. - g x) x\n  integrable M f\n  integrable M g\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x + - g x) x =\n               real_transfer_operator f x +\n               real_transfer_operator (\\<lambda>x. - g x) x", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator (\\<lambda>x. f x + - g x) x =\n             real_transfer_operator f x +\n             real_transfer_operator (\\<lambda>x. - g x) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n               real_transfer_operator f x - real_transfer_operator g x", "moreover"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator (\\<lambda>x. f x + - g x) x =\n             real_transfer_operator f x +\n             real_transfer_operator (\\<lambda>x. - g x) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n               real_transfer_operator f x - real_transfer_operator g x", "have \"AE x in M. real_transfer_operator (\\<lambda>x. -g x) x = - real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. - g x) x =\n               - real_transfer_operator g x", "using real_transfer_operator_cmult[where ?f = g and ?c = \"-1\"] assms(2)"], ["proof (prove)\nusing this:\n  integrable M g \\<Longrightarrow>\n  AE x in M. real_transfer_operator (\\<lambda>x. - 1 * g x) x =\n             - 1 * real_transfer_operator g x\n  integrable M g\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. - g x) x =\n               - real_transfer_operator g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator (\\<lambda>x. - g x) x =\n             - real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n               real_transfer_operator f x - real_transfer_operator g x", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. real_transfer_operator (\\<lambda>x. f x + - g x) x =\n             real_transfer_operator f x +\n             real_transfer_operator (\\<lambda>x. - g x) x\n  AE x in M. real_transfer_operator (\\<lambda>x. - g x) x =\n             - real_transfer_operator g x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. real_transfer_operator (\\<lambda>x. f x + - g x) x =\n             real_transfer_operator f x +\n             real_transfer_operator (\\<lambda>x. - g x) x\n  AE x in M. real_transfer_operator (\\<lambda>x. - g x) x =\n             - real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n               real_transfer_operator f x - real_transfer_operator g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator (\\<lambda>x. f x - g x) x =\n             real_transfer_operator f x - real_transfer_operator g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_pos [intro]:\n  assumes \"AE x in M. f x \\<ge> 0\" and [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. real_transfer_operator f x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "define g where \"g = (\\<lambda>x. max (f x) 0)\""], ["proof (state)\nthis:\n  g = (\\<lambda>x. max (f x) 0)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "have \"AE x in M. f x = g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. f x = g x", "using assms g_def"], ["proof (prove)\nusing this:\n  AE x in M. 0 \\<le> f x\n  f \\<in> borel_measurable M\n  g = (\\<lambda>x. max (f x) 0)\n\ngoal (1 subgoal):\n 1. AE x in M. f x = g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. f x = g x\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "then"], ["proof (chain)\npicking this:\n  AE x in M. f x = g x", "have *: \"AE x in M. real_transfer_operator f x = real_transfer_operator g x\""], ["proof (prove)\nusing this:\n  AE x in M. f x = g x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "using real_transfer_operator_cong g_def"], ["proof (prove)\nusing this:\n  AE x in M. f x = g x\n  \\<lbrakk>AE x in M. ?f x = ?g x; ?f \\<in> borel_measurable M;\n   ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_transfer_operator ?f x =\n                               real_transfer_operator ?g x\n  g = (\\<lambda>x. max (f x) 0)\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x = real_transfer_operator g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator f x = real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "have \"\\<And>x. g x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> g x", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> max (f x) 0", "by simp"], ["proof (state)\nthis:\n  0 \\<le> g ?x3\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "then"], ["proof (chain)\npicking this:\n  0 \\<le> g ?x3", "have \"(\\<lambda>x. ennreal(-g x)) = (\\<lambda>x. 0)\""], ["proof (prove)\nusing this:\n  0 \\<le> g ?x3\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal (- g x)) = (\\<lambda>x. 0)", "by (simp add: ennreal_neg)"], ["proof (state)\nthis:\n  (\\<lambda>x. ennreal (- g x)) = (\\<lambda>x. 0)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. ennreal (- g x)) = (\\<lambda>x. 0)", "have \"AE x in M. nn_transfer_operator (\\<lambda>x. ennreal(-g x)) x = 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. ennreal (- g x)) = (\\<lambda>x. 0)\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x = 0", "using nn_transfer_operator_zero"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ennreal (- g x)) = (\\<lambda>x. 0)\n  AE x in M. nn_transfer_operator (\\<lambda>x. 0) x = 0\n\ngoal (1 subgoal):\n 1. AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x = 0", "by simp"], ["proof (state)\nthis:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x = 0\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "then"], ["proof (chain)\npicking this:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x = 0", "have \"AE x in M. real_transfer_operator g x = enn2real(nn_transfer_operator (\\<lambda>x. ennreal (g x)) x)\""], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x = 0\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator g x =\n               enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x)", "unfolding real_transfer_operator_def"], ["proof (prove)\nusing this:\n  AE x in M. nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x = 0\n\ngoal (1 subgoal):\n 1. AE x in M. enn2real\n                (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x) -\n               enn2real\n                (nn_transfer_operator (\\<lambda>x. ennreal (- g x)) x) =\n               enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x)", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator g x =\n             enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "then"], ["proof (chain)\npicking this:\n  AE x in M. real_transfer_operator g x =\n             enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x)", "have \"AE x in M. real_transfer_operator g x \\<ge> 0\""], ["proof (prove)\nusing this:\n  AE x in M. real_transfer_operator g x =\n             enn2real (nn_transfer_operator (\\<lambda>x. ennreal (g x)) x)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 \\<le> real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "then"], ["proof (chain)\npicking this:\n  AE x in M. 0 \\<le> real_transfer_operator g x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. 0 \\<le> real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "using *"], ["proof (prove)\nusing this:\n  AE x in M. 0 \\<le> real_transfer_operator g x\n  AE x in M. real_transfer_operator f x = real_transfer_operator g x\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator f x", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 \\<le> real_transfer_operator f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_mono:\n  assumes \"AE x in M. f x \\<le> g x\" and [measurable]: \"integrable M f\" \"integrable M g\"\n  shows \"AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "have \"AE x in M. real_transfer_operator g x - real_transfer_operator f x = real_transfer_operator (\\<lambda>x. g x - f x) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator g x - real_transfer_operator f x =\n               real_transfer_operator (\\<lambda>x. g x - f x) x", "by (rule AE_symmetric[OF real_transfer_operator_diff], auto simp add: assms)"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator g x - real_transfer_operator f x =\n             real_transfer_operator (\\<lambda>x. g x - f x) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "moreover"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator g x - real_transfer_operator f x =\n             real_transfer_operator (\\<lambda>x. g x - f x) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "have \"AE x in M. real_transfer_operator (\\<lambda>x. g x - f x) x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator (\\<lambda>x. g x - f x) x", "by (rule real_transfer_operator_pos, auto simp add: assms(1))"], ["proof (state)\nthis:\n  AE x in M. 0 \\<le> real_transfer_operator (\\<lambda>x. g x - f x) x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. real_transfer_operator g x - real_transfer_operator f x =\n             real_transfer_operator (\\<lambda>x. g x - f x) x\n  AE x in M. 0 \\<le> real_transfer_operator (\\<lambda>x. g x - f x) x", "have \"AE x in M. real_transfer_operator g x - real_transfer_operator f x \\<ge> 0\""], ["proof (prove)\nusing this:\n  AE x in M. real_transfer_operator g x - real_transfer_operator f x =\n             real_transfer_operator (\\<lambda>x. g x - f x) x\n  AE x in M. 0 \\<le> real_transfer_operator (\\<lambda>x. g x - f x) x\n\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> real_transfer_operator g x -\n                       real_transfer_operator f x", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 \\<le> real_transfer_operator g x - real_transfer_operator f x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "then"], ["proof (chain)\npicking this:\n  AE x in M. 0 \\<le> real_transfer_operator g x - real_transfer_operator f x", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in M. 0 \\<le> real_transfer_operator g x - real_transfer_operator f x\n\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x", "by auto"], ["proof (state)\nthis:\n  AE x in M. real_transfer_operator f x \\<le> real_transfer_operator g x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma real_transfer_operator_sum [intro, simp]:\n  fixes f::\"'b \\<Rightarrow> 'a \\<Rightarrow> real\"\n  assumes [measurable]: \"\\<And>i. integrable M (f i)\"\n  shows \"AE x in M. real_transfer_operator (\\<lambda>x. \\<Sum>i\\<in>I. f i x) x = (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. real_transfer_operator (\\<lambda>x. \\<Sum>i\\<in>I. f i x) x =\n               (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "proof (rule real_transfer_operator_charact)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "fix A"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "assume [measurable]: \"A \\<in> sets M\""], ["proof (state)\nthis:\n  A \\<in> sets M\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have *: \"integrable M (\\<lambda>x. indicator A (T x) * f i x)\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. indicat_real A (T x) * f i x)", "apply (rule Bochner_Integration.integrable_bound[of _ \"f i\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. integrable M (f i)\n 2. (\\<lambda>x. indicat_real A (T x) * f i x) \\<in> borel_measurable M\n 3. AE x in M. norm (indicat_real A (T x) * f i x) \\<le> norm (f i x)", "by (auto simp add: assms indicator_def)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>x. indicat_real A (T x) * f ?i3 x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have **: \"integrable M (\\<lambda>x. indicator A x * real_transfer_operator (f i) x)\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. indicat_real A x * real_transfer_operator (f i) x)", "apply (rule Bochner_Integration.integrable_bound[of _ \"real_transfer_operator (f i)\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. integrable M (real_transfer_operator (f i))\n 2. (\\<lambda>x. indicat_real A x * real_transfer_operator (f i) x)\n    \\<in> borel_measurable M\n 3. AE x in M. norm (indicat_real A x * real_transfer_operator (f i) x)\n               \\<le> norm (real_transfer_operator (f i) x)", "by (auto simp add: assms indicator_def)"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. indicat_real A x * real_transfer_operator (f ?i3) x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have inti: \"(\\<integral>x. indicator A (T x) * f i x \\<partial>M) = (\\<integral>x. indicator A x * real_transfer_operator (f i) x \\<partial>M)\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A (T x) * f i x =\n    LINT x|M. indicat_real A x * real_transfer_operator (f i) x", "by (rule real_transfer_operator_intg(2)[symmetric], auto simp add: *)"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A (T x) * f ?i3 x =\n  LINT x|M. indicat_real A x * real_transfer_operator (f ?i3) x\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have \"(\\<integral>x. indicator A (T x) * (\\<Sum>i\\<in>I. f i x)\\<partial>M) = (\\<integral>x. (\\<Sum>i\\<in>I. indicator A (T x) * f i x)\\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x) =\n    LINT x|M. (\\<Sum>i\\<in>I. indicat_real A (T x) * f i x)", "by (simp add: sum_distrib_left)"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x) =\n  LINT x|M. (\\<Sum>i\\<in>I. indicat_real A (T x) * f i x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "also"], ["proof (state)\nthis:\n  LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x) =\n  LINT x|M. (\\<Sum>i\\<in>I. indicat_real A (T x) * f i x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have \"... = (\\<Sum>i\\<in>I. (\\<integral>x. indicator A (T x) * f i x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M. (\\<Sum>i\\<in>I. indicat_real A (T x) * f i x) =\n    (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x)", "by (rule Bochner_Integration.integral_sum, simp add: *)"], ["proof (state)\nthis:\n  LINT x|M. (\\<Sum>i\\<in>I. indicat_real A (T x) * f i x) =\n  (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "also"], ["proof (state)\nthis:\n  LINT x|M. (\\<Sum>i\\<in>I. indicat_real A (T x) * f i x) =\n  (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have \"... = (\\<Sum>i\\<in>I. (\\<integral>x. indicator A x * real_transfer_operator (f i) x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x) =\n    (\\<Sum>i\\<in>I.\n       LINT x|M. indicat_real A x * real_transfer_operator (f i) x)", "using inti"], ["proof (prove)\nusing this:\n  LINT x|M. indicat_real A (T x) * f ?i3 x =\n  LINT x|M. indicat_real A x * real_transfer_operator (f ?i3) x\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x) =\n    (\\<Sum>i\\<in>I.\n       LINT x|M. indicat_real A x * real_transfer_operator (f i) x)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x) =\n  (\\<Sum>i\\<in>I.\n     LINT x|M. indicat_real A x * real_transfer_operator (f i) x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I. LINT x|M. indicat_real A (T x) * f i x) =\n  (\\<Sum>i\\<in>I.\n     LINT x|M. indicat_real A x * real_transfer_operator (f i) x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have \"... = (\\<integral>x. (\\<Sum>i\\<in>I. indicator A x * real_transfer_operator (f i) x)\\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I.\n       LINT x|M. indicat_real A x * real_transfer_operator (f i) x) =\n    LINT x|M.\n       (\\<Sum>i\\<in>I. indicat_real A x * real_transfer_operator (f i) x)", "by (rule Bochner_Integration.integral_sum[symmetric], simp add: **)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I.\n     LINT x|M. indicat_real A x * real_transfer_operator (f i) x) =\n  LINT x|M.\n     (\\<Sum>i\\<in>I. indicat_real A x * real_transfer_operator (f i) x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I.\n     LINT x|M. indicat_real A x * real_transfer_operator (f i) x) =\n  LINT x|M.\n     (\\<Sum>i\\<in>I. indicat_real A x * real_transfer_operator (f i) x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "have \"... = (\\<integral>x. indicator A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)\\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       (\\<Sum>i\\<in>I. indicat_real A x * real_transfer_operator (f i) x) =\n    LINT x|M.\n       indicat_real A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "by (simp add: sum_distrib_left)"], ["proof (state)\nthis:\n  LINT x|M.\n     (\\<Sum>i\\<in>I. indicat_real A x * real_transfer_operator (f i) x) =\n  LINT x|M.\n     indicat_real A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets M \\<Longrightarrow>\n       LINT x|M.\n          indicat_real A x *\n          (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n       LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 3. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "finally"], ["proof (chain)\npicking this:\n  LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x) =\n  LINT x|M.\n     indicat_real A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "show \"(\\<integral>x. indicator A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)\\<partial>M) = (\\<integral>x. indicator A (T x) * (\\<Sum>i\\<in>I. f i x)\\<partial>M)\""], ["proof (prove)\nusing this:\n  LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x) =\n  LINT x|M.\n     indicat_real A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       indicat_real A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n    LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)", "by auto"], ["proof (state)\nthis:\n  LINT x|M.\n     indicat_real A x * (\\<Sum>i\\<in>I. real_transfer_operator (f i) x) =\n  LINT x|M. indicat_real A (T x) * (\\<Sum>i\\<in>I. f i x)\n\ngoal (2 subgoals):\n 1. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. f i x)\n 2. integrable M (\\<lambda>x. \\<Sum>i\\<in>I. real_transfer_operator (f i) x)", "qed (auto simp add: assms real_transfer_operator_int(1)[OF assms(1)])"], ["", "end"], ["", "(*of context qmpt*)"], ["", "subsection \\<open>Conservativity in terms of transfer operators\\<close>"], ["", "text \\<open>Conservativity amounts to the fact that $\\sum f(T^n x) = \\infty$ for almost every $x$\nsuch that $f(x)>0$, if $f$ is nonnegative (see Lemma \\verb+recurrent_series_infinite+).\nThere is a dual formulation, in terms of transfer\noperators, asserting that $\\sum \\hat T^n f(x) = \\infty$ for almost every $x$ such that $f(x)>0$.\nIt is proved by duality, reducing to the previous statement.\\<close>"], ["", "theorem (in conservative) recurrence_series_infinite_transfer_operator:\n  assumes [measurable]: \"f \\<in> borel_measurable M\"\n  shows \"AE x in M. f x > 0 \\<longrightarrow> (\\<Sum>n. (nn_transfer_operator^^n) f x) = \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "define A where \"A = {x \\<in> space M. f x > 0}\""], ["proof (state)\nthis:\n  A = {x \\<in> space M. 0 < f x}\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "have [measurable]: \"A \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<in> sets M", "unfolding A_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. 0 < f x} \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  A \\<in> sets M\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "have K: \"emeasure M {x \\<in> A. (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<le> K} = 0\" if \"K < \\<infinity>\" for K"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} =\n    0", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "assume \"emeasure M {x \\<in> A. (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<le> K} \\<noteq> 0\""], ["proof (state)\nthis:\n  emeasure M\n   {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  emeasure M\n   {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n  0", "have *: \"emeasure M {x \\<in> A. (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<le> K} > 0\""], ["proof (prove)\nusing this:\n  emeasure M\n   {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n  0\n\ngoal (1 subgoal):\n 1. 0 < emeasure M\n         {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}", "using not_gr_zero"], ["proof (prove)\nusing this:\n  emeasure M\n   {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n  0\n  (\\<not> (0::?'a) < ?n) = (?n = (0::?'a))\n\ngoal (1 subgoal):\n 1. 0 < emeasure M\n         {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}", "by blast"], ["proof (state)\nthis:\n  0 < emeasure M\n       {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "obtain B where B [measurable]: \"B \\<in> sets M\" \"B \\<subseteq> {x \\<in> A. (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<le> K}\" \"emeasure M B < \\<infinity>\" \"emeasure M B > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>B \\<in> sets M;\n         B \\<subseteq> {x \\<in> A.\n                        (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K};\n         emeasure M B < \\<infinity>; 0 < emeasure M B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using approx_with_finite_emeasure[OF _ *]"], ["proof (prove)\nusing this:\n  \\<lbrakk>{x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n           \\<in> sets M;\n   \\<And>Z.\n      \\<lbrakk>Z \\<in> sets M;\n       Z \\<subseteq> {x \\<in> A.\n                      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K};\n       emeasure M Z < \\<infinity>; 0 < emeasure M Z\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>B \\<in> sets M;\n         B \\<subseteq> {x \\<in> A.\n                        (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K};\n         emeasure M B < \\<infinity>; 0 < emeasure M B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  B \\<in> sets M\n  B \\<subseteq> {x \\<in> A.\n                 (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n  emeasure M B < \\<infinity>\n  0 < emeasure M B\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"f x > 0\" if \"x \\<in> B\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < f x", "using B(2) that"], ["proof (prove)\nusing this:\n  B \\<subseteq> {x \\<in> A.\n                 (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n  x \\<in> B\n\ngoal (1 subgoal):\n 1. 0 < f x", "unfolding A_def"], ["proof (prove)\nusing this:\n  B \\<subseteq> {x \\<in> {x \\<in> space M. 0 < f x}.\n                 (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n  x \\<in> B\n\ngoal (1 subgoal):\n 1. 0 < f x", "by auto"], ["proof (state)\nthis:\n  ?x3 \\<in> B \\<Longrightarrow> 0 < f ?x3\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  ?x3 \\<in> B \\<Longrightarrow> 0 < f ?x3\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"AE x\\<in>B in M. (\\<Sum>n. indicator B ((T^^n) x)) = (\\<infinity>::ennreal)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>", "using recurrence_series_infinite[of \"indicator B\"]"], ["proof (prove)\nusing this:\n  indicator B \\<in> borel_measurable M \\<Longrightarrow>\n  AE x in M. 0 < indicator B x \\<longrightarrow>\n             (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>", "by (auto simp add: indicator_def)"], ["proof (state)\nthis:\n  AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  ?x3 \\<in> B \\<Longrightarrow> 0 < f ?x3\n  AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>", "have PInf: \"AE x\\<in>B in M. (\\<Sum>n. indicator B ((T^^n) x)) * f x = \\<top>\""], ["proof (prove)\nusing this:\n  ?x3 \\<in> B \\<Longrightarrow> 0 < f ?x3\n  AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x = \\<top>", "unfolding ennreal_mult_eq_top_iff"], ["proof (prove)\nusing this:\n  ?x3 \\<in> B \\<Longrightarrow> 0 < f ?x3\n  AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x\\<in>B in M.\n    (\\<Sum>n. indicator B ((T ^^ n) x)) = \\<top> \\<and> f x \\<noteq> 0 \\<or>\n    f x = \\<top> \\<and> (\\<Sum>n. indicator B ((T ^^ n) x)) \\<noteq> 0", "by fastforce"], ["proof (state)\nthis:\n  AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x = \\<top>\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"(\\<integral>\\<^sup>+x. indicator B x * (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<partial>M) \\<le> (\\<integral>\\<^sup>+x. indicator B x * K \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator B x *\n                           (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                       \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. indicator B x * K \\<partial>M", "apply (rule nn_integral_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       indicator B x * (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n       \\<le> indicator B x * K", "using B(2)"], ["proof (prove)\nusing this:\n  B \\<subseteq> {x \\<in> A.\n                 (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       indicator B x * (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n       \\<le> indicator B x * K", "unfolding indicator_def"], ["proof (prove)\nusing this:\n  B \\<subseteq> {x \\<in> A.\n                 (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       (if x \\<in> B then 1 else 0) *\n       (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n       \\<le> (if x \\<in> B then 1 else 0) * K", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. indicator B x * K \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. indicator B x * K \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"... = K * emeasure M B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator B x * K \\<partial>M = K * emeasure M B", "by (simp add: mult.commute nn_integral_cmult_indicator)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x * K \\<partial>M = K * emeasure M B\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x * K \\<partial>M = K * emeasure M B\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. K * emeasure M B < \\<infinity>", "using \\<open>K < \\<infinity>\\<close> B(3)"], ["proof (prove)\nusing this:\n  K < \\<infinity>\n  emeasure M B < \\<infinity>\n\ngoal (1 subgoal):\n 1. K * emeasure M B < \\<infinity>", "using ennreal_mult_eq_top_iff top.not_eq_extremum"], ["proof (prove)\nusing this:\n  K < \\<infinity>\n  emeasure M B < \\<infinity>\n  (?a * ?b = \\<top>) =\n  (?a = \\<top> \\<and> ?b \\<noteq> 0 \\<or> ?b = \\<top> \\<and> ?a \\<noteq> 0)\n  (?a \\<noteq> \\<top>) = (?a < \\<top>)\n\ngoal (1 subgoal):\n 1. K * emeasure M B < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  K * emeasure M B < \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n  < \\<infinity>", "have *: \"(\\<integral>\\<^sup>+x. indicator B x * (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<partial>M) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator B x *\n                           (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                       \\<partial>M\n    < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"(\\<integral>\\<^sup>+x. indicator B x * (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<partial>M)\n            = (\\<integral>\\<^sup>+x. (\\<Sum>n. indicator B x * (nn_transfer_operator^^n) f x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. indicator B x *\n                           (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. (\\<Sum>n.\n                               indicator B x *\n                               (nn_transfer_operator ^^ n) f x)\n                       \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n.\n                             indicator B x *\n                             (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n.\n                             indicator B x *\n                             (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"... = (\\<Sum>n. (\\<integral>\\<^sup>+x. indicator B x * (nn_transfer_operator^^n) f x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>n.\n                               indicator B x *\n                               (nn_transfer_operator ^^ n) f x)\n                       \\<partial>M =\n    (\\<Sum>n.\n        \\<integral>\\<^sup>+ x. indicator B x *\n                               (nn_transfer_operator ^^ n) f x\n                           \\<partial>M)", "by (rule nn_integral_suminf, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>n.\n                             indicator B x *\n                             (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B x * (nn_transfer_operator ^^ n) f x\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>n.\n                             indicator B x *\n                             (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B x * (nn_transfer_operator ^^ n) f x\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"... = (\\<Sum>n. (\\<integral>\\<^sup>+x. indicator B ((T^^n) x) * f x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n.\n        \\<integral>\\<^sup>+ x. indicator B x *\n                               (nn_transfer_operator ^^ n) f x\n                           \\<partial>M) =\n    (\\<Sum>n.\n        \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M)", "using nn_transfer_operator_intTn_g"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f \\<in> borel_measurable M; ?g \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ?f x * (nn_transfer_operator ^^ ?n) ?g x\n \\<partial>M =\n                    \\<integral>\\<^sup>+ x. ?f ((T ^^ ?n) x) * ?g x\n \\<partial>M\n\ngoal (1 subgoal):\n 1. (\\<Sum>n.\n        \\<integral>\\<^sup>+ x. indicator B x *\n                               (nn_transfer_operator ^^ n) f x\n                           \\<partial>M) =\n    (\\<Sum>n.\n        \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B x * (nn_transfer_operator ^^ n) f x\n                         \\<partial>M) =\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M)\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B x * (nn_transfer_operator ^^ n) f x\n                         \\<partial>M) =\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M)\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"... = (\\<integral>\\<^sup>+x. (\\<Sum>n. indicator B ((T^^n) x) * f x) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n.\n        \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M) =\n    \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x) * f x)\n                       \\<partial>M", "by (rule nn_integral_suminf[symmetric], auto)"], ["proof (state)\nthis:\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M) =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x) * f x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (\\<Sum>n.\n      \\<integral>\\<^sup>+ x. indicator B ((T ^^ n) x) * f x \\<partial>M) =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x) * f x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"... = (\\<integral>\\<^sup>+x. (\\<Sum>n. indicator B ((T^^n) x)) * f x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x) * f x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                       \\<partial>M", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x) * f x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                     \\<partial>M", "have **: \"(\\<integral>\\<^sup>+x. (\\<Sum>n. indicator B ((T^^n) x)) * f x \\<partial>M) \\<noteq> \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                       \\<partial>M \\<noteq>\n    \\<infinity>", "using *"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                     \\<partial>M\n  \\<integral>\\<^sup>+ x. indicator B x *\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                       \\<partial>M \\<noteq>\n    \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x\n                     \\<partial>M \\<noteq>\n  \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "have \"AE x in M. (\\<Sum>n. indicator B ((T^^n) x)) * f x \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x \\<noteq>\n               \\<infinity>", "by (rule nn_integral_noteq_infinite[OF _ **], auto)"], ["proof (state)\nthis:\n  AE x in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  AE x in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x \\<noteq> \\<infinity>", "have \"AE x\\<in>B in M. False\""], ["proof (prove)\nusing this:\n  AE x in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x\\<in>B in M. False", "using PInf"], ["proof (prove)\nusing this:\n  AE x in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x \\<noteq> \\<infinity>\n  AE x\\<in>B in M. (\\<Sum>n. indicator B ((T ^^ n) x)) * f x = \\<top>\n\ngoal (1 subgoal):\n 1. AE x\\<in>B in M. False", "by auto"], ["proof (state)\nthis:\n  AE x\\<in>B in M. False\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  AE x\\<in>B in M. False", "have \"emeasure M B = 0\""], ["proof (prove)\nusing this:\n  AE x\\<in>B in M. False\n\ngoal (1 subgoal):\n 1. emeasure M B = 0", "by (smt AE_E B(1) Collect_mem_eq Collect_mono_iff dual_order.trans emeasure_eq_0 subsetD sets.sets_into_space)"], ["proof (state)\nthis:\n  emeasure M B = 0\n\ngoal (1 subgoal):\n 1. emeasure M\n     {x \\<in> A.\n      (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} \\<noteq>\n    0 \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  emeasure M B = 0", "show False"], ["proof (prove)\nusing this:\n  emeasure M B = 0\n\ngoal (1 subgoal):\n 1. False", "using B"], ["proof (prove)\nusing this:\n  emeasure M B = 0\n  B \\<in> sets M\n  B \\<subseteq> {x \\<in> A.\n                 (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n  emeasure M B < \\<infinity>\n  0 < emeasure M B\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?K3 < \\<infinity> \\<Longrightarrow>\n  emeasure M\n   {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> ?K3} =\n  0\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "have L: \"{x \\<in> A. (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<le> K} \\<in> null_sets M\" if \"K < \\<infinity>\" for K"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n    \\<in> null_sets M", "using K[OF that]"], ["proof (prove)\nusing this:\n  emeasure M\n   {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K} =\n  0\n\ngoal (1 subgoal):\n 1. {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n    \\<in> null_sets M", "by auto"], ["proof (state)\nthis:\n  ?K3 < \\<infinity> \\<Longrightarrow>\n  {x \\<in> A. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> ?K3}\n  \\<in> null_sets M\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "have P: \"AE x in M. x \\<in> A \\<longrightarrow> (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<ge> K\" if \"K < \\<infinity>\" for K"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x\\<in>A in M. K \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)", "using AE_not_in[OF L[OF that]]"], ["proof (prove)\nusing this:\n  AE x in M. x \\<notin> {x \\<in> A.\n                         (\\<Sum>n. (nn_transfer_operator ^^ n) f x) \\<le> K}\n\ngoal (1 subgoal):\n 1. AE x\\<in>A in M. K \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)", "by auto"], ["proof (state)\nthis:\n  ?K3 < \\<infinity> \\<Longrightarrow>\n  AE x\\<in>A in M. ?K3 \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "have \"AE x in M. \\<forall>N::nat. (x \\<in> A \\<longrightarrow> (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<ge> of_nat N)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. \\<forall>N.\n                  x \\<in> A \\<longrightarrow>\n                  of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)", "unfolding AE_all_countable"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>N. AE x\\<in>A in M.\n       of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)", "by (auto simp add: of_nat_less_top intro!: P)"], ["proof (state)\nthis:\n  AE x in M. \\<forall>N.\n                x \\<in> A \\<longrightarrow>\n                of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "then"], ["proof (chain)\npicking this:\n  AE x in M. \\<forall>N.\n                x \\<in> A \\<longrightarrow>\n                of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)", "have \"AE x in M. f x > 0 \\<longrightarrow> (\\<forall>N::nat. (\\<Sum>n. (nn_transfer_operator^^n) f x) \\<ge> of_nat N)\""], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>N.\n                x \\<in> A \\<longrightarrow>\n                of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<forall>N.\n                   of_nat N\n                   \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x))", "unfolding A_def"], ["proof (prove)\nusing this:\n  AE x in M. \\<forall>N.\n                x \\<in> {x \\<in> space M. 0 < f x} \\<longrightarrow>\n                of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x)\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<forall>N.\n                   of_nat N\n                   \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x))", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<forall>N.\n                 of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x))\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "then"], ["proof (chain)\npicking this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<forall>N.\n                 of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x))", "show \"AE x in M. 0 < f x \\<longrightarrow> (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>\""], ["proof (prove)\nusing this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<forall>N.\n                 of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x))\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "using ennreal_ge_nat_imp_PInf"], ["proof (prove)\nusing this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<forall>N.\n                 of_nat N \\<le> (\\<Sum>n. (nn_transfer_operator ^^ n) f x))\n  (\\<And>N. of_nat N \\<le> ?x) \\<Longrightarrow> ?x = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*of Transfer_Operator.thy*)"]]}