{"file_name": "/home/qj213/afp-2021-10-22/thys/Ergodic_Theory/Normalizing_Sequences.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Ergodic_Theory", "problem_names": ["theorem (in conservative) disjoint_sets_emeasure_Cesaro_tendsto_zero:\n  fixes P::\"'a measure\" and A::\"nat \\<Rightarrow> 'a set\"\n  assumes [measurable]: \"\\<And>n. A n \\<in> sets M\"\n      and \"disjoint_family A\"\n          \"absolutely_continuous M P\" \"sets P = sets M\"\n          \"emeasure P (space M) \\<noteq> \\<infinity>\"\n  shows \"(\\<lambda>n. (\\<Sum>i<n. emeasure P (space M \\<inter> (T^^i)-`(A i)))/n) \\<longlonglongrightarrow> 0\"", "theorem (in conservative) disjoint_sets_measure_Cesaro_tendsto_zero:\n  fixes P::\"'a measure\" and A::\"nat \\<Rightarrow> 'a set\"\n  assumes [measurable]: \"\\<And>n. A n \\<in> sets M\"\n      and \"disjoint_family A\"\n          \"absolutely_continuous M P\" \"sets P = sets M\"\n          \"emeasure P (space M) \\<noteq> \\<infinity>\"\n  shows \"(\\<lambda>n. (\\<Sum>i<n. measure P (space M \\<inter> (T^^i)-`(A i)))/n) \\<longlonglongrightarrow> 0\"", "theorem (in conservative) disjoint_sets_measure_density_one_tendsto_zero:\n  fixes P::\"'a measure\" and A::\"nat \\<Rightarrow> 'a set\"\n  assumes [measurable]: \"\\<And>n. A n \\<in> sets M\"\n      and \"disjoint_family A\"\n          \"absolutely_continuous M P\" \"sets P = sets M\"\n          \"emeasure P (space M) \\<noteq> \\<infinity>\"\n  shows \"\\<exists>B. lower_asymptotic_density B = 1 \\<and> (\\<lambda>n. measure P (space M \\<inter> (T^^n)-`(A n)) * indicator B n) \\<longlonglongrightarrow> 0\"", "lemma (in real_distribution) not_Dirac_0_imp_positive_mass_away_0:\n  assumes \"prob {0} < 1\"\n  shows \"\\<exists>a. a > 0 \\<and> prob {x. abs(x) > a} > 0\"", "lemma PSZ [simp, measurable_cong]:\n  \"space P = space M\"\n  \"h \\<in> borel_measurable P \\<longleftrightarrow> h \\<in> borel_measurable M\"\n  \"A \\<in> sets P \\<longleftrightarrow> A \\<in> sets M\"", "lemma upper_bound_C_aux:\n  assumes \"P = density M h\" \"\\<And>x. h x \\<le> 1\"\n      and [measurable]: \"h \\<in> borel_measurable M\"\n  shows \"\\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i|i. i \\<le> n}\"", "lemma upper_bound_C:\n  \"\\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i|i. i \\<le> n}\"", "lemma upper_bound_L:\n  fixes a::real and L::real and alpha::real\n  assumes \"a > 0\" \"alpha > 0\" \"L > 3\"\n          \"PZ.prob {x. abs (x) > 2 * a} > 3 * alpha\"\n          \"PZ.prob {x. abs (x) \\<ge> (L-1) * a} < alpha\"\n  shows \"\\<exists>A. lower_asymptotic_density A = 1 \\<and> (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i|i. i \\<le> n})\"", "theorem subexponential_growth:\n  \"(\\<lambda>n. max 0 (ln (B n) /n)) \\<longlonglongrightarrow> 0\"", "lemma upper_bound_CD:\n  \"\\<exists>C D. (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and> C \\<ge> 1\"", "lemma upper_bound_E:\n  \"\\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n\"", "theorem polynomial_growth:\n  \"\\<exists>C K. \\<forall>n>0. B n \\<le> C * (real n)^K\""], "translations": [["", "theorem (in conservative) disjoint_sets_emeasure_Cesaro_tendsto_zero:\n  fixes P::\"'a measure\" and A::\"nat \\<Rightarrow> 'a set\"\n  assumes [measurable]: \"\\<And>n. A n \\<in> sets M\"\n      and \"disjoint_family A\"\n          \"absolutely_continuous M P\" \"sets P = sets M\"\n          \"emeasure P (space M) \\<noteq> \\<infinity>\"\n  shows \"(\\<lambda>n. (\\<Sum>i<n. emeasure P (space M \\<inter> (T^^i)-`(A i)))/n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n        of_nat n)\n    \\<longlonglongrightarrow> 0", "proof (rule order_tendstoI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "fix delta::ennreal"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "assume \"delta > 0\""], ["proof (state)\nthis:\n  0 < delta\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"\\<exists>epsilon. epsilon \\<noteq> 0 \\<and> epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>epsilon.\n       epsilon \\<noteq> 0 \\<and>\n       epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta", "apply (cases delta)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; delta = ennreal r\\<rbrakk>\n       \\<Longrightarrow> \\<exists>epsilon.\n                            epsilon \\<noteq> 0 \\<and>\n                            epsilon \\<noteq> \\<infinity> \\<and>\n                            4 * epsilon < delta\n 2. delta = \\<top> \\<Longrightarrow>\n    \\<exists>epsilon.\n       epsilon \\<noteq> 0 \\<and>\n       epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta", "apply (rule exI[of _ \"delta/5\"])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; delta = ennreal r\\<rbrakk>\n       \\<Longrightarrow> delta / 5 \\<noteq> 0 \\<and>\n                         delta / 5 \\<noteq> \\<infinity> \\<and>\n                         4 * (delta / 5) < delta\n 2. delta = \\<top> \\<Longrightarrow>\n    \\<exists>epsilon.\n       epsilon \\<noteq> 0 \\<and>\n       epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta", "using \\<open>delta>0\\<close>"], ["proof (prove)\nusing this:\n  0 < delta\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; delta = ennreal r\\<rbrakk>\n       \\<Longrightarrow> delta / 5 \\<noteq> 0 \\<and>\n                         delta / 5 \\<noteq> \\<infinity> \\<and>\n                         4 * (delta / 5) < delta\n 2. delta = \\<top> \\<Longrightarrow>\n    \\<exists>epsilon.\n       epsilon \\<noteq> 0 \\<and>\n       epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta", "apply (auto simp add: ennreal_divide_eq_top_iff ennreal_divide_numeral numeral_mult_ennreal intro!: ennreal_lessI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. delta = \\<top> \\<Longrightarrow>\n    \\<exists>epsilon.\n       epsilon \\<noteq> 0 \\<and>\n       epsilon \\<noteq> \\<top> \\<and> 4 * epsilon < \\<top>", "apply (rule exI[of _ 1])"], ["proof (prove)\ngoal (1 subgoal):\n 1. delta = \\<top> \\<Longrightarrow>\n    1 \\<noteq> 0 \\<and> 1 \\<noteq> \\<top> \\<and> 4 * 1 < \\<top>", "by auto"], ["proof (state)\nthis:\n  \\<exists>epsilon.\n     epsilon \\<noteq> 0 \\<and>\n     epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "then"], ["proof (chain)\npicking this:\n  \\<exists>epsilon.\n     epsilon \\<noteq> 0 \\<and>\n     epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta", "obtain epsilon where \"epsilon \\<noteq> 0\" \"epsilon \\<noteq> \\<infinity>\" \"4 * epsilon < delta\""], ["proof (prove)\nusing this:\n  \\<exists>epsilon.\n     epsilon \\<noteq> 0 \\<and>\n     epsilon \\<noteq> \\<infinity> \\<and> 4 * epsilon < delta\n\ngoal (1 subgoal):\n 1. (\\<And>epsilon.\n        \\<lbrakk>epsilon \\<noteq> 0; epsilon \\<noteq> \\<infinity>;\n         4 * epsilon < delta\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  epsilon \\<noteq> 0\n  epsilon \\<noteq> \\<infinity>\n  4 * epsilon < delta\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "then"], ["proof (chain)\npicking this:\n  epsilon \\<noteq> 0\n  epsilon \\<noteq> \\<infinity>\n  4 * epsilon < delta", "have \"epsilon > 0\""], ["proof (prove)\nusing this:\n  epsilon \\<noteq> 0\n  epsilon \\<noteq> \\<infinity>\n  4 * epsilon < delta\n\ngoal (1 subgoal):\n 1. 0 < epsilon", "using not_gr_zero"], ["proof (prove)\nusing this:\n  epsilon \\<noteq> 0\n  epsilon \\<noteq> \\<infinity>\n  4 * epsilon < delta\n  (\\<not> (0::?'a) < ?n) = (?n = (0::?'a))\n\ngoal (1 subgoal):\n 1. 0 < epsilon", "by blast"], ["proof (state)\nthis:\n  0 < epsilon\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "define L::ennreal where \"L = (1/epsilon) * (1+ emeasure P (space M))\""], ["proof (state)\nthis:\n  L = 1 / epsilon * (1 + emeasure P (space M))\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"L \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L \\<noteq> \\<infinity>", "unfolding L_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / epsilon * (1 + emeasure P (space M)) \\<noteq> \\<infinity>", "using assms(5) divide_ennreal_def ennreal_mult_eq_top_iff \\<open>epsilon \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  emeasure P (space M) \\<noteq> \\<infinity>\n  ?x / ?y = ?x * inverse ?y\n  (?a * ?b = \\<top>) =\n  (?a = \\<top> \\<and> ?b \\<noteq> 0 \\<or> ?b = \\<top> \\<and> ?a \\<noteq> 0)\n  epsilon \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 / epsilon * (1 + emeasure P (space M)) \\<noteq> \\<infinity>", "by auto"], ["proof (state)\nthis:\n  L \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"L \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L \\<noteq> 0", "unfolding L_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / epsilon * (1 + emeasure P (space M)) \\<noteq> 0", "using \\<open>epsilon \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  epsilon \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. 1 / epsilon * (1 + emeasure P (space M)) \\<noteq> 0", "by (simp add: ennreal_divide_eq_top_iff)"], ["proof (state)\nthis:\n  L \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"emeasure P (space M) \\<le> epsilon * L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (space M) \\<le> epsilon * L", "unfolding L_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (space M)\n    \\<le> epsilon * (1 / epsilon * (1 + emeasure P (space M)))", "using \\<open>epsilon \\<noteq> 0\\<close> \\<open>epsilon \\<noteq> \\<infinity>\\<close> \\<open>emeasure P (space M) \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  epsilon \\<noteq> 0\n  epsilon \\<noteq> \\<infinity>\n  emeasure P (space M) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure P (space M)\n    \\<le> epsilon * (1 / epsilon * (1 + emeasure P (space M)))", "apply (cases epsilon)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>epsilon \\<noteq> 0; epsilon \\<noteq> \\<infinity>;\n        emeasure P (space M) \\<noteq> \\<infinity>; 0 \\<le> r;\n        epsilon = ennreal r\\<rbrakk>\n       \\<Longrightarrow> emeasure P (space M)\n                         \\<le> epsilon *\n                               (1 / epsilon * (1 + emeasure P (space M)))\n 2. \\<lbrakk>epsilon \\<noteq> 0; epsilon \\<noteq> \\<infinity>;\n     emeasure P (space M) \\<noteq> \\<infinity>; epsilon = \\<top>\\<rbrakk>\n    \\<Longrightarrow> emeasure P (space M)\n                      \\<le> epsilon *\n                            (1 / epsilon * (1 + emeasure P (space M)))", "apply (metis (no_types, lifting) add.commute add.right_neutral add_left_mono ennreal_divide_times infinity_ennreal_def mult.left_neutral mult_divide_eq_ennreal zero_le_one)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>epsilon \\<noteq> 0; epsilon \\<noteq> \\<infinity>;\n     emeasure P (space M) \\<noteq> \\<infinity>; epsilon = \\<top>\\<rbrakk>\n    \\<Longrightarrow> emeasure P (space M)\n                      \\<le> epsilon *\n                            (1 / epsilon * (1 + emeasure P (space M)))", "by simp"], ["proof (state)\nthis:\n  emeasure P (space M) \\<le> epsilon * L\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "then"], ["proof (chain)\npicking this:\n  emeasure P (space M) \\<le> epsilon * L", "have \"emeasure P (space M) / L \\<le> epsilon\""], ["proof (prove)\nusing this:\n  emeasure P (space M) \\<le> epsilon * L\n\ngoal (1 subgoal):\n 1. emeasure P (space M) / L \\<le> epsilon", "using \\<open>L \\<noteq> 0\\<close> \\<open>L \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  emeasure P (space M) \\<le> epsilon * L\n  L \\<noteq> 0\n  L \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure P (space M) / L \\<le> epsilon", "by (metis divide_le_posI_ennreal mult.commute not_gr_zero)"], ["proof (state)\nthis:\n  emeasure P (space M) / L \\<le> epsilon\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "then"], ["proof (chain)\npicking this:\n  emeasure P (space M) / L \\<le> epsilon", "have \"c * (emeasure P (space M)/L) \\<le> c * epsilon\" for c"], ["proof (prove)\nusing this:\n  emeasure P (space M) / L \\<le> epsilon\n\ngoal (1 subgoal):\n 1. c * (emeasure P (space M) / L) \\<le> c * epsilon", "by (rule mult_left_mono, simp)"], ["proof (state)\nthis:\n  ?c3 * (emeasure P (space M) / L) \\<le> ?c3 * epsilon\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "text \\<open>We introduce the density of $P$.\\<close>"], ["proof (state)\nthis:\n  ?c3 * (emeasure P (space M) / L) \\<le> ?c3 * epsilon\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "define f where \"f = RN_deriv M P\""], ["proof (state)\nthis:\n  f = RN_deriv M P\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have [measurable]: \"f \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable M", "unfolding f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. RN_deriv M P \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  f \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have [simp]: \"P = density M f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P = density M f", "unfolding f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. P = density M (RN_deriv M P)", "apply (rule density_RN_deriv[symmetric])"], ["proof (prove)\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. sets P = sets M", "using assms"], ["proof (prove)\nusing this:\n  A ?n3 \\<in> sets M\n  disjoint_family A\n  absolutely_continuous M P\n  sets P = sets M\n  emeasure P (space M) \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. sets P = sets M", "by auto"], ["proof (state)\nthis:\n  P = density M f\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"space P = space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space P = space M", "by auto"], ["proof (state)\nthis:\n  space P = space M\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "interpret Pc: finite_measure P"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_measure P", "apply standard"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (space P) \\<noteq> \\<infinity>", "unfolding \\<open>space P = space M\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (space M) \\<noteq> \\<infinity>", "using assms(5)"], ["proof (prove)\nusing this:\n  emeasure P (space M) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. emeasure P (space M) \\<noteq> \\<infinity>", "by auto"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have *: \"AE x in P. eventually (\\<lambda>n. (\\<Sum>i<n. (nn_transfer_operator^^i) f x) > L * f x) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "have \"AE x in M. f x \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. f x \\<noteq> \\<infinity>", "unfolding f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. RN_deriv M P x \\<noteq> \\<infinity>", "apply (intro RN_deriv_finite Pc.sigma_finite_measure)"], ["proof (prove)\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. sets P = sets M", "unfolding \\<open>space P = space M\\<close>"], ["proof (prove)\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. sets P = sets M", "using assms"], ["proof (prove)\nusing this:\n  A ?n3 \\<in> sets M\n  disjoint_family A\n  absolutely_continuous M P\n  sets P = sets M\n  emeasure P (space M) \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. sets P = sets M", "by auto"], ["proof (state)\nthis:\n  AE x in M. f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "moreover"], ["proof (state)\nthis:\n  AE x in M. f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "have \"AE x in M. f x > 0 \\<longrightarrow> (\\<Sum>n. (nn_transfer_operator^^n) f x) = \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "using recurrence_series_infinite_transfer_operator"], ["proof (prove)\nusing this:\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  AE x in M. 0 < ?f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) ?f x) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "ultimately"], ["proof (chain)\npicking this:\n  AE x in M. f x \\<noteq> \\<infinity>\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>", "have \"AE x in M. f x > 0 \\<longrightarrow> ((\\<Sum>n. (nn_transfer_operator^^n) f x) = \\<infinity> \\<and> f x \\<noteq> \\<infinity>)\""], ["proof (prove)\nusing this:\n  AE x in M. f x \\<noteq> \\<infinity>\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < f x \\<longrightarrow>\n               (\\<Sum>n. (nn_transfer_operator ^^ n) f x) =\n               \\<infinity> \\<and>\n               f x \\<noteq> \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "then"], ["proof (chain)\npicking this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>", "have AEP: \"AE x in P. (\\<Sum>n. (nn_transfer_operator^^n) f x) = \\<infinity> \\<and> f x \\<noteq> \\<infinity>\""], ["proof (prove)\nusing this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) =\n               \\<infinity> \\<and>\n               f x \\<noteq> \\<infinity>", "unfolding \\<open>P = density M f\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in density M\n             f. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) =\n                \\<infinity> \\<and>\n                f x \\<noteq> \\<infinity>", "using AE_density[of f M]"], ["proof (prove)\nusing this:\n  AE x in M. 0 < f x \\<longrightarrow>\n             (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n  f \\<in> borel_measurable M \\<Longrightarrow>\n  almost_everywhere (density M f) ?P =\n  (AE x in M. 0 < f x \\<longrightarrow> ?P x)\n\ngoal (1 subgoal):\n 1. AE x in density M\n             f. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) =\n                \\<infinity> \\<and>\n                f x \\<noteq> \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in P. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "moreover"], ["proof (state)\nthis:\n  AE x in P. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "have \"eventually (\\<lambda>n. (\\<Sum>i<n. (nn_transfer_operator^^i) f x) > L * f x) sequentially\"\n      if \"(\\<Sum>n. (nn_transfer_operator^^n) f x) = \\<infinity> \\<and> f x \\<noteq> \\<infinity>\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "have \"(\\<lambda>n. (\\<Sum>i<n. (nn_transfer_operator^^i) f x)) \\<longlonglongrightarrow> (\\<Sum>i. (nn_transfer_operator^^i) f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n    \\<longlonglongrightarrow> (\\<Sum>i. (nn_transfer_operator ^^ i) f x)", "by (simp add: summable_LIMSEQ)"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n  \\<longlonglongrightarrow> (\\<Sum>i. (nn_transfer_operator ^^ i) f x)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n  \\<longlonglongrightarrow> (\\<Sum>i. (nn_transfer_operator ^^ i) f x)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "have \"(\\<Sum>i. (nn_transfer_operator^^i) f x) > L * f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L * f x < (\\<Sum>i. (nn_transfer_operator ^^ i) f x)", "using that \\<open>L \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n  f x \\<noteq> \\<infinity>\n  L \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. L * f x < (\\<Sum>i. (nn_transfer_operator ^^ i) f x)", "by (auto simp add: ennreal_mult_less_top top.not_eq_extremum)"], ["proof (state)\nthis:\n  L * f x < (\\<Sum>i. (nn_transfer_operator ^^ i) f x)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. \\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n  \\<longlonglongrightarrow> (\\<Sum>i. (nn_transfer_operator ^^ i) f x)\n  L * f x < (\\<Sum>i. (nn_transfer_operator ^^ i) f x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. \\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n  \\<longlonglongrightarrow> (\\<Sum>i. (nn_transfer_operator ^^ i) f x)\n  L * f x < (\\<Sum>i. (nn_transfer_operator ^^ i) f x)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "by (rule order_tendstoD(1))"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>n. (nn_transfer_operator ^^ n) f ?x3) = \\<infinity> \\<and>\n  f ?x3 \\<noteq> \\<infinity> \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     L * f ?x3 < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f ?x3)\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "ultimately"], ["proof (chain)\npicking this:\n  AE x in P. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n  (\\<Sum>n. (nn_transfer_operator ^^ n) f ?x3) = \\<infinity> \\<and>\n  f ?x3 \\<noteq> \\<infinity> \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     L * f ?x3 < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f ?x3)", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in P. (\\<Sum>n. (nn_transfer_operator ^^ n) f x) = \\<infinity> \\<and>\n             f x \\<noteq> \\<infinity>\n  (\\<Sum>n. (nn_transfer_operator ^^ n) f ?x3) = \\<infinity> \\<and>\n  f ?x3 \\<noteq> \\<infinity> \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     L * f ?x3 < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f ?x3)\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)", "by auto"], ["proof (state)\nthis:\n  AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"\\<exists>U N. U \\<in> sets P \\<and> (\\<forall>n \\<ge> N. \\<forall>x \\<in> U. (\\<Sum>i<n. (nn_transfer_operator^^i) f x) > L * f x) \\<and> emeasure P (space P - U) < epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>U N.\n       U \\<in> sets P \\<and>\n       (\\<forall>n\\<ge>N.\n           \\<forall>x\\<in>U.\n              L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)) \\<and>\n       emeasure P (space P - U) < epsilon", "apply (rule Pc.Egorov_lemma[OF _ *])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n.\n       Measurable.pred P\n        (\\<lambda>x. L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x))\n 2. 0 < epsilon", "using \\<open>epsilon\\<noteq>0\\<close>"], ["proof (prove)\nusing this:\n  epsilon \\<noteq> 0\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       Measurable.pred P\n        (\\<lambda>x. L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x))\n 2. 0 < epsilon", "by (auto simp add: zero_less_iff_neq_zero)"], ["proof (state)\nthis:\n  \\<exists>U N.\n     U \\<in> sets P \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U.\n            L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)) \\<and>\n     emeasure P (space P - U) < epsilon\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "then"], ["proof (chain)\npicking this:\n  \\<exists>U N.\n     U \\<in> sets P \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U.\n            L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)) \\<and>\n     emeasure P (space P - U) < epsilon", "obtain U N1 where [measurable]: \"U \\<in> sets M\" and U: \"emeasure P (space M - U) < epsilon\"\n                          \"\\<And>n x. n \\<ge> N1 \\<Longrightarrow> x \\<in> U \\<Longrightarrow> L * f x < (\\<Sum>i<n. (nn_transfer_operator^^i) f x)\""], ["proof (prove)\nusing this:\n  \\<exists>U N.\n     U \\<in> sets P \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U.\n            L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)) \\<and>\n     emeasure P (space P - U) < epsilon\n\ngoal (1 subgoal):\n 1. (\\<And>U N1.\n        \\<lbrakk>U \\<in> sets M; emeasure P (space M - U) < epsilon;\n         \\<And>n x.\n            \\<lbrakk>N1 \\<le> n; x \\<in> U\\<rbrakk>\n            \\<Longrightarrow> L * f x\n                              < (\\<Sum>i<n.\n                                    (nn_transfer_operator ^^ i) f\n                                     x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<open>sets P = sets M\\<close> \\<open>space P = space M\\<close>"], ["proof (prove)\nusing this:\n  \\<exists>U N.\n     U \\<in> sets M \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U.\n            L * f x < (\\<Sum>i<n. (nn_transfer_operator ^^ i) f x)) \\<and>\n     emeasure P (space M - U) < epsilon\n\ngoal (1 subgoal):\n 1. (\\<And>U N1.\n        \\<lbrakk>U \\<in> sets M; emeasure P (space M - U) < epsilon;\n         \\<And>n x.\n            \\<lbrakk>N1 \\<le> n; x \\<in> U\\<rbrakk>\n            \\<Longrightarrow> L * f x\n                              < (\\<Sum>i<n.\n                                    (nn_transfer_operator ^^ i) f\n                                     x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  U \\<in> sets M\n  emeasure P (space M - U) < epsilon\n  \\<lbrakk>N1 \\<le> ?n3; ?x3 \\<in> U\\<rbrakk>\n  \\<Longrightarrow> L * f ?x3\n                    < (\\<Sum>i<?n3. (nn_transfer_operator ^^ i) f ?x3)\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"U \\<subseteq> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. U \\<subseteq> space M", "by (rule sets.sets_into_space, simp)"], ["proof (state)\nthis:\n  U \\<subseteq> space M\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "define K where \"K = N1 + 1\""], ["proof (state)\nthis:\n  K = N1 + 1\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"K \\<ge> N1\" \"K \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N1 \\<le> K &&& 1 \\<le> K", "unfolding K_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. N1 \\<le> N1 + 1 &&& 1 \\<le> N1 + 1", "by auto"], ["proof (state)\nthis:\n  N1 \\<le> K\n  1 \\<le> K\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have *: \"K * emeasure P (space M) / epsilon \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) / epsilon \\<noteq> \\<infinity>", "using \\<open>emeasure P (space M) \\<noteq> \\<infinity>\\<close> \\<open>epsilon \\<noteq> 0\\<close> ennreal_divide_eq_top_iff ennreal_mult_eq_top_iff"], ["proof (prove)\nusing this:\n  emeasure P (space M) \\<noteq> \\<infinity>\n  epsilon \\<noteq> 0\n  (?a / ?b = \\<top>) =\n  (?a \\<noteq> 0 \\<and> ?b = 0 \\<or> ?a = \\<top> \\<and> ?b \\<noteq> \\<top>)\n  (?a * ?b = \\<top>) =\n  (?a = \\<top> \\<and> ?b \\<noteq> 0 \\<or> ?b = \\<top> \\<and> ?a \\<noteq> 0)\n\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) / epsilon \\<noteq> \\<infinity>", "by auto"], ["proof (state)\nthis:\n  of_nat K * emeasure P (space M) / epsilon \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "obtain N2::nat where N2: \"N2 \\<ge> K * emeasure P (space M) / epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        of_nat K * emeasure P (space M) / epsilon\n        \\<le> of_nat N2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ennreal_archimedean[OF *]"], ["proof (prove)\nusing this:\n  \\<exists>x. of_nat K * emeasure P (space M) / epsilon \\<le> of_nat x\n\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        of_nat K * emeasure P (space M) / epsilon\n        \\<le> of_nat N2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  of_nat K * emeasure P (space M) / epsilon \\<le> of_nat N2\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "define N where \"N = 2 * K + N2\""], ["proof (state)\nthis:\n  N = 2 * K + N2\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "have \"(\\<Sum>k\\<in>{..<n}. emeasure P (space M \\<inter> (T^^k)-`(A k))) / n < delta\" if \"n \\<ge> N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"n \\<ge> 2 * K\" \"of_nat n \\<ge> ((of_nat N2)::ennreal)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * K \\<le> n &&& of_nat N2 \\<le> of_nat n", "using that"], ["proof (prove)\nusing this:\n  N \\<le> n\n\ngoal (1 subgoal):\n 1. 2 * K \\<le> n &&& of_nat N2 \\<le> of_nat n", "unfolding N_def"], ["proof (prove)\nusing this:\n  2 * K + N2 \\<le> n\n\ngoal (1 subgoal):\n 1. 2 * K \\<le> n &&& of_nat N2 \\<le> of_nat n", "by auto"], ["proof (state)\nthis:\n  2 * K \\<le> n\n  of_nat N2 \\<le> of_nat n\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "then"], ["proof (chain)\npicking this:\n  2 * K \\<le> n\n  of_nat N2 \\<le> of_nat n", "have \"n \\<ge> K * emeasure P (space M) / epsilon\""], ["proof (prove)\nusing this:\n  2 * K \\<le> n\n  of_nat N2 \\<le> of_nat n\n\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) / epsilon \\<le> of_nat n", "using N2 order_trans"], ["proof (prove)\nusing this:\n  2 * K \\<le> n\n  of_nat N2 \\<le> of_nat n\n  of_nat K * emeasure P (space M) / epsilon \\<le> of_nat N2\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) / epsilon \\<le> of_nat n", "by blast"], ["proof (state)\nthis:\n  of_nat K * emeasure P (space M) / epsilon \\<le> of_nat n\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "then"], ["proof (chain)\npicking this:\n  of_nat K * emeasure P (space M) / epsilon \\<le> of_nat n", "have \"K * emeasure P (space M) \\<le> n * epsilon\""], ["proof (prove)\nusing this:\n  of_nat K * emeasure P (space M) / epsilon \\<le> of_nat n\n\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon", "using \\<open>epsilon > 0\\<close> \\<open>epsilon \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  of_nat K * emeasure P (space M) / epsilon \\<le> of_nat n\n  0 < epsilon\n  epsilon \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon", "by (smt divide_ennreal_def divide_right_mono_ennreal ennreal_mult_divide_eq ennreal_mult_eq_top_iff infinity_ennreal_def mult.commute not_le order_le_less)"], ["proof (state)\nthis:\n  of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"n \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> n", "using \\<open>n \\<ge> 2 * K\\<close> \\<open>K \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  2 * K \\<le> n\n  1 \\<le> K\n\ngoal (1 subgoal):\n 1. 1 \\<le> n", "by auto"], ["proof (state)\nthis:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have *: \"((\\<Sum>k\\<in>{K..<n-K}. indicator (A k) ((T^^k) x))::ennreal) \\<le> (\\<Sum>i\\<in>{K..<n}. indicator (A (i-j)) ((T^^(i-j)) x))\"\n      if \"j < K\" for j x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "have \"(\\<Sum>k \\<in> {K..<n-K}. indicator (A k) ((T^^k) x)) \\<le> ((\\<Sum>k\\<in>{K-j..<n-j}. indicator (A k) ((T^^k) x))::ennreal)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>k = K - j..<n - j. indicator (A k) ((T ^^ k) x))", "apply (rule sum_mono2)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {K - j..<n - j}\n 2. {K..<n - K} \\<subseteq> {K - j..<n - j}\n 3. \\<And>b.\n       b \\<in> {K - j..<n - j} - {K..<n - K} \\<Longrightarrow>\n       0 \\<le> indicator (A b) ((T ^^ b) x)", "using \\<open>j < K\\<close>"], ["proof (prove)\nusing this:\n  j < K\n\ngoal (3 subgoals):\n 1. finite {K - j..<n - j}\n 2. {K..<n - K} \\<subseteq> {K - j..<n - j}\n 3. \\<And>b.\n       b \\<in> {K - j..<n - j} - {K..<n - K} \\<Longrightarrow>\n       0 \\<le> indicator (A b) ((T ^^ b) x)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n  \\<le> (\\<Sum>k = K - j..<n - j. indicator (A k) ((T ^^ k) x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n  \\<le> (\\<Sum>k = K - j..<n - j. indicator (A k) ((T ^^ k) x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "have \"... = (\\<Sum>i\\<in>{K..<n}. indicator (A (i-j)) ((T^^(i-j)) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K - j..<n - j. indicator (A k) ((T ^^ k) x)) =\n    (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "apply (rule sum.reindex_bij_betw[symmetric], rule bij_betw_byWitness[of _ \"\\<lambda>x. x+j\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<forall>a\\<in>{K..<n}. a - j + j = a\n 2. \\<forall>a'\\<in>{K - j..<n - j}. a' + j - j = a'\n 3. (\\<lambda>x. x - j) ` {K..<n} \\<subseteq> {K - j..<n - j}\n 4. (\\<lambda>x. x + j) ` {K - j..<n - j} \\<subseteq> {K..<n}", "using \\<open>j < K\\<close>"], ["proof (prove)\nusing this:\n  j < K\n\ngoal (4 subgoals):\n 1. \\<forall>a\\<in>{K..<n}. a - j + j = a\n 2. \\<forall>a'\\<in>{K - j..<n - j}. a' + j - j = a'\n 3. (\\<lambda>x. x - j) ` {K..<n} \\<subseteq> {K - j..<n - j}\n 4. (\\<lambda>x. x + j) ` {K - j..<n - j} \\<subseteq> {K..<n}", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k = K - j..<n - j. indicator (A k) ((T ^^ k) x)) =\n  (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n  \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n  \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n    \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n  \\<le> (\\<Sum>i = K..<n. indicator (A (i - j)) ((T ^^ (i - j)) x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?j3 < K \\<Longrightarrow>\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) ?x3))\n  \\<le> (\\<Sum>i = K..<n. indicator (A (i - ?j3)) ((T ^^ (i - ?j3)) ?x3))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"L * (\\<Sum> k \\<in> {K..<n-K}. emeasure P (U \\<inter> (T^^k)-`(A k))) = L * (\\<Sum> k \\<in> {K..<n-K}.(\\<integral>\\<^sup>+x. indicator (U \\<inter> (T^^k)-`(A k)) x \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) =\n    L *\n    (\\<Sum>k = K..<n - K.\n        integral\\<^sup>N P (indicator (U \\<inter> (T ^^ k) -` A k)))", "by auto"], ["proof (state)\nthis:\n  L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) =\n  L *\n  (\\<Sum>k = K..<n - K.\n      integral\\<^sup>N P (indicator (U \\<inter> (T ^^ k) -` A k)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) =\n  L *\n  (\\<Sum>k = K..<n - K.\n      integral\\<^sup>N P (indicator (U \\<inter> (T ^^ k) -` A k)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum> k \\<in> {K..<n-K}. (\\<integral>\\<^sup>+x. L * indicator (U \\<inter> (T^^k)-`(A k)) x \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L *\n    (\\<Sum>k = K..<n - K.\n        integral\\<^sup>N P (indicator (U \\<inter> (T ^^ k) -` A k))) =\n    (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P)", "unfolding sum_distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n = K..<n - K.\n        L * integral\\<^sup>N P (indicator (U \\<inter> (T ^^ n) -` A n))) =\n    (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P)", "by (intro sum.cong nn_integral_cmult[symmetric], auto)"], ["proof (state)\nthis:\n  L *\n  (\\<Sum>k = K..<n - K.\n      integral\\<^sup>N P (indicator (U \\<inter> (T ^^ k) -` A k))) =\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  L *\n  (\\<Sum>k = K..<n - K.\n      integral\\<^sup>N P (indicator (U \\<inter> (T ^^ k) -` A k))) =\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum> k \\<in> {K..<n-K}. (\\<integral>\\<^sup>+x. f x * (L * indicator (U \\<inter> (T^^k)-`(A k)) x) \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P) =\n    (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. f x *\n                               (L *\n                                indicator (U \\<inter> (T ^^ k) -` A k) x)\n                           \\<partial>M)", "unfolding \\<open>P = density M f\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\n        \\<partial>density M f) =\n    (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. f x *\n                               (L *\n                                indicator (U \\<inter> (T ^^ k) -` A k) x)\n                           \\<partial>M)", "by (intro sum.cong nn_integral_density, auto)"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P) =\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x *\n                             (L * indicator (U \\<inter> (T ^^ k) -` A k) x)\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+x\\<in>U \\<inter> (T ^^ k) -` A k. L\\<partial>P) =\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x *\n                             (L * indicator (U \\<inter> (T ^^ k) -` A k) x)\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum> k \\<in> {K..<n-K}. (\\<integral>\\<^sup>+x. f x * L * indicator U x * indicator (A k) ((T^^k) x) \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. f x *\n                               (L *\n                                indicator (U \\<inter> (T ^^ k) -` A k) x)\n                           \\<partial>M) =\n    (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. f x * L * indicator U x *\n                               indicator (A k) ((T ^^ k) x)\n                           \\<partial>M)", "by (intro sum.cong nn_integral_cong, auto simp add: algebra_simps indicator_def)"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x *\n                             (L * indicator (U \\<inter> (T ^^ k) -` A k) x)\n                         \\<partial>M) =\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x * L * indicator U x *\n                             indicator (A k) ((T ^^ k) x)\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x *\n                             (L * indicator (U \\<inter> (T ^^ k) -` A k) x)\n                         \\<partial>M) =\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x * L * indicator U x *\n                             indicator (A k) ((T ^^ k) x)\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... \\<le> (\\<Sum> k \\<in> {K..<n-K}. (\\<integral>\\<^sup>+x. (\\<Sum>j \\<in> {..<K}. (nn_transfer_operator^^j) f x) * indicator (A k) ((T^^k) x) \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. f x * L * indicator U x *\n                               indicator (A k) ((T ^^ k) x)\n                           \\<partial>M)\n    \\<le> (\\<Sum>k = K..<n - K.\n              \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n   (nn_transfer_operator ^^ j) f x) *\n                                     indicator (A k) ((T ^^ k) x)\n                                 \\<partial>M)", "apply (intro sum_mono nn_integral_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>k \\<in> {K..<n - K}; x \\<in> space M\\<rbrakk>\n       \\<Longrightarrow> f x * L * indicator U x *\n                         indicator (A k) ((T ^^ k) x)\n                         \\<le> (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x) *\n                               indicator (A k) ((T ^^ k) x)", "using U(2)[OF \\<open>K \\<ge> N1\\<close>]"], ["proof (prove)\nusing this:\n  ?x3 \\<in> U \\<Longrightarrow>\n  L * f ?x3 < (\\<Sum>i<K. (nn_transfer_operator ^^ i) f ?x3)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>k \\<in> {K..<n - K}; x \\<in> space M\\<rbrakk>\n       \\<Longrightarrow> f x * L * indicator U x *\n                         indicator (A k) ((T ^^ k) x)\n                         \\<le> (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x) *\n                               indicator (A k) ((T ^^ k) x)", "unfolding indicator_def"], ["proof (prove)\nusing this:\n  ?x3 \\<in> U \\<Longrightarrow>\n  L * f ?x3 < (\\<Sum>i<K. (nn_transfer_operator ^^ i) f ?x3)\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>k \\<in> {K..<n - K}; x \\<in> space M\\<rbrakk>\n       \\<Longrightarrow> f x * L * (if x \\<in> U then 1 else 0) *\n                         (if (T ^^ k) x \\<in> A k then 1 else 0)\n                         \\<le> (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x) *\n                               (if (T ^^ k) x \\<in> A k then 1 else 0)", "using less_imp_le"], ["proof (prove)\nusing this:\n  ?x3 \\<in> U \\<Longrightarrow>\n  L * f ?x3 < (\\<Sum>i<K. (nn_transfer_operator ^^ i) f ?x3)\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. \\<And>k x.\n       \\<lbrakk>k \\<in> {K..<n - K}; x \\<in> space M\\<rbrakk>\n       \\<Longrightarrow> f x * L * (if x \\<in> U then 1 else 0) *\n                         (if (T ^^ k) x \\<in> A k then 1 else 0)\n                         \\<le> (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x) *\n                               (if (T ^^ k) x \\<in> A k then 1 else 0)", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x * L * indicator U x *\n                             indicator (A k) ((T ^^ k) x)\n                         \\<partial>M)\n  \\<le> (\\<Sum>k = K..<n - K.\n            \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n (nn_transfer_operator ^^ j) f x) *\n                                   indicator (A k) ((T ^^ k) x)\n                               \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. f x * L * indicator U x *\n                             indicator (A k) ((T ^^ k) x)\n                         \\<partial>M)\n  \\<le> (\\<Sum>k = K..<n - K.\n            \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n (nn_transfer_operator ^^ j) f x) *\n                                   indicator (A k) ((T ^^ k) x)\n                               \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<integral>\\<^sup>+x. (\\<Sum>k\\<in>{K..<n-K}. (\\<Sum>j \\<in> {..<K}. (nn_transfer_operator^^j) f x * indicator (A k) ((T^^k) x))) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x) *\n                               indicator (A k) ((T ^^ k) x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                               \\<Sum>j<K.\n                                  (nn_transfer_operator ^^ j) f x *\n                                  indicator (A k) ((T ^^ k) x))\n                       \\<partial>M", "apply (subst nn_integral_sum, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x) *\n                               indicator (A k) ((T ^^ k) x)\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n - K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x *\n                                   indicator (A i) ((T ^^ i) x))\n                           \\<partial>M)", "unfolding sum_distrib_right"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>n<K.\n                                   (nn_transfer_operator ^^ n) f x *\n                                   indicator (A k) ((T ^^ k) x))\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n - K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   (nn_transfer_operator ^^ j) f x *\n                                   indicator (A i) ((T ^^ i) x))\n                           \\<partial>M)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K. (nn_transfer_operator ^^ j) f x) *\n                             indicator (A k) ((T ^^ k) x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                             \\<Sum>j<K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K. (nn_transfer_operator ^^ j) f x) *\n                             indicator (A k) ((T ^^ k) x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                             \\<Sum>j<K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<integral>\\<^sup>+x. (\\<Sum>j \\<in> {..<K}. (\\<Sum>k\\<in>{K..<n-K}. (nn_transfer_operator^^j) f x * indicator (A k) ((T^^k) x))) \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                               \\<Sum>j<K.\n                                  (nn_transfer_operator ^^ j) f x *\n                                  indicator (A k) ((T ^^ k) x))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                               \\<Sum>k = K..<n - K.\n                                  (nn_transfer_operator ^^ j) f x *\n                                  indicator (A k) ((T ^^ k) x))\n                       \\<partial>M", "by (rule nn_integral_cong, rule sum.swap)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                             \\<Sum>j<K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                             \\<Sum>k = K..<n - K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                             \\<Sum>j<K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                             \\<Sum>k = K..<n - K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>j \\<in> {..<K}. (\\<integral>\\<^sup>+x. (nn_transfer_operator^^j) f x * (\\<Sum>k\\<in>{K..<n-K}. indicator (A k) ((T^^k) x)) \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                               \\<Sum>k = K..<n - K.\n                                  (nn_transfer_operator ^^ j) f x *\n                                  indicator (A k) ((T ^^ k) x))\n                       \\<partial>M =\n    (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                               (\\<Sum>k = K..<n - K.\n                                   indicator (A k) ((T ^^ k) x))\n                           \\<partial>M)", "apply (subst nn_integral_sum, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                                   (nn_transfer_operator ^^ i) f x *\n                                   indicator (A k) ((T ^^ k) x))\n                           \\<partial>M) =\n    (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                               (\\<Sum>k = K..<n - K.\n                                   indicator (A k) ((T ^^ k) x))\n                           \\<partial>M)", "unfolding sum_distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>k = K..<n - K.\n                                   (nn_transfer_operator ^^ i) f x *\n                                   indicator (A k) ((T ^^ k) x))\n                           \\<partial>M) =\n    (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>n = K..<n - K.\n                                   (nn_transfer_operator ^^ j) f x *\n                                   indicator (A n) ((T ^^ n) x))\n                           \\<partial>M)", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                             \\<Sum>k = K..<n - K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M =\n  (\\<Sum>j<K.\n      \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                             (\\<Sum>k = K..<n - K.\n                                 indicator (A k) ((T ^^ k) x))\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                             \\<Sum>k = K..<n - K.\n                                (nn_transfer_operator ^^ j) f x *\n                                indicator (A k) ((T ^^ k) x))\n                     \\<partial>M =\n  (\\<Sum>j<K.\n      \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                             (\\<Sum>k = K..<n - K.\n                                 indicator (A k) ((T ^^ k) x))\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... \\<le> (\\<Sum>j \\<in> {..<K}. (\\<integral>\\<^sup>+x. (nn_transfer_operator^^j) f x * (\\<Sum>i\\<in>{K..<n}. indicator (A (i-j)) ((T^^(i-j)) x)) \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                               (\\<Sum>k = K..<n - K.\n                                   indicator (A k) ((T ^^ k) x))\n                           \\<partial>M)\n    \\<le> (\\<Sum>j<K.\n              \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                     (\\<Sum>i = K..<n.\n   indicator (A (i - j)) ((T ^^ (i - j)) x))\n                                 \\<partial>M)", "apply (rule sum_mono, rule nn_integral_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j x.\n       \\<lbrakk>j \\<in> {..<K}; x \\<in> space M\\<rbrakk>\n       \\<Longrightarrow> (nn_transfer_operator ^^ j) f x *\n                         (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n                         \\<le> (nn_transfer_operator ^^ j) f x *\n                               (\\<Sum>i = K..<n.\n                                   indicator (A (i - j)) ((T ^^ (i - j)) x))", "using *"], ["proof (prove)\nusing this:\n  ?j3 < K \\<Longrightarrow>\n  (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) ?x3))\n  \\<le> (\\<Sum>i = K..<n. indicator (A (i - ?j3)) ((T ^^ (i - ?j3)) ?x3))\n\ngoal (1 subgoal):\n 1. \\<And>j x.\n       \\<lbrakk>j \\<in> {..<K}; x \\<in> space M\\<rbrakk>\n       \\<Longrightarrow> (nn_transfer_operator ^^ j) f x *\n                         (\\<Sum>k = K..<n - K. indicator (A k) ((T ^^ k) x))\n                         \\<le> (nn_transfer_operator ^^ j) f x *\n                               (\\<Sum>i = K..<n.\n                                   indicator (A (i - j)) ((T ^^ (i - j)) x))", "by (auto simp add: mult_left_mono)"], ["proof (state)\nthis:\n  (\\<Sum>j<K.\n      \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                             (\\<Sum>k = K..<n - K.\n                                 indicator (A k) ((T ^^ k) x))\n                         \\<partial>M)\n  \\<le> (\\<Sum>j<K.\n            \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                   (\\<Sum>i = K..<n.\n indicator (A (i - j)) ((T ^^ (i - j)) x))\n                               \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>j<K.\n      \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                             (\\<Sum>k = K..<n - K.\n                                 indicator (A k) ((T ^^ k) x))\n                         \\<partial>M)\n  \\<le> (\\<Sum>j<K.\n            \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                   (\\<Sum>i = K..<n.\n indicator (A (i - j)) ((T ^^ (i - j)) x))\n                               \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>i\\<in>{K..<n}. (\\<Sum>j \\<in> {..<K}. (\\<integral>\\<^sup>+x. (nn_transfer_operator^^j) f x * indicator (A (i-j)) ((T^^(i-j)) x) \\<partial>M)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                               (\\<Sum>i = K..<n.\n                                   indicator (A (i - j)) ((T ^^ (i - j)) x))\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                  indicator (A (i - j)) ((T ^^ (i - j)) x)\n                              \\<partial>M)", "unfolding sum_distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>n = K..<n.\n                                   (nn_transfer_operator ^^ j) f x *\n                                   indicator (A (n - j)) ((T ^^ (n - j)) x))\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                  indicator (A (i - j)) ((T ^^ (i - j)) x)\n                              \\<partial>M)", "using sum.swap"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<in>?A. sum (?g i) ?B) = (\\<Sum>j\\<in>?B. \\<Sum>i\\<in>?A. ?g i j)\n\ngoal (1 subgoal):\n 1. (\\<Sum>j<K.\n        \\<integral>\\<^sup>+ x. (\\<Sum>n = K..<n.\n                                   (nn_transfer_operator ^^ j) f x *\n                                   indicator (A (n - j)) ((T ^^ (n - j)) x))\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                  indicator (A (i - j)) ((T ^^ (i - j)) x)\n                              \\<partial>M)", "by (subst nn_integral_sum, auto)"], ["proof (state)\nthis:\n  (\\<Sum>j<K.\n      \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                             (\\<Sum>i = K..<n.\n                                 indicator (A (i - j)) ((T ^^ (i - j)) x))\n                         \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                indicator (A (i - j)) ((T ^^ (i - j)) x)\n                            \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>j<K.\n      \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                             (\\<Sum>i = K..<n.\n                                 indicator (A (i - j)) ((T ^^ (i - j)) x))\n                         \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                indicator (A (i - j)) ((T ^^ (i - j)) x)\n                            \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>i\\<in>{K..<n}. (\\<Sum>j \\<in> {..<K}. (\\<integral>\\<^sup>+x. f x * indicator (A (i-j)) ((T^^(i-j)) ((T^^j) x)) \\<partial>M)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                  indicator (A (i - j)) ((T ^^ (i - j)) x)\n                              \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. f x *\n                                  indicator (A (i - j))\n                                   ((T ^^ (i - j)) ((T ^^ j) x))\n                              \\<partial>M)", "by (subst nn_transfer_operator_intg_Tn, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                indicator (A (i - j)) ((T ^^ (i - j)) x)\n                            \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. f x *\n                                indicator (A (i - j))\n                                 ((T ^^ (i - j)) ((T ^^ j) x))\n                            \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. (nn_transfer_operator ^^ j) f x *\n                                indicator (A (i - j)) ((T ^^ (i - j)) x)\n                            \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. f x *\n                                indicator (A (i - j))\n                                 ((T ^^ (i - j)) ((T ^^ j) x))\n                            \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>i\\<in>{K..<n}. (\\<integral>\\<^sup>+x. f x * (\\<Sum>j \\<in> {..<K}. indicator (A (i-j)) ((T^^(i-j)) ((T^^j) x))) \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. f x *\n                                  indicator (A (i - j))\n                                   ((T ^^ (i - j)) ((T ^^ j) x))\n                              \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. f x *\n                               (\\<Sum>j<K.\n                                   indicator (A (i - j))\n                                    ((T ^^ (i - j)) ((T ^^ j) x)))\n                           \\<partial>M)", "unfolding sum_distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<Sum>j<K.\n           \\<integral>\\<^sup>+ x. f x *\n                                  indicator (A (i - j))\n                                   ((T ^^ (i - j)) ((T ^^ j) x))\n                              \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. (\\<Sum>n<K.\n                                   f x *\n                                   indicator (A (i - n))\n                                    ((T ^^ (i - n)) ((T ^^ n) x)))\n                           \\<partial>M)", "by (subst nn_integral_sum, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. f x *\n                                indicator (A (i - j))\n                                 ((T ^^ (i - j)) ((T ^^ j) x))\n                            \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. f x *\n                             (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j)) ((T ^^ j) x)))\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<Sum>j<K.\n         \\<integral>\\<^sup>+ x. f x *\n                                indicator (A (i - j))\n                                 ((T ^^ (i - j)) ((T ^^ j) x))\n                            \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. f x *\n                             (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j)) ((T ^^ j) x)))\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>i\\<in>{K..<n}. (\\<integral>\\<^sup>+x. (\\<Sum>j \\<in> {..<K}. indicator (A (i-j)) ((T^^((i-j)+j)) x)) \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. f x *\n                               (\\<Sum>j<K.\n                                   indicator (A (i - j))\n                                    ((T ^^ (i - j)) ((T ^^ j) x)))\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   indicator (A (i - j))\n                                    ((T ^^ (i - j + j)) x))\n                           \\<partial>P)", "unfolding \\<open>P = density M f\\<close> funpow_add comp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. f x *\n                               (\\<Sum>j<K.\n                                   indicator (A (i - j))\n                                    ((T ^^ (i - j)) ((T ^^ j) x)))\n                           \\<partial>M) =\n    (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   indicator (A (i - j))\n                                    ((T ^^ (i - j)) ((T ^^ j) x)))\n                           \\<partial>density M f)", "apply (rule sum.cong, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {K..<n} \\<Longrightarrow>\n       \\<integral>\\<^sup>+ xa. f xa *\n                               (\\<Sum>j<K.\n                                   indicator (A (x - j))\n                                    ((T ^^ (x - j)) ((T ^^ j) xa)))\n                          \\<partial>M =\n       \\<integral>\\<^sup>+ xa. (\\<Sum>j<K.\n                                   indicator (A (x - j))\n                                    ((T ^^ (x - j)) ((T ^^ j) xa)))\n                          \\<partial>density M f", "by (rule nn_integral_density[symmetric], auto)"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. f x *\n                             (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j)) ((T ^^ j) x)))\n                         \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j + j)) x))\n                         \\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. f x *\n                             (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j)) ((T ^^ j) x)))\n                         \\<partial>M) =\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j + j)) x))\n                         \\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>i\\<in>{K..<n}. (\\<integral>\\<^sup>+x. (\\<Sum>j \\<in> {..<K}. indicator (A (i-j)) ((T^^i) x)) \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   indicator (A (i - j))\n                                    ((T ^^ (i - j + j)) x))\n                           \\<partial>P) =\n    (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   indicator (A (i - j)) ((T ^^ i) x))\n                           \\<partial>P)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j + j)) x))\n                         \\<partial>P) =\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K. indicator (A (i - j)) ((T ^^ i) x))\n                         \\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                 indicator (A (i - j))\n                                  ((T ^^ (i - j + j)) x))\n                         \\<partial>P) =\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K. indicator (A (i - j)) ((T ^^ i) x))\n                         \\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... \\<le> (\\<Sum>i\\<in>{K..<n}. (\\<integral>\\<^sup>+x. (1::ennreal) \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n.\n        \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                   indicator (A (i - j)) ((T ^^ i) x))\n                           \\<partial>P)\n    \\<le> (\\<Sum>i = K..<n. \\<integral>\\<^sup>+ x. 1 \\<partial>P)", "apply (rule sum_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> {K..<n} \\<Longrightarrow>\n       \\<integral>\\<^sup>+ x. (\\<Sum>j<K.\n                                  indicator (A (i - j)) ((T ^^ i) x))\n                          \\<partial>P\n       \\<le> \\<integral>\\<^sup>+ x. 1 \\<partial>P", "apply (rule nn_integral_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i x.\n       \\<lbrakk>i \\<in> {K..<n}; x \\<in> space P\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>j<K. indicator (A (i - j)) ((T ^^ i) x))\n                         \\<le> 1", "apply (rule disjoint_family_indicator_le_1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i x.\n       \\<lbrakk>i \\<in> {K..<n}; x \\<in> space P\\<rbrakk>\n       \\<Longrightarrow> disjoint_family_on (\\<lambda>ia. A (i - ia)) {..<K}", "using assms(2)"], ["proof (prove)\nusing this:\n  disjoint_family A\n\ngoal (1 subgoal):\n 1. \\<And>i x.\n       \\<lbrakk>i \\<in> {K..<n}; x \\<in> space P\\<rbrakk>\n       \\<Longrightarrow> disjoint_family_on (\\<lambda>ia. A (i - ia)) {..<K}", "apply (auto simp add: disjoint_family_on_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i x m na xa.\n       \\<lbrakk>x \\<in> space M;\n        \\<forall>m n. m \\<noteq> n \\<longrightarrow> A m \\<inter> A n = {};\n        m < K; na < K; K \\<le> i; i < n; m \\<noteq> na; xa \\<in> A (i - m);\n        xa \\<in> A (i - na)\\<rbrakk>\n       \\<Longrightarrow> False", "by (metis Int_iff diff_diff_cancel equals0D le_less le_trans)"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K. indicator (A (i - j)) ((T ^^ i) x))\n                         \\<partial>P)\n  \\<le> (\\<Sum>i = K..<n. \\<integral>\\<^sup>+ x. 1 \\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n.\n      \\<integral>\\<^sup>+ x. (\\<Sum>j<K. indicator (A (i - j)) ((T ^^ i) x))\n                         \\<partial>P)\n  \\<le> (\\<Sum>i = K..<n. \\<integral>\\<^sup>+ x. 1 \\<partial>P)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... \\<le> n * emeasure P (space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n. \\<integral>\\<^sup>+ x. 1 \\<partial>P)\n    \\<le> of_nat n * emeasure P (space M)", "using assms(4)"], ["proof (prove)\nusing this:\n  sets P = sets M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = K..<n. \\<integral>\\<^sup>+ x. 1 \\<partial>P)\n    \\<le> of_nat n * emeasure P (space M)", "by (auto intro!: mult_right_mono)"], ["proof (state)\nthis:\n  (\\<Sum>i = K..<n. \\<integral>\\<^sup>+ x. 1 \\<partial>P)\n  \\<le> of_nat n * emeasure P (space M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "finally"], ["proof (chain)\npicking this:\n  L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n  \\<le> of_nat n * emeasure P (space M)", "have *: \"L * (\\<Sum> k \\<in> {K..<n-K}. emeasure P (U \\<inter> (T^^k)-`(A k))) \\<le> n * emeasure P (space M)\""], ["proof (prove)\nusing this:\n  L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n  \\<le> of_nat n * emeasure P (space M)\n\ngoal (1 subgoal):\n 1. L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n    \\<le> of_nat n * emeasure P (space M)", "by simp"], ["proof (state)\nthis:\n  L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n  \\<le> of_nat n * emeasure P (space M)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have Ineq: \"(\\<Sum> k \\<in> {K..<n-K}. emeasure P (U \\<inter> (T^^k)-`(A k))) \\<le> n * emeasure P (space M) / L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n    \\<le> of_nat n * emeasure P (space M) / L", "using divide_right_mono_ennreal[OF *, of L] \\<open>L \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  L * (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) / L\n  \\<le> of_nat n * emeasure P (space M) / L\n  L \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n    \\<le> of_nat n * emeasure P (space M) / L", "by (metis (no_types, lifting) \\<open>L \\<noteq> \\<infinity>\\<close> ennreal_mult_divide_eq infinity_ennreal_def mult.commute)"], ["proof (state)\nthis:\n  (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k))\n  \\<le> of_nat n * emeasure P (space M) / L\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have I: \"{..<K} \\<union> {K..<n-K} \\<union> {n-K..<n} = {..<n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {..<K} \\<union> {K..<n - K} \\<union> {n - K..<n} = {..<n}", "using \\<open>n \\<ge> 2 * K\\<close>"], ["proof (prove)\nusing this:\n  2 * K \\<le> n\n\ngoal (1 subgoal):\n 1. {..<K} \\<union> {K..<n - K} \\<union> {n - K..<n} = {..<n}", "by auto"], ["proof (state)\nthis:\n  {..<K} \\<union> {K..<n - K} \\<union> {n - K..<n} = {..<n}\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"(\\<Sum>k\\<in>{..<n}. emeasure P (space M \\<inter> (T^^k)-`(A k))) \\<le> (\\<Sum>k\\<in>{..<n}. emeasure P (U \\<inter> (T^^k)-`(A k)) + epsilon)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    \\<le> (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon)", "proof (rule sum_mono)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "have \"emeasure P (space M \\<inter> (T^^k)-`(A k)) \\<le> emeasure P ((U \\<inter> (T^^k)-`(A k)) \\<union> (space M - U))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (space M \\<inter> (T ^^ k) -` A k)\n    \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k \\<union> (space M - U))", "by (rule emeasure_mono, auto)"], ["proof (state)\nthis:\n  emeasure P (space M \\<inter> (T ^^ k) -` A k)\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k \\<union> (space M - U))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "also"], ["proof (state)\nthis:\n  emeasure P (space M \\<inter> (T ^^ k) -` A k)\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k \\<union> (space M - U))\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "have \"... \\<le> emeasure P (U \\<inter> (T^^k)-`(A k)) + emeasure P (space M - U)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (U \\<inter> (T ^^ k) -` A k \\<union> (space M - U))\n    \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + emeasure P (space M - U)", "by (rule emeasure_subadditive, auto)"], ["proof (state)\nthis:\n  emeasure P (U \\<inter> (T ^^ k) -` A k \\<union> (space M - U))\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + emeasure P (space M - U)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "also"], ["proof (state)\nthis:\n  emeasure P (U \\<inter> (T ^^ k) -` A k \\<union> (space M - U))\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + emeasure P (space M - U)\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "have \"... \\<le> emeasure P (U \\<inter> (T^^k)-`(A k)) + epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (U \\<inter> (T ^^ k) -` A k) + emeasure P (space M - U)\n    \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "using U(1)"], ["proof (prove)\nusing this:\n  emeasure P (space M - U) < epsilon\n\ngoal (1 subgoal):\n 1. emeasure P (U \\<inter> (T ^^ k) -` A k) + emeasure P (space M - U)\n    \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "by auto"], ["proof (state)\nthis:\n  emeasure P (U \\<inter> (T ^^ k) -` A k) + emeasure P (space M - U)\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<n} \\<Longrightarrow>\n       emeasure P (space M \\<inter> (T ^^ k) -` A k)\n       \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "finally"], ["proof (chain)\npicking this:\n  emeasure P (space M \\<inter> (T ^^ k) -` A k)\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "show \"emeasure P (space M \\<inter> (T ^^ k) -` A k) \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon\""], ["proof (prove)\nusing this:\n  emeasure P (space M \\<inter> (T ^^ k) -` A k)\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon\n\ngoal (1 subgoal):\n 1. emeasure P (space M \\<inter> (T ^^ k) -` A k)\n    \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon", "by simp"], ["proof (state)\nthis:\n  emeasure P (space M \\<inter> (T ^^ k) -` A k)\n  \\<le> emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n  \\<le> (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n  \\<le> (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>k\\<in>{..<K} \\<union> {K..<n-K} \\<union> {n-K..<n}. emeasure P (U \\<inter> (T^^k)-`(A k))) + (\\<Sum>k\\<in>{..<n}. epsilon)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon) =\n    (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K} \\<union> {n - K..<n}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon)", "unfolding sum.distrib I"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon) =\n  (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K} \\<union> {n - K..<n}.\n     emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k<n. epsilon)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k<n. emeasure P (U \\<inter> (T ^^ k) -` A k) + epsilon) =\n  (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K} \\<union> {n - K..<n}.\n     emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k<n. epsilon)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = (\\<Sum>k\\<in>{..<K}. emeasure P (U \\<inter> (T^^k)-`(A k))) + (\\<Sum>k\\<in>{K..<n-K}. emeasure P (U \\<inter> (T^^k)-`(A k)))\n                      + (\\<Sum>k\\<in>{n-K..<n}. emeasure P (U \\<inter> (T^^k)-`(A k))) + n * epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K} \\<union> {n - K..<n}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon", "apply (subst sum.union_disjoint)"], ["proof (prove)\ngoal (4 subgoals):\n 1. finite ({..<K} \\<union> {K..<n - K})\n 2. finite {n - K..<n}\n 3. ({..<K} \\<union> {K..<n - K}) \\<inter> {n - K..<n} = {}\n 4. (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {n - K..<n}\n 2. ({..<K} \\<union> {K..<n - K}) \\<inter> {n - K..<n} = {}\n 3. (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. ({..<K} \\<union> {K..<n - K}) \\<inter> {n - K..<n} = {}\n 2. (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon", "using \\<open>n \\<ge> 2 * K\\<close>"], ["proof (prove)\nusing this:\n  2 * K \\<le> n\n\ngoal (2 subgoals):\n 1. ({..<K} \\<union> {K..<n - K}) \\<inter> {n - K..<n} = {}\n 2. (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon", "apply (simp add: ivl_disj_int_one(2) ivl_disj_un_one(2))"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K}.\n       emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k<n. epsilon) =\n    (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon", "by (subst sum.union_disjoint, auto)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K} \\<union> {n - K..<n}.\n     emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k<n. epsilon) =\n  (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<in>{..<K} \\<union> {K..<n - K} \\<union> {n - K..<n}.\n     emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k<n. epsilon) =\n  (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... \\<le> (\\<Sum>k\\<in>{..<K}. emeasure P (space M)) + n * emeasure P (space M) / L + (\\<Sum>k\\<in>{n-K..<n}. emeasure P (space M)) + n * epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n    of_nat n * epsilon\n    \\<le> (\\<Sum>k<K. emeasure P (space M)) +\n          of_nat n * emeasure P (space M) / L +\n          (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n          of_nat n * epsilon", "apply (intro add_mono sum_mono Ineq emeasure_mono)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>k.\n       k \\<in> {..<K} \\<Longrightarrow>\n       U \\<inter> (T ^^ k) -` A k \\<subseteq> space M\n 2. \\<And>k. k \\<in> {..<K} \\<Longrightarrow> space M \\<in> sets P\n 3. \\<And>k.\n       k \\<in> {n - K..<n} \\<Longrightarrow>\n       U \\<inter> (T ^^ k) -` A k \\<subseteq> space M\n 4. \\<And>k. k \\<in> {n - K..<n} \\<Longrightarrow> space M \\<in> sets P\n 5. of_nat n * epsilon \\<le> of_nat n * epsilon", "using \\<open>U \\<subseteq> space M\\<close>"], ["proof (prove)\nusing this:\n  U \\<subseteq> space M\n\ngoal (5 subgoals):\n 1. \\<And>k.\n       k \\<in> {..<K} \\<Longrightarrow>\n       U \\<inter> (T ^^ k) -` A k \\<subseteq> space M\n 2. \\<And>k. k \\<in> {..<K} \\<Longrightarrow> space M \\<in> sets P\n 3. \\<And>k.\n       k \\<in> {n - K..<n} \\<Longrightarrow>\n       U \\<inter> (T ^^ k) -` A k \\<subseteq> space M\n 4. \\<And>k. k \\<in> {n - K..<n} \\<Longrightarrow> space M \\<in> sets P\n 5. of_nat n * epsilon \\<le> of_nat n * epsilon", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  of_nat n * epsilon\n  \\<le> (\\<Sum>k<K. emeasure P (space M)) +\n        of_nat n * emeasure P (space M) / L +\n        (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n        of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k<K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = K..<n - K. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  (\\<Sum>k = n - K..<n. emeasure P (U \\<inter> (T ^^ k) -` A k)) +\n  of_nat n * epsilon\n  \\<le> (\\<Sum>k<K. emeasure P (space M)) +\n        of_nat n * emeasure P (space M) / L +\n        (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n        of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = K * emeasure P (space M) + n * emeasure P (space M)/L + K * emeasure P (space M) + n * epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<K. emeasure P (space M)) +\n    of_nat n * emeasure P (space M) / L +\n    (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n    of_nat n * epsilon =\n    of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n    of_nat K * emeasure P (space M) +\n    of_nat n * epsilon", "using \\<open>n \\<ge> 2 * K\\<close>"], ["proof (prove)\nusing this:\n  2 * K \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<K. emeasure P (space M)) +\n    of_nat n * emeasure P (space M) / L +\n    (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n    of_nat n * epsilon =\n    of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n    of_nat K * emeasure P (space M) +\n    of_nat n * epsilon", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k<K. emeasure P (space M)) + of_nat n * emeasure P (space M) / L +\n  (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n  of_nat n * epsilon =\n  of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n  of_nat K * emeasure P (space M) +\n  of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  (\\<Sum>k<K. emeasure P (space M)) + of_nat n * emeasure P (space M) / L +\n  (\\<Sum>k = n - K..<n. emeasure P (space M)) +\n  of_nat n * epsilon =\n  of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n  of_nat K * emeasure P (space M) +\n  of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... \\<le> n * epsilon + n * epsilon + n * epsilon + n * epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n    of_nat K * emeasure P (space M) +\n    of_nat n * epsilon\n    \\<le> of_nat n * epsilon + of_nat n * epsilon + of_nat n * epsilon +\n          of_nat n * epsilon", "apply (intro add_mono)"], ["proof (prove)\ngoal (4 subgoals):\n 1. of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon\n 2. of_nat n * emeasure P (space M) / L \\<le> of_nat n * epsilon\n 3. of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon\n 4. of_nat n * epsilon \\<le> of_nat n * epsilon", "using \\<open>K * emeasure P (space M) \\<le> n * epsilon\\<close> \\<open>of_nat n * (emeasure P (space M)/L) \\<le> of_nat n * epsilon\\<close>\n      ennreal_times_divide"], ["proof (prove)\nusing this:\n  of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon\n  of_nat n * (emeasure P (space M) / L) \\<le> of_nat n * epsilon\n  ?a * (?b / ?c) = ?a * ?b / ?c\n\ngoal (4 subgoals):\n 1. of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon\n 2. of_nat n * emeasure P (space M) / L \\<le> of_nat n * epsilon\n 3. of_nat K * emeasure P (space M) \\<le> of_nat n * epsilon\n 4. of_nat n * epsilon \\<le> of_nat n * epsilon", "by auto"], ["proof (state)\nthis:\n  of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n  of_nat K * emeasure P (space M) +\n  of_nat n * epsilon\n  \\<le> of_nat n * epsilon + of_nat n * epsilon + of_nat n * epsilon +\n        of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  of_nat K * emeasure P (space M) + of_nat n * emeasure P (space M) / L +\n  of_nat K * emeasure P (space M) +\n  of_nat n * epsilon\n  \\<le> of_nat n * epsilon + of_nat n * epsilon + of_nat n * epsilon +\n        of_nat n * epsilon\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... = n * (4 * epsilon)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. of_nat n * epsilon + of_nat n * epsilon + of_nat n * epsilon +\n    of_nat n * epsilon =\n    of_nat n * (4 * epsilon)", "by (metis (no_types, lifting) add.assoc distrib_right mult.left_commute mult_2 numeral_Bit0)"], ["proof (state)\nthis:\n  of_nat n * epsilon + of_nat n * epsilon + of_nat n * epsilon +\n  of_nat n * epsilon =\n  of_nat n * (4 * epsilon)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "also"], ["proof (state)\nthis:\n  of_nat n * epsilon + of_nat n * epsilon + of_nat n * epsilon +\n  of_nat n * epsilon =\n  of_nat n * (4 * epsilon)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "have \"... < n * delta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. of_nat n * (4 * epsilon) < of_nat n * delta", "using \\<open>4 * epsilon < delta\\<close> \\<open>n \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  4 * epsilon < delta\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. of_nat n * (4 * epsilon) < of_nat n * delta", "by (simp add: ennreal_mult_strict_left_mono ennreal_of_nat_eq_real_of_nat)"], ["proof (state)\nthis:\n  of_nat n * (4 * epsilon) < of_nat n * delta\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n  < of_nat n * delta", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n  < of_nat n * delta\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n    < delta", "apply (subst divide_less_ennreal)"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < of_nat n * delta \\<Longrightarrow>\n    of_nat n \\<noteq> 0\n 2. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < of_nat n * delta \\<Longrightarrow>\n    of_nat n < \\<top>\n 3. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < of_nat n * delta \\<Longrightarrow>\n    (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < delta * of_nat n", "using \\<open>n \\<ge> 1\\<close> of_nat_less_top"], ["proof (prove)\nusing this:\n  1 \\<le> n\n  of_nat ?i < \\<top>\n\ngoal (3 subgoals):\n 1. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < of_nat n * delta \\<Longrightarrow>\n    of_nat n \\<noteq> 0\n 2. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < of_nat n * delta \\<Longrightarrow>\n    of_nat n < \\<top>\n 3. (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < of_nat n * delta \\<Longrightarrow>\n    (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k))\n    < delta * of_nat n", "by (auto simp add: mult.commute)"], ["proof (state)\nthis:\n  (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n  < delta\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?n3 \\<Longrightarrow>\n  (\\<Sum>k<?n3. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat ?n3\n  < delta\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat x\n          < a", "then"], ["proof (chain)\npicking this:\n  N \\<le> ?n3 \\<Longrightarrow>\n  (\\<Sum>k<?n3. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat ?n3\n  < delta", "show \"eventually (\\<lambda>n. (\\<Sum>k\\<in>{..<n}. emeasure P (space M \\<inter> (T^^k)-`(A k))) / n < delta) sequentially\""], ["proof (prove)\nusing this:\n  N \\<le> ?n3 \\<Longrightarrow>\n  (\\<Sum>k<?n3. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat ?n3\n  < delta\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n       < delta", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  N \\<le> ?n3 \\<Longrightarrow>\n  (\\<Sum>k<?n3. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat ?n3\n  < delta\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) /\n          of_nat n\n          < delta", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     (\\<Sum>k<n. emeasure P (space M \\<inter> (T ^^ k) -` A k)) / of_nat n\n     < delta\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < (\\<Sum>i<x. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n              of_nat x", "qed (simp)"], ["", "text \\<open>We state the previous theorem using measures instead of emeasures. This is clearly\nequivalent, but one has to play with ennreal carefully to prove it.\\<close>"], ["", "theorem (in conservative) disjoint_sets_measure_Cesaro_tendsto_zero:\n  fixes P::\"'a measure\" and A::\"nat \\<Rightarrow> 'a set\"\n  assumes [measurable]: \"\\<And>n. A n \\<in> sets M\"\n      and \"disjoint_family A\"\n          \"absolutely_continuous M P\" \"sets P = sets M\"\n          \"emeasure P (space M) \\<noteq> \\<infinity>\"\n  shows \"(\\<lambda>n. (\\<Sum>i<n. measure P (space M \\<inter> (T^^i)-`(A i)))/n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "have \"space P = space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space P = space M", "using assms(4) sets_eq_imp_space_eq"], ["proof (prove)\nusing this:\n  sets P = sets M\n  sets ?M = sets ?M' \\<Longrightarrow> space ?M = space ?M'\n\ngoal (1 subgoal):\n 1. space P = space M", "by blast"], ["proof (state)\nthis:\n  space P = space M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "moreover"], ["proof (state)\nthis:\n  space P = space M\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "have \"emeasure P Q \\<le> emeasure P (space P)\" for Q"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P Q \\<le> emeasure P (space P)", "by (simp add: emeasure_space)"], ["proof (state)\nthis:\n  emeasure P ?Q3 \\<le> emeasure P (space P)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "ultimately"], ["proof (chain)\npicking this:\n  space P = space M\n  emeasure P ?Q3 \\<le> emeasure P (space P)", "have [simp]: \"emeasure P Q \\<noteq> \\<top>\" for Q"], ["proof (prove)\nusing this:\n  space P = space M\n  emeasure P ?Q3 \\<le> emeasure P (space P)\n\ngoal (1 subgoal):\n 1. emeasure P Q \\<noteq> \\<top>", "using \\<open>emeasure P (space M) \\<noteq> \\<infinity>\\<close> neq_top_trans"], ["proof (prove)\nusing this:\n  space P = space M\n  emeasure P ?Q3 \\<le> emeasure P (space P)\n  emeasure P (space M) \\<noteq> \\<infinity>\n  \\<lbrakk>?y \\<noteq> \\<top>; ?x \\<le> ?y\\<rbrakk>\n  \\<Longrightarrow> ?x \\<noteq> \\<top>\n\ngoal (1 subgoal):\n 1. emeasure P Q \\<noteq> \\<top>", "by auto"], ["proof (state)\nthis:\n  emeasure P ?Q3 \\<noteq> \\<top>\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "have *: \"ennreal ((\\<Sum>i<n. measure P (space M \\<inter> (T^^i)-`(A i)))/n) = (\\<Sum>i<n. emeasure P (space M \\<inter> (T^^i)-`(A i)))/n\" if \"n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal\n     ((\\<Sum>i<n.\n          Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n      real n) =\n    (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "apply (subst divide_ennreal[symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. 0 \\<le> (\\<Sum>i<n.\n                Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i))\n 2. 0 < real n\n 3. ennreal\n     (\\<Sum>i<n.\n         Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n    ennreal (real n) =\n    (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "apply (auto intro!: sum_nonneg that simp add: ennreal_of_nat_eq_real_of_nat[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal\n     (\\<Sum>i<n.\n         Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n    of_nat n =\n    (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "apply(subst sum_ennreal[symmetric], simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<n.\n        ennreal\n         (Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i))) /\n    of_nat n =\n    (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "apply (subst emeasure_eq_ennreal_measure)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>i. emeasure P (space M \\<inter> (T ^^ i) -` A i) \\<noteq> \\<top>\n 2. (\\<Sum>i<n.\n        ennreal\n         (Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i))) /\n    of_nat n =\n    (\\<Sum>i<n.\n        ennreal\n         (Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i))) /\n    of_nat n", "by auto"], ["proof (state)\nthis:\n  0 < ?n3 \\<Longrightarrow>\n  ennreal\n   ((\\<Sum>i<?n3.\n        Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n    real ?n3) =\n  (\\<Sum>i<?n3. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat ?n3\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "have \"eventually (\\<lambda>n. ennreal ((\\<Sum>i<n. measure P (space M \\<inter> (T^^i)-`(A i)))/n) = (\\<Sum>i<n. emeasure P (space M \\<inter> (T^^i)-`(A i)))/n) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ennreal\n        ((\\<Sum>i<n.\n             Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n         real n) =\n       (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "unfolding eventually_sequentially"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          ennreal\n           ((\\<Sum>i<n.\n                Sigma_Algebra.measure P\n                 (space M \\<inter> (T ^^ i) -` A i)) /\n            real n) =\n          (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) /\n          of_nat n", "apply (rule exI[of _ 1])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>1.\n       ennreal\n        ((\\<Sum>i<n.\n             Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n         real n) =\n       (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "using *"], ["proof (prove)\nusing this:\n  0 < ?n3 \\<Longrightarrow>\n  ennreal\n   ((\\<Sum>i<?n3.\n        Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n    real ?n3) =\n  (\\<Sum>i<?n3. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat ?n3\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>1.\n       ennreal\n        ((\\<Sum>i<n.\n             Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n         real n) =\n       (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ennreal\n      ((\\<Sum>i<n.\n           Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n       real n) =\n     (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ennreal\n      ((\\<Sum>i<n.\n           Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n       real n) =\n     (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n", "have *: \"(\\<lambda>n. ennreal ((\\<Sum>i<n. measure P (space M \\<inter> (T^^i)-`(A i)))/n)) \\<longlonglongrightarrow> ennreal 0\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ennreal\n      ((\\<Sum>i<n.\n           Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n       real n) =\n     (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ennreal\n         ((\\<Sum>i<n.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real n))\n    \\<longlonglongrightarrow> ennreal 0", "using disjoint_sets_emeasure_Cesaro_tendsto_zero[OF assms] tendsto_cong"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ennreal\n      ((\\<Sum>i<n.\n           Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n       real n) =\n     (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n\n  (\\<lambda>n.\n      (\\<Sum>i<n. emeasure P (space M \\<inter> (T ^^ i) -` A i)) / of_nat n)\n  \\<longlonglongrightarrow> 0\n  \\<forall>\\<^sub>F x in ?F. ?f x = ?g x \\<Longrightarrow>\n  (?f \\<longlongrightarrow> ?c) ?F = (?g \\<longlongrightarrow> ?c) ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ennreal\n         ((\\<Sum>i<n.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real n))\n    \\<longlonglongrightarrow> ennreal 0", "by force"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      ennreal\n       ((\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n))\n  \\<longlonglongrightarrow> ennreal 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "apply (subst tendsto_ennreal_iff[symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially.\n       0 \\<le> (\\<Sum>i<x.\n                   Sigma_Algebra.measure P\n                    (space M \\<inter> (T ^^ i) -` A i)) /\n               real x\n 2. 0 \\<le> 0\n 3. (\\<lambda>x.\n        ennreal\n         ((\\<Sum>i<x.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real x))\n    \\<longlonglongrightarrow> ennreal 0", "using *"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      ennreal\n       ((\\<Sum>i<n.\n            Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n        real n))\n  \\<longlonglongrightarrow> ennreal 0\n\ngoal (3 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially.\n       0 \\<le> (\\<Sum>i<x.\n                   Sigma_Algebra.measure P\n                    (space M \\<inter> (T ^^ i) -` A i)) /\n               real x\n 2. 0 \\<le> 0\n 3. (\\<lambda>x.\n        ennreal\n         ((\\<Sum>i<x.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real x))\n    \\<longlonglongrightarrow> ennreal 0", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ennreal\n         ((\\<Sum>i<n.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real n))\n    \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n    \\<forall>\\<^sub>F x in sequentially.\n       0 \\<le> (\\<Sum>i<x.\n                   Sigma_Algebra.measure P\n                    (space M \\<inter> (T ^^ i) -` A i)) /\n               real x", "unfolding eventually_sequentially"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ennreal\n         ((\\<Sum>i<n.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real n))\n    \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n    \\<exists>N.\n       \\<forall>n\\<ge>N.\n          0 \\<le> (\\<Sum>i<n.\n                      Sigma_Algebra.measure P\n                       (space M \\<inter> (T ^^ i) -` A i)) /\n                  real n", "apply (rule exI[of _ 1])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ennreal\n         ((\\<Sum>i<n.\n              Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n          real n))\n    \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n    \\<forall>n\\<ge>1.\n       0 \\<le> (\\<Sum>i<n.\n                   Sigma_Algebra.measure P\n                    (space M \\<inter> (T ^^ i) -` A i)) /\n               real n", "by (auto simp add: divide_simps intro!: sum_nonneg)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>i<n.\n          Sigma_Algebra.measure P (space M \\<inter> (T ^^ i) -` A i)) /\n      real n)\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>As convergence to $0$ in Cesaro mean is equivalent to convergence to $0$ along a density\none sequence, we obtain the equivalent formulation of the previous theorem.\\<close>"], ["", "theorem (in conservative) disjoint_sets_measure_density_one_tendsto_zero:\n  fixes P::\"'a measure\" and A::\"nat \\<Rightarrow> 'a set\"\n  assumes [measurable]: \"\\<And>n. A n \\<in> sets M\"\n      and \"disjoint_family A\"\n          \"absolutely_continuous M P\" \"sets P = sets M\"\n          \"emeasure P (space M) \\<noteq> \\<infinity>\"\n  shows \"\\<exists>B. lower_asymptotic_density B = 1 \\<and> (\\<lambda>n. measure P (space M \\<inter> (T^^n)-`(A n)) * indicator B n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<lambda>n.\n           Sigma_Algebra.measure P (space M \\<inter> (T ^^ n) -` A n) *\n           indicat_real B n)\n       \\<longlonglongrightarrow> 0", "by (rule cesaro_imp_density_one[OF _ disjoint_sets_measure_Cesaro_tendsto_zero[OF assms]], simp)"], ["", "subsection \\<open>Normalizing sequences do not grow exponentially in conservative systems\\<close>"], ["", "text \\<open>We prove the main result in~\\cite{gouezel_normalizing_sequences}: in a\nconservative system, if a renormalized sequence $S_n f/B_n$ converges in distribution towards\na limit which is not a Dirac mass at $0$, then $B_n$ can not grow exponentially fast. The proof\nis expressed in the following locale. The main theorem is Theorem~\\verb+subexponential_growth+\nbelow. To prove it, we need several preliminary estimates.\\<close>"], ["", "text \\<open>We will use the fact that a real random variables which is not the Dirac mass at $0$\ngives positive mass to a set separated away from $0$.\\<close>"], ["", "lemma (in real_distribution) not_Dirac_0_imp_positive_mass_away_0:\n  assumes \"prob {0} < 1\"\n  shows \"\\<exists>a. a > 0 \\<and> prob {x. abs(x) > a} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "have \"1 = prob UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 = prob UNIV", "using prob_space"], ["proof (prove)\nusing this:\n  prob (space M) = 1\n\ngoal (1 subgoal):\n 1. 1 = prob UNIV", "by auto"], ["proof (state)\nthis:\n  1 = prob UNIV\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "also"], ["proof (state)\nthis:\n  1 = prob UNIV\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "have \"... = prob {0} + prob (UNIV -{0})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob UNIV = prob {0} + prob (UNIV - {0})", "by (subst finite_measure_Union[symmetric], auto)"], ["proof (state)\nthis:\n  prob UNIV = prob {0} + prob (UNIV - {0})\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "finally"], ["proof (chain)\npicking this:\n  1 = prob {0} + prob (UNIV - {0})", "have \"0 < prob (UNIV -{0})\""], ["proof (prove)\nusing this:\n  1 = prob {0} + prob (UNIV - {0})\n\ngoal (1 subgoal):\n 1. 0 < prob (UNIV - {0})", "using assms"], ["proof (prove)\nusing this:\n  1 = prob {0} + prob (UNIV - {0})\n  prob {0} < 1\n\ngoal (1 subgoal):\n 1. 0 < prob (UNIV - {0})", "by auto"], ["proof (state)\nthis:\n  0 < prob (UNIV - {0})\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "also"], ["proof (state)\nthis:\n  0 < prob (UNIV - {0})\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "have \"... \\<le> prob (\\<Union>n::nat. {x. abs(x)>(1/2)^n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob (UNIV - {0})\n    \\<le> prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>})", "apply (rule finite_measure_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. UNIV - {0} \\<subseteq> (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>})\n 2. (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>}) \\<in> events", "by (auto, meson one_less_numeral_iff reals_power_lt_ex semiring_norm(76) zero_less_abs_iff)"], ["proof (state)\nthis:\n  prob (UNIV - {0}) \\<le> prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>})\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "finally"], ["proof (chain)\npicking this:\n  0 < prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>})", "have \"prob (\\<Union>n::nat. {x. abs(x)>(1/2)^n}) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  0 < prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>})\n\ngoal (1 subgoal):\n 1. prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>}) \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>}) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "then"], ["proof (chain)\npicking this:\n  prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>}) \\<noteq> 0", "have \"\\<exists>n. prob {x. abs(x)>(1/2)^n} \\<noteq> 0\""], ["proof (prove)\nusing this:\n  prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>}) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>n. prob {x. (1 / 2) ^ n < \\<bar>x\\<bar>} \\<noteq> 0", "using measure_countably_zero[of \"\\<lambda>n. {x. abs(x)>(1/2)^n}\"]"], ["proof (prove)\nusing this:\n  prob (\\<Union>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>}) \\<noteq> 0\n  \\<lbrakk>range (\\<lambda>n. {x. (1 / 2) ^ n < \\<bar>x\\<bar>})\n           \\<subseteq> events;\n   \\<And>i. prob {x. (1 / 2) ^ i < \\<bar>x\\<bar>} = 0\\<rbrakk>\n  \\<Longrightarrow> prob (\\<Union>i. {x. (1 / 2) ^ i < \\<bar>x\\<bar>}) = 0\n\ngoal (1 subgoal):\n 1. \\<exists>n. prob {x. (1 / 2) ^ n < \\<bar>x\\<bar>} \\<noteq> 0", "by force"], ["proof (state)\nthis:\n  \\<exists>n. prob {x. (1 / 2) ^ n < \\<bar>x\\<bar>} \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "then"], ["proof (chain)\npicking this:\n  \\<exists>n. prob {x. (1 / 2) ^ n < \\<bar>x\\<bar>} \\<noteq> 0", "obtain N where N: \"prob {x. abs(x) > (1/2)^N} \\<noteq> 0\""], ["proof (prove)\nusing this:\n  \\<exists>n. prob {x. (1 / 2) ^ n < \\<bar>x\\<bar>} \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        prob {x. (1 / 2) ^ N < \\<bar>x\\<bar>} \\<noteq> 0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  prob {x. (1 / 2) ^ N < \\<bar>x\\<bar>} \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}", "apply (rule exI[of _ \"(1/2)^N\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < (1 / 2) ^ N \\<and> 0 < prob {x. (1 / 2) ^ N < \\<bar>x\\<bar>}", "using N"], ["proof (prove)\nusing this:\n  prob {x. (1 / 2) ^ N < \\<bar>x\\<bar>} \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < (1 / 2) ^ N \\<and> 0 < prob {x. (1 / 2) ^ N < \\<bar>x\\<bar>}", "by (auto simp add: zero_less_measure_iff)"], ["proof (state)\nthis:\n  \\<exists>a>0. 0 < prob {x. a < \\<bar>x\\<bar>}\n\ngoal:\nNo subgoals!", "qed"], ["", "locale conservative_limit =\n  conservative M + PS: prob_space P + PZ: real_distribution Z\n    for M::\"'a measure\" and P::\"'a measure\" and Z::\"real measure\" +\n  fixes f g::\"'a \\<Rightarrow> real\" and B::\"nat \\<Rightarrow> real\"\n  assumes PabsM: \"absolutely_continuous M P\"\n      and Bpos: \"\\<And>n. B n > 0\"\n      and M [measurable]: \"f \\<in> borel_measurable M\" \"g \\<in> borel_measurable M\" \"sets P = sets M\"\n      and non_trivial: \"PZ.prob {0} < 1\"\n      and conv: \"weak_conv_m (\\<lambda>n. distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) Z\"\nbegin"], ["", "text \\<open>For measurability statements, we want every question about $Z$ or $P$ to reduce to a\nquestion about Borel sets of $M$. We add in the next lemma all the statements that are needed\nso that this happens automatically.\\<close>"], ["", "lemma PSZ [simp, measurable_cong]:\n  \"space P = space M\"\n  \"h \\<in> borel_measurable P \\<longleftrightarrow> h \\<in> borel_measurable M\"\n  \"A \\<in> sets P \\<longleftrightarrow> A \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space P = space M &&&\n    PS.random_variable borel h = (h \\<in> borel_measurable M) &&&\n    (A \\<in> PS.events) = (A \\<in> sets M)", "using M sets_eq_imp_space_eq real_distribution_def"], ["proof (prove)\nusing this:\n  f \\<in> borel_measurable M\n  g \\<in> borel_measurable M\n  PS.events = sets M\n  sets ?M = sets ?M' \\<Longrightarrow> space ?M = space ?M'\n  real_distribution ?M \\<equiv>\n  prob_space ?M \\<and> real_distribution_axioms ?M\n\ngoal (1 subgoal):\n 1. space P = space M &&&\n    PS.random_variable borel h = (h \\<in> borel_measurable M) &&&\n    (A \\<in> PS.events) = (A \\<in> sets M)", "by auto"], ["", "text \\<open>The first nontrivial upper bound is the following lemma, asserting that $B_{n+1}$ can not\nbe much larger than $\\max B_i$ for $i \\leq n$. This is proved by saying that $S_{n+1} f = f +\n(S_n f) \\circ T$, and we know that $S_n f$ is not too large on a set of very large measure, so\nthe same goes for $(S_n f) \\circ T$ by a non-singularity argument. Excepted that the measure $P$\ndoes not have to be nonsingular for the map $T$, so one has to tweak a little bit this idea,\nusing transfer operators and conservativity. This is easier to do when the density of $P$ is\nbounded by $1$, so we first give the proof under this assumption, and then we reduce to this\ncase by replacing $M$ with $M+P$ in the second lemma below.\\<close>"], ["", "text \\<open>First, let us prove the lemma assuming that the density $h$ of $P$ is bounded by $1$.\\<close>"], ["", "lemma upper_bound_C_aux:\n  assumes \"P = density M h\" \"\\<And>x. h x \\<le> 1\"\n      and [measurable]: \"h \\<in> borel_measurable M\"\n  shows \"\\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i|i. i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "obtain a0 where a0: \"a0 > 0\" \"PZ.prob {x. abs(x) > a0} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a0.\n        \\<lbrakk>0 < a0; 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.not_Dirac_0_imp_positive_mass_away_0[OF non_trivial]"], ["proof (prove)\nusing this:\n  \\<exists>a>0. 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. (\\<And>a0.\n        \\<lbrakk>0 < a0; 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "define a where \"a = a0/2\""], ["proof (state)\nthis:\n  a = a0 / 2\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"a > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < a", "using \\<open>a0 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < a0\n\ngoal (1 subgoal):\n 1. 0 < a", "unfolding a_def"], ["proof (prove)\nusing this:\n  0 < a0\n\ngoal (1 subgoal):\n 1. 0 < a0 / 2", "by auto"], ["proof (state)\nthis:\n  0 < a\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "define alpha where \"alpha = PZ.prob {x. abs (x) > a0}/4\""], ["proof (state)\nthis:\n  alpha = PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"alpha > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < alpha", "unfolding alpha_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4", "using a0"], ["proof (prove)\nusing this:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4", "by auto"], ["proof (state)\nthis:\n  0 < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"PZ.prob {x. abs (x) > 2 * a} > 3 * alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}", "using a0"], ["proof (prove)\nusing this:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}", "unfolding a_def alpha_def"], ["proof (prove)\nusing this:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * (PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4)\n    < PZ.prob {x. 2 * (a0 / 2) < \\<bar>x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>First step: choose $K$ such that, with probability $1-\\alpha$, one has\n  $\\sum_{1 \\leq k < K} h(T^k x) \\geq 1$. This follows directly from conservativity.\\<close>"], ["proof (state)\nthis:\n  3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"\\<exists>K. K \\<ge> 1 \\<and> PS.prob {x \\<in> space M. (\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1} \\<ge> 1 - alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have *: \"AE x in P. eventually (\\<lambda>n. (\\<Sum>i<n. h ((T^^i) x)) > 2) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "have \"AE x in M. h x > 0 \\<longrightarrow> (\\<Sum>i. h ((T^^i) x)) = \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. 0 < h x \\<longrightarrow>\n               (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>", "using recurrence_series_infinite"], ["proof (prove)\nusing this:\n  ?f \\<in> borel_measurable M \\<Longrightarrow>\n  AE x in M. 0 < ?f x \\<longrightarrow>\n             (\\<Sum>n. ?f ((T ^^ n) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in M. 0 < h x \\<longrightarrow>\n               (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in M. 0 < h x \\<longrightarrow>\n             (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "then"], ["proof (chain)\npicking this:\n  AE x in M. 0 < h x \\<longrightarrow>\n             (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>", "have AEP: \"AE x in P. (\\<Sum>i. h ((T^^i) x)) = \\<infinity>\""], ["proof (prove)\nusing this:\n  AE x in M. 0 < h x \\<longrightarrow>\n             (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>", "unfolding \\<open>P = density M h\\<close>"], ["proof (prove)\nusing this:\n  AE x in M. 0 < h x \\<longrightarrow>\n             (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in density M h. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>", "using AE_density[of h M]"], ["proof (prove)\nusing this:\n  AE x in M. 0 < h x \\<longrightarrow>\n             (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n  h \\<in> borel_measurable M \\<Longrightarrow>\n  almost_everywhere (density M h) ?P =\n  (AE x in M. 0 < h x \\<longrightarrow> ?P x)\n\ngoal (1 subgoal):\n 1. AE x in density M h. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>", "by auto"], ["proof (state)\nthis:\n  AE x in P. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "moreover"], ["proof (state)\nthis:\n  AE x in P. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "have \"eventually (\\<lambda>n. (\\<Sum>i<n. h ((T^^i) x)) > 2) sequentially\"\n        if \"(\\<Sum>i. h ((T^^i) x)) = \\<infinity>\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))", "have \"(\\<lambda>n. (\\<Sum>i<n. h ((T^^i) x))) \\<longlonglongrightarrow> (\\<Sum>i. h ((T^^i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>i<n. h ((T ^^ i) x))\n    \\<longlonglongrightarrow> (\\<Sum>i. h ((T ^^ i) x))", "by (simp add: summable_LIMSEQ)"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>i<n. h ((T ^^ i) x))\n  \\<longlonglongrightarrow> (\\<Sum>i. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>i<n. h ((T ^^ i) x))\n  \\<longlonglongrightarrow> (\\<Sum>i. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))", "have \"(\\<Sum>i. h ((T^^i) x)) > 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 < (\\<Sum>i. h ((T ^^ i) x))", "using that"], ["proof (prove)\nusing this:\n  (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n\ngoal (1 subgoal):\n 1. 2 < (\\<Sum>i. h ((T ^^ i) x))", "by auto"], ["proof (state)\nthis:\n  2 < (\\<Sum>i. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. \\<Sum>i<n. h ((T ^^ i) x))\n  \\<longlonglongrightarrow> (\\<Sum>i. h ((T ^^ i) x))\n  2 < (\\<Sum>i. h ((T ^^ i) x))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. \\<Sum>i<n. h ((T ^^ i) x))\n  \\<longlonglongrightarrow> (\\<Sum>i. h ((T ^^ i) x))\n  2 < (\\<Sum>i. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))", "by (rule order_tendstoD(1))"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i. h ((T ^^ i) ?x12)) = \\<infinity> \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) ?x12))\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "ultimately"], ["proof (chain)\npicking this:\n  AE x in P. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n  (\\<Sum>i. h ((T ^^ i) ?x12)) = \\<infinity> \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) ?x12))", "show ?thesis"], ["proof (prove)\nusing this:\n  AE x in P. (\\<Sum>i. h ((T ^^ i) x)) = \\<infinity>\n  (\\<Sum>i. h ((T ^^ i) ?x12)) = \\<infinity> \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially. 2 < (\\<Sum>i<n. h ((T ^^ i) ?x12))\n\ngoal (1 subgoal):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))", "by auto"], ["proof (state)\nthis:\n  AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                2 < (\\<Sum>i<n. h ((T ^^ i) x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                2 < (\\<Sum>i<n. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have \"\\<exists>U N. U \\<in> sets P \\<and> (\\<forall>n \\<ge> N. \\<forall>x \\<in> U. (\\<Sum>i<n. h ((T^^i) x)) > 2) \\<and> emeasure P (space P - U) < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>U N.\n       U \\<in> PS.events \\<and>\n       (\\<forall>n\\<ge>N.\n           \\<forall>x\\<in>U. 2 < (\\<Sum>i<n. h ((T ^^ i) x))) \\<and>\n       emeasure P (space P - U) < ennreal alpha", "apply (rule PS.Egorov_lemma)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>n.\n       PS.random_variable (count_space UNIV)\n        (\\<lambda>x. 2 < (\\<Sum>i<n. h ((T ^^ i) x)))\n 2. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))\n 3. 0 < ennreal alpha", "apply measurable"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>n i.\n       i \\<in> {..<n} \\<Longrightarrow> PS.random_variable M (\\<lambda>x. x)\n 2. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))\n 3. 0 < ennreal alpha", "using M(3) measurable_ident_sets"], ["proof (prove)\nusing this:\n  PS.events = sets M\n  sets ?M = sets ?M' \\<Longrightarrow>\n  (\\<lambda>x. x) \\<in> ?M \\<rightarrow>\\<^sub>M ?M'\n\ngoal (3 subgoals):\n 1. \\<And>n i.\n       i \\<in> {..<n} \\<Longrightarrow> PS.random_variable M (\\<lambda>x. x)\n 2. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))\n 3. 0 < ennreal alpha", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))\n 2. 0 < ennreal alpha", "using * \\<open>alpha > 0\\<close>"], ["proof (prove)\nusing this:\n  AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                2 < (\\<Sum>i<n. h ((T ^^ i) x))\n  0 < alpha\n\ngoal (2 subgoals):\n 1. AE x in P. \\<forall>\\<^sub>F n in sequentially.\n                  2 < (\\<Sum>i<n. h ((T ^^ i) x))\n 2. 0 < ennreal alpha", "by auto"], ["proof (state)\nthis:\n  \\<exists>U N.\n     U \\<in> PS.events \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U. 2 < (\\<Sum>i<n. h ((T ^^ i) x))) \\<and>\n     emeasure P (space P - U) < ennreal alpha\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "then"], ["proof (chain)\npicking this:\n  \\<exists>U N.\n     U \\<in> PS.events \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U. 2 < (\\<Sum>i<n. h ((T ^^ i) x))) \\<and>\n     emeasure P (space P - U) < ennreal alpha", "obtain U N1 where [measurable]: \"U \\<in> sets M\" and U: \"emeasure P (space M - U) < alpha\"\n                            \"\\<And>n x. n \\<ge> N1 \\<Longrightarrow> x \\<in> U \\<Longrightarrow> 2 < (\\<Sum>i<n. h ((T^^i) x))\""], ["proof (prove)\nusing this:\n  \\<exists>U N.\n     U \\<in> PS.events \\<and>\n     (\\<forall>n\\<ge>N.\n         \\<forall>x\\<in>U. 2 < (\\<Sum>i<n. h ((T ^^ i) x))) \\<and>\n     emeasure P (space P - U) < ennreal alpha\n\ngoal (1 subgoal):\n 1. (\\<And>U N1.\n        \\<lbrakk>U \\<in> sets M; emeasure P (space M - U) < ennreal alpha;\n         \\<And>n x.\n            \\<lbrakk>N1 \\<le> n; x \\<in> U\\<rbrakk>\n            \\<Longrightarrow> 2 < (\\<Sum>i<n. h ((T ^^ i) x))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  U \\<in> sets M\n  emeasure P (space M - U) < ennreal alpha\n  \\<lbrakk>N1 \\<le> ?n12; ?x12 \\<in> U\\<rbrakk>\n  \\<Longrightarrow> 2 < (\\<Sum>i<?n12. h ((T ^^ i) ?x12))\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have \"U \\<subseteq> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. U \\<subseteq> space M", "by (rule sets.sets_into_space, simp)"], ["proof (state)\nthis:\n  U \\<subseteq> space M\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "define K where \"K = N1+1\""], ["proof (state)\nthis:\n  K = N1 + 1\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "then"], ["proof (chain)\npicking this:\n  K = N1 + 1", "have \"K \\<ge> 1\""], ["proof (prove)\nusing this:\n  K = N1 + 1\n\ngoal (1 subgoal):\n 1. 1 \\<le> K", "by auto"], ["proof (state)\nthis:\n  1 \\<le> K\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have Ux: \"(\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1\" if \"x \\<in> U\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "have *: \"1 < t\" if \"2 < 1 + t\" for t::ennreal"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 < t", "apply (cases t)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; t = ennreal r\\<rbrakk> \\<Longrightarrow> 1 < t\n 2. t = \\<top> \\<Longrightarrow> 1 < t", "using that"], ["proof (prove)\nusing this:\n  2 < 1 + t\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; t = ennreal r\\<rbrakk> \\<Longrightarrow> 1 < t\n 2. t = \\<top> \\<Longrightarrow> 1 < t", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; t = ennreal r; 2 < 1 + ennreal r\\<rbrakk>\n       \\<Longrightarrow> 1 < r", "by (metis ennreal_add_left_cancel_less ennreal_less_iff ennreal_numeral le_numeral_extra(1) numeral_One one_add_one)"], ["proof (state)\nthis:\n  2 < 1 + ?t12 \\<Longrightarrow> 1 < ?t12\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "have \"2 < (\\<Sum>i \\<in> {..<K}. h ((T^^i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 < (\\<Sum>i<K. h ((T ^^ i) x))", "apply (rule U(2))"], ["proof (prove)\ngoal (2 subgoals):\n 1. N1 \\<le> K\n 2. x \\<in> U", "unfolding K_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. N1 \\<le> N1 + 1\n 2. x \\<in> U", "using that"], ["proof (prove)\nusing this:\n  x \\<in> U\n\ngoal (2 subgoals):\n 1. N1 \\<le> N1 + 1\n 2. x \\<in> U", "by auto"], ["proof (state)\nthis:\n  2 < (\\<Sum>i<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "also"], ["proof (state)\nthis:\n  2 < (\\<Sum>i<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "have \"... = (\\<Sum>i \\<in> {0}. h ((T^^i) x)) + (\\<Sum>i \\<in> {1..<K}. h ((T^^i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<K. h ((T ^^ i) x)) =\n    (\\<Sum>i\\<in>{0}. h ((T ^^ i) x)) + (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "apply (subst sum.union_disjoint[symmetric])"], ["proof (prove)\ngoal (4 subgoals):\n 1. finite {0}\n 2. finite {1..<K}\n 3. {0} \\<inter> {1..<K} = {}\n 4. (\\<Sum>i<K. h ((T ^^ i) x)) =\n    (\\<Sum>i\\<in>{0} \\<union> {1..<K}. h ((T ^^ i) x))", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {1..<K}\n 2. {0} \\<inter> {1..<K} = {}\n 3. (\\<Sum>i<K. h ((T ^^ i) x)) =\n    (\\<Sum>i\\<in>{0} \\<union> {1..<K}. h ((T ^^ i) x))", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. {0} \\<inter> {1..<K} = {}\n 2. (\\<Sum>i<K. h ((T ^^ i) x)) =\n    (\\<Sum>i\\<in>{0} \\<union> {1..<K}. h ((T ^^ i) x))", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<K. h ((T ^^ i) x)) =\n    (\\<Sum>i\\<in>{0} \\<union> {1..<K}. h ((T ^^ i) x))", "apply (rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {..<K} = {0} \\<union> {1..<K}\n 2. \\<And>xa.\n       xa \\<in> {0} \\<union> {1..<K} \\<Longrightarrow>\n       h ((T ^^ xa) x) = h ((T ^^ xa) x)", "using \\<open>K \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> K\n\ngoal (2 subgoals):\n 1. {..<K} = {0} \\<union> {1..<K}\n 2. \\<And>xa.\n       xa \\<in> {0} \\<union> {1..<K} \\<Longrightarrow>\n       h ((T ^^ xa) x) = h ((T ^^ xa) x)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i<K. h ((T ^^ i) x)) =\n  (\\<Sum>i\\<in>{0}. h ((T ^^ i) x)) + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "also"], ["proof (state)\nthis:\n  (\\<Sum>i<K. h ((T ^^ i) x)) =\n  (\\<Sum>i\\<in>{0}. h ((T ^^ i) x)) + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "have \"... = h x + (\\<Sum>i \\<in> {1..<K}. h ((T^^i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{0}. h ((T ^^ i) x)) + (\\<Sum>i = 1..<K. h ((T ^^ i) x)) =\n    h x + (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{0}. h ((T ^^ i) x)) + (\\<Sum>i = 1..<K. h ((T ^^ i) x)) =\n  h x + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{0}. h ((T ^^ i) x)) + (\\<Sum>i = 1..<K. h ((T ^^ i) x)) =\n  h x + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "have \"... \\<le> 1 + (\\<Sum>i \\<in> {1..<K}. h ((T^^i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h x + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n    \\<le> 1 + (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "using assms"], ["proof (prove)\nusing this:\n  P = density M h\n  h ?x12 \\<le> 1\n  h \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. h x + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n    \\<le> 1 + (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "by auto"], ["proof (state)\nthis:\n  h x + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n  \\<le> 1 + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "finally"], ["proof (chain)\npicking this:\n  2 < 1 + (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "show ?thesis"], ["proof (prove)\nusing this:\n  2 < 1 + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "using less_imp_le[OF *]"], ["proof (prove)\nusing this:\n  2 < 1 + (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n  2 < 1 + ?y \\<Longrightarrow> 1 \\<le> ?y\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))", "by auto"], ["proof (state)\nthis:\n  1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x12 \\<in> U \\<Longrightarrow>\n  1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) ?x12))\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have \"PS.prob {x \\<in> space M. (\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1} \\<ge> 1 - alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have \"PS.prob (space P - U) < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob (space P - U) < alpha", "using U(1)"], ["proof (prove)\nusing this:\n  emeasure P (space M - U) < ennreal alpha\n\ngoal (1 subgoal):\n 1. PS.prob (space P - U) < alpha", "by (simp add: PS.emeasure_eq_measure ennreal_less_iff)"], ["proof (state)\nthis:\n  PS.prob (space P - U) < alpha\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "then"], ["proof (chain)\npicking this:\n  PS.prob (space P - U) < alpha", "have \"1 - alpha < PS.prob U\""], ["proof (prove)\nusing this:\n  PS.prob (space P - U) < alpha\n\ngoal (1 subgoal):\n 1. 1 - alpha < PS.prob U", "using PS.prob_compl"], ["proof (prove)\nusing this:\n  PS.prob (space P - U) < alpha\n  ?A \\<in> PS.events \\<Longrightarrow>\n  PS.prob (space P - ?A) = 1 - PS.prob ?A\n\ngoal (1 subgoal):\n 1. 1 - alpha < PS.prob U", "by auto"], ["proof (state)\nthis:\n  1 - alpha < PS.prob U\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "also"], ["proof (state)\nthis:\n  1 - alpha < PS.prob U\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "have \"... \\<le> PS.prob {x \\<in> space M. (\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob U\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "apply (rule PS.finite_measure_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. U \\<subseteq> {x \\<in> space M.\n                   1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n 2. {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n    \\<in> PS.events", "using Ux sets.sets_into_space[OF \\<open>U \\<in> sets M\\<close>]"], ["proof (prove)\nusing this:\n  ?x12 \\<in> U \\<Longrightarrow>\n  1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) ?x12))\n  U \\<subseteq> space M\n\ngoal (2 subgoals):\n 1. U \\<subseteq> {x \\<in> space M.\n                   1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n 2. {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n    \\<in> PS.events", "by auto"], ["proof (state)\nthis:\n  PS.prob U\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "finally"], ["proof (chain)\npicking this:\n  1 - alpha\n  < PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "show ?thesis"], ["proof (prove)\nusing this:\n  1 - alpha\n  < PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "by simp"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "then"], ["proof (chain)\npicking this:\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "show ?thesis"], ["proof (prove)\nusing this:\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "using \\<open>K \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n  1 \\<le> K\n\ngoal (1 subgoal):\n 1. \\<exists>K\\<ge>1.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "by auto"], ["proof (state)\nthis:\n  \\<exists>K\\<ge>1.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>K\\<ge>1.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "then"], ["proof (chain)\npicking this:\n  \\<exists>K\\<ge>1.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "obtain K where K: \"K \\<ge> 1\" \"PS.prob {x \\<in> space M. (\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1} \\<ge> 1 - alpha\""], ["proof (prove)\nusing this:\n  \\<exists>K\\<ge>1.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. (\\<And>K.\n        \\<lbrakk>1 \\<le> K;\n         1 - alpha\n         \\<le> PS.prob\n                {x \\<in> space M.\n                 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  1 \\<le> K\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>Second step: obtain $D$ which controls the tails of the $K$ first Birkhoff sums of $f$.\\<close>"], ["proof (state)\nthis:\n  1 \\<le> K\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"\\<exists>D. PS.prob {x \\<in> space M. \\<forall>k < K. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<le> D} \\<ge> 1 - alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "have D: \"\\<exists>D. PS.prob {x \\<in> space P. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D} < alpha/K \\<and> D \\<ge> 1\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>D.\n       PS.prob\n        {x \\<in> space P.\n         D \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n       < alpha / real K \\<and>\n       1 \\<le> D", "apply (rule PS.random_variable_small_tails)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 < alpha / real K\n 2. PS.random_variable borel\n     (\\<lambda>x. g x + birkhoff_sum f k x - g ((T ^^ k) x))", "using \\<open>K \\<ge> 1\\<close> \\<open>alpha > 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> K\n  0 < alpha\n\ngoal (2 subgoals):\n 1. 0 < alpha / real K\n 2. PS.random_variable borel\n     (\\<lambda>x. g x + birkhoff_sum f k x - g ((T ^^ k) x))", "by auto"], ["proof (state)\nthis:\n  \\<exists>D.\n     PS.prob\n      {x \\<in> space P.\n       D \\<le> \\<bar>g x + birkhoff_sum f ?k12 x - g ((T ^^ ?k12) x)\\<bar>}\n     < alpha / real K \\<and>\n     1 \\<le> D\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "have \"\\<exists>D. \\<forall>k. PS.prob {x \\<in> space P. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D k} < alpha/K \\<and> D k \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>D.\n       \\<forall>k.\n          PS.prob\n           {x \\<in> space P.\n            D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n          < alpha / real K \\<and>\n          1 \\<le> D k", "apply (rule choice)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k.\n       \\<exists>y.\n          PS.prob\n           {x \\<in> space P.\n            y \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n          < alpha / real K \\<and>\n          1 \\<le> y", "using D"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     PS.prob\n      {x \\<in> space P.\n       D \\<le> \\<bar>g x + birkhoff_sum f ?k12 x - g ((T ^^ ?k12) x)\\<bar>}\n     < alpha / real K \\<and>\n     1 \\<le> D\n\ngoal (1 subgoal):\n 1. \\<forall>k.\n       \\<exists>y.\n          PS.prob\n           {x \\<in> space P.\n            y \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n          < alpha / real K \\<and>\n          1 \\<le> y", "by auto"], ["proof (state)\nthis:\n  \\<exists>D.\n     \\<forall>k.\n        PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n        < alpha / real K \\<and>\n        1 \\<le> D k\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "then"], ["proof (chain)\npicking this:\n  \\<exists>D.\n     \\<forall>k.\n        PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n        < alpha / real K \\<and>\n        1 \\<le> D k", "obtain D where D: \"\\<And>k. PS.prob {x \\<in> space P. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D k} < alpha/K\""], ["proof (prove)\nusing this:\n  \\<exists>D.\n     \\<forall>k.\n        PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n        < alpha / real K \\<and>\n        1 \\<le> D k\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        (\\<And>k.\n            PS.prob\n             {x \\<in> space P.\n              D k\n              \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n            < alpha / real K) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  PS.prob\n   {x \\<in> space P.\n    D ?k12\n    \\<le> \\<bar>g x + birkhoff_sum f ?k12 x - g ((T ^^ ?k12) x)\\<bar>}\n  < alpha / real K\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "define D0 where \"D0 = Max (D`{..K})\""], ["proof (state)\nthis:\n  D0 = Max (D ` {..K})\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "have \"PS.prob {x \\<in> space M. \\<forall>k < K. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<le> D0} \\<ge> 1 - alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "have D1: \"PS.prob {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0} < alpha/K\" if \"k \\<le> K\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    < alpha / real K", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    < alpha / real K", "have \"D k \\<le> D0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D k \\<le> D0", "unfolding D0_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. D k \\<le> Max (D ` {..K})", "apply (rule Max_ge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite (D ` {..K})\n 2. D k \\<in> D ` {..K}", "using that"], ["proof (prove)\nusing this:\n  k \\<le> K\n\ngoal (2 subgoals):\n 1. finite (D ` {..K})\n 2. D k \\<in> D ` {..K}", "by auto"], ["proof (state)\nthis:\n  D k \\<le> D0\n\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    < alpha / real K", "have \"PS.prob {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0}\n                \\<le> PS.prob {x \\<in> space P. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D k}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    \\<le> PS.prob\n           {x \\<in> space P.\n            D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}", "apply (rule PS.finite_measure_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {x \\<in> space M.\n     D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    \\<subseteq> {x \\<in> space P.\n                 D k\n                 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                             g ((T ^^ k) x)\\<bar>}\n 2. {x \\<in> space P.\n     D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    \\<in> PS.events", "using \\<open>D k \\<le> D0\\<close>"], ["proof (prove)\nusing this:\n  D k \\<le> D0\n\ngoal (2 subgoals):\n 1. {x \\<in> space M.\n     D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    \\<subseteq> {x \\<in> space P.\n                 D k\n                 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                             g ((T ^^ k) x)\\<bar>}\n 2. {x \\<in> space P.\n     D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    \\<in> PS.events", "by auto"], ["proof (state)\nthis:\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  \\<le> PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    < alpha / real K", "then"], ["proof (chain)\npicking this:\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  \\<le> PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}", "show ?thesis"], ["proof (prove)\nusing this:\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  \\<le> PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    < alpha / real K", "using D[of k]"], ["proof (prove)\nusing this:\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  \\<le> PS.prob\n         {x \\<in> space P.\n          D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  PS.prob\n   {x \\<in> space P.\n    D k \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  < alpha / real K\n\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n    < alpha / real K", "by auto"], ["proof (state)\nthis:\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n  < alpha / real K\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k12 \\<le> K \\<Longrightarrow>\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f ?k12 x - g ((T ^^ ?k12) x)\\<bar>}\n  < alpha / real K\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "have \"PS.prob (\\<Union>k\\<in> {..<K}. {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0}) \\<le>\n              (\\<Sum>k \\<in> {..<K}. PS.prob {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     (\\<Union>k<K.\n         {x \\<in> space M.\n          D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n    \\<le> (\\<Sum>k<K.\n              PS.prob\n               {x \\<in> space M.\n                D0 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                               g ((T ^^ k) x)\\<bar>})", "by (rule PS.finite_measure_subadditive_finite, auto)"], ["proof (state)\nthis:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> (\\<Sum>k<K.\n            PS.prob\n             {x \\<in> space M.\n              D0 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                             g ((T ^^ k) x)\\<bar>})\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "also"], ["proof (state)\nthis:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> (\\<Sum>k<K.\n            PS.prob\n             {x \\<in> space M.\n              D0 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                             g ((T ^^ k) x)\\<bar>})\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "have \"... \\<le> (\\<Sum>k \\<in> {..<K}. alpha/K)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<K.\n        PS.prob\n         {x \\<in> space M.\n          D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n    \\<le> (\\<Sum>k<K. alpha / real K)", "apply (rule sum_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<K} \\<Longrightarrow>\n       PS.prob\n        {x \\<in> space M.\n         D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n       \\<le> alpha / real K", "using less_imp_le[OF D1]"], ["proof (prove)\nusing this:\n  ?k13 \\<le> K \\<Longrightarrow>\n  PS.prob\n   {x \\<in> space M.\n    D0 \\<le> \\<bar>g x + birkhoff_sum f ?k13 x - g ((T ^^ ?k13) x)\\<bar>}\n  \\<le> alpha / real K\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> {..<K} \\<Longrightarrow>\n       PS.prob\n        {x \\<in> space M.\n         D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}\n       \\<le> alpha / real K", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k<K.\n      PS.prob\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> (\\<Sum>k<K. alpha / real K)\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "also"], ["proof (state)\nthis:\n  (\\<Sum>k<K.\n      PS.prob\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> (\\<Sum>k<K. alpha / real K)\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "have \"... = alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<K. alpha / real K) = alpha", "using \\<open>K \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> K\n\ngoal (1 subgoal):\n 1. (\\<Sum>k<K. alpha / real K) = alpha", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k<K. alpha / real K) = alpha\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "finally"], ["proof (chain)\npicking this:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> alpha", "have \"PS.prob (\\<Union>k\\<in> {..<K}. {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0}) \\<le> alpha\""], ["proof (prove)\nusing this:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> alpha\n\ngoal (1 subgoal):\n 1. PS.prob\n     (\\<Union>k<K.\n         {x \\<in> space M.\n          D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n    \\<le> alpha", "by simp"], ["proof (state)\nthis:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> alpha\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "then"], ["proof (chain)\npicking this:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> alpha", "have \"1 - alpha \\<le> 1 - PS.prob (\\<Union>k\\<in> {..<K}. {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0})\""], ["proof (prove)\nusing this:\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>})\n  \\<le> alpha\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> 1 -\n          PS.prob\n           (\\<Union>k<K.\n               {x \\<in> space M.\n                D0 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                               g ((T ^^ k) x)\\<bar>})", "by simp"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> 1 -\n        PS.prob\n         (\\<Union>k<K.\n             {x \\<in> space M.\n              D0 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                             g ((T ^^ k) x)\\<bar>})\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "also"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> 1 -\n        PS.prob\n         (\\<Union>k<K.\n             {x \\<in> space M.\n              D0 \\<le> \\<bar>g x + birkhoff_sum f k x -\n                             g ((T ^^ k) x)\\<bar>})\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "have \"... = PS.prob (space P - (\\<Union>k\\<in> {..<K}. {x \\<in> space M. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<ge> D0}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 -\n    PS.prob\n     (\\<Union>k<K.\n         {x \\<in> space M.\n          D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}) =\n    PS.prob\n     (space P -\n      (\\<Union>k<K.\n          {x \\<in> space M.\n           D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}))", "by (rule PS.prob_compl[symmetric], auto)"], ["proof (state)\nthis:\n  1 -\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}) =\n  PS.prob\n   (space P -\n    (\\<Union>k<K.\n        {x \\<in> space M.\n         D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}))\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "also"], ["proof (state)\nthis:\n  1 -\n  PS.prob\n   (\\<Union>k<K.\n       {x \\<in> space M.\n        D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}) =\n  PS.prob\n   (space P -\n    (\\<Union>k<K.\n        {x \\<in> space M.\n         D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}))\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "have \"... \\<le> PS.prob {x \\<in> space M. \\<forall>k < K. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<le> D0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     (space P -\n      (\\<Union>k<K.\n          {x \\<in> space M.\n           D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}))\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "by (rule PS.finite_measure_mono, auto)"], ["proof (state)\nthis:\n  PS.prob\n   (space P -\n    (\\<Union>k<K.\n        {x \\<in> space M.\n         D0 \\<le> \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>}))\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "finally"], ["proof (chain)\npicking this:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}", "show ?thesis"], ["proof (prove)\nusing this:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    \\<le> PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D0}", "by simp"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "then"], ["proof (chain)\npicking this:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}", "show ?thesis"], ["proof (prove)\nusing this:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D0}\n\ngoal (1 subgoal):\n 1. \\<exists>D.\n       1 - alpha\n       \\<le> PS.prob\n              {x \\<in> space M.\n               \\<forall>k<K.\n                  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                  \\<le> D}", "by blast"], ["proof (state)\nthis:\n  \\<exists>D.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M.\n             \\<forall>k<K.\n                \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                \\<le> D}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>D.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M.\n             \\<forall>k<K.\n                \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                \\<le> D}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "then"], ["proof (chain)\npicking this:\n  \\<exists>D.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M.\n             \\<forall>k<K.\n                \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                \\<le> D}", "obtain D where D: \"PS.prob {x \\<in> space M. \\<forall>k < K. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<le> D} \\<ge> 1 - alpha\""], ["proof (prove)\nusing this:\n  \\<exists>D.\n     1 - alpha\n     \\<le> PS.prob\n            {x \\<in> space M.\n             \\<forall>k<K.\n                \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                \\<le> D}\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        1 - alpha\n        \\<le> PS.prob\n               {x \\<in> space M.\n                \\<forall>k<K.\n                   \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                   \\<le> D} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>Third step: obtain $\\epsilon$ small enough so that, for any set $U$ with probability less\n  than $\\epsilon$ and for any $k\\leq K$, one has $\\int_U \\hat T^k h < \\delta$, where $\\delta$ is\n  very small.\\<close>"], ["proof (state)\nthis:\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "define delta where \"delta = alpha/(2 * K)\""], ["proof (state)\nthis:\n  delta = alpha / real (2 * K)\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "then"], ["proof (chain)\npicking this:\n  delta = alpha / real (2 * K)", "have \"delta > 0\""], ["proof (prove)\nusing this:\n  delta = alpha / real (2 * K)\n\ngoal (1 subgoal):\n 1. 0 < delta", "using \\<open>alpha > 0\\<close> \\<open>K \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  delta = alpha / real (2 * K)\n  0 < alpha\n  1 \\<le> K\n\ngoal (1 subgoal):\n 1. 0 < delta", "by auto"], ["proof (state)\nthis:\n  0 < delta\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"\\<exists>epsilon > (0::real). \\<forall>U \\<in> sets P. \\<forall>k \\<le> K. emeasure P U < epsilon \\<longrightarrow> (\\<integral>\\<^sup>+x\\<in>U. ((nn_transfer_operator^^k) h) x \\<partial>P) \\<le> delta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "have *: \"\\<exists>epsilon>(0::real). \\<forall>U\\<in>sets P. emeasure P U < epsilon \\<longrightarrow> (\\<integral>\\<^sup>+x\\<in>U. ((nn_transfer_operator^^k) h) x \\<partial>P) < delta\"\n      for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          emeasure P U < ennreal epsilon \\<longrightarrow>\n          set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n          < ennreal delta", "proof (rule small_nn_integral_on_small_sets[OF _ \\<open>0 < delta\\<close>])"], ["proof (state)\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "have \"(\\<integral>\\<^sup>+x. ((nn_transfer_operator^^k) h) x \\<partial>P) = (\\<integral>\\<^sup>+x. h x * ((nn_transfer_operator^^k) h) x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) =\n    \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M", "unfolding \\<open>P = density M h\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N (density M h) ((nn_transfer_operator ^^ k) h) =\n    \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M", "by (rule nn_integral_density, auto)"], ["proof (state)\nthis:\n  integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) =\n  \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "also"], ["proof (state)\nthis:\n  integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) =\n  \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "have \"... \\<le> (\\<integral>\\<^sup>+x. 1 * ((nn_transfer_operator^^k) h) x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M\n    \\<le> \\<integral>\\<^sup>+ x. 1 * (nn_transfer_operator ^^ k) h x\n                             \\<partial>M", "apply (intro nn_integral_mono mult_right_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x. x \\<in> space M \\<Longrightarrow> h x \\<le> 1\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       0 \\<le> (nn_transfer_operator ^^ k) h x", "using assms(2)"], ["proof (prove)\nusing this:\n  h ?x12 \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>x. x \\<in> space M \\<Longrightarrow> h x \\<le> 1\n 2. \\<And>x.\n       x \\<in> space M \\<Longrightarrow>\n       0 \\<le> (nn_transfer_operator ^^ k) h x", "by auto"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. 1 * (nn_transfer_operator ^^ k) h x\n                           \\<partial>M\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. h x * (nn_transfer_operator ^^ k) h x \\<partial>M\n  \\<le> \\<integral>\\<^sup>+ x. 1 * (nn_transfer_operator ^^ k) h x\n                           \\<partial>M\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "have \"... = (\\<integral>\\<^sup>+x. 1 * h x \\<partial>M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. 1 * (nn_transfer_operator ^^ k) h x \\<partial>M =\n    \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M", "by (rule nn_transfer_operator_intTn_g, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. 1 * (nn_transfer_operator ^^ k) h x \\<partial>M =\n  \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. 1 * (nn_transfer_operator ^^ k) h x \\<partial>M =\n  \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "have \"... = emeasure P (space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M = emeasure P (space M)", "using PS.emeasure_space_1"], ["proof (prove)\nusing this:\n  emeasure P (space P) = 1\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M = emeasure P (space M)", "by (simp add: emeasure_density \\<open>P = density M h\\<close>)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M = emeasure P (space M)\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. 1 * h x \\<partial>M = emeasure P (space M)\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P (space M) < \\<infinity>", "using PS.emeasure_space_1"], ["proof (prove)\nusing this:\n  emeasure P (space P) = 1\n\ngoal (1 subgoal):\n 1. emeasure P (space M) < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  emeasure P (space M) < \\<infinity>\n\ngoal (2 subgoals):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)\n 2. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "finally"], ["proof (chain)\npicking this:\n  integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) < \\<infinity>", "show \"(\\<integral>\\<^sup>+x. ((nn_transfer_operator^^k) h) x \\<partial>P) \\<noteq> \\<infinity>\""], ["proof (prove)\nusing this:\n  integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) < \\<infinity>\n\ngoal (1 subgoal):\n 1. integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>", "by auto"], ["proof (state)\nthis:\n  integral\\<^sup>N P ((nn_transfer_operator ^^ k) h) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. PS.random_variable borel ((nn_transfer_operator ^^ k) h)", "qed (simp)"], ["proof (state)\nthis:\n  \\<exists>epsilon>0.\n     \\<forall>U\\<in>PS.events.\n        emeasure P U < ennreal epsilon \\<longrightarrow>\n        set_nn_integral P U ((nn_transfer_operator ^^ ?k12) h)\n        < ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "have \"\\<exists>epsilon. \\<forall>k. epsilon k > (0::real) \\<and> (\\<forall>U\\<in>sets P. emeasure P U < epsilon k \\<longrightarrow> (\\<integral>\\<^sup>+x\\<in>U. ((nn_transfer_operator^^k) h) x \\<partial>P) < delta)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>epsilon.\n       \\<forall>k.\n          0 < epsilon k \\<and>\n          (\\<forall>U\\<in>PS.events.\n              emeasure P U < ennreal (epsilon k) \\<longrightarrow>\n              set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n              < ennreal delta)", "apply (rule choice)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k.\n       \\<exists>y>0.\n          \\<forall>U\\<in>PS.events.\n             emeasure P U < ennreal y \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             < ennreal delta", "using *"], ["proof (prove)\nusing this:\n  \\<exists>epsilon>0.\n     \\<forall>U\\<in>PS.events.\n        emeasure P U < ennreal epsilon \\<longrightarrow>\n        set_nn_integral P U ((nn_transfer_operator ^^ ?k12) h)\n        < ennreal delta\n\ngoal (1 subgoal):\n 1. \\<forall>k.\n       \\<exists>y>0.\n          \\<forall>U\\<in>PS.events.\n             emeasure P U < ennreal y \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             < ennreal delta", "by blast"], ["proof (state)\nthis:\n  \\<exists>epsilon.\n     \\<forall>k.\n        0 < epsilon k \\<and>\n        (\\<forall>U\\<in>PS.events.\n            emeasure P U < ennreal (epsilon k) \\<longrightarrow>\n            set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n            < ennreal delta)\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "then"], ["proof (chain)\npicking this:\n  \\<exists>epsilon.\n     \\<forall>k.\n        0 < epsilon k \\<and>\n        (\\<forall>U\\<in>PS.events.\n            emeasure P U < ennreal (epsilon k) \\<longrightarrow>\n            set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n            < ennreal delta)", "obtain epsilon::\"nat \\<Rightarrow> real\" where E: \"\\<And>k. epsilon k > 0\"\n                              \"\\<And>k U. U \\<in> sets P \\<Longrightarrow> emeasure P U < epsilon k \\<Longrightarrow> (\\<integral>\\<^sup>+x\\<in>U. ((nn_transfer_operator^^k) h) x \\<partial>P) < delta\""], ["proof (prove)\nusing this:\n  \\<exists>epsilon.\n     \\<forall>k.\n        0 < epsilon k \\<and>\n        (\\<forall>U\\<in>PS.events.\n            emeasure P U < ennreal (epsilon k) \\<longrightarrow>\n            set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n            < ennreal delta)\n\ngoal (1 subgoal):\n 1. (\\<And>epsilon.\n        \\<lbrakk>\\<And>k. 0 < epsilon k;\n         \\<And>k U.\n            \\<lbrakk>U \\<in> PS.events;\n             emeasure P U < ennreal (epsilon k)\\<rbrakk>\n            \\<Longrightarrow> set_nn_integral P U\n                               ((nn_transfer_operator ^^ k) h)\n                              < ennreal delta\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < epsilon ?k12\n  \\<lbrakk>?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal (epsilon ?k12)\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    < ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "define epsilon0 where \"epsilon0 = Min (epsilon`{..K})\""], ["proof (state)\nthis:\n  epsilon0 = Min (epsilon ` {..K})\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "have \"epsilon0 \\<in> epsilon`{..K}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. epsilon0 \\<in> epsilon ` {..K}", "unfolding epsilon0_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Min (epsilon ` {..K}) \\<in> epsilon ` {..K}", "by (rule Min_in, auto)"], ["proof (state)\nthis:\n  epsilon0 \\<in> epsilon ` {..K}\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "then"], ["proof (chain)\npicking this:\n  epsilon0 \\<in> epsilon ` {..K}", "have \"epsilon0 > 0\""], ["proof (prove)\nusing this:\n  epsilon0 \\<in> epsilon ` {..K}\n\ngoal (1 subgoal):\n 1. 0 < epsilon0", "using E(1)"], ["proof (prove)\nusing this:\n  epsilon0 \\<in> epsilon ` {..K}\n  0 < epsilon ?k12\n\ngoal (1 subgoal):\n 1. 0 < epsilon0", "by auto"], ["proof (state)\nthis:\n  0 < epsilon0\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "have small_setint: \"(\\<integral>\\<^sup>+x\\<in>U. ((nn_transfer_operator^^k) h) x \\<partial>P) \\<le> delta\"\n              if \"k \\<le> K\" \"U \\<in> sets P\" \"emeasure P U < epsilon0\" for k U"], ["proof (prove)\ngoal (1 subgoal):\n 1. set_nn_integral P U ((nn_transfer_operator ^^ k) h) \\<le> ennreal delta", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. set_nn_integral P U ((nn_transfer_operator ^^ k) h) \\<le> ennreal delta", "have *: \"epsilon0 \\<le> epsilon k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. epsilon0 \\<le> epsilon k", "unfolding epsilon0_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Min (epsilon ` {..K}) \\<le> epsilon k", "apply (rule Min_le)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite (epsilon ` {..K})\n 2. epsilon k \\<in> epsilon ` {..K}", "using \\<open>k \\<le> K\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> K\n\ngoal (2 subgoals):\n 1. finite (epsilon ` {..K})\n 2. epsilon k \\<in> epsilon ` {..K}", "by auto"], ["proof (state)\nthis:\n  epsilon0 \\<le> epsilon k\n\ngoal (1 subgoal):\n 1. set_nn_integral P U ((nn_transfer_operator ^^ k) h) \\<le> ennreal delta", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. set_nn_integral P U ((nn_transfer_operator ^^ k) h) \\<le> ennreal delta", "apply (rule less_imp_le[OF E(2)[OF \\<open>U \\<in> sets P\\<close>]])"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P U < ennreal (epsilon k)", "using ennreal_leI[OF *] \\<open>emeasure P U < epsilon0\\<close>"], ["proof (prove)\nusing this:\n  ennreal epsilon0 \\<le> ennreal (epsilon k)\n  emeasure P U < ennreal epsilon0\n\ngoal (1 subgoal):\n 1. emeasure P U < ennreal (epsilon k)", "by auto"], ["proof (state)\nthis:\n  set_nn_integral P U ((nn_transfer_operator ^^ k) h) \\<le> ennreal delta\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?k12 \\<le> K; ?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal epsilon0\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    \\<le> ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?k12 \\<le> K; ?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal epsilon0\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    \\<le> ennreal delta", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k12 \\<le> K; ?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal epsilon0\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    \\<le> ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "using \\<open>epsilon0 > 0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?k12 \\<le> K; ?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal epsilon0\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    \\<le> ennreal delta\n  0 < epsilon0\n\ngoal (1 subgoal):\n 1. \\<exists>epsilon>0.\n       \\<forall>U\\<in>PS.events.\n          \\<forall>k\\<le>K.\n             emeasure P U < ennreal epsilon \\<longrightarrow>\n             set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n             \\<le> ennreal delta", "by auto"], ["proof (state)\nthis:\n  \\<exists>epsilon>0.\n     \\<forall>U\\<in>PS.events.\n        \\<forall>k\\<le>K.\n           emeasure P U < ennreal epsilon \\<longrightarrow>\n           set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n           \\<le> ennreal delta\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>epsilon>0.\n     \\<forall>U\\<in>PS.events.\n        \\<forall>k\\<le>K.\n           emeasure P U < ennreal epsilon \\<longrightarrow>\n           set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n           \\<le> ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "then"], ["proof (chain)\npicking this:\n  \\<exists>epsilon>0.\n     \\<forall>U\\<in>PS.events.\n        \\<forall>k\\<le>K.\n           emeasure P U < ennreal epsilon \\<longrightarrow>\n           set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n           \\<le> ennreal delta", "obtain epsilon::real where \"epsilon > 0\" and\n    small_setint: \"\\<And>k U. k \\<le> K \\<Longrightarrow> U \\<in> sets P \\<Longrightarrow> emeasure P U < epsilon \\<Longrightarrow> (\\<integral>\\<^sup>+x\\<in>U. ((nn_transfer_operator^^k) h) x \\<partial>P) \\<le> delta\""], ["proof (prove)\nusing this:\n  \\<exists>epsilon>0.\n     \\<forall>U\\<in>PS.events.\n        \\<forall>k\\<le>K.\n           emeasure P U < ennreal epsilon \\<longrightarrow>\n           set_nn_integral P U ((nn_transfer_operator ^^ k) h)\n           \\<le> ennreal delta\n\ngoal (1 subgoal):\n 1. (\\<And>epsilon.\n        \\<lbrakk>0 < epsilon;\n         \\<And>k U.\n            \\<lbrakk>k \\<le> K; U \\<in> PS.events;\n             emeasure P U < ennreal epsilon\\<rbrakk>\n            \\<Longrightarrow> set_nn_integral P U\n                               ((nn_transfer_operator ^^ k) h)\n                              \\<le> ennreal delta\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < epsilon\n  \\<lbrakk>?k12 \\<le> K; ?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal epsilon\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    \\<le> ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>Fourth step: obtain an index after which the convergence in distribution ensures that\n  the probability to be larger than $2 a$ and to be very large is comparable for $(g+S_n f)/B_n$\n  and for $Z$.\\<close>"], ["proof (state)\nthis:\n  0 < epsilon\n  \\<lbrakk>?k12 \\<le> K; ?U12 \\<in> PS.events;\n   emeasure P ?U12 < ennreal epsilon\\<rbrakk>\n  \\<Longrightarrow> set_nn_integral P ?U12\n                     ((nn_transfer_operator ^^ ?k12) h)\n                    \\<le> ennreal delta\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "obtain C0 where \"PZ.prob {x. abs(x) \\<ge> C0} < epsilon\" \"C0 \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < epsilon;\n         1 \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.random_variable_small_tails[OF \\<open>epsilon > 0\\<close>, of \"\\<lambda>x. x\"]"], ["proof (prove)\nusing this:\n  PZ.random_variable borel (\\<lambda>x. x) \\<Longrightarrow>\n  \\<exists>C.\n     PZ.prob {x \\<in> space Z. C \\<le> \\<bar>x\\<bar>} < epsilon \\<and>\n     ?K \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < epsilon;\n         1 \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < epsilon\n  1 \\<le> C0\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have A: \"eventually (\\<lambda>n. measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) > 2 * a} > 3 * alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       3 * alpha\n       < Sigma_Algebra.measure\n          (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n          {x. 2 * a < \\<bar>x\\<bar>}", "apply (rule open_set_weak_conv_lsc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n     Z\n 4. open {x. 2 * a < \\<bar>x\\<bar>}\n 5. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}", "by (auto simp add: PZ.real_distribution_axioms conv \\<open>PZ.prob {x. abs (x) > 2 * a} > 3 * alpha\\<close>)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n        {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have B: \"eventually (\\<lambda>n. measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) \\<ge> C0} < epsilon) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Sigma_Algebra.measure\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n        {x. C0 \\<le> \\<bar>x\\<bar>}\n       < epsilon", "apply (rule closed_set_weak_conv_usc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n     Z\n 4. closed {x. C0 \\<le> \\<bar>x\\<bar>}\n 5. PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < epsilon", "by (auto simp add: PZ.real_distribution_axioms conv \\<open>PZ.prob {x. abs(x) \\<ge> C0} < epsilon\\<close>)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Sigma_Algebra.measure\n      (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n      {x. C0 \\<le> \\<bar>x\\<bar>}\n     < epsilon\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) > 2 * a} > 3 * alpha\"\n                    \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) \\<ge> C0} < epsilon\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr P borel\n                         (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n                       {x. 2 * a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < epsilon\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using eventually_conj[OF A B]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr P borel (\\<lambda>xa. (g xa + birkhoff_sum f x xa) / B x))\n        {x. 2 * a < \\<bar>x\\<bar>} \\<and>\n     Sigma_Algebra.measure\n      (distr P borel (\\<lambda>xa. (g xa + birkhoff_sum f x xa) / B x))\n      {x. C0 \\<le> \\<bar>x\\<bar>}\n     < epsilon\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr P borel\n                         (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n                       {x. 2 * a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < epsilon\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        3 * alpha\n        < Sigma_Algebra.measure\n           (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n           {x. 2 * a < \\<bar>x\\<bar>} \\<and>\n        Sigma_Algebra.measure\n         (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n         {x. C0 \\<le> \\<bar>x\\<bar>}\n        < epsilon\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr P borel\n                         (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n                       {x. 2 * a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < epsilon\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow>\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr P borel (\\<lambda>x. (g x + birkhoff_sum f ?n12 x) / B ?n12))\n     {x. 2 * a < \\<bar>x\\<bar>}\n  N \\<le> ?n12 \\<Longrightarrow>\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f ?n12 x) / B ?n12))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < epsilon\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>Fifth step: obtain a trivial control on $B_n$ for $n$ smaller than $N$.\\<close>"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow>\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr P borel (\\<lambda>x. (g x + birkhoff_sum f ?n12 x) / B ?n12))\n     {x. 2 * a < \\<bar>x\\<bar>}\n  N \\<le> ?n12 \\<Longrightarrow>\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f ?n12 x) / B ?n12))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < epsilon\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "define C1 where \"C1 = Max {B k/B 0 |k. k \\<le> N+K+1}\""], ["proof (state)\nthis:\n  C1 = Max {B k / B 0 |k. k \\<le> N + K + 1}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "define C where \"C = max (max C0 C1) (max (D / (a * B 0)) (C0/a))\""], ["proof (state)\nthis:\n  C = max (max C0 C1) (max (D / (a * B 0)) (C0 / a))\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"C \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> C", "unfolding C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> max (max C0 C1) (max (D / (a * B 0)) (C0 / a))", "using \\<open>C0 \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> C0\n\ngoal (1 subgoal):\n 1. 1 \\<le> max (max C0 C1) (max (D / (a * B 0)) (C0 / a))", "by auto"], ["proof (state)\nthis:\n  1 \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>Now, we can put everything together. If $n$ is large enough, we prove that\n  $B_{n+1} \\leq C \\max_{i\\leq n} B_i$, by contradiction.\\<close>"], ["proof (state)\nthis:\n  1 \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have geK: \"B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\" if \"n > N + K\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"Suc n \\<ge> N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N \\<le> Suc n", "using that"], ["proof (prove)\nusing this:\n  N + K < n\n\ngoal (1 subgoal):\n 1. N \\<le> Suc n", "by auto"], ["proof (state)\nthis:\n  N \\<le> Suc n\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "let ?h = \"(\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"measure (distr P borel ?h) {x. abs (x) > 2 * a}\n              = measure P (?h-` {x. abs (x) > 2 * a} \\<inter> space P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr P borel\n       (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n     {x. 2 * a < \\<bar>x\\<bar>} =\n    PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n      {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n      space P)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n    {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n    {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = measure P {x \\<in> space M. abs(?h x) > 2 * a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n      {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n      space P) =\n    PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "by (rule HOL.cong[of \"measure P\"], auto)"], ["proof (state)\nthis:\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n    {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n    space P) =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "have A: \"PS.prob {x \\<in> space M. abs(?h x) > 2 * a} > 3 * alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < PS.prob\n       {x \\<in> space M.\n        2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "using N(1)[OF \\<open>Suc n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr P borel\n       (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n     {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < PS.prob\n       {x \\<in> space M.\n        2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha\n  < PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have *: \"PS.prob {y \\<in> space M. C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> / \\<bar>B (Suc n - k)\\<bar>} < epsilon\"\n      if \"k \\<in> {1..<K}\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "have \"Suc n - k \\<ge> N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N \\<le> Suc n - k", "using that \\<open>n > N + K\\<close>"], ["proof (prove)\nusing this:\n  k \\<in> {1..<K}\n  N + K < n\n\ngoal (1 subgoal):\n 1. N \\<le> Suc n - k", "by auto"], ["proof (state)\nthis:\n  N \\<le> Suc n - k\n\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "let ?h = \"(\\<lambda>x. (g x + birkhoff_sum f (Suc n-k) x) / B (Suc n-k))\""], ["proof (state)\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "have \"measure (distr P borel ?h) {x. abs (x) \\<ge> C0}\n                = measure P (?h-` {x. abs (x) \\<ge> C0} \\<inter> space P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr P borel\n       (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n     {x. C0 \\<le> \\<bar>x\\<bar>} =\n    PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)) -`\n      {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n      space P)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "have \"... = measure P {x \\<in> space M. abs(?h x) \\<ge> C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)) -`\n      {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n      space P) =\n    PS.prob\n     {x \\<in> space M.\n      C0 \\<le> \\<bar>(g x + birkhoff_sum f (Suc n - k) x) /\n                     B (Suc n - k)\\<bar>}", "by (rule HOL.cong[of \"measure P\"], auto)"], ["proof (state)\nthis:\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space P) =\n  PS.prob\n   {x \\<in> space M.\n    C0 \\<le> \\<bar>(g x + birkhoff_sum f (Suc n - k) x) /\n                   B (Suc n - k)\\<bar>}\n\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    C0 \\<le> \\<bar>(g x + birkhoff_sum f (Suc n - k) x) /\n                   B (Suc n - k)\\<bar>}", "show ?thesis"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    C0 \\<le> \\<bar>(g x + birkhoff_sum f (Suc n - k) x) /\n                   B (Suc n - k)\\<bar>}\n\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "using N(2)[OF \\<open>Suc n - k \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    C0 \\<le> \\<bar>(g x + birkhoff_sum f (Suc n - k) x) /\n                   B (Suc n - k)\\<bar>}\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n - k) x) / B (Suc n - k)))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < epsilon\n\ngoal (1 subgoal):\n 1. PS.prob\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < epsilon", "by auto"], ["proof (state)\nthis:\n  PS.prob\n   {y \\<in> space M.\n    C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n             \\<bar>B (Suc n - k)\\<bar>}\n  < epsilon\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?k12 \\<in> {1..<K} \\<Longrightarrow>\n  PS.prob\n   {y \\<in> space M.\n    C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - ?k12) y\\<bar> /\n             \\<bar>B (Suc n - ?k12)\\<bar>}\n  < epsilon\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have P_le_epsilon: \"emeasure P {y \\<in> space M. C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> / \\<bar>B (Suc n - k)\\<bar>} < ennreal epsilon\"\n      if \"k \\<in> {1..<K}\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < ennreal epsilon", "using *[OF that] \\<open>epsilon > 0\\<close> ennreal_lessI"], ["proof (prove)\nusing this:\n  PS.prob\n   {y \\<in> space M.\n    C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n             \\<bar>B (Suc n - k)\\<bar>}\n  < epsilon\n  0 < epsilon\n  \\<lbrakk>0 < ?q; ?r < ?q\\<rbrakk>\n  \\<Longrightarrow> ennreal ?r < ennreal ?q\n\ngoal (1 subgoal):\n 1. emeasure P\n     {y \\<in> space M.\n      C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n               \\<bar>B (Suc n - k)\\<bar>}\n    < ennreal epsilon", "unfolding PS.emeasure_eq_measure"], ["proof (prove)\nusing this:\n  PS.prob\n   {y \\<in> space M.\n    C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n             \\<bar>B (Suc n - k)\\<bar>}\n  < epsilon\n  0 < epsilon\n  \\<lbrakk>0 < ?q; ?r < ?q\\<rbrakk>\n  \\<Longrightarrow> ennreal ?r < ennreal ?q\n\ngoal (1 subgoal):\n 1. ennreal\n     (PS.prob\n       {y \\<in> space M.\n        C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - k) y\\<bar> /\n                 \\<bar>B (Suc n - k)\\<bar>})\n    < ennreal epsilon", "by auto"], ["proof (state)\nthis:\n  ?k12 \\<in> {1..<K} \\<Longrightarrow>\n  emeasure P\n   {y \\<in> space M.\n    C0 \\<le> \\<bar>g y + birkhoff_sum f (Suc n - ?k12) y\\<bar> /\n             \\<bar>B (Suc n - ?k12)\\<bar>}\n  < ennreal epsilon\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "assume \"\\<not>(B (Suc n) \\<le> C * Max {B i |i. i \\<le> n})\""], ["proof (state)\nthis:\n  \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)\""], ["proof (prove)\nusing this:\n  \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)", "by simp"], ["proof (state)\nthis:\n  C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"C * B 0 \\<le> C * Max {B i |i. i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * B 0 \\<le> C * Max {B i |i. i \\<le> n}", "apply (rule mult_left_mono, rule Max_ge)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B i |i. i \\<le> n}\n 2. B 0 \\<in> {B i |i. i \\<le> n}\n 3. 0 \\<le> C", "using \\<open>C \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> C\n\ngoal (3 subgoals):\n 1. finite {B i |i. i \\<le> n}\n 2. B 0 \\<in> {B i |i. i \\<le> n}\n 3. 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  C * B 0 \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)\n  C * B 0 \\<le> C * Max {B i |i. i \\<le> n}", "have \"C * B 0 \\<le> B (Suc n)\""], ["proof (prove)\nusing this:\n  C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)\n  C * B 0 \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. C * B 0 \\<le> B (Suc n)", "by auto"], ["proof (state)\nthis:\n  C * B 0 \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"(D / (a * B 0)) * B 0 \\<le> C * B 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D / (a * B 0) * B 0 \\<le> C * B 0", "apply (rule mult_right_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. D / (a * B 0) \\<le> C\n 2. 0 \\<le> B 0", "unfolding C_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. D / (a * B 0) \\<le> max (max C0 C1) (max (D / (a * B 0)) (C0 / a))\n 2. 0 \\<le> B 0", "using Bpos[of 0]"], ["proof (prove)\nusing this:\n  0 < B 0\n\ngoal (2 subgoals):\n 1. D / (a * B 0) \\<le> max (max C0 C1) (max (D / (a * B 0)) (C0 / a))\n 2. 0 \\<le> B 0", "by auto"], ["proof (state)\nthis:\n  D / (a * B 0) * B 0 \\<le> C * B 0\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  D / (a * B 0) * B 0 \\<le> C * B 0", "have \"(D / (a * B 0)) * B 0 \\<le> B (Suc n)\""], ["proof (prove)\nusing this:\n  D / (a * B 0) * B 0 \\<le> C * B 0\n\ngoal (1 subgoal):\n 1. D / (a * B 0) * B 0 \\<le> B (Suc n)", "using \\<open>C * B 0 \\<le> B (Suc n)\\<close>"], ["proof (prove)\nusing this:\n  D / (a * B 0) * B 0 \\<le> C * B 0\n  C * B 0 \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. D / (a * B 0) * B 0 \\<le> B (Suc n)", "by simp"], ["proof (state)\nthis:\n  D / (a * B 0) * B 0 \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  D / (a * B 0) * B 0 \\<le> B (Suc n)", "have \"D \\<le> a * B (Suc n)\""], ["proof (prove)\nusing this:\n  D / (a * B 0) * B 0 \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. D \\<le> a * B (Suc n)", "using Bpos[of 0] \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  D / (a * B 0) * B 0 \\<le> B (Suc n)\n  0 < B 0\n  0 < a\n\ngoal (1 subgoal):\n 1. D \\<le> a * B (Suc n)", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  D \\<le> a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "define X where \"X = {x \\<in> space M. abs((g x + birkhoff_sum f (Suc n) x)/B(Suc n)) > 2 * a}\n                        \\<inter> {x \\<in> space M. \\<forall>k < K. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<le> D}\n                        \\<inter> {x \\<in> space M. (\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1}\""], ["proof (state)\nthis:\n  X =\n  {x \\<in> space M.\n   2 * a\n   < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} \\<inter>\n  {x \\<in> space M.\n   \\<forall>k<K.\n      \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n      \\<le> D} \\<inter>\n  {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have [measurable]: \"X \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X \\<in> sets M", "unfolding X_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M.\n     2 * a\n     < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} \\<inter>\n    {x \\<in> space M.\n     \\<forall>k<K.\n        \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n        \\<le> D} \\<inter>\n    {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n    \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  X \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"3 * alpha + (1-alpha) + (1-alpha) \\<le>\n            PS.prob {x \\<in> space M. abs((g x + birkhoff_sum f (Suc n) x)/B(Suc n)) > 2 * a}\n          + PS.prob {x \\<in> space M. \\<forall>k < K. abs(g x + birkhoff_sum f k x - g((T^^k) x)) \\<le> D}\n          + PS.prob {x \\<in> space M. (\\<Sum>i\\<in>{1..<K}. h ((T^^i) x)) \\<ge> 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * alpha + (1 - alpha) + (1 - alpha)\n    \\<le> PS.prob\n           {x \\<in> space M.\n            2 * a\n            < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n          PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D} +\n          PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "using A D K(2)"], ["proof (prove)\nusing this:\n  3 * alpha\n  < PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  1 - alpha\n  \\<le> PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D}\n  1 - alpha\n  \\<le> PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. 3 * alpha + (1 - alpha) + (1 - alpha)\n    \\<le> PS.prob\n           {x \\<in> space M.\n            2 * a\n            < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n          PS.prob\n           {x \\<in> space M.\n            \\<forall>k<K.\n               \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n               \\<le> D} +\n          PS.prob\n           {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}", "by auto"], ["proof (state)\nthis:\n  3 * alpha + (1 - alpha) + (1 - alpha)\n  \\<le> PS.prob\n         {x \\<in> space M.\n          2 * a\n          < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n        PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n             \\<le> D} +\n        PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  3 * alpha + (1 - alpha) + (1 - alpha)\n  \\<le> PS.prob\n         {x \\<in> space M.\n          2 * a\n          < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n        PS.prob\n         {x \\<in> space M.\n          \\<forall>k<K.\n             \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n             \\<le> D} +\n        PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... \\<le> 2 + PS.prob X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n    PS.prob\n     {x \\<in> space M.\n      \\<forall>k<K.\n         \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D} +\n    PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n    \\<le> 2 + PS.prob X", "unfolding X_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n    PS.prob\n     {x \\<in> space M.\n      \\<forall>k<K.\n         \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D} +\n    PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n    \\<le> 2 +\n          PS.prob\n           ({x \\<in> space M.\n             2 * a\n             < \\<bar>(g x + birkhoff_sum f (Suc n) x) /\n                     B (Suc n)\\<bar>} \\<inter>\n            {x \\<in> space M.\n             \\<forall>k<K.\n                \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n                \\<le> D} \\<inter>\n            {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))})", "by (rule PS.sum_measure_le_measure_inter3, auto)"], ["proof (state)\nthis:\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>} +\n  PS.prob\n   {x \\<in> space M.\n    \\<forall>k<K.\n       \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar> \\<le> D} +\n  PS.prob {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n  \\<le> 2 + PS.prob X\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  3 * alpha + (1 - alpha) + (1 - alpha) \\<le> 2 + PS.prob X", "have \"PS.prob X \\<ge> alpha\""], ["proof (prove)\nusing this:\n  3 * alpha + (1 - alpha) + (1 - alpha) \\<le> 2 + PS.prob X\n\ngoal (1 subgoal):\n 1. alpha \\<le> PS.prob X", "by auto"], ["proof (state)\nthis:\n  alpha \\<le> PS.prob X\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have I: \"(\\<lambda>y. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k))) ((T^^k) x) \\<ge> C0\" if \"x \\<in> X\" \"k \\<in> {1..<K}\" for x k"], ["proof (prove)\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"2 * a * B(Suc n) \\<le> abs(g x + birkhoff_sum f (Suc n) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "using \\<open>x \\<in> X\\<close> Bpos[of \"Suc n\"]"], ["proof (prove)\nusing this:\n  x \\<in> X\n  0 < B (Suc n)\n\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           2 * a\n           < \\<bar>(g x + birkhoff_sum f (Suc n) x) /\n                   B (Suc n)\\<bar>} \\<inter>\n          {x \\<in> space M.\n           \\<forall>k<K.\n              \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n              \\<le> D} \\<inter>\n          {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n  0 < B (Suc n)\n\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  2 * a * B (Suc n) \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "also"], ["proof (state)\nthis:\n  2 * a * B (Suc n) \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"... = abs(g((T^^k) x) + birkhoff_sum f (Suc n -k) ((T^^k) x) + (g x + birkhoff_sum f k x - g((T^^k) x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n    \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n          (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>", "using \\<open>n > N+K\\<close> \\<open>k \\<in> {1..<K}\\<close> birkhoff_sum_cocycle[of f k \"Suc n - k\" x]"], ["proof (prove)\nusing this:\n  N + K < n\n  k \\<in> {1..<K}\n  birkhoff_sum f (k + (Suc n - k)) x =\n  birkhoff_sum f k x + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n    \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n          (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n        (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "also"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n        (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"... \\<le> abs(g((T^^k) x) + birkhoff_sum f (Suc n -k) ((T^^k) x)) + abs(g x + birkhoff_sum f k x - g((T^^k) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n          (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n          \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n        (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "also"], ["proof (state)\nthis:\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x) +\n        (g x + birkhoff_sum f k x - g ((T ^^ k) x))\\<bar>\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"... \\<le> abs(g((T^^k) x) + birkhoff_sum f (Suc n -k) ((T^^k) x)) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n    \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n          D", "using \\<open>x \\<in> X\\<close> \\<open>k \\<in> {1..<K}\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> X\n  k \\<in> {1..<K}\n\ngoal (1 subgoal):\n 1. \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n    \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n          D", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           2 * a\n           < \\<bar>(g x + birkhoff_sum f (Suc n) x) /\n                   B (Suc n)\\<bar>} \\<inter>\n          {x \\<in> space M.\n           \\<forall>k<K.\n              \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n              \\<le> D} \\<inter>\n          {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n  k \\<in> {1..<K}\n\ngoal (1 subgoal):\n 1. \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n    \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n          D", "by auto"], ["proof (state)\nthis:\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        D\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "also"], ["proof (state)\nthis:\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n  \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        D\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"... \\<le> abs(g((T^^k) x) + birkhoff_sum f (Suc n -k) ((T^^k) x)) + a * B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> + D\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n          a * B (Suc n)", "using \\<open>D \\<le> a * B (Suc n)\\<close>"], ["proof (prove)\nusing this:\n  D \\<le> a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> + D\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n          a * B (Suc n)", "by simp"], ["proof (state)\nthis:\n  \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> + D\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        a * B (Suc n)\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "finally"], ["proof (chain)\npicking this:\n  2 * a * B (Suc n)\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        a * B (Suc n)", "have *: \"a * B (Suc n) \\<le> abs(g((T^^k) x) + birkhoff_sum f (Suc n -k) ((T^^k) x))\""], ["proof (prove)\nusing this:\n  2 * a * B (Suc n)\n  \\<le> \\<bar>g ((T ^^ k) x) +\n              birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar> +\n        a * B (Suc n)\n\ngoal (1 subgoal):\n 1. a * B (Suc n)\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>", "by simp"], ["proof (state)\nthis:\n  a * B (Suc n)\n  \\<le> \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"(C0/a) * B (Suc n - k) \\<le> C * B (Suc n - k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C0 / a * B (Suc n - k) \\<le> C * B (Suc n - k)", "apply (rule mult_right_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. C0 / a \\<le> C\n 2. 0 \\<le> B (Suc n - k)", "unfolding C_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. C0 / a \\<le> max (max C0 C1) (max (D / (a * B 0)) (C0 / a))\n 2. 0 \\<le> B (Suc n - k)", "using less_imp_le[OF Bpos]"], ["proof (prove)\nusing this:\n  0 \\<le> B ?n1\n\ngoal (2 subgoals):\n 1. C0 / a \\<le> max (max C0 C1) (max (D / (a * B 0)) (C0 / a))\n 2. 0 \\<le> B (Suc n - k)", "by auto"], ["proof (state)\nthis:\n  C0 / a * B (Suc n - k) \\<le> C * B (Suc n - k)\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "also"], ["proof (state)\nthis:\n  C0 / a * B (Suc n - k) \\<le> C * B (Suc n - k)\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"... \\<le> C * Max {B i |i. i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * B (Suc n - k) \\<le> C * Max {B i |i. i \\<le> n}", "apply (rule mult_left_mono, rule Max_ge)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B i |i. i \\<le> n}\n 2. B (Suc n - k) \\<in> {B i |i. i \\<le> n}\n 3. 0 \\<le> C", "using \\<open>k \\<in> {1..<K}\\<close> \\<open>C \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  k \\<in> {1..<K}\n  1 \\<le> C\n\ngoal (3 subgoals):\n 1. finite {B i |i. i \\<le> n}\n 2. B (Suc n - k) \\<in> {B i |i. i \\<le> n}\n 3. 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  C * B (Suc n - k) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "also"], ["proof (state)\nthis:\n  C * B (Suc n - k) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "have \"... \\<le> B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)", "by fact"], ["proof (state)\nthis:\n  C * Max {B i |i. i \\<le> n} \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "finally"], ["proof (chain)\npicking this:\n  C0 / a * B (Suc n - k) \\<le> B (Suc n)", "have \"C0 * B (Suc n - k) \\<le> a * B (Suc n)\""], ["proof (prove)\nusing this:\n  C0 / a * B (Suc n - k) \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. C0 * B (Suc n - k) \\<le> a * B (Suc n)", "using \\<open>a>0\\<close>"], ["proof (prove)\nusing this:\n  C0 / a * B (Suc n - k) \\<le> B (Suc n)\n  0 < a\n\ngoal (1 subgoal):\n 1. C0 * B (Suc n - k) \\<le> a * B (Suc n)", "by (simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  C0 * B (Suc n - k) \\<le> a * B (Suc n)\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "then"], ["proof (chain)\npicking this:\n  C0 * B (Suc n - k) \\<le> a * B (Suc n)", "have \"C0 * B (Suc n - k) \\<le> abs(g((T^^k) x) + birkhoff_sum f (Suc n -k) ((T^^k) x))\""], ["proof (prove)\nusing this:\n  C0 * B (Suc n - k) \\<le> a * B (Suc n)\n\ngoal (1 subgoal):\n 1. C0 * B (Suc n - k)\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>", "using *"], ["proof (prove)\nusing this:\n  C0 * B (Suc n - k) \\<le> a * B (Suc n)\n  a * B (Suc n)\n  \\<le> \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>\n\ngoal (1 subgoal):\n 1. C0 * B (Suc n - k)\n    \\<le> \\<bar>g ((T ^^ k) x) +\n                birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>", "by auto"], ["proof (state)\nthis:\n  C0 * B (Suc n - k)\n  \\<le> \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "then"], ["proof (chain)\npicking this:\n  C0 * B (Suc n - k)\n  \\<le> \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  C0 * B (Suc n - k)\n  \\<le> \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "using Bpos[of \"Suc n - k\"]"], ["proof (prove)\nusing this:\n  C0 * B (Suc n - k)\n  \\<le> \\<bar>g ((T ^^ k) x) + birkhoff_sum f (Suc n - k) ((T ^^ k) x)\\<bar>\n  0 < B (Suc n - k)\n\ngoal (1 subgoal):\n 1. C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                    birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                   B (Suc n - k)\\<bar>", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  C0 \\<le> \\<bar>(g ((T ^^ k) x) +\n                  birkhoff_sum f (Suc n - k) ((T ^^ k) x)) /\n                 B (Suc n - k)\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?x12 \\<in> X; ?k12 \\<in> {1..<K}\\<rbrakk>\n  \\<Longrightarrow> C0 \\<le> \\<bar>(g ((T ^^ ?k12) ?x12) +\n                                    birkhoff_sum f (Suc n - ?k12)\n                                     ((T ^^ ?k12) ?x12)) /\n                                   B (Suc n - ?k12)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have J: \"1 \\<le> (\\<Sum>k\\<in>{1..<K}. (\\<lambda>y. h y * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} y) ((T^^k) x))\"\n      if \"x \\<in> X\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "have \"x \\<in> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> space M", "using \\<open>x \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x \\<in> space M", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           2 * a\n           < \\<bar>(g x + birkhoff_sum f (Suc n) x) /\n                   B (Suc n)\\<bar>} \\<inter>\n          {x \\<in> space M.\n           \\<forall>k<K.\n              \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n              \\<le> D} \\<inter>\n          {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. x \\<in> space M", "by auto"], ["proof (state)\nthis:\n  x \\<in> space M\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "have \"1 \\<le> (\\<Sum>k \\<in> {1..<K}. h ((T^^k) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K. h ((T ^^ k) x))", "using \\<open>x \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K. h ((T ^^ k) x))", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           2 * a\n           < \\<bar>(g x + birkhoff_sum f (Suc n) x) /\n                   B (Suc n)\\<bar>} \\<inter>\n          {x \\<in> space M.\n           \\<forall>k<K.\n              \\<bar>g x + birkhoff_sum f k x - g ((T ^^ k) x)\\<bar>\n              \\<le> D} \\<inter>\n          {x \\<in> space M. 1 \\<le> (\\<Sum>i = 1..<K. h ((T ^^ i) x))}\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K. h ((T ^^ k) x))", "by auto"], ["proof (state)\nthis:\n  1 \\<le> (\\<Sum>k = 1..<K. h ((T ^^ k) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "also"], ["proof (state)\nthis:\n  1 \\<le> (\\<Sum>k = 1..<K. h ((T ^^ k) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "have \"... = (\\<Sum>k \\<in> {1..<K}. h ((T^^k) x) * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} ((T^^k) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K. h ((T ^^ k) x)) =\n    (\\<Sum>k = 1..<K.\n        h ((T ^^ k) x) *\n        indicator\n         {y \\<in> space M.\n          C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                         B (Suc n - k)\\<bar>}\n         ((T ^^ k) x))", "apply (rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {1..<K} = {1..<K}\n 2. \\<And>xa.\n       xa \\<in> {1..<K} \\<Longrightarrow>\n       h ((T ^^ xa) x) =\n       h ((T ^^ xa) x) *\n       indicator\n        {y \\<in> space M.\n         C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - xa) y) /\n                        B (Suc n - xa)\\<bar>}\n        ((T ^^ xa) x)", "unfolding indicator_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. {1..<K} = {1..<K}\n 2. \\<And>xa.\n       xa \\<in> {1..<K} \\<Longrightarrow>\n       h ((T ^^ xa) x) =\n       h ((T ^^ xa) x) *\n       (if (T ^^ xa) x\n           \\<in> {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - xa) y) /\n                                 B (Suc n - xa)\\<bar>}\n        then 1 else 0)", "using I[OF \\<open>x \\<in> X\\<close>] T_spaceM_stable(2)[OF \\<open>x \\<in> space M\\<close>]"], ["proof (prove)\nusing this:\n  ?k12 \\<in> {1..<K} \\<Longrightarrow>\n  C0 \\<le> \\<bar>(g ((T ^^ ?k12) x) +\n                  birkhoff_sum f (Suc n - ?k12) ((T ^^ ?k12) x)) /\n                 B (Suc n - ?k12)\\<bar>\n  (T ^^ ?n) x \\<in> space M\n\ngoal (2 subgoals):\n 1. {1..<K} = {1..<K}\n 2. \\<And>xa.\n       xa \\<in> {1..<K} \\<Longrightarrow>\n       h ((T ^^ xa) x) =\n       h ((T ^^ xa) x) *\n       (if (T ^^ xa) x\n           \\<in> {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - xa) y) /\n                                 B (Suc n - xa)\\<bar>}\n        then 1 else 0)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K. h ((T ^^ k) x)) =\n  (\\<Sum>k = 1..<K.\n      h ((T ^^ k) x) *\n      indicator\n       {y \\<in> space M.\n        C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                       B (Suc n - k)\\<bar>}\n       ((T ^^ k) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "finally"], ["proof (chain)\npicking this:\n  1 \\<le> (\\<Sum>k = 1..<K.\n              h ((T ^^ k) x) *\n              indicator\n               {y \\<in> space M.\n                C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                               B (Suc n - k)\\<bar>}\n               ((T ^^ k) x))", "show ?thesis"], ["proof (prove)\nusing this:\n  1 \\<le> (\\<Sum>k = 1..<K.\n              h ((T ^^ k) x) *\n              indicator\n               {y \\<in> space M.\n                C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                               B (Suc n - k)\\<bar>}\n               ((T ^^ k) x))\n\ngoal (1 subgoal):\n 1. 1 \\<le> (\\<Sum>k = 1..<K.\n                h ((T ^^ k) x) *\n                indicator\n                 {y \\<in> space M.\n                  C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                 B (Suc n - k)\\<bar>}\n                 ((T ^^ k) x))", "by simp"], ["proof (state)\nthis:\n  1 \\<le> (\\<Sum>k = 1..<K.\n              h ((T ^^ k) x) *\n              indicator\n               {y \\<in> space M.\n                C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                               B (Suc n - k)\\<bar>}\n               ((T ^^ k) x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x12 \\<in> X \\<Longrightarrow>\n  1 \\<le> (\\<Sum>k = 1..<K.\n              h ((T ^^ k) ?x12) *\n              indicator\n               {y \\<in> space M.\n                C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                               B (Suc n - k)\\<bar>}\n               ((T ^^ k) ?x12))\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"ennreal alpha \\<le> emeasure P X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal alpha \\<le> emeasure P X", "using \\<open>PS.prob X \\<ge> alpha\\<close>"], ["proof (prove)\nusing this:\n  alpha \\<le> PS.prob X\n\ngoal (1 subgoal):\n 1. ennreal alpha \\<le> emeasure P X", "by (simp add: PS.emeasure_eq_measure)"], ["proof (state)\nthis:\n  ennreal alpha \\<le> emeasure P X\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  ennreal alpha \\<le> emeasure P X\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = (\\<integral>\\<^sup>+x. indicator X x \\<partial>P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure P X = integral\\<^sup>N P (indicator X)", "by auto"], ["proof (state)\nthis:\n  emeasure P X = integral\\<^sup>N P (indicator X)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  emeasure P X = integral\\<^sup>N P (indicator X)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... \\<le> (\\<integral>\\<^sup>+x. (\\<Sum>k\\<in>{1..<K}. (\\<lambda>y. h y\n      * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} y) ((T^^k) x)) \\<partial>P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>N P (indicator X)\n    \\<le> \\<integral>\\<^sup>+ x. (\\<Sum>k = 1..<K.\n                                     h ((T ^^ k) x) *\n                                     indicator\n{y \\<in> space M.\n C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) / B (Suc n - k)\\<bar>}\n((T ^^ k) x))\n                             \\<partial>P", "apply (rule nn_integral_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space P \\<Longrightarrow>\n       indicator X x\n       \\<le> (\\<Sum>k = 1..<K.\n                 h ((T ^^ k) x) *\n                 indicator\n                  {y \\<in> space M.\n                   C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                  B (Suc n - k)\\<bar>}\n                  ((T ^^ k) x))", "using J"], ["proof (prove)\nusing this:\n  ?x12 \\<in> X \\<Longrightarrow>\n  1 \\<le> (\\<Sum>k = 1..<K.\n              h ((T ^^ k) ?x12) *\n              indicator\n               {y \\<in> space M.\n                C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                               B (Suc n - k)\\<bar>}\n               ((T ^^ k) ?x12))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space P \\<Longrightarrow>\n       indicator X x\n       \\<le> (\\<Sum>k = 1..<K.\n                 h ((T ^^ k) x) *\n                 indicator\n                  {y \\<in> space M.\n                   C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                                  B (Suc n - k)\\<bar>}\n                  ((T ^^ k) x))", "unfolding indicator_def"], ["proof (prove)\nusing this:\n  ?x12 \\<in> X \\<Longrightarrow>\n  1 \\<le> (\\<Sum>k = 1..<K.\n              h ((T ^^ k) ?x12) *\n              (if (T ^^ k) ?x12\n                  \\<in> {y \\<in> space M.\n                         C0 \\<le> \\<bar>(g y +\n   birkhoff_sum f (Suc n - k) y) /\n  B (Suc n - k)\\<bar>}\n               then 1 else 0))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space P \\<Longrightarrow>\n       (if x \\<in> X then 1 else 0)\n       \\<le> (\\<Sum>k = 1..<K.\n                 h ((T ^^ k) x) *\n                 (if (T ^^ k) x\n                     \\<in> {y \\<in> space M.\n                            C0 \\<le> \\<bar>(g y +\n      birkhoff_sum f (Suc n - k) y) /\n     B (Suc n - k)\\<bar>}\n                  then 1 else 0))", "by fastforce"], ["proof (state)\nthis:\n  integral\\<^sup>N P (indicator X)\n  \\<le> \\<integral>\\<^sup>+ x. (\\<Sum>k = 1..<K.\n                                   h ((T ^^ k) x) *\n                                   indicator\n                                    {y \\<in> space M.\n                                     C0 \\<le> \\<bar>(g y +\n               birkhoff_sum f (Suc n - k) y) /\n              B (Suc n - k)\\<bar>}\n                                    ((T ^^ k) x))\n                           \\<partial>P\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  integral\\<^sup>N P (indicator X)\n  \\<le> \\<integral>\\<^sup>+ x. (\\<Sum>k = 1..<K.\n                                   h ((T ^^ k) x) *\n                                   indicator\n                                    {y \\<in> space M.\n                                     C0 \\<le> \\<bar>(g y +\n               birkhoff_sum f (Suc n - k) y) /\n              B (Suc n - k)\\<bar>}\n                                    ((T ^^ k) x))\n                           \\<partial>P\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = (\\<Sum>k\\<in>{1..<K}. (\\<integral>\\<^sup>+x. (\\<lambda>y. h y\n      * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} y) ((T^^k) x) \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. (\\<Sum>k = 1..<K.\n                               h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x))\n                       \\<partial>P =\n    (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x)\n                           \\<partial>P)", "by (rule nn_integral_sum, auto)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>k = 1..<K.\n                             h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x))\n                     \\<partial>P =\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x)\n                         \\<partial>P)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. (\\<Sum>k = 1..<K.\n                             h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x))\n                     \\<partial>P =\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x)\n                         \\<partial>P)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = (\\<Sum>k\\<in>{1..<K}. (\\<integral>\\<^sup>+x. (\\<lambda>y. h y\n      * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} y) ((T^^k) x) * h x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x)\n                           \\<partial>P) =\n    (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x) *\n                               h x\n                           \\<partial>M)", "unfolding \\<open>P = density M h\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x)\n                           \\<partial>density M h) =\n    (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x) *\n                               h x\n                           \\<partial>M)", "by (auto intro!: sum.cong nn_integral_densityR[symmetric])"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x)\n                         \\<partial>P) =\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x) *\n                             h x\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x)\n                         \\<partial>P) =\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x) *\n                             h x\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = (\\<Sum>k\\<in>{1..<K}. (\\<integral>\\<^sup>+x. h x\n      * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} x * ((nn_transfer_operator^^k) h) x \\<partial>M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                ((T ^^ k) x) *\n                               h x\n                           \\<partial>M) =\n    (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h x *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                x *\n                               (nn_transfer_operator ^^ k) h x\n                           \\<partial>M)", "by (auto intro!: sum.cong nn_transfer_operator_intTn_g[symmetric])"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x) *\n                             h x\n                         \\<partial>M) =\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h x *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              x *\n                             (nn_transfer_operator ^^ k) h x\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h ((T ^^ k) x) *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              ((T ^^ k) x) *\n                             h x\n                         \\<partial>M) =\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h x *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              x *\n                             (nn_transfer_operator ^^ k) h x\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = (\\<Sum>k\\<in>{1..<K}. (\\<integral>\\<^sup>+x.\n        ((nn_transfer_operator^^k) h) x * indicator {y \\<in> space M. abs((g y + birkhoff_sum f (Suc n - k) y)/ B (Suc n - k)) \\<ge> C0} x \\<partial>P))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h x *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                x *\n                               (nn_transfer_operator ^^ k) h x\n                           \\<partial>M) =\n    (\\<Sum>k = 1..<K.\n        set_nn_integral P\n         {y \\<in> space M.\n          C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                         B (Suc n - k)\\<bar>}\n         ((nn_transfer_operator ^^ k) h))", "unfolding \\<open>P = density M h\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K.\n        \\<integral>\\<^sup>+ x. h x *\n                               indicator\n                                {y \\<in> space M.\n                                 C0 \\<le> \\<bar>(g y +\n           birkhoff_sum f (Suc n - k) y) /\n          B (Suc n - k)\\<bar>}\n                                x *\n                               (nn_transfer_operator ^^ k) h x\n                           \\<partial>M) =\n    (\\<Sum>k = 1..<K.\n        set_nn_integral (density M h)\n         {y \\<in> space M.\n          C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                         B (Suc n - k)\\<bar>}\n         ((nn_transfer_operator ^^ k) h))", "by (subst nn_integral_density, auto intro!: sum.cong simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h x *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              x *\n                             (nn_transfer_operator ^^ k) h x\n                         \\<partial>M) =\n  (\\<Sum>k = 1..<K.\n      set_nn_integral P\n       {y \\<in> space M.\n        C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                       B (Suc n - k)\\<bar>}\n       ((nn_transfer_operator ^^ k) h))\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      \\<integral>\\<^sup>+ x. h x *\n                             indicator\n                              {y \\<in> space M.\n                               C0 \\<le> \\<bar>(g y +\n         birkhoff_sum f (Suc n - k) y) /\n        B (Suc n - k)\\<bar>}\n                              x *\n                             (nn_transfer_operator ^^ k) h x\n                         \\<partial>M) =\n  (\\<Sum>k = 1..<K.\n      set_nn_integral P\n       {y \\<in> space M.\n        C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                       B (Suc n - k)\\<bar>}\n       ((nn_transfer_operator ^^ k) h))\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... \\<le> (\\<Sum>k\\<in>{1..<K}. ennreal delta)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K.\n        set_nn_integral P\n         {y \\<in> space M.\n          C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                         B (Suc n - k)\\<bar>}\n         ((nn_transfer_operator ^^ k) h))\n    \\<le> (\\<Sum>k = 1..<K. ennreal delta)", "by (rule sum_mono, rule small_setint, auto simp add: P_le_epsilon)"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      set_nn_integral P\n       {y \\<in> space M.\n        C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                       B (Suc n - k)\\<bar>}\n       ((nn_transfer_operator ^^ k) h))\n  \\<le> (\\<Sum>k = 1..<K. ennreal delta)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K.\n      set_nn_integral P\n       {y \\<in> space M.\n        C0 \\<le> \\<bar>(g y + birkhoff_sum f (Suc n - k) y) /\n                       B (Suc n - k)\\<bar>}\n       ((nn_transfer_operator ^^ k) h))\n  \\<le> (\\<Sum>k = 1..<K. ennreal delta)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... = ennreal (\\<Sum>k\\<in>{1..<K}. delta)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K. ennreal delta) = ennreal (\\<Sum>k = 1..<K. delta)", "using less_imp_le[OF \\<open>delta > 0\\<close>]"], ["proof (prove)\nusing this:\n  0 \\<le> delta\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K. ennreal delta) = ennreal (\\<Sum>k = 1..<K. delta)", "by (rule sum_ennreal)"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K. ennreal delta) = ennreal (\\<Sum>k = 1..<K. delta)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta)", "have \"alpha \\<le> (\\<Sum>k\\<in>{1..<K}. delta)\""], ["proof (prove)\nusing this:\n  ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta)\n\ngoal (1 subgoal):\n 1. alpha \\<le> (\\<Sum>k = 1..<K. delta)", "apply (subst ennreal_le_iff[symmetric])"], ["proof (prove)\ngoal (2 subgoals):\n 1. ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta) \\<Longrightarrow>\n    0 \\<le> (\\<Sum>k = 1..<K. delta)\n 2. ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta) \\<Longrightarrow>\n    ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta)", "using \\<open>delta > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < delta\n\ngoal (2 subgoals):\n 1. ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta) \\<Longrightarrow>\n    0 \\<le> (\\<Sum>k = 1..<K. delta)\n 2. ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta) \\<Longrightarrow>\n    ennreal alpha \\<le> ennreal (\\<Sum>k = 1..<K. delta)", "by auto"], ["proof (state)\nthis:\n  alpha \\<le> (\\<Sum>k = 1..<K. delta)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "also"], ["proof (state)\nthis:\n  alpha \\<le> (\\<Sum>k = 1..<K. delta)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "have \"... \\<le> K * delta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K. delta) \\<le> real K * delta", "using \\<open>delta > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < delta\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..<K. delta) \\<le> real K * delta", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..<K. delta) \\<le> real K * delta\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n} \\<Longrightarrow>\n    False", "finally"], ["proof (chain)\npicking this:\n  alpha \\<le> real K * delta", "show False"], ["proof (prove)\nusing this:\n  alpha \\<le> real K * delta\n\ngoal (1 subgoal):\n 1. False", "unfolding delta_def"], ["proof (prove)\nusing this:\n  alpha \\<le> real K * (alpha / real (2 * K))\n\ngoal (1 subgoal):\n 1. False", "using \\<open>K \\<ge> 1\\<close> \\<open>alpha > 0\\<close>"], ["proof (prove)\nusing this:\n  alpha \\<le> real K * (alpha / real (2 * K))\n  1 \\<le> K\n  0 < alpha\n\ngoal (1 subgoal):\n 1. False", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N + K < ?n12 \\<Longrightarrow>\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>If $n$ is not large, we get the same bound in a trivial way, as there are only finitely\n  many cases to consider and we have adjusted the constant $C$ so that it works for all of them.\\<close>"], ["proof (state)\nthis:\n  N + K < ?n12 \\<Longrightarrow>\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have leK: \"B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\" if \"n \\<le> N+K\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"B (Suc n)/B 0 \\<le> Max {B k/B 0 |k. k \\<le> N+K+1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) / B 0 \\<le> Max {B k / B 0 |k. k \\<le> N + K + 1}", "apply (rule Max_ge, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) / B 0 \\<in> {B k / B 0 |k. k \\<le> N + K + 1}", "using \\<open>n \\<le> N+K\\<close>"], ["proof (prove)\nusing this:\n  n \\<le> N + K\n\ngoal (1 subgoal):\n 1. B (Suc n) / B 0 \\<in> {B k / B 0 |k. k \\<le> N + K + 1}", "by auto"], ["proof (state)\nthis:\n  B (Suc n) / B 0 \\<le> Max {B k / B 0 |k. k \\<le> N + K + 1}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "also"], ["proof (state)\nthis:\n  B (Suc n) / B 0 \\<le> Max {B k / B 0 |k. k \\<le> N + K + 1}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"... \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B k / B 0 |k. k \\<le> N + K + 1} \\<le> C", "unfolding C_def C1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B k / B 0 |k. k \\<le> N + K + 1}\n    \\<le> max (max C0 (Max {B k / B 0 |k. k \\<le> N + K + 1}))\n           (max (D / (a * B 0)) (C0 / a))", "by auto"], ["proof (state)\nthis:\n  Max {B k / B 0 |k. k \\<le> N + K + 1} \\<le> C\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "finally"], ["proof (chain)\npicking this:\n  B (Suc n) / B 0 \\<le> C", "have \"B (Suc n) \\<le> C * B 0\""], ["proof (prove)\nusing this:\n  B (Suc n) / B 0 \\<le> C\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * B 0", "using Bpos[of 0]"], ["proof (prove)\nusing this:\n  B (Suc n) / B 0 \\<le> C\n  0 < B 0\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * B 0", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  B (Suc n) \\<le> C * B 0\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "also"], ["proof (state)\nthis:\n  B (Suc n) \\<le> C * B 0\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"... \\<le> C * Max {B i |i. i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * B 0 \\<le> C * Max {B i |i. i \\<le> n}", "apply (rule mult_left_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. B 0 \\<le> Max {B i |i. i \\<le> n}\n 2. 0 \\<le> C", "apply (rule Max_ge)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B i |i. i \\<le> n}\n 2. B 0 \\<in> {B i |i. i \\<le> n}\n 3. 0 \\<le> C", "using \\<open>C \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> C\n\ngoal (3 subgoals):\n 1. finite {B i |i. i \\<le> n}\n 2. B 0 \\<in> {B i |i. i \\<le> n}\n 3. 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  C * B 0 \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "finally"], ["proof (chain)\npicking this:\n  B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "show ?thesis"], ["proof (prove)\nusing this:\n  B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "by simp"], ["proof (state)\nthis:\n  B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n12 \\<le> N + K \\<Longrightarrow>\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "using geK[of n] leK[of n]"], ["proof (prove)\nusing this:\n  N + K < n \\<Longrightarrow> B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n  n \\<le> N + K \\<Longrightarrow>\n  B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "by force"], ["proof (state)\nthis:\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "then"], ["proof (chain)\npicking this:\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}", "show ?thesis"], ["proof (prove)\nusing this:\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "using \\<open>C \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n  1 \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "by auto"], ["proof (state)\nthis:\n  \\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Then, we prove the lemma without further assumptions, reducing to the previous case by\nreplacing $m$ with $m+P$. We do this at the level of densities since the addition of measures\nis not defined in the library (and it would be problematic as measures carry their sigma-algebra,\nso what should one do when the sigma-algebras do not coincide?)\\<close>"], ["", "lemma upper_bound_C:\n  \"\\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i|i. i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>We introduce the density of $P$, and show that it is almost everywhere finite.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "define h where \"h = RN_deriv M P\""], ["proof (state)\nthis:\n  h = RN_deriv M P\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have [measurable]: \"h \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h \\<in> borel_measurable M", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. RN_deriv M P \\<in> borel_measurable M", "by auto"], ["proof (state)\nthis:\n  h \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have P [simp]: \"P = density M h\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P = density M h", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. P = density M (RN_deriv M P)", "apply (rule density_RN_deriv[symmetric])"], ["proof (prove)\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. PS.events = sets M", "using PabsM"], ["proof (prove)\nusing this:\n  absolutely_continuous M P\n\ngoal (2 subgoals):\n 1. absolutely_continuous M P\n 2. PS.events = sets M", "by auto"], ["proof (state)\nthis:\n  P = density M h\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have \"space P = space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space P = space M", "by auto"], ["proof (state)\nthis:\n  space P = space M\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have *: \"AE x in M. h x \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. h x \\<noteq> \\<infinity>", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. RN_deriv M P x \\<noteq> \\<infinity>", "apply (rule RN_deriv_finite)"], ["proof (prove)\ngoal (3 subgoals):\n 1. sigma_finite_measure P\n 2. absolutely_continuous M P\n 3. PS.events = sets M", "using PS.sigma_finite_measure_axioms PabsM"], ["proof (prove)\nusing this:\n  sigma_finite_measure P\n  absolutely_continuous M P\n\ngoal (3 subgoals):\n 1. sigma_finite_measure P\n 2. absolutely_continuous M P\n 3. PS.events = sets M", "by auto"], ["proof (state)\nthis:\n  AE x in M. h x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have **: \"null_sets (density M (\\<lambda>x. 1 + h x)) = null_sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. null_sets (density M (\\<lambda>x. 1 + h x)) = null_sets M", "by (rule null_sets_density, auto)"], ["proof (state)\nthis:\n  null_sets (density M (\\<lambda>x. 1 + h x)) = null_sets M\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>We introduce the new system with invariant measure $M+P$, given by the density $1+h$.\\<close>"], ["proof (state)\nthis:\n  null_sets (density M (\\<lambda>x. 1 + h x)) = null_sets M\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "interpret A: conservative \"density M (\\<lambda>x. 1 + h x)\" T"], ["proof (prove)\ngoal (1 subgoal):\n 1. conservative (density M (\\<lambda>x. 1 + h x)) T", "apply (rule conservative_density)"], ["proof (prove)\ngoal (3 subgoals):\n 1. (\\<lambda>x. 1 + h x) \\<in> borel_measurable M\n 2. AE x in M. 1 + h x \\<noteq> 0\n 3. AE x in M. 1 + h x \\<noteq> \\<infinity>", "using *"], ["proof (prove)\nusing this:\n  AE x in M. h x \\<noteq> \\<infinity>\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. 1 + h x) \\<in> borel_measurable M\n 2. AE x in M. 1 + h x \\<noteq> 0\n 3. AE x in M. 1 + h x \\<noteq> \\<infinity>", "by auto"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "interpret B: conservative_limit T \"density M (\\<lambda>x. 1 + h x)\" P Z f g B"], ["proof (prove)\ngoal (1 subgoal):\n 1. conservative_limit T (density M (\\<lambda>x. 1 + h x)) P Z f g B", "apply standard"], ["proof (prove)\ngoal (7 subgoals):\n 1. absolutely_continuous (density M (\\<lambda>x. 1 + h x)) P\n 2. \\<And>n. 0 < B n\n 3. f \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))\n 4. g \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))\n 5. PS.events = sets (density M (\\<lambda>x. 1 + h x))\n 6. PZ.prob {0} < 1\n 7. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + A.birkhoff_sum f n x) / B n))\n     Z", "using conv Bpos non_trivial absolutely_continuousI_density[OF \\<open>h \\<in> borel_measurable M\\<close>]"], ["proof (prove)\nusing this:\n  weak_conv_m\n   (\\<lambda>n.\n       distr P borel (\\<lambda>x. (g x + A.birkhoff_sum f n x) / B n))\n   Z\n  0 < B ?n\n  PZ.prob {0} < 1\n  absolutely_continuous M (density M h)\n\ngoal (7 subgoals):\n 1. absolutely_continuous (density M (\\<lambda>x. 1 + h x)) P\n 2. \\<And>n. 0 < B n\n 3. f \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))\n 4. g \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))\n 5. PS.events = sets (density M (\\<lambda>x. 1 + h x))\n 6. PZ.prob {0} < 1\n 7. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + A.birkhoff_sum f n x) / B n))\n     Z", "unfolding absolutely_continuous_def **"], ["proof (prove)\nusing this:\n  weak_conv_m\n   (\\<lambda>n.\n       distr P borel (\\<lambda>x. (g x + A.birkhoff_sum f n x) / B n))\n   Z\n  0 < B ?n\n  PZ.prob {0} < 1\n  null_sets M \\<subseteq> null_sets (density M h)\n\ngoal (7 subgoals):\n 1. null_sets M \\<subseteq> null_sets P\n 2. \\<And>n. 0 < B n\n 3. f \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))\n 4. g \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))\n 5. PS.events = sets (density M (\\<lambda>x. 1 + h x))\n 6. PZ.prob {0} < 1\n 7. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + A.birkhoff_sum f n x) / B n))\n     Z", "by auto"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "text \\<open>We obtain the result by applying the result above to the new dynamical system.\n  We have to check the additional assumption that the density of $P$ with respect to the new measure\n  $M + P$ is bounded by $1$. Since this density if $h/(1+h)$, this is trivial modulo a computation\n  in ennreal that is not automated (yet?).\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have z: \"1 = ennreal 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 = ennreal 1", "by auto"], ["proof (state)\nthis:\n  1 = ennreal 1\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have Trivial: \"a = (1+a) * (a/(1+a))\" if \"a \\<noteq> \\<top>\" for a::ennreal"], ["proof (prove)\ngoal (1 subgoal):\n 1. a = (1 + a) * (a / (1 + a))", "apply (cases a)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> a = (1 + a) * (a / (1 + a))\n 2. a = \\<top> \\<Longrightarrow> a = (1 + a) * (a / (1 + a))", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         (1 + ennreal r) * (ennreal r / (1 + ennreal r))\n 2. a = \\<top> \\<Longrightarrow> False", "unfolding z ennreal_plus_if"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         ennreal\n                          (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                           else r) *\n                         (ennreal r /\n                          ennreal\n                           (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r))\n 2. a = \\<top> \\<Longrightarrow> False", "apply (subst divide_ennreal)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> r\n 2. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 < (if 0 \\<le> 1\n                              then if 0 \\<le> r then 1 + r else 1 else r)\n 3. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         ennreal\n                          (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                           else r) *\n                         ennreal\n                          (r /\n                           (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r))\n 4. a = \\<top> \\<Longrightarrow> False", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 < (if 0 \\<le> 1\n                              then if 0 \\<le> r then 1 + r else 1 else r)\n 2. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         ennreal\n                          (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                           else r) *\n                         ennreal\n                          (r /\n                           (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r))\n 3. a = \\<top> \\<Longrightarrow> False", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         ennreal\n                          (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                           else r) *\n                         ennreal\n                          (r /\n                           (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r))\n 2. a = \\<top> \\<Longrightarrow> False", "apply (subst ennreal_mult'[symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (if 0 \\<le> 1\n                                  then if 0 \\<le> r then 1 + r else 1\n                                  else r)\n 2. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         ennreal\n                          ((if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r) *\n                           (r /\n                            (if 0 \\<le> 1\n                             then if 0 \\<le> r then 1 + r else 1 else r)))\n 3. a = \\<top> \\<Longrightarrow> False", "using that"], ["proof (prove)\nusing this:\n  a \\<noteq> \\<top>\n\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (if 0 \\<le> 1\n                                  then if 0 \\<le> r then 1 + r else 1\n                                  else r)\n 2. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r =\n                         ennreal\n                          ((if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r) *\n                           (r /\n                            (if 0 \\<le> 1\n                             then if 0 \\<le> r then 1 + r else 1 else r)))\n 3. a = \\<top> \\<Longrightarrow> False", "by auto"], ["proof (state)\nthis:\n  ?a12 \\<noteq> \\<top> \\<Longrightarrow>\n  ?a12 = (1 + ?a12) * (?a12 / (1 + ?a12))\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "have Trivial2: \"a / (1+a) \\<le> 1\" for a::ennreal"], ["proof (prove)\ngoal (1 subgoal):\n 1. a / (1 + a) \\<le> 1", "apply (cases a)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> a / (1 + a) \\<le> 1\n 2. a = \\<top> \\<Longrightarrow> a / (1 + a) \\<le> 1", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r / (1 + ennreal r) \\<le> 1", "unfolding z ennreal_plus_if"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal r /\n                         ennreal\n                          (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                           else r)\n                         \\<le> ennreal 1", "apply (subst divide_ennreal)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> r\n 2. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> 0 < (if 0 \\<le> 1\n                              then if 0 \\<le> r then 1 + r else 1 else r)\n 3. \\<And>r.\n       \\<lbrakk>0 \\<le> r; a = ennreal r\\<rbrakk>\n       \\<Longrightarrow> ennreal\n                          (r /\n                           (if 0 \\<le> 1 then if 0 \\<le> r then 1 + r else 1\n                            else r))\n                         \\<le> ennreal 1", "by auto"], ["proof (state)\nthis:\n  ?a12 / (1 + ?a12) \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C\\<ge>1.\n       \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}", "apply (rule B.upper_bound_C_aux[of \"\\<lambda>x. h x/(1 + h x)\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. P =\n    density (density M (\\<lambda>x. 1 + h x)) (\\<lambda>x. h x / (1 + h x))\n 2. \\<And>x. h x / (1 + h x) \\<le> 1\n 3. (\\<lambda>x. h x / (1 + h x))\n    \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))", "using * Trivial Trivial2"], ["proof (prove)\nusing this:\n  AE x in M. h x \\<noteq> \\<infinity>\n  ?a12 \\<noteq> \\<top> \\<Longrightarrow>\n  ?a12 = (1 + ?a12) * (?a12 / (1 + ?a12))\n  ?a12 / (1 + ?a12) \\<le> 1\n\ngoal (3 subgoals):\n 1. P =\n    density (density M (\\<lambda>x. 1 + h x)) (\\<lambda>x. h x / (1 + h x))\n 2. \\<And>x. h x / (1 + h x) \\<le> 1\n 3. (\\<lambda>x. h x / (1 + h x))\n    \\<in> borel_measurable (density M (\\<lambda>x. 1 + h x))", "by (auto simp add: density_density_eq density_unique_iff)"], ["proof (state)\nthis:\n  \\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The second main upper bound is the following. Again, it proves that\n$B_{n+1} \\leq L \\max_{i \\leq n} B_i$, for some constant $L$, but with two differences. First,\n$L$ only depends on the distribution of $Z$ (which is stronger). Second, this estimate is only\nproved along a density $1$ sequence of times (which is weaker). The first point implies that\nthis lemma will also apply to $T^j$, with the same $L$, which amounts to replacing $L$ by $L^{1/j}$,\nmaking it in practice arbitrarily close to $1$. The second point is problematic at first sight, but\nfor the exceptional times we will use the bound of the previous lemma so this will not really\ncreate problems.\n\nFor the proof, we split the sum $S_{n+1} f$ as $S_n f + f \\circ T^n$. If $B_{n+1}$ is much larger\nthan $B_n$, we deduce that $S_n f$ is much smaller than $S_{n+1}f$ with large probability, which\nmeans that $f \\circ T^n$ is larger than anything that has been seen before. Since preimages of\ndistinct events have a measure that tends to $0$ along a density $1$ subsequence, this can only\nhappen along a density $0$ subsequence.\\<close>"], ["", "lemma upper_bound_L:\n  fixes a::real and L::real and alpha::real\n  assumes \"a > 0\" \"alpha > 0\" \"L > 3\"\n          \"PZ.prob {x. abs (x) > 2 * a} > 3 * alpha\"\n          \"PZ.prob {x. abs (x) \\<ge> (L-1) * a} < alpha\"\n  shows \"\\<exists>A. lower_asymptotic_density A = 1 \\<and> (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i|i. i \\<le> n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "define m where \"m = (\\<lambda>n. Max {B i|i. i \\<le> n})\""], ["proof (state)\nthis:\n  m = (\\<lambda>n. Max {B i |i. i \\<le> n})\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "define K where \"K = (\\<lambda>n::nat. {x \\<in> space M. abs(f x) \\<in> {a * L * m n <..< a * L * m (Suc n)}})\""], ["proof (state)\nthis:\n  K =\n  (\\<lambda>n.\n      {x \\<in> space M.\n       \\<bar>f x\\<bar> \\<in> {a * L * m n<..<a * L * m (Suc n)}})\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have [measurable]: \"K n \\<in> sets M\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. K n \\<in> sets M", "unfolding K_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M.\n     \\<bar>f x\\<bar> \\<in> {a * L * m n<..<a * L * m (Suc n)}}\n    \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  K ?n12 \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have *: \"m n \\<le> m p\" if \"n \\<le> p\" for n p"], ["proof (prove)\ngoal (1 subgoal):\n 1. m n \\<le> m p", "unfolding m_def K_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B i |i. i \\<le> n} \\<le> Max {B i |i. i \\<le> p}", "using that"], ["proof (prove)\nusing this:\n  n \\<le> p\n\ngoal (1 subgoal):\n 1. Max {B i |i. i \\<le> n} \\<le> Max {B i |i. i \\<le> p}", "by (auto intro!: Max_mono)"], ["proof (state)\nthis:\n  ?n12 \\<le> ?p12 \\<Longrightarrow> m ?n12 \\<le> m ?p12\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have \"K n \\<inter> K p = {}\" if \"n < p\" for n p"], ["proof (prove)\ngoal (1 subgoal):\n 1. K n \\<inter> K p = {}", "proof (auto simp add: K_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space M; a * L * m n < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc n); a * L * m p < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc p)\\<rbrakk>\n       \\<Longrightarrow> False", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space M; a * L * m n < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc n); a * L * m p < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc p)\\<rbrakk>\n       \\<Longrightarrow> False", "assume \"\\<bar>f x\\<bar> < a * L * m (Suc n)\" \"a * L * m p < \\<bar>f x\\<bar>\""], ["proof (state)\nthis:\n  \\<bar>f x\\<bar> < a * L * m (Suc n)\n  a * L * m p < \\<bar>f x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space M; a * L * m n < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc n); a * L * m p < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc p)\\<rbrakk>\n       \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  \\<bar>f x\\<bar> < a * L * m (Suc n)\n  a * L * m p < \\<bar>f x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space M; a * L * m n < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc n); a * L * m p < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc p)\\<rbrakk>\n       \\<Longrightarrow> False", "have \"a * L * m (Suc n) \\<le> a * L * m p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * L * m (Suc n) \\<le> a * L * m p", "using *[of \"Suc n\" p] that \\<open>a > 0\\<close> \\<open>L > 3\\<close>"], ["proof (prove)\nusing this:\n  Suc n \\<le> p \\<Longrightarrow> m (Suc n) \\<le> m p\n  n < p\n  0 < a\n  3 < L\n\ngoal (1 subgoal):\n 1. a * L * m (Suc n) \\<le> a * L * m p", "by auto"], ["proof (state)\nthis:\n  a * L * m (Suc n) \\<le> a * L * m p\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> space M; a * L * m n < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc n); a * L * m p < \\<bar>f x\\<bar>;\n        \\<bar>f x\\<bar> < a * L * m (Suc p)\\<rbrakk>\n       \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>f x\\<bar> < a * L * m (Suc n)\n  a * L * m p < \\<bar>f x\\<bar>\n  a * L * m (Suc n) \\<le> a * L * m p", "show False"], ["proof (prove)\nusing this:\n  \\<bar>f x\\<bar> < a * L * m (Suc n)\n  a * L * m p < \\<bar>f x\\<bar>\n  a * L * m (Suc n) \\<le> a * L * m p\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n12 < ?p12 \\<Longrightarrow> K ?n12 \\<inter> K ?p12 = {}\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "then"], ["proof (chain)\npicking this:\n  ?n12 < ?p12 \\<Longrightarrow> K ?n12 \\<inter> K ?p12 = {}", "have \"disjoint_family K\""], ["proof (prove)\nusing this:\n  ?n12 < ?p12 \\<Longrightarrow> K ?n12 \\<inter> K ?p12 = {}\n\ngoal (1 subgoal):\n 1. disjoint_family K", "unfolding disjoint_family_on_def"], ["proof (prove)\nusing this:\n  ?n12 < ?p12 \\<Longrightarrow> K ?n12 \\<inter> K ?p12 = {}\n\ngoal (1 subgoal):\n 1. \\<forall>m\\<in>UNIV.\n       \\<forall>n\\<in>UNIV.\n          m \\<noteq> n \\<longrightarrow> K m \\<inter> K n = {}", "using nat_neq_iff"], ["proof (prove)\nusing this:\n  ?n12 < ?p12 \\<Longrightarrow> K ?n12 \\<inter> K ?p12 = {}\n  (?m \\<noteq> ?n) = (?m < ?n \\<or> ?n < ?m)\n\ngoal (1 subgoal):\n 1. \\<forall>m\\<in>UNIV.\n       \\<forall>n\\<in>UNIV.\n          m \\<noteq> n \\<longrightarrow> K m \\<inter> K n = {}", "by auto"], ["proof (state)\nthis:\n  disjoint_family K\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have \"\\<exists>A0. lower_asymptotic_density A0 = 1 \\<and>\n            (\\<lambda>n. measure P (space M \\<inter> (T^^n)-`(K n)) * indicator A0 n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A0.\n       lower_asymptotic_density A0 = 1 \\<and>\n       (\\<lambda>n.\n           PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n)\n       \\<longlonglongrightarrow> 0", "apply (rule disjoint_sets_measure_density_one_tendsto_zero)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n. K n \\<in> sets M\n 2. disjoint_family K\n 3. absolutely_continuous M P\n 4. PS.events = sets M\n 5. emeasure P (space M) \\<noteq> \\<infinity>", "apply fact+"], ["proof (prove)\ngoal (3 subgoals):\n 1. absolutely_continuous M P\n 2. PS.events = sets M\n 3. emeasure P (space M) \\<noteq> \\<infinity>", "using PabsM"], ["proof (prove)\nusing this:\n  absolutely_continuous M P\n\ngoal (3 subgoals):\n 1. absolutely_continuous M P\n 2. PS.events = sets M\n 3. emeasure P (space M) \\<noteq> \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<exists>A0.\n     lower_asymptotic_density A0 = 1 \\<and>\n     (\\<lambda>n.\n         PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n)\n     \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "then"], ["proof (chain)\npicking this:\n  \\<exists>A0.\n     lower_asymptotic_density A0 = 1 \\<and>\n     (\\<lambda>n.\n         PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n)\n     \\<longlonglongrightarrow> 0", "obtain A0 where A0: \"lower_asymptotic_density A0 = 1\" \"(\\<lambda>n. measure P (space M \\<inter> (T^^n)-`(K n)) * indicator A0 n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  \\<exists>A0.\n     lower_asymptotic_density A0 = 1 \\<and>\n     (\\<lambda>n.\n         PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n)\n     \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>A0.\n        \\<lbrakk>lower_asymptotic_density A0 = 1;\n         (\\<lambda>n.\n             PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n)\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  lower_asymptotic_density A0 = 1\n  (\\<lambda>n.\n      PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "obtain N0 where N0: \"\\<And>n. n \\<ge> N0 \\<Longrightarrow> measure P (space M \\<inter> (T^^n)-`(K n)) * indicator A0 n < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N0.\n        (\\<And>n.\n            N0 \\<le> n \\<Longrightarrow>\n            PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n\n            < alpha) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using order_tendstoD(2)[OF A0(2) \\<open>alpha > 0\\<close>]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in sequentially.\n     PS.prob (space M \\<inter> (T ^^ x) -` K x) * indicat_real A0 x < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N0.\n        (\\<And>n.\n            N0 \\<le> n \\<Longrightarrow>\n            PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n\n            < alpha) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n\n        < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N0.\n        (\\<And>n.\n            N0 \\<le> n \\<Longrightarrow>\n            PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n\n            < alpha) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N0 \\<le> ?n12 \\<Longrightarrow>\n  PS.prob (space M \\<inter> (T ^^ ?n12) -` K ?n12) * indicat_real A0 ?n12\n  < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have A: \"eventually (\\<lambda>n. measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) > 2 * a} > 3 * alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       3 * alpha\n       < Sigma_Algebra.measure\n          (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n          {x. 2 * a < \\<bar>x\\<bar>}", "apply (rule open_set_weak_conv_lsc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n     Z\n 4. open {x. 2 * a < \\<bar>x\\<bar>}\n 5. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}", "by (auto simp add: PZ.real_distribution_axioms conv assms)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n        {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have B: \"eventually (\\<lambda>n. measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) \\<ge> (L- 1) * a} < alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Sigma_Algebra.measure\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n        {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n       < alpha", "apply (rule closed_set_weak_conv_usc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n.\n         distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n     Z\n 4. closed {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n 5. PZ.prob {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} < alpha", "by (auto simp add: PZ.real_distribution_axioms conv assms)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Sigma_Algebra.measure\n      (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n      {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n     < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) > 2 * a} > 3 * alpha\"\n                    \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n)) {x. abs (x) \\<ge> (L-1) * a} < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr P borel\n                         (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n                       {x. 2 * a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n             {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using eventually_conj[OF A B]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr P borel (\\<lambda>xa. (g xa + birkhoff_sum f x xa) / B x))\n        {x. 2 * a < \\<bar>x\\<bar>} \\<and>\n     Sigma_Algebra.measure\n      (distr P borel (\\<lambda>xa. (g xa + birkhoff_sum f x xa) / B x))\n      {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n     < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr P borel\n                         (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n                       {x. 2 * a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n             {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        3 * alpha\n        < Sigma_Algebra.measure\n           (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n           {x. 2 * a < \\<bar>x\\<bar>} \\<and>\n        Sigma_Algebra.measure\n         (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n         {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n        < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr P borel\n                         (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n                       {x. 2 * a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n             {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow>\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr P borel (\\<lambda>x. (g x + birkhoff_sum f ?n12 x) / B ?n12))\n     {x. 2 * a < \\<bar>x\\<bar>}\n  N \\<le> ?n12 \\<Longrightarrow>\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f ?n12 x) / B ?n12))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have I: \"PS.prob {x \\<in> space M. abs((g x + birkhoff_sum f n x) / B n) < (L-1) * a} > 1 - alpha\" if \"n \\<ge> N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "let ?h = \"(\\<lambda>x. (g x + birkhoff_sum f n x) / B n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "have \"measure (distr P borel ?h) {x. abs (x) \\<ge> (L-1) * a}\n              = measure P (?h-` {x. abs (x) \\<ge> (L-1) * a} \\<inter> space P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n     {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} =\n    PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f n x) / B n) -`\n      {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} \\<inter>\n      space P)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f n x) / B n) -`\n    {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f n x) / B n) -`\n    {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "have \"... = measure P {x \\<in> space M. abs(?h x) \\<ge> (L-1) * a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f n x) / B n) -`\n      {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} \\<inter>\n      space P) =\n    PS.prob\n     {x \\<in> space M.\n      (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}", "by (rule HOL.cong[of \"measure P\"], auto)"], ["proof (state)\nthis:\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f n x) / B n) -`\n    {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} \\<inter>\n    space P) =\n  PS.prob\n   {x \\<in> space M.\n    (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}", "have A: \"PS.prob {x \\<in> space M. abs(?h x) \\<ge> (L-1) * a} < alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n    < alpha", "using N(2)[OF that]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n  Sigma_Algebra.measure\n   (distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   {x. (L - 1) * a \\<le> \\<bar>x\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n    < alpha", "by auto"], ["proof (state)\nthis:\n  PS.prob\n   {x \\<in> space M.\n    (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "have *: \"{x \\<in> space M. abs(?h x) < (L-1) * a} = space M - {x \\<in> space M. abs(?h x) \\<ge> (L-1) * a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M.\n     \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} =\n    space M -\n    {x \\<in> space M.\n     (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> space M.\n   \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} =\n  space M -\n  {x \\<in> space M.\n   (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       (space M -\n        {x \\<in> space M.\n         (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>})", "using A PS.prob_compl"], ["proof (prove)\nusing this:\n  PS.prob\n   {x \\<in> space M.\n    (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>}\n  < alpha\n  ?A \\<in> PS.events \\<Longrightarrow>\n  PS.prob (space P - ?A) = 1 - PS.prob ?A\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < PS.prob\n       (space M -\n        {x \\<in> space M.\n         (L - 1) * a \\<le> \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>})", "by auto"], ["proof (state)\nthis:\n  1 - alpha\n  < PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow>\n  1 - alpha\n  < PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f ?n12 x) / B ?n12\\<bar> < (L - 1) * a}\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have Main: \"PS.prob (space M \\<inter> (T^^n)-`(K n)) > alpha\" if \"n \\<ge> N\" \"B (Suc n) > L * m n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"Suc n \\<ge> N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N \\<le> Suc n", "using that"], ["proof (prove)\nusing this:\n  N \\<le> n\n  L * m n < B (Suc n)\n\ngoal (1 subgoal):\n 1. N \\<le> Suc n", "by auto"], ["proof (state)\nthis:\n  N \\<le> Suc n\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "let ?h = \"(\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n))\""], ["proof (state)\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"measure (distr P borel ?h) {x. abs (x) > 2 * a}\n              = measure P (?h-` {x. abs (x) > 2 * a} \\<inter> space P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr P borel\n       (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n     {x. 2 * a < \\<bar>x\\<bar>} =\n    PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n      {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n      space P)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n    {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n    {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n    space P)\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"... = measure P {x \\<in> space M. abs(?h x) > 2 * a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n      {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n      space P) =\n    PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "by (rule HOL.cong[of \"measure P\"], auto)"], ["proof (state)\nthis:\n  PS.prob\n   ((\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)) -`\n    {x. 2 * a < \\<bar>x\\<bar>} \\<inter>\n    space P) =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "have A: \"PS.prob {x \\<in> space M. abs(?h x) > 2 * a} > 3 * alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < PS.prob\n       {x \\<in> space M.\n        2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "using N(1)[OF \\<open>Suc n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr P borel\n     (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n   {x. 2 * a < \\<bar>x\\<bar>} =\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr P borel\n       (\\<lambda>x. (g x + birkhoff_sum f (Suc n) x) / B (Suc n)))\n     {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < PS.prob\n       {x \\<in> space M.\n        2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha\n  < PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "define X where \"X = {x \\<in> space M. abs((g x + birkhoff_sum f n x) / B n) < (L-1) * a}\n                          \\<inter> {x \\<in> space M. abs((g x + birkhoff_sum f (Suc n) x) / B (Suc n)) < (L-1) * a}\n                          \\<inter> {x \\<in> space M. abs((g x + birkhoff_sum f (Suc n) x) / B (Suc n)) > 2 * a}\""], ["proof (state)\nthis:\n  X =\n  {x \\<in> space M.\n   \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} \\<inter>\n  {x \\<in> space M.\n   \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n   < (L - 1) * a} \\<inter>\n  {x \\<in> space M.\n   2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"(1 - alpha) + (1 - alpha) + 3 * alpha <\n            PS.prob {x \\<in> space M. abs((g x + birkhoff_sum f n x) / B n) < (L-1) * a}\n          + PS.prob {x \\<in> space M. abs((g x + birkhoff_sum f (Suc n) x) / B (Suc n)) < (L-1) * a}\n          + PS.prob {x \\<in> space M. abs((g x + birkhoff_sum f (Suc n) x) / B (Suc n)) > 2 * a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha + (1 - alpha) + 3 * alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n      PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n        < (L - 1) * a} +\n      PS.prob\n       {x \\<in> space M.\n        2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "using A I[OF \\<open>n \\<ge> N\\<close>] I[OF \\<open>Suc n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  3 * alpha\n  < PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  1 - alpha\n  < PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a}\n  1 - alpha\n  < PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n      < (L - 1) * a}\n\ngoal (1 subgoal):\n 1. 1 - alpha + (1 - alpha) + 3 * alpha\n    < PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n      PS.prob\n       {x \\<in> space M.\n        \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n        < (L - 1) * a} +\n      PS.prob\n       {x \\<in> space M.\n        2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}", "by auto"], ["proof (state)\nthis:\n  1 - alpha + (1 - alpha) + 3 * alpha\n  < PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n      < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "also"], ["proof (state)\nthis:\n  1 - alpha + (1 - alpha) + 3 * alpha\n  < PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n      < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"... \\<le> 2 + PS.prob X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n      < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n    \\<le> 2 + PS.prob X", "unfolding X_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n      < (L - 1) * a} +\n    PS.prob\n     {x \\<in> space M.\n      2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n    \\<le> 2 +\n          PS.prob\n           ({x \\<in> space M.\n             \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n             < (L - 1) * a} \\<inter>\n            {x \\<in> space M.\n             \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n             < (L - 1) * a} \\<inter>\n            {x \\<in> space M.\n             2 * a\n             < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>})", "by (rule PS.sum_measure_le_measure_inter3, auto)"], ["proof (state)\nthis:\n  PS.prob\n   {x \\<in> space M.\n    \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar> < (L - 1) * a} +\n  PS.prob\n   {x \\<in> space M.\n    \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n    < (L - 1) * a} +\n  PS.prob\n   {x \\<in> space M.\n    2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  \\<le> 2 + PS.prob X\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "finally"], ["proof (chain)\npicking this:\n  1 - alpha + (1 - alpha) + 3 * alpha < 2 + PS.prob X", "have \"PS.prob X > alpha\""], ["proof (prove)\nusing this:\n  1 - alpha + (1 - alpha) + 3 * alpha < 2 + PS.prob X\n\ngoal (1 subgoal):\n 1. alpha < PS.prob X", "by auto"], ["proof (state)\nthis:\n  alpha < PS.prob X\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"X \\<subseteq> space M \\<inter> (T^^n)-`(K n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X \\<subseteq> space M \\<inter> (T ^^ n) -` K n", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have *: \"B i \\<le> m n\" if \"i \\<le> n\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. B i \\<le> m n", "unfolding m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B i \\<le> Max {B i |i. i \\<le> n}", "by (rule Max_ge, auto simp add: that)"], ["proof (state)\nthis:\n  ?i12 \\<le> n \\<Longrightarrow> B ?i12 \\<le> m n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have **: \"B i \\<le> B (Suc n)\" if \"i \\<le> Suc n\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. B i \\<le> B (Suc n)", "proof (cases \"i \\<le> n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)\n 2. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "case True"], ["proof (state)\nthis:\n  i \\<le> n\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)\n 2. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "have \"m n \\<le> B (Suc n) / L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m n \\<le> B (Suc n) / L", "using \\<open>L * m n < B (Suc n)\\<close> \\<open>L > 3\\<close>"], ["proof (prove)\nusing this:\n  L * m n < B (Suc n)\n  3 < L\n\ngoal (1 subgoal):\n 1. m n \\<le> B (Suc n) / L", "by (simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  m n \\<le> B (Suc n) / L\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)\n 2. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "also"], ["proof (state)\nthis:\n  m n \\<le> B (Suc n) / L\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)\n 2. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "have \"... \\<le> B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) / L \\<le> B (Suc n)", "using Bpos[of \"Suc n\"] \\<open>L > 3\\<close>"], ["proof (prove)\nusing this:\n  0 < B (Suc n)\n  3 < L\n\ngoal (1 subgoal):\n 1. B (Suc n) / L \\<le> B (Suc n)", "by (simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  B (Suc n) / L \\<le> B (Suc n)\n\ngoal (2 subgoals):\n 1. i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)\n 2. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "finally"], ["proof (chain)\npicking this:\n  m n \\<le> B (Suc n)", "show ?thesis"], ["proof (prove)\nusing this:\n  m n \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. B i \\<le> B (Suc n)", "using *[OF True]"], ["proof (prove)\nusing this:\n  m n \\<le> B (Suc n)\n  B i \\<le> m n\n\ngoal (1 subgoal):\n 1. B i \\<le> B (Suc n)", "by simp"], ["proof (state)\nthis:\n  B i \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "case False"], ["proof (state)\nthis:\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. \\<not> i \\<le> n \\<Longrightarrow> B i \\<le> B (Suc n)", "then"], ["proof (chain)\npicking this:\n  \\<not> i \\<le> n", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. B i \\<le> B (Suc n)", "using \\<open>i \\<le> Suc n\\<close> le_SucE"], ["proof (prove)\nusing this:\n  \\<not> i \\<le> n\n  i \\<le> Suc n\n  \\<lbrakk>?m \\<le> Suc ?n; ?m \\<le> ?n \\<Longrightarrow> ?R;\n   ?m = Suc ?n \\<Longrightarrow> ?R\\<rbrakk>\n  \\<Longrightarrow> ?R\n\ngoal (1 subgoal):\n 1. B i \\<le> B (Suc n)", "by blast"], ["proof (state)\nthis:\n  B i \\<le> B (Suc n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?i12 \\<le> Suc n \\<Longrightarrow> B ?i12 \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"m (Suc n) = B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m (Suc n) = B (Suc n)", "unfolding m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B i |i. i \\<le> Suc n} = B (Suc n)", "by (rule Max_eqI, auto simp add: **)"], ["proof (state)\nthis:\n  m (Suc n) = B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "assume \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "then"], ["proof (chain)\npicking this:\n  x \\<in> X", "have \"abs (g x + birkhoff_sum f n x) < (L-1) * a * B n\""], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f n x\\<bar> < (L - 1) * a * B n", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f n x\\<bar> < (L - 1) * a * B n", "using Bpos[of n]"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  0 < B n\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f n x\\<bar> < (L - 1) * a * B n", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < (L - 1) * a * B n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < (L - 1) * a * B n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... \\<le> L * a * m n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (L - 1) * a * B n \\<le> L * a * m n", "using *[of n] \\<open>L > 3\\<close> \\<open>a > 0\\<close> Bpos[of n]"], ["proof (prove)\nusing this:\n  n \\<le> n \\<Longrightarrow> B n \\<le> m n\n  3 < L\n  0 < a\n  0 < B n\n\ngoal (1 subgoal):\n 1. (L - 1) * a * B n \\<le> L * a * m n", "by (auto intro!: mult_mono)"], ["proof (state)\nthis:\n  (L - 1) * a * B n \\<le> L * a * m n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  (L - 1) * a * B n \\<le> L * a * m n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... \\<le> a * B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L * a * m n \\<le> a * B (Suc n)", "using \\<open>B (Suc n) > L * m n\\<close> less_imp_le \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  L * m n < B (Suc n)\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n  0 < a\n\ngoal (1 subgoal):\n 1. L * a * m n \\<le> a * B (Suc n)", "by auto"], ["proof (state)\nthis:\n  L * a * m n \\<le> a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "finally"], ["proof (chain)\npicking this:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < a * B (Suc n)", "have A: \"abs (g x + birkhoff_sum f n x) < a * B (Suc n)\""], ["proof (prove)\nusing this:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f n x\\<bar> < a * B (Suc n)", "by simp"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have B: \"abs(g x + birkhoff_sum f (Suc n) x) < (L-1) * a * B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> < (L - 1) * a * B (Suc n)", "using \\<open>x \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> < (L - 1) * a * B (Suc n)", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> < (L - 1) * a * B (Suc n)", "using Bpos[of \"Suc n\"]"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  0 < B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> < (L - 1) * a * B (Suc n)", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> < (L - 1) * a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have *: \"f((T^^n) x) = (g x + birkhoff_sum f (Suc n) x) - (g x + birkhoff_sum f n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f ((T ^^ n) x) =\n    g x + birkhoff_sum f (Suc n) x - (g x + birkhoff_sum f n x)", "apply (auto simp add: algebra_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. birkhoff_sum f n x + f ((T ^^ n) x) = birkhoff_sum f (Suc n) x", "by (metis add.commute birkhoff_sum_1(2) birkhoff_sum_cocycle plus_1_eq_Suc)"], ["proof (state)\nthis:\n  f ((T ^^ n) x) =\n  g x + birkhoff_sum f (Suc n) x - (g x + birkhoff_sum f n x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"abs(f((T^^n) x)) \\<le> abs (g x + birkhoff_sum f (Suc n) x) + abs(g x + birkhoff_sum f n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f ((T ^^ n) x)\\<bar>\n    \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n          \\<bar>g x + birkhoff_sum f n x\\<bar>", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x - (g x + birkhoff_sum f n x)\\<bar>\n    \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n          \\<bar>g x + birkhoff_sum f n x\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>f ((T ^^ n) x)\\<bar>\n  \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n        \\<bar>g x + birkhoff_sum f n x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  \\<bar>f ((T ^^ n) x)\\<bar>\n  \\<le> \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n        \\<bar>g x + birkhoff_sum f n x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... < (L-1) * a * B (Suc n) + a * B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n    \\<bar>g x + birkhoff_sum f n x\\<bar>\n    < (L - 1) * a * B (Suc n) + a * B (Suc n)", "using A B"], ["proof (prove)\nusing this:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < a * B (Suc n)\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> < (L - 1) * a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n    \\<bar>g x + birkhoff_sum f n x\\<bar>\n    < (L - 1) * a * B (Suc n) + a * B (Suc n)", "by auto"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n  \\<bar>g x + birkhoff_sum f n x\\<bar>\n  < (L - 1) * a * B (Suc n) + a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> +\n  \\<bar>g x + birkhoff_sum f n x\\<bar>\n  < (L - 1) * a * B (Suc n) + a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... = L * a * m (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (L - 1) * a * B (Suc n) + a * B (Suc n) = L * a * m (Suc n)", "using \\<open>m (Suc n) = B (Suc n)\\<close>"], ["proof (prove)\nusing this:\n  m (Suc n) = B (Suc n)\n\ngoal (1 subgoal):\n 1. (L - 1) * a * B (Suc n) + a * B (Suc n) = L * a * m (Suc n)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (L - 1) * a * B (Suc n) + a * B (Suc n) = L * a * m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "finally"], ["proof (chain)\npicking this:\n  \\<bar>f ((T ^^ n) x)\\<bar> < L * a * m (Suc n)", "have Z1: \"abs(f((T^^n) x)) < L * a * m (Suc n)\""], ["proof (prove)\nusing this:\n  \\<bar>f ((T ^^ n) x)\\<bar> < L * a * m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>f ((T ^^ n) x)\\<bar> < L * a * m (Suc n)", "by simp"], ["proof (state)\nthis:\n  \\<bar>f ((T ^^ n) x)\\<bar> < L * a * m (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"2 * a * B (Suc n) < abs (g x + birkhoff_sum f (Suc n) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) < \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "using \\<open>x \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) < \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) < \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "using Bpos[of \"Suc n\"]"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n  0 < B (Suc n)\n\ngoal (1 subgoal):\n 1. 2 * a * B (Suc n) < \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  2 * a * B (Suc n) < \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  2 * a * B (Suc n) < \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... = abs(f((T^^n) x) + (g x + birkhoff_sum f n x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n    \\<bar>f ((T ^^ n) x) + (g x + birkhoff_sum f n x)\\<bar>", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n    \\<bar>g x + birkhoff_sum f (Suc n) x - (g x + birkhoff_sum f n x) +\n          (g x + birkhoff_sum f n x)\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n  \\<bar>f ((T ^^ n) x) + (g x + birkhoff_sum f n x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  \\<bar>g x + birkhoff_sum f (Suc n) x\\<bar> =\n  \\<bar>f ((T ^^ n) x) + (g x + birkhoff_sum f n x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... \\<le> abs(f((T^^n) x)) + abs (g x + birkhoff_sum f n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f ((T ^^ n) x) + (g x + birkhoff_sum f n x)\\<bar>\n    \\<le> \\<bar>f ((T ^^ n) x)\\<bar> + \\<bar>g x + birkhoff_sum f n x\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>f ((T ^^ n) x) + (g x + birkhoff_sum f n x)\\<bar>\n  \\<le> \\<bar>f ((T ^^ n) x)\\<bar> + \\<bar>g x + birkhoff_sum f n x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "also"], ["proof (state)\nthis:\n  \\<bar>f ((T ^^ n) x) + (g x + birkhoff_sum f n x)\\<bar>\n  \\<le> \\<bar>f ((T ^^ n) x)\\<bar> + \\<bar>g x + birkhoff_sum f n x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "have \"... < abs(f((T^^n) x)) + a * B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f ((T ^^ n) x)\\<bar> + \\<bar>g x + birkhoff_sum f n x\\<bar>\n    < \\<bar>f ((T ^^ n) x)\\<bar> + a * B (Suc n)", "using A"], ["proof (prove)\nusing this:\n  \\<bar>g x + birkhoff_sum f n x\\<bar> < a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>f ((T ^^ n) x)\\<bar> + \\<bar>g x + birkhoff_sum f n x\\<bar>\n    < \\<bar>f ((T ^^ n) x)\\<bar> + a * B (Suc n)", "by auto"], ["proof (state)\nthis:\n  \\<bar>f ((T ^^ n) x)\\<bar> + \\<bar>g x + birkhoff_sum f n x\\<bar>\n  < \\<bar>f ((T ^^ n) x)\\<bar> + a * B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "finally"], ["proof (chain)\npicking this:\n  2 * a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar> + a * B (Suc n)", "have \"abs(f((T^^n) x)) > a * B (Suc n)\""], ["proof (prove)\nusing this:\n  2 * a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar> + a * B (Suc n)\n\ngoal (1 subgoal):\n 1. a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar>", "by simp"], ["proof (state)\nthis:\n  a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "then"], ["proof (chain)\npicking this:\n  a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar>", "have Z2: \"abs(f((T^^n) x)) > a * L * m n\""], ["proof (prove)\nusing this:\n  a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. a * L * m n < \\<bar>f ((T ^^ n) x)\\<bar>", "using mult_strict_left_mono[OF \\<open>B (Suc n) > L * m n\\<close> \\<open>a > 0\\<close>]"], ["proof (prove)\nusing this:\n  a * B (Suc n) < \\<bar>f ((T ^^ n) x)\\<bar>\n  a * (L * m n) < a * B (Suc n)\n\ngoal (1 subgoal):\n 1. a * L * m n < \\<bar>f ((T ^^ n) x)\\<bar>", "by auto"], ["proof (state)\nthis:\n  a * L * m n < \\<bar>f ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> space M \\<inter> (T ^^ n) -` K n", "show \"x \\<in> space M \\<inter> (T ^^ n) -` K n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> space M \\<inter> (T ^^ n) -` K n", "using Z1 Z2 \\<open>x \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>f ((T ^^ n) x)\\<bar> < L * a * m (Suc n)\n  a * L * m n < \\<bar>f ((T ^^ n) x)\\<bar>\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x \\<in> space M \\<inter> (T ^^ n) -` K n", "unfolding K_def X_def"], ["proof (prove)\nusing this:\n  \\<bar>f ((T ^^ n) x)\\<bar> < L * a * m (Suc n)\n  a * L * m n < \\<bar>f ((T ^^ n) x)\\<bar>\n  x \\<in> {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f n x) / B n\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>\n           < (L - 1) * a} \\<inter>\n          {x \\<in> space M.\n           2 * a < \\<bar>(g x + birkhoff_sum f (Suc n) x) / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. x \\<in> space M \\<inter>\n            (T ^^ n) -`\n            {x \\<in> space M.\n             \\<bar>f x\\<bar> \\<in> {a * L * m n<..<a * L * m (Suc n)}}", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  x \\<in> space M \\<inter> (T ^^ n) -` K n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  X \\<subseteq> space M \\<inter> (T ^^ n) -` K n\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "have \"PS.prob X \\<le> PS.prob (space M \\<inter> (T^^n)-`(K n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob X \\<le> PS.prob (space M \\<inter> (T ^^ n) -` K n)", "by (rule PS.finite_measure_mono, fact, auto)"], ["proof (state)\nthis:\n  PS.prob X \\<le> PS.prob (space M \\<inter> (T ^^ n) -` K n)\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "then"], ["proof (chain)\npicking this:\n  PS.prob X \\<le> PS.prob (space M \\<inter> (T ^^ n) -` K n)", "show \"alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)\""], ["proof (prove)\nusing this:\n  PS.prob X \\<le> PS.prob (space M \\<inter> (T ^^ n) -` K n)\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "using \\<open>alpha < PS.prob X\\<close>"], ["proof (prove)\nusing this:\n  PS.prob X \\<le> PS.prob (space M \\<inter> (T ^^ n) -` K n)\n  alpha < PS.prob X\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "by simp"], ["proof (state)\nthis:\n  alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?n12; L * m ?n12 < B (Suc ?n12)\\<rbrakk>\n  \\<Longrightarrow> alpha < PS.prob (space M \\<inter> (T ^^ ?n12) -` K ?n12)\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "define A where \"A = A0 \\<inter> {N + N0..}\""], ["proof (state)\nthis:\n  A = A0 \\<inter> {N + N0..}\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have \"lower_asymptotic_density A = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1", "unfolding A_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density (A0 \\<inter> {N + N0..}) = 1", "by (rule lower_asymptotic_density_one_intersection, fact, simp)"], ["proof (state)\nthis:\n  lower_asymptotic_density A = 1\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "moreover"], ["proof (state)\nthis:\n  lower_asymptotic_density A = 1\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "have \"B (Suc n) \\<le> L * m n\" if \"n \\<in> A\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> L * m n", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "assume \"\\<not>(B (Suc n) \\<le> L * m n)\""], ["proof (state)\nthis:\n  \\<not> B (Suc n) \\<le> L * m n\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  \\<not> B (Suc n) \\<le> L * m n", "have \"L * m n < B (Suc n)\" \"n \\<ge> N\" \"n \\<ge> N0\""], ["proof (prove)\nusing this:\n  \\<not> B (Suc n) \\<le> L * m n\n\ngoal (1 subgoal):\n 1. L * m n < B (Suc n) &&& N \\<le> n &&& N0 \\<le> n", "using \\<open>n \\<in> A\\<close>"], ["proof (prove)\nusing this:\n  \\<not> B (Suc n) \\<le> L * m n\n  n \\<in> A\n\ngoal (1 subgoal):\n 1. L * m n < B (Suc n) &&& N \\<le> n &&& N0 \\<le> n", "unfolding A_def"], ["proof (prove)\nusing this:\n  \\<not> B (Suc n) \\<le> L * m n\n  n \\<in> A0 \\<inter> {N + N0..}\n\ngoal (1 subgoal):\n 1. L * m n < B (Suc n) &&& N \\<le> n &&& N0 \\<le> n", "by auto"], ["proof (state)\nthis:\n  L * m n < B (Suc n)\n  N \\<le> n\n  N0 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  L * m n < B (Suc n)\n  N \\<le> n\n  N0 \\<le> n", "have \"PS.prob (space M \\<inter> (T^^n)-`(K n)) > alpha\""], ["proof (prove)\nusing this:\n  L * m n < B (Suc n)\n  N \\<le> n\n  N0 \\<le> n\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "using Main"], ["proof (prove)\nusing this:\n  L * m n < B (Suc n)\n  N \\<le> n\n  N0 \\<le> n\n  \\<lbrakk>N \\<le> ?n12; L * m ?n12 < B (Suc ?n12)\\<rbrakk>\n  \\<Longrightarrow> alpha < PS.prob (space M \\<inter> (T ^^ ?n12) -` K ?n12)\n\ngoal (1 subgoal):\n 1. alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)", "by auto"], ["proof (state)\nthis:\n  alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "have \"PS.prob (space M \\<inter> (T^^n)-`(K n)) * indicator A0 n < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha", "using N0[OF \\<open>n \\<ge> N0\\<close>]"], ["proof (prove)\nusing this:\n  PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha\n\ngoal (1 subgoal):\n 1. PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha", "by simp"], ["proof (state)\nthis:\n  PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "have \"indicator A0 n = (1::real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indicat_real A0 n = 1", "using \\<open>n \\<in> A\\<close>"], ["proof (prove)\nusing this:\n  n \\<in> A\n\ngoal (1 subgoal):\n 1. indicat_real A0 n = 1", "unfolding A_def indicator_def"], ["proof (prove)\nusing this:\n  n \\<in> A0 \\<inter> {N + N0..}\n\ngoal (1 subgoal):\n 1. (if n \\<in> A0 then 1 else 0) = 1", "by auto"], ["proof (state)\nthis:\n  indicat_real A0 n = 1\n\ngoal (1 subgoal):\n 1. \\<not> B (Suc n) \\<le> L * m n \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)\n  PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha\n  indicat_real A0 n = 1", "show False"], ["proof (prove)\nusing this:\n  alpha < PS.prob (space M \\<inter> (T ^^ n) -` K n)\n  PS.prob (space M \\<inter> (T ^^ n) -` K n) * indicat_real A0 n < alpha\n  indicat_real A0 n = 1\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n12 \\<in> A \\<Longrightarrow> B (Suc ?n12) \\<le> L * m ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "ultimately"], ["proof (chain)\npicking this:\n  lower_asymptotic_density A = 1\n  ?n12 \\<in> A \\<Longrightarrow> B (Suc ?n12) \\<le> L * m ?n12", "show ?thesis"], ["proof (prove)\nusing this:\n  lower_asymptotic_density A = 1\n  ?n12 \\<in> A \\<Longrightarrow> B (Suc ?n12) \\<le> L * m ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "unfolding m_def"], ["proof (prove)\nusing this:\n  lower_asymptotic_density A = 1\n  ?n12 \\<in> A \\<Longrightarrow>\n  B (Suc ?n12) \\<le> L * Max {B i |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})", "by blast"], ["proof (state)\nthis:\n  \\<exists>A.\n     lower_asymptotic_density A = 1 \\<and>\n     (\\<forall>n\\<in>A. B (Suc n) \\<le> L * Max {B i |i. i \\<le> n})\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Now, we combine the two previous statements to prove the main theorem.\\<close>"], ["", "theorem subexponential_growth:\n  \"(\\<lambda>n. max 0 (ln (B n) /n)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "obtain a0 where a0: \"a0 > 0\" \"PZ.prob {x. abs (x) > a0} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a0.\n        \\<lbrakk>0 < a0; 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.not_Dirac_0_imp_positive_mass_away_0[OF non_trivial]"], ["proof (prove)\nusing this:\n  \\<exists>a>0. 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. (\\<And>a0.\n        \\<lbrakk>0 < a0; 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "define a where \"a = a0/2\""], ["proof (state)\nthis:\n  a = a0 / 2\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have \"a > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < a", "using \\<open>a0 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < a0\n\ngoal (1 subgoal):\n 1. 0 < a", "unfolding a_def"], ["proof (prove)\nusing this:\n  0 < a0\n\ngoal (1 subgoal):\n 1. 0 < a0 / 2", "by auto"], ["proof (state)\nthis:\n  0 < a\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "define alpha where \"alpha = PZ.prob {x. abs (x) > a0}/4\""], ["proof (state)\nthis:\n  alpha = PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have \"alpha > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < alpha", "unfolding alpha_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4", "using a0"], ["proof (prove)\nusing this:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4", "by auto"], ["proof (state)\nthis:\n  0 < alpha\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have \"PZ.prob {x. abs (x) > 2 * a} > 3 * alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}", "using a0"], ["proof (prove)\nusing this:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}", "unfolding a_def alpha_def"], ["proof (prove)\nusing this:\n  0 < a0\n  0 < PZ.prob {x. a0 < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * (PZ.prob {x. a0 < \\<bar>x\\<bar>} / 4)\n    < PZ.prob {x. 2 * (a0 / 2) < \\<bar>x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "obtain C0 where C0: \"PZ.prob {x. abs(x) \\<ge> C0} < alpha\" \"C0 \\<ge> 3 * a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha;\n         3 * a \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.random_variable_small_tails[OF \\<open>alpha > 0\\<close>, of \"\\<lambda>x. x\"]"], ["proof (prove)\nusing this:\n  PZ.random_variable borel (\\<lambda>x. x) \\<Longrightarrow>\n  \\<exists>C.\n     PZ.prob {x \\<in> space Z. C \\<le> \\<bar>x\\<bar>} < alpha \\<and>\n     ?K \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha;\n         3 * a \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha\n  3 * a \\<le> C0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "define L where \"L = C0/a + 1\""], ["proof (state)\nthis:\n  L = C0 / a + 1\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have \"PZ.prob {x. abs(x) \\<ge> (L-1) * a} < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PZ.prob {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} < alpha", "unfolding L_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. PZ.prob {x. (C0 / a + 1 - 1) * a \\<le> \\<bar>x\\<bar>} < alpha", "using C0 \\<open>a>0\\<close>"], ["proof (prove)\nusing this:\n  PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha\n  3 * a \\<le> C0\n  0 < a\n\ngoal (1 subgoal):\n 1. PZ.prob {x. (C0 / a + 1 - 1) * a \\<le> \\<bar>x\\<bar>} < alpha", "by auto"], ["proof (state)\nthis:\n  PZ.prob {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} < alpha\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have \"L > 3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 < L", "unfolding L_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 < C0 / a + 1", "using C0 \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha\n  3 * a \\<le> C0\n  0 < a\n\ngoal (1 subgoal):\n 1. 3 < C0 / a + 1", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  3 < L\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "obtain C where C: \"\\<And>n. B (Suc n) \\<le> C * Max {B i|i. i \\<le> n}\" \"C \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C.\n        \\<lbrakk>\\<And>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n};\n         1 \\<le> C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using upper_bound_C"], ["proof (prove)\nusing this:\n  \\<exists>C\\<ge>1. \\<forall>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        \\<lbrakk>\\<And>n. B (Suc n) \\<le> C * Max {B i |i. i \\<le> n};\n         1 \\<le> C\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  B (Suc ?n12) \\<le> C * Max {B i |i. i \\<le> ?n12}\n  1 \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have C2: \"B n \\<le> C * Max {B i|i. i < n}\" if \"n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B n \\<le> C * Max {B i |i. i < n}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. B n \\<le> C * Max {B i |i. i < n}", "obtain m where m: \"n = Suc m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>m. n = Suc m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using \\<open>0 < n\\<close> gr0_implies_Suc"], ["proof (prove)\nusing this:\n  0 < n\n  0 < ?n \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>m. n = Suc m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  n = Suc m\n\ngoal (1 subgoal):\n 1. B n \\<le> C * Max {B i |i. i < n}", "have *: \"i \\<le> m \\<longleftrightarrow> i < Suc m\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. (i \\<le> m) = (i < Suc m)", "by auto"], ["proof (state)\nthis:\n  (?i12 \\<le> m) = (?i12 < Suc m)\n\ngoal (1 subgoal):\n 1. B n \\<le> C * Max {B i |i. i < n}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. B n \\<le> C * Max {B i |i. i < n}", "using C(1)[of m]"], ["proof (prove)\nusing this:\n  B (Suc m) \\<le> C * Max {B i |i. i \\<le> m}\n\ngoal (1 subgoal):\n 1. B n \\<le> C * Max {B i |i. i < n}", "unfolding m *"], ["proof (prove)\nusing this:\n  B (Suc m) \\<le> C * Max {B i |i. i < Suc m}\n\ngoal (1 subgoal):\n 1. B (Suc m) \\<le> C * Max {B i |i. i < Suc m}", "by auto"], ["proof (state)\nthis:\n  B n \\<le> C * Max {B i |i. i < n}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?n12 \\<Longrightarrow> B ?n12 \\<le> C * Max {B i |i. i < ?n12}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "have Mainj: \"eventually (\\<lambda>n. ln (B n) / n \\<le> (1+ln L)/j) sequentially\" if \"j > 0\" for j::nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have *: \"\\<exists>A. lower_asymptotic_density A = 1 \\<and> (\\<forall>n\\<in>A. B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A.\n           B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A.\n           B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "interpret Tj0: conservative M \"(T^^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. conservative M (T ^^ j)", "using conservative_power[of j]"], ["proof (prove)\nusing this:\n  conservative M (T ^^ j)\n\ngoal (1 subgoal):\n 1. conservative M (T ^^ j)", "by auto"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A.\n           B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "have *: \"g x + birkhoff_sum f k x + Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x = g x + birkhoff_sum f (j * n + k) x\" for x n"], ["proof (prove)\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "have \"birkhoff_sum f (j * n + k) x = (\\<Sum>i \\<in> {..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. birkhoff_sum f (j * n + k) x =\n    (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x))", "unfolding birkhoff_sum_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<j * n + k. f ((T ^^ i) x)) =\n    (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x))", "by (rule sum.cong, auto)"], ["proof (state)\nthis:\n  birkhoff_sum f (j * n + k) x =\n  (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "also"], ["proof (state)\nthis:\n  birkhoff_sum f (j * n + k) x =\n  (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "have \"... = (\\<Sum>i \\<in> {..<k}. f ((T ^^ i) x)) + (\\<Sum>i \\<in> {k..<j * n + k}. f ((T ^^ i) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x)) =\n    (\\<Sum>i<k. f ((T ^^ i) x)) + (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x))", "by (auto intro!: sum.union_disjoint)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x)) =\n  (\\<Sum>i<k. f ((T ^^ i) x)) + (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{..<k} \\<union> {k..<j * n + k}. f ((T ^^ i) x)) =\n  (\\<Sum>i<k. f ((T ^^ i) x)) + (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x))\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "have \"... = birkhoff_sum f k x + (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s)) ((T^^k) x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<k. f ((T ^^ i) x)) +\n    (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x)) =\n    birkhoff_sum f k x +\n    (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s)) ((T ^^ k) x)))", "apply (subst sum_arith_progression)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<k. f ((T ^^ i) x)) +\n    (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x)) =\n    birkhoff_sum f k x + (\\<Sum>j<n * j. f ((T ^^ j) ((T ^^ k) x)))", "unfolding birkhoff_sum_def Tj0.birkhoff_sum_def funpow_mult funpow_add'[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<k. f ((T ^^ i) x)) +\n    (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x)) =\n    (\\<Sum>i<k. f ((T ^^ i) x)) + (\\<Sum>j<n * j. f ((T ^^ (j + k)) x))", "by (auto simp add: algebra_simps intro!: sum.reindex_bij_betw[symmetric] bij_betw_byWitness[of _ \"\\<lambda>a. a-k\"])"], ["proof (state)\nthis:\n  (\\<Sum>i<k. f ((T ^^ i) x)) + (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x)) =\n  birkhoff_sum f k x +\n  (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s)) ((T ^^ k) x)))\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "also"], ["proof (state)\nthis:\n  (\\<Sum>i<k. f ((T ^^ i) x)) + (\\<Sum>i = k..<j * n + k. f ((T ^^ i) x)) =\n  birkhoff_sum f k x +\n  (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s)) ((T ^^ k) x)))\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "have \"... = birkhoff_sum f k x + Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. birkhoff_sum f k x +\n    (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s)) ((T ^^ k) x))) =\n    birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x", "unfolding birkhoff_sum_def Tj0.birkhoff_sum_def funpow_mult funpow_add'[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<k. f ((T ^^ i) x)) +\n    (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s + k)) x)) =\n    (\\<Sum>i<k. f ((T ^^ i) x)) +\n    (\\<Sum>i<n. \\<Sum>ia<j. f ((T ^^ (ia + k + j * i)) x))", "by (auto simp add: algebra_simps intro!: sum.swap)"], ["proof (state)\nthis:\n  birkhoff_sum f k x +\n  (\\<Sum>s<j. \\<Sum>i<n. f ((T ^^ (i * j + s)) ((T ^^ k) x))) =\n  birkhoff_sum f k x +\n  Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "finally"], ["proof (chain)\npicking this:\n  birkhoff_sum f (j * n + k) x =\n  birkhoff_sum f k x +\n  Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x", "show ?thesis"], ["proof (prove)\nusing this:\n  birkhoff_sum f (j * n + k) x =\n  birkhoff_sum f k x +\n  Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x\n\ngoal (1 subgoal):\n 1. g x + birkhoff_sum f k x +\n    Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n    g x + birkhoff_sum f (j * n + k) x", "by simp"], ["proof (state)\nthis:\n  g x + birkhoff_sum f k x +\n  Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) n x =\n  g x + birkhoff_sum f (j * n + k) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  g ?x12 + birkhoff_sum f k ?x12 +\n  Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) ?n12 ?x12 =\n  g ?x12 + birkhoff_sum f (j * ?n12 + k) ?x12\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A.\n           B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "interpret Tj: conservative_limit \"T^^j\" M P Z \"\\<lambda>x. birkhoff_sum f j ((T^^k) x)\" \"\\<lambda>x. g x + birkhoff_sum f k x\" \"\\<lambda>n. B (j * n + k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. conservative_limit (T ^^ j) M P Z\n     (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x))\n     (\\<lambda>x. g x + birkhoff_sum f k x) (\\<lambda>n. B (j * n + k))", "apply standard"], ["proof (prove)\ngoal (7 subgoals):\n 1. absolutely_continuous M P\n 2. \\<And>n. 0 < B (j * n + k)\n 3. (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) \\<in> borel_measurable M\n 4. (\\<lambda>x. g x + birkhoff_sum f k x) \\<in> borel_measurable M\n 5. PS.events = sets M\n 6. PZ.prob {0} < 1\n 7. weak_conv_m\n     (\\<lambda>n.\n         distr P borel\n          (\\<lambda>x.\n              (g x + birkhoff_sum f k x +\n               Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x))\n                n x) /\n              B (j * n + k)))\n     Z", "using PabsM Bpos non_trivial conv \\<open>j>0\\<close>"], ["proof (prove)\nusing this:\n  absolutely_continuous M P\n  0 < B ?n\n  PZ.prob {0} < 1\n  weak_conv_m\n   (\\<lambda>n.\n       distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   Z\n  0 < j\n\ngoal (7 subgoals):\n 1. absolutely_continuous M P\n 2. \\<And>n. 0 < B (j * n + k)\n 3. (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) \\<in> borel_measurable M\n 4. (\\<lambda>x. g x + birkhoff_sum f k x) \\<in> borel_measurable M\n 5. PS.events = sets M\n 6. PZ.prob {0} < 1\n 7. weak_conv_m\n     (\\<lambda>n.\n         distr P borel\n          (\\<lambda>x.\n              (g x + birkhoff_sum f k x +\n               Tj0.birkhoff_sum (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x))\n                n x) /\n              B (j * n + k)))\n     Z", "unfolding *"], ["proof (prove)\nusing this:\n  absolutely_continuous M P\n  0 < B ?n\n  PZ.prob {0} < 1\n  weak_conv_m\n   (\\<lambda>n.\n       distr P borel (\\<lambda>x. (g x + birkhoff_sum f n x) / B n))\n   Z\n  0 < j\n\ngoal (7 subgoals):\n 1. absolutely_continuous M P\n 2. \\<And>n. 0 < B (j * n + k)\n 3. (\\<lambda>x. birkhoff_sum f j ((T ^^ k) x)) \\<in> borel_measurable M\n 4. (\\<lambda>x. g x + birkhoff_sum f k x) \\<in> borel_measurable M\n 5. PS.events = sets M\n 6. PZ.prob {0} < 1\n 7. weak_conv_m\n     (\\<lambda>n.\n         distr P borel\n          (\\<lambda>x.\n              (g x + birkhoff_sum f (j * n + k) x) / B (j * n + k)))\n     Z", "by (auto intro!: weak_conv_m_subseq strict_monoI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A.\n           B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<forall>n\\<in>A.\n           B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "apply (rule Tj.upper_bound_L[OF \\<open>a > 0\\<close> \\<open>alpha > 0\\<close>])"], ["proof (prove)\ngoal (3 subgoals):\n 1. 3 < L\n 2. 3 * alpha < PZ.prob {x. 2 * a < \\<bar>x\\<bar>}\n 3. PZ.prob {x. (L - 1) * a \\<le> \\<bar>x\\<bar>} < alpha", "by fact+"], ["proof (state)\nthis:\n  \\<exists>A.\n     lower_asymptotic_density A = 1 \\<and>\n     (\\<forall>n\\<in>A.\n         B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>A.\n     lower_asymptotic_density A = 1 \\<and>\n     (\\<forall>n\\<in>A.\n         B (j * Suc n + ?k12)\n         \\<le> L * Max {B (j * i + ?k12) |i. i \\<le> n})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"\\<exists>A. \\<forall>k. lower_asymptotic_density (A k) = 1 \\<and> (\\<forall>n\\<in>A k. B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       \\<forall>k.\n          lower_asymptotic_density (A k) = 1 \\<and>\n          (\\<forall>n\\<in>A k.\n              B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "apply (rule choice)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k.\n       \\<exists>y.\n          lower_asymptotic_density y = 1 \\<and>\n          (\\<forall>n\\<in>y.\n              B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "using *"], ["proof (prove)\nusing this:\n  \\<exists>A.\n     lower_asymptotic_density A = 1 \\<and>\n     (\\<forall>n\\<in>A.\n         B (j * Suc n + ?k12)\n         \\<le> L * Max {B (j * i + ?k12) |i. i \\<le> n})\n\ngoal (1 subgoal):\n 1. \\<forall>k.\n       \\<exists>y.\n          lower_asymptotic_density y = 1 \\<and>\n          (\\<forall>n\\<in>y.\n              B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "by auto"], ["proof (state)\nthis:\n  \\<exists>A.\n     \\<forall>k.\n        lower_asymptotic_density (A k) = 1 \\<and>\n        (\\<forall>n\\<in>A k.\n            B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  \\<exists>A.\n     \\<forall>k.\n        lower_asymptotic_density (A k) = 1 \\<and>\n        (\\<forall>n\\<in>A k.\n            B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})", "obtain A where A: \"\\<And>k. lower_asymptotic_density (A k) = 1\" \"\\<And>k n. n \\<in> A k \\<Longrightarrow> B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\""], ["proof (prove)\nusing this:\n  \\<exists>A.\n     \\<forall>k.\n        lower_asymptotic_density (A k) = 1 \\<and>\n        (\\<forall>n\\<in>A k.\n            B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n})\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>\\<And>k. lower_asymptotic_density (A k) = 1;\n         \\<And>k n.\n            n \\<in> A k \\<Longrightarrow>\n            B (j * Suc n + k)\n            \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  lower_asymptotic_density (A ?k12) = 1\n  ?n12 \\<in> A ?k12 \\<Longrightarrow>\n  B (j * Suc ?n12 + ?k12) \\<le> L * Max {B (j * i + ?k12) |i. i \\<le> ?n12}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "define Aj where \"Aj = (\\<Inter>k<j. A k)\""], ["proof (state)\nthis:\n  Aj = \\<Inter> (A ` {..<j})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"lower_asymptotic_density Aj = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density Aj = 1", "unfolding Aj_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density (\\<Inter> (A ` {..<j})) = 1", "using A(1)"], ["proof (prove)\nusing this:\n  lower_asymptotic_density (A ?k12) = 1\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density (\\<Inter> (A ` {..<j})) = 1", "by (simp add: lower_asymptotic_density_one_finite_Intersection)"], ["proof (state)\nthis:\n  lower_asymptotic_density Aj = 1\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "define Bj where \"Bj = UNIV - Aj\""], ["proof (state)\nthis:\n  Bj = UNIV - Aj\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"upper_asymptotic_density Bj = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density Bj = 0", "using \\<open>lower_asymptotic_density Aj = 1\\<close>"], ["proof (prove)\nusing this:\n  lower_asymptotic_density Aj = 1\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density Bj = 0", "unfolding Bj_def lower_upper_asymptotic_density_complement"], ["proof (prove)\nusing this:\n  1 - upper_asymptotic_density (UNIV - Aj) = 1\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (UNIV - Aj) = 0", "by simp"], ["proof (state)\nthis:\n  upper_asymptotic_density Bj = 0\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "define M where \"M = (\\<lambda>n. Max {B p |p. p < (n+1) * j})\""], ["proof (state)\nthis:\n  M = (\\<lambda>n. Max {B p |p. p < (n + 1) * j})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"B 0 \\<le> M n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B 0 \\<le> M n", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B 0 \\<le> Max {B p |p. p < (n + 1) * j}", "apply (rule Max_ge, auto, rule exI[of _ 0])"], ["proof (prove)\ngoal (1 subgoal):\n 1. B 0 = B 0 \\<and> 0 < j + n * j", "using \\<open>j > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < j\n\ngoal (1 subgoal):\n 1. B 0 = B 0 \\<and> 0 < j + n * j", "by auto"], ["proof (state)\nthis:\n  B 0 \\<le> M ?n12\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  B 0 \\<le> M ?n12", "have Mpos: \"M n > 0\" for n"], ["proof (prove)\nusing this:\n  B 0 \\<le> M ?n12\n\ngoal (1 subgoal):\n 1. 0 < M n", "by (metis Bpos not_le not_less_iff_gr_or_eq order.strict_trans)"], ["proof (state)\nthis:\n  0 < M ?n12\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have M_L: \"M (Suc n) \\<le> L * M n\" if \"n \\<in> Aj\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> L * M n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> L * M n", "have *: \"B s \\<le> L * M n\" if \"s < (n+2) * j\" for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. B s \\<le> L * M n", "proof (cases \"s < (n+1) * j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n\n 2. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "case True"], ["proof (state)\nthis:\n  s < (n + 1) * j\n\ngoal (2 subgoals):\n 1. s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n\n 2. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "have \"B s \\<le> M n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B s \\<le> M n", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B s \\<le> Max {B p |p. p < (n + 1) * j}", "apply (rule Max_ge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite {B p |p. p < (n + 1) * j}\n 2. B s \\<in> {B p |p. p < (n + 1) * j}", "using True"], ["proof (prove)\nusing this:\n  s < (n + 1) * j\n\ngoal (2 subgoals):\n 1. finite {B p |p. p < (n + 1) * j}\n 2. B s \\<in> {B p |p. p < (n + 1) * j}", "by auto"], ["proof (state)\nthis:\n  B s \\<le> M n\n\ngoal (2 subgoals):\n 1. s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n\n 2. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "also"], ["proof (state)\nthis:\n  B s \\<le> M n\n\ngoal (2 subgoals):\n 1. s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n\n 2. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "have \"... \\<le> L * M n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M n \\<le> L * M n", "using \\<open>L > 3\\<close> \\<open>M n > 0\\<close>"], ["proof (prove)\nusing this:\n  3 < L\n  0 < M n\n\ngoal (1 subgoal):\n 1. M n \\<le> L * M n", "by auto"], ["proof (state)\nthis:\n  M n \\<le> L * M n\n\ngoal (2 subgoals):\n 1. s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n\n 2. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "finally"], ["proof (chain)\npicking this:\n  B s \\<le> L * M n", "show ?thesis"], ["proof (prove)\nusing this:\n  B s \\<le> L * M n\n\ngoal (1 subgoal):\n 1. B s \\<le> L * M n", "by simp"], ["proof (state)\nthis:\n  B s \\<le> L * M n\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "case False"], ["proof (state)\nthis:\n  \\<not> s < (n + 1) * j\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "then"], ["proof (chain)\npicking this:\n  \\<not> s < (n + 1) * j", "obtain k where \"k < j\" \"s = (n+1) * j + k\""], ["proof (prove)\nusing this:\n  \\<not> s < (n + 1) * j\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k < j; s = (n + 1) * j + k\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>s < (n+2) * j\\<close> le_Suc_ex"], ["proof (prove)\nusing this:\n  \\<not> s < (n + 1) * j\n  s < (n + 2) * j\n  ?k \\<le> ?l \\<Longrightarrow> \\<exists>n. ?l = ?k + n\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k < j; s = (n + 1) * j + k\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  k < j\n  s = (n + 1) * j + k\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "then"], ["proof (chain)\npicking this:\n  k < j\n  s = (n + 1) * j + k", "have \"B s = B (j * Suc n + k)\""], ["proof (prove)\nusing this:\n  k < j\n  s = (n + 1) * j + k\n\ngoal (1 subgoal):\n 1. B s = B (j * Suc n + k)", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  B s = B (j * Suc n + k)\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "also"], ["proof (state)\nthis:\n  B s = B (j * Suc n + k)\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "have \"... \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}", "using A(2)[of n k] \\<open>n \\<in> Aj\\<close>"], ["proof (prove)\nusing this:\n  n \\<in> A k \\<Longrightarrow>\n  B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\n  n \\<in> Aj\n\ngoal (1 subgoal):\n 1. B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}", "unfolding Aj_def"], ["proof (prove)\nusing this:\n  n \\<in> A k \\<Longrightarrow>\n  B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\n  n \\<in> \\<Inter> (A ` {..<j})\n\ngoal (1 subgoal):\n 1. B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}", "using \\<open>k < j\\<close>"], ["proof (prove)\nusing this:\n  n \\<in> A k \\<Longrightarrow>\n  B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\n  n \\<in> \\<Inter> (A ` {..<j})\n  k < j\n\ngoal (1 subgoal):\n 1. B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}", "by auto"], ["proof (state)\nthis:\n  B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "also"], ["proof (state)\nthis:\n  B (j * Suc n + k) \\<le> L * Max {B (j * i + k) |i. i \\<le> n}\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "have \"... \\<le> L * Max {B a|a. a < (n+1) * j}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. L * Max {B (j * i + k) |i. i \\<le> n}\n    \\<le> L * Max {B a |a. a < (n + 1) * j}", "apply (rule mult_left_mono, rule Max_mono)"], ["proof (prove)\ngoal (4 subgoals):\n 1. {B (j * i + k) |i. i \\<le> n} \\<subseteq> {B a |a. a < (n + 1) * j}\n 2. {B (j * i + k) |i. i \\<le> n} \\<noteq> {}\n 3. finite {B a |a. a < (n + 1) * j}\n 4. 0 \\<le> L", "using \\<open>L>3\\<close>"], ["proof (prove)\nusing this:\n  3 < L\n\ngoal (4 subgoals):\n 1. {B (j * i + k) |i. i \\<le> n} \\<subseteq> {B a |a. a < (n + 1) * j}\n 2. {B (j * i + k) |i. i \\<le> n} \\<noteq> {}\n 3. finite {B a |a. a < (n + 1) * j}\n 4. 0 \\<le> L", "proof (auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>3 < L; i \\<le> n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            B (j * i + k) = B a \\<and> a < j + n * j", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>3 < L; i \\<le> n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            B (j * i + k) = B a \\<and> a < j + n * j", "assume \"i \\<le> n\""], ["proof (state)\nthis:\n  i \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>3 < L; i \\<le> n\\<rbrakk>\n       \\<Longrightarrow> \\<exists>a.\n                            B (j * i + k) = B a \\<and> a < j + n * j", "show \"\\<exists>a. B (j * i + k) = B a \\<and> a < j + n * j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a. B (j * i + k) = B a \\<and> a < j + n * j", "apply (rule exI[of _ \"j * i + k\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (j * i + k) = B (j * i + k) \\<and> j * i + k < j + n * j", "using \\<open>k < j\\<close> \\<open>i \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  k < j\n  i \\<le> n\n\ngoal (1 subgoal):\n 1. B (j * i + k) = B (j * i + k) \\<and> j * i + k < j + n * j", "by (auto simp add: add_mono_thms_linordered_field(3) algebra_simps)"], ["proof (state)\nthis:\n  \\<exists>a. B (j * i + k) = B a \\<and> a < j + n * j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  L * Max {B (j * i + k) |i. i \\<le> n}\n  \\<le> L * Max {B a |a. a < (n + 1) * j}\n\ngoal (1 subgoal):\n 1. \\<not> s < (n + 1) * j \\<Longrightarrow> B s \\<le> L * M n", "finally"], ["proof (chain)\npicking this:\n  B s \\<le> L * Max {B a |a. a < (n + 1) * j}", "show ?thesis"], ["proof (prove)\nusing this:\n  B s \\<le> L * Max {B a |a. a < (n + 1) * j}\n\ngoal (1 subgoal):\n 1. B s \\<le> L * M n", "unfolding M_def"], ["proof (prove)\nusing this:\n  B s \\<le> L * Max {B a |a. a < (n + 1) * j}\n\ngoal (1 subgoal):\n 1. B s \\<le> L * Max {B p |p. p < (n + 1) * j}", "by auto"], ["proof (state)\nthis:\n  B s \\<le> L * M n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?s12 < (n + 2) * j \\<Longrightarrow> B ?s12 \\<le> L * M n\n\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> L * M n", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> L * M n", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B p |p. p < (Suc n + 1) * j}\n    \\<le> L * Max {B p |p. p < (n + 1) * j}", "apply (rule Max.boundedI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B p |p. p < (Suc n + 1) * j}\n 2. {B p |p. p < (Suc n + 1) * j} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B p |p. p < (Suc n + 1) * j} \\<Longrightarrow>\n       a \\<le> L * Max {B p |p. p < (n + 1) * j}", "using *"], ["proof (prove)\nusing this:\n  ?s12 < (n + 2) * j \\<Longrightarrow> B ?s12 \\<le> L * M n\n\ngoal (3 subgoals):\n 1. finite {B p |p. p < (Suc n + 1) * j}\n 2. {B p |p. p < (Suc n + 1) * j} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B p |p. p < (Suc n + 1) * j} \\<Longrightarrow>\n       a \\<le> L * Max {B p |p. p < (n + 1) * j}", "unfolding M_def"], ["proof (prove)\nusing this:\n  ?s12 < (n + 2) * j \\<Longrightarrow>\n  B ?s12 \\<le> L * Max {B p |p. p < (n + 1) * j}\n\ngoal (3 subgoals):\n 1. finite {B p |p. p < (Suc n + 1) * j}\n 2. {B p |p. p < (Suc n + 1) * j} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B p |p. p < (Suc n + 1) * j} \\<Longrightarrow>\n       a \\<le> L * Max {B p |p. p < (n + 1) * j}", "using \\<open>j > 0\\<close>"], ["proof (prove)\nusing this:\n  ?s12 < (n + 2) * j \\<Longrightarrow>\n  B ?s12 \\<le> L * Max {B p |p. p < (n + 1) * j}\n  0 < j\n\ngoal (3 subgoals):\n 1. finite {B p |p. p < (Suc n + 1) * j}\n 2. {B p |p. p < (Suc n + 1) * j} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B p |p. p < (Suc n + 1) * j} \\<Longrightarrow>\n       a \\<le> L * Max {B p |p. p < (n + 1) * j}", "by auto"], ["proof (state)\nthis:\n  M (Suc n) \\<le> L * M n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n12 \\<in> Aj \\<Longrightarrow> M (Suc ?n12) \\<le> L * M ?n12\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have M_C: \"M (Suc n) \\<le> C^j * M n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> C ^ j * M n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> C ^ j * M n", "have I: \"Max {B s|s. s < (n+1) * j + k} \\<le> C^k * M n\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n", "proof (induction k)"], ["proof (state)\ngoal (2 subgoals):\n 1. Max {B s |s. s < (n + 1) * j + 0} \\<le> C ^ 0 * M n\n 2. \\<And>k.\n       Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n \\<Longrightarrow>\n       Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. Max {B s |s. s < (n + 1) * j + 0} \\<le> C ^ 0 * M n\n 2. \\<And>k.\n       Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n \\<Longrightarrow>\n       Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B s |s. s < (n + 1) * j + 0} \\<le> C ^ 0 * M n", "apply (rule Max.boundedI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B s |s. s < (n + 1) * j + 0}\n 2. {B s |s. s < (n + 1) * j + 0} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B s |s. s < (n + 1) * j + 0} \\<Longrightarrow>\n       a \\<le> C ^ 0 * M n", "unfolding M_def"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B s |s. s < (n + 1) * j + 0}\n 2. {B s |s. s < (n + 1) * j + 0} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B s |s. s < (n + 1) * j + 0} \\<Longrightarrow>\n       a \\<le> C ^ 0 * Max {B p |p. p < (n + 1) * j}", "using \\<open>j > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < j\n\ngoal (3 subgoals):\n 1. finite {B s |s. s < (n + 1) * j + 0}\n 2. {B s |s. s < (n + 1) * j + 0} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B s |s. s < (n + 1) * j + 0} \\<Longrightarrow>\n       a \\<le> C ^ 0 * Max {B p |p. p < (n + 1) * j}", "by auto"], ["proof (state)\nthis:\n  Max {B s |s. s < (n + 1) * j + 0} \\<le> C ^ 0 * M n\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n \\<Longrightarrow>\n       Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n \\<Longrightarrow>\n       Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "case (Suc k)"], ["proof (state)\nthis:\n  Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n \\<Longrightarrow>\n       Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "have *: \"B s \\<le> C * C ^ k * M n\" if \"s < Suc (j + n * j + k)\" for s"], ["proof (prove)\ngoal (1 subgoal):\n 1. B s \\<le> C * C ^ k * M n", "proof (cases \"s < j + n * j + k\")"], ["proof (state)\ngoal (2 subgoals):\n 1. s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n\n 2. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "case True"], ["proof (state)\nthis:\n  s < j + n * j + k\n\ngoal (2 subgoals):\n 1. s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n\n 2. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "then"], ["proof (chain)\npicking this:\n  s < j + n * j + k", "have \"B s \\<le> C^k * M n\""], ["proof (prove)\nusing this:\n  s < j + n * j + k\n\ngoal (1 subgoal):\n 1. B s \\<le> C ^ k * M n", "using iffD1[OF Max_le_iff, OF _ _ Suc.IH]"], ["proof (prove)\nusing this:\n  s < j + n * j + k\n  \\<lbrakk>finite {B s |s. s < (n + 1) * j + k};\n   {B s |s. s < (n + 1) * j + k} \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>{B s |s. s < (n + 1) * j + k}.\n                       a \\<le> C ^ k * M n\n\ngoal (1 subgoal):\n 1. B s \\<le> C ^ k * M n", "by auto"], ["proof (state)\nthis:\n  B s \\<le> C ^ k * M n\n\ngoal (2 subgoals):\n 1. s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n\n 2. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "also"], ["proof (state)\nthis:\n  B s \\<le> C ^ k * M n\n\ngoal (2 subgoals):\n 1. s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n\n 2. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "have \"... \\<le> C * C^k * M n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C ^ k * M n \\<le> C * C ^ k * M n", "using \\<open>C \\<ge> 1\\<close> \\<open>M n > 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> C\n  0 < M n\n\ngoal (1 subgoal):\n 1. C ^ k * M n \\<le> C * C ^ k * M n", "by auto"], ["proof (state)\nthis:\n  C ^ k * M n \\<le> C * C ^ k * M n\n\ngoal (2 subgoals):\n 1. s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n\n 2. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "finally"], ["proof (chain)\npicking this:\n  B s \\<le> C * C ^ k * M n", "show ?thesis"], ["proof (prove)\nusing this:\n  B s \\<le> C * C ^ k * M n\n\ngoal (1 subgoal):\n 1. B s \\<le> C * C ^ k * M n", "by simp"], ["proof (state)\nthis:\n  B s \\<le> C * C ^ k * M n\n\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "case False"], ["proof (state)\nthis:\n  \\<not> s < j + n * j + k\n\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "then"], ["proof (chain)\npicking this:\n  \\<not> s < j + n * j + k", "have \"s = j + n * j + k\""], ["proof (prove)\nusing this:\n  \\<not> s < j + n * j + k\n\ngoal (1 subgoal):\n 1. s = j + n * j + k", "using that"], ["proof (prove)\nusing this:\n  \\<not> s < j + n * j + k\n  s < Suc (j + n * j + k)\n\ngoal (1 subgoal):\n 1. s = j + n * j + k", "by auto"], ["proof (state)\nthis:\n  s = j + n * j + k\n\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "then"], ["proof (chain)\npicking this:\n  s = j + n * j + k", "have \"B s \\<le> C * Max {B s|s. s < (n+1) * j + k}\""], ["proof (prove)\nusing this:\n  s = j + n * j + k\n\ngoal (1 subgoal):\n 1. B s \\<le> C * Max {B s |s. s < (n + 1) * j + k}", "using C2[of s]"], ["proof (prove)\nusing this:\n  s = j + n * j + k\n  0 < s \\<Longrightarrow> B s \\<le> C * Max {B i |i. i < s}\n\ngoal (1 subgoal):\n 1. B s \\<le> C * Max {B s |s. s < (n + 1) * j + k}", "using \\<open>j > 0\\<close>"], ["proof (prove)\nusing this:\n  s = j + n * j + k\n  0 < s \\<Longrightarrow> B s \\<le> C * Max {B i |i. i < s}\n  0 < j\n\ngoal (1 subgoal):\n 1. B s \\<le> C * Max {B s |s. s < (n + 1) * j + k}", "by auto"], ["proof (state)\nthis:\n  B s \\<le> C * Max {B s |s. s < (n + 1) * j + k}\n\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "also"], ["proof (state)\nthis:\n  B s \\<le> C * Max {B s |s. s < (n + 1) * j + k}\n\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "have \"... \\<le> C * C^k * M n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * Max {B s |s. s < (n + 1) * j + k} \\<le> C * C ^ k * M n", "using Suc.IH \\<open>C \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n\n  1 \\<le> C\n\ngoal (1 subgoal):\n 1. C * Max {B s |s. s < (n + 1) * j + k} \\<le> C * C ^ k * M n", "by auto"], ["proof (state)\nthis:\n  C * Max {B s |s. s < (n + 1) * j + k} \\<le> C * C ^ k * M n\n\ngoal (1 subgoal):\n 1. \\<not> s < j + n * j + k \\<Longrightarrow> B s \\<le> C * C ^ k * M n", "finally"], ["proof (chain)\npicking this:\n  B s \\<le> C * C ^ k * M n", "show ?thesis"], ["proof (prove)\nusing this:\n  B s \\<le> C * C ^ k * M n\n\ngoal (1 subgoal):\n 1. B s \\<le> C * C ^ k * M n", "by simp"], ["proof (state)\nthis:\n  B s \\<le> C * C ^ k * M n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?s12 < Suc (j + n * j + k) \\<Longrightarrow> B ?s12 \\<le> C * C ^ k * M n\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       Max {B s |s. s < (n + 1) * j + k} \\<le> C ^ k * M n \\<Longrightarrow>\n       Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n", "apply (rule Max.boundedI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {B s |s. s < (n + 1) * j + Suc k}\n 2. {B s |s. s < (n + 1) * j + Suc k} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B s |s. s < (n + 1) * j + Suc k} \\<Longrightarrow>\n       a \\<le> C ^ Suc k * M n", "using \\<open>j > 0\\<close> *"], ["proof (prove)\nusing this:\n  0 < j\n  ?s12 < Suc (j + n * j + k) \\<Longrightarrow> B ?s12 \\<le> C * C ^ k * M n\n\ngoal (3 subgoals):\n 1. finite {B s |s. s < (n + 1) * j + Suc k}\n 2. {B s |s. s < (n + 1) * j + Suc k} \\<noteq> {}\n 3. \\<And>a.\n       a \\<in> {B s |s. s < (n + 1) * j + Suc k} \\<Longrightarrow>\n       a \\<le> C ^ Suc k * M n", "by auto"], ["proof (state)\nthis:\n  Max {B s |s. s < (n + 1) * j + Suc k} \\<le> C ^ Suc k * M n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Max {B s |s. s < (n + 1) * j + ?k12} \\<le> C ^ ?k12 * M n\n\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> C ^ j * M n", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> C ^ j * M n", "using I[of j]"], ["proof (prove)\nusing this:\n  Max {B s |s. s < (n + 1) * j + j} \\<le> C ^ j * M n\n\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> C ^ j * M n", "unfolding M_def"], ["proof (prove)\nusing this:\n  Max {B s |s. s < (n + 1) * j + j}\n  \\<le> C ^ j * Max {B p |p. p < (n + 1) * j}\n\ngoal (1 subgoal):\n 1. Max {B p |p. p < (Suc n + 1) * j}\n    \\<le> C ^ j * Max {B p |p. p < (n + 1) * j}", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  M (Suc n) \\<le> C ^ j * M n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  M (Suc ?n12) \\<le> C ^ j * M ?n12\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have I: \"ln (M n) \\<le> ln (M 0) + n * ln L + card (Bj \\<inter> {..<n}) * ln (C^j)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M n)\n    \\<le> ln (M 0) + real n * ln L +\n          real (card (Bj \\<inter> {..<n})) * ln (C ^ j)", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. ln (M 0)\n    \\<le> ln (M 0) + real 0 * ln L +\n          real (card (Bj \\<inter> {..<0})) * ln (C ^ j)\n 2. \\<And>n.\n       ln (M n)\n       \\<le> ln (M 0) + real n * ln L +\n             real (card (Bj \\<inter> {..<n})) * ln (C ^ j) \\<Longrightarrow>\n       ln (M (Suc n))\n       \\<le> ln (M 0) + real (Suc n) * ln L +\n             real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. ln (M 0)\n    \\<le> ln (M 0) + real 0 * ln L +\n          real (card (Bj \\<inter> {..<0})) * ln (C ^ j)\n 2. \\<And>n.\n       ln (M n)\n       \\<le> ln (M 0) + real n * ln L +\n             real (card (Bj \\<inter> {..<n})) * ln (C ^ j) \\<Longrightarrow>\n       ln (M (Suc n))\n       \\<le> ln (M 0) + real (Suc n) * ln L +\n             real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M 0)\n    \\<le> ln (M 0) + real 0 * ln L +\n          real (card (Bj \\<inter> {..<0})) * ln (C ^ j)", "by auto"], ["proof (state)\nthis:\n  ln (M 0)\n  \\<le> ln (M 0) + real 0 * ln L +\n        real (card (Bj \\<inter> {..<0})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ln (M n)\n       \\<le> ln (M 0) + real n * ln L +\n             real (card (Bj \\<inter> {..<n})) * ln (C ^ j) \\<Longrightarrow>\n       ln (M (Suc n))\n       \\<le> ln (M 0) + real (Suc n) * ln L +\n             real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ln (M n)\n       \\<le> ln (M 0) + real n * ln L +\n             real (card (Bj \\<inter> {..<n})) * ln (C ^ j) \\<Longrightarrow>\n       ln (M (Suc n))\n       \\<le> ln (M 0) + real (Suc n) * ln L +\n             real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "case (Suc n)"], ["proof (state)\nthis:\n  ln (M n)\n  \\<le> ln (M 0) + real n * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ln (M n)\n       \\<le> ln (M 0) + real n * ln L +\n             real (card (Bj \\<inter> {..<n})) * ln (C ^ j) \\<Longrightarrow>\n       ln (M (Suc n))\n       \\<le> ln (M 0) + real (Suc n) * ln L +\n             real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "proof (cases \"n \\<in> Bj\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "case True"], ["proof (state)\nthis:\n  n \\<in> Bj\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "then"], ["proof (chain)\npicking this:\n  n \\<in> Bj", "have *: \"Bj \\<inter> {..<Suc n} = Bj \\<inter> {..<n} \\<union> {n}\""], ["proof (prove)\nusing this:\n  n \\<in> Bj\n\ngoal (1 subgoal):\n 1. Bj \\<inter> {..<Suc n} = Bj \\<inter> {..<n} \\<union> {n}", "by auto"], ["proof (state)\nthis:\n  Bj \\<inter> {..<Suc n} = Bj \\<inter> {..<n} \\<union> {n}\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have **: \"card (Bj \\<inter> {..<Suc n}) = card (Bj \\<inter> {..<n}) + card {n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (Bj \\<inter> {..<Suc n}) = card (Bj \\<inter> {..<n}) + card {n}", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. card (Bj \\<inter> {..<n} \\<union> {n}) =\n    card (Bj \\<inter> {..<n}) + card {n}", "by (rule card_Un_disjoint, auto)"], ["proof (state)\nthis:\n  card (Bj \\<inter> {..<Suc n}) = card (Bj \\<inter> {..<n}) + card {n}\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"ln (M (Suc n)) \\<le> ln (C^j * M n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M (Suc n)) \\<le> ln (C ^ j * M n)", "using M_C \\<open>\\<And>n. 0 < M n\\<close> less_le_trans ln_le_cancel_iff"], ["proof (prove)\nusing this:\n  M (Suc ?n12) \\<le> C ^ j * M ?n12\n  0 < M ?n\n  \\<lbrakk>?x < ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n  \\<lbrakk>0 < ?x; 0 < ?y\\<rbrakk>\n  \\<Longrightarrow> (ln ?x \\<le> ln ?y) = (?x \\<le> ?y)\n\ngoal (1 subgoal):\n 1. ln (M (Suc n)) \\<le> ln (C ^ j * M n)", "by blast"], ["proof (state)\nthis:\n  ln (M (Suc n)) \\<le> ln (C ^ j * M n)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (M (Suc n)) \\<le> ln (C ^ j * M n)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... = ln (M n) + ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (C ^ j * M n) = ln (M n) + ln (C ^ j)", "using \\<open>C \\<ge> 1\\<close> \\<open>0 < M n\\<close> ln_mult"], ["proof (prove)\nusing this:\n  1 \\<le> C\n  0 < M n\n  \\<lbrakk>0 < ?x; 0 < ?y\\<rbrakk>\n  \\<Longrightarrow> ln (?x * ?y) = ln ?x + ln ?y\n\ngoal (1 subgoal):\n 1. ln (C ^ j * M n) = ln (M n) + ln (C ^ j)", "by auto"], ["proof (state)\nthis:\n  ln (C ^ j * M n) = ln (M n) + ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (C ^ j * M n) = ln (M n) + ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... \\<le> ln (M 0) + n * ln L + card (Bj \\<inter> {..<n}) * ln (C^j) + ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M n) + ln (C ^ j)\n    \\<le> ln (M 0) + real n * ln L +\n          real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n          ln (C ^ j)", "using Suc.IH"], ["proof (prove)\nusing this:\n  ln (M n)\n  \\<le> ln (M 0) + real n * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. ln (M n) + ln (C ^ j)\n    \\<le> ln (M 0) + real n * ln L +\n          real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n          ln (C ^ j)", "by auto"], ["proof (state)\nthis:\n  ln (M n) + ln (C ^ j)\n  \\<le> ln (M 0) + real n * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n        ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (M n) + ln (C ^ j)\n  \\<le> ln (M 0) + real n * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n        ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... = ln (M 0) + n * ln L + card (Bj \\<inter> {..<Suc n}) * ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M 0) + real n * ln L +\n    real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n    ln (C ^ j) =\n    ln (M 0) + real n * ln L +\n    real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "using **"], ["proof (prove)\nusing this:\n  card (Bj \\<inter> {..<Suc n}) = card (Bj \\<inter> {..<n}) + card {n}\n\ngoal (1 subgoal):\n 1. ln (M 0) + real n * ln L +\n    real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n    ln (C ^ j) =\n    ln (M 0) + real n * ln L +\n    real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  ln (M 0) + real n * ln L + real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n  ln (C ^ j) =\n  ln (M 0) + real n * ln L +\n  real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (M 0) + real n * ln L + real (card (Bj \\<inter> {..<n})) * ln (C ^ j) +\n  ln (C ^ j) =\n  ln (M 0) + real n * ln L +\n  real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... \\<le> ln (M 0) + (Suc n) * ln L + card (Bj \\<inter> {..<Suc n}) * ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M 0) + real n * ln L +\n    real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "using \\<open>L > 3\\<close>"], ["proof (prove)\nusing this:\n  3 < L\n\ngoal (1 subgoal):\n 1. ln (M 0) + real n * ln L +\n    real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "by auto"], ["proof (state)\nthis:\n  ln (M 0) + real n * ln L +\n  real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (2 subgoals):\n 1. n \\<in> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n 2. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "finally"], ["proof (chain)\npicking this:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "show ?thesis"], ["proof (prove)\nusing this:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "by auto"], ["proof (state)\nthis:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "case False"], ["proof (state)\nthis:\n  n \\<notin> Bj\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"M (Suc n) \\<le> L * M n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M (Suc n) \\<le> L * M n", "apply (rule M_L)"], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<in> Aj", "using False"], ["proof (prove)\nusing this:\n  n \\<notin> Bj\n\ngoal (1 subgoal):\n 1. n \\<in> Aj", "unfolding Bj_def"], ["proof (prove)\nusing this:\n  n \\<notin> UNIV - Aj\n\ngoal (1 subgoal):\n 1. n \\<in> Aj", "by auto"], ["proof (state)\nthis:\n  M (Suc n) \\<le> L * M n\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "then"], ["proof (chain)\npicking this:\n  M (Suc n) \\<le> L * M n", "have \"ln (M (Suc n)) \\<le> ln (L * M n)\""], ["proof (prove)\nusing this:\n  M (Suc n) \\<le> L * M n\n\ngoal (1 subgoal):\n 1. ln (M (Suc n)) \\<le> ln (L * M n)", "using \\<open>\\<And>n. 0 < M n\\<close> less_le_trans ln_le_cancel_iff"], ["proof (prove)\nusing this:\n  M (Suc n) \\<le> L * M n\n  0 < M ?n\n  \\<lbrakk>?x < ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n  \\<lbrakk>0 < ?x; 0 < ?y\\<rbrakk>\n  \\<Longrightarrow> (ln ?x \\<le> ln ?y) = (?x \\<le> ?y)\n\ngoal (1 subgoal):\n 1. ln (M (Suc n)) \\<le> ln (L * M n)", "by blast"], ["proof (state)\nthis:\n  ln (M (Suc n)) \\<le> ln (L * M n)\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (M (Suc n)) \\<le> ln (L * M n)\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... = ln (M n) + ln L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (L * M n) = ln (M n) + ln L", "using \\<open>L > 3\\<close> \\<open>0 < M n\\<close> ln_mult"], ["proof (prove)\nusing this:\n  3 < L\n  0 < M n\n  \\<lbrakk>0 < ?x; 0 < ?y\\<rbrakk>\n  \\<Longrightarrow> ln (?x * ?y) = ln ?x + ln ?y\n\ngoal (1 subgoal):\n 1. ln (L * M n) = ln (M n) + ln L", "by auto"], ["proof (state)\nthis:\n  ln (L * M n) = ln (M n) + ln L\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (L * M n) = ln (M n) + ln L\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... \\<le> ln (M 0) + Suc n * ln L + card (Bj \\<inter> {..<n}) * ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M n) + ln L\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<n})) * ln (C ^ j)", "using Suc.IH"], ["proof (prove)\nusing this:\n  ln (M n)\n  \\<le> ln (M 0) + real n * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. ln (M n) + ln L\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<n})) * ln (C ^ j)", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  ln (M n) + ln L\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "also"], ["proof (state)\nthis:\n  ln (M n) + ln L\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "have \"... \\<le> ln (M 0) + Suc n * ln L + card (Bj \\<inter> {..<Suc n}) * ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M 0) + real (Suc n) * ln L +\n    real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "using \\<open>C \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> C\n\ngoal (1 subgoal):\n 1. ln (M 0) + real (Suc n) * ln L +\n    real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "by (auto intro!: mult_right_mono card_mono)"], ["proof (state)\nthis:\n  ln (M 0) + real (Suc n) * ln L +\n  real (card (Bj \\<inter> {..<n})) * ln (C ^ j)\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. n \\<notin> Bj \\<Longrightarrow>\n    ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "finally"], ["proof (chain)\npicking this:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "show ?thesis"], ["proof (prove)\nusing this:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. ln (M (Suc n))\n    \\<le> ln (M 0) + real (Suc n) * ln L +\n          real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)", "by auto"], ["proof (state)\nthis:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ln (M (Suc n))\n  \\<le> ln (M 0) + real (Suc n) * ln L +\n        real (card (Bj \\<inter> {..<Suc n})) * ln (C ^ j)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ln (M ?n12)\n  \\<le> ln (M 0) + real ?n12 * ln L +\n        real (card (Bj \\<inter> {..<?n12})) * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"ln (M n)/n \\<le> ln (M 0)* (1/n) + ln L + (card (Bj \\<inter> {..<n})/n) * ln (C^j)\" if \"n\\<ge>1\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M n) / real n\n    \\<le> ln (M 0) * (1 / real n) + ln L +\n          real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)", "using that"], ["proof (prove)\nusing this:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (M n) / real n\n    \\<le> ln (M 0) * (1 / real n) + ln L +\n          real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)", "apply (auto simp add: algebra_simps divide_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc 0 \\<le> n \\<Longrightarrow>\n    real n * ln (M n)\n    \\<le> real n * ln (M 0) +\n          (real n * (real n * ln L) +\n           real n * (ln (C ^ j) * real (card (Bj \\<inter> {..<n}))))", "by (metis (no_types, hide_lams) I add.assoc mult.commute mult_left_mono of_nat_0_le_iff semiring_normalization_rules(34))"], ["proof (state)\nthis:\n  1 \\<le> ?n12 \\<Longrightarrow>\n  ln (M ?n12) / real ?n12\n  \\<le> ln (M 0) * (1 / real ?n12) + ln L +\n        real (card (Bj \\<inter> {..<?n12})) / real ?n12 * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  1 \\<le> ?n12 \\<Longrightarrow>\n  ln (M ?n12) / real ?n12\n  \\<le> ln (M 0) * (1 / real ?n12) + ln L +\n        real (card (Bj \\<inter> {..<?n12})) / real ?n12 * ln (C ^ j)", "have A: \"eventually (\\<lambda>n. ln (M n)/n \\<le> ln (M 0)* (1/n) + ln L + (card (Bj \\<inter> {..<n})/n) * ln (C^j)) sequentially\""], ["proof (prove)\nusing this:\n  1 \\<le> ?n12 \\<Longrightarrow>\n  ln (M ?n12) / real ?n12\n  \\<le> ln (M 0) * (1 / real ?n12) + ln L +\n        real (card (Bj \\<inter> {..<?n12})) / real ?n12 * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (M n) / real n\n       \\<le> ln (M 0) * (1 / real n) + ln L +\n             real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  1 \\<le> ?n12 \\<Longrightarrow>\n  ln (M ?n12) / real ?n12\n  \\<le> ln (M 0) * (1 / real ?n12) + ln L +\n        real (card (Bj \\<inter> {..<?n12})) / real ?n12 * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          ln (M n) / real n\n          \\<le> ln (M 0) * (1 / real n) + ln L +\n                real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ln (M n) / real n\n     \\<le> ln (M 0) * (1 / real n) + ln L +\n           real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have *: \"(\\<lambda>n. ln (M 0)*(1/n) + ln L + (card (Bj \\<inter> {..<n})/n) * ln (C^j)) \\<longlonglongrightarrow> ln (M 0) * 0 + ln L + 0 *ln (C^j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ln (M 0) * (1 / real n) + ln L +\n        real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j))\n    \\<longlonglongrightarrow> ln (M 0) * 0 + ln L + 0 * ln (C ^ j)", "by (intro tendsto_intros upper_asymptotic_density_zero_lim, fact)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      ln (M 0) * (1 / real n) + ln L +\n      real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j))\n  \\<longlonglongrightarrow> ln (M 0) * 0 + ln L + 0 * ln (C ^ j)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have B: \"eventually (\\<lambda>n. ln (M 0)*(1/n) + ln L + (card (Bj \\<inter> {..<n})/n) * ln (C^j) < 1 + ln L) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (M 0) * (1 / real n) + ln L +\n       real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)\n       < 1 + ln L", "by (rule order_tendstoD[OF *], auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ln (M 0) * (1 / real n) + ln L +\n     real (card (Bj \\<inter> {..<n})) / real n * ln (C ^ j)\n     < 1 + ln L\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"eventually (\\<lambda>n. ln (M n)/n < 1 + ln L) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. ln (M n) / real n < 1 + ln L", "using eventually_conj[OF A B]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in sequentially.\n     ln (M x) / real x\n     \\<le> ln (M 0) * (1 / real x) + ln L +\n           real (card (Bj \\<inter> {..<x})) / real x * ln (C ^ j) \\<and>\n     ln (M 0) * (1 / real x) + ln L +\n     real (card (Bj \\<inter> {..<x})) / real x * ln (C ^ j)\n     < 1 + ln L\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. ln (M n) / real n < 1 + ln L", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. ln (M n) / real n < 1 + ln L\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially. ln (M n) / real n < 1 + ln L", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> ln (M n)/n < 1 + ln L\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. ln (M n) / real n < 1 + ln L\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            ln (M n) / real n < 1 + ln L) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. ln (M n) / real n < 1 + ln L\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            ln (M n) / real n < 1 + ln L) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow> ln (M ?n12) / real ?n12 < 1 + ln L\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "have \"ln (B p) / p \\<le> (1+ln L) / j\" if \"p \\<ge> (N+1) * j\" for p"], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "define n where \"n = p div j\""], ["proof (state)\nthis:\n  n = p div j\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "have \"n \\<ge> N+1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N + 1 \\<le> n", "unfolding n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. N + 1 \\<le> p div j", "using that"], ["proof (prove)\nusing this:\n  (N + 1) * j \\<le> p\n\ngoal (1 subgoal):\n 1. N + 1 \\<le> p div j", "by (metis \\<open>0 < j\\<close> div_le_mono div_mult_self_is_m)"], ["proof (state)\nthis:\n  N + 1 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  N + 1 \\<le> n", "have \"n \\<ge> N\" \"n \\<ge> 1\""], ["proof (prove)\nusing this:\n  N + 1 \\<le> n\n\ngoal (1 subgoal):\n 1. N \\<le> n &&& 1 \\<le> n", "by auto"], ["proof (state)\nthis:\n  N \\<le> n\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "have *: \"p < (n+1) * j\" \"n * j \\<le> p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p < (n + 1) * j &&& n * j \\<le> p", "unfolding n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. p < (p div j + 1) * j &&& p div j * j \\<le> p", "using \\<open>j > 0\\<close> dividend_less_div_times"], ["proof (prove)\nusing this:\n  0 < j\n  0 < ?n \\<Longrightarrow> ?m < ?n + ?m div ?n * ?n\n\ngoal (1 subgoal):\n 1. p < (p div j + 1) * j &&& p div j * j \\<le> p", "by auto"], ["proof (state)\nthis:\n  p < (n + 1) * j\n  n * j \\<le> p\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "have \"B p \\<le> M n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B p \\<le> M n", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B p \\<le> Max {B p |p. p < (n + 1) * j}", "apply (rule Max_ge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite {B p |p. p < (n + 1) * j}\n 2. B p \\<in> {B p |p. p < (n + 1) * j}", "using *"], ["proof (prove)\nusing this:\n  p < (n + 1) * j\n  n * j \\<le> p\n\ngoal (2 subgoals):\n 1. finite {B p |p. p < (n + 1) * j}\n 2. B p \\<in> {B p |p. p < (n + 1) * j}", "by auto"], ["proof (state)\nthis:\n  B p \\<le> M n\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  B p \\<le> M n", "have \"ln (B p) \\<le> ln (M n)\""], ["proof (prove)\nusing this:\n  B p \\<le> M n\n\ngoal (1 subgoal):\n 1. ln (B p) \\<le> ln (M n)", "using Bpos Mpos ln_le_cancel_iff"], ["proof (prove)\nusing this:\n  B p \\<le> M n\n  0 < B ?n\n  0 < M ?n12\n  \\<lbrakk>0 < ?x; 0 < ?y\\<rbrakk>\n  \\<Longrightarrow> (ln ?x \\<le> ln ?y) = (?x \\<le> ?y)\n\ngoal (1 subgoal):\n 1. ln (B p) \\<le> ln (M n)", "by blast"], ["proof (state)\nthis:\n  ln (B p) \\<le> ln (M n)\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "also"], ["proof (state)\nthis:\n  ln (B p) \\<le> ln (M n)\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "have \"... \\<le> n * (1+ln L)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (M n) \\<le> real n * (1 + ln L)", "using N[OF \\<open>n \\<ge> N\\<close>] \\<open>n \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  ln (M n) / real n < 1 + ln L\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. ln (M n) \\<le> real n * (1 + ln L)", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  ln (M n) \\<le> real n * (1 + ln L)\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "also"], ["proof (state)\nthis:\n  ln (M n) \\<le> real n * (1 + ln L)\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "have \"... \\<le> (p/j) * (1+ln L)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n * (1 + ln L) \\<le> real p / real j * (1 + ln L)", "apply (rule mult_right_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. real n \\<le> real p / real j\n 2. 0 \\<le> 1 + ln L", "using *(2) \\<open>j > 0\\<close> \\<open>L > 3\\<close>"], ["proof (prove)\nusing this:\n  n * j \\<le> p\n  0 < j\n  3 < L\n\ngoal (2 subgoals):\n 1. real n \\<le> real p / real j\n 2. 0 \\<le> 1 + ln L", "apply (auto simp add: divide_simps algebra_simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>j * n \\<le> p; 0 < j; 3 < L\\<rbrakk>\n    \\<Longrightarrow> real j * real n \\<le> real p", "using of_nat_mono"], ["proof (prove)\nusing this:\n  ?i \\<le> ?j \\<Longrightarrow> of_nat ?i \\<le> of_nat ?j\n\ngoal (1 subgoal):\n 1. \\<lbrakk>j * n \\<le> p; 0 < j; 3 < L\\<rbrakk>\n    \\<Longrightarrow> real j * real n \\<le> real p", "by fastforce"], ["proof (state)\nthis:\n  real n * (1 + ln L) \\<le> real p / real j * (1 + ln L)\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "finally"], ["proof (chain)\npicking this:\n  ln (B p) \\<le> real p / real j * (1 + ln L)", "show ?thesis"], ["proof (prove)\nusing this:\n  ln (B p) \\<le> real p / real j * (1 + ln L)\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "using \\<open>j > 0\\<close> that"], ["proof (prove)\nusing this:\n  ln (B p) \\<le> real p / real j * (1 + ln L)\n  0 < j\n  (N + 1) * j \\<le> p\n\ngoal (1 subgoal):\n 1. ln (B p) / real p \\<le> (1 + ln L) / real j", "by (simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  ln (B p) / real p \\<le> (1 + ln L) / real j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (N + 1) * j \\<le> ?p12 \\<Longrightarrow>\n  ln (B ?p12) / real ?p12 \\<le> (1 + ln L) / real j\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ln (B n) / real n \\<le> (1 + ln L) / real j", "then"], ["proof (chain)\npicking this:\n  (N + 1) * j \\<le> ?p12 \\<Longrightarrow>\n  ln (B ?p12) / real ?p12 \\<le> (1 + ln L) / real j", "show \"eventually (\\<lambda>p. ln (B p) / p \\<le> (1+ln L)/j) sequentially\""], ["proof (prove)\nusing this:\n  (N + 1) * j \\<le> ?p12 \\<Longrightarrow>\n  ln (B ?p12) / real ?p12 \\<le> (1 + ln L) / real j\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F p in sequentially.\n       ln (B p) / real p \\<le> (1 + ln L) / real j", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  (N + 1) * j \\<le> ?p12 \\<Longrightarrow>\n  ln (B ?p12) / real ?p12 \\<le> (1 + ln L) / real j\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N. ln (B n) / real n \\<le> (1 + ln L) / real j", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F p in sequentially.\n     ln (B p) / real p \\<le> (1 + ln L) / real j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?j12 \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     ln (B n) / real n \\<le> (1 + ln L) / real ?j12\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "show \"(\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0", "proof (rule order_tendstoI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. max 0 (ln (B x) / real x) < a", "fix e::real"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. max 0 (ln (B x) / real x) < a", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. max 0 (ln (B x) / real x) < a", "have *: \"(\\<lambda>j. (1+ln L) * (1/j)) \\<longlonglongrightarrow> (1+ln L) * 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (1 + ln L) * (1 / real x))\n    \\<longlonglongrightarrow> (1 + ln L) * 0", "by (intro tendsto_intros)"], ["proof (state)\nthis:\n  (\\<lambda>x. (1 + ln L) * (1 / real x))\n  \\<longlonglongrightarrow> (1 + ln L) * 0\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. max 0 (ln (B x) / real x) < a", "have \"eventually (\\<lambda>j. (1+ln L) * (1/j) < e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F j in sequentially. (1 + ln L) * (1 / real j) < e", "apply (rule order_tendstoD[OF *])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 + ln L) * 0 < e", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (1 + ln L) * 0 < e", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F j in sequentially. (1 + ln L) * (1 / real j) < e\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. max 0 (ln (B x) / real x) < a", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F j in sequentially. (1 + ln L) * (1 / real j) < e", "obtain j::nat where j: \"j > 0\" \"(1+ln L) * (1/j) < e\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F j in sequentially. (1 + ln L) * (1 / real j) < e\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>0 < j; (1 + ln L) * (1 / real j) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. (1 + ln L) * (1 / real n) < e\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>0 < j; (1 + ln L) * (1 / real j) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using add.right_neutral le_eq_less_or_eq"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. (1 + ln L) * (1 / real n) < e\n  ?a + (0::?'a) = ?a\n  (?m \\<le> ?n) = (?m < ?n \\<or> ?m = ?n)\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>0 < j; (1 + ln L) * (1 / real j) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  0 < j\n  (1 + ln L) * (1 / real j) < e\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. max 0 (ln (B x) / real x) < a", "show \"eventually (\\<lambda>n. max 0 (ln (B n) / real n) < e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. max 0 (ln (B n) / real n) < e", "using Mainj[OF \\<open>j > 0\\<close>] j(2) \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ln (B n) / real n \\<le> (1 + ln L) / real j\n  (1 + ln L) * (1 / real j) < e\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. max 0 (ln (B n) / real n) < e", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. max 0 (ln (B n) / real n) < e\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < max 0 (ln (B x) / real x)", "qed (simp add: max.strict_coboundedI1)"], ["proof (state)\nthis:\n  (\\<lambda>n. max 0 (ln (B n) / real n)) \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*of locale conservative_limit*)"], ["", "subsection \\<open>Normalizing sequences grow at most polynomially in probability preserving systems\\<close>"], ["", "text \\<open>In probability preserving systems, normalizing sequences grow at most polynomially.\nThe proof, also given in~\\cite{gouezel_normalizing_sequences}, is considerably easier than\nthe conservative case. We prove that $B_{n+1} \\leq C B_n$ (more precisely, this only holds if\n$B_{n+1}$ is large enough), by arguing that $S_{n+1} f = S_n f + f \\circ T^n$, where $f\\circ T^n$\nis negligible if $B_{n+1}$ is large thanks to the measure preservation. We also prove that\n$B_{2n} \\leq E B_n$, by writing $S_{2n} f = S_n f+ S_n f \\circ T^n$ and arguing that the two terms\non the right have the same distribution. Finally, combining these two estimates, the polynomial\ngrowth follows readily.\\<close>"], ["", "locale pmpt_limit =\n  pmpt M + PZ: real_distribution Z\n    for M::\"'a measure\" and Z::\"real measure\" +\n  fixes f::\"'a \\<Rightarrow> real\" and B::\"nat \\<Rightarrow> real\"\n  assumes Bpos: \"\\<And>n. B n > 0\"\n      and M [measurable]: \"f \\<in> borel_measurable M\"\n      and non_trivial: \"PZ.prob {0} < 1\"\n      and conv: \"weak_conv_m (\\<lambda>n. distr P borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) Z\"\nbegin"], ["", "text \\<open>First, we prove that $B_{n+1} \\leq C B_n$ if $B_{n+1}$ is large enough.\\<close>"], ["", "lemma upper_bound_CD:\n  \"\\<exists>C D. (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and> C \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "obtain a where a: \"a > 0\" \"PZ.prob {x. abs (x) > a} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>0 < a; 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.not_Dirac_0_imp_positive_mass_away_0[OF non_trivial]"], ["proof (prove)\nusing this:\n  \\<exists>a>0. 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>0 < a; 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "define alpha where \"alpha = PZ.prob {x. abs (x) > a}/4\""], ["proof (state)\nthis:\n  alpha = PZ.prob {x. a < \\<bar>x\\<bar>} / 4\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "have \"alpha > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < alpha", "unfolding alpha_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a < \\<bar>x\\<bar>} / 4", "using a"], ["proof (prove)\nusing this:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a < \\<bar>x\\<bar>} / 4", "by auto"], ["proof (state)\nthis:\n  0 < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "have A: \"PZ.prob {x. abs (x) > a} > 3 * alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}", "using a"], ["proof (prove)\nusing this:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}", "unfolding alpha_def"], ["proof (prove)\nusing this:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * (PZ.prob {x. a < \\<bar>x\\<bar>} / 4)\n    < PZ.prob {x. a < \\<bar>x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "obtain C0 where C0: \"PZ.prob {x. abs(x) \\<ge> C0} < alpha\" \"C0 \\<ge> a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha;\n         a \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.random_variable_small_tails[OF \\<open>alpha > 0\\<close>, of \"\\<lambda>x. x\"]"], ["proof (prove)\nusing this:\n  PZ.random_variable borel (\\<lambda>x. x) \\<Longrightarrow>\n  \\<exists>C.\n     PZ.prob {x \\<in> space Z. C \\<le> \\<bar>x\\<bar>} < alpha \\<and>\n     ?K \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha;\n         a \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha\n  a \\<le> C0\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "have A: \"eventually (\\<lambda>n. measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs (x) > a} > 3 * alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       3 * alpha\n       < Sigma_Algebra.measure\n          (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n          {x. a < \\<bar>x\\<bar>}", "apply (rule open_set_weak_conv_lsc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n. distr M borel (\\<lambda>x. birkhoff_sum f n x / B n)) Z\n 4. open {x. a < \\<bar>x\\<bar>}\n 5. 3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}", "by (auto simp add: PZ.real_distribution_axioms conv A)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n        {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "have B: \"eventually (\\<lambda>n. measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs (x) \\<ge> C0} < alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Sigma_Algebra.measure\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n        {x. C0 \\<le> \\<bar>x\\<bar>}\n       < alpha", "apply (rule closed_set_weak_conv_usc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n. distr M borel (\\<lambda>x. birkhoff_sum f n x / B n)) Z\n 4. closed {x. C0 \\<le> \\<bar>x\\<bar>}\n 5. PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha", "by (auto simp add: PZ.real_distribution_axioms conv C0)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Sigma_Algebra.measure\n      (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n      {x. C0 \\<le> \\<bar>x\\<bar>}\n     < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs x > a} > 3 * alpha\"\n                    \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs x \\<ge> C0} < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr M borel\n                         (\\<lambda>x. birkhoff_sum f n x / B n))\n                       {x. a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using eventually_conj[OF A B]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr M borel (\\<lambda>xa. birkhoff_sum f x xa / B x))\n        {x. a < \\<bar>x\\<bar>} \\<and>\n     Sigma_Algebra.measure\n      (distr M borel (\\<lambda>xa. birkhoff_sum f x xa / B x))\n      {x. C0 \\<le> \\<bar>x\\<bar>}\n     < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr M borel\n                         (\\<lambda>x. birkhoff_sum f n x / B n))\n                       {x. a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        3 * alpha\n        < Sigma_Algebra.measure\n           (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n           {x. a < \\<bar>x\\<bar>} \\<and>\n        Sigma_Algebra.measure\n         (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n         {x. C0 \\<le> \\<bar>x\\<bar>}\n        < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr M borel\n                         (\\<lambda>x. birkhoff_sum f n x / B n))\n                       {x. a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow>\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f ?n12 x / B ?n12))\n     {x. a < \\<bar>x\\<bar>}\n  N \\<le> ?n12 \\<Longrightarrow>\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f ?n12 x / B ?n12))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "obtain Cf where Cf: \"prob {x \\<in> space M. abs(f x) \\<ge> Cf} < alpha\" \"Cf \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>Cf.\n        \\<lbrakk>prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} < alpha;\n         1 \\<le> Cf\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using random_variable_small_tails[OF \\<open>alpha > 0\\<close> M]"], ["proof (prove)\nusing this:\n  \\<exists>C.\n     prob {x \\<in> space M. C \\<le> \\<bar>f x\\<bar>} < alpha \\<and>\n     ?K \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>Cf.\n        \\<lbrakk>prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} < alpha;\n         1 \\<le> Cf\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} < alpha\n  1 \\<le> Cf\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "have Main: \"B (Suc n) \\<le> (2*C0/a) * B n\" if \"n \\<ge> N\" \"B (Suc n) \\<ge> 2 * Cf/a\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"Suc n \\<ge> N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N \\<le> Suc n", "using that"], ["proof (prove)\nusing this:\n  N \\<le> n\n  2 * Cf / a \\<le> B (Suc n)\n\ngoal (1 subgoal):\n 1. N \\<le> Suc n", "by auto"], ["proof (state)\nthis:\n  N \\<le> Suc n\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "let ?h = \"(\\<lambda>x. (birkhoff_sum f (Suc n) x) / B (Suc n))\""], ["proof (state)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"measure (distr M borel ?h) {x. abs (x) > a}\n              = measure M (?h-` {x. abs (x) > a} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n     {x. a < \\<bar>x\\<bar>} =\n    prob\n     ((\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)) -`\n      {x. a < \\<bar>x\\<bar>} \\<inter>\n      space M)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)) -`\n    {x. a < \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)) -`\n    {x. a < \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... = prob {x \\<in> space M. abs(?h x) > a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ((\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)) -`\n      {x. a < \\<bar>x\\<bar>} \\<inter>\n      space M) =\n    prob\n     {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}", "by (rule HOL.cong[of \"measure M\"], auto)"], ["proof (state)\nthis:\n  prob\n   ((\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)) -`\n    {x. a < \\<bar>x\\<bar>} \\<inter>\n    space M) =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}", "have A: \"prob {x \\<in> space M. abs(?h x) > a} > 3 * alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}", "using N(1)[OF \\<open>Suc n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f (Suc n) x / B (Suc n)))\n     {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha\n  < prob\n     {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "let ?h = \"(\\<lambda>x. (birkhoff_sum f n x) / B n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"measure (distr M borel ?h) {x. abs (x) \\<ge> C0}\n              = measure M (?h-` {x. abs (x) \\<ge> C0} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n     {x. C0 \\<le> \\<bar>x\\<bar>} =\n    prob\n     ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n      {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n      space M)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... = measure M {x \\<in> space M. abs(?h x) \\<ge> C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n      {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n      space M) =\n    prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}", "by (rule HOL.cong[of \"measure M\"], auto)"], ["proof (state)\nthis:\n  prob\n   ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space M) =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}", "have B0: \"prob {x \\<in> space M. abs(?h x) \\<ge> C0} < alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n    < alpha", "using N(2)[OF \\<open>n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n    < alpha", "by auto"], ["proof (state)\nthis:\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have *: \"{x \\<in> space M. abs(?h x) < C0} = space M - {x \\<in> space M. abs(?h x) \\<ge> C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} =\n    space M -\n    {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} =\n  space M - {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have B: \"prob {x \\<in> space M. abs(?h x) < C0} > 1- alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       (space M -\n        {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>})", "using B0 prob_compl"], ["proof (prove)\nusing this:\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n  < alpha\n  ?A \\<in> events \\<Longrightarrow> prob (space M - ?A) = 1 - prob ?A\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       (space M -\n        {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>})", "by auto"], ["proof (state)\nthis:\n  1 - alpha\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"prob {x \\<in> space M. abs(f ((T^^n) x)) \\<ge> Cf} = prob ((T^^n)-`{x \\<in> space M. abs(f x) \\<ge> Cf} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} =\n    prob\n     ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n      space M)", "by (rule HOL.cong[of \"prob\"], auto)"], ["proof (state)\nthis:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} =\n  prob\n   ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} =\n  prob\n   ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... = prob {x \\<in> space M. abs(f x) \\<ge> Cf}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n      space M) =\n    prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}", "using T_vrestr_same_measure(2)[of \"{x \\<in> space M. abs(f x) \\<ge> Cf}\" n]"], ["proof (prove)\nusing this:\n  {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<in> events \\<Longrightarrow>\n  prob ((T ^^ n) --` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}) =\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. prob\n     ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n      space M) =\n    prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}", "unfolding vimage_restr_def"], ["proof (prove)\nusing this:\n  {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<in> events \\<Longrightarrow>\n  prob\n   ((T ^^ n) -`\n    ({x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter> space M) \\<inter>\n    space M) =\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. prob\n     ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n      space M) =\n    prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  prob\n   ((T ^^ n) -` {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} \\<inter>\n    space M) =\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} =\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}", "have C0: \"prob {x \\<in> space M. abs(f ((T^^n) x)) \\<ge> Cf} < alpha\""], ["proof (prove)\nusing this:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} =\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}\n\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} < alpha", "using Cf"], ["proof (prove)\nusing this:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} =\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>}\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f x\\<bar>} < alpha\n  1 \\<le> Cf\n\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} < alpha", "by simp"], ["proof (state)\nthis:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} < alpha\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have *: \"{x \\<in> space M. abs(f ((T^^n) x)) < Cf} = space M - {x \\<in> space M. abs(f ((T^^n) x)) \\<ge> Cf}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf} =\n    space M - {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf} =\n  space M - {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have C: \"prob {x \\<in> space M. abs(f ((T^^n) x)) < Cf} > 1- alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha < prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       (space M - {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>})", "using C0 prob_compl"], ["proof (prove)\nusing this:\n  prob {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>} < alpha\n  ?A \\<in> events \\<Longrightarrow> prob (space M - ?A) = 1 - prob ?A\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       (space M - {x \\<in> space M. Cf \\<le> \\<bar>f ((T ^^ n) x)\\<bar>})", "by auto"], ["proof (state)\nthis:\n  1 - alpha < prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "define X where \"X = {x \\<in> space M. abs((birkhoff_sum f n x) / B n) < C0}\n                          \\<inter> {x \\<in> space M. abs((birkhoff_sum f (Suc n) x) / B (Suc n)) > a}\n                          \\<inter> {x \\<in> space M. abs(f ((T^^n) x)) < Cf}\""], ["proof (state)\nthis:\n  X =\n  {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n  {x \\<in> space M.\n   a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} \\<inter>\n  {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"(1 - alpha) + 3 * alpha + (1 - alpha) <\n            prob {x \\<in> space M. abs((birkhoff_sum f n x) / B n) < C0}\n          + prob {x \\<in> space M. abs((birkhoff_sum f (Suc n) x) / B (Suc n)) > a}\n          + prob {x \\<in> space M. abs(f ((T^^n) x)) < Cf}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha + 3 * alpha + (1 - alpha)\n    < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n      prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n      prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}", "using A B C"], ["proof (prove)\nusing this:\n  3 * alpha\n  < prob\n     {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>}\n  1 - alpha\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n  1 - alpha < prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n\ngoal (1 subgoal):\n 1. 1 - alpha + 3 * alpha + (1 - alpha)\n    < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n      prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n      prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}", "by auto"], ["proof (state)\nthis:\n  1 - alpha + 3 * alpha + (1 - alpha)\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n    prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  1 - alpha + 3 * alpha + (1 - alpha)\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n    prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... \\<le> 2 + prob X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n    prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n    \\<le> 2 + prob X", "unfolding X_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n    prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n    \\<le> 2 +\n          prob\n           ({x \\<in> space M.\n             \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n            {x \\<in> space M.\n             a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} \\<inter>\n            {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf})", "by (rule sum_measure_le_measure_inter3, auto)"], ["proof (state)\nthis:\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} +\n  prob {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n  \\<le> 2 + prob X\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  1 - alpha + 3 * alpha + (1 - alpha) < 2 + prob X", "have \"prob X > alpha\""], ["proof (prove)\nusing this:\n  1 - alpha + 3 * alpha + (1 - alpha) < 2 + prob X\n\ngoal (1 subgoal):\n 1. alpha < prob X", "by auto"], ["proof (state)\nthis:\n  alpha < prob X\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "then"], ["proof (chain)\npicking this:\n  alpha < prob X", "have \"X \\<noteq> {}\""], ["proof (prove)\nusing this:\n  alpha < prob X\n\ngoal (1 subgoal):\n 1. X \\<noteq> {}", "using \\<open>alpha > 0\\<close>"], ["proof (prove)\nusing this:\n  alpha < prob X\n  0 < alpha\n\ngoal (1 subgoal):\n 1. X \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  X \\<noteq> {}\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "then"], ["proof (chain)\npicking this:\n  X \\<noteq> {}", "obtain x where \"x \\<in> X\""], ["proof (prove)\nusing this:\n  X \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x. x \\<in> X \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have *: \"abs(birkhoff_sum f n x) \\<le> C0 * B n\"\n            \"abs(birkhoff_sum f (Suc n) x) \\<ge> a * B (Suc n)\"\n            \"abs(f((T^^n) x)) \\<le> Cf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n &&&\n    a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar> &&&\n    \\<bar>f ((T ^^ n) x)\\<bar> \\<le> Cf", "using \\<open>x \\<in> X\\<close> Bpos[of n] Bpos[of \"Suc n\"]"], ["proof (prove)\nusing this:\n  x \\<in> X\n  0 < B n\n  0 < B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n &&&\n    a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar> &&&\n    \\<bar>f ((T ^^ n) x)\\<bar> \\<le> Cf", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n          {x \\<in> space M.\n           a < \\<bar>birkhoff_sum f (Suc n) x / B (Suc n)\\<bar>} \\<inter>\n          {x \\<in> space M. \\<bar>f ((T ^^ n) x)\\<bar> < Cf}\n  0 < B n\n  0 < B (Suc n)\n\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n &&&\n    a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar> &&&\n    \\<bar>f ((T ^^ n) x)\\<bar> \\<le> Cf", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n\n  a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>\n  \\<bar>f ((T ^^ n) x)\\<bar> \\<le> Cf\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"a * B (Suc n) \\<le> abs(birkhoff_sum f (Suc n) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>", "using *"], ["proof (prove)\nusing this:\n  \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n\n  a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>\n  \\<bar>f ((T ^^ n) x)\\<bar> \\<le> Cf\n\ngoal (1 subgoal):\n 1. a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>", "by simp"], ["proof (state)\nthis:\n  a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... = abs(birkhoff_sum f n x + f ((T^^n) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f (Suc n) x\\<bar> =\n    \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar>", "by (metis Groups.add_ac(2) One_nat_def birkhoff_sum_1(3) birkhoff_sum_cocycle plus_1_eq_Suc)"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f (Suc n) x\\<bar> =\n  \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f (Suc n) x\\<bar> =\n  \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... \\<le> C0 * B n + Cf\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar> \\<le> C0 * B n + Cf", "using *"], ["proof (prove)\nusing this:\n  \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n\n  a * B (Suc n) \\<le> \\<bar>birkhoff_sum f (Suc n) x\\<bar>\n  \\<bar>f ((T ^^ n) x)\\<bar> \\<le> Cf\n\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar> \\<le> C0 * B n + Cf", "by auto"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar> \\<le> C0 * B n + Cf\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f n x + f ((T ^^ n) x)\\<bar> \\<le> C0 * B n + Cf\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "have \"... \\<le> C0 * B n + (a/2) * B (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C0 * B n + Cf \\<le> C0 * B n + a / 2 * B (Suc n)", "using \\<open>B (Suc n) \\<ge> 2 * Cf/a\\<close> \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  2 * Cf / a \\<le> B (Suc n)\n  0 < a\n\ngoal (1 subgoal):\n 1. C0 * B n + Cf \\<le> C0 * B n + a / 2 * B (Suc n)", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  C0 * B n + Cf \\<le> C0 * B n + a / 2 * B (Suc n)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  a * B (Suc n) \\<le> C0 * B n + a / 2 * B (Suc n)", "show \"B (Suc n) \\<le> (2 * C0/a) * B n\""], ["proof (prove)\nusing this:\n  a * B (Suc n) \\<le> C0 * B n + a / 2 * B (Suc n)\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "using \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  a * B (Suc n) \\<le> C0 * B n + a / 2 * B (Suc n)\n  0 < a\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> 2 * C0 / a * B n", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  B (Suc n) \\<le> 2 * C0 / a * B n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?n12; 2 * Cf / a \\<le> B (Suc ?n12)\\<rbrakk>\n  \\<Longrightarrow> B (Suc ?n12) \\<le> 2 * C0 / a * B ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "define C1 where \"C1 = Max {B(Suc n)/B n |n. n \\<le> N}\""], ["proof (state)\nthis:\n  C1 = Max {B (Suc n) / B n |n. n \\<le> N}\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "have *: \"B (Suc n) \\<le> max ((2 * C0/a)) C1 * B n\" if \"B (Suc n) > 2 * Cf/a\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "proof (cases \"n > N\")"], ["proof (state)\ngoal (2 subgoals):\n 1. N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n\n 2. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "case True"], ["proof (state)\nthis:\n  N < n\n\ngoal (2 subgoals):\n 1. N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n\n 2. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  N < n", "show ?thesis"], ["proof (prove)\nusing this:\n  N < n\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "using Main[OF less_imp_le[OF \\<open>n > N\\<close>] less_imp_le[OF that]] Bpos[of n]"], ["proof (prove)\nusing this:\n  N < n\n  B (Suc n) \\<le> 2 * C0 / a * B n\n  0 < B n\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "by (meson max.cobounded1 order_trans mult_le_cancel_iff1)"], ["proof (state)\nthis:\n  B (Suc n) \\<le> max (2 * C0 / a) C1 * B n\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "case False"], ["proof (state)\nthis:\n  \\<not> N < n\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  \\<not> N < n", "have \"n \\<le> N\""], ["proof (prove)\nusing this:\n  \\<not> N < n\n\ngoal (1 subgoal):\n 1. n \\<le> N", "by simp"], ["proof (state)\nthis:\n  n \\<le> N\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "have \"B(Suc n)/B n \\<le> C1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) / B n \\<le> C1", "unfolding C1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (Suc n) / B n \\<le> Max {B (Suc n) / B n |n. n \\<le> N}", "apply (rule Max_ge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite {B (Suc n) / B n |n. n \\<le> N}\n 2. B (Suc n) / B n \\<in> {B (Suc n) / B n |n. n \\<le> N}", "using \\<open>n \\<le> N\\<close>"], ["proof (prove)\nusing this:\n  n \\<le> N\n\ngoal (2 subgoals):\n 1. finite {B (Suc n) / B n |n. n \\<le> N}\n 2. B (Suc n) / B n \\<in> {B (Suc n) / B n |n. n \\<le> N}", "by auto"], ["proof (state)\nthis:\n  B (Suc n) / B n \\<le> C1\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  B (Suc n) / B n \\<le> C1", "have \"B (Suc n) \\<le> C1 * B n\""], ["proof (prove)\nusing this:\n  B (Suc n) / B n \\<le> C1\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C1 * B n", "using Bpos[of n]"], ["proof (prove)\nusing this:\n  B (Suc n) / B n \\<le> C1\n  0 < B n\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> C1 * B n", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  B (Suc n) \\<le> C1 * B n\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  B (Suc n) \\<le> C1 * B n", "show ?thesis"], ["proof (prove)\nusing this:\n  B (Suc n) \\<le> C1 * B n\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "using Bpos[of n]"], ["proof (prove)\nusing this:\n  B (Suc n) \\<le> C1 * B n\n  0 < B n\n\ngoal (1 subgoal):\n 1. B (Suc n) \\<le> max (2 * C0 / a) C1 * B n", "by (meson max.cobounded2 order_trans mult_le_cancel_iff1)"], ["proof (state)\nthis:\n  B (Suc n) \\<le> max (2 * C0 / a) C1 * B n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  2 * Cf / a < B (Suc ?n12) \\<Longrightarrow>\n  B (Suc ?n12) \\<le> max (2 * C0 / a) C1 * B ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C D.\n       (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n       1 \\<le> C", "apply (rule exI[of _ \"max ((2 * C0/a)) C1\"], rule exI[of _ \"2 * Cf/a\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>n.\n        B (Suc n) \\<le> 2 * Cf / a \\<or>\n        B (Suc n) \\<le> max (2 * C0 / a) C1 * B n) \\<and>\n    1 \\<le> max (2 * C0 / a) C1", "using * linorder_not_less \\<open>C0 \\<ge> a\\<close> \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  2 * Cf / a < B (Suc ?n12) \\<Longrightarrow>\n  B (Suc ?n12) \\<le> max (2 * C0 / a) C1 * B ?n12\n  (\\<not> ?x < ?y) = (?y \\<le> ?x)\n  a \\<le> C0\n  0 < a\n\ngoal (1 subgoal):\n 1. (\\<forall>n.\n        B (Suc n) \\<le> 2 * Cf / a \\<or>\n        B (Suc n) \\<le> max (2 * C0 / a) C1 * B n) \\<and>\n    1 \\<le> max (2 * C0 / a) C1", "by (auto intro!: max.coboundedI1)"], ["proof (state)\nthis:\n  \\<exists>C D.\n     (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n     1 \\<le> C\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Second, we prove that $B_{2n} \\leq E B_n$.\\<close>"], ["", "lemma upper_bound_E:\n  \"\\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "obtain a where a: \"a > 0\" \"PZ.prob {x. abs (x) > a} > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>0 < a; 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.not_Dirac_0_imp_positive_mass_away_0[OF non_trivial]"], ["proof (prove)\nusing this:\n  \\<exists>a>0. 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>0 < a; 0 < PZ.prob {x. a < \\<bar>x\\<bar>}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "define alpha where \"alpha = PZ.prob {x. abs (x) > a}/4\""], ["proof (state)\nthis:\n  alpha = PZ.prob {x. a < \\<bar>x\\<bar>} / 4\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "have \"alpha > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < alpha", "unfolding alpha_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a < \\<bar>x\\<bar>} / 4", "using a"], ["proof (prove)\nusing this:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 0 < PZ.prob {x. a < \\<bar>x\\<bar>} / 4", "by auto"], ["proof (state)\nthis:\n  0 < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "have A: \"PZ.prob {x. abs (x) > a} > 3 * alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}", "using a"], ["proof (prove)\nusing this:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}", "unfolding alpha_def"], ["proof (prove)\nusing this:\n  0 < a\n  0 < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * (PZ.prob {x. a < \\<bar>x\\<bar>} / 4)\n    < PZ.prob {x. a < \\<bar>x\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "obtain C0 where C0: \"PZ.prob {x. abs(x) \\<ge> C0} < alpha\" \"C0 \\<ge> a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha;\n         a \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using PZ.random_variable_small_tails[OF \\<open>alpha > 0\\<close>, of \"\\<lambda>x. x\"]"], ["proof (prove)\nusing this:\n  PZ.random_variable borel (\\<lambda>x. x) \\<Longrightarrow>\n  \\<exists>C.\n     PZ.prob {x \\<in> space Z. C \\<le> \\<bar>x\\<bar>} < alpha \\<and>\n     ?K \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>C0.\n        \\<lbrakk>PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha;\n         a \\<le> C0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha\n  a \\<le> C0\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "have A: \"eventually (\\<lambda>n. measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs (x) > a} > 3 * alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       3 * alpha\n       < Sigma_Algebra.measure\n          (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n          {x. a < \\<bar>x\\<bar>}", "apply (rule open_set_weak_conv_lsc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n. distr M borel (\\<lambda>x. birkhoff_sum f n x / B n)) Z\n 4. open {x. a < \\<bar>x\\<bar>}\n 5. 3 * alpha < PZ.prob {x. a < \\<bar>x\\<bar>}", "by (auto simp add: PZ.real_distribution_axioms conv A)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n        {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "have B: \"eventually (\\<lambda>n. measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs (x) \\<ge> C0} < alpha) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Sigma_Algebra.measure\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n        {x. C0 \\<le> \\<bar>x\\<bar>}\n       < alpha", "apply (rule closed_set_weak_conv_usc[of _ Z])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n.\n       real_distribution\n        (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n 2. real_distribution Z\n 3. weak_conv_m\n     (\\<lambda>n. distr M borel (\\<lambda>x. birkhoff_sum f n x / B n)) Z\n 4. closed {x. C0 \\<le> \\<bar>x\\<bar>}\n 5. PZ.prob {x. C0 \\<le> \\<bar>x\\<bar>} < alpha", "by (auto simp add: PZ.real_distribution_axioms conv C0)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Sigma_Algebra.measure\n      (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n      {x. C0 \\<le> \\<bar>x\\<bar>}\n     < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs x > a} > 3 * alpha\"\n                    \"\\<And>n. n \\<ge> N \\<Longrightarrow> measure (distr M borel (\\<lambda>x. (birkhoff_sum f n x) / B n)) {x. abs x \\<ge> C0} < alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr M borel\n                         (\\<lambda>x. birkhoff_sum f n x / B n))\n                       {x. a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using eventually_conj[OF A B]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in sequentially.\n     3 * alpha\n     < Sigma_Algebra.measure\n        (distr M borel (\\<lambda>xa. birkhoff_sum f x xa / B x))\n        {x. a < \\<bar>x\\<bar>} \\<and>\n     Sigma_Algebra.measure\n      (distr M borel (\\<lambda>xa. birkhoff_sum f x xa / B x))\n      {x. C0 \\<le> \\<bar>x\\<bar>}\n     < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr M borel\n                         (\\<lambda>x. birkhoff_sum f n x / B n))\n                       {x. a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        3 * alpha\n        < Sigma_Algebra.measure\n           (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n           {x. a < \\<bar>x\\<bar>} \\<and>\n        Sigma_Algebra.measure\n         (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n         {x. C0 \\<le> \\<bar>x\\<bar>}\n        < alpha\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>n.\n                    N \\<le> n \\<Longrightarrow>\n                    3 * alpha\n                    < Sigma_Algebra.measure\n                       (distr M borel\n                         (\\<lambda>x. birkhoff_sum f n x / B n))\n                       {x. a < \\<bar>x\\<bar>};\n         \\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            Sigma_Algebra.measure\n             (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n             {x. C0 \\<le> \\<bar>x\\<bar>}\n            < alpha\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow>\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f ?n12 x / B ?n12))\n     {x. a < \\<bar>x\\<bar>}\n  N \\<le> ?n12 \\<Longrightarrow>\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f ?n12 x / B ?n12))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "have Main: \"B (2 * n) \\<le> (2*C0/a) * B n\" if \"n \\<ge> N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"2 * n \\<ge> N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N \\<le> 2 * n", "using that"], ["proof (prove)\nusing this:\n  N \\<le> n\n\ngoal (1 subgoal):\n 1. N \\<le> 2 * n", "by auto"], ["proof (state)\nthis:\n  N \\<le> 2 * n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "let ?h = \"(\\<lambda>x. (birkhoff_sum f (2 * n) x) / B (2 * n))\""], ["proof (state)\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"measure (distr M borel ?h) {x. abs (x) > a}\n              = measure M (?h-` {x. abs (x) > a} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n     {x. a < \\<bar>x\\<bar>} =\n    prob\n     ((\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)) -`\n      {x. a < \\<bar>x\\<bar>} \\<inter>\n      space M)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)) -`\n    {x. a < \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)) -`\n    {x. a < \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"... = prob {x \\<in> space M. abs(?h x) > a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ((\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)) -`\n      {x. a < \\<bar>x\\<bar>} \\<inter>\n      space M) =\n    prob\n     {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}", "by (rule HOL.cong[of \"measure M\"], auto)"], ["proof (state)\nthis:\n  prob\n   ((\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)) -`\n    {x. a < \\<bar>x\\<bar>} \\<inter>\n    space M) =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}", "have A: \"prob {x \\<in> space M. abs((birkhoff_sum f (2 * n) x) / B (2 * n)) > a} > 3 * alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}", "using N(1)[OF \\<open>2 * n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n   {x. a < \\<bar>x\\<bar>} =\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}\n  3 * alpha\n  < Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f (2 * n) x / B (2 * n)))\n     {x. a < \\<bar>x\\<bar>}\n\ngoal (1 subgoal):\n 1. 3 * alpha\n    < prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}", "by auto"], ["proof (state)\nthis:\n  3 * alpha\n  < prob\n     {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "let ?h = \"(\\<lambda>x. (birkhoff_sum f n x) / B n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"measure (distr M borel ?h) {x. abs (x) \\<ge> C0}\n              = measure M (?h-` {x. abs (x) \\<ge> C0} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure\n     (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n     {x. C0 \\<le> \\<bar>x\\<bar>} =\n    prob\n     ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n      {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n      space M)", "by (rule measure_distr, auto)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob\n   ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"... = measure M {x \\<in> space M. abs(?h x) \\<ge> C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n      {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n      space M) =\n    prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}", "by (rule HOL.cong[of \"measure M\"], auto)"], ["proof (state)\nthis:\n  prob\n   ((\\<lambda>x. birkhoff_sum f n x / B n) -`\n    {x. C0 \\<le> \\<bar>x\\<bar>} \\<inter>\n    space M) =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}", "have B0: \"prob {x \\<in> space M. abs(?h x) \\<ge> C0} < alpha\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n    < alpha", "using N(2)[OF \\<open>n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>} =\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n  Sigma_Algebra.measure\n   (distr M borel (\\<lambda>x. birkhoff_sum f n x / B n))\n   {x. C0 \\<le> \\<bar>x\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n    < alpha", "by auto"], ["proof (state)\nthis:\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n  < alpha\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have *: \"{x \\<in> space M. abs(?h x) < C0} = space M - {x \\<in> space M. abs(?h x) \\<ge> C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} =\n    space M -\n    {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}", "by auto"], ["proof (state)\nthis:\n  {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} =\n  space M - {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have B: \"prob {x \\<in> space M. abs((birkhoff_sum f n x) / B n) < C0} > 1- alpha\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       (space M -\n        {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>})", "using B0 prob_compl"], ["proof (prove)\nusing this:\n  prob {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>}\n  < alpha\n  ?A \\<in> events \\<Longrightarrow> prob (space M - ?A) = 1 - prob ?A\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       (space M -\n        {x \\<in> space M. C0 \\<le> \\<bar>birkhoff_sum f n x / B n\\<bar>})", "by auto"], ["proof (state)\nthis:\n  1 - alpha\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"prob {x \\<in> space M. abs(?h ((T^^n) x)) < C0} = prob ((T^^n)-`{x \\<in> space M. abs(?h x) < C0} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     {x \\<in> space M.\n      \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0} =\n    prob\n     ((T ^^ n) -`\n      {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n      space M)", "by (rule HOL.cong[of \"prob\"], auto)"], ["proof (state)\nthis:\n  prob\n   {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0} =\n  prob\n   ((T ^^ n) -`\n    {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  prob\n   {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0} =\n  prob\n   ((T ^^ n) -`\n    {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n    space M)\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"... = prob {x \\<in> space M. abs(?h x) < C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob\n     ((T ^^ n) -`\n      {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n      space M) =\n    prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}", "using T_vrestr_same_measure(2)[of \"{x \\<in> space M. abs(?h x) < C0}\" n]"], ["proof (prove)\nusing this:\n  {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n  \\<in> events \\<Longrightarrow>\n  prob\n   ((T ^^ n) --`\n    {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}) =\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. prob\n     ((T ^^ n) -`\n      {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n      space M) =\n    prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}", "unfolding vimage_restr_def"], ["proof (prove)\nusing this:\n  {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n  \\<in> events \\<Longrightarrow>\n  prob\n   ((T ^^ n) -`\n    ({x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n     space M) \\<inter>\n    space M) =\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. prob\n     ((T ^^ n) -`\n      {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n      space M) =\n    prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}", "by auto"], ["proof (state)\nthis:\n  prob\n   ((T ^^ n) -`\n    {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n    space M) =\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  prob\n   {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0} =\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}", "have C: \"prob {x \\<in> space M. abs((birkhoff_sum f n ((T^^n) x)) / B n) < C0} > 1- alpha\""], ["proof (prove)\nusing this:\n  prob\n   {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0} =\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       {x \\<in> space M.\n        \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}", "using B"], ["proof (prove)\nusing this:\n  prob\n   {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0} =\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n  1 - alpha\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. 1 - alpha\n    < prob\n       {x \\<in> space M.\n        \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}", "by simp"], ["proof (state)\nthis:\n  1 - alpha\n  < prob\n     {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "define X where \"X = {x \\<in> space M. abs((birkhoff_sum f n x) / B n) < C0}\n                          \\<inter> {x \\<in> space M. abs((birkhoff_sum f (2* n) x) / B (2* n)) > a}\n                          \\<inter> {x \\<in> space M. abs((birkhoff_sum f n ((T^^n) x)) / B n) < C0}\""], ["proof (state)\nthis:\n  X =\n  {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n  {x \\<in> space M.\n   a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} \\<inter>\n  {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"(1 - alpha) + 3 * alpha + (1 - alpha) <\n            prob {x \\<in> space M. abs((birkhoff_sum f n x) / B n) < C0}\n          + prob {x \\<in> space M. abs((birkhoff_sum f (2* n) x) / B (2* n)) > a}\n          + prob {x \\<in> space M. abs((birkhoff_sum f n ((T^^n) x)) / B n) < C0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - alpha + 3 * alpha + (1 - alpha)\n    < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n      prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n      prob\n       {x \\<in> space M.\n        \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}", "using A B C"], ["proof (prove)\nusing this:\n  3 * alpha\n  < prob\n     {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>}\n  1 - alpha\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0}\n  1 - alpha\n  < prob\n     {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. 1 - alpha + 3 * alpha + (1 - alpha)\n    < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n      prob\n       {x \\<in> space M.\n        a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n      prob\n       {x \\<in> space M.\n        \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}", "by auto"], ["proof (state)\nthis:\n  1 - alpha + 3 * alpha + (1 - alpha)\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n    prob\n     {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  1 - alpha + 3 * alpha + (1 - alpha)\n  < prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n    prob\n     {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"... \\<le> 2 + prob X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n    prob\n     {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n    \\<le> 2 + prob X", "unfolding X_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n    prob\n     {x \\<in> space M.\n      a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n    prob\n     {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n    \\<le> 2 +\n          prob\n           ({x \\<in> space M.\n             \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n            {x \\<in> space M.\n             a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} \\<inter>\n            {x \\<in> space M.\n             \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0})", "by (rule sum_measure_le_measure_inter3, auto)"], ["proof (state)\nthis:\n  prob {x \\<in> space M. \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} +\n  prob\n   {x \\<in> space M. a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} +\n  prob\n   {x \\<in> space M. \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n  \\<le> 2 + prob X\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  1 - alpha + 3 * alpha + (1 - alpha) < 2 + prob X", "have \"prob X > alpha\""], ["proof (prove)\nusing this:\n  1 - alpha + 3 * alpha + (1 - alpha) < 2 + prob X\n\ngoal (1 subgoal):\n 1. alpha < prob X", "by auto"], ["proof (state)\nthis:\n  alpha < prob X\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "then"], ["proof (chain)\npicking this:\n  alpha < prob X", "have \"X \\<noteq> {}\""], ["proof (prove)\nusing this:\n  alpha < prob X\n\ngoal (1 subgoal):\n 1. X \\<noteq> {}", "using \\<open>alpha > 0\\<close>"], ["proof (prove)\nusing this:\n  alpha < prob X\n  0 < alpha\n\ngoal (1 subgoal):\n 1. X \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  X \\<noteq> {}\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "then"], ["proof (chain)\npicking this:\n  X \\<noteq> {}", "obtain x where \"x \\<in> X\""], ["proof (prove)\nusing this:\n  X \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x. x \\<in> X \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have *: \"abs(birkhoff_sum f n x) \\<le> C0 * B n\"\n            \"abs((birkhoff_sum f (2 * n) x)) \\<ge> a * B (2 * n)\"\n            \"abs((birkhoff_sum f n ((T^^n) x))) \\<le> C0 * B n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n &&&\n    a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar> &&&\n    \\<bar>birkhoff_sum f n ((T ^^ n) x)\\<bar> \\<le> C0 * B n", "using \\<open>x \\<in> X\\<close> Bpos[of n] Bpos[of \"2* n\"]"], ["proof (prove)\nusing this:\n  x \\<in> X\n  0 < B n\n  0 < B (2 * n)\n\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n &&&\n    a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar> &&&\n    \\<bar>birkhoff_sum f n ((T ^^ n) x)\\<bar> \\<le> C0 * B n", "unfolding X_def"], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> space M.\n           \\<bar>birkhoff_sum f n x / B n\\<bar> < C0} \\<inter>\n          {x \\<in> space M.\n           a < \\<bar>birkhoff_sum f (2 * n) x / B (2 * n)\\<bar>} \\<inter>\n          {x \\<in> space M.\n           \\<bar>birkhoff_sum f n ((T ^^ n) x) / B n\\<bar> < C0}\n  0 < B n\n  0 < B (2 * n)\n\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n &&&\n    a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar> &&&\n    \\<bar>birkhoff_sum f n ((T ^^ n) x)\\<bar> \\<le> C0 * B n", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n\n  a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>\n  \\<bar>birkhoff_sum f n ((T ^^ n) x)\\<bar> \\<le> C0 * B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"a * B (2 * n) \\<le> abs(birkhoff_sum f (2 * n) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>", "using *"], ["proof (prove)\nusing this:\n  \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n\n  a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>\n  \\<bar>birkhoff_sum f n ((T ^^ n) x)\\<bar> \\<le> C0 * B n\n\ngoal (1 subgoal):\n 1. a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>", "by simp"], ["proof (state)\nthis:\n  a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"... = abs(birkhoff_sum f n x + birkhoff_sum f n ((T^^n) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f (2 * n) x\\<bar> =\n    \\<bar>birkhoff_sum f n x + birkhoff_sum f n ((T ^^ n) x)\\<bar>", "unfolding birkhoff_sum_cocycle[of f n n x, symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f (2 * n) x\\<bar> =\n    \\<bar>birkhoff_sum f (n + n) x\\<bar>", "by (simp add: mult_2)"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f (2 * n) x\\<bar> =\n  \\<bar>birkhoff_sum f n x + birkhoff_sum f n ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "also"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f (2 * n) x\\<bar> =\n  \\<bar>birkhoff_sum f n x + birkhoff_sum f n ((T ^^ n) x)\\<bar>\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "have \"... \\<le> 2 * C0 * B n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x + birkhoff_sum f n ((T ^^ n) x)\\<bar>\n    \\<le> 2 * C0 * B n", "using *"], ["proof (prove)\nusing this:\n  \\<bar>birkhoff_sum f n x\\<bar> \\<le> C0 * B n\n  a * B (2 * n) \\<le> \\<bar>birkhoff_sum f (2 * n) x\\<bar>\n  \\<bar>birkhoff_sum f n ((T ^^ n) x)\\<bar> \\<le> C0 * B n\n\ngoal (1 subgoal):\n 1. \\<bar>birkhoff_sum f n x + birkhoff_sum f n ((T ^^ n) x)\\<bar>\n    \\<le> 2 * C0 * B n", "by auto"], ["proof (state)\nthis:\n  \\<bar>birkhoff_sum f n x + birkhoff_sum f n ((T ^^ n) x)\\<bar>\n  \\<le> 2 * C0 * B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "finally"], ["proof (chain)\npicking this:\n  a * B (2 * n) \\<le> 2 * C0 * B n", "show \"B (2 * n) \\<le> (2 * C0/a) * B n\""], ["proof (prove)\nusing this:\n  a * B (2 * n) \\<le> 2 * C0 * B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "using \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  a * B (2 * n) \\<le> 2 * C0 * B n\n  0 < a\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> 2 * C0 / a * B n", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  B (2 * n) \\<le> 2 * C0 / a * B n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?n12 \\<Longrightarrow> B (2 * ?n12) \\<le> 2 * C0 / a * B ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "define C1 where \"C1 = Max {B(2 * n)/B n |n. n \\<le> N}\""], ["proof (state)\nthis:\n  C1 = Max {B (2 * n) / B n |n. n \\<le> N}\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "have *: \"B (2*n) \\<le> max ((2 * C0/a)) C1 * B n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "proof (cases \"n > N\")"], ["proof (state)\ngoal (2 subgoals):\n 1. N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n\n 2. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "case True"], ["proof (state)\nthis:\n  N < n\n\ngoal (2 subgoals):\n 1. N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n\n 2. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  N < n", "show ?thesis"], ["proof (prove)\nusing this:\n  N < n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "using Main[OF less_imp_le[OF \\<open>n > N\\<close>]] Bpos[of n]"], ["proof (prove)\nusing this:\n  N < n\n  B (2 * n) \\<le> 2 * C0 / a * B n\n  0 < B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "by (meson max.cobounded1 order_trans mult_le_cancel_iff1)"], ["proof (state)\nthis:\n  B (2 * n) \\<le> max (2 * C0 / a) C1 * B n\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "case False"], ["proof (state)\nthis:\n  \\<not> N < n\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  \\<not> N < n", "have \"n \\<le> N\""], ["proof (prove)\nusing this:\n  \\<not> N < n\n\ngoal (1 subgoal):\n 1. n \\<le> N", "by simp"], ["proof (state)\nthis:\n  n \\<le> N\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "have \"B(2*n)/B n \\<le> C1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B (2 * n) / B n \\<le> C1", "unfolding C1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (2 * n) / B n \\<le> Max {B (2 * n) / B n |n. n \\<le> N}", "apply (rule Max_ge)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite {B (2 * n) / B n |n. n \\<le> N}\n 2. B (2 * n) / B n \\<in> {B (2 * n) / B n |n. n \\<le> N}", "using \\<open>n \\<le> N\\<close>"], ["proof (prove)\nusing this:\n  n \\<le> N\n\ngoal (2 subgoals):\n 1. finite {B (2 * n) / B n |n. n \\<le> N}\n 2. B (2 * n) / B n \\<in> {B (2 * n) / B n |n. n \\<le> N}", "by auto"], ["proof (state)\nthis:\n  B (2 * n) / B n \\<le> C1\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  B (2 * n) / B n \\<le> C1", "have \"B (2*n) \\<le> C1 * B n\""], ["proof (prove)\nusing this:\n  B (2 * n) / B n \\<le> C1\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> C1 * B n", "using Bpos[of n]"], ["proof (prove)\nusing this:\n  B (2 * n) / B n \\<le> C1\n  0 < B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> C1 * B n", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  B (2 * n) \\<le> C1 * B n\n\ngoal (1 subgoal):\n 1. \\<not> N < n \\<Longrightarrow> B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "then"], ["proof (chain)\npicking this:\n  B (2 * n) \\<le> C1 * B n", "show ?thesis"], ["proof (prove)\nusing this:\n  B (2 * n) \\<le> C1 * B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "using Bpos[of n]"], ["proof (prove)\nusing this:\n  B (2 * n) \\<le> C1 * B n\n  0 < B n\n\ngoal (1 subgoal):\n 1. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "by (meson max.cobounded2 order_trans mult_le_cancel_iff1)"], ["proof (state)\nthis:\n  B (2 * n) \\<le> max (2 * C0 / a) C1 * B n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  B (2 * ?n12) \\<le> max (2 * C0 / a) C1 * B ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n", "apply (rule exI[of _ \"max ((2 * C0/a)) C1\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "using *"], ["proof (prove)\nusing this:\n  B (2 * ?n12) \\<le> max (2 * C0 / a) C1 * B ?n12\n\ngoal (1 subgoal):\n 1. \\<forall>n. B (2 * n) \\<le> max (2 * C0 / a) C1 * B n", "by auto"], ["proof (state)\nthis:\n  \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Finally, we combine the estimates in the two lemmas above to show that $B_n$ grows\nat most polynomially.\\<close>"], ["", "theorem polynomial_growth:\n  \"\\<exists>C K. \\<forall>n>0. B n \\<le> C * (real n)^K\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "obtain C D where C: \"C \\<ge> 1\" \"\\<And>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>C D.\n        \\<lbrakk>1 \\<le> C;\n         \\<And>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using upper_bound_CD"], ["proof (prove)\nusing this:\n  \\<exists>C D.\n     (\\<forall>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n) \\<and>\n     1 \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>C D.\n        \\<lbrakk>1 \\<le> C;\n         \\<And>n. B (Suc n) \\<le> D \\<or> B (Suc n) \\<le> C * B n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  1 \\<le> C\n  B (Suc ?n12) \\<le> D \\<or> B (Suc ?n12) \\<le> C * B ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "obtain E where E: \"\\<And>n. B (2 * n) \\<le> E * B n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>E.\n        (\\<And>n. B (2 * n) \\<le> E * B n) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using upper_bound_E"], ["proof (prove)\nusing this:\n  \\<exists>E. \\<forall>n. B (2 * n) \\<le> E * B n\n\ngoal (1 subgoal):\n 1. (\\<And>E.\n        (\\<And>n. B (2 * n) \\<le> E * B n) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  B (2 * ?n12) \\<le> E * B ?n12\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "have \"E \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> E", "using E[of 0] Bpos[of 0]"], ["proof (prove)\nusing this:\n  B (2 * 0) \\<le> E * B 0\n  0 < B 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> E", "by auto"], ["proof (state)\nthis:\n  1 \\<le> E\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "obtain k::nat where \"log 2 (max C E) \\<le> k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k.\n        log 2 (max C E) \\<le> real k \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using real_arch_simple[of \"log 2 (max C E)\"]"], ["proof (prove)\nusing this:\n  \\<exists>n. log 2 (max C E) \\<le> real n\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        log 2 (max C E) \\<le> real k \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  log 2 (max C E) \\<le> real k\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "then"], ["proof (chain)\npicking this:\n  log 2 (max C E) \\<le> real k", "have \"max C E \\<le> 2^k\""], ["proof (prove)\nusing this:\n  log 2 (max C E) \\<le> real k\n\ngoal (1 subgoal):\n 1. max C E \\<le> 2 ^ k", "by (meson less_log_of_power not_less one_less_numeral_iff semiring_norm(76))"], ["proof (state)\nthis:\n  max C E \\<le> 2 ^ k\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "then"], ["proof (chain)\npicking this:\n  max C E \\<le> 2 ^ k", "have \"C \\<le> 2^k\" \"E \\<le> 2^k\""], ["proof (prove)\nusing this:\n  max C E \\<le> 2 ^ k\n\ngoal (1 subgoal):\n 1. C \\<le> 2 ^ k &&& E \\<le> 2 ^ k", "by auto"], ["proof (state)\nthis:\n  C \\<le> 2 ^ k\n  E \\<le> 2 ^ k\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "define P where \"P = max D (B 0)\""], ["proof (state)\nthis:\n  P = max D (B 0)\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "have \"P > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < P", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < max D (B 0)", "using Bpos[of 0]"], ["proof (prove)\nusing this:\n  0 < B 0\n\ngoal (1 subgoal):\n 1. 0 < max D (B 0)", "by auto"], ["proof (state)\nthis:\n  0 < P\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "have Main: \"\\<And>n. n < 2^r \\<Longrightarrow> B n \\<le> P * 2^(2 * k * r)\" for r"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. n < 2 ^ r \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * r)", "proof (induction r)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n. n < 2 ^ 0 \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * 0)\n 2. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "case 0"], ["proof (state)\nthis:\n  n < 2 ^ 0\n\ngoal (2 subgoals):\n 1. \\<And>n. n < 2 ^ 0 \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * 0)\n 2. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "fix n::nat"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n. n < 2 ^ 0 \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * 0)\n 2. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "assume \"n < 2^0\""], ["proof (state)\nthis:\n  n < 2 ^ 0\n\ngoal (2 subgoals):\n 1. \\<And>n. n < 2 ^ 0 \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * 0)\n 2. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  n < 2 ^ 0", "show \"B n \\<le> P * 2 ^ (2 * k * 0)\""], ["proof (prove)\nusing this:\n  n < 2 ^ 0\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * 0)", "unfolding P_def"], ["proof (prove)\nusing this:\n  n < 2 ^ 0\n\ngoal (1 subgoal):\n 1. B n \\<le> max D (B 0) * 2 ^ (2 * k * 0)", "by auto"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * 0)\n\ngoal (1 subgoal):\n 1. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "case (Suc r)"], ["proof (state)\nthis:\n  ?n12 < 2 ^ r \\<Longrightarrow> B ?n12 \\<le> P * 2 ^ (2 * k * r)\n  n < 2 ^ Suc r\n\ngoal (1 subgoal):\n 1. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "fix n::nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "assume \"n < 2^(Suc r)\""], ["proof (state)\nthis:\n  n < 2 ^ Suc r\n\ngoal (1 subgoal):\n 1. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "consider \"even n\" | \"B n \\<le> D\" | \"odd n \\<and> B n > D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>even n \\<Longrightarrow> thesis;\n     B n \\<le> D \\<Longrightarrow> thesis;\n     odd n \\<and> D < B n \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by linarith"], ["proof (state)\nthis:\n  \\<lbrakk>even n \\<Longrightarrow> ?thesis12;\n   B n \\<le> D \\<Longrightarrow> ?thesis12;\n   odd n \\<and> D < B n \\<Longrightarrow> ?thesis12\\<rbrakk>\n  \\<Longrightarrow> ?thesis12\n\ngoal (1 subgoal):\n 1. \\<And>r n.\n       \\<lbrakk>\\<And>n.\n                   n < 2 ^ r \\<Longrightarrow>\n                   B n \\<le> P * 2 ^ (2 * k * r);\n        n < 2 ^ Suc r\\<rbrakk>\n       \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>even n \\<Longrightarrow> ?thesis12;\n   B n \\<le> D \\<Longrightarrow> ?thesis12;\n   odd n \\<and> D < B n \\<Longrightarrow> ?thesis12\\<rbrakk>\n  \\<Longrightarrow> ?thesis12", "show \"B n \\<le> P * 2 ^ (2 * k * Suc r)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>even n \\<Longrightarrow> ?thesis12;\n   B n \\<le> D \\<Longrightarrow> ?thesis12;\n   odd n \\<and> D < B n \\<Longrightarrow> ?thesis12\\<rbrakk>\n  \\<Longrightarrow> ?thesis12\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * Suc r)", "proof (cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "case 1"], ["proof (state)\nthis:\n  even n\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  even n", "obtain m where m: \"n = 2 * m\""], ["proof (prove)\nusing this:\n  even n\n\ngoal (1 subgoal):\n 1. (\\<And>m. n = 2 * m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (rule evenE)"], ["proof (state)\nthis:\n  n = 2 * m\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"m < 2^r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m < 2 ^ r", "using \\<open>n < 2^(Suc r)\\<close>"], ["proof (prove)\nusing this:\n  n < 2 ^ Suc r\n\ngoal (1 subgoal):\n 1. m < 2 ^ r", "unfolding m"], ["proof (prove)\nusing this:\n  2 * m < 2 ^ Suc r\n\ngoal (1 subgoal):\n 1. m < 2 ^ r", "by auto"], ["proof (state)\nthis:\n  m < 2 ^ r\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  m < 2 ^ r", "have *: \"B m \\<le> P * 2^(2 * k * r)\""], ["proof (prove)\nusing this:\n  m < 2 ^ r\n\ngoal (1 subgoal):\n 1. B m \\<le> P * 2 ^ (2 * k * r)", "using Suc.IH"], ["proof (prove)\nusing this:\n  m < 2 ^ r\n  ?n12 < 2 ^ r \\<Longrightarrow> B ?n12 \\<le> P * 2 ^ (2 * k * r)\n\ngoal (1 subgoal):\n 1. B m \\<le> P * 2 ^ (2 * k * r)", "by auto"], ["proof (state)\nthis:\n  B m \\<le> P * 2 ^ (2 * k * r)\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"B n \\<le> E * B m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B n \\<le> E * B m", "unfolding m"], ["proof (prove)\ngoal (1 subgoal):\n 1. B (2 * m) \\<le> E * B m", "using E"], ["proof (prove)\nusing this:\n  B (2 * ?n12) \\<le> E * B ?n12\n\ngoal (1 subgoal):\n 1. B (2 * m) \\<le> E * B m", "by simp"], ["proof (state)\nthis:\n  B n \\<le> E * B m\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  B n \\<le> E * B m\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> 2^k * B m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. E * B m \\<le> 2 ^ k * B m", "apply (rule mult_right_mono[OF _ less_imp_le[OF Bpos[of m]]])"], ["proof (prove)\ngoal (1 subgoal):\n 1. E \\<le> 2 ^ k", "using \\<open>E \\<le> 2^k\\<close>"], ["proof (prove)\nusing this:\n  E \\<le> 2 ^ k\n\ngoal (1 subgoal):\n 1. E \\<le> 2 ^ k", "by simp"], ["proof (state)\nthis:\n  E * B m \\<le> 2 ^ k * B m\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  E * B m \\<le> 2 ^ k * B m\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> 2^k * (P * 2^(2 * k * r))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ k * B m \\<le> 2 ^ k * (P * 2 ^ (2 * k * r))", "apply (rule mult_left_mono[OF *])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> 2 ^ k", "by auto"], ["proof (state)\nthis:\n  2 ^ k * B m \\<le> 2 ^ k * (P * 2 ^ (2 * k * r))\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  2 ^ k * B m \\<le> 2 ^ k * (P * 2 ^ (2 * k * r))\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... = P * 2^(2 * k * r + k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ k * (P * 2 ^ (2 * k * r)) = P * 2 ^ (2 * k * r + k)", "by (auto simp add: algebra_simps power_add)"], ["proof (state)\nthis:\n  2 ^ k * (P * 2 ^ (2 * k * r)) = P * 2 ^ (2 * k * r + k)\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  2 ^ k * (P * 2 ^ (2 * k * r)) = P * 2 ^ (2 * k * r + k)\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> P * 2^(2 * k * Suc r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P * 2 ^ (2 * k * r + k) \\<le> P * 2 ^ (2 * k * Suc r)", "apply (rule mult_left_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 2 ^ (2 * k * r + k) \\<le> 2 ^ (2 * k * Suc r)\n 2. 0 \\<le> P", "using \\<open>P > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < P\n\ngoal (2 subgoals):\n 1. 2 ^ (2 * k * r + k) \\<le> 2 ^ (2 * k * Suc r)\n 2. 0 \\<le> P", "by auto"], ["proof (state)\nthis:\n  P * 2 ^ (2 * k * r + k) \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (3 subgoals):\n 1. even n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 3. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "finally"], ["proof (chain)\npicking this:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)", "show ?thesis"], ["proof (prove)\nusing this:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * Suc r)", "by simp"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (2 subgoals):\n 1. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "case 2"], ["proof (state)\nthis:\n  B n \\<le> D\n\ngoal (2 subgoals):\n 1. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"D \\<le> P * 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D \\<le> P * 1", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. D \\<le> max D (B 0) * 1", "by auto"], ["proof (state)\nthis:\n  D \\<le> P * 1\n\ngoal (2 subgoals):\n 1. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  D \\<le> P * 1\n\ngoal (2 subgoals):\n 1. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> P * 2^(2 * k * Suc r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P * 1 \\<le> P * 2 ^ (2 * k * Suc r)", "by (rule mult_left_mono[OF _ less_imp_le[OF \\<open>P > 0\\<close>]], auto)"], ["proof (state)\nthis:\n  P * 1 \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (2 subgoals):\n 1. B n \\<le> D \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)\n 2. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "finally"], ["proof (chain)\npicking this:\n  D \\<le> P * 2 ^ (2 * k * Suc r)", "show ?thesis"], ["proof (prove)\nusing this:\n  D \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * Suc r)", "using 2"], ["proof (prove)\nusing this:\n  D \\<le> P * 2 ^ (2 * k * Suc r)\n  B n \\<le> D\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * Suc r)", "by simp"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "case 3"], ["proof (state)\nthis:\n  odd n \\<and> D < B n\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  odd n \\<and> D < B n", "obtain m where m: \"n = 2 * m + 1\""], ["proof (prove)\nusing this:\n  odd n \\<and> D < B n\n\ngoal (1 subgoal):\n 1. (\\<And>m. n = 2 * m + 1 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using oddE"], ["proof (prove)\nusing this:\n  odd n \\<and> D < B n\n  \\<lbrakk>odd ?a;\n   \\<And>b. ?a = (2::?'a) * b + (1::?'a) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>m. n = 2 * m + 1 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  n = 2 * m + 1\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"m < 2^r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m < 2 ^ r", "using \\<open>n < 2^(Suc r)\\<close>"], ["proof (prove)\nusing this:\n  n < 2 ^ Suc r\n\ngoal (1 subgoal):\n 1. m < 2 ^ r", "unfolding m"], ["proof (prove)\nusing this:\n  2 * m + 1 < 2 ^ Suc r\n\ngoal (1 subgoal):\n 1. m < 2 ^ r", "by auto"], ["proof (state)\nthis:\n  m < 2 ^ r\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  m < 2 ^ r", "have *: \"B m \\<le> P * 2^(2 * k * r)\""], ["proof (prove)\nusing this:\n  m < 2 ^ r\n\ngoal (1 subgoal):\n 1. B m \\<le> P * 2 ^ (2 * k * r)", "using Suc.IH"], ["proof (prove)\nusing this:\n  m < 2 ^ r\n  ?n12 < 2 ^ r \\<Longrightarrow> B ?n12 \\<le> P * 2 ^ (2 * k * r)\n\ngoal (1 subgoal):\n 1. B m \\<le> P * 2 ^ (2 * k * r)", "by auto"], ["proof (state)\nthis:\n  B m \\<le> P * 2 ^ (2 * k * r)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"B n > D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D < B n", "using 3"], ["proof (prove)\nusing this:\n  odd n \\<and> D < B n\n\ngoal (1 subgoal):\n 1. D < B n", "by auto"], ["proof (state)\nthis:\n  D < B n\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "then"], ["proof (chain)\npicking this:\n  D < B n", "have \"B n \\<le> C * B (2 * m)\""], ["proof (prove)\nusing this:\n  D < B n\n\ngoal (1 subgoal):\n 1. B n \\<le> C * B (2 * m)", "unfolding m"], ["proof (prove)\nusing this:\n  D < B (2 * m + 1)\n\ngoal (1 subgoal):\n 1. B (2 * m + 1) \\<le> C * B (2 * m)", "using C(2)[of \"2 * m\"]"], ["proof (prove)\nusing this:\n  D < B (2 * m + 1)\n  B (Suc (2 * m)) \\<le> D \\<or> B (Suc (2 * m)) \\<le> C * B (2 * m)\n\ngoal (1 subgoal):\n 1. B (2 * m + 1) \\<le> C * B (2 * m)", "by auto"], ["proof (state)\nthis:\n  B n \\<le> C * B (2 * m)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  B n \\<le> C * B (2 * m)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> C * (E * B m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * B (2 * m) \\<le> C * (E * B m)", "apply (rule mult_left_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. B (2 * m) \\<le> E * B m\n 2. 0 \\<le> C", "using \\<open>C \\<ge> 1\\<close> E[of m]"], ["proof (prove)\nusing this:\n  1 \\<le> C\n  B (2 * m) \\<le> E * B m\n\ngoal (2 subgoals):\n 1. B (2 * m) \\<le> E * B m\n 2. 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  C * B (2 * m) \\<le> C * (E * B m)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  C * B (2 * m) \\<le> C * (E * B m)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> 2^k * (2^k * B m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C * (E * B m) \\<le> 2 ^ k * (2 ^ k * B m)", "apply (intro mult_mono)"], ["proof (prove)\ngoal (7 subgoals):\n 1. C \\<le> 2 ^ k\n 2. E \\<le> 2 ^ k\n 3. B m \\<le> B m\n 4. 0 \\<le> 2 ^ k\n 5. 0 \\<le> B m\n 6. 0 \\<le> 2 ^ k\n 7. 0 \\<le> E * B m", "using \\<open>C \\<le> 2^k\\<close> \\<open>C \\<ge> 1\\<close> \\<open>E \\<ge> 1\\<close> \\<open>E \\<le> 2^k\\<close> Bpos[of m]"], ["proof (prove)\nusing this:\n  C \\<le> 2 ^ k\n  1 \\<le> C\n  1 \\<le> E\n  E \\<le> 2 ^ k\n  0 < B m\n\ngoal (7 subgoals):\n 1. C \\<le> 2 ^ k\n 2. E \\<le> 2 ^ k\n 3. B m \\<le> B m\n 4. 0 \\<le> 2 ^ k\n 5. 0 \\<le> B m\n 6. 0 \\<le> 2 ^ k\n 7. 0 \\<le> E * B m", "by auto"], ["proof (state)\nthis:\n  C * (E * B m) \\<le> 2 ^ k * (2 ^ k * B m)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  C * (E * B m) \\<le> 2 ^ k * (2 ^ k * B m)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... \\<le> 2^k * (2^k * (P * 2^(2 * k * r)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ k * (2 ^ k * B m) \\<le> 2 ^ k * (2 ^ k * (P * 2 ^ (2 * k * r)))", "apply (intro mult_left_mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. B m \\<le> P * 2 ^ (2 * k * r)\n 2. 0 \\<le> 2 ^ k\n 3. 0 \\<le> 2 ^ k", "using *"], ["proof (prove)\nusing this:\n  B m \\<le> P * 2 ^ (2 * k * r)\n\ngoal (3 subgoals):\n 1. B m \\<le> P * 2 ^ (2 * k * r)\n 2. 0 \\<le> 2 ^ k\n 3. 0 \\<le> 2 ^ k", "by auto"], ["proof (state)\nthis:\n  2 ^ k * (2 ^ k * B m) \\<le> 2 ^ k * (2 ^ k * (P * 2 ^ (2 * k * r)))\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "also"], ["proof (state)\nthis:\n  2 ^ k * (2 ^ k * B m) \\<le> 2 ^ k * (2 ^ k * (P * 2 ^ (2 * k * r)))\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "have \"... = P * 2^(2 * k * Suc r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ k * (2 ^ k * (P * 2 ^ (2 * k * r))) = P * 2 ^ (2 * k * Suc r)", "using \\<open>P > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < P\n\ngoal (1 subgoal):\n 1. 2 ^ k * (2 ^ k * (P * 2 ^ (2 * k * r))) = P * 2 ^ (2 * k * Suc r)", "by (simp add: algebra_simps divide_simps mult_2_right power_add)"], ["proof (state)\nthis:\n  2 ^ k * (2 ^ k * (P * 2 ^ (2 * k * r))) = P * 2 ^ (2 * k * Suc r)\n\ngoal (1 subgoal):\n 1. odd n \\<and> D < B n \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * Suc r)", "finally"], ["proof (chain)\npicking this:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)", "show ?thesis"], ["proof (prove)\nusing this:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * Suc r)", "by simp"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * Suc r)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n12 < 2 ^ ?r13 \\<Longrightarrow> B ?n12 \\<le> P * 2 ^ (2 * k * ?r13)\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "have I: \"B n \\<le> (P * 2^(2 * k)) * n^(2 * k)\" if \"n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "define r::nat where \"r = nat(floor(log 2 (real n)))\""], ["proof (state)\nthis:\n  r = nat \\<lfloor>log 2 (real n)\\<rfloor>\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "have *: \"int r = floor(log 2 (real n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. int r = \\<lfloor>log 2 (real n)\\<rfloor>", "unfolding r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. int (nat \\<lfloor>log 2 (real n)\\<rfloor>) =\n    \\<lfloor>log 2 (real n)\\<rfloor>", "using \\<open>0 < n\\<close>"], ["proof (prove)\nusing this:\n  0 < n\n\ngoal (1 subgoal):\n 1. int (nat \\<lfloor>log 2 (real n)\\<rfloor>) =\n    \\<lfloor>log 2 (real n)\\<rfloor>", "by auto"], ["proof (state)\nthis:\n  int r = \\<lfloor>log 2 (real n)\\<rfloor>\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "have I: \"2^r \\<le> n \\<and> n < 2^(r+1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)", "using floor_log_nat_eq_powr_iff[OF _ \\<open>n > 0\\<close>, of 2 r] *"], ["proof (prove)\nusing this:\n  2 \\<le> 2 \\<Longrightarrow>\n  (\\<lfloor>log (real 2) (real n)\\<rfloor> = int r) =\n  (2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1))\n  int r = \\<lfloor>log 2 (real n)\\<rfloor>\n\ngoal (1 subgoal):\n 1. 2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)", "by auto"], ["proof (state)\nthis:\n  2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "then"], ["proof (chain)\npicking this:\n  2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)", "have \"B n \\<le> P * 2^(2 * k * (r+1))\""], ["proof (prove)\nusing this:\n  2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * (r + 1))", "using Main[of n \"r+1\"]"], ["proof (prove)\nusing this:\n  2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)\n  n < 2 ^ (r + 1) \\<Longrightarrow> B n \\<le> P * 2 ^ (2 * k * (r + 1))\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k * (r + 1))", "by auto"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * (r + 1))\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "also"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k * (r + 1))\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "have \"... = (P * 2^(2 * k)) * ((2^r)^(2*k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P * 2 ^ (2 * k * (r + 1)) = P * 2 ^ (2 * k) * (2 ^ r) ^ (2 * k)", "by (simp add: power_add power_mult[symmetric])"], ["proof (state)\nthis:\n  P * 2 ^ (2 * k * (r + 1)) = P * 2 ^ (2 * k) * (2 ^ r) ^ (2 * k)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "also"], ["proof (state)\nthis:\n  P * 2 ^ (2 * k * (r + 1)) = P * 2 ^ (2 * k) * (2 ^ r) ^ (2 * k)\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "have \"... \\<le> (P * 2^(2 * k)) * n^(2 * k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P * 2 ^ (2 * k) * (2 ^ r) ^ (2 * k)\n    \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "apply (rule mult_left_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (2 ^ r) ^ (2 * k) \\<le> real (n ^ (2 * k))\n 2. 0 \\<le> P * 2 ^ (2 * k)", "using I \\<open>P > 0\\<close>"], ["proof (prove)\nusing this:\n  2 ^ r \\<le> n \\<and> n < 2 ^ (r + 1)\n  0 < P\n\ngoal (2 subgoals):\n 1. (2 ^ r) ^ (2 * k) \\<le> real (n ^ (2 * k))\n 2. 0 \\<le> P * 2 ^ (2 * k)", "by (auto simp add: power_mono)"], ["proof (state)\nthis:\n  P * 2 ^ (2 * k) * (2 ^ r) ^ (2 * k)\n  \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "finally"], ["proof (chain)\npicking this:\n  B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "show ?thesis"], ["proof (prove)\nusing this:\n  B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))\n\ngoal (1 subgoal):\n 1. B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))", "by simp"], ["proof (state)\nthis:\n  B n \\<le> P * 2 ^ (2 * k) * real (n ^ (2 * k))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?n12 \\<Longrightarrow>\n  B ?n12 \\<le> P * 2 ^ (2 * k) * real (?n12 ^ (2 * k))\n\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K", "apply (rule exI[of _ \"P * 2^(2 * k)\"], rule exI[of _ \"2 * k\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n>0. B n \\<le> P * 2 ^ (2 * k) * real n ^ (2 * k)", "using I"], ["proof (prove)\nusing this:\n  0 < ?n12 \\<Longrightarrow>\n  B ?n12 \\<le> P * 2 ^ (2 * k) * real (?n12 ^ (2 * k))\n\ngoal (1 subgoal):\n 1. \\<forall>n>0. B n \\<le> P * 2 ^ (2 * k) * real n ^ (2 * k)", "by auto"], ["proof (state)\nthis:\n  \\<exists>C K. \\<forall>n>0. B n \\<le> C * real n ^ K\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*of locale locale pmpt_limit*)"], ["", "end"], ["", "(*of Normalizing_Sequences.thy*)"]]}