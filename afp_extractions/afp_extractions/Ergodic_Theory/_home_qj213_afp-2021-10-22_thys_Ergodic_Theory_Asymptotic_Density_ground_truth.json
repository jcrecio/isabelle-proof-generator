{"file_name": "/home/qj213/afp-2021-10-22/thys/Ergodic_Theory/Asymptotic_Density.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Ergodic_Theory", "problem_names": ["lemma upper_asymptotic_density_in_01:\n  \"ereal(upper_asymptotic_density A) = limsup (\\<lambda>n. card(A \\<inter> {..<n})/n)\"\n  \"upper_asymptotic_density A \\<le> 1\"\n  \"upper_asymptotic_density A \\<ge> 0\"", "lemma lem_ge_sum:\n  fixes l x y::real\n  assumes \"l>x+y\"\n  shows \"\\<exists>lx ly. l = lx + ly \\<and> lx > x \\<and> ly > y\"", "lemma upper_asymptotic_density_union:\n  \"upper_asymptotic_density (A \\<union> B) \\<le> upper_asymptotic_density A + upper_asymptotic_density B\"", "lemma upper_asymptotic_density_subset:\n  assumes \"A \\<subseteq> B\"\n  shows \"upper_asymptotic_density A \\<le> upper_asymptotic_density B\"", "lemma upper_asymptotic_density_lim:\n  assumes \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> l\"\n  shows \"upper_asymptotic_density A = l\"", "lemma upper_asymptotic_density_0_diff:\n  assumes \"A \\<subseteq> B\" \"upper_asymptotic_density (B-A) = 0\"\n  shows \"upper_asymptotic_density A = upper_asymptotic_density B\"", "lemma upper_asymptotic_density_0_Delta:\n  assumes \"upper_asymptotic_density (A \\<Delta> B) = 0\"\n  shows \"upper_asymptotic_density A = upper_asymptotic_density B\"", "lemma upper_asymptotic_density_finite:\n  assumes \"finite A\"\n  shows \"upper_asymptotic_density A = 0\"", "lemma upper_asymptotic_density_bdd_interval [simp]:\n  \"upper_asymptotic_density {} = 0\"\n  \"upper_asymptotic_density {..N} = 0\"\n  \"upper_asymptotic_density {..<N} = 0\"\n  \"upper_asymptotic_density {n..N} = 0\"\n  \"upper_asymptotic_density {n..<N} = 0\"\n  \"upper_asymptotic_density {n<..N} = 0\"\n  \"upper_asymptotic_density {n<..<N} = 0\"", "lemma upper_asymptotic_density_finite_Union:\n  assumes \"finite I\"\n  shows \"upper_asymptotic_density (\\<Union>i\\<in>I. A i) \\<le> (\\<Sum>i\\<in>I. upper_asymptotic_density (A i))\"", "lemma upper_asymptotic_density_shift:\n  fixes k::nat and l::int\n  shows \"ereal(upper_asymptotic_density A) = limsup (\\<lambda>n. card(A \\<inter> {k..nat(n+l)}) / n)\"", "lemma upper_asymptotic_density_meas [measurable]:\n  assumes [measurable]: \"\\<And>(n::nat). Measurable.pred M (P n)\"\n  shows \"(\\<lambda>x. upper_asymptotic_density {n. P n x}) \\<in> borel_measurable M\"", "lemma upper_asymptotic_density_zero_union:\n  assumes \"upper_asymptotic_density A = 0\" \"upper_asymptotic_density B = 0\"\n  shows \"upper_asymptotic_density (A \\<union> B) = 0\"", "lemma upper_asymptotic_density_zero_finite_Union:\n  assumes \"finite I\" \"\\<And>i. i \\<in> I \\<Longrightarrow> upper_asymptotic_density (A i) = 0\"\n  shows \"upper_asymptotic_density (\\<Union>i\\<in>I. A i) = 0\"", "lemma lower_asymptotic_density_in_01:\n  \"ereal(lower_asymptotic_density A) = liminf (\\<lambda>n. card(A \\<inter> {..<n})/n)\"\n  \"lower_asymptotic_density A \\<le> 1\"\n  \"lower_asymptotic_density A \\<ge> 0\"", "lemma lower_asymptotic_density_le_upper:\n  \"lower_asymptotic_density A \\<le> upper_asymptotic_density A\"", "lemma lower_asymptotic_density_eq_upper:\n  assumes \"lower_asymptotic_density A = l\" \"upper_asymptotic_density A = l\"\n  shows \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> l\"", "lemma upper_asymptotic_density_zero_lim:\n  assumes \"upper_asymptotic_density A = 0\"\n  shows \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> 0\"", "lemma lower_asymptotic_density_one_lim:\n  assumes \"lower_asymptotic_density A = 1\"\n  shows \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> 1\"", "lemma lower_upper_asymptotic_density_complement:\n  \"lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)\"", "lemma lower_asymptotic_density_intersection:\n  \"lower_asymptotic_density A + lower_asymptotic_density B \\<le> lower_asymptotic_density (A \\<inter> B) + 1\"", "lemma lower_asymptotic_density_subset:\n  assumes \"A \\<subseteq> B\"\n  shows \"lower_asymptotic_density A \\<le> lower_asymptotic_density B\"", "lemma lower_asymptotic_density_lim:\n  assumes \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> l\"\n  shows \"lower_asymptotic_density A = l\"", "lemma lower_asymptotic_density_finite:\n  assumes \"finite A\"\n  shows \"lower_asymptotic_density A = 0\"", "lemma lower_asymptotic_density_bdd_interval [simp]:\n  \"lower_asymptotic_density {} = 0\"\n  \"lower_asymptotic_density {..N} = 0\"\n  \"lower_asymptotic_density {..<N} = 0\"\n  \"lower_asymptotic_density {n..N} = 0\"\n  \"lower_asymptotic_density {n..<N} = 0\"\n  \"lower_asymptotic_density {n<..N} = 0\"\n  \"lower_asymptotic_density {n<..<N} = 0\"", "lemma lower_asymptotic_density_infinite_interval [simp]:\n  \"lower_asymptotic_density {N..} = 1\"\n  \"lower_asymptotic_density {N<..} = 1\"\n  \"lower_asymptotic_density UNIV = 1\"", "lemma upper_asymptotic_density_infinite_interval [simp]:\n  \"upper_asymptotic_density {N..} = 1\"\n  \"upper_asymptotic_density {N<..} = 1\"\n  \"upper_asymptotic_density UNIV = 1\"", "lemma lower_asymptotic_density_one_intersection:\n  assumes \"lower_asymptotic_density A = 1\" \"lower_asymptotic_density B = 1\"\n  shows \"lower_asymptotic_density (A \\<inter> B) = 1\"", "lemma lower_asymptotic_density_one_finite_Intersection:\n  assumes \"finite I\" \"\\<And>i. i \\<in> I \\<Longrightarrow> lower_asymptotic_density (A i) = 1\"\n  shows \"lower_asymptotic_density (\\<Inter>i\\<in>I. A i) = 1\"", "theorem cesaro_imp_density_one:\n  assumes \"\\<And>n. u n \\<ge> (0::real)\" \"(\\<lambda>n. (\\<Sum>i<n. u i)/n) \\<longlonglongrightarrow> 0\"\n  shows \"\\<exists>A. lower_asymptotic_density A = 1 \\<and> (\\<lambda>n. u n * indicator A n) \\<longlonglongrightarrow> 0\"", "theorem density_one_imp_cesaro:\n  assumes \"\\<And>n. u n \\<ge> (0::real)\" \"\\<And>n. u n \\<le> C\"\n          \"lower_asymptotic_density A = 1\"\n          \"(\\<lambda>n. u n * indicator A n) \\<longlonglongrightarrow> 0\"\n  shows \"(\\<lambda>n. (\\<Sum>i<n. u i)/n) \\<longlonglongrightarrow> 0\""], "translations": [["", "lemma upper_asymptotic_density_in_01:\n  \"ereal(upper_asymptotic_density A) = limsup (\\<lambda>n. card(A \\<inter> {..<n})/n)\"\n  \"upper_asymptotic_density A \\<le> 1\"\n  \"upper_asymptotic_density A \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) &&&\n    upper_asymptotic_density A \\<le> 1 &&&\n    0 \\<le> upper_asymptotic_density A", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "{"], ["proof (state)\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "fix n::nat"], ["proof (state)\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "assume \"n>0\""], ["proof (state)\nthis:\n  0 < n\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "have \"card(A \\<inter> {..<n}) \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n}) \\<le> n", "by (metis card_lessThan Int_lower2 card_mono finite_lessThan)"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n}) \\<le> n\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  card (A \\<inter> {..<n}) \\<le> n", "have \"card(A \\<inter> {..<n}) / n \\<le> ereal 1\""], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<n}) \\<le> n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "using \\<open>n>0\\<close>"], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<n}) \\<le> n\n  0 < n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "by auto"], ["proof (state)\nthis:\n  ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "}"], ["proof (state)\nthis:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) \\<le> ereal 1\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) \\<le> ereal 1", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) / n \\<le> ereal 1) sequentially\""], ["proof (prove)\nusing this:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) \\<le> ereal 1\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "by (simp add: eventually_at_top_dense)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "have a: \"limsup (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<le> 1\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> 1", "by (simp add: Limsup_const Limsup_bounded)"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "have \"card(A \\<inter> {..<n}) / n \\<ge> ereal 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal 0 \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)", "by auto"], ["proof (state)\nthis:\n  ereal 0 \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  ereal 0 \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)", "have \"liminf (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<ge> 0\""], ["proof (prove)\nusing this:\n  ereal 0 \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)\n\ngoal (1 subgoal):\n 1. 0 \\<le> liminf\n             (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by (simp add: le_Liminf_iff less_le_trans)"], ["proof (state)\nthis:\n  0 \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  0 \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "have b: \"limsup (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<ge> 0\""], ["proof (prove)\nusing this:\n  0 \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. 0 \\<le> limsup\n             (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by (meson Liminf_le_Limsup order_trans sequentially_bot)"], ["proof (state)\nthis:\n  0 \\<le> limsup\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "have \"abs(limsup (\\<lambda>n. card(A \\<inter> {..<n})/n)) \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>limsup\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n    \\<infinity>", "using a b"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n  0 \\<le> limsup\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. \\<bar>limsup\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n    \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<bar>limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>\n\ngoal (3 subgoals):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. upper_asymptotic_density A \\<le> 1\n 3. 0 \\<le> upper_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  \\<bar>limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>", "show \"ereal(upper_asymptotic_density A) = limsup (\\<lambda>n. card(A \\<inter> {..<n})/n)\""], ["proof (prove)\nusing this:\n  \\<bar>limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "unfolding upper_asymptotic_density_def"], ["proof (prove)\nusing this:\n  \\<bar>limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>\n\ngoal (1 subgoal):\n 1. ereal\n     (real_of_ereal\n       (limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)))) =\n    limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by auto"], ["proof (state)\nthis:\n  ereal (upper_asymptotic_density A) =\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (2 subgoals):\n 1. upper_asymptotic_density A \\<le> 1\n 2. 0 \\<le> upper_asymptotic_density A", "show \"upper_asymptotic_density A \\<le> 1\" \"upper_asymptotic_density A \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> 1 &&&\n    0 \\<le> upper_asymptotic_density A", "unfolding upper_asymptotic_density_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_ereal\n     (limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)))\n    \\<le> 1 &&&\n    0 \\<le> real_of_ereal\n             (limsup\n               (\\<lambda>x.\n                   ereal (real (card (A \\<inter> {..<x})) / real x)))", "using a b"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n  0 \\<le> limsup\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. real_of_ereal\n     (limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)))\n    \\<le> 1 &&&\n    0 \\<le> real_of_ereal\n             (limsup\n               (\\<lambda>x.\n                   ereal (real (card (A \\<inter> {..<x})) / real x)))", "by (auto simp add: real_of_ereal_le_1 real_of_ereal_pos)"], ["proof (state)\nthis:\n  upper_asymptotic_density A \\<le> 1\n  0 \\<le> upper_asymptotic_density A\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The two next propositions give the usable characterization of the asymptotic density, in\nterms of the eventual cardinality of $A \\cap [0, n)$. Note that the inequality is strict for one\nimplication and large for the other.\\<close>"], ["", "proposition upper_asymptotic_densityD:\n  fixes l::real\n  assumes \"upper_asymptotic_density A < l\"\n  shows \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) < l * n) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n})/n) < l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    < ereal l", "using assms upper_asymptotic_density_in_01(1) ereal_less_ereal_Ex"], ["proof (prove)\nusing this:\n  upper_asymptotic_density A < l\n  ereal (upper_asymptotic_density ?A) =\n  limsup (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n  (?x < ereal ?r) = (?x = - \\<infinity> \\<or> (\\<exists>p<?r. ?x = ereal p))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    < ereal l", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  < ereal l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  < ereal l", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n < ereal l) sequentially\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  < ereal l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l", "using Limsup_lessD"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  < ereal l\n  Limsup ?F ?f < ?y \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?f x < ?y\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n < ereal l \\<and> n > 0) sequentially\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and>\n       0 < n", "using eventually_gt_at_top eventually_conj"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l\n  eventually ((<) ?c) at_top\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and>\n       0 < n", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "have \"card(A \\<inter> {..<n}) < l * n\" if \"card(A \\<inter> {..<n})/n < ereal l \\<and> n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) < l * real n", "using that"], ["proof (prove)\nusing this:\n  ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) < l * real n", "by (simp add: divide_less_eq)"], ["proof (state)\nthis:\n  ereal (real (card (A \\<inter> {..<?n})) / real ?n) < ereal l \\<and>\n  0 < ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) < l * real ?n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and> 0 < n\n  ereal (real (card (A \\<inter> {..<?n})) / real ?n) < ereal l \\<and>\n  0 < ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) < l * real ?n", "show \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) < l * n) sequentially\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) < ereal l \\<and> 0 < n\n  ereal (real (card (A \\<inter> {..<?n})) / real ?n) < ereal l \\<and>\n  0 < ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) < l * real ?n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < l * real n", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) < l * real n\n\ngoal:\nNo subgoals!", "qed"], ["", "proposition upper_asymptotic_densityI:\n  fixes l::real\n  assumes \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) \\<le> l * n) sequentially\"\n  shows \"upper_asymptotic_density A \\<le> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) \\<le> l * n \\<and> n > 0) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n", "using assms eventually_gt_at_top eventually_conj"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n\n  eventually ((<) ?c) at_top\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "have \"card(A \\<inter> {..<n})/n \\<le> ereal l\" if \"card(A \\<inter> {..<n}) \\<le> l * n \\<and> n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal l", "using that"], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal l", "by (simp add: divide_le_eq)"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n \\<and>\n  0 < ?n \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n})) / real ?n) \\<le> ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n \\<and>\n  0 < ?n \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n})) / real ?n) \\<le> ereal l", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n \\<le> ereal l) sequentially\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n \\<and> 0 < n\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n \\<and>\n  0 < ?n \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n})) / real ?n) \\<le> ereal l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal l", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal l", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<le> ereal l\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal l\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> ereal l", "by (simp add: Limsup_bounded)"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> ereal l", "have \"ereal(upper_asymptotic_density A) \\<le> ereal l\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> ereal l\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) \\<le> ereal l", "using upper_asymptotic_density_in_01(1)"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> ereal l\n  ereal (upper_asymptotic_density ?A) =\n  limsup (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) \\<le> ereal l", "by auto"], ["proof (state)\nthis:\n  ereal (upper_asymptotic_density A) \\<le> ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "then"], ["proof (chain)\npicking this:\n  ereal (upper_asymptotic_density A) \\<le> ereal l", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (upper_asymptotic_density A) \\<le> ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "by (simp del: upper_asymptotic_density_in_01)"], ["proof (state)\nthis:\n  upper_asymptotic_density A \\<le> l\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The following trivial lemma is useful to control the asymptotic density of unions.\\<close>"], ["", "lemma lem_ge_sum:\n  fixes l x y::real\n  assumes \"l>x+y\"\n  shows \"\\<exists>lx ly. l = lx + ly \\<and> lx > x \\<and> ly > y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>lx ly. l = lx + ly \\<and> x < lx \\<and> y < ly", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>lx ly. l = lx + ly \\<and> x < lx \\<and> y < ly", "define lx ly where \"lx = x + (l-(x+y))/2\" and \"ly = y + (l-(x+y))/2\""], ["proof (state)\nthis:\n  lx = x + (l - (x + y)) / 2\n  ly = y + (l - (x + y)) / 2\n\ngoal (1 subgoal):\n 1. \\<exists>lx ly. l = lx + ly \\<and> x < lx \\<and> y < ly", "have \"l = lx + ly \\<and> lx > x \\<and> ly > y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l = lx + ly \\<and> x < lx \\<and> y < ly", "unfolding lx_def ly_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. l = x + (l - (x + y)) / 2 + (y + (l - (x + y)) / 2) \\<and>\n    x < x + (l - (x + y)) / 2 \\<and> y < y + (l - (x + y)) / 2", "using assms"], ["proof (prove)\nusing this:\n  x + y < l\n\ngoal (1 subgoal):\n 1. l = x + (l - (x + y)) / 2 + (y + (l - (x + y)) / 2) \\<and>\n    x < x + (l - (x + y)) / 2 \\<and> y < y + (l - (x + y)) / 2", "by auto"], ["proof (state)\nthis:\n  l = lx + ly \\<and> x < lx \\<and> y < ly\n\ngoal (1 subgoal):\n 1. \\<exists>lx ly. l = lx + ly \\<and> x < lx \\<and> y < ly", "then"], ["proof (chain)\npicking this:\n  l = lx + ly \\<and> x < lx \\<and> y < ly", "show ?thesis"], ["proof (prove)\nusing this:\n  l = lx + ly \\<and> x < lx \\<and> y < ly\n\ngoal (1 subgoal):\n 1. \\<exists>lx ly. l = lx + ly \\<and> x < lx \\<and> y < ly", "by auto"], ["proof (state)\nthis:\n  \\<exists>lx ly. l = lx + ly \\<and> x < lx \\<and> y < ly\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The asymptotic density of a union is bounded by the sum of the asymptotic densities.\\<close>"], ["", "lemma upper_asymptotic_density_union:\n  \"upper_asymptotic_density (A \\<union> B) \\<le> upper_asymptotic_density A + upper_asymptotic_density B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B)\n    \\<le> upper_asymptotic_density A + upper_asymptotic_density B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B)\n    \\<le> upper_asymptotic_density A + upper_asymptotic_density B", "have \"upper_asymptotic_density (A \\<union> B) \\<le> l\" if H: \"l > upper_asymptotic_density A + upper_asymptotic_density B\" for l"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "obtain lA lB where l: \"l = lA+lB\" and lA: \"lA > upper_asymptotic_density A\" and lB: \"lB > upper_asymptotic_density B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>lA lB.\n        \\<lbrakk>l = lA + lB; upper_asymptotic_density A < lA;\n         upper_asymptotic_density B < lB\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using lem_ge_sum H"], ["proof (prove)\nusing this:\n  ?x + ?y < ?l \\<Longrightarrow>\n  \\<exists>lx ly. ?l = lx + ly \\<and> ?x < lx \\<and> ?y < ly\n  upper_asymptotic_density A + upper_asymptotic_density B < l\n\ngoal (1 subgoal):\n 1. (\\<And>lA lB.\n        \\<lbrakk>l = lA + lB; upper_asymptotic_density A < lA;\n         upper_asymptotic_density B < lB\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  l = lA + lB\n  upper_asymptotic_density A < lA\n  upper_asymptotic_density B < lB\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "{"], ["proof (state)\nthis:\n  l = lA + lB\n  upper_asymptotic_density A < lA\n  upper_asymptotic_density B < lB\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "assume H: \"card (A \\<inter> {..<n}) < lA * n \\<and> card (B \\<inter> {..<n}) < lB * n\""], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n  real (card (B \\<inter> {..<n})) < lB * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "have \"card((A\\<union>B) \\<inter> {..<n}) \\<le> card(A \\<inter> {..<n}) + card(B \\<inter> {..<n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card ((A \\<union> B) \\<inter> {..<n})\n    \\<le> card (A \\<inter> {..<n}) + card (B \\<inter> {..<n})", "by (simp add: card_Un_le inf_sup_distrib2)"], ["proof (state)\nthis:\n  card ((A \\<union> B) \\<inter> {..<n})\n  \\<le> card (A \\<inter> {..<n}) + card (B \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "also"], ["proof (state)\nthis:\n  card ((A \\<union> B) \\<inter> {..<n})\n  \\<le> card (A \\<inter> {..<n}) + card (B \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "have \"... \\<le> l * n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n}) + card (B \\<inter> {..<n}))\n    \\<le> l * real n", "using l H"], ["proof (prove)\nusing this:\n  l = lA + lB\n  real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n  real (card (B \\<inter> {..<n})) < lB * real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n}) + card (B \\<inter> {..<n}))\n    \\<le> l * real n", "by (simp add: ring_class.ring_distribs(2))"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n}) + card (B \\<inter> {..<n}))\n  \\<le> l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n", "have \"card ((A\\<union>B) \\<inter> {..<n}) \\<le> l * n\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n\n\ngoal (1 subgoal):\n 1. real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n", "by simp"], ["proof (state)\nthis:\n  real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "}"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<?n2})) < lA * real ?n2 \\<and>\n  real (card (B \\<inter> {..<?n2})) < lB * real ?n2 \\<Longrightarrow>\n  real (card ((A \\<union> B) \\<inter> {..<?n2})) \\<le> l * real ?n2\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "moreover"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<?n2})) < lA * real ?n2 \\<and>\n  real (card (B \\<inter> {..<?n2})) < lB * real ?n2 \\<Longrightarrow>\n  real (card ((A \\<union> B) \\<inter> {..<?n2})) \\<le> l * real ?n2\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "have \"eventually (\\<lambda>n. card (A \\<inter> {..<n}) < lA * n \\<and> card (B \\<inter> {..<n}) < lB * n) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n       real (card (B \\<inter> {..<n})) < lB * real n", "using upper_asymptotic_densityD[OF lA] upper_asymptotic_densityD[OF lB] eventually_conj"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) < lA * real n\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < lB * real n\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n       real (card (B \\<inter> {..<n})) < lB * real n", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n     real (card (B \\<inter> {..<n})) < lB * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "ultimately"], ["proof (chain)\npicking this:\n  real (card (A \\<inter> {..<?n2})) < lA * real ?n2 \\<and>\n  real (card (B \\<inter> {..<?n2})) < lB * real ?n2 \\<Longrightarrow>\n  real (card ((A \\<union> B) \\<inter> {..<?n2})) \\<le> l * real ?n2\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n     real (card (B \\<inter> {..<n})) < lB * real n", "have \"eventually (\\<lambda>n. card((A\\<union>B) \\<inter> {..<n}) \\<le> l * n) sequentially\""], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {..<?n2})) < lA * real ?n2 \\<and>\n  real (card (B \\<inter> {..<?n2})) < lB * real ?n2 \\<Longrightarrow>\n  real (card ((A \\<union> B) \\<inter> {..<?n2})) \\<le> l * real ?n2\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) < lA * real n \\<and>\n     real (card (B \\<inter> {..<n})) < lB * real n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n", "show \"upper_asymptotic_density (A \\<union> B) \\<le> l\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "using upper_asymptotic_densityI"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card ((A \\<union> B) \\<inter> {..<n})) \\<le> l * real n\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (?A \\<inter> {..<n})) \\<le> ?l * real n \\<Longrightarrow>\n  upper_asymptotic_density ?A \\<le> ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) \\<le> l", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density (A \\<union> B) \\<le> l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  upper_asymptotic_density A + upper_asymptotic_density B\n  < ?l \\<Longrightarrow>\n  upper_asymptotic_density (A \\<union> B) \\<le> ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B)\n    \\<le> upper_asymptotic_density A + upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density A + upper_asymptotic_density B\n  < ?l \\<Longrightarrow>\n  upper_asymptotic_density (A \\<union> B) \\<le> ?l", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density A + upper_asymptotic_density B\n  < ?l \\<Longrightarrow>\n  upper_asymptotic_density (A \\<union> B) \\<le> ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B)\n    \\<le> upper_asymptotic_density A + upper_asymptotic_density B", "by (meson dense not_le)"], ["proof (state)\nthis:\n  upper_asymptotic_density (A \\<union> B)\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density B\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>It follows that the asymptotic density is an increasing function for inclusion.\\<close>"], ["", "lemma upper_asymptotic_density_subset:\n  assumes \"A \\<subseteq> B\"\n  shows \"upper_asymptotic_density A \\<le> upper_asymptotic_density B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> upper_asymptotic_density B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> upper_asymptotic_density B", "have \"upper_asymptotic_density A \\<le> l\" if l: \"l > upper_asymptotic_density B\" for l"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "have \"card(A \\<inter> {..<n}) \\<le> card(B \\<inter> {..<n})\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n}) \\<le> card (B \\<inter> {..<n})", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n}) \\<le> card (B \\<inter> {..<n})", "by (metis Int_lower2 Int_mono card_mono finite_lessThan finite_subset inf.left_idem)"], ["proof (state)\nthis:\n  card (A \\<inter> {..<?n}) \\<le> card (B \\<inter> {..<?n})\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "then"], ["proof (chain)\npicking this:\n  card (A \\<inter> {..<?n}) \\<le> card (B \\<inter> {..<?n})", "have \"card(A \\<inter> {..<n}) \\<le> l * n\" if \"card(B \\<inter> {..<n}) < l * n\" for n"], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<?n}) \\<le> card (B \\<inter> {..<?n})\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) \\<le> l * real n", "using that"], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<?n}) \\<le> card (B \\<inter> {..<?n})\n  real (card (B \\<inter> {..<n})) < l * real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) \\<le> l * real n", "by (meson lessThan_def less_imp_le of_nat_le_iff order_trans)"], ["proof (state)\nthis:\n  real (card (B \\<inter> {..<?n})) < l * real ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "moreover"], ["proof (state)\nthis:\n  real (card (B \\<inter> {..<?n})) < l * real ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "have \"eventually (\\<lambda>n. card(B \\<inter> {..<n}) < l * n) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) < l * real n", "using upper_asymptotic_densityD l"], ["proof (prove)\nusing this:\n  upper_asymptotic_density ?A < ?l \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (?A \\<inter> {..<n})) < ?l * real n\n  upper_asymptotic_density B < l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) < l * real n", "by simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "ultimately"], ["proof (chain)\npicking this:\n  real (card (B \\<inter> {..<?n})) < l * real ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < l * real n", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) \\<le> l * n) sequentially\""], ["proof (prove)\nusing this:\n  real (card (B \\<inter> {..<?n})) < l * real ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) \\<le> l * real ?n\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < l * real n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) \\<le> l * real n", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "using upper_asymptotic_densityI"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) \\<le> l * real n\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (?A \\<inter> {..<n})) \\<le> ?l * real n \\<Longrightarrow>\n  upper_asymptotic_density ?A \\<le> ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> l", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density A \\<le> l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  upper_asymptotic_density B < ?l \\<Longrightarrow>\n  upper_asymptotic_density A \\<le> ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density B < ?l \\<Longrightarrow>\n  upper_asymptotic_density A \\<le> ?l", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B < ?l \\<Longrightarrow>\n  upper_asymptotic_density A \\<le> ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A \\<le> upper_asymptotic_density B", "by (meson dense not_le)"], ["proof (state)\nthis:\n  upper_asymptotic_density A \\<le> upper_asymptotic_density B\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>If a set has a density, then it is also its asymptotic density.\\<close>"], ["", "lemma upper_asymptotic_density_lim:\n  assumes \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> l\"\n  shows \"upper_asymptotic_density A = l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = l", "have \"(\\<lambda>n. ereal(card(A \\<inter> {..<n})/n)) \\<longlonglongrightarrow> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n    \\<longlonglongrightarrow> ereal l", "using assms"], ["proof (prove)\nusing this:\n  (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n    \\<longlonglongrightarrow> ereal l", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = l", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n})/n) = l\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    ereal l", "using sequentially_bot tendsto_iff_Liminf_eq_Limsup"], ["proof (prove)\nusing this:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l\n  sequentially \\<noteq> \\<bottom>\n  ?F \\<noteq> \\<bottom> \\<Longrightarrow>\n  (?f \\<longlongrightarrow> ?f0.0) ?F =\n  (Liminf ?F ?f = ?f0.0 \\<and> Limsup ?F ?f = ?f0.0)\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    ereal l", "by blast"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = l", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l", "show ?thesis"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = l", "unfolding upper_asymptotic_density_def"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l\n\ngoal (1 subgoal):\n 1. real_of_ereal\n     (limsup\n       (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))) =\n    l", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density A = l\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>If two sets are equal up to something small, i.e. a set with zero upper density,\nthen they have the same upper density.\\<close>"], ["", "lemma upper_asymptotic_density_0_diff:\n  assumes \"A \\<subseteq> B\" \"upper_asymptotic_density (B-A) = 0\"\n  shows \"upper_asymptotic_density A = upper_asymptotic_density B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "have \"upper_asymptotic_density B \\<le> upper_asymptotic_density A + upper_asymptotic_density (B-A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density B\n    \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)", "using upper_asymptotic_density_union[of A \"B-A\"]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (A \\<union> (B - A))\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B\n    \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)", "by (simp add: assms(1) sup.absorb2)"], ["proof (state)\nthis:\n  upper_asymptotic_density B\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density B\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)", "have \"upper_asymptotic_density B \\<le> upper_asymptotic_density A\""], ["proof (prove)\nusing this:\n  upper_asymptotic_density B\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B \\<le> upper_asymptotic_density A", "using assms(2)"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density (B - A)\n  upper_asymptotic_density (B - A) = 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B \\<le> upper_asymptotic_density A", "by simp"], ["proof (state)\nthis:\n  upper_asymptotic_density B \\<le> upper_asymptotic_density A\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density B \\<le> upper_asymptotic_density A", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B \\<le> upper_asymptotic_density A\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "using upper_asymptotic_density_subset[OF assms(1)]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B \\<le> upper_asymptotic_density A\n  upper_asymptotic_density A \\<le> upper_asymptotic_density B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "by simp"], ["proof (state)\nthis:\n  upper_asymptotic_density A = upper_asymptotic_density B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma upper_asymptotic_density_0_Delta:\n  assumes \"upper_asymptotic_density (A \\<Delta> B) = 0\"\n  shows \"upper_asymptotic_density A = upper_asymptotic_density B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "have \"A- (A\\<inter>B) \\<subseteq> A \\<Delta> B\" \"B- (A\\<inter>B) \\<subseteq> A \\<Delta> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A - A \\<inter> B \\<subseteq> A \\<Delta> B &&&\n    B - A \\<inter> B \\<subseteq> A \\<Delta> B", "using assms(1)"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (A \\<Delta> B) = 0\n\ngoal (1 subgoal):\n 1. A - A \\<inter> B \\<subseteq> A \\<Delta> B &&&\n    B - A \\<inter> B \\<subseteq> A \\<Delta> B", "by (auto simp add: Diff_Int Un_infinite)"], ["proof (state)\nthis:\n  A - A \\<inter> B \\<subseteq> A \\<Delta> B\n  B - A \\<inter> B \\<subseteq> A \\<Delta> B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  A - A \\<inter> B \\<subseteq> A \\<Delta> B\n  B - A \\<inter> B \\<subseteq> A \\<Delta> B", "have \"upper_asymptotic_density (A - (A\\<inter>B)) = 0\"\n            \"upper_asymptotic_density (B - (A\\<inter>B)) = 0\""], ["proof (prove)\nusing this:\n  A - A \\<inter> B \\<subseteq> A \\<Delta> B\n  B - A \\<inter> B \\<subseteq> A \\<Delta> B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A - A \\<inter> B) = 0 &&&\n    upper_asymptotic_density (B - A \\<inter> B) = 0", "using upper_asymptotic_density_subset assms(1) upper_asymptotic_density_in_01(3)"], ["proof (prove)\nusing this:\n  A - A \\<inter> B \\<subseteq> A \\<Delta> B\n  B - A \\<inter> B \\<subseteq> A \\<Delta> B\n  ?A \\<subseteq> ?B \\<Longrightarrow>\n  upper_asymptotic_density ?A \\<le> upper_asymptotic_density ?B\n  upper_asymptotic_density (A \\<Delta> B) = 0\n  0 \\<le> upper_asymptotic_density ?A\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A - A \\<inter> B) = 0 &&&\n    upper_asymptotic_density (B - A \\<inter> B) = 0", "by (metis inf.absorb_iff2 inf.orderE)+"], ["proof (state)\nthis:\n  upper_asymptotic_density (A - A \\<inter> B) = 0\n  upper_asymptotic_density (B - A \\<inter> B) = 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density (A - A \\<inter> B) = 0\n  upper_asymptotic_density (B - A \\<inter> B) = 0", "have \"upper_asymptotic_density (A\\<inter>B) = upper_asymptotic_density A\"\n            \"upper_asymptotic_density (A\\<inter>B) = upper_asymptotic_density B\""], ["proof (prove)\nusing this:\n  upper_asymptotic_density (A - A \\<inter> B) = 0\n  upper_asymptotic_density (B - A \\<inter> B) = 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density A &&&\n    upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density B", "using upper_asymptotic_density_0_diff"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (A - A \\<inter> B) = 0\n  upper_asymptotic_density (B - A \\<inter> B) = 0\n  \\<lbrakk>?A \\<subseteq> ?B;\n   upper_asymptotic_density (?B - ?A) = 0\\<rbrakk>\n  \\<Longrightarrow> upper_asymptotic_density ?A =\n                    upper_asymptotic_density ?B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density A &&&\n    upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density B", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density A\n  upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density A\n  upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density B", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density A\n  upper_asymptotic_density (A \\<inter> B) = upper_asymptotic_density B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = upper_asymptotic_density B", "by simp"], ["proof (state)\nthis:\n  upper_asymptotic_density A = upper_asymptotic_density B\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Finite sets have vanishing upper asymptotic density.\\<close>"], ["", "lemma upper_asymptotic_density_finite:\n  assumes \"finite A\"\n  shows \"upper_asymptotic_density A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = 0", "have \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n    \\<longlonglongrightarrow> 0", "proof (rule tendsto_sandwich[where ?f = \"\\<lambda>n. 0\" and ?h = \"\\<lambda>(n::nat). card A / n\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (A \\<inter> {..<n})) / real n\n 2. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) / real n \\<le> real (card A) / real n\n 3. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0", "have \"card(A \\<inter> {..<n})/n \\<le> card A / n\" if \"n>0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n \\<le> real (card A) / real n", "using that \\<open>finite A\\<close>"], ["proof (prove)\nusing this:\n  0 < n\n  finite A\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n \\<le> real (card A) / real n", "by (simp add: card_mono divide_right_mono)"], ["proof (state)\nthis:\n  0 < ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) / real ?n \\<le> real (card A) / real ?n\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (A \\<inter> {..<n})) / real n\n 2. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) / real n \\<le> real (card A) / real n\n 3. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  0 < ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) / real ?n \\<le> real (card A) / real ?n", "show \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n \\<le> card A / n) sequentially\""], ["proof (prove)\nusing this:\n  0 < ?n \\<Longrightarrow>\n  real (card (A \\<inter> {..<?n})) / real ?n \\<le> real (card A) / real ?n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (A \\<inter> {..<n})) / real n \\<le> real (card A) / real n", "by (simp add: eventually_at_top_dense)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A \\<inter> {..<n})) / real n \\<le> real (card A) / real n\n\ngoal (3 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (A \\<inter> {..<n})) / real n\n 2. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 3. (\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. real (card A)* (1 / real n)) \\<longlonglongrightarrow> real(card A) * 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card A) * (1 / real n))\n    \\<longlonglongrightarrow> real (card A) * 0", "by (intro tendsto_intros)"], ["proof (state)\nthis:\n  (\\<lambda>n. real (card A) * (1 / real n))\n  \\<longlonglongrightarrow> real (card A) * 0\n\ngoal (3 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (A \\<inter> {..<n})) / real n\n 2. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 3. (\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. real (card A) * (1 / real n))\n  \\<longlonglongrightarrow> real (card A) * 0", "show \"(\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. real (card A) * (1 / real n))\n  \\<longlonglongrightarrow> real (card A) * 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. real (card A) / real n) \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (A \\<inter> {..<n})) / real n\n 2. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0", "qed (auto)"], ["proof (state)\nthis:\n  (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0", "show \"upper_asymptotic_density A = 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = 0", "using upper_asymptotic_density_lim"], ["proof (prove)\nusing this:\n  (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n. real (card (?A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> ?l \\<Longrightarrow>\n  upper_asymptotic_density ?A = ?l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density A = 0", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density A = 0\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In particular, bounded intervals have zero upper density.\\<close>"], ["", "lemma upper_asymptotic_density_bdd_interval [simp]:\n  \"upper_asymptotic_density {} = 0\"\n  \"upper_asymptotic_density {..N} = 0\"\n  \"upper_asymptotic_density {..<N} = 0\"\n  \"upper_asymptotic_density {n..N} = 0\"\n  \"upper_asymptotic_density {n..<N} = 0\"\n  \"upper_asymptotic_density {n<..N} = 0\"\n  \"upper_asymptotic_density {n<..<N} = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (upper_asymptotic_density {} = 0 &&&\n     upper_asymptotic_density {..N} = 0 &&&\n     upper_asymptotic_density {..<N} = 0) &&&\n    (upper_asymptotic_density {n..N} = 0 &&&\n     upper_asymptotic_density {n..<N} = 0) &&&\n    upper_asymptotic_density {n<..N} = 0 &&&\n    upper_asymptotic_density {n<..<N} = 0", "by (auto intro!: upper_asymptotic_density_finite)"], ["", "text \\<open>The density of a finite union is bounded by the sum of the densities.\\<close>"], ["", "lemma upper_asymptotic_density_finite_Union:\n  assumes \"finite I\"\n  shows \"upper_asymptotic_density (\\<Union>i\\<in>I. A i) \\<le> (\\<Sum>i\\<in>I. upper_asymptotic_density (A i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (\\<Union> (A ` I))\n    \\<le> (\\<Sum>i\\<in>I. upper_asymptotic_density (A i))", "using assms"], ["proof (prove)\nusing this:\n  finite I\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (\\<Union> (A ` I))\n    \\<le> (\\<Sum>i\\<in>I. upper_asymptotic_density (A i))", "apply (induction I rule: finite_induct)"], ["proof (prove)\ngoal (2 subgoals):\n 1. upper_asymptotic_density (\\<Union> (A ` {}))\n    \\<le> (\\<Sum>i\\<in>{}. upper_asymptotic_density (A i))\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        upper_asymptotic_density (\\<Union> (A ` F))\n        \\<le> (\\<Sum>i\\<in>F. upper_asymptotic_density (A i))\\<rbrakk>\n       \\<Longrightarrow> upper_asymptotic_density\n                          (\\<Union> (A ` insert x F))\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  upper_asymptotic_density (A i))", "using order_trans[OF upper_asymptotic_density_union]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density ?A1 + upper_asymptotic_density ?B1\n  \\<le> ?z \\<Longrightarrow>\n  upper_asymptotic_density (?A1 \\<union> ?B1) \\<le> ?z\n\ngoal (2 subgoals):\n 1. upper_asymptotic_density (\\<Union> (A ` {}))\n    \\<le> (\\<Sum>i\\<in>{}. upper_asymptotic_density (A i))\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        upper_asymptotic_density (\\<Union> (A ` F))\n        \\<le> (\\<Sum>i\\<in>F. upper_asymptotic_density (A i))\\<rbrakk>\n       \\<Longrightarrow> upper_asymptotic_density\n                          (\\<Union> (A ` insert x F))\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  upper_asymptotic_density (A i))", "by auto"], ["", "text \\<open>It is sometimes useful to compute the asymptotic density by shifting a little bit the set:\nthis only makes a finite difference that vanishes when divided by $n$.\\<close>"], ["", "lemma upper_asymptotic_density_shift:\n  fixes k::nat and l::int\n  shows \"ereal(upper_asymptotic_density A) = limsup (\\<lambda>n. card(A \\<inter> {k..nat(n+l)}) / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "define C where \"C = k+2*nat(abs(l))+1\""], ["proof (state)\nthis:\n  C = k + 2 * nat \\<bar>l\\<bar> + 1\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have *: \"(\\<lambda>n. C*(1/n)) \\<longlonglongrightarrow> real C * 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real C * (1 / real n)) \\<longlonglongrightarrow> real C * 0", "by (intro tendsto_intros)"], ["proof (state)\nthis:\n  (\\<lambda>n. real C * (1 / real n)) \\<longlonglongrightarrow> real C * 0\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have l0: \"limsup (\\<lambda>n. C/n) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real C / real x)) = 0", "apply (rule lim_imp_Limsup, simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ereal (real C / real x)) \\<longlonglongrightarrow> 0", "using *"], ["proof (prove)\nusing this:\n  (\\<lambda>n. real C * (1 / real n)) \\<longlonglongrightarrow> real C * 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. ereal (real C / real x)) \\<longlonglongrightarrow> 0", "by (simp add: zero_ereal_def)"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real C / real x)) = 0\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have \"card(A \\<inter> {k..nat(n+l)}) / n \\<le> card (A \\<inter> {..<n})/n + C/n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "have \"card(A \\<inter> {k..nat(n+l)}) \\<le> card (A \\<inter> {..<n} \\<union> {n..n + nat(abs(l))})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {k..nat (int n + l)})\n    \\<le> card (A \\<inter> {..<n} \\<union> {n..n + nat \\<bar>l\\<bar>})", "by (rule card_mono, auto)"], ["proof (state)\nthis:\n  card (A \\<inter> {k..nat (int n + l)})\n  \\<le> card (A \\<inter> {..<n} \\<union> {n..n + nat \\<bar>l\\<bar>})\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "also"], ["proof (state)\nthis:\n  card (A \\<inter> {k..nat (int n + l)})\n  \\<le> card (A \\<inter> {..<n} \\<union> {n..n + nat \\<bar>l\\<bar>})\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "have \"... \\<le> card (A \\<inter> {..<n}) + card {n..n + nat(abs(l))}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n} \\<union> {n..n + nat \\<bar>l\\<bar>})\n    \\<le> card (A \\<inter> {..<n}) + card {n..n + nat \\<bar>l\\<bar>}", "by (rule card_Un_le)"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n} \\<union> {n..n + nat \\<bar>l\\<bar>})\n  \\<le> card (A \\<inter> {..<n}) + card {n..n + nat \\<bar>l\\<bar>}\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "also"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n} \\<union> {n..n + nat \\<bar>l\\<bar>})\n  \\<le> card (A \\<inter> {..<n}) + card {n..n + nat \\<bar>l\\<bar>}\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "have \"... \\<le> card (A \\<inter> {..<n}) + real C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n}) + card {n..n + nat \\<bar>l\\<bar>})\n    \\<le> real (card (A \\<inter> {..<n})) + real C", "unfolding C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n}) + card {n..n + nat \\<bar>l\\<bar>})\n    \\<le> real (card (A \\<inter> {..<n})) +\n          real (k + 2 * nat \\<bar>l\\<bar> + 1)", "by auto"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n}) + card {n..n + nat \\<bar>l\\<bar>})\n  \\<le> real (card (A \\<inter> {..<n})) + real C\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  real (card (A \\<inter> {k..nat (int n + l)}))\n  \\<le> real (card (A \\<inter> {..<n})) + real C", "have \"card(A \\<inter> {k..nat(n+l)}) / n \\<le> (card (A \\<inter> {..<n}) + real C) /n\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> real x \\<le> real y) \\<Longrightarrow>\n  real (card (A \\<inter> {k..nat (int n + l)}))\n  \\<le> real (card (A \\<inter> {..<n})) + real C\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> (real (card (A \\<inter> {..<n})) + real C) / real n", "by (simp add: divide_right_mono)"], ["proof (state)\nthis:\n  real (card (A \\<inter> {k..nat (int n + l)})) / real n\n  \\<le> (real (card (A \\<inter> {..<n})) + real C) / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "also"], ["proof (state)\nthis:\n  real (card (A \\<inter> {k..nat (int n + l)})) / real n\n  \\<le> (real (card (A \\<inter> {..<n})) + real C) / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "have \"... = card (A \\<inter> {..<n})/n + C/n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (card (A \\<inter> {..<n})) + real C) / real n =\n    real (card (A \\<inter> {..<n})) / real n + real C / real n", "using add_divide_distrib"], ["proof (prove)\nusing this:\n  (?a + ?b) / ?c = ?a / ?c + ?b / ?c\n\ngoal (1 subgoal):\n 1. (real (card (A \\<inter> {..<n})) + real C) / real n =\n    real (card (A \\<inter> {..<n})) / real n + real C / real n", "by auto"], ["proof (state)\nthis:\n  (real (card (A \\<inter> {..<n})) + real C) / real n =\n  real (card (A \\<inter> {..<n})) / real n + real C / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "finally"], ["proof (chain)\npicking this:\n  real (card (A \\<inter> {k..nat (int n + l)})) / real n\n  \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "show ?thesis"], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {k..nat (int n + l)})) / real n\n  \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {k..nat (int n + l)})) / real n\n    \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n", "by auto"], ["proof (state)\nthis:\n  real (card (A \\<inter> {k..nat (int n + l)})) / real n\n  \\<le> real (card (A \\<inter> {..<n})) / real n + real C / real n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (card (A \\<inter> {k..nat (int ?n + l)})) / real ?n\n  \\<le> real (card (A \\<inter> {..<?n})) / real ?n + real C / real ?n\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "then"], ["proof (chain)\npicking this:\n  real (card (A \\<inter> {k..nat (int ?n + l)})) / real ?n\n  \\<le> real (card (A \\<inter> {..<?n})) / real ?n + real C / real ?n", "have \"limsup (\\<lambda>n. card(A \\<inter> {k..nat(n+l)}) / n) \\<le> limsup (\\<lambda>n. card (A \\<inter> {..<n})/n + ereal(C/n))\""], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {k..nat (int ?n + l)})) / real ?n\n  \\<le> real (card (A \\<inter> {..<?n})) / real ?n + real C / real ?n\n\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n    \\<le> limsup\n           (\\<lambda>n.\n               ereal (real (card (A \\<inter> {..<n})) / real n) +\n               ereal (real C / real n))", "by (simp add: Limsup_mono)"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>n.\n             ereal (real (card (A \\<inter> {..<n})) / real n) +\n             ereal (real C / real n))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "also"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>n.\n             ereal (real (card (A \\<inter> {..<n})) / real n) +\n             ereal (real C / real n))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have \"... \\<le> limsup (\\<lambda>n. card (A \\<inter> {..<n})/n) + limsup (\\<lambda>n. C/n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>n.\n         ereal (real (card (A \\<inter> {..<n})) / real n) +\n         ereal (real C / real n))\n    \\<le> limsup\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) +\n          limsup (\\<lambda>x. ereal (real C / real x))", "by (rule ereal_limsup_add_mono)"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (real (card (A \\<inter> {..<n})) / real n) +\n       ereal (real C / real n))\n  \\<le> limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "finally"], ["proof (chain)\npicking this:\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))", "have a: \"limsup (\\<lambda>n. card(A \\<inter> {k..nat(n+l)}) / n) \\<le> limsup (\\<lambda>n. card (A \\<inter> {..<n})/n)\""], ["proof (prove)\nusing this:\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))\n\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n    \\<le> limsup\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "using l0"], ["proof (prove)\nusing this:\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))\n  limsup (\\<lambda>x. ereal (real C / real x)) = 0\n\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n    \\<le> limsup\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by simp"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have \"card (A \\<inter> {..<n}) / n \\<le> card (A \\<inter> {k..nat(n+l)})/n + C/n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "have \"card ({..<k} \\<union> {n-nat(abs(l))..n + nat(abs(l))}) \\<le> card {..<k} + card {n-nat(abs(l))..n + nat(abs(l))}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n    \\<le> card {..<k} + card {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}", "by (rule card_Un_le)"], ["proof (state)\nthis:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> card {..<k} + card {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "also"], ["proof (state)\nthis:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> card {..<k} + card {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "have \"... \\<le> k + 2*nat(abs(l)) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {..<k} + card {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}\n    \\<le> k + 2 * nat \\<bar>l\\<bar> + 1", "by auto"], ["proof (state)\nthis:\n  card {..<k} + card {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}\n  \\<le> k + 2 * nat \\<bar>l\\<bar> + 1\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "finally"], ["proof (chain)\npicking this:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> k + 2 * nat \\<bar>l\\<bar> + 1", "have *: \"card ({..<k} \\<union> {n-nat(abs(l))..n + nat(abs(l))}) \\<le> C\""], ["proof (prove)\nusing this:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> k + 2 * nat \\<bar>l\\<bar> + 1\n\ngoal (1 subgoal):\n 1. card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n    \\<le> C", "unfolding C_def"], ["proof (prove)\nusing this:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> k + 2 * nat \\<bar>l\\<bar> + 1\n\ngoal (1 subgoal):\n 1. card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n    \\<le> k + 2 * nat \\<bar>l\\<bar> + 1", "by blast"], ["proof (state)\nthis:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> C\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "have \"card(A \\<inter> {..<n}) \\<le> card (A \\<inter> {k..nat(n+l)} \\<union> ({..<k} \\<union> {n-nat(abs(l))..n + nat(abs(l))}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n})\n    \\<le> card\n           (A \\<inter> {k..nat (int n + l)} \\<union>\n            ({..<k} \\<union>\n             {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}))", "by (rule card_mono, auto)"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n})\n  \\<le> card\n         (A \\<inter> {k..nat (int n + l)} \\<union>\n          ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}))\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "also"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n})\n  \\<le> card\n         (A \\<inter> {k..nat (int n + l)} \\<union>\n          ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}))\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "have \"... \\<le> card (A \\<inter> {k..nat(n+l)}) + card ({..<k} \\<union> {n-nat(abs(l))..n + nat(abs(l))})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     (A \\<inter> {k..nat (int n + l)} \\<union>\n      ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}))\n    \\<le> card (A \\<inter> {k..nat (int n + l)}) +\n          card\n           ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})", "by (rule card_Un_le)"], ["proof (state)\nthis:\n  card\n   (A \\<inter> {k..nat (int n + l)} \\<union>\n    ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}))\n  \\<le> card (A \\<inter> {k..nat (int n + l)}) +\n        card\n         ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "also"], ["proof (state)\nthis:\n  card\n   (A \\<inter> {k..nat (int n + l)} \\<union>\n    ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>}))\n  \\<le> card (A \\<inter> {k..nat (int n + l)}) +\n        card\n         ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "have \"... \\<le> card (A \\<inter> {k..nat(n+l)}) + C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {k..nat (int n + l)}) +\n    card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n    \\<le> card (A \\<inter> {k..nat (int n + l)}) + C", "using *"], ["proof (prove)\nusing this:\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> C\n\ngoal (1 subgoal):\n 1. card (A \\<inter> {k..nat (int n + l)}) +\n    card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n    \\<le> card (A \\<inter> {k..nat (int n + l)}) + C", "by auto"], ["proof (state)\nthis:\n  card (A \\<inter> {k..nat (int n + l)}) +\n  card ({..<k} \\<union> {n - nat \\<bar>l\\<bar>..n + nat \\<bar>l\\<bar>})\n  \\<le> card (A \\<inter> {k..nat (int n + l)}) + C\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "finally"], ["proof (chain)\npicking this:\n  card (A \\<inter> {..<n}) \\<le> card (A \\<inter> {k..nat (int n + l)}) + C", "have \"card (A \\<inter> {..<n}) / n \\<le> (card (A \\<inter> {k..nat(n+l)}) + real C)/n\""], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<n}) \\<le> card (A \\<inter> {k..nat (int n + l)}) + C\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> (real (card (A \\<inter> {k..nat (int n + l)})) + real C) / real n", "by (simp add: divide_right_mono)"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n})) / real n\n  \\<le> (real (card (A \\<inter> {k..nat (int n + l)})) + real C) / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "also"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n})) / real n\n  \\<le> (real (card (A \\<inter> {k..nat (int n + l)})) + real C) / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "have \"... = card (A \\<inter> {k..nat(n+l)})/n + C/n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (real (card (A \\<inter> {k..nat (int n + l)})) + real C) / real n =\n    real (card (A \\<inter> {k..nat (int n + l)})) / real n + real C / real n", "using add_divide_distrib"], ["proof (prove)\nusing this:\n  (?a + ?b) / ?c = ?a / ?c + ?b / ?c\n\ngoal (1 subgoal):\n 1. (real (card (A \\<inter> {k..nat (int n + l)})) + real C) / real n =\n    real (card (A \\<inter> {k..nat (int n + l)})) / real n + real C / real n", "by auto"], ["proof (state)\nthis:\n  (real (card (A \\<inter> {k..nat (int n + l)})) + real C) / real n =\n  real (card (A \\<inter> {k..nat (int n + l)})) / real n + real C / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "finally"], ["proof (chain)\npicking this:\n  real (card (A \\<inter> {..<n})) / real n\n  \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n        real C / real n", "show ?thesis"], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {..<n})) / real n\n  \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n        real C / real n\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n\n    \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n          real C / real n", "by auto"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n})) / real n\n  \\<le> real (card (A \\<inter> {k..nat (int n + l)})) / real n +\n        real C / real n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<?n})) / real ?n\n  \\<le> real (card (A \\<inter> {k..nat (int ?n + l)})) / real ?n +\n        real C / real ?n\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "then"], ["proof (chain)\npicking this:\n  real (card (A \\<inter> {..<?n})) / real ?n\n  \\<le> real (card (A \\<inter> {k..nat (int ?n + l)})) / real ?n +\n        real C / real ?n", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n}) / n) \\<le> limsup (\\<lambda>n. card (A \\<inter> {k..nat(n+l)})/n + ereal(C/n))\""], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {..<?n})) / real ?n\n  \\<le> real (card (A \\<inter> {k..nat (int ?n + l)})) / real ?n +\n        real C / real ?n\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> limsup\n           (\\<lambda>n.\n               ereal\n                (real (card (A \\<inter> {k..nat (int n + l)})) / real n) +\n               ereal (real C / real n))", "by (simp add: Limsup_mono)"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>n.\n             ereal\n              (real (card (A \\<inter> {k..nat (int n + l)})) / real n) +\n             ereal (real C / real n))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "also"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>n.\n             ereal\n              (real (card (A \\<inter> {k..nat (int n + l)})) / real n) +\n             ereal (real C / real n))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have \"... \\<le> limsup (\\<lambda>n. card (A \\<inter> {k..nat(n+l)})/n) + limsup (\\<lambda>n. C/n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>n.\n         ereal (real (card (A \\<inter> {k..nat (int n + l)})) / real n) +\n         ereal (real C / real n))\n    \\<le> limsup\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {k..nat (int x + l)})) / real x)) +\n          limsup (\\<lambda>x. ereal (real C / real x))", "by (rule ereal_limsup_add_mono)"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (real (card (A \\<inter> {k..nat (int n + l)})) / real n) +\n       ereal (real C / real n))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {k..nat (int x + l)})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "finally"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {k..nat (int x + l)})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n}) / n) \\<le> limsup (\\<lambda>n. card (A \\<inter> {k..nat(n+l)})/n)\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {k..nat (int x + l)})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> limsup\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "using l0"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {k..nat (int x + l)})) / real x)) +\n        limsup (\\<lambda>x. ereal (real C / real x))\n  limsup (\\<lambda>x. ereal (real C / real x)) = 0\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> limsup\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "by simp"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n}) / n) = limsup (\\<lambda>n. card (A \\<inter> {k..nat(n+l)})/n)\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "using a"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> limsup\n         (\\<lambda>x.\n             ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  \\<le> limsup\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "show ?thesis"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "using upper_asymptotic_density_in_01(1)"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n  ereal (upper_asymptotic_density ?A) =\n  limsup (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. ereal (upper_asymptotic_density A) =\n    limsup\n     (\\<lambda>x.\n         ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))", "by auto"], ["proof (state)\nthis:\n  ereal (upper_asymptotic_density A) =\n  limsup\n   (\\<lambda>x.\n       ereal (real (card (A \\<inter> {k..nat (int x + l)})) / real x))\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Upper asymptotic density is measurable.\\<close>"], ["", "lemma upper_asymptotic_density_meas [measurable]:\n  assumes [measurable]: \"\\<And>(n::nat). Measurable.pred M (P n)\"\n  shows \"(\\<lambda>x. upper_asymptotic_density {n. P n x}) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. upper_asymptotic_density {n. P n x})\n    \\<in> borel_measurable M", "unfolding upper_asymptotic_density_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        real_of_ereal\n         (limsup\n           (\\<lambda>xa.\n               ereal\n                (real (card ({n. P n x} \\<inter> {..<xa})) / real xa))))\n    \\<in> borel_measurable M", "by auto"], ["", "text \\<open>A finite union of sets with zero upper density still has zero upper density.\\<close>"], ["", "lemma upper_asymptotic_density_zero_union:\n  assumes \"upper_asymptotic_density A = 0\" \"upper_asymptotic_density B = 0\"\n  shows \"upper_asymptotic_density (A \\<union> B) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) = 0", "using upper_asymptotic_density_in_01(3)[of \"A \\<union> B\"] upper_asymptotic_density_union[of A B]"], ["proof (prove)\nusing this:\n  0 \\<le> upper_asymptotic_density (A \\<union> B)\n  upper_asymptotic_density (A \\<union> B)\n  \\<le> upper_asymptotic_density A + upper_asymptotic_density B\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) = 0", "unfolding assms"], ["proof (prove)\nusing this:\n  0 \\<le> upper_asymptotic_density (A \\<union> B)\n  upper_asymptotic_density (A \\<union> B) \\<le> 0 + 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A \\<union> B) = 0", "by auto"], ["", "lemma upper_asymptotic_density_zero_finite_Union:\n  assumes \"finite I\" \"\\<And>i. i \\<in> I \\<Longrightarrow> upper_asymptotic_density (A i) = 0\"\n  shows \"upper_asymptotic_density (\\<Union>i\\<in>I. A i) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (\\<Union> (A ` I)) = 0", "using assms"], ["proof (prove)\nusing this:\n  finite I\n  ?i \\<in> I \\<Longrightarrow> upper_asymptotic_density (A ?i) = 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (\\<Union> (A ` I)) = 0", "by (induction rule: finite_induct, auto intro!: upper_asymptotic_density_zero_union)"], ["", "text \\<open>The union of sets with small asymptotic densities can have a large density: think\nof $A_n = [0,n]$, it has density $0$, but the union of the $A_n$ has density $1$. However, if one\nonly wants a set which contains each $A_n$ eventually, then one can obtain a ``union'' that has\nessentially the same density as each $A_n$. This is often used as a replacement for the diagonal\nargument in density arguments: if for each $n$ one can find a set $A_n$ with good properties and\na controlled density, then their ``union'' will have the same properties (eventually) and a\ncontrolled density.\\<close>"], ["", "proposition upper_asymptotic_density_incseq_Union:\n  assumes \"\\<And>(n::nat). upper_asymptotic_density (A n) \\<le> l\" \"incseq A\"\n  shows \"\\<exists>B. upper_asymptotic_density B \\<le> l \\<and> (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have A: \"\\<exists>N. \\<forall>j \\<ge> N. card (A k \\<inter> {..<j}) < (l + (1/2)^k) * j\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>j\\<ge>N.\n          real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>j\\<ge>N.\n          real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j", "have *: \"upper_asymptotic_density (A k) < l + (1/2)^k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A k) < l + (1 / 2) ^ k", "using assms(1)[of k]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (A k) \\<le> l\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (A k) < l + (1 / 2) ^ k", "by (metis add.right_neutral add_mono_thms_linordered_field(4) less_divide_eq_numeral1(1) mult_zero_left zero_less_one zero_less_power)"], ["proof (state)\nthis:\n  upper_asymptotic_density (A k) < l + (1 / 2) ^ k\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>j\\<ge>N.\n          real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>j\\<ge>N.\n          real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j", "using upper_asymptotic_densityD[OF *]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (A k \\<inter> {..<n})) < (l + (1 / 2) ^ k) * real n\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>j\\<ge>N.\n          real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        real (card (A k \\<inter> {..<n})) < (l + (1 / 2) ^ k) * real n\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>j\\<ge>N.\n          real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j", "by auto"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>j\\<ge>N.\n        real (card (A k \\<inter> {..<j})) < (l + (1 / 2) ^ k) * real j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>j\\<ge>N.\n        real (card (A ?k \\<inter> {..<j})) < (l + (1 / 2) ^ ?k) * real j\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have \"\\<exists>N. \\<forall>k. (\\<forall>j \\<ge> N k. card (A k \\<inter> {..<j}) \\<le> (l+(1/2)^k) * j) \\<and> N (Suc k) > N k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>k.\n          (\\<forall>j\\<ge>N k.\n              real (card (A k \\<inter> {..<j}))\n              \\<le> (l + (1 / 2) ^ k) * real j) \\<and>\n          N k < N (Suc k)", "proof (rule dependent_nat_choice)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j\n 2. \\<And>x k.\n       \\<forall>j\\<ge>x.\n          real (card (A k \\<inter> {..<j}))\n          \\<le> (l + (1 / 2) ^ k) * real j \\<Longrightarrow>\n       \\<exists>y.\n          (\\<forall>j\\<ge>y.\n              real (card (A (Suc k) \\<inter> {..<j}))\n              \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n          x < y", "fix x k::nat"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j\n 2. \\<And>x k.\n       \\<forall>j\\<ge>x.\n          real (card (A k \\<inter> {..<j}))\n          \\<le> (l + (1 / 2) ^ k) * real j \\<Longrightarrow>\n       \\<exists>y.\n          (\\<forall>j\\<ge>y.\n              real (card (A (Suc k) \\<inter> {..<j}))\n              \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n          x < y", "obtain N where N: \"\\<forall>j\\<ge>N. real (card (A (Suc k) \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ Suc k) * real j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>j\\<ge>N.\n           real (card (A (Suc k) \\<inter> {..<j}))\n           \\<le> (l + (1 / 2) ^ Suc k) * real j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using A[of \"Suc k\"] less_imp_le"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>j\\<ge>N.\n        real (card (A (Suc k) \\<inter> {..<j}))\n        < (l + (1 / 2) ^ Suc k) * real j\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>j\\<ge>N.\n           real (card (A (Suc k) \\<inter> {..<j}))\n           \\<le> (l + (1 / 2) ^ Suc k) * real j \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>j\\<ge>N.\n     real (card (A (Suc k) \\<inter> {..<j}))\n     \\<le> (l + (1 / 2) ^ Suc k) * real j\n\ngoal (2 subgoals):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j\n 2. \\<And>x k.\n       \\<forall>j\\<ge>x.\n          real (card (A k \\<inter> {..<j}))\n          \\<le> (l + (1 / 2) ^ k) * real j \\<Longrightarrow>\n       \\<exists>y.\n          (\\<forall>j\\<ge>y.\n              real (card (A (Suc k) \\<inter> {..<j}))\n              \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n          x < y", "show \"\\<exists>y. (\\<forall>j\\<ge>y. real (card (A(Suc k) \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and> x < y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>y.\n       (\\<forall>j\\<ge>y.\n           real (card (A (Suc k) \\<inter> {..<j}))\n           \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n       x < y", "apply (rule exI[of _ \"max x N + 1\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>j\\<ge>max x N + 1.\n        real (card (A (Suc k) \\<inter> {..<j}))\n        \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n    x < max x N + 1", "using N"], ["proof (prove)\nusing this:\n  \\<forall>j\\<ge>N.\n     real (card (A (Suc k) \\<inter> {..<j}))\n     \\<le> (l + (1 / 2) ^ Suc k) * real j\n\ngoal (1 subgoal):\n 1. (\\<forall>j\\<ge>max x N + 1.\n        real (card (A (Suc k) \\<inter> {..<j}))\n        \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n    x < max x N + 1", "by auto"], ["proof (state)\nthis:\n  \\<exists>y.\n     (\\<forall>j\\<ge>y.\n         real (card (A (Suc k) \\<inter> {..<j}))\n         \\<le> (l + (1 / 2) ^ Suc k) * real j) \\<and>\n     x < y\n\ngoal (1 subgoal):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j", "show \"\\<exists>x. \\<forall>j\\<ge>x. real (card ((A 0) \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j", "using A[of 0] less_imp_le"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>j\\<ge>N.\n        real (card (A 0 \\<inter> {..<j})) < (l + (1 / 2) ^ 0) * real j\n  ?x < ?y \\<Longrightarrow> ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. \\<exists>x.\n       \\<forall>j\\<ge>x.\n          real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j", "by auto"], ["proof (state)\nthis:\n  \\<exists>x.\n     \\<forall>j\\<ge>x.\n        real (card (A 0 \\<inter> {..<j})) \\<le> (l + (1 / 2) ^ 0) * real j\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>k.\n        (\\<forall>j\\<ge>N k.\n            real (card (A k \\<inter> {..<j}))\n            \\<le> (l + (1 / 2) ^ k) * real j) \\<and>\n        N k < N (Suc k)\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "text \\<open>Here is the choice of the good waiting function $N$\\<close>"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>k.\n        (\\<forall>j\\<ge>N k.\n            real (card (A k \\<inter> {..<j}))\n            \\<le> (l + (1 / 2) ^ k) * real j) \\<and>\n        N k < N (Suc k)\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  \\<exists>N.\n     \\<forall>k.\n        (\\<forall>j\\<ge>N k.\n            real (card (A k \\<inter> {..<j}))\n            \\<le> (l + (1 / 2) ^ k) * real j) \\<and>\n        N k < N (Suc k)", "obtain N where N: \"\\<And>k j. j \\<ge> N k \\<Longrightarrow> card (A k \\<inter> {..<j}) \\<le> (l + (1/2)^k) * j\" \"\\<And>k. N (Suc k) > N k\""], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>k.\n        (\\<forall>j\\<ge>N k.\n            real (card (A k \\<inter> {..<j}))\n            \\<le> (l + (1 / 2) ^ k) * real j) \\<and>\n        N k < N (Suc k)\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>\\<And>k j.\n                    N k \\<le> j \\<Longrightarrow>\n                    real (card (A k \\<inter> {..<j}))\n                    \\<le> (l + (1 / 2) ^ k) * real j;\n         \\<And>k. N k < N (Suc k)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  N ?k \\<le> ?j \\<Longrightarrow>\n  real (card (A ?k \\<inter> {..<?j})) \\<le> (l + (1 / 2) ^ ?k) * real ?j\n  N ?k < N (Suc ?k)\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  N ?k \\<le> ?j \\<Longrightarrow>\n  real (card (A ?k \\<inter> {..<?j})) \\<le> (l + (1 / 2) ^ ?k) * real ?j\n  N ?k < N (Suc ?k)", "have \"strict_mono N\""], ["proof (prove)\nusing this:\n  N ?k \\<le> ?j \\<Longrightarrow>\n  real (card (A ?k \\<inter> {..<?j})) \\<le> (l + (1 / 2) ^ ?k) * real ?j\n  N ?k < N (Suc ?k)\n\ngoal (1 subgoal):\n 1. strict_mono N", "by (simp add: strict_monoI_Suc)"], ["proof (state)\nthis:\n  strict_mono N\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have Nmono: \"N k < N l\" if \"k < l\" for k l"], ["proof (prove)\ngoal (1 subgoal):\n 1. N k < N l", "using N(2)"], ["proof (prove)\nusing this:\n  N ?k < N (Suc ?k)\n\ngoal (1 subgoal):\n 1. N k < N l", "by (simp add: lift_Suc_mono_less that)"], ["proof (state)\nthis:\n  ?k < ?l \\<Longrightarrow> N ?k < N ?l\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "text \\<open>We can now define the global bad set $B$.\\<close>"], ["proof (state)\nthis:\n  ?k < ?l \\<Longrightarrow> N ?k < N ?l\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "define B where \"B = (\\<Union>k. A k \\<inter> {N k..})\""], ["proof (state)\nthis:\n  B = (\\<Union>k. A k \\<inter> {N k..})\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "text \\<open>We will now show that it also has density at most $l$.\\<close>"], ["proof (state)\nthis:\n  B = (\\<Union>k. A k \\<inter> {N k..})\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have Bcard: \"card (B \\<inter> {..<n}) \\<le> (l+(1/2)^k) * n\" if \"N k \\<le> n\" \"n < N (Suc k)\" for n k"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "have \"{N j..<n} = {}\" if \"j \\<in> {k<..}\" for j"], ["proof (prove)\ngoal (1 subgoal):\n 1. {N j..<n} = {}", "using \\<open>n < N (Suc k)\\<close> that"], ["proof (prove)\nusing this:\n  n < N (Suc k)\n  j \\<in> {k<..}\n\ngoal (1 subgoal):\n 1. {N j..<n} = {}", "by (auto, meson \\<open>strict_mono N\\<close> less_trans not_less_eq strict_mono_less)"], ["proof (state)\nthis:\n  ?j \\<in> {k<..} \\<Longrightarrow> {N ?j..<n} = {}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "then"], ["proof (chain)\npicking this:\n  ?j \\<in> {k<..} \\<Longrightarrow> {N ?j..<n} = {}", "have *: \"(\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n}) = {}\""], ["proof (prove)\nusing this:\n  ?j \\<in> {k<..} \\<Longrightarrow> {N ?j..<n} = {}\n\ngoal (1 subgoal):\n 1. (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n}) = {}", "by force"], ["proof (state)\nthis:\n  (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n}) = {}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "have \"B \\<inter> {..<n} = (\\<Union>j. A j \\<inter> {N j..<n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B \\<inter> {..<n} = (\\<Union>j. A j \\<inter> {N j..<n})", "unfolding B_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>k. A k \\<inter> {N k..}) \\<inter> {..<n} =\n    (\\<Union>j. A j \\<inter> {N j..<n})", "by auto"], ["proof (state)\nthis:\n  B \\<inter> {..<n} = (\\<Union>j. A j \\<inter> {N j..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "also"], ["proof (state)\nthis:\n  B \\<inter> {..<n} = (\\<Union>j. A j \\<inter> {N j..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "have \"... = (\\<Union>j \\<in> {..k}. A j \\<inter> {N j..<n}) \\<union> (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>j. A j \\<inter> {N j..<n}) =\n    (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union>\n    (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n})", "unfolding UN_Un [symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>j. A j \\<inter> {N j..<n}) =\n    (\\<Union>j\\<in>{..k} \\<union> {k<..}. A j \\<inter> {N j..<n})", "by (rule arg_cong [of _ _ Union]) auto"], ["proof (state)\nthis:\n  (\\<Union>j. A j \\<inter> {N j..<n}) =\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union>\n  (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "also"], ["proof (state)\nthis:\n  (\\<Union>j. A j \\<inter> {N j..<n}) =\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union>\n  (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "have \"... = (\\<Union>j \\<in> {..k}. A j \\<inter> {N j..<n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union>\n    (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n}) =\n    (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union> {} =\n    (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})", "by simp"], ["proof (state)\nthis:\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union>\n  (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n}) =\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "also"], ["proof (state)\nthis:\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n}) \\<union>\n  (\\<Union>j\\<in>{k<..}. A j \\<inter> {N j..<n}) =\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "have \"... \\<subseteq> (\\<Union>j \\<in> {..k}. A k \\<inter> {..<n})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n    \\<subseteq> (\\<Union>j\\<le>k. A k \\<inter> {..<n})", "using \\<open>incseq A\\<close>"], ["proof (prove)\nusing this:\n  incseq A\n\ngoal (1 subgoal):\n 1. (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n    \\<subseteq> (\\<Union>j\\<le>k. A k \\<inter> {..<n})", "unfolding incseq_def"], ["proof (prove)\nusing this:\n  \\<forall>m n. m \\<le> n \\<longrightarrow> A m \\<subseteq> A n\n\ngoal (1 subgoal):\n 1. (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n    \\<subseteq> (\\<Union>j\\<le>k. A k \\<inter> {..<n})", "by (auto intro!: UN_mono)"], ["proof (state)\nthis:\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n  \\<subseteq> (\\<Union>j\\<le>k. A k \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "also"], ["proof (state)\nthis:\n  (\\<Union>j\\<le>k. A j \\<inter> {N j..<n})\n  \\<subseteq> (\\<Union>j\\<le>k. A k \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "have \"... = A k \\<inter> {..<n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>j\\<le>k. A k \\<inter> {..<n}) = A k \\<inter> {..<n}", "by simp"], ["proof (state)\nthis:\n  (\\<Union>j\\<le>k. A k \\<inter> {..<n}) = A k \\<inter> {..<n}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "finally"], ["proof (chain)\npicking this:\n  B \\<inter> {..<n} \\<subseteq> A k \\<inter> {..<n}", "have \"card (B \\<inter> {..<n}) \\<le> card (A k \\<inter> {..<n})\""], ["proof (prove)\nusing this:\n  B \\<inter> {..<n} \\<subseteq> A k \\<inter> {..<n}\n\ngoal (1 subgoal):\n 1. card (B \\<inter> {..<n}) \\<le> card (A k \\<inter> {..<n})", "by (rule card_mono[rotated], auto)"], ["proof (state)\nthis:\n  card (B \\<inter> {..<n}) \\<le> card (A k \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "then"], ["proof (chain)\npicking this:\n  card (B \\<inter> {..<n}) \\<le> card (A k \\<inter> {..<n})", "show ?thesis"], ["proof (prove)\nusing this:\n  card (B \\<inter> {..<n}) \\<le> card (A k \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "using N(1)[OF \\<open>n \\<ge> N k\\<close>]"], ["proof (prove)\nusing this:\n  card (B \\<inter> {..<n}) \\<le> card (A k \\<inter> {..<n})\n  real (card (A k \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n", "by simp"], ["proof (state)\nthis:\n  real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ k) * real n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>N ?k \\<le> ?n; ?n < N (Suc ?k)\\<rbrakk>\n  \\<Longrightarrow> real (card (B \\<inter> {..<?n}))\n                    \\<le> (l + (1 / 2) ^ ?k) * real ?n\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have \"eventually (\\<lambda>n. card (B \\<inter> {..<n}) \\<le> a * n) sequentially\" if \"l < a\" for a::real"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) \\<le> a * real n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"eventually (\\<lambda>k. (l+(1/2)^k) < a) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F k in sequentially. l + (1 / 2) ^ k < a", "apply (rule order_tendstoD[of _ \"l+0\"], intro tendsto_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. norm (1 / 2) < 1\n 2. l + 0 < a", "using that"], ["proof (prove)\nusing this:\n  l < a\n\ngoal (2 subgoals):\n 1. norm (1 / 2) < 1\n 2. l + 0 < a", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F k in sequentially. l + (1 / 2) ^ k < a\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) \\<le> a * real n", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F k in sequentially. l + (1 / 2) ^ k < a", "obtain k where \"l + (1/2)^k < a\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F k in sequentially. l + (1 / 2) ^ k < a\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        l + (1 / 2) ^ k < a \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. l + (1 / 2) ^ n < a\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        l + (1 / 2) ^ k < a \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  l + (1 / 2) ^ k < a\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"card (B \\<inter> {..<n}) \\<le> a * n\" if \"n \\<ge> N k + 1\"for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"n \\<ge> N k\" \"n \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N k \\<le> n &&& 1 \\<le> n", "using that"], ["proof (prove)\nusing this:\n  N k + 1 \\<le> n\n\ngoal (1 subgoal):\n 1. N k \\<le> n &&& 1 \\<le> n", "by auto"], ["proof (state)\nthis:\n  N k \\<le> n\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"{p. n \\<ge> N p} \\<subseteq> {..n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {p. N p \\<le> n} \\<subseteq> {..n}", "using \\<open>strict_mono N\\<close> dual_order.trans seq_suble"], ["proof (prove)\nusing this:\n  strict_mono N\n  \\<lbrakk>?b \\<le> ?a; ?c \\<le> ?b\\<rbrakk> \\<Longrightarrow> ?c \\<le> ?a\n  strict_mono ?f \\<Longrightarrow> ?n \\<le> ?f ?n\n\ngoal (1 subgoal):\n 1. {p. N p \\<le> n} \\<subseteq> {..n}", "by blast"], ["proof (state)\nthis:\n  {p. N p \\<le> n} \\<subseteq> {..n}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "then"], ["proof (chain)\npicking this:\n  {p. N p \\<le> n} \\<subseteq> {..n}", "have *: \"finite {p. n \\<ge> N p}\" \"{p. n \\<ge> N p} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  {p. N p \\<le> n} \\<subseteq> {..n}\n\ngoal (1 subgoal):\n 1. finite {p. N p \\<le> n} &&& {p. N p \\<le> n} \\<noteq> {}", "using \\<open>n \\<ge> N k\\<close> finite_subset"], ["proof (prove)\nusing this:\n  {p. N p \\<le> n} \\<subseteq> {..n}\n  N k \\<le> n\n  \\<lbrakk>?A \\<subseteq> ?B; finite ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite {p. N p \\<le> n} &&& {p. N p \\<le> n} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  finite {p. N p \\<le> n}\n  {p. N p \\<le> n} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "define m where \"m = Max {p. n \\<ge> N p}\""], ["proof (state)\nthis:\n  m = Max {p. N p \\<le> n}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"k \\<le> m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> m", "unfolding m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> Max {p. N p \\<le> n}", "using Max_ge[OF *(1), of k] that"], ["proof (prove)\nusing this:\n  k \\<in> {p. N p \\<le> n} \\<Longrightarrow> k \\<le> Max {p. N p \\<le> n}\n  N k + 1 \\<le> n\n\ngoal (1 subgoal):\n 1. k \\<le> Max {p. N p \\<le> n}", "by auto"], ["proof (state)\nthis:\n  k \\<le> m\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"N m \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N m \\<le> n", "unfolding m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. N (Max {p. N p \\<le> n}) \\<le> n", "using Max_in[OF *]"], ["proof (prove)\nusing this:\n  Max {p. N p \\<le> n} \\<in> {p. N p \\<le> n}\n\ngoal (1 subgoal):\n 1. N (Max {p. N p \\<le> n}) \\<le> n", "by auto"], ["proof (state)\nthis:\n  N m \\<le> n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"Suc m \\<notin> {p. n \\<ge> N p}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc m \\<notin> {p. N p \\<le> n}", "unfolding m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (Max {p. N p \\<le> n}) \\<notin> {p. N p \\<le> n}", "using * Max_ge Suc_n_not_le_n"], ["proof (prove)\nusing this:\n  finite {p. N p \\<le> n}\n  {p. N p \\<le> n} \\<noteq> {}\n  \\<lbrakk>finite ?A; ?x \\<in> ?A\\<rbrakk> \\<Longrightarrow> ?x \\<le> Max ?A\n  \\<not> Suc ?n \\<le> ?n\n\ngoal (1 subgoal):\n 1. Suc (Max {p. N p \\<le> n}) \\<notin> {p. N p \\<le> n}", "by blast"], ["proof (state)\nthis:\n  Suc m \\<notin> {p. N p \\<le> n}\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "then"], ["proof (chain)\npicking this:\n  Suc m \\<notin> {p. N p \\<le> n}", "have \"n < N (Suc m)\""], ["proof (prove)\nusing this:\n  Suc m \\<notin> {p. N p \\<le> n}\n\ngoal (1 subgoal):\n 1. n < N (Suc m)", "by simp"], ["proof (state)\nthis:\n  n < N (Suc m)\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"card (B \\<inter> {..<n}) \\<le> (l+(1/2)^m) * n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ m) * real n", "using Bcard[OF \\<open>N m \\<le> n\\<close> \\<open>n < N (Suc m)\\<close>]"], ["proof (prove)\nusing this:\n  real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ m) * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ m) * real n", "by simp"], ["proof (state)\nthis:\n  real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ m) * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "also"], ["proof (state)\nthis:\n  real (card (B \\<inter> {..<n})) \\<le> (l + (1 / 2) ^ m) * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"... \\<le> (l + (1/2)^k) * n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l + (1 / 2) ^ m) * real n \\<le> (l + (1 / 2) ^ k) * real n", "apply (rule mult_right_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. l + (1 / 2) ^ m \\<le> l + (1 / 2) ^ k\n 2. 0 \\<le> real n", "using \\<open>k \\<le> m\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> m\n\ngoal (2 subgoals):\n 1. l + (1 / 2) ^ m \\<le> l + (1 / 2) ^ k\n 2. 0 \\<le> real n", "by (auto simp add: power_decreasing)"], ["proof (state)\nthis:\n  (l + (1 / 2) ^ m) * real n \\<le> (l + (1 / 2) ^ k) * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "also"], ["proof (state)\nthis:\n  (l + (1 / 2) ^ m) * real n \\<le> (l + (1 / 2) ^ k) * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "have \"... \\<le> a * n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l + (1 / 2) ^ k) * real n \\<le> a * real n", "using \\<open>l + (1/2)^k < a\\<close> \\<open>n \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  l + (1 / 2) ^ k < a\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. (l + (1 / 2) ^ k) * real n \\<le> a * real n", "by auto"], ["proof (state)\nthis:\n  (l + (1 / 2) ^ k) * real n \\<le> a * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "finally"], ["proof (chain)\npicking this:\n  real (card (B \\<inter> {..<n})) \\<le> a * real n", "show ?thesis"], ["proof (prove)\nusing this:\n  real (card (B \\<inter> {..<n})) \\<le> a * real n\n\ngoal (1 subgoal):\n 1. real (card (B \\<inter> {..<n})) \\<le> a * real n", "by auto"], ["proof (state)\nthis:\n  real (card (B \\<inter> {..<n})) \\<le> a * real n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N k + 1 \\<le> ?n \\<Longrightarrow>\n  real (card (B \\<inter> {..<?n})) \\<le> a * real ?n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) \\<le> a * real n", "then"], ["proof (chain)\npicking this:\n  N k + 1 \\<le> ?n \\<Longrightarrow>\n  real (card (B \\<inter> {..<?n})) \\<le> a * real ?n", "show ?thesis"], ["proof (prove)\nusing this:\n  N k + 1 \\<le> ?n \\<Longrightarrow>\n  real (card (B \\<inter> {..<?n})) \\<le> a * real ?n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) \\<le> a * real n", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  N k + 1 \\<le> ?n \\<Longrightarrow>\n  real (card (B \\<inter> {..<?n})) \\<le> a * real ?n\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N. real (card (B \\<inter> {..<n})) \\<le> a * real n", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) \\<le> a * real n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l < ?a \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) \\<le> ?a * real n\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  l < ?a \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) \\<le> ?a * real n", "have \"upper_asymptotic_density B \\<le> a\" if \"a > l\" for a"], ["proof (prove)\nusing this:\n  l < ?a \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) \\<le> ?a * real n\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B \\<le> a", "using upper_asymptotic_densityI that"], ["proof (prove)\nusing this:\n  l < ?a \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) \\<le> ?a * real n\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (?A \\<inter> {..<n})) \\<le> ?l * real n \\<Longrightarrow>\n  upper_asymptotic_density ?A \\<le> ?l\n  l < a\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B \\<le> a", "by auto"], ["proof (state)\nthis:\n  l < ?a \\<Longrightarrow> upper_asymptotic_density B \\<le> ?a\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  l < ?a \\<Longrightarrow> upper_asymptotic_density B \\<le> ?a", "have \"upper_asymptotic_density B \\<le> l\""], ["proof (prove)\nusing this:\n  l < ?a \\<Longrightarrow> upper_asymptotic_density B \\<le> ?a\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B \\<le> l", "by (meson dense not_le)"], ["proof (state)\nthis:\n  upper_asymptotic_density B \\<le> l\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "moreover"], ["proof (state)\nthis:\n  upper_asymptotic_density B \\<le> l\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have \"\\<exists>N. A n \\<inter> {N..} \\<subseteq> B\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B", "apply (rule exI[of _ \"N n\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. A n \\<inter> {N n..} \\<subseteq> B", "unfolding B_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. A n \\<inter> {N n..} \\<subseteq> (\\<Union>k. A k \\<inter> {N k..})", "by auto"], ["proof (state)\nthis:\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "ultimately"], ["proof (chain)\npicking this:\n  upper_asymptotic_density B \\<le> l\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B \\<le> l\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B \\<le> l \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "by auto"], ["proof (state)\nthis:\n  \\<exists>B.\n     upper_asymptotic_density B \\<le> l \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>When the sequence of sets is not increasing, one can only obtain a set whose density\nis bounded by the sum of the densities.\\<close>"], ["", "proposition upper_asymptotic_density_Union:\n  assumes \"summable (\\<lambda>n. upper_asymptotic_density (A n))\"\n  shows \"\\<exists>B. upper_asymptotic_density B \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and> (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "define C where \"C = (\\<lambda>n. (\\<Union>i\\<le>n. A i))\""], ["proof (state)\nthis:\n  C = (\\<lambda>n. \\<Union> (A ` {..n}))\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have C1: \"incseq C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. incseq C", "unfolding C_def incseq_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>m n.\n       m \\<le> n \\<longrightarrow>\n       \\<Union> (A ` {..m}) \\<subseteq> \\<Union> (A ` {..n})", "by fastforce"], ["proof (state)\nthis:\n  incseq C\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have C2: \"upper_asymptotic_density (C k) \\<le> (\\<Sum>n. upper_asymptotic_density (A n))\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>n. upper_asymptotic_density (A n))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>n. upper_asymptotic_density (A n))", "have \"upper_asymptotic_density (C k) \\<le> (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))", "unfolding C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (\\<Union> (A ` {..k}))\n    \\<le> (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))", "by (rule upper_asymptotic_density_finite_Union, auto)"], ["proof (state)\nthis:\n  upper_asymptotic_density (C k)\n  \\<le> (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>n. upper_asymptotic_density (A n))", "also"], ["proof (state)\nthis:\n  upper_asymptotic_density (C k)\n  \\<le> (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>n. upper_asymptotic_density (A n))", "have \"... \\<le> (\\<Sum>i. upper_asymptotic_density (A i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))\n    \\<le> (\\<Sum>i. upper_asymptotic_density (A i))", "apply (rule sum_le_suminf[OF assms])"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite {..k}\n 2. \\<And>i.\n       i \\<in> - {..k} \\<Longrightarrow>\n       0 \\<le> upper_asymptotic_density (A i)", "using upper_asymptotic_density_in_01"], ["proof (prove)\nusing this:\n  ereal (upper_asymptotic_density ?A) =\n  limsup (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n  upper_asymptotic_density ?A \\<le> 1\n  0 \\<le> upper_asymptotic_density ?A\n\ngoal (2 subgoals):\n 1. finite {..k}\n 2. \\<And>i.\n       i \\<in> - {..k} \\<Longrightarrow>\n       0 \\<le> upper_asymptotic_density (A i)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>k. upper_asymptotic_density (A i))\n  \\<le> (\\<Sum>i. upper_asymptotic_density (A i))\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>n. upper_asymptotic_density (A n))", "finally"], ["proof (chain)\npicking this:\n  upper_asymptotic_density (C k)\n  \\<le> (\\<Sum>i. upper_asymptotic_density (A i))", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (C k)\n  \\<le> (\\<Sum>i. upper_asymptotic_density (A i))\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C k)\n    \\<le> (\\<Sum>n. upper_asymptotic_density (A n))", "by simp"], ["proof (state)\nthis:\n  upper_asymptotic_density (C k)\n  \\<le> (\\<Sum>n. upper_asymptotic_density (A n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  upper_asymptotic_density (C ?k)\n  \\<le> (\\<Sum>n. upper_asymptotic_density (A n))\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "obtain B where B: \"upper_asymptotic_density B \\<le> (\\<Sum>n. upper_asymptotic_density (A n))\"\n                    \"\\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>upper_asymptotic_density B\n                 \\<le> (\\<Sum>n. upper_asymptotic_density (A n));\n         \\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using upper_asymptotic_density_incseq_Union[OF C2 C1]"], ["proof (prove)\nusing this:\n  \\<exists>B.\n     upper_asymptotic_density B\n     \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n     (\\<forall>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> B)\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>upper_asymptotic_density B\n                 \\<le> (\\<Sum>n. upper_asymptotic_density (A n));\n         \\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  upper_asymptotic_density B \\<le> (\\<Sum>n. upper_asymptotic_density (A n))\n  \\<exists>N. C ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have \"\\<exists>N. A n \\<inter> {N..} \\<subseteq> B\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B", "using B(2)[of n]"], ["proof (prove)\nusing this:\n  \\<exists>N. C n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B", "unfolding C_def"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<Union> (A ` {..n}) \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B", "by auto"], ["proof (state)\nthis:\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "using B(1)"], ["proof (prove)\nusing this:\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n  upper_asymptotic_density B \\<le> (\\<Sum>n. upper_asymptotic_density (A n))\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "by blast"], ["proof (state)\nthis:\n  \\<exists>B.\n     upper_asymptotic_density B\n     \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>A particular case of the previous proposition, often useful, is when all sets have density\nzero.\\<close>"], ["", "proposition upper_asymptotic_density_zero_Union:\n  assumes \"\\<And>n::nat. upper_asymptotic_density (A n) = 0\"\n  shows \"\\<exists>B. upper_asymptotic_density B = 0 \\<and> (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B = 0 \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B = 0 \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "have \"\\<exists>B. upper_asymptotic_density B \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and> (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B\n       \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "apply (rule upper_asymptotic_density_Union)"], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. upper_asymptotic_density (A n))", "unfolding assms"], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. 0)", "by auto"], ["proof (state)\nthis:\n  \\<exists>B.\n     upper_asymptotic_density B\n     \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B = 0 \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  \\<exists>B.\n     upper_asymptotic_density B\n     \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "obtain B where \"upper_asymptotic_density B \\<le> 0\" \"\\<And>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B\""], ["proof (prove)\nusing this:\n  \\<exists>B.\n     upper_asymptotic_density B\n     \\<le> (\\<Sum>n. upper_asymptotic_density (A n)) \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>upper_asymptotic_density B \\<le> 0;\n         \\<And>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding assms"], ["proof (prove)\nusing this:\n  \\<exists>B.\n     upper_asymptotic_density B \\<le> (\\<Sum>n. 0) \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>upper_asymptotic_density B \\<le> 0;\n         \\<And>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density B \\<le> 0\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B = 0 \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "then"], ["proof (chain)\npicking this:\n  upper_asymptotic_density B \\<le> 0\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B", "show ?thesis"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B \\<le> 0\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B = 0 \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "using upper_asymptotic_density_in_01(3)[of B]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density B \\<le> 0\n  \\<exists>N. A ?n \\<inter> {N..} \\<subseteq> B\n  0 \\<le> upper_asymptotic_density B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       upper_asymptotic_density B = 0 \\<and>\n       (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)", "by auto"], ["proof (state)\nthis:\n  \\<exists>B.\n     upper_asymptotic_density B = 0 \\<and>\n     (\\<forall>n. \\<exists>N. A n \\<inter> {N..} \\<subseteq> B)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Lower asymptotic densities\\<close>"], ["", "text \\<open>The lower asymptotic density of a set of natural numbers is defined just as its\nupper asymptotic density but using a liminf instead of a limsup. Its properties are proved\nexactly in the same way.\\<close>"], ["", "definition lower_asymptotic_density::\"nat set \\<Rightarrow> real\"\n  where \"lower_asymptotic_density A = real_of_ereal(liminf (\\<lambda>n. card(A \\<inter> {..<n})/n))\""], ["", "lemma lower_asymptotic_density_in_01:\n  \"ereal(lower_asymptotic_density A) = liminf (\\<lambda>n. card(A \\<inter> {..<n})/n)\"\n  \"lower_asymptotic_density A \\<le> 1\"\n  \"lower_asymptotic_density A \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (lower_asymptotic_density A) =\n    liminf\n     (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) &&&\n    lower_asymptotic_density A \\<le> 1 &&&\n    0 \\<le> lower_asymptotic_density A", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "{"], ["proof (state)\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "fix n::nat"], ["proof (state)\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "assume \"n>0\""], ["proof (state)\nthis:\n  0 < n\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "have \"card(A \\<inter> {..<n}) \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n}) \\<le> n", "by (metis card_lessThan Int_lower2 card_mono finite_lessThan)"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n}) \\<le> n\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  card (A \\<inter> {..<n}) \\<le> n", "have \"card(A \\<inter> {..<n}) / n \\<le> ereal 1\""], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<n}) \\<le> n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "using \\<open>n>0\\<close>"], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<n}) \\<le> n\n  0 < n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "by auto"], ["proof (state)\nthis:\n  ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "}"], ["proof (state)\nthis:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) \\<le> ereal 1\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) \\<le> ereal 1", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) / n \\<le> ereal 1) sequentially\""], ["proof (prove)\nusing this:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) \\<le> ereal 1\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "by (simp add: eventually_at_top_dense)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1", "have \"limsup (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<le> 1\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) \\<le> ereal 1\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> 1", "by (simp add: Limsup_const Limsup_bounded)"], ["proof (state)\nthis:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1", "have a: \"liminf (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<le> 1\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> 1", "by (meson Liminf_le_Limsup less_le_trans not_le sequentially_bot)"], ["proof (state)\nthis:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "have \"card(A \\<inter> {..<n}) / n \\<ge> ereal 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal 0 \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)", "by auto"], ["proof (state)\nthis:\n  ereal 0 \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  ereal 0 \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)", "have b: \"liminf (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<ge> 0\""], ["proof (prove)\nusing this:\n  ereal 0 \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)\n\ngoal (1 subgoal):\n 1. 0 \\<le> liminf\n             (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by (simp add: le_Liminf_iff less_le_trans)"], ["proof (state)\nthis:\n  0 \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "have \"abs(liminf (\\<lambda>n. card(A \\<inter> {..<n})/n)) \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>liminf\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n    \\<infinity>", "using a b"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n  0 \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. \\<bar>liminf\n           (\\<lambda>x.\n               ereal\n                (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n    \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<bar>liminf\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>\n\ngoal (3 subgoals):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n 2. lower_asymptotic_density A \\<le> 1\n 3. 0 \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  \\<bar>liminf\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>", "show \"ereal(lower_asymptotic_density A) = liminf (\\<lambda>n. card(A \\<inter> {..<n})/n)\""], ["proof (prove)\nusing this:\n  \\<bar>liminf\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>\n\ngoal (1 subgoal):\n 1. ereal (lower_asymptotic_density A) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "unfolding lower_asymptotic_density_def"], ["proof (prove)\nusing this:\n  \\<bar>liminf\n         (\\<lambda>x.\n             ereal\n              (real (card (A \\<inter> {..<x})) / real x))\\<bar> \\<noteq>\n  \\<infinity>\n\ngoal (1 subgoal):\n 1. ereal\n     (real_of_ereal\n       (liminf\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)))) =\n    liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by auto"], ["proof (state)\nthis:\n  ereal (lower_asymptotic_density A) =\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (2 subgoals):\n 1. lower_asymptotic_density A \\<le> 1\n 2. 0 \\<le> lower_asymptotic_density A", "show \"lower_asymptotic_density A \\<le> 1\" \"lower_asymptotic_density A \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A \\<le> 1 &&&\n    0 \\<le> lower_asymptotic_density A", "unfolding lower_asymptotic_density_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_ereal\n     (liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)))\n    \\<le> 1 &&&\n    0 \\<le> real_of_ereal\n             (liminf\n               (\\<lambda>x.\n                   ereal (real (card (A \\<inter> {..<x})) / real x)))", "using a b"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  \\<le> 1\n  0 \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. real_of_ereal\n     (liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)))\n    \\<le> 1 &&&\n    0 \\<le> real_of_ereal\n             (liminf\n               (\\<lambda>x.\n                   ereal (real (card (A \\<inter> {..<x})) / real x)))", "by (auto simp add: real_of_ereal_le_1 real_of_ereal_pos)"], ["proof (state)\nthis:\n  lower_asymptotic_density A \\<le> 1\n  0 \\<le> lower_asymptotic_density A\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The lower asymptotic density is bounded by the upper one. When they coincide,\n$Card(A \\cap [0,n))/n$ converges to this common value.\\<close>"], ["", "lemma lower_asymptotic_density_le_upper:\n  \"lower_asymptotic_density A \\<le> upper_asymptotic_density A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A \\<le> upper_asymptotic_density A", "using lower_asymptotic_density_in_01(1) upper_asymptotic_density_in_01(1)"], ["proof (prove)\nusing this:\n  ereal (lower_asymptotic_density ?A) =\n  liminf (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n  ereal (upper_asymptotic_density ?A) =\n  limsup (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A \\<le> upper_asymptotic_density A", "by (metis (mono_tags, lifting) Liminf_le_Limsup ereal_less_eq(3) sequentially_bot)"], ["", "lemma lower_asymptotic_density_eq_upper:\n  assumes \"lower_asymptotic_density A = l\" \"upper_asymptotic_density A = l\"\n  shows \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n    \\<longlonglongrightarrow> l", "apply (rule limsup_le_liminf_real)"], ["proof (prove)\ngoal (2 subgoals):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> ereal l\n 2. ereal l\n    \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "using upper_asymptotic_density_in_01(1)[of A] lower_asymptotic_density_in_01(1)[of A] assms"], ["proof (prove)\nusing this:\n  ereal (upper_asymptotic_density A) =\n  limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  ereal (lower_asymptotic_density A) =\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  lower_asymptotic_density A = l\n  upper_asymptotic_density A = l\n\ngoal (2 subgoals):\n 1. limsup (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n    \\<le> ereal l\n 2. ereal l\n    \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by auto"], ["", "text \\<open>In particular, when a set has a zero upper density, or a lower density one, then this\nimplies the corresponding convergence of $Card(A \\cap [0,n))/n$.\\<close>"], ["", "lemma upper_asymptotic_density_zero_lim:\n  assumes \"upper_asymptotic_density A = 0\"\n  shows \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n    \\<longlonglongrightarrow> 0", "apply (rule lower_asymptotic_density_eq_upper)"], ["proof (prove)\ngoal (2 subgoals):\n 1. lower_asymptotic_density A = 0\n 2. upper_asymptotic_density A = 0", "using assms lower_asymptotic_density_le_upper[of A] lower_asymptotic_density_in_01(3)[of A]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density A = 0\n  lower_asymptotic_density A \\<le> upper_asymptotic_density A\n  0 \\<le> lower_asymptotic_density A\n\ngoal (2 subgoals):\n 1. lower_asymptotic_density A = 0\n 2. upper_asymptotic_density A = 0", "by auto"], ["", "lemma lower_asymptotic_density_one_lim:\n  assumes \"lower_asymptotic_density A = 1\"\n  shows \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n    \\<longlonglongrightarrow> 1", "apply (rule lower_asymptotic_density_eq_upper)"], ["proof (prove)\ngoal (2 subgoals):\n 1. lower_asymptotic_density A = 1\n 2. upper_asymptotic_density A = 1", "using assms lower_asymptotic_density_le_upper[of A] upper_asymptotic_density_in_01(2)[of A]"], ["proof (prove)\nusing this:\n  lower_asymptotic_density A = 1\n  lower_asymptotic_density A \\<le> upper_asymptotic_density A\n  upper_asymptotic_density A \\<le> 1\n\ngoal (2 subgoals):\n 1. lower_asymptotic_density A = 1\n 2. upper_asymptotic_density A = 1", "by auto"], ["", "text \\<open>The lower asymptotic density of a set is $1$ minus the upper asymptotic density of its complement.\nHence, most statements about one of them follow from statements about the other one,\nalthough we will rather give direct proofs as they are not more complicated.\\<close>"], ["", "lemma lower_upper_asymptotic_density_complement:\n  \"lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "assume \"n>(0::nat)\""], ["proof (state)\nthis:\n  0 < n\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "have \"{..<n} \\<inter> UNIV - (UNIV - ({..<n} - (UNIV - A))) = {..<n} \\<inter> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {..<n} \\<inter> UNIV - (UNIV - ({..<n} - (UNIV - A))) =\n    {..<n} \\<inter> A", "by blast"], ["proof (state)\nthis:\n  {..<n} \\<inter> UNIV - (UNIV - ({..<n} - (UNIV - A))) = {..<n} \\<inter> A\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "moreover"], ["proof (state)\nthis:\n  {..<n} \\<inter> UNIV - (UNIV - ({..<n} - (UNIV - A))) = {..<n} \\<inter> A\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "have \"{..<n} \\<inter> UNIV \\<inter> (UNIV - ({..<n} - (UNIV - A))) = (UNIV - A) \\<inter> {..<n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {..<n} \\<inter> UNIV \\<inter> (UNIV - ({..<n} - (UNIV - A))) =\n    (UNIV - A) \\<inter> {..<n}", "by blast"], ["proof (state)\nthis:\n  {..<n} \\<inter> UNIV \\<inter> (UNIV - ({..<n} - (UNIV - A))) =\n  (UNIV - A) \\<inter> {..<n}\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "ultimately"], ["proof (chain)\npicking this:\n  {..<n} \\<inter> UNIV - (UNIV - ({..<n} - (UNIV - A))) = {..<n} \\<inter> A\n  {..<n} \\<inter> UNIV \\<inter> (UNIV - ({..<n} - (UNIV - A))) =\n  (UNIV - A) \\<inter> {..<n}", "have \"card (A \\<inter> {..<n}) = n - card((UNIV-A) \\<inter> {..<n})\""], ["proof (prove)\nusing this:\n  {..<n} \\<inter> UNIV - (UNIV - ({..<n} - (UNIV - A))) = {..<n} \\<inter> A\n  {..<n} \\<inter> UNIV \\<inter> (UNIV - ({..<n} - (UNIV - A))) =\n  (UNIV - A) \\<inter> {..<n}\n\ngoal (1 subgoal):\n 1. card (A \\<inter> {..<n}) = n - card ((UNIV - A) \\<inter> {..<n})", "by (metis (no_types) Int_commute card_Diff_subset_Int card_lessThan finite_Int finite_lessThan inf_top_right)"], ["proof (state)\nthis:\n  card (A \\<inter> {..<n}) = n - card ((UNIV - A) \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "then"], ["proof (chain)\npicking this:\n  card (A \\<inter> {..<n}) = n - card ((UNIV - A) \\<inter> {..<n})", "have \"card (A \\<inter> {..<n})/n = (real n - card((UNIV-A) \\<inter> {..<n})) / n\""], ["proof (prove)\nusing this:\n  card (A \\<inter> {..<n}) = n - card ((UNIV - A) \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (A \\<inter> {..<n})) / real n =\n    (real n - real (card ((UNIV - A) \\<inter> {..<n}))) / real n", "by (metis Int_lower2 card_lessThan card_mono finite_lessThan of_nat_diff)"], ["proof (state)\nthis:\n  real (card (A \\<inter> {..<n})) / real n =\n  (real n - real (card ((UNIV - A) \\<inter> {..<n}))) / real n\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "then"], ["proof (chain)\npicking this:\n  real (card (A \\<inter> {..<n})) / real n =\n  (real n - real (card ((UNIV - A) \\<inter> {..<n}))) / real n", "have \"card (A \\<inter> {..<n})/n = ereal 1 - card((UNIV-A) \\<inter> {..<n})/n\""], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {..<n})) / real n =\n  (real n - real (card ((UNIV - A) \\<inter> {..<n}))) / real n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) =\n    ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)", "using \\<open>n>0\\<close>"], ["proof (prove)\nusing this:\n  real (card (A \\<inter> {..<n})) / real n =\n  (real n - real (card ((UNIV - A) \\<inter> {..<n}))) / real n\n  0 < n\n\ngoal (1 subgoal):\n 1. ereal (real (card (A \\<inter> {..<n})) / real n) =\n    ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)", "by (simp add: diff_divide_distrib)"], ["proof (state)\nthis:\n  ereal (real (card (A \\<inter> {..<n})) / real n) =\n  ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "}"], ["proof (state)\nthis:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) =\n  ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<?n2})) / real ?n2)\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "then"], ["proof (chain)\npicking this:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) =\n  ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<?n2})) / real ?n2)", "have \"eventually (\\<lambda>n. card (A \\<inter> {..<n})/n = ereal 1 - card((UNIV-A) \\<inter> {..<n})/n) sequentially\""], ["proof (prove)\nusing this:\n  0 < ?n2 \\<Longrightarrow>\n  ereal (real (card (A \\<inter> {..<?n2})) / real ?n2) =\n  ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<?n2})) / real ?n2)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (real (card (A \\<inter> {..<n})) / real n) =\n       ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)", "by (simp add: eventually_at_top_dense)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) =\n     ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) =\n     ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)", "have \"liminf (\\<lambda>n. card (A \\<inter> {..<n})/n) = liminf (\\<lambda>n. ereal 1 - card((UNIV-A) \\<inter> {..<n})/n)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (real (card (A \\<inter> {..<n})) / real n) =\n     ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    liminf\n     (\\<lambda>n.\n         ereal 1 -\n         ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n))", "by (rule Liminf_eq)"], ["proof (state)\nthis:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  liminf\n   (\\<lambda>n.\n       ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n))\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "also"], ["proof (state)\nthis:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  liminf\n   (\\<lambda>n.\n       ereal 1 - ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n))\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "have \"... = ereal 1 - limsup (\\<lambda>n. card((UNIV-A) \\<inter> {..<n})/n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf\n     (\\<lambda>n.\n         ereal 1 -\n         ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)) =\n    ereal 1 -\n    limsup\n     (\\<lambda>x. ereal (real (card ((UNIV - A) \\<inter> {..<x})) / real x))", "by (rule liminf_ereal_cminus, simp)"], ["proof (state)\nthis:\n  liminf\n   (\\<lambda>n.\n       ereal 1 -\n       ereal (real (card ((UNIV - A) \\<inter> {..<n})) / real n)) =\n  ereal 1 -\n  limsup\n   (\\<lambda>x. ereal (real (card ((UNIV - A) \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "finally"], ["proof (chain)\npicking this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal 1 -\n  limsup\n   (\\<lambda>x. ereal (real (card ((UNIV - A) \\<inter> {..<x})) / real x))", "show ?thesis"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal 1 -\n  limsup\n   (\\<lambda>x. ereal (real (card ((UNIV - A) \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)", "unfolding lower_asymptotic_density_def"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal 1 -\n  limsup\n   (\\<lambda>x. ereal (real (card ((UNIV - A) \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. real_of_ereal\n     (liminf\n       (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))) =\n    1 - upper_asymptotic_density (UNIV - A)", "by (metis ereal_minus(1) real_of_ereal.simps(1) upper_asymptotic_density_in_01(1))"], ["proof (state)\nthis:\n  lower_asymptotic_density A = 1 - upper_asymptotic_density (UNIV - A)\n\ngoal:\nNo subgoals!", "qed"], ["", "proposition lower_asymptotic_densityD:\n  fixes l::real\n  assumes \"lower_asymptotic_density A > l\"\n  shows \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) > l * n) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "have \"ereal(lower_asymptotic_density A) > l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal l < ereal (lower_asymptotic_density A)", "using assms"], ["proof (prove)\nusing this:\n  l < lower_asymptotic_density A\n\ngoal (1 subgoal):\n 1. ereal l < ereal (lower_asymptotic_density A)", "by auto"], ["proof (state)\nthis:\n  ereal l < ereal (lower_asymptotic_density A)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "then"], ["proof (chain)\npicking this:\n  ereal l < ereal (lower_asymptotic_density A)", "have \"liminf (\\<lambda>n. card(A \\<inter> {..<n})/n) > l\""], ["proof (prove)\nusing this:\n  ereal l < ereal (lower_asymptotic_density A)\n\ngoal (1 subgoal):\n 1. ereal l\n    < liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "using lower_asymptotic_density_in_01(1)"], ["proof (prove)\nusing this:\n  ereal l < ereal (lower_asymptotic_density A)\n  ereal (lower_asymptotic_density ?A) =\n  liminf (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. ereal l\n    < liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by auto"], ["proof (state)\nthis:\n  ereal l\n  < liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "then"], ["proof (chain)\npicking this:\n  ereal l\n  < liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n > ereal l) sequentially\""], ["proof (prove)\nusing this:\n  ereal l\n  < liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal l < ereal (real (card (A \\<inter> {..<n})) / real n)", "using less_LiminfD"], ["proof (prove)\nusing this:\n  ereal l\n  < liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  ?y < Liminf ?F ?f \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?y < ?f x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal l < ereal (real (card (A \\<inter> {..<n})) / real n)", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n)", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n > ereal l \\<and> n > 0) sequentially\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and>\n       0 < n", "using eventually_gt_at_top eventually_conj"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n)\n  eventually ((<) ?c) at_top\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and>\n       0 < n", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "have \"card(A \\<inter> {..<n}) > l * n\" if \"card(A \\<inter> {..<n})/n > ereal l \\<and> n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. l * real n < real (card (A \\<inter> {..<n}))", "using that divide_le_eq ereal_less_eq(3) less_imp_of_nat_less not_less of_nat_eq_0_iff"], ["proof (prove)\nusing this:\n  ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and> 0 < n\n  (?b / ?c \\<le> ?a) =\n  (if (0::?'a) < ?c then ?b \\<le> ?a * ?c\n   else if ?c < (0::?'a) then ?a * ?c \\<le> ?b else (0::?'a) \\<le> ?a)\n  (ereal ?r \\<le> ereal ?p) = (?r \\<le> ?p)\n  ?m < ?n \\<Longrightarrow> of_nat ?m < of_nat ?n\n  (\\<not> ?x < ?y) = (?y \\<le> ?x)\n  (of_nat ?m = (0::?'a)) = (?m = 0)\n\ngoal (1 subgoal):\n 1. l * real n < real (card (A \\<inter> {..<n}))", "by fastforce"], ["proof (state)\nthis:\n  ereal l < ereal (real (card (A \\<inter> {..<?n})) / real ?n) \\<and>\n  0 < ?n \\<Longrightarrow>\n  l * real ?n < real (card (A \\<inter> {..<?n}))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and> 0 < n\n  ereal l < ereal (real (card (A \\<inter> {..<?n})) / real ?n) \\<and>\n  0 < ?n \\<Longrightarrow>\n  l * real ?n < real (card (A \\<inter> {..<?n}))", "show \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) > l * n) sequentially\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l < ereal (real (card (A \\<inter> {..<n})) / real n) \\<and> 0 < n\n  ereal l < ereal (real (card (A \\<inter> {..<?n})) / real ?n) \\<and>\n  0 < ?n \\<Longrightarrow>\n  l * real ?n < real (card (A \\<inter> {..<?n}))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n < real (card (A \\<inter> {..<n}))", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     l * real n < real (card (A \\<inter> {..<n}))\n\ngoal:\nNo subgoals!", "qed"], ["", "proposition lower_asymptotic_densityI:\n  fixes l::real\n  assumes \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) \\<ge> l * n) sequentially\"\n  shows \"lower_asymptotic_density A \\<ge> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n}) \\<ge> l * n \\<and> n > 0) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n", "using assms eventually_gt_at_top eventually_conj"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     l * real n \\<le> real (card (A \\<inter> {..<n}))\n  eventually ((<) ?c) at_top\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?P x \\<and> ?Q x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "have \"card(A \\<inter> {..<n})/n \\<ge> ereal l\" if \"card(A \\<inter> {..<n}) \\<ge> l * n \\<and> n > 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal l \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)", "using that"], ["proof (prove)\nusing this:\n  l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n\n\ngoal (1 subgoal):\n 1. ereal l \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)", "by (meson ereal_less_eq(3) not_less of_nat_0_less_iff pos_divide_less_eq)"], ["proof (state)\nthis:\n  l * real ?n \\<le> real (card (A \\<inter> {..<?n})) \\<and>\n  0 < ?n \\<Longrightarrow>\n  ereal l \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n\n  l * real ?n \\<le> real (card (A \\<inter> {..<?n})) \\<and>\n  0 < ?n \\<Longrightarrow>\n  ereal l \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)", "have \"eventually (\\<lambda>n. card(A \\<inter> {..<n})/n \\<ge> ereal l) sequentially\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     l * real n \\<le> real (card (A \\<inter> {..<n})) \\<and> 0 < n\n  l * real ?n \\<le> real (card (A \\<inter> {..<?n})) \\<and>\n  0 < ?n \\<Longrightarrow>\n  ereal l \\<le> ereal (real (card (A \\<inter> {..<?n})) / real ?n)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal l \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)", "by (simp add: eventually_mono)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)", "have \"liminf (\\<lambda>n. card(A \\<inter> {..<n})/n) \\<ge> ereal l\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal l \\<le> ereal (real (card (A \\<inter> {..<n})) / real n)\n\ngoal (1 subgoal):\n 1. ereal l\n    \\<le> liminf\n           (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "by (simp add: Liminf_bounded)"], ["proof (state)\nthis:\n  ereal l\n  \\<le> liminf\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  ereal l\n  \\<le> liminf\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))", "have \"ereal(lower_asymptotic_density A) \\<ge> ereal l\""], ["proof (prove)\nusing this:\n  ereal l\n  \\<le> liminf\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. ereal l \\<le> ereal (lower_asymptotic_density A)", "using lower_asymptotic_density_in_01(1)"], ["proof (prove)\nusing this:\n  ereal l\n  \\<le> liminf\n         (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))\n  ereal (lower_asymptotic_density ?A) =\n  liminf (\\<lambda>x. ereal (real (card (?A \\<inter> {..<x})) / real x))\n\ngoal (1 subgoal):\n 1. ereal l \\<le> ereal (lower_asymptotic_density A)", "by auto"], ["proof (state)\nthis:\n  ereal l \\<le> ereal (lower_asymptotic_density A)\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "then"], ["proof (chain)\npicking this:\n  ereal l \\<le> ereal (lower_asymptotic_density A)", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal l \\<le> ereal (lower_asymptotic_density A)\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density A", "by auto"], ["proof (state)\nthis:\n  l \\<le> lower_asymptotic_density A\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>One can control the asymptotic density of an intersection in terms of the asymptotic density\nof each component\\<close>"], ["", "lemma lower_asymptotic_density_intersection:\n  \"lower_asymptotic_density A + lower_asymptotic_density B \\<le> lower_asymptotic_density (A \\<inter> B) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A + lower_asymptotic_density B\n    \\<le> lower_asymptotic_density (A \\<inter> B) + 1", "using upper_asymptotic_density_union[of \"UNIV - A\" \"UNIV - B\"]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (UNIV - A \\<union> (UNIV - B))\n  \\<le> upper_asymptotic_density (UNIV - A) +\n        upper_asymptotic_density (UNIV - B)\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A + lower_asymptotic_density B\n    \\<le> lower_asymptotic_density (A \\<inter> B) + 1", "unfolding lower_upper_asymptotic_density_complement"], ["proof (prove)\nusing this:\n  upper_asymptotic_density (UNIV - A \\<union> (UNIV - B))\n  \\<le> upper_asymptotic_density (UNIV - A) +\n        upper_asymptotic_density (UNIV - B)\n\ngoal (1 subgoal):\n 1. 1 - upper_asymptotic_density (UNIV - A) +\n    (1 - upper_asymptotic_density (UNIV - B))\n    \\<le> 1 - upper_asymptotic_density (UNIV - A \\<inter> B) + 1", "by (auto simp add: algebra_simps Diff_Int)"], ["", "lemma lower_asymptotic_density_subset:\n  assumes \"A \\<subseteq> B\"\n  shows \"lower_asymptotic_density A \\<le> lower_asymptotic_density B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A \\<le> lower_asymptotic_density B", "using upper_asymptotic_density_subset[of \"UNIV-B\" \"UNIV-A\"] assms"], ["proof (prove)\nusing this:\n  UNIV - B \\<subseteq> UNIV - A \\<Longrightarrow>\n  upper_asymptotic_density (UNIV - B)\n  \\<le> upper_asymptotic_density (UNIV - A)\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A \\<le> lower_asymptotic_density B", "unfolding lower_upper_asymptotic_density_complement"], ["proof (prove)\nusing this:\n  UNIV - B \\<subseteq> UNIV - A \\<Longrightarrow>\n  upper_asymptotic_density (UNIV - B)\n  \\<le> upper_asymptotic_density (UNIV - A)\n  A \\<subseteq> B\n\ngoal (1 subgoal):\n 1. 1 - upper_asymptotic_density (UNIV - A)\n    \\<le> 1 - upper_asymptotic_density (UNIV - B)", "by auto"], ["", "lemma lower_asymptotic_density_lim:\n  assumes \"(\\<lambda>n. card(A \\<inter> {..<n})/n) \\<longlonglongrightarrow> l\"\n  shows \"lower_asymptotic_density A = l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = l", "have \"(\\<lambda>n. ereal(card(A \\<inter> {..<n})/n)) \\<longlonglongrightarrow> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n    \\<longlonglongrightarrow> ereal l", "using assms"], ["proof (prove)\nusing this:\n  (\\<lambda>n. real (card (A \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n    \\<longlonglongrightarrow> ereal l", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = l", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l", "have \"liminf (\\<lambda>n. card(A \\<inter> {..<n})/n) = l\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    ereal l", "using sequentially_bot tendsto_iff_Liminf_eq_Limsup"], ["proof (prove)\nusing this:\n  (\\<lambda>n. ereal (real (card (A \\<inter> {..<n})) / real n))\n  \\<longlonglongrightarrow> ereal l\n  sequentially \\<noteq> \\<bottom>\n  ?F \\<noteq> \\<bottom> \\<Longrightarrow>\n  (?f \\<longlongrightarrow> ?f0.0) ?F =\n  (Liminf ?F ?f = ?f0.0 \\<and> Limsup ?F ?f = ?f0.0)\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n    ereal l", "by blast"], ["proof (state)\nthis:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = l", "then"], ["proof (chain)\npicking this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l", "show ?thesis"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = l", "unfolding lower_asymptotic_density_def"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x)) =\n  ereal l\n\ngoal (1 subgoal):\n 1. real_of_ereal\n     (liminf\n       (\\<lambda>x. ereal (real (card (A \\<inter> {..<x})) / real x))) =\n    l", "by auto"], ["proof (state)\nthis:\n  lower_asymptotic_density A = l\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lower_asymptotic_density_finite:\n  assumes \"finite A\"\n  shows \"lower_asymptotic_density A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 0", "using lower_asymptotic_density_in_01(3) upper_asymptotic_density_finite[OF assms] lower_asymptotic_density_le_upper"], ["proof (prove)\nusing this:\n  0 \\<le> lower_asymptotic_density ?A\n  upper_asymptotic_density A = 0\n  lower_asymptotic_density ?A \\<le> upper_asymptotic_density ?A\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density A = 0", "by (metis antisym_conv)"], ["", "text \\<open>In particular, bounded intervals have zero lower density.\\<close>"], ["", "lemma lower_asymptotic_density_bdd_interval [simp]:\n  \"lower_asymptotic_density {} = 0\"\n  \"lower_asymptotic_density {..N} = 0\"\n  \"lower_asymptotic_density {..<N} = 0\"\n  \"lower_asymptotic_density {n..N} = 0\"\n  \"lower_asymptotic_density {n..<N} = 0\"\n  \"lower_asymptotic_density {n<..N} = 0\"\n  \"lower_asymptotic_density {n<..<N} = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (lower_asymptotic_density {} = 0 &&&\n     lower_asymptotic_density {..N} = 0 &&&\n     lower_asymptotic_density {..<N} = 0) &&&\n    (lower_asymptotic_density {n..N} = 0 &&&\n     lower_asymptotic_density {n..<N} = 0) &&&\n    lower_asymptotic_density {n<..N} = 0 &&&\n    lower_asymptotic_density {n<..<N} = 0", "by (auto intro!: lower_asymptotic_density_finite)"], ["", "text \\<open>Conversely, unbounded intervals have density $1$.\\<close>"], ["", "lemma lower_asymptotic_density_infinite_interval [simp]:\n  \"lower_asymptotic_density {N..} = 1\"\n  \"lower_asymptotic_density {N<..} = 1\"\n  \"lower_asymptotic_density UNIV = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density {N..} = 1 &&&\n    lower_asymptotic_density {N<..} = 1 &&&\n    lower_asymptotic_density UNIV = 1", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. lower_asymptotic_density {N..} = 1\n 2. lower_asymptotic_density {N<..} = 1\n 3. lower_asymptotic_density UNIV = 1", "have \"UNIV - {N..} = {..<N}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNIV - {N..} = {..<N}", "by auto"], ["proof (state)\nthis:\n  UNIV - {N..} = {..<N}\n\ngoal (3 subgoals):\n 1. lower_asymptotic_density {N..} = 1\n 2. lower_asymptotic_density {N<..} = 1\n 3. lower_asymptotic_density UNIV = 1", "then"], ["proof (chain)\npicking this:\n  UNIV - {N..} = {..<N}", "show \"lower_asymptotic_density {N..} = 1\""], ["proof (prove)\nusing this:\n  UNIV - {N..} = {..<N}\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density {N..} = 1", "by (auto simp add: lower_upper_asymptotic_density_complement)"], ["proof (state)\nthis:\n  lower_asymptotic_density {N..} = 1\n\ngoal (2 subgoals):\n 1. lower_asymptotic_density {N<..} = 1\n 2. lower_asymptotic_density UNIV = 1", "have \"UNIV - {N<..} = {..N}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. UNIV - {N<..} = {..N}", "by auto"], ["proof (state)\nthis:\n  UNIV - {N<..} = {..N}\n\ngoal (2 subgoals):\n 1. lower_asymptotic_density {N<..} = 1\n 2. lower_asymptotic_density UNIV = 1", "then"], ["proof (chain)\npicking this:\n  UNIV - {N<..} = {..N}", "show \"lower_asymptotic_density {N<..} = 1\""], ["proof (prove)\nusing this:\n  UNIV - {N<..} = {..N}\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density {N<..} = 1", "by (auto simp add: lower_upper_asymptotic_density_complement)"], ["proof (state)\nthis:\n  lower_asymptotic_density {N<..} = 1\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density UNIV = 1", "show \"lower_asymptotic_density UNIV = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density UNIV = 1", "by (auto simp add: lower_upper_asymptotic_density_complement)"], ["proof (state)\nthis:\n  lower_asymptotic_density UNIV = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma upper_asymptotic_density_infinite_interval [simp]:\n  \"upper_asymptotic_density {N..} = 1\"\n  \"upper_asymptotic_density {N<..} = 1\"\n  \"upper_asymptotic_density UNIV = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density {N..} = 1 &&&\n    upper_asymptotic_density {N<..} = 1 &&&\n    upper_asymptotic_density UNIV = 1", "by (metis antisym upper_asymptotic_density_in_01(2) lower_asymptotic_density_infinite_interval lower_asymptotic_density_le_upper)+"], ["", "text \\<open>The intersection of sets with lower density one still has lower density one.\\<close>"], ["", "lemma lower_asymptotic_density_one_intersection:\n  assumes \"lower_asymptotic_density A = 1\" \"lower_asymptotic_density B = 1\"\n  shows \"lower_asymptotic_density (A \\<inter> B) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density (A \\<inter> B) = 1", "using lower_asymptotic_density_in_01(2)[of \"A \\<inter> B\"] lower_asymptotic_density_intersection[of A B]"], ["proof (prove)\nusing this:\n  lower_asymptotic_density (A \\<inter> B) \\<le> 1\n  lower_asymptotic_density A + lower_asymptotic_density B\n  \\<le> lower_asymptotic_density (A \\<inter> B) + 1\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density (A \\<inter> B) = 1", "unfolding assms"], ["proof (prove)\nusing this:\n  lower_asymptotic_density (A \\<inter> B) \\<le> 1\n  1 + 1 \\<le> lower_asymptotic_density (A \\<inter> B) + 1\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density (A \\<inter> B) = 1", "by auto"], ["", "lemma lower_asymptotic_density_one_finite_Intersection:\n  assumes \"finite I\" \"\\<And>i. i \\<in> I \\<Longrightarrow> lower_asymptotic_density (A i) = 1\"\n  shows \"lower_asymptotic_density (\\<Inter>i\\<in>I. A i) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density (\\<Inter> (A ` I)) = 1", "using assms"], ["proof (prove)\nusing this:\n  finite I\n  ?i \\<in> I \\<Longrightarrow> lower_asymptotic_density (A ?i) = 1\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density (\\<Inter> (A ` I)) = 1", "by (induction rule: finite_induct, auto intro!: lower_asymptotic_density_one_intersection)"], ["", "text \\<open>As for the upper asymptotic density, there is a modification of the intersection, akin\nto the diagonal argument in this context, for which the ``intersection'' of sets with large\nlower density still has large lower density.\\<close>"], ["", "proposition lower_asymptotic_density_decseq_Inter:\n  assumes \"\\<And>(n::nat). lower_asymptotic_density (A n) \\<ge> l\" \"decseq A\"\n  shows \"\\<exists>B. lower_asymptotic_density B \\<ge> l \\<and> (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "define C where \"C = (\\<lambda>n. UNIV - A n)\""], ["proof (state)\nthis:\n  C = (\\<lambda>n. UNIV - A n)\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have *: \"upper_asymptotic_density (C n) \\<le> 1 - l\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C n) \\<le> 1 - l", "using assms(1)[of n]"], ["proof (prove)\nusing this:\n  l \\<le> lower_asymptotic_density (A n)\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C n) \\<le> 1 - l", "unfolding C_def lower_upper_asymptotic_density_complement[of \"A n\"]"], ["proof (prove)\nusing this:\n  l \\<le> 1 - upper_asymptotic_density (UNIV - A n)\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (UNIV - A n) \\<le> 1 - l", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density (C ?n) \\<le> 1 - l\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have **: \"incseq C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. incseq C", "using assms(2)"], ["proof (prove)\nusing this:\n  decseq A\n\ngoal (1 subgoal):\n 1. incseq C", "unfolding C_def incseq_def decseq_def"], ["proof (prove)\nusing this:\n  \\<forall>m n. m \\<le> n \\<longrightarrow> A n \\<subseteq> A m\n\ngoal (1 subgoal):\n 1. \\<forall>m n.\n       m \\<le> n \\<longrightarrow> UNIV - A m \\<subseteq> UNIV - A n", "by auto"], ["proof (state)\nthis:\n  incseq C\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "obtain D where D: \"upper_asymptotic_density D \\<le> 1 - l\" \"\\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D.\n        \\<lbrakk>upper_asymptotic_density D \\<le> 1 - l;\n         \\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using upper_asymptotic_density_incseq_Union[OF * **]"], ["proof (prove)\nusing this:\n  \\<exists>B.\n     upper_asymptotic_density B \\<le> 1 - l \\<and>\n     (\\<forall>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> B)\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        \\<lbrakk>upper_asymptotic_density D \\<le> 1 - l;\n         \\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  upper_asymptotic_density D \\<le> 1 - l\n  \\<exists>N. C ?n \\<inter> {N..} \\<subseteq> D\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "define B where \"B = UNIV - D\""], ["proof (state)\nthis:\n  B = UNIV - D\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have \"lower_asymptotic_density B \\<ge> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density B", "using D(1) lower_upper_asymptotic_density_complement[of B]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density D \\<le> 1 - l\n  lower_asymptotic_density B = 1 - upper_asymptotic_density (UNIV - B)\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density B", "unfolding B_def"], ["proof (prove)\nusing this:\n  upper_asymptotic_density D \\<le> 1 - l\n  lower_asymptotic_density (UNIV - D) =\n  1 - upper_asymptotic_density (UNIV - (UNIV - D))\n\ngoal (1 subgoal):\n 1. l \\<le> lower_asymptotic_density (UNIV - D)", "by auto"], ["proof (state)\nthis:\n  l \\<le> lower_asymptotic_density B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "moreover"], ["proof (state)\nthis:\n  l \\<le> lower_asymptotic_density B\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have \"\\<exists>N. B \\<inter> {N..} \\<subseteq> A n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n", "using D(2)[of n]"], ["proof (prove)\nusing this:\n  \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\n\ngoal (1 subgoal):\n 1. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n", "unfolding B_def C_def"], ["proof (prove)\nusing this:\n  \\<exists>N. (UNIV - A n) \\<inter> {N..} \\<subseteq> D\n\ngoal (1 subgoal):\n 1. \\<exists>N. (UNIV - D) \\<inter> {N..} \\<subseteq> A n", "by auto"], ["proof (state)\nthis:\n  \\<exists>N. B \\<inter> {N..} \\<subseteq> A ?n\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "ultimately"], ["proof (chain)\npicking this:\n  l \\<le> lower_asymptotic_density B\n  \\<exists>N. B \\<inter> {N..} \\<subseteq> A ?n", "show ?thesis"], ["proof (prove)\nusing this:\n  l \\<le> lower_asymptotic_density B\n  \\<exists>N. B \\<inter> {N..} \\<subseteq> A ?n\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       l \\<le> lower_asymptotic_density B \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "by auto"], ["proof (state)\nthis:\n  \\<exists>B.\n     l \\<le> lower_asymptotic_density B \\<and>\n     (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In the same way, the modified intersection of sets of density $1$ still has density one,\nand is eventually contained in each of them.\\<close>"], ["", "proposition lower_asymptotic_density_one_Inter:\n  assumes \"\\<And>n::nat. lower_asymptotic_density (A n) = 1\"\n  shows \"\\<exists>B. lower_asymptotic_density B = 1 \\<and> (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "define C where \"C = (\\<lambda>n. UNIV - A n)\""], ["proof (state)\nthis:\n  C = (\\<lambda>n. UNIV - A n)\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have *: \"upper_asymptotic_density (C n) = 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C n) = 0", "using assms(1)[of n]"], ["proof (prove)\nusing this:\n  lower_asymptotic_density (A n) = 1\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (C n) = 0", "unfolding C_def lower_upper_asymptotic_density_complement[of \"A n\"]"], ["proof (prove)\nusing this:\n  1 - upper_asymptotic_density (UNIV - A n) = 1\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (UNIV - A n) = 0", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density (C ?n) = 0\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "obtain D where D: \"upper_asymptotic_density D = 0\" \"\\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D.\n        \\<lbrakk>upper_asymptotic_density D = 0;\n         \\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using upper_asymptotic_density_zero_Union[OF *]"], ["proof (prove)\nusing this:\n  \\<exists>B.\n     upper_asymptotic_density B = 0 \\<and>\n     (\\<forall>n. \\<exists>N. C (?n1 n) \\<inter> {N..} \\<subseteq> B)\n\ngoal (1 subgoal):\n 1. (\\<And>D.\n        \\<lbrakk>upper_asymptotic_density D = 0;\n         \\<And>n. \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  upper_asymptotic_density D = 0\n  \\<exists>N. C ?n \\<inter> {N..} \\<subseteq> D\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "define B where \"B = UNIV - D\""], ["proof (state)\nthis:\n  B = UNIV - D\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have \"lower_asymptotic_density B = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density B = 1", "using D(1) lower_upper_asymptotic_density_complement[of B]"], ["proof (prove)\nusing this:\n  upper_asymptotic_density D = 0\n  lower_asymptotic_density B = 1 - upper_asymptotic_density (UNIV - B)\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density B = 1", "unfolding B_def"], ["proof (prove)\nusing this:\n  upper_asymptotic_density D = 0\n  lower_asymptotic_density (UNIV - D) =\n  1 - upper_asymptotic_density (UNIV - (UNIV - D))\n\ngoal (1 subgoal):\n 1. lower_asymptotic_density (UNIV - D) = 1", "by auto"], ["proof (state)\nthis:\n  lower_asymptotic_density B = 1\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "moreover"], ["proof (state)\nthis:\n  lower_asymptotic_density B = 1\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "have \"\\<exists>N. B \\<inter> {N..} \\<subseteq> A n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n", "using D(2)[of n]"], ["proof (prove)\nusing this:\n  \\<exists>N. C n \\<inter> {N..} \\<subseteq> D\n\ngoal (1 subgoal):\n 1. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n", "unfolding B_def C_def"], ["proof (prove)\nusing this:\n  \\<exists>N. (UNIV - A n) \\<inter> {N..} \\<subseteq> D\n\ngoal (1 subgoal):\n 1. \\<exists>N. (UNIV - D) \\<inter> {N..} \\<subseteq> A n", "by auto"], ["proof (state)\nthis:\n  \\<exists>N. B \\<inter> {N..} \\<subseteq> A ?n\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "ultimately"], ["proof (chain)\npicking this:\n  lower_asymptotic_density B = 1\n  \\<exists>N. B \\<inter> {N..} \\<subseteq> A ?n", "show ?thesis"], ["proof (prove)\nusing this:\n  lower_asymptotic_density B = 1\n  \\<exists>N. B \\<inter> {N..} \\<subseteq> A ?n\n\ngoal (1 subgoal):\n 1. \\<exists>B.\n       lower_asymptotic_density B = 1 \\<and>\n       (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)", "by auto"], ["proof (state)\nthis:\n  \\<exists>B.\n     lower_asymptotic_density B = 1 \\<and>\n     (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> A n)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Sets with density $1$ play an important role in relation to Cesaro convergence of nonnegative\nbounded sequences: such a sequence converges to $0$ in Cesaro average if and only if it converges\nto $0$ along a set of density $1$.\n\nThe proof is not hard. Since the Cesaro average tends to $0$, then given $\\epsilon>0$ the\nproportion of times where $u_n < \\epsilon$ tends to $1$, i.e., the set $A_\\epsilon$ of such good\ntimes has density $1$. A modified intersection (as constructed in\nProposition~\\verb+lower_asymptotic_density_one_Inter+) of these times has density $1$, and\n$u_n$ tends to $0$ along this set.\n\\<close>"], ["", "theorem cesaro_imp_density_one:\n  assumes \"\\<And>n. u n \\<ge> (0::real)\" \"(\\<lambda>n. (\\<Sum>i<n. u i)/n) \\<longlonglongrightarrow> 0\"\n  shows \"\\<exists>A. lower_asymptotic_density A = 1 \\<and> (\\<lambda>n. u n * indicator A n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "define B where \"B = (\\<lambda>e. {n. u n \\<ge> e})\""], ["proof (state)\nthis:\n  B = (\\<lambda>e. {n. e \\<le> u n})\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "text \\<open>$B e$ is the set of bad times where $u_n \\geq e$. It has density $0$ thanks to\n  the assumption of Cesaro convergence to $0$.\\<close>"], ["proof (state)\nthis:\n  B = (\\<lambda>e. {n. e \\<le> u n})\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "have A: \"upper_asymptotic_density (B e) = 0\" if \"e > 0\" for e"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (B e) = 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. upper_asymptotic_density (B e) = 0", "have *: \"card (B e \\<inter> {..<n}) / n \\<le> (1/e) * ((\\<Sum>i\\<in>{..<n}. u i)/n)\" if \"n \\<ge> 1\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "have \"e * card (B e \\<inter> {..<n}) = (\\<Sum>i\\<in>B e \\<inter> {..<n}. e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e * real (card (B e \\<inter> {..<n})) =\n    (\\<Sum>i\\<in>B e \\<inter> {..<n}. e)", "by auto"], ["proof (state)\nthis:\n  e * real (card (B e \\<inter> {..<n})) =\n  (\\<Sum>i\\<in>B e \\<inter> {..<n}. e)\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "also"], ["proof (state)\nthis:\n  e * real (card (B e \\<inter> {..<n})) =\n  (\\<Sum>i\\<in>B e \\<inter> {..<n}. e)\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "have \"... \\<le> (\\<Sum>i\\<in>B e \\<inter> {..<n}. u i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>B e \\<inter> {..<n}. e) \\<le> sum u (B e \\<inter> {..<n})", "apply (rule sum_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> B e \\<inter> {..<n} \\<Longrightarrow> e \\<le> u i", "unfolding B_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<in> {n. e \\<le> u n} \\<inter> {..<n} \\<Longrightarrow>\n       e \\<le> u i", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>B e \\<inter> {..<n}. e) \\<le> sum u (B e \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>B e \\<inter> {..<n}. e) \\<le> sum u (B e \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "have \"... \\<le> (\\<Sum>i\\<in>{..<n}. u i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u (B e \\<inter> {..<n}) \\<le> sum u {..<n}", "apply (rule sum_mono2)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite {..<n}\n 2. B e \\<inter> {..<n} \\<subseteq> {..<n}\n 3. \\<And>b.\n       b \\<in> {..<n} - B e \\<inter> {..<n} \\<Longrightarrow> 0 \\<le> u b", "using assms"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n  (\\<lambda>n. sum u {..<n} / real n) \\<longlonglongrightarrow> 0\n\ngoal (3 subgoals):\n 1. finite {..<n}\n 2. B e \\<inter> {..<n} \\<subseteq> {..<n}\n 3. \\<And>b.\n       b \\<in> {..<n} - B e \\<inter> {..<n} \\<Longrightarrow> 0 \\<le> u b", "by auto"], ["proof (state)\nthis:\n  sum u (B e \\<inter> {..<n}) \\<le> sum u {..<n}\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "finally"], ["proof (chain)\npicking this:\n  e * real (card (B e \\<inter> {..<n})) \\<le> sum u {..<n}", "show ?thesis"], ["proof (prove)\nusing this:\n  e * real (card (B e \\<inter> {..<n})) \\<le> sum u {..<n}\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "using \\<open>e > 0\\<close> \\<open>n \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  e * real (card (B e \\<inter> {..<n})) \\<le> sum u {..<n}\n  0 < e\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. real (card (B e \\<inter> {..<n})) / real n\n    \\<le> 1 / e * (sum u {..<n} / real n)", "by (auto simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  real (card (B e \\<inter> {..<n})) / real n\n  \\<le> 1 / e * (sum u {..<n} / real n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> ?n \\<Longrightarrow>\n  real (card (B e \\<inter> {..<?n})) / real ?n\n  \\<le> 1 / e * (sum u {..<?n} / real ?n)\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (B e) = 0", "have \"(\\<lambda>n. card (B e \\<inter> {..<n}) / n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real (card (B e \\<inter> {..<n})) / real n)\n    \\<longlonglongrightarrow> 0", "proof (rule tendsto_sandwich[of \"\\<lambda>_. 0\" _ _ \"\\<lambda>n. (1/e) * ((\\<Sum>i\\<in>{..<n}. u i)/n)\"])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (B e \\<inter> {..<n})) / real n\n 2. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B e \\<inter> {..<n})) / real n\n       \\<le> 1 / e * (sum u {..<n} / real n)\n 3. (\\<lambda>_. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n    \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. (1/e) * ((\\<Sum>i\\<in>{..<n}. u i)/n)) \\<longlonglongrightarrow> (1/e) * 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n    \\<longlonglongrightarrow> 1 / e * 0", "by (intro tendsto_intros assms)"], ["proof (state)\nthis:\n  (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n  \\<longlonglongrightarrow> 1 / e * 0\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (B e \\<inter> {..<n})) / real n\n 2. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B e \\<inter> {..<n})) / real n\n       \\<le> 1 / e * (sum u {..<n} / real n)\n 3. (\\<lambda>_. 0) \\<longlonglongrightarrow> 0\n 4. (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n  \\<longlonglongrightarrow> 1 / e * 0", "show \"(\\<lambda>n. (1/e) * ((\\<Sum>i\\<in>{..<n}. u i)/n)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n  \\<longlonglongrightarrow> 1 / e * 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. 1 / e * (sum u {..<n} / real n))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. 1 / e * (sum u {..<n} / real n)) \\<longlonglongrightarrow> 0\n\ngoal (3 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (B e \\<inter> {..<n})) / real n\n 2. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B e \\<inter> {..<n})) / real n\n       \\<le> 1 / e * (sum u {..<n} / real n)\n 3. (\\<lambda>_. 0) \\<longlonglongrightarrow> 0", "show \"\\<forall>\\<^sub>F n in sequentially. real (card (B e \\<inter> {..<n})) / real n \\<le> 1 / e * (sum u {..<n} / real n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B e \\<inter> {..<n})) / real n\n       \\<le> 1 / e * (sum u {..<n} / real n)", "using *"], ["proof (prove)\nusing this:\n  1 \\<le> ?n \\<Longrightarrow>\n  real (card (B e \\<inter> {..<?n})) / real ?n\n  \\<le> 1 / e * (sum u {..<?n} / real ?n)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B e \\<inter> {..<n})) / real n\n       \\<le> 1 / e * (sum u {..<n} / real n)", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  1 \\<le> ?n \\<Longrightarrow>\n  real (card (B e \\<inter> {..<?n})) / real ?n\n  \\<le> 1 / e * (sum u {..<?n} / real ?n)\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          real (card (B e \\<inter> {..<n})) / real n\n          \\<le> 1 / e * (sum u {..<n} / real n)", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B e \\<inter> {..<n})) / real n\n     \\<le> 1 / e * (sum u {..<n} / real n)\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       0 \\<le> real (card (B e \\<inter> {..<n})) / real n\n 2. (\\<lambda>_. 0) \\<longlonglongrightarrow> 0", "qed (auto)"], ["proof (state)\nthis:\n  (\\<lambda>n. real (card (B e \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (B e) = 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. real (card (B e \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. real (card (B e \\<inter> {..<n})) / real n)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (B e) = 0", "by (rule upper_asymptotic_density_lim)"], ["proof (state)\nthis:\n  upper_asymptotic_density (B e) = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?e \\<Longrightarrow> upper_asymptotic_density (B ?e) = 0\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "define C where \"C = (\\<lambda>n::nat. UNIV - B (((1::real)/2)^n))\""], ["proof (state)\nthis:\n  C = (\\<lambda>n. UNIV - B ((1 / 2) ^ n))\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "have \"lower_asymptotic_density (C n) = 1\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. lower_asymptotic_density (C n) = 1", "unfolding C_def lower_upper_asymptotic_density_complement"], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - upper_asymptotic_density (UNIV - (UNIV - B ((1 / 2) ^ n))) = 1", "by (auto intro!: A)"], ["proof (state)\nthis:\n  lower_asymptotic_density (C ?n) = 1\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  lower_asymptotic_density (C ?n) = 1", "obtain A where A: \"lower_asymptotic_density A = 1\" \"\\<And>n. \\<exists>N. A \\<inter> {N..} \\<subseteq> C n\""], ["proof (prove)\nusing this:\n  lower_asymptotic_density (C ?n) = 1\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>lower_asymptotic_density A = 1;\n         \\<And>n. \\<exists>N. A \\<inter> {N..} \\<subseteq> C n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using lower_asymptotic_density_one_Inter"], ["proof (prove)\nusing this:\n  lower_asymptotic_density (C ?n) = 1\n  (\\<And>n. lower_asymptotic_density (?A n) = 1) \\<Longrightarrow>\n  \\<exists>B.\n     lower_asymptotic_density B = 1 \\<and>\n     (\\<forall>n. \\<exists>N. B \\<inter> {N..} \\<subseteq> ?A n)\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>lower_asymptotic_density A = 1;\n         \\<And>n. \\<exists>N. A \\<inter> {N..} \\<subseteq> C n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  lower_asymptotic_density A = 1\n  \\<exists>N. A \\<inter> {N..} \\<subseteq> C ?n\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "have E: \"eventually (\\<lambda>n. u n * indicator A n < e) sequentially\" if \"e > 0\" for e"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "have \"eventually (\\<lambda>n. ((1::real)/2)^n < e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. (1 / 2) ^ n < e", "by (rule order_tendstoD[OF _ \\<open>e > 0\\<close>], intro tendsto_intros, auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. (1 / 2) ^ n < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially. (1 / 2) ^ n < e", "obtain n where n: \"((1::real)/2)^n < e\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. (1 / 2) ^ n < e\n\ngoal (1 subgoal):\n 1. (\\<And>n. (1 / 2) ^ n < e \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. (1 / 2) ^ n < e\n\ngoal (1 subgoal):\n 1. (\\<And>n. (1 / 2) ^ n < e \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (1 / 2) ^ n < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "obtain N where N: \"A \\<inter> {N..} \\<subseteq> C n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        A \\<inter> {N..} \\<subseteq> C n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using A(2)"], ["proof (prove)\nusing this:\n  \\<exists>N. A \\<inter> {N..} \\<subseteq> C ?n\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        A \\<inter> {N..} \\<subseteq> C n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  A \\<inter> {N..} \\<subseteq> C n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "have \"u k * indicator A k < e\" if \"k \\<ge> N\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. u k * indicat_real A k < e", "proof (cases \"k \\<in> A\")"], ["proof (state)\ngoal (2 subgoals):\n 1. k \\<in> A \\<Longrightarrow> u k * indicat_real A k < e\n 2. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "case True"], ["proof (state)\nthis:\n  k \\<in> A\n\ngoal (2 subgoals):\n 1. k \\<in> A \\<Longrightarrow> u k * indicat_real A k < e\n 2. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "then"], ["proof (chain)\npicking this:\n  k \\<in> A", "have \"k \\<in> C n\""], ["proof (prove)\nusing this:\n  k \\<in> A\n\ngoal (1 subgoal):\n 1. k \\<in> C n", "using N that"], ["proof (prove)\nusing this:\n  k \\<in> A\n  A \\<inter> {N..} \\<subseteq> C n\n  N \\<le> k\n\ngoal (1 subgoal):\n 1. k \\<in> C n", "by auto"], ["proof (state)\nthis:\n  k \\<in> C n\n\ngoal (2 subgoals):\n 1. k \\<in> A \\<Longrightarrow> u k * indicat_real A k < e\n 2. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "then"], ["proof (chain)\npicking this:\n  k \\<in> C n", "have \"u k < ((1::real)/2)^n\""], ["proof (prove)\nusing this:\n  k \\<in> C n\n\ngoal (1 subgoal):\n 1. u k < (1 / 2) ^ n", "unfolding C_def B_def"], ["proof (prove)\nusing this:\n  k \\<in> UNIV - {na. (1 / 2) ^ n \\<le> u na}\n\ngoal (1 subgoal):\n 1. u k < (1 / 2) ^ n", "by auto"], ["proof (state)\nthis:\n  u k < (1 / 2) ^ n\n\ngoal (2 subgoals):\n 1. k \\<in> A \\<Longrightarrow> u k * indicat_real A k < e\n 2. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "then"], ["proof (chain)\npicking this:\n  u k < (1 / 2) ^ n", "have \"u k < e\""], ["proof (prove)\nusing this:\n  u k < (1 / 2) ^ n\n\ngoal (1 subgoal):\n 1. u k < e", "using n"], ["proof (prove)\nusing this:\n  u k < (1 / 2) ^ n\n  (1 / 2) ^ n < e\n\ngoal (1 subgoal):\n 1. u k < e", "by auto"], ["proof (state)\nthis:\n  u k < e\n\ngoal (2 subgoals):\n 1. k \\<in> A \\<Longrightarrow> u k * indicat_real A k < e\n 2. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "then"], ["proof (chain)\npicking this:\n  u k < e", "show ?thesis"], ["proof (prove)\nusing this:\n  u k < e\n\ngoal (1 subgoal):\n 1. u k * indicat_real A k < e", "unfolding indicator_def"], ["proof (prove)\nusing this:\n  u k < e\n\ngoal (1 subgoal):\n 1. u k * (if k \\<in> A then 1 else 0) < e", "using True"], ["proof (prove)\nusing this:\n  u k < e\n  k \\<in> A\n\ngoal (1 subgoal):\n 1. u k * (if k \\<in> A then 1 else 0) < e", "by auto"], ["proof (state)\nthis:\n  u k * indicat_real A k < e\n\ngoal (1 subgoal):\n 1. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "case False"], ["proof (state)\nthis:\n  k \\<notin> A\n\ngoal (1 subgoal):\n 1. k \\<notin> A \\<Longrightarrow> u k * indicat_real A k < e", "then"], ["proof (chain)\npicking this:\n  k \\<notin> A", "show ?thesis"], ["proof (prove)\nusing this:\n  k \\<notin> A\n\ngoal (1 subgoal):\n 1. u k * indicat_real A k < e", "unfolding indicator_def"], ["proof (prove)\nusing this:\n  k \\<notin> A\n\ngoal (1 subgoal):\n 1. u k * (if k \\<in> A then 1 else 0) < e", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  k \\<notin> A\n  0 < e\n\ngoal (1 subgoal):\n 1. u k * (if k \\<in> A then 1 else 0) < e", "by auto"], ["proof (state)\nthis:\n  u k * indicat_real A k < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?k \\<Longrightarrow> u ?k * indicat_real A ?k < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "then"], ["proof (chain)\npicking this:\n  N \\<le> ?k \\<Longrightarrow> u ?k * indicat_real A ?k < e", "show ?thesis"], ["proof (prove)\nusing this:\n  N \\<le> ?k \\<Longrightarrow> u ?k * indicat_real A ?k < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  N \\<le> ?k \\<Longrightarrow> u ?k * indicat_real A ?k < e\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. u n * indicat_real A n < e", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?e \\<Longrightarrow>\n  \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < ?e\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. u n * indicator A n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "apply (rule order_tendstoI[OF _ E])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < u x * indicat_real A x\n 2. \\<And>a. 0 < a \\<Longrightarrow> 0 < a", "unfolding indicator_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < u x * (if x \\<in> A then 1 else 0)\n 2. \\<And>a. 0 < a \\<Longrightarrow> 0 < a", "using \\<open>\\<And>n. u n \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially.\n          a < u x * (if x \\<in> A then 1 else 0)\n 2. \\<And>a. 0 < a \\<Longrightarrow> 0 < a", "by (simp add: less_le_trans)"], ["proof (state)\nthis:\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "using \\<open>lower_asymptotic_density A = 1\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n  lower_asymptotic_density A = 1\n\ngoal (1 subgoal):\n 1. \\<exists>A.\n       lower_asymptotic_density A = 1 \\<and>\n       (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0", "by auto"], ["proof (state)\nthis:\n  \\<exists>A.\n     lower_asymptotic_density A = 1 \\<and>\n     (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The proof of the reverse implication is more direct: in the Cesaro sum, just bound the\nelements in $A$ by a small $\\epsilon$, and the other ones by a uniform bound, to get a bound\nwhich is $o(n)$.\\<close>"], ["", "theorem density_one_imp_cesaro:\n  assumes \"\\<And>n. u n \\<ge> (0::real)\" \"\\<And>n. u n \\<le> C\"\n          \"lower_asymptotic_density A = 1\"\n          \"(\\<lambda>n. u n * indicator A n) \\<longlonglongrightarrow> 0\"\n  shows \"(\\<lambda>n. (\\<Sum>i<n. u i)/n) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. sum u {..<n} / real n) \\<longlonglongrightarrow> 0", "proof (rule order_tendstoI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < sum u {..<x} / real x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "fix e::real"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < sum u {..<x} / real x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "assume \"e < 0\""], ["proof (state)\nthis:\n  e < 0\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < sum u {..<x} / real x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "have \"(\\<Sum>i<n. u i)/n \\<ge> 0\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> sum u {..<n} / real n", "using assms(1)"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n\ngoal (1 subgoal):\n 1. 0 \\<le> sum u {..<n} / real n", "by (simp add: sum_nonneg divide_simps)"], ["proof (state)\nthis:\n  0 \\<le> sum u {..<?n} / real ?n\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < sum u {..<x} / real x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "then"], ["proof (chain)\npicking this:\n  0 \\<le> sum u {..<?n} / real ?n", "have \"(\\<Sum>i<n. u i)/n > e\" for n"], ["proof (prove)\nusing this:\n  0 \\<le> sum u {..<?n} / real ?n\n\ngoal (1 subgoal):\n 1. e < sum u {..<n} / real n", "using \\<open>e < 0\\<close> less_le_trans"], ["proof (prove)\nusing this:\n  0 \\<le> sum u {..<?n} / real ?n\n  e < 0\n  \\<lbrakk>?x < ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x < ?z\n\ngoal (1 subgoal):\n 1. e < sum u {..<n} / real n", "by auto"], ["proof (state)\nthis:\n  e < sum u {..<?n} / real ?n\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       a < 0 \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. a < sum u {..<x} / real x\n 2. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "then"], ["proof (chain)\npicking this:\n  e < sum u {..<?n} / real ?n", "show \"eventually (\\<lambda>n. (\\<Sum>i<n. u i)/n > e) sequentially\""], ["proof (prove)\nusing this:\n  e < sum u {..<?n} / real ?n\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. e < sum u {..<n} / real n", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  e < sum u {..<?n} / real ?n\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. e < sum u {..<n} / real n", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. e < sum u {..<n} / real n\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "have \"C \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> C", "using \\<open>u 0 \\<ge> 0\\<close> \\<open>u 0 \\<le> C\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> u 0\n  u 0 \\<le> C\n\ngoal (1 subgoal):\n 1. 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "have \"eventually (\\<lambda>n. u n * indicator A n < e/4) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e / 4", "using order_tendstoD(2)[OF assms(4), of \"e/4\"] \\<open>e>0\\<close>"], ["proof (prove)\nusing this:\n  0 < e / 4 \\<Longrightarrow>\n  \\<forall>\\<^sub>F x in sequentially. u x * indicat_real A x < e / 4\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e / 4", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e / 4\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e / 4", "obtain N where N: \"\\<And>k. k \\<ge> N \\<Longrightarrow> u k * indicator A k < e/4\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. u n * indicat_real A n < e / 4\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>k.\n            N \\<le> k \\<Longrightarrow>\n            u k * indicat_real A k < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. u n * indicat_real A n < e / 4\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>k.\n            N \\<le> k \\<Longrightarrow>\n            u k * indicat_real A k < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  N \\<le> ?k \\<Longrightarrow> u ?k * indicat_real A ?k < e / 4\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "define B where \"B = UNIV - A\""], ["proof (state)\nthis:\n  B = UNIV - A\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "have *: \"upper_asymptotic_density B = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density B = 0", "using assms"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n  u ?n \\<le> C\n  lower_asymptotic_density A = 1\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B = 0", "unfolding B_def lower_upper_asymptotic_density_complement"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n  u ?n \\<le> C\n  1 - upper_asymptotic_density (UNIV - A) = 1\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density (UNIV - A) = 0", "by auto"], ["proof (state)\nthis:\n  upper_asymptotic_density B = 0\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "have \"eventually (\\<lambda>n. card(B \\<inter> {..<n}) < (e/(4 * (C+1))) * n) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       real (card (B \\<inter> {..<n})) < e / (4 * (C + 1)) * real n", "apply (rule upper_asymptotic_densityD)"], ["proof (prove)\ngoal (1 subgoal):\n 1. upper_asymptotic_density B < e / (4 * (C + 1))", "using \\<open>e > 0\\<close> \\<open>C \\<ge> 0\\<close> *"], ["proof (prove)\nusing this:\n  0 < e\n  0 \\<le> C\n  upper_asymptotic_density B = 0\n\ngoal (1 subgoal):\n 1. upper_asymptotic_density B < e / (4 * (C + 1))", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < e / (4 * (C + 1)) * real n\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < e / (4 * (C + 1)) * real n", "obtain M where M: \"\\<And>n. n \\<ge> M \\<Longrightarrow> card(B \\<inter> {..<n}) < (e/(4 * (C+1))) * n\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     real (card (B \\<inter> {..<n})) < e / (4 * (C + 1)) * real n\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>n.\n            M \\<le> n \\<Longrightarrow>\n            real (card (B \\<inter> {..<n}))\n            < e / (4 * (C + 1)) * real n) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        real (card (B \\<inter> {..<n})) < e / (4 * (C + 1)) * real n\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>n.\n            M \\<le> n \\<Longrightarrow>\n            real (card (B \\<inter> {..<n}))\n            < e / (4 * (C + 1)) * real n) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  M \\<le> ?n \\<Longrightarrow>\n  real (card (B \\<inter> {..<?n})) < e / (4 * (C + 1)) * real ?n\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "obtain P::nat where P: \"P \\<ge> 4 * N * C/e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P.\n        real (4 * N) * C / e \\<le> real P \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using real_arch_simple"], ["proof (prove)\nusing this:\n  \\<exists>n. ?x \\<le> of_nat n\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        real (4 * N) * C / e \\<le> real P \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  real (4 * N) * C / e \\<le> real P\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "define Q where \"Q = N + M + 1 + P\""], ["proof (state)\nthis:\n  Q = N + M + 1 + P\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "have \"(\\<Sum>i<n. u i)/n < e\" if \"n \\<ge> Q\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have n: \"n \\<ge> N\" \"n \\<ge> M\" \"n \\<ge> P\" \"n \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (N \\<le> n &&& M \\<le> n) &&& P \\<le> n &&& 1 \\<le> n", "using \\<open>n \\<ge> Q\\<close>"], ["proof (prove)\nusing this:\n  Q \\<le> n\n\ngoal (1 subgoal):\n 1. (N \\<le> n &&& M \\<le> n) &&& P \\<le> n &&& 1 \\<le> n", "unfolding Q_def"], ["proof (prove)\nusing this:\n  N + M + 1 + P \\<le> n\n\ngoal (1 subgoal):\n 1. (N \\<le> n &&& M \\<le> n) &&& P \\<le> n &&& 1 \\<le> n", "by auto"], ["proof (state)\nthis:\n  N \\<le> n\n  M \\<le> n\n  P \\<le> n\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "then"], ["proof (chain)\npicking this:\n  N \\<le> n\n  M \\<le> n\n  P \\<le> n\n  1 \\<le> n", "have n2: \"n \\<ge> 4 * N * C/e\""], ["proof (prove)\nusing this:\n  N \\<le> n\n  M \\<le> n\n  P \\<le> n\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. real (4 * N) * C / e \\<le> real n", "using P"], ["proof (prove)\nusing this:\n  N \\<le> n\n  M \\<le> n\n  P \\<le> n\n  1 \\<le> n\n  real (4 * N) * C / e \\<le> real P\n\ngoal (1 subgoal):\n 1. real (4 * N) * C / e \\<le> real n", "by auto"], ["proof (state)\nthis:\n  real (4 * N) * C / e \\<le> real n\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"(\\<Sum>i<n. u i) \\<le> (\\<Sum>i\\<in>{..<N} \\<union> ({N..<n} \\<inter> A) \\<union> ({N..<n} - A). u i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {..<n}\n    \\<le> sum u ({..<N} \\<union> {N..<n} \\<inter> A \\<union> ({N..<n} - A))", "by (rule sum_mono2, auto simp add: assms)"], ["proof (state)\nthis:\n  sum u {..<n}\n  \\<le> sum u ({..<N} \\<union> {N..<n} \\<inter> A \\<union> ({N..<n} - A))\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  sum u {..<n}\n  \\<le> sum u ({..<N} \\<union> {N..<n} \\<inter> A \\<union> ({N..<n} - A))\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... = (\\<Sum>i\\<in>{..<N}. u i) + (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i) + (\\<Sum>i\\<in>{N..<n} - A. u i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u ({..<N} \\<union> {N..<n} \\<inter> A \\<union> ({N..<n} - A)) =\n    sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A)", "by (subst sum.union_disjoint, auto)+"], ["proof (state)\nthis:\n  sum u ({..<N} \\<union> {N..<n} \\<inter> A \\<union> ({N..<n} - A)) =\n  sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A)\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  sum u ({..<N} \\<union> {N..<n} \\<inter> A \\<union> ({N..<n} - A)) =\n  sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A)\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... = (\\<Sum>i\\<in>{..<N}. u i) + (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicator A i) + (\\<Sum>i\\<in>{N..<n} - A. u i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A) =\n    sum u {..<N} +\n    (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicat_real A i) +\n    sum u ({N..<n} - A)", "unfolding indicator_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A) =\n    sum u {..<N} +\n    (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * (if i \\<in> A then 1 else 0)) +\n    sum u ({N..<n} - A)", "by auto"], ["proof (state)\nthis:\n  sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A) =\n  sum u {..<N} + (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicat_real A i) +\n  sum u ({N..<n} - A)\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  sum u {..<N} + sum u ({N..<n} \\<inter> A) + sum u ({N..<n} - A) =\n  sum u {..<N} + (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicat_real A i) +\n  sum u ({N..<n} - A)\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... \\<le> (\\<Sum>i\\<in>{..<N}. u i) + (\\<Sum>i\\<in>{N..<n}. u i * indicator A i) + (\\<Sum>i\\<in> B \\<inter> {..<n}. u i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {..<N} +\n    (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicat_real A i) +\n    sum u ({N..<n} - A)\n    \\<le> sum u {..<N} + (\\<Sum>i = N..<n. u i * indicat_real A i) +\n          sum u (B \\<inter> {..<n})", "apply (intro add_mono sum_mono2)"], ["proof (prove)\ngoal (9 subgoals):\n 1. finite {..<N}\n 2. {..<N} \\<subseteq> {..<N}\n 3. \\<And>b. b \\<in> {..<N} - {..<N} \\<Longrightarrow> 0 \\<le> u b\n 4. finite {N..<n}\n 5. {N..<n} \\<inter> A \\<subseteq> {N..<n}\n 6. \\<And>b.\n       b \\<in> {N..<n} - {N..<n} \\<inter> A \\<Longrightarrow>\n       0 \\<le> u b * indicat_real A b\n 7. finite (B \\<inter> {..<n})\n 8. {N..<n} - A \\<subseteq> B \\<inter> {..<n}\n 9. \\<And>b.\n       b \\<in> B \\<inter> {..<n} - ({N..<n} - A) \\<Longrightarrow>\n       0 \\<le> u b", "unfolding B_def"], ["proof (prove)\ngoal (9 subgoals):\n 1. finite {..<N}\n 2. {..<N} \\<subseteq> {..<N}\n 3. \\<And>b. b \\<in> {..<N} - {..<N} \\<Longrightarrow> 0 \\<le> u b\n 4. finite {N..<n}\n 5. {N..<n} \\<inter> A \\<subseteq> {N..<n}\n 6. \\<And>b.\n       b \\<in> {N..<n} - {N..<n} \\<inter> A \\<Longrightarrow>\n       0 \\<le> u b * indicat_real A b\n 7. finite ((UNIV - A) \\<inter> {..<n})\n 8. {N..<n} - A \\<subseteq> (UNIV - A) \\<inter> {..<n}\n 9. \\<And>b.\n       b \\<in> (UNIV - A) \\<inter> {..<n} - ({N..<n} - A) \\<Longrightarrow>\n       0 \\<le> u b", "using assms"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n  u ?n \\<le> C\n  lower_asymptotic_density A = 1\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n\ngoal (9 subgoals):\n 1. finite {..<N}\n 2. {..<N} \\<subseteq> {..<N}\n 3. \\<And>b. b \\<in> {..<N} - {..<N} \\<Longrightarrow> 0 \\<le> u b\n 4. finite {N..<n}\n 5. {N..<n} \\<inter> A \\<subseteq> {N..<n}\n 6. \\<And>b.\n       b \\<in> {N..<n} - {N..<n} \\<inter> A \\<Longrightarrow>\n       0 \\<le> u b * indicat_real A b\n 7. finite ((UNIV - A) \\<inter> {..<n})\n 8. {N..<n} - A \\<subseteq> (UNIV - A) \\<inter> {..<n}\n 9. \\<And>b.\n       b \\<in> (UNIV - A) \\<inter> {..<n} - ({N..<n} - A) \\<Longrightarrow>\n       0 \\<le> u b", "by auto"], ["proof (state)\nthis:\n  sum u {..<N} + (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicat_real A i) +\n  sum u ({N..<n} - A)\n  \\<le> sum u {..<N} + (\\<Sum>i = N..<n. u i * indicat_real A i) +\n        sum u (B \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  sum u {..<N} + (\\<Sum>i\\<in>{N..<n} \\<inter> A. u i * indicat_real A i) +\n  sum u ({N..<n} - A)\n  \\<le> sum u {..<N} + (\\<Sum>i = N..<n. u i * indicat_real A i) +\n        sum u (B \\<inter> {..<n})\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... \\<le> (\\<Sum>i\\<in>{..<N}. C) + (\\<Sum>i\\<in>{N..<n}. e/4) + (\\<Sum>i\\<in>B \\<inter> {..<n}. C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {..<N} + (\\<Sum>i = N..<n. u i * indicat_real A i) +\n    sum u (B \\<inter> {..<n})\n    \\<le> (\\<Sum>i<N. C) + (\\<Sum>i = N..<n. e / 4) +\n          (\\<Sum>i\\<in>B \\<inter> {..<n}. C)", "apply (intro add_mono sum_mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> {..<N} \\<Longrightarrow> u i \\<le> C\n 2. \\<And>i.\n       i \\<in> {N..<n} \\<Longrightarrow> u i * indicat_real A i \\<le> e / 4\n 3. \\<And>i. i \\<in> B \\<inter> {..<n} \\<Longrightarrow> u i \\<le> C", "using assms less_imp_le[OF N]"], ["proof (prove)\nusing this:\n  0 \\<le> u ?n\n  u ?n \\<le> C\n  lower_asymptotic_density A = 1\n  (\\<lambda>n. u n * indicat_real A n) \\<longlonglongrightarrow> 0\n  N \\<le> ?k1 \\<Longrightarrow> u ?k1 * indicat_real A ?k1 \\<le> e / 4\n\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> {..<N} \\<Longrightarrow> u i \\<le> C\n 2. \\<And>i.\n       i \\<in> {N..<n} \\<Longrightarrow> u i * indicat_real A i \\<le> e / 4\n 3. \\<And>i. i \\<in> B \\<inter> {..<n} \\<Longrightarrow> u i \\<le> C", "by auto"], ["proof (state)\nthis:\n  sum u {..<N} + (\\<Sum>i = N..<n. u i * indicat_real A i) +\n  sum u (B \\<inter> {..<n})\n  \\<le> (\\<Sum>i<N. C) + (\\<Sum>i = N..<n. e / 4) +\n        (\\<Sum>i\\<in>B \\<inter> {..<n}. C)\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  sum u {..<N} + (\\<Sum>i = N..<n. u i * indicat_real A i) +\n  sum u (B \\<inter> {..<n})\n  \\<le> (\\<Sum>i<N. C) + (\\<Sum>i = N..<n. e / 4) +\n        (\\<Sum>i\\<in>B \\<inter> {..<n}. C)\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... = N * C + (n-N) * e/4 + card(B \\<inter> {..<n}) * C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<N. C) + (\\<Sum>i = N..<n. e / 4) +\n    (\\<Sum>i\\<in>B \\<inter> {..<n}. C) =\n    real N * C + real (n - N) * e / 4 + real (card (B \\<inter> {..<n})) * C", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i<N. C) + (\\<Sum>i = N..<n. e / 4) +\n  (\\<Sum>i\\<in>B \\<inter> {..<n}. C) =\n  real N * C + real (n - N) * e / 4 + real (card (B \\<inter> {..<n})) * C\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  (\\<Sum>i<N. C) + (\\<Sum>i = N..<n. e / 4) +\n  (\\<Sum>i\\<in>B \\<inter> {..<n}. C) =\n  real N * C + real (n - N) * e / 4 + real (card (B \\<inter> {..<n})) * C\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... \\<le> n * e/4 + n * e/4 + (e/(4 * (C+1))) * n * C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real N * C + real (n - N) * e / 4 + real (card (B \\<inter> {..<n})) * C\n    \\<le> real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C", "apply (intro add_mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. real N * C \\<le> real n * e / 4\n 2. real (n - N) * e / 4 \\<le> real n * e / 4\n 3. real (card (B \\<inter> {..<n})) * C \\<le> e / (4 * (C + 1)) * real n * C", "using n2 \\<open>e > 0\\<close> mult_right_mono[OF less_imp_le[OF M[OF \\<open>n \\<ge> M\\<close>]] \\<open>C \\<ge> 0\\<close>]"], ["proof (prove)\nusing this:\n  real (4 * N) * C / e \\<le> real n\n  0 < e\n  real (card (B \\<inter> {..<n})) * C \\<le> e / (4 * (C + 1)) * real n * C\n\ngoal (3 subgoals):\n 1. real N * C \\<le> real n * e / 4\n 2. real (n - N) * e / 4 \\<le> real n * e / 4\n 3. real (card (B \\<inter> {..<n})) * C \\<le> e / (4 * (C + 1)) * real n * C", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  real N * C + real (n - N) * e / 4 + real (card (B \\<inter> {..<n})) * C\n  \\<le> real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  real N * C + real (n - N) * e / 4 + real (card (B \\<inter> {..<n})) * C\n  \\<le> real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... \\<le> n * e * 3/4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C\n    \\<le> real n * e * 3 / 4", "using \\<open>C \\<ge> 0\\<close> \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> C\n  0 < e\n\ngoal (1 subgoal):\n 1. real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C\n    \\<le> real n * e * 3 / 4", "by (simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C\n  \\<le> real n * e * 3 / 4\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "also"], ["proof (state)\nthis:\n  real n * e / 4 + real n * e / 4 + e / (4 * (C + 1)) * real n * C\n  \\<le> real n * e * 3 / 4\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "have \"... < n * e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real n * e * 3 / 4 < real n * e", "using \\<open>n \\<ge> 1\\<close> \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> n\n  0 < e\n\ngoal (1 subgoal):\n 1. real n * e * 3 / 4 < real n * e", "by auto"], ["proof (state)\nthis:\n  real n * e * 3 / 4 < real n * e\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "finally"], ["proof (chain)\npicking this:\n  sum u {..<n} < real n * e", "show ?thesis"], ["proof (prove)\nusing this:\n  sum u {..<n} < real n * e\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "using \\<open>n \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  sum u {..<n} < real n * e\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. sum u {..<n} / real n < e", "by (simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  sum u {..<n} / real n < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Q \\<le> ?n \\<Longrightarrow> sum u {..<?n} / real ?n < e\n\ngoal (1 subgoal):\n 1. \\<And>a.\n       0 < a \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in sequentially. sum u {..<x} / real x < a", "then"], ["proof (chain)\npicking this:\n  Q \\<le> ?n \\<Longrightarrow> sum u {..<?n} / real ?n < e", "show \"eventually (\\<lambda>n. (\\<Sum>i<n. u i)/n < e) sequentially\""], ["proof (prove)\nusing this:\n  Q \\<le> ?n \\<Longrightarrow> sum u {..<?n} / real ?n < e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. sum u {..<n} / real n < e", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  Q \\<le> ?n \\<Longrightarrow> sum u {..<?n} / real ?n < e\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. sum u {..<n} / real n < e", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. sum u {..<n} / real n < e\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*of Asymptotic_Density.thy*)"]]}