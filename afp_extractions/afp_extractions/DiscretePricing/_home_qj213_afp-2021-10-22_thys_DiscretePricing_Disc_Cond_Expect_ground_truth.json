{"file_name": "/home/qj213/afp-2021-10-22/thys/DiscretePricing/Disc_Cond_Expect.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/DiscretePricing", "problem_names": ["lemma singl_meas_if:\n  assumes \"f \\<in> space M \\<rightarrow> space N\"\n  and \"\\<forall>r\\<in> range f\\<inter> space N. \\<exists>A\\<in> sets N. range f\\<inter> A = {r}\"\nshows \"point_measurable (fct_gen_subalgebra M N f) (space N) f\"", "lemma  meas_single_meas:\n  assumes \"f\\<in> measurable M N\"\n  and \"\\<forall>r\\<in> range f\\<inter> space N. \\<exists>A\\<in> sets N. range f\\<inter> A = {r}\"\nshows \"point_measurable M (space N) f\"", "lemma  count_pre_disj:\n  fixes i::nat\n  assumes \"countable B\"\n  and \"i \\<noteq> j\"\nshows \"(countable_preimages B Y) i \\<inter> (countable_preimages B Y) j = {}\"", "lemma count_pre_surj:\n  assumes \"countable B\"\n  and \"w \\<in> Y -`B\"\nshows \"\\<exists>i. w \\<in> (countable_preimages B Y) i\"", "lemma count_pre_img:\n  assumes \"x \\<in> (countable_preimages B Y) n\"\n  shows \"Y x = (from_nat_into B) n\"", "lemma count_pre_union_img:\n  assumes \"countable B\"\n  shows \"Y -`B = (\\<Union> i. (countable_preimages B Y) i)\"", "lemma  count_pre_meas:\n  assumes \"point_measurable M (space N) Y\"\n  and \"B\\<subseteq> space N\"\n  and \"countable B\"\n  shows \"\\<forall>i. (countable_preimages B Y) i \\<inter> space M \\<in> sets M\"", "lemma  disct_fct_point_measurable:\nassumes \"disc_fct f\"\nand \"point_measurable M (space N) f\"\nshows \"f\\<in> measurable M N\"", "lemma  set_point_measurable:\n  assumes \"point_measurable M (space N) Y\"\n  and \"B \\<subseteq> space N\"\n  and \"countable B\"\nshows \"(Y -`B) \\<inter> space M \\<in> sets M\"", "lemma  nn_expl_cond_expect_pos:\n  assumes \"\\<forall>w \\<in> space M. 0 \\<le> X w\"\nshows \"\\<forall> w\\<in> space M. 0 \\<le> (expl_cond_expect M Y X) w\"", "lemma  expl_cond_expect_const:\n  assumes \"Y w = Y y\"\n  shows \"expl_cond_expect M Y X w = expl_cond_expect M Y X y\"", "lemma  expl_cond_exp_cong:\n  assumes \"\\<forall>w\\<in>space M. X w = Z w\"\nshows \"\\<forall>w\\<in> space M. expl_cond_expect M Y X w = expl_cond_expect M Y Z w\"", "lemma  expl_cond_exp_add:\n  assumes \"integrable M X\"\n  and \"integrable M Z\"\nshows \"\\<forall>w\\<in> space M. expl_cond_expect M Y (\\<lambda>x. X x + Z x) w = expl_cond_expect M Y X w + expl_cond_expect M Y Z w\"", "lemma expl_cond_exp_diff:\n  assumes \"integrable M X\"\n  and \"integrable M Z\"\nshows \"\\<forall>w\\<in> space M. expl_cond_expect M Y (\\<lambda>x. X x - Z x) w = expl_cond_expect M Y X w - expl_cond_expect M Y Z w\"", "lemma  expl_cond_expect_prop_sets:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\n  and \"D = {w\\<in> space M. Y w \\<in> space N \\<and> (P (expl_cond_expect M Y X w))}\"\nshows \"D\\<in> sets M\"", "lemma  expl_cond_expect_prop_sets2:\n  assumes \"disc_fct Y\"\n  and \"point_measurable (fct_gen_subalgebra M N Y) (space N) Y\"\n  and \"D = {w\\<in> space M. Y w \\<in> space N \\<and> (P (expl_cond_expect M Y X w))}\"\nshows \"D\\<in> sets (fct_gen_subalgebra M N Y)\"", "lemma  expl_cond_expect_disc_fct:\n  assumes \"disc_fct Y\"\n  shows \"disc_fct (expl_cond_expect M Y X)\"", "lemma  expl_cond_expect_point_meas:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"point_measurable M UNIV (expl_cond_expect M Y X)\"", "lemma  expl_cond_expect_borel_measurable:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"(expl_cond_expect M Y X) \\<in> borel_measurable M\"", "lemma  expl_cond_exp_borel:\n  assumes \"Y \\<in> space M \\<rightarrow> space N\"\n  and \"disc_fct Y\"\n  and \"\\<forall>r\\<in> range Y\\<inter> space N. \\<exists>A\\<in> sets N. range Y\\<inter> A = {r}\"\n  shows \"(expl_cond_expect M Y X) \\<in> borel_measurable (fct_gen_subalgebra M N Y)\"", "lemma  expl_cond_expect_indic_borel_measurable:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\n  and \"B\\<subseteq> space N\"\n  and \"countable B\"\n  shows \"(\\<lambda>w. expl_cond_expect M Y X w * indicator (countable_preimages B Y n \\<inter> space M) w)\\<in> borel_measurable M\"", "lemma (in finite_measure) dce_prod:\n  assumes \"point_measurable M (space N) Y\"\n   and \"integrable M X\"\n   and \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\nshows \"\\<forall> w. (Y w) \\<in> space N \\<longrightarrow> (expl_cond_expect M Y X) w * measure M ((Y -` {Y w})\\<inter> space M) = integral\\<^sup>L M (\\<lambda>y. (X y) * (indicator ((Y -`{Y w})\\<inter> space M) y))\"", "lemma  expl_cond_expect_const_exp:\n  shows \"integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X w * (indicator (Y -` {Y w} \\<inter> space M)) y) =\n    integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X y * (indicator (Y -` {Y w} \\<inter> space M)) y)\"", "lemma  nn_expl_cond_expect_const_exp:\n  assumes \"\\<forall>w\\<in> space M. 0 \\<le> X w\"\n  shows \"integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X w * (indicator (Y -` {Y w} \\<inter> space M)) y) =\n    integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X y * (indicator (Y -` {Y w} \\<inter> space M)) y)\"", "lemma (in finite_measure) nn_expl_cond_bounded:\n  assumes \"\\<forall>w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"point_measurable M (space N) Y\"\n  and \"w\\<in> space M\"\n  and \"Y w\\<in> space N\"\n  shows \"integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X y * (indicator (Y -` {Y w} \\<inter> space M)) y) < \\<infinity>\"", "lemma (in finite_measure)  count_prod:\n  fixes Y::\"'a\\<Rightarrow>'b\"\n  assumes \"B\\<subseteq> space N\"\n  and \"point_measurable M (space N) Y\"\n  and \"integrable M X\"\n  and \"\\<forall> w \\<in> space M. 0 \\<le> X w\"\nshows \"\\<forall>i. integral\\<^sup>L M (\\<lambda>y. (X y) * (indicator (countable_preimages B Y i \\<inter> space M)) y) =\n  integral\\<^sup>L M (\\<lambda>y. (expl_cond_expect M Y X y) * (indicator (countable_preimages B Y i \\<inter> space M)) y)\"", "lemma (in finite_measure) count_pre_integrable:\n  assumes \"point_measurable M (space N) Y\"\n  and \"disc_fct Y\"\n  and \"B\\<subseteq> space N\"\n  and \"countable B\"\n  and \"integrable M X\"\n  and \"\\<forall> w \\<in> space M. 0 \\<le> X w\"\nshows \"integrable M (\\<lambda>w. expl_cond_expect M Y X w * indicator (countable_preimages B Y n \\<inter> space M) w)\"", "lemma (in finite_measure) nn_cond_expl_is_cond_exp_tmp:\n  assumes \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space M') Y\"\nshows \"\\<forall> A \\<in> sets M'. integrable M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A)\\<inter> (space M)) w)) \\<and>\n  integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\"", "lemma (in finite_measure) nn_expl_cond_exp_integrable:\n  assumes \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"integrable M (expl_cond_expect M Y X)\"", "lemma (in finite_measure) nn_cond_expl_is_cond_exp:\n  assumes \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\"", "lemma (in finite_measure) expl_cond_exp_integrable:\n  assumes \"integrable M X\"\n    and \"disc_fct Y\"\n    and \"point_measurable M (space N) Y\"\n  shows \"integrable M (expl_cond_expect M Y X)\"", "lemma (in finite_measure) is_cond_exp:\n  assumes \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\"", "lemma (in finite_measure) charact_cond_exp:\n  assumes \"disc_fct Y\"\n    and \"integrable M X\"\n    and \"point_measurable M (space N) Y\"\n    and \"Y \\<in> space M \\<rightarrow> space N\"\n    and \"\\<forall>r\\<in> range Y\\<inter> space N. \\<exists>A\\<in> sets N. range Y\\<inter> A = {r}\"\n  shows \"AE w in M. real_cond_exp M (fct_gen_subalgebra M N Y) X w = expl_cond_expect M Y X w\"", "lemma (in finite_measure) charact_cond_exp':\n  assumes \"disc_fct Y\"\n    and \"integrable M X\"\n    and \"Y\\<in> measurable M N\"\n    and \"\\<forall>r\\<in> range Y\\<inter> space N. \\<exists>A\\<in> sets N. range Y\\<inter> A = {r}\"\n  shows \"AE w in M. real_cond_exp M (fct_gen_subalgebra M N Y) X w = expl_cond_expect M Y X w\""], "translations": [["", "lemma singl_meas_if:\n  assumes \"f \\<in> space M \\<rightarrow> space N\"\n  and \"\\<forall>r\\<in> range f\\<inter> space N. \\<exists>A\\<in> sets N. range f\\<inter> A = {r}\"\nshows \"point_measurable (fct_gen_subalgebra M N f) (space N) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable (fct_gen_subalgebra M N f) (space N) f", "unfolding point_measurable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. f ` space (fct_gen_subalgebra M N f) \\<subseteq> space N \\<and>\n    (\\<forall>r\\<in>range f \\<inter> space N.\n        f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n        \\<in> sets (fct_gen_subalgebra M N f))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. f ` space (fct_gen_subalgebra M N f) \\<subseteq> space N\n 2. \\<forall>r\\<in>range f \\<inter> space N.\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "show \"f`space (fct_gen_subalgebra M N f)\\<subseteq> space N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f ` space (fct_gen_subalgebra M N f) \\<subseteq> space N", "using assms"], ["proof (prove)\nusing this:\n  f \\<in> space M \\<rightarrow> space N\n  \\<forall>r\\<in>range f \\<inter> space N.\n     \\<exists>A\\<in>sets N. range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. f ` space (fct_gen_subalgebra M N f) \\<subseteq> space N", "by (simp add: Pi_iff fct_gen_subalgebra_space image_subsetI)"], ["proof (state)\nthis:\n  f ` space (fct_gen_subalgebra M N f) \\<subseteq> space N\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>range f \\<inter> space N.\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "show \"(\\<forall>r\\<in>range f \\<inter> space N. f -` {r} \\<inter> space (fct_gen_subalgebra M N f) \\<in> sets (fct_gen_subalgebra M N f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>range f \\<inter> space N.\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "assume \"r\\<in> range f \\<inter> space N\""], ["proof (state)\nthis:\n  r \\<in> range f \\<inter> space N\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "hence \"\\<exists>A\\<in> sets N. range f\\<inter> A = {r}\""], ["proof (prove)\nusing this:\n  r \\<in> range f \\<inter> space N\n\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>sets N. range f \\<inter> A = {r}", "using assms"], ["proof (prove)\nusing this:\n  r \\<in> range f \\<inter> space N\n  f \\<in> space M \\<rightarrow> space N\n  \\<forall>r\\<in>range f \\<inter> space N.\n     \\<exists>A\\<in>sets N. range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>sets N. range f \\<inter> A = {r}", "by blast"], ["proof (state)\nthis:\n  \\<exists>A\\<in>sets N. range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "from this"], ["proof (chain)\npicking this:\n  \\<exists>A\\<in>sets N. range f \\<inter> A = {r}", "obtain A where \"A\\<in> sets N\" and \"range f \\<inter> A = {r}\""], ["proof (prove)\nusing this:\n  \\<exists>A\\<in>sets N. range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>A \\<in> sets N; range f \\<inter> A = {r}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<in> sets N\n  range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "note Aprops = this"], ["proof (state)\nthis:\n  A \\<in> sets N\n  range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "hence \"f-`A = f-`{r}\""], ["proof (prove)\nusing this:\n  A \\<in> sets N\n  range f \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. f -` A = f -` {r}", "by auto"], ["proof (state)\nthis:\n  f -` A = f -` {r}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "hence \"f-`A \\<inter> space M = f-`{r} \\<inter> space (fct_gen_subalgebra M N f)\""], ["proof (prove)\nusing this:\n  f -` A = f -` {r}\n\ngoal (1 subgoal):\n 1. f -` A \\<inter> space M =\n    f -` {r} \\<inter> space (fct_gen_subalgebra M N f)", "by (simp add: fct_gen_subalgebra_space)"], ["proof (state)\nthis:\n  f -` A \\<inter> space M =\n  f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range f \\<inter> space N \\<Longrightarrow>\n       f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n       \\<in> sets (fct_gen_subalgebra M N f)", "thus \"f -` {r} \\<inter> space (fct_gen_subalgebra M N f) \\<in> sets (fct_gen_subalgebra M N f)\""], ["proof (prove)\nusing this:\n  f -` A \\<inter> space M =\n  f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n    \\<in> sets (fct_gen_subalgebra M N f)", "using Aprops fct_gen_subalgebra_sets_mem[of A N f M]"], ["proof (prove)\nusing this:\n  f -` A \\<inter> space M =\n  f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n  A \\<in> sets N\n  range f \\<inter> A = {r}\n  A \\<in> sets N \\<Longrightarrow>\n  f -` A \\<inter> space M \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n    \\<in> sets (fct_gen_subalgebra M N f)", "by simp"], ["proof (state)\nthis:\n  f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>r\\<in>range f \\<inter> space N.\n     f -` {r} \\<inter> space (fct_gen_subalgebra M N f)\n     \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  meas_single_meas:\n  assumes \"f\\<in> measurable M N\"\n  and \"\\<forall>r\\<in> range f\\<inter> space N. \\<exists>A\\<in> sets N. range f\\<inter> A = {r}\"\nshows \"point_measurable M (space N) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "have \"subalgebra M (fct_gen_subalgebra M N f) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. subalgebra M (fct_gen_subalgebra M N f)", "using assms fct_gen_subalgebra_is_subalgebra"], ["proof (prove)\nusing this:\n  f \\<in> M \\<rightarrow>\\<^sub>M N\n  \\<forall>r\\<in>range f \\<inter> space N.\n     \\<exists>A\\<in>sets N. range f \\<inter> A = {r}\n  ?X \\<in> ?M \\<rightarrow>\\<^sub>M ?N \\<Longrightarrow>\n  subalgebra ?M (fct_gen_subalgebra ?M ?N ?X)\n\ngoal (1 subgoal):\n 1. subalgebra M (fct_gen_subalgebra M N f)", "by blast"], ["proof (state)\nthis:\n  subalgebra M (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "hence \"sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\""], ["proof (prove)\nusing this:\n  subalgebra M (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. sets (fct_gen_subalgebra M N f) \\<subseteq> sets M", "by (simp add: subalgebra_def)"], ["proof (state)\nthis:\n  sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "moreover"], ["proof (state)\nthis:\n  sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "have \"point_measurable (fct_gen_subalgebra M N f) (space N) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable (fct_gen_subalgebra M N f) (space N) f", "using assms singl_meas_if"], ["proof (prove)\nusing this:\n  f \\<in> M \\<rightarrow>\\<^sub>M N\n  \\<forall>r\\<in>range f \\<inter> space N.\n     \\<exists>A\\<in>sets N. range f \\<inter> A = {r}\n  \\<lbrakk>?f \\<in> space ?M \\<rightarrow> space ?N;\n   \\<forall>r\\<in>range ?f \\<inter> space ?N.\n      \\<exists>A\\<in>sets ?N. range ?f \\<inter> A = {r}\\<rbrakk>\n  \\<Longrightarrow> point_measurable (fct_gen_subalgebra ?M ?N ?f)\n                     (space ?N) ?f\n\ngoal (1 subgoal):\n 1. point_measurable (fct_gen_subalgebra M N f) (space N) f", "by (metis (no_types, lifting) Pi_iff measurable_space)"], ["proof (state)\nthis:\n  point_measurable (fct_gen_subalgebra M N f) (space N) f\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "ultimately"], ["proof (chain)\npicking this:\n  sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\n  point_measurable (fct_gen_subalgebra M N f) (space N) f", "show ?thesis"], ["proof (prove)\nusing this:\n  sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\n  point_measurable (fct_gen_subalgebra M N f) (space N) f\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "obtain bb :: \"'a measure \\<Rightarrow> 'b set \\<Rightarrow> ('a \\<Rightarrow> 'b) \\<Rightarrow> 'b\" where\n      f1: \"\\<forall>m B f. (\\<not> point_measurable m B f \\<or> f ` space m \\<subseteq> B \\<and> (\\<forall>b. b \\<notin> range f \\<inter> B \\<or> f -` {b} \\<inter> space m \\<in> sets m)) \\<and> (\\<not> f ` space m \\<subseteq> B \\<or> bb m B f \\<in> range f \\<inter> B \\<and> f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or> point_measurable m B f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>bb.\n        \\<forall>m B f.\n           (\\<not> point_measurable m B f \\<or>\n            f ` space m \\<subseteq> B \\<and>\n            (\\<forall>b.\n                b \\<notin> range f \\<inter> B \\<or>\n                f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n           (\\<not> f ` space m \\<subseteq> B \\<or>\n            bb m B f \\<in> range f \\<inter> B \\<and>\n            f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n            point_measurable m B f) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types) point_measurable_def)"], ["proof (state)\nthis:\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "moreover"], ["proof (state)\nthis:\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "{"], ["proof (state)\nthis:\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "assume \"f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f) \\<in> sets (fct_gen_subalgebra M N f)\""], ["proof (state)\nthis:\n  f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "then"], ["proof (chain)\npicking this:\n  f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f)", "have \"f -` {bb M (space N) f} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N f)\""], ["proof (prove)\nusing this:\n  f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. f -` {bb M (space N) f} \\<inter> space M\n    \\<in> sets (fct_gen_subalgebra M N f)", "by (metis \\<open>subalgebra M (fct_gen_subalgebra M N f)\\<close> subalgebra_def)"], ["proof (state)\nthis:\n  f -` {bb M (space N) f} \\<inter> space M\n  \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "then"], ["proof (chain)\npicking this:\n  f -` {bb M (space N) f} \\<inter> space M\n  \\<in> sets (fct_gen_subalgebra M N f)", "have \"f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  f -` {bb M (space N) f} \\<inter> space M\n  \\<in> sets (fct_gen_subalgebra M N f)\n\ngoal (1 subgoal):\n 1. f -` {bb M (space N) f} \\<inter> space M \\<in> sets M", "using \\<open>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\\<close>"], ["proof (prove)\nusing this:\n  f -` {bb M (space N) f} \\<inter> space M\n  \\<in> sets (fct_gen_subalgebra M N f)\n  sets (fct_gen_subalgebra M N f) \\<subseteq> sets M\n\ngoal (1 subgoal):\n 1. f -` {bb M (space N) f} \\<inter> space M \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "then"], ["proof (chain)\npicking this:\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M", "have \"f ` space M \\<subseteq> space N \\<and> f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. f ` space M \\<subseteq> space N \\<and>\n    f -` {bb M (space N) f} \\<inter> space M \\<in> sets M", "using f1"], ["proof (prove)\nusing this:\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n\ngoal (1 subgoal):\n 1. f ` space M \\<subseteq> space N \\<and>\n    f -` {bb M (space N) f} \\<inter> space M \\<in> sets M", "by (metis \\<open>point_measurable (fct_gen_subalgebra M N f) (space N) f\\<close> \\<open>subalgebra M (fct_gen_subalgebra M N f)\\<close> subalgebra_def)"], ["proof (state)\nthis:\n  f ` space M \\<subseteq> space N \\<and>\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "then"], ["proof (chain)\npicking this:\n  f ` space M \\<subseteq> space N \\<and>\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M", "have ?thesis"], ["proof (prove)\nusing this:\n  f ` space M \\<subseteq> space N \\<and>\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "using f1"], ["proof (prove)\nusing this:\n  f ` space M \\<subseteq> space N \\<and>\n  f -` {bb M (space N) f} \\<inter> space M \\<in> sets M\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "by metis"], ["proof (state)\nthis:\n  point_measurable M (space N) f\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "}"], ["proof (state)\nthis:\n  f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f) \\<Longrightarrow>\n  point_measurable M (space N) f\n\ngoal (1 subgoal):\n 1. \\<lbrakk>sets (fct_gen_subalgebra M N f) \\<subseteq> sets M;\n     point_measurable (fct_gen_subalgebra M N f) (space N) f\\<rbrakk>\n    \\<Longrightarrow> point_measurable M (space N) f", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n  f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f) \\<Longrightarrow>\n  point_measurable M (space N) f", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>m B f.\n     (\\<not> point_measurable m B f \\<or>\n      f ` space m \\<subseteq> B \\<and>\n      (\\<forall>b.\n          b \\<notin> range f \\<inter> B \\<or>\n          f -` {b} \\<inter> space m \\<in> sets m)) \\<and>\n     (\\<not> f ` space m \\<subseteq> B \\<or>\n      bb m B f \\<in> range f \\<inter> B \\<and>\n      f -` {bb m B f} \\<inter> space m \\<notin> sets m \\<or>\n      point_measurable m B f)\n  f -` {bb M (space N) f} \\<inter> space (fct_gen_subalgebra M N f)\n  \\<in> sets (fct_gen_subalgebra M N f) \\<Longrightarrow>\n  point_measurable M (space N) f\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) f", "by (metis (no_types) \\<open>point_measurable (fct_gen_subalgebra M N f) (space N) f\\<close> \\<open>subalgebra M (fct_gen_subalgebra M N f)\\<close> subalgebra_def)"], ["proof (state)\nthis:\n  point_measurable M (space N) f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  point_measurable M (space N) f\n\ngoal:\nNo subgoals!", "qed"], ["", "definition countable_preimages where\n\"countable_preimages B Y = (\\<lambda>n. if ((infinite B) \\<or> (finite B \\<and> n < card B)) then Y -` {(from_nat_into B) n} else {})\""], ["", "lemma  count_pre_disj:\n  fixes i::nat\n  assumes \"countable B\"\n  and \"i \\<noteq> j\"\nshows \"(countable_preimages B Y) i \\<inter> (countable_preimages B Y) j = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "proof (cases  \"(countable_preimages B Y) i = {} \\<or> (countable_preimages B Y) j = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages B Y i = {} \\<or>\n    countable_preimages B Y j = {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}\n 2. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "case True"], ["proof (state)\nthis:\n  countable_preimages B Y i = {} \\<or> countable_preimages B Y j = {}\n\ngoal (2 subgoals):\n 1. countable_preimages B Y i = {} \\<or>\n    countable_preimages B Y j = {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}\n 2. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  countable_preimages B Y i = {} \\<or> countable_preimages B Y j = {}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "by auto"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> countable_preimages B Y j = {}\n\ngoal (1 subgoal):\n 1. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "case False"], ["proof (state)\nthis:\n  \\<not> (countable_preimages B Y i = {} \\<or>\n          countable_preimages B Y j = {})\n\ngoal (1 subgoal):\n 1. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "hence \"Y -` {(from_nat_into B) i} \\<noteq> {} \\<and> Y -` {(from_nat_into B) j} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<not> (countable_preimages B Y i = {} \\<or>\n          countable_preimages B Y j = {})\n\ngoal (1 subgoal):\n 1. Y -` {from_nat_into B i} \\<noteq> {} \\<and>\n    Y -` {from_nat_into B j} \\<noteq> {}", "unfolding countable_preimages_def"], ["proof (prove)\nusing this:\n  \\<not> ((if infinite B \\<or> finite B \\<and> i < card B\n           then Y -` {from_nat_into B i} else {}) =\n          {} \\<or>\n          (if infinite B \\<or> finite B \\<and> j < card B\n           then Y -` {from_nat_into B j} else {}) =\n          {})\n\ngoal (1 subgoal):\n 1. Y -` {from_nat_into B i} \\<noteq> {} \\<and>\n    Y -` {from_nat_into B j} \\<noteq> {}", "by meson"], ["proof (state)\nthis:\n  Y -` {from_nat_into B i} \\<noteq> {} \\<and>\n  Y -` {from_nat_into B j} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "have \"(infinite B) \\<or> (finite B \\<and> i < card B \\<and> j < card B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infinite B \\<or> finite B \\<and> i < card B \\<and> j < card B", "using False"], ["proof (prove)\nusing this:\n  \\<not> (countable_preimages B Y i = {} \\<or>\n          countable_preimages B Y j = {})\n\ngoal (1 subgoal):\n 1. infinite B \\<or> finite B \\<and> i < card B \\<and> j < card B", "unfolding countable_preimages_def"], ["proof (prove)\nusing this:\n  \\<not> ((if infinite B \\<or> finite B \\<and> i < card B\n           then Y -` {from_nat_into B i} else {}) =\n          {} \\<or>\n          (if infinite B \\<or> finite B \\<and> j < card B\n           then Y -` {from_nat_into B j} else {}) =\n          {})\n\ngoal (1 subgoal):\n 1. infinite B \\<or> finite B \\<and> i < card B \\<and> j < card B", "by meson"], ["proof (state)\nthis:\n  infinite B \\<or> finite B \\<and> i < card B \\<and> j < card B\n\ngoal (1 subgoal):\n 1. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "have \"(from_nat_into B) i \\<noteq> (from_nat_into B) j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. from_nat_into B i \\<noteq> from_nat_into B j", "by (metis False assms(1) assms(2) bij_betw_def countable_preimages_def from_nat_into_inj from_nat_into_inj_infinite lessThan_iff to_nat_on_finite)"], ["proof (state)\nthis:\n  from_nat_into B i \\<noteq> from_nat_into B j\n\ngoal (1 subgoal):\n 1. \\<not> (countable_preimages B Y i = {} \\<or>\n            countable_preimages B Y j = {}) \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  from_nat_into B i \\<noteq> from_nat_into B j\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. from_nat_into B i \\<noteq> from_nat_into B j \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "have f1: \"\\<forall>A f n. if infinite A \\<or> finite A \\<and> n < card A then countable_preimages A f n = f -` {from_nat_into A n::'a} else countable_preimages A f n = ({}::'b set)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A f n.\n       if infinite A \\<or> finite A \\<and> n < card A\n       then countable_preimages A f n = f -` {from_nat_into A n}\n       else countable_preimages A f n = {}", "by (meson countable_preimages_def)"], ["proof (state)\nthis:\n  \\<forall>A f n.\n     if infinite A \\<or> finite A \\<and> n < card A\n     then countable_preimages A f n = f -` {from_nat_into A n}\n     else countable_preimages A f n = {}\n\ngoal (1 subgoal):\n 1. from_nat_into B i \\<noteq> from_nat_into B j \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "then"], ["proof (chain)\npicking this:\n  \\<forall>A f n.\n     if infinite A \\<or> finite A \\<and> n < card A\n     then countable_preimages A f n = f -` {from_nat_into A n}\n     else countable_preimages A f n = {}", "have f2: \"infinite B \\<or> finite B \\<and> i < card B\""], ["proof (prove)\nusing this:\n  \\<forall>A f n.\n     if infinite A \\<or> finite A \\<and> n < card A\n     then countable_preimages A f n = f -` {from_nat_into A n}\n     else countable_preimages A f n = {}\n\ngoal (1 subgoal):\n 1. infinite B \\<or> finite B \\<and> i < card B", "by (metis (no_types) False)"], ["proof (state)\nthis:\n  infinite B \\<or> finite B \\<and> i < card B\n\ngoal (1 subgoal):\n 1. from_nat_into B i \\<noteq> from_nat_into B j \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "have \"infinite B \\<or> finite B \\<and> j < card B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infinite B \\<or> finite B \\<and> j < card B", "using f1"], ["proof (prove)\nusing this:\n  \\<forall>A f n.\n     if infinite A \\<or> finite A \\<and> n < card A\n     then countable_preimages A f n = f -` {from_nat_into A n}\n     else countable_preimages A f n = {}\n\ngoal (1 subgoal):\n 1. infinite B \\<or> finite B \\<and> j < card B", "by (meson False)"], ["proof (state)\nthis:\n  infinite B \\<or> finite B \\<and> j < card B\n\ngoal (1 subgoal):\n 1. from_nat_into B i \\<noteq> from_nat_into B j \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "then"], ["proof (chain)\npicking this:\n  infinite B \\<or> finite B \\<and> j < card B", "show ?thesis"], ["proof (prove)\nusing this:\n  infinite B \\<or> finite B \\<and> j < card B\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "using f2 f1 \\<open>from_nat_into B i \\<noteq> from_nat_into B j\\<close>"], ["proof (prove)\nusing this:\n  infinite B \\<or> finite B \\<and> j < card B\n  infinite B \\<or> finite B \\<and> i < card B\n  \\<forall>A f n.\n     if infinite A \\<or> finite A \\<and> n < card A\n     then countable_preimages A f n = f -` {from_nat_into A n}\n     else countable_preimages A f n = {}\n  from_nat_into B i \\<noteq> from_nat_into B j\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> countable_preimages B Y j = {}", "by fastforce"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> countable_preimages B Y j = {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> countable_preimages B Y j = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_pre_surj:\n  assumes \"countable B\"\n  and \"w \\<in> Y -`B\"\nshows \"\\<exists>i. w \\<in> (countable_preimages B Y) i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i. w \\<in> countable_preimages B Y i", "proof (cases \"finite B\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finite B \\<Longrightarrow> \\<exists>i. w \\<in> countable_preimages B Y i\n 2. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "case True"], ["proof (state)\nthis:\n  finite B\n\ngoal (2 subgoals):\n 1. finite B \\<Longrightarrow> \\<exists>i. w \\<in> countable_preimages B Y i\n 2. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "have \"\\<exists> i < card B. (from_nat_into B) i = Y w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>i<card B. from_nat_into B i = Y w", "by (metis True assms(1) assms(2) bij_betw_def from_nat_into_to_nat_on image_eqI lessThan_iff\n          to_nat_on_finite vimageE)"], ["proof (state)\nthis:\n  \\<exists>i<card B. from_nat_into B i = Y w\n\ngoal (2 subgoals):\n 1. finite B \\<Longrightarrow> \\<exists>i. w \\<in> countable_preimages B Y i\n 2. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "from this"], ["proof (chain)\npicking this:\n  \\<exists>i<card B. from_nat_into B i = Y w", "obtain i where \"i< card B\" and \"(from_nat_into B) i = Y w\""], ["proof (prove)\nusing this:\n  \\<exists>i<card B. from_nat_into B i = Y w\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i < card B; from_nat_into B i = Y w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  i < card B\n  from_nat_into B i = Y w\n\ngoal (2 subgoals):\n 1. finite B \\<Longrightarrow> \\<exists>i. w \\<in> countable_preimages B Y i\n 2. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "hence \"w \\<in> (countable_preimages B Y) i\""], ["proof (prove)\nusing this:\n  i < card B\n  from_nat_into B i = Y w\n\ngoal (1 subgoal):\n 1. w \\<in> countable_preimages B Y i", "by (simp add: countable_preimages_def)"], ["proof (state)\nthis:\n  w \\<in> countable_preimages B Y i\n\ngoal (2 subgoals):\n 1. finite B \\<Longrightarrow> \\<exists>i. w \\<in> countable_preimages B Y i\n 2. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "thus \"\\<exists>i. w \\<in> (countable_preimages B Y) i\""], ["proof (prove)\nusing this:\n  w \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. \\<exists>i. w \\<in> countable_preimages B Y i", "by auto"], ["proof (state)\nthis:\n  \\<exists>i. w \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "case False"], ["proof (state)\nthis:\n  infinite B\n\ngoal (1 subgoal):\n 1. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "hence \"\\<exists> i. (from_nat_into B) i = Y w\""], ["proof (prove)\nusing this:\n  infinite B\n\ngoal (1 subgoal):\n 1. \\<exists>i. from_nat_into B i = Y w", "by (meson assms(1) assms(2) from_nat_into_to_nat_on vimageE)"], ["proof (state)\nthis:\n  \\<exists>i. from_nat_into B i = Y w\n\ngoal (1 subgoal):\n 1. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "from this"], ["proof (chain)\npicking this:\n  \\<exists>i. from_nat_into B i = Y w", "obtain i where  \"(from_nat_into B) i = Y w\""], ["proof (prove)\nusing this:\n  \\<exists>i. from_nat_into B i = Y w\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        from_nat_into B i = Y w \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  from_nat_into B i = Y w\n\ngoal (1 subgoal):\n 1. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "hence \"w \\<in> (countable_preimages B Y) i\""], ["proof (prove)\nusing this:\n  from_nat_into B i = Y w\n\ngoal (1 subgoal):\n 1. w \\<in> countable_preimages B Y i", "by (simp add: False countable_preimages_def)"], ["proof (state)\nthis:\n  w \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. infinite B \\<Longrightarrow>\n    \\<exists>i. w \\<in> countable_preimages B Y i", "thus \"\\<exists>i. w \\<in> (countable_preimages B Y) i\""], ["proof (prove)\nusing this:\n  w \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. \\<exists>i. w \\<in> countable_preimages B Y i", "by auto"], ["proof (state)\nthis:\n  \\<exists>i. w \\<in> countable_preimages B Y i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_pre_img:\n  assumes \"x \\<in> (countable_preimages B Y) n\"\n  shows \"Y x = (from_nat_into B) n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y x = from_nat_into B n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Y x = from_nat_into B n", "have \"x\\<in> Y -` {(from_nat_into B) n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Y -` {from_nat_into B n}", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> countable_preimages B Y n\n\ngoal (1 subgoal):\n 1. x \\<in> Y -` {from_nat_into B n}", "unfolding countable_preimages_def"], ["proof (prove)\nusing this:\n  x \\<in> (if infinite B \\<or> finite B \\<and> n < card B\n           then Y -` {from_nat_into B n} else {})\n\ngoal (1 subgoal):\n 1. x \\<in> Y -` {from_nat_into B n}", "by (meson empty_iff)"], ["proof (state)\nthis:\n  x \\<in> Y -` {from_nat_into B n}\n\ngoal (1 subgoal):\n 1. Y x = from_nat_into B n", "thus ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> Y -` {from_nat_into B n}\n\ngoal (1 subgoal):\n 1. Y x = from_nat_into B n", "by simp"], ["proof (state)\nthis:\n  Y x = from_nat_into B n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma count_pre_union_img:\n  assumes \"countable B\"\n  shows \"Y -`B = (\\<Union> i. (countable_preimages B Y) i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "proof (cases \"B = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))\n 2. B \\<noteq> {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "case False"], ["proof (state)\nthis:\n  B \\<noteq> {}\n\ngoal (2 subgoals):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))\n 2. B \\<noteq> {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "have \"Y -`B \\<subseteq> (\\<Union> i. (countable_preimages B Y) i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B \\<subseteq> \\<Union> (range (countable_preimages B Y))", "by (simp add: assms count_pre_surj subset_eq)"], ["proof (state)\nthis:\n  Y -` B \\<subseteq> \\<Union> (range (countable_preimages B Y))\n\ngoal (2 subgoals):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))\n 2. B \\<noteq> {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "moreover"], ["proof (state)\nthis:\n  Y -` B \\<subseteq> \\<Union> (range (countable_preimages B Y))\n\ngoal (2 subgoals):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))\n 2. B \\<noteq> {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "have \"(\\<Union> i. (countable_preimages B Y) i) \\<subseteq> Y -`B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "have f1: \"\\<forall>b A f n. (b::'b) \\<notin> countable_preimages A f n \\<or> (f b::'a) = from_nat_into A n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>b A f n.\n       b \\<notin> countable_preimages A f n \\<or> f b = from_nat_into A n", "by (meson count_pre_img)"], ["proof (state)\nthis:\n  \\<forall>b A f n.\n     b \\<notin> countable_preimages A f n \\<or> f b = from_nat_into A n\n\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "have \"range (from_nat_into B) = B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range (from_nat_into B) = B", "by (meson False assms range_from_nat_into)"], ["proof (state)\nthis:\n  range (from_nat_into B) = B\n\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "then"], ["proof (chain)\npicking this:\n  range (from_nat_into B) = B", "show ?thesis"], ["proof (prove)\nusing this:\n  range (from_nat_into B) = B\n\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "using f1"], ["proof (prove)\nusing this:\n  range (from_nat_into B) = B\n  \\<forall>b A f n.\n     b \\<notin> countable_preimages A f n \\<or> f b = from_nat_into A n\n\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "by blast"], ["proof (state)\nthis:\n  \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B\n\ngoal (2 subgoals):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))\n 2. B \\<noteq> {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "ultimately"], ["proof (chain)\npicking this:\n  Y -` B \\<subseteq> \\<Union> (range (countable_preimages B Y))\n  \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B", "show ?thesis"], ["proof (prove)\nusing this:\n  Y -` B \\<subseteq> \\<Union> (range (countable_preimages B Y))\n  \\<Union> (range (countable_preimages B Y)) \\<subseteq> Y -` B\n\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "by simp"], ["proof (state)\nthis:\n  Y -` B = \\<Union> (range (countable_preimages B Y))\n\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "case True"], ["proof (state)\nthis:\n  B = {}\n\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "hence \"\\<forall> i. (countable_preimages B Y) i = {}\""], ["proof (prove)\nusing this:\n  B = {}\n\ngoal (1 subgoal):\n 1. \\<forall>i. countable_preimages B Y i = {}", "unfolding countable_preimages_def"], ["proof (prove)\nusing this:\n  B = {}\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (if infinite B \\<or> finite B \\<and> i < card B\n        then Y -` {from_nat_into B i} else {}) =\n       {}", "by simp"], ["proof (state)\nthis:\n  \\<forall>i. countable_preimages B Y i = {}\n\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "hence \"(\\<Union> i. (countable_preimages B Y) i) = {}\""], ["proof (prove)\nusing this:\n  \\<forall>i. countable_preimages B Y i = {}\n\ngoal (1 subgoal):\n 1. \\<Union> (range (countable_preimages B Y)) = {}", "by auto"], ["proof (state)\nthis:\n  \\<Union> (range (countable_preimages B Y)) = {}\n\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "moreover"], ["proof (state)\nthis:\n  \\<Union> (range (countable_preimages B Y)) = {}\n\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "have \"Y -`B = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B = {}", "using True"], ["proof (prove)\nusing this:\n  B = {}\n\ngoal (1 subgoal):\n 1. Y -` B = {}", "by simp"], ["proof (state)\nthis:\n  Y -` B = {}\n\ngoal (1 subgoal):\n 1. B = {} \\<Longrightarrow>\n    Y -` B = \\<Union> (range (countable_preimages B Y))", "ultimately"], ["proof (chain)\npicking this:\n  \\<Union> (range (countable_preimages B Y)) = {}\n  Y -` B = {}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<Union> (range (countable_preimages B Y)) = {}\n  Y -` B = {}\n\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "by simp"], ["proof (state)\nthis:\n  Y -` B = \\<Union> (range (countable_preimages B Y))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  count_pre_meas:\n  assumes \"point_measurable M (space N) Y\"\n  and \"B\\<subseteq> space N\"\n  and \"countable B\"\n  shows \"\\<forall>i. (countable_preimages B Y) i \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. countable_preimages B Y i \\<inter> space M \\<in> sets M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. countable_preimages B Y i \\<inter> space M \\<in> sets M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. countable_preimages B Y i \\<inter> space M \\<in> sets M", "have \"Y -`B = (\\<Union> i. (countable_preimages B Y) i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "using assms"], ["proof (prove)\nusing this:\n  point_measurable M (space N) Y\n  B \\<subseteq> space N\n  countable B\n\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "by (simp add: count_pre_union_img)"], ["proof (state)\nthis:\n  Y -` B = \\<Union> (range (countable_preimages B Y))\n\ngoal (1 subgoal):\n 1. \\<And>i. countable_preimages B Y i \\<inter> space M \\<in> sets M", "show \"countable_preimages B Y i \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<in> sets M", "proof (cases \"countable_preimages B Y i = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages B Y i = {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M\n 2. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "case True"], ["proof (state)\nthis:\n  countable_preimages B Y i = {}\n\ngoal (2 subgoals):\n 1. countable_preimages B Y i = {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M\n 2. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "thus ?thesis"], ["proof (prove)\nusing this:\n  countable_preimages B Y i = {}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "case False"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "from this"], ["proof (chain)\npicking this:\n  countable_preimages B Y i \\<noteq> {}", "obtain y where \"y \\<in> countable_preimages B Y i\""], ["proof (prove)\nusing this:\n  countable_preimages B Y i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        y \\<in> countable_preimages B Y i \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  y \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "hence \"countable_preimages B Y i = Y -`{Y y}\""], ["proof (prove)\nusing this:\n  y \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i = Y -` {Y y}", "by (metis False count_pre_img countable_preimages_def)"], ["proof (state)\nthis:\n  countable_preimages B Y i = Y -` {Y y}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "have \"Y y = from_nat_into B i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y y = from_nat_into B i", "by (meson \\<open>y \\<in> countable_preimages B Y i\\<close> count_pre_img)"], ["proof (state)\nthis:\n  Y y = from_nat_into B i\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "hence \"Y y \\<in> space N\""], ["proof (prove)\nusing this:\n  Y y = from_nat_into B i\n\ngoal (1 subgoal):\n 1. Y y \\<in> space N", "by (metis UNIV_I UN_I \\<open>y \\<in> countable_preimages B Y i\\<close> \\<open>Y -`B = (\\<Union> i. (countable_preimages B Y) i)\\<close> assms(2)  empty_iff from_nat_into subsetCE vimage_empty)"], ["proof (state)\nthis:\n  Y y \\<in> space N\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "moreover"], ["proof (state)\nthis:\n  Y y \\<in> space N\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "have \"Y y \\<in> range Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y y \\<in> range Y", "by simp"], ["proof (state)\nthis:\n  Y y \\<in> range Y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<noteq> {} \\<Longrightarrow>\n    countable_preimages B Y i \\<inter> space M \\<in> sets M", "thus ?thesis"], ["proof (prove)\nusing this:\n  Y y \\<in> range Y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<in> sets M", "by (metis IntI \\<open>countable_preimages B Y i = Y -` {Y y}\\<close> assms(1) calculation point_measurable_def)"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  disct_fct_point_measurable:\nassumes \"disc_fct f\"\nand \"point_measurable M (space N) f\"\nshows \"f\\<in> measurable M N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> M \\<rightarrow>\\<^sub>M N", "unfolding measurable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> {f \\<in> space M \\<rightarrow> space N.\n             \\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. f \\<in> space M \\<rightarrow> space N \\<and>\n    (\\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M)", "show \"f \\<in> space M \\<rightarrow> space N \\<and> (\\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space M \\<rightarrow> space N \\<and>\n    (\\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. f \\<in> space M \\<rightarrow> space N\n 2. \\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M", "show \"f \\<in> space M \\<rightarrow> space N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> space M \\<rightarrow> space N", "using assms"], ["proof (prove)\nusing this:\n  disc_fct f\n  point_measurable M (space N) f\n\ngoal (1 subgoal):\n 1. f \\<in> space M \\<rightarrow> space N", "unfolding point_measurable_def"], ["proof (prove)\nusing this:\n  disc_fct f\n  f ` space M \\<subseteq> space N \\<and>\n  (\\<forall>r\\<in>range f \\<inter> space N.\n      f -` {r} \\<inter> space M \\<in> sets M)\n\ngoal (1 subgoal):\n 1. f \\<in> space M \\<rightarrow> space N", "by auto"], ["proof (state)\nthis:\n  f \\<in> space M \\<rightarrow> space N\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M", "show \"\\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "assume \"y\\<in> sets N\""], ["proof (state)\nthis:\n  y \\<in> sets N\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "let ?imY = \"range f \\<inter> y\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "have \"f-`y = f-`?imY\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f -` y = f -` (range f \\<inter> y)", "by auto"], ["proof (state)\nthis:\n  f -` y = f -` (range f \\<inter> y)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "moreover"], ["proof (state)\nthis:\n  f -` y = f -` (range f \\<inter> y)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "have \"countable ?imY\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable (range f \\<inter> y)", "using assms"], ["proof (prove)\nusing this:\n  disc_fct f\n  point_measurable M (space N) f\n\ngoal (1 subgoal):\n 1. countable (range f \\<inter> y)", "unfolding disc_fct_def"], ["proof (prove)\nusing this:\n  countable (range f)\n  point_measurable M (space N) f\n\ngoal (1 subgoal):\n 1. countable (range f \\<inter> y)", "by auto"], ["proof (state)\nthis:\n  countable (range f \\<inter> y)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "ultimately"], ["proof (chain)\npicking this:\n  f -` y = f -` (range f \\<inter> y)\n  countable (range f \\<inter> y)", "have \"f -`y = (\\<Union> i. (countable_preimages ?imY f) i)\""], ["proof (prove)\nusing this:\n  f -` y = f -` (range f \\<inter> y)\n  countable (range f \\<inter> y)\n\ngoal (1 subgoal):\n 1. f -` y = \\<Union> (range (countable_preimages (range f \\<inter> y) f))", "using assms count_pre_union_img"], ["proof (prove)\nusing this:\n  f -` y = f -` (range f \\<inter> y)\n  countable (range f \\<inter> y)\n  disc_fct f\n  point_measurable M (space N) f\n  countable ?B \\<Longrightarrow>\n  ?Y -` ?B = \\<Union> (range (countable_preimages ?B ?Y))\n\ngoal (1 subgoal):\n 1. f -` y = \\<Union> (range (countable_preimages (range f \\<inter> y) f))", "by metis"], ["proof (state)\nthis:\n  f -` y = \\<Union> (range (countable_preimages (range f \\<inter> y) f))\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "hence yeq: \"f -` y \\<inter> space M = (\\<Union> i. ((countable_preimages ?imY f) i) \\<inter> space M)\""], ["proof (prove)\nusing this:\n  f -` y = \\<Union> (range (countable_preimages (range f \\<inter> y) f))\n\ngoal (1 subgoal):\n 1. f -` y \\<inter> space M =\n    (\\<Union>i.\n        countable_preimages (range f \\<inter> y) f i \\<inter> space M)", "by auto"], ["proof (state)\nthis:\n  f -` y \\<inter> space M =\n  (\\<Union>i. countable_preimages (range f \\<inter> y) f i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "have \"\\<forall>i. countable_preimages ?imY f i \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       countable_preimages (range f \\<inter> y) f i \\<inter> space M\n       \\<in> sets M", "by (metis \\<open>countable (range f \\<inter> y)\\<close> \\<open>y \\<in> sets N\\<close> assms(2) inf_le2 le_inf_iff count_pre_meas  sets.Int_space_eq1)"], ["proof (state)\nthis:\n  \\<forall>i.\n     countable_preimages (range f \\<inter> y) f i \\<inter> space M\n     \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "hence \"(\\<Union> i. ((countable_preimages ?imY f) i) \\<inter> space M) \\<in> sets M\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     countable_preimages (range f \\<inter> y) f i \\<inter> space M\n     \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<Union>i.\n        countable_preimages (range f \\<inter> y) f i \\<inter> space M)\n    \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  (\\<Union>i. countable_preimages (range f \\<inter> y) f i \\<inter> space M)\n  \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> sets N \\<Longrightarrow> f -` y \\<inter> space M \\<in> sets M", "thus \"f -` y \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  (\\<Union>i. countable_preimages (range f \\<inter> y) f i \\<inter> space M)\n  \\<in> sets M\n\ngoal (1 subgoal):\n 1. f -` y \\<inter> space M \\<in> sets M", "using yeq"], ["proof (prove)\nusing this:\n  (\\<Union>i. countable_preimages (range f \\<inter> y) f i \\<inter> space M)\n  \\<in> sets M\n  f -` y \\<inter> space M =\n  (\\<Union>i. countable_preimages (range f \\<inter> y) f i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. f -` y \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  f -` y \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f \\<in> space M \\<rightarrow> space N \\<and>\n  (\\<forall>y\\<in>sets N. f -` y \\<inter> space M \\<in> sets M)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  set_point_measurable:\n  assumes \"point_measurable M (space N) Y\"\n  and \"B \\<subseteq> space N\"\n  and \"countable B\"\nshows \"(Y -`B) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "have \"Y -`B = (\\<Union> i. (countable_preimages B Y) i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "using assms"], ["proof (prove)\nusing this:\n  point_measurable M (space N) Y\n  B \\<subseteq> space N\n  countable B\n\ngoal (1 subgoal):\n 1. Y -` B = \\<Union> (range (countable_preimages B Y))", "by (simp add: count_pre_union_img)"], ["proof (state)\nthis:\n  Y -` B = \\<Union> (range (countable_preimages B Y))\n\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "hence \"Y -`B \\<inter> space M = (\\<Union> i. ((countable_preimages B Y) i \\<inter> space M))\""], ["proof (prove)\nusing this:\n  Y -` B = \\<Union> (range (countable_preimages B Y))\n\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M =\n    (\\<Union>i. countable_preimages B Y i \\<inter> space M)", "by auto"], ["proof (state)\nthis:\n  Y -` B \\<inter> space M =\n  (\\<Union>i. countable_preimages B Y i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "have \"\\<forall>i. (countable_preimages B Y) i \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. countable_preimages B Y i \\<inter> space M \\<in> sets M", "using assms"], ["proof (prove)\nusing this:\n  point_measurable M (space N) Y\n  B \\<subseteq> space N\n  countable B\n\ngoal (1 subgoal):\n 1. \\<forall>i. countable_preimages B Y i \\<inter> space M \\<in> sets M", "by (simp add: count_pre_meas)"], ["proof (state)\nthis:\n  \\<forall>i. countable_preimages B Y i \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "hence \"(\\<Union> i. ((countable_preimages B Y) i \\<inter> space M)) \\<in> sets M\""], ["proof (prove)\nusing this:\n  \\<forall>i. countable_preimages B Y i \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<Union>i. countable_preimages B Y i \\<inter> space M) \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  (\\<Union>i. countable_preimages B Y i \\<inter> space M) \\<in> sets M\n\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "using \\<open>(\\<Union>i. countable_preimages B Y i \\<inter> space M) \\<in> sets M\\<close> \\<open>Y -` B \\<inter> space M = (\\<Union>i. countable_preimages B Y i \\<inter> space M)\\<close>"], ["proof (prove)\nusing this:\n  (\\<Union>i. countable_preimages B Y i \\<inter> space M) \\<in> sets M\n  Y -` B \\<inter> space M =\n  (\\<Union>i. countable_preimages B Y i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. Y -` B \\<inter> space M \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  Y -` B \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Definition of explicit conditional expectation\\<close>"], ["", "text \\<open>This section is devoted to an explicit computation of a conditional expectation for random variables\nthat have a countable codomain. More precisely, the computed random variable is almost everywhere equal to a conditional\nexpectation of the random variable under consideration.\\<close>"], ["", "definition  img_dce where\n  \"img_dce M Y X = (\\<lambda> y. if measure M ((Y -` {y}) \\<inter> space M) = 0 then 0 else\n    ((integral\\<^sup>L M (\\<lambda>w. ((X w) * (indicator ((Y -`{y})\\<inter> space M) w))))/(measure M ((Y -` {y}) \\<inter> space M))))\""], ["", "definition  expl_cond_expect where\n  \"expl_cond_expect M Y X = (img_dce M Y X) \\<circ> Y\""], ["", "lemma  nn_expl_cond_expect_pos:\n  assumes \"\\<forall>w \\<in> space M. 0 \\<le> X w\"\nshows \"\\<forall> w\\<in> space M. 0 \\<le> (expl_cond_expect M Y X) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M. 0 \\<le> expl_cond_expect M Y X w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow> 0 \\<le> expl_cond_expect M Y X w", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow> 0 \\<le> expl_cond_expect M Y X w", "assume space: \"w\\<in> space M\""], ["proof (state)\nthis:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow> 0 \\<le> expl_cond_expect M Y X w", "show \"0 \\<le> (expl_cond_expect M Y X) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> expl_cond_expect M Y X w", "proof (cases \"measure M ((Y -` {Y w})\\<inter> space M) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w\n 2. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "case True"], ["proof (state)\nthis:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (2 subgoals):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w\n 2. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "thus \"0 \\<le> (expl_cond_expect M Y X) w\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> expl_cond_expect M Y X w", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> ((\\<lambda>y.\n                 if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0\n                 then 0\n                 else (LINT w|M.\n                          X w *\n                          indicat_real (Y -` {y} \\<inter> space M) w) /\n                      Sigma_Algebra.measure M\n                       (Y -` {y} \\<inter> space M)) \\<circ>\n             Y)\n             w", "by simp"], ["proof (state)\nthis:\n  0 \\<le> expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "case False"], ["proof (state)\nthis:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "hence \"Y -`{Y w} \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "using measure_notin_sets"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n  ?A \\<notin> sets ?M \\<Longrightarrow> Sigma_Algebra.measure ?M ?A = 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "let ?indA = \"((\\<lambda> x. indicator ((Y -`{Y w})\\<inter> space M) x))\""], ["proof (state)\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "have \"\\<forall>w \\<in> space M. 0 \\<le> (X w) * (?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>wa\\<in>space M.\n       0 \\<le> X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa", "by (simp add: assms)"], ["proof (state)\nthis:\n  \\<forall>wa\\<in>space M.\n     0 \\<le> X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "hence  \"0 \\<le> (integral\\<^sup>L M (\\<lambda>w. ((X w) * (?indA w))))\""], ["proof (prove)\nusing this:\n  \\<forall>wa\\<in>space M.\n     0 \\<le> X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n\ngoal (1 subgoal):\n 1. 0 \\<le> LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa", "by simp"], ["proof (state)\nthis:\n  0 \\<le> LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "moreover"], ["proof (state)\nthis:\n  0 \\<le> LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "have \"(expl_cond_expect M Y X) w = (integral\\<^sup>L M (\\<lambda>w. ((X w) * (?indA w)))) / (measure M ((Y -` {Y w})\\<inter> space M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w =\n    (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "using False"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w =\n  (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "moreover"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w =\n  (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "have \"0 < measure M ((Y -` {Y w}) \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "using False"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "by (simp add: zero_less_measure_iff)"], ["proof (state)\nthis:\n  0 < Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq>\n    0 \\<Longrightarrow>\n    0 \\<le> expl_cond_expect M Y X w", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n  expl_cond_expect M Y X w =\n  (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n  0 < Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "show \"0 \\<le> (expl_cond_expect M Y X) w\""], ["proof (prove)\nusing this:\n  0 \\<le> LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n  expl_cond_expect M Y X w =\n  (LINT wa|M. X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa) /\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n  0 < Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. 0 \\<le> expl_cond_expect M Y X w", "by simp"], ["proof (state)\nthis:\n  0 \\<le> expl_cond_expect M Y X w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> expl_cond_expect M Y X w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_const:\n  assumes \"Y w = Y y\"\n  shows \"expl_cond_expect M Y X w = expl_cond_expect M Y X y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     y", "by (simp add: assms)"], ["", "lemma  expl_cond_exp_cong:\n  assumes \"\\<forall>w\\<in>space M. X w = Z w\"\nshows \"\\<forall>w\\<in> space M. expl_cond_expect M Y X w = expl_cond_expect M Y Z w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       expl_cond_expect M Y X w = expl_cond_expect M Y Z w", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       ((\\<lambda>y.\n            if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0\n            then 0\n            else (LINT w|M.\n                     X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n                 Sigma_Algebra.measure M\n                  (Y -` {y} \\<inter> space M)) \\<circ>\n        Y)\n        w =\n       ((\\<lambda>y.\n            if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0\n            then 0\n            else (LINT w|M.\n                     Z w * indicat_real (Y -` {y} \\<inter> space M) w) /\n                 Sigma_Algebra.measure M\n                  (Y -` {y} \\<inter> space M)) \\<circ>\n        Y)\n        w", "by (metis (no_types, lifting) Bochner_Integration.integral_cong assms(1) o_apply)"], ["", "(* example of a proof that IMO takes too long in Isabelle *)"], ["", "lemma  expl_cond_exp_add:\n  assumes \"integrable M X\"\n  and \"integrable M Z\"\nshows \"\\<forall>w\\<in> space M. expl_cond_expect M Y (\\<lambda>x. X x + Z x) w = expl_cond_expect M Y X w + expl_cond_expect M Y Z w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n       expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n       expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n       expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "assume \"w\\<in> space M\""], ["proof (state)\nthis:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n       expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "define prY where \"prY = measure M ((Y -` {Y w}) \\<inter> space M)\""], ["proof (state)\nthis:\n  prY = Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n       expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "show \"expl_cond_expect M Y (\\<lambda>x. X x + Z x) w = expl_cond_expect M Y X w + expl_cond_expect M Y Z w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "proof (cases \"prY = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. prY = 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w\n 2. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "case True"], ["proof (state)\nthis:\n  prY = 0\n\ngoal (2 subgoals):\n 1. prY = 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w\n 2. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "thus ?thesis"], ["proof (prove)\nusing this:\n  prY = 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "unfolding expl_cond_expect_def img_dce_def prY_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M.\n                  (X w + Z w) *\n                  indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w +\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. Z w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n  expl_cond_expect M Y X w + expl_cond_expect M Y Z w\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "case False"], ["proof (state)\nthis:\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "hence \"(Y -` {Y w}) \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "unfolding prY_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "using measure_notin_sets"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n  ?A \\<notin> sets ?M \\<Longrightarrow> Sigma_Algebra.measure ?M ?A = 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "let ?indA = \"indicator ((Y -` {Y w}) \\<inter> space M)::('a\\<Rightarrow>real)\""], ["proof (state)\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "have \"integrable M (\\<lambda>x. X x * ?indA x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "using \\<open>Y -` {Y w} \\<inter> space M \\<in> sets M\\<close> assms(1) integrable_real_mult_indicator"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  integrable M X\n  \\<lbrakk>?A \\<in> sets ?M; integrable ?M ?f\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. ?f x * indicat_real ?A x)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "moreover"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "have \"integrable M (\\<lambda>x. Z x * ?indA x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "using \\<open>Y -` {Y w} \\<inter> space M \\<in> sets M\\<close> assms(2) integrable_real_mult_indicator"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  integrable M Z\n  \\<lbrakk>?A \\<in> sets ?M; integrable ?M ?f\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. ?f x * indicat_real ?A x)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "ultimately"], ["proof (chain)\npicking this:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "have \"integral\\<^sup>L M (\\<lambda>x. X x * ?indA x + Z x * ?indA x) = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x) + integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x)\""], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n       Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "using Bochner_Integration.integral_add"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  \\<lbrakk>integrable ?M ?f; integrable ?M ?g\\<rbrakk>\n  \\<Longrightarrow> LINT x|?M. ?f x + ?g x =\n                    integral\\<^sup>L ?M ?f + integral\\<^sup>L ?M ?g\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n       Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "moreover"], ["proof (state)\nthis:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "have \"\\<forall>x\\<in> space M. X x * ?indA x + Z x * ?indA x = (X x + Z x) * ?indA x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>space M.\n       X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n       Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n       (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x", "by (simp add: indicator_def)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>space M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "ultimately"], ["proof (chain)\npicking this:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  \\<forall>x\\<in>space M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x", "have fsteq: \"integral\\<^sup>L M (\\<lambda>x. (X x + Z x) * ?indA x) = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x) + integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x)\""], ["proof (prove)\nusing this:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  \\<forall>x\\<in>space M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x +\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by (metis (no_types, lifting) Bochner_Integration.integral_cong)"], ["proof (state)\nthis:\n  LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "have \"integral\\<^sup>L M (\\<lambda>x. (X x + Z x) * ?indA x/prY) = integral\\<^sup>L M (\\<lambda>x. (X x + Z x) * ?indA x)/prY\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n    (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n    prY", "by simp"], ["proof (state)\nthis:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "have \"... = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x)/prY + integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x)/prY\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n    prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY", "using fsteq"], ["proof (prove)\nusing this:\n  LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n    prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY", "by (simp add: add_divide_distrib)"], ["proof (state)\nthis:\n  (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "also"], ["proof (state)\nthis:\n  (LINT x|M. (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "have \"... = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x/prY) + integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x/prY)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "finally"], ["proof (chain)\npicking this:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)", "have \"integral\\<^sup>L M (\\<lambda>x. (X x + Z x) * ?indA x/prY) = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x/prY) + integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x/prY)\""], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)", "."], ["proof (state)\nthis:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "thus ?thesis"], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "using False"], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n    expl_cond_expect M Y X w + expl_cond_expect M Y Z w", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x + Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) +\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M.\n                  (X w + Z w) *\n                  indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w +\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. Z w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w", "by (simp add: add_divide_distrib fsteq)"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n  expl_cond_expect M Y X w + expl_cond_expect M Y Z w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. X x + Z x) w =\n  expl_cond_expect M Y X w + expl_cond_expect M Y Z w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma expl_cond_exp_diff:\n  assumes \"integrable M X\"\n  and \"integrable M Z\"\nshows \"\\<forall>w\\<in> space M. expl_cond_expect M Y (\\<lambda>x. X x - Z x) w = expl_cond_expect M Y X w - expl_cond_expect M Y Z w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n       expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n       expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n       expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "assume \"w\\<in> space M\""], ["proof (state)\nthis:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n       expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "define prY where \"prY = measure M ((Y -` {Y w}) \\<inter> space M)\""], ["proof (state)\nthis:\n  prY = Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n       expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "show \"expl_cond_expect M Y (\\<lambda>x. X x - Z x) w = expl_cond_expect M Y X w - expl_cond_expect M Y Z w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "proof (cases \"prY = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. prY = 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w\n 2. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "case True"], ["proof (state)\nthis:\n  prY = 0\n\ngoal (2 subgoals):\n 1. prY = 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w\n 2. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "thus ?thesis"], ["proof (prove)\nusing this:\n  prY = 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "unfolding expl_cond_expect_def img_dce_def prY_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M.\n                  (X w - Z w) *\n                  indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w -\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. Z w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n  expl_cond_expect M Y X w - expl_cond_expect M Y Z w\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "case False"], ["proof (state)\nthis:\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "hence \"(Y -` {Y w}) \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "unfolding prY_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "using measure_notin_sets"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n  ?A \\<notin> sets ?M \\<Longrightarrow> Sigma_Algebra.measure ?M ?A = 0\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "let ?indA = \"indicator ((Y -` {Y w}) \\<inter> space M)::('a\\<Rightarrow>real)\""], ["proof (state)\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "have \"integrable M (\\<lambda>x. X x * ?indA x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "using \\<open>Y -` {Y w} \\<inter> space M \\<in> sets M\\<close> assms(1) integrable_real_mult_indicator"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  integrable M X\n  \\<lbrakk>?A \\<in> sets ?M; integrable ?M ?f\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. ?f x * indicat_real ?A x)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "moreover"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "have \"integrable M (\\<lambda>x. Z x * ?indA x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "using \\<open>Y -` {Y w} \\<inter> space M \\<in> sets M\\<close> assms(2) integrable_real_mult_indicator"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  integrable M Z\n  \\<lbrakk>?A \\<in> sets ?M; integrable ?M ?f\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. ?f x * indicat_real ?A x)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "ultimately"], ["proof (chain)\npicking this:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "have \"integral\\<^sup>L M (\\<lambda>x. X x * ?indA x - Z x * ?indA x) = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x) - integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x)\""], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n       Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "using Bochner_Integration.integral_diff"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>x. X x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  integrable M\n   (\\<lambda>x. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  \\<lbrakk>integrable ?M ?f; integrable ?M ?g\\<rbrakk>\n  \\<Longrightarrow> LINT x|?M. ?f x - ?g x =\n                    integral\\<^sup>L ?M ?f - integral\\<^sup>L ?M ?g\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n       Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "moreover"], ["proof (state)\nthis:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "have \"\\<forall>x\\<in> space M. X x * ?indA x - Z x * ?indA x = (X x - Z x) * ?indA x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>space M.\n       X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n       Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n       (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x", "by (simp add: indicator_def)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>space M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "ultimately"], ["proof (chain)\npicking this:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  \\<forall>x\\<in>space M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x", "have fsteq: \"integral\\<^sup>L M (\\<lambda>x. (X x - Z x) * ?indA x) = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x) - integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x)\""], ["proof (prove)\nusing this:\n  LINT x|M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n  \\<forall>x\\<in>space M.\n     X x * indicat_real (Y -` {Y w} \\<inter> space M) x -\n     Z x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)", "by (metis (no_types, lifting) Bochner_Integration.integral_cong)"], ["proof (state)\nthis:\n  LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "have \"integral\\<^sup>L M (\\<lambda>x. (X x - Z x) * ?indA x/prY) = integral\\<^sup>L M (\\<lambda>x. (X x - Z x) * ?indA x)/prY\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|M.\n       (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n    (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n    prY", "by simp"], ["proof (state)\nthis:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "also"], ["proof (state)\nthis:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "have \"... = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x)/prY - integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x)/prY\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n    prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY", "using fsteq"], ["proof (prove)\nusing this:\n  LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n    prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY", "by (simp add: diff_divide_distrib)"], ["proof (state)\nthis:\n  (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "also"], ["proof (state)\nthis:\n  (LINT x|M. (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x) /\n  prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "have \"... = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x/prY) - integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x/prY)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)", "by auto"], ["proof (state)\nthis:\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x) / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "finally"], ["proof (chain)\npicking this:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)", "have \"integral\\<^sup>L M (\\<lambda>x. (X x - Z x) * ?indA x/prY) = integral\\<^sup>L M (\\<lambda>x. X x * ?indA x/prY) - integral\\<^sup>L M (\\<lambda>x. Z x * ?indA x/prY)\""], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. LINT x|M.\n       (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n    (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n    (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)", "."], ["proof (state)\nthis:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. prY \\<noteq> 0 \\<Longrightarrow>\n    expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "thus ?thesis"], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "using False"], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n    expl_cond_expect M Y X w - expl_cond_expect M Y Z w", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\nusing this:\n  LINT x|M.\n     (X x - Z x) * indicat_real (Y -` {Y w} \\<inter> space M) x / prY =\n  (LINT x|M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY) -\n  (LINT x|M. Z x * indicat_real (Y -` {Y w} \\<inter> space M) x / prY)\n  prY \\<noteq> 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M.\n                  (X w - Z w) *\n                  indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w -\n    ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. Z w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w", "by (simp add: diff_divide_distrib fsteq)"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n  expl_cond_expect M Y X w - expl_cond_expect M Y Z w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. X x - Z x) w =\n  expl_cond_expect M Y X w - expl_cond_expect M Y Z w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_prop_sets:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\n  and \"D = {w\\<in> space M. Y w \\<in> space N \\<and> (P (expl_cond_expect M Y X w))}\"\nshows \"D\\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D \\<in> sets M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. D \\<in> sets M", "let ?C = \"{y \\<in> (Y`(space M)) \\<inter> (space N). P (img_dce M Y X y)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. D \\<in> sets M", "have \"space M \\<subseteq> UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space M \\<subseteq> UNIV", "by simp"], ["proof (state)\nthis:\n  space M \\<subseteq> UNIV\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "hence \"Y`(space M) \\<subseteq> range Y\""], ["proof (prove)\nusing this:\n  space M \\<subseteq> UNIV\n\ngoal (1 subgoal):\n 1. Y ` space M \\<subseteq> range Y", "by auto"], ["proof (state)\nthis:\n  Y ` space M \\<subseteq> range Y\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "hence \"countable (Y`(space M))\""], ["proof (prove)\nusing this:\n  Y ` space M \\<subseteq> range Y\n\ngoal (1 subgoal):\n 1. countable (Y ` space M)", "using assms countable_subset"], ["proof (prove)\nusing this:\n  Y ` space M \\<subseteq> range Y\n  disc_fct Y\n  point_measurable M (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n  \\<lbrakk>?A \\<subseteq> ?B; countable ?B\\<rbrakk>\n  \\<Longrightarrow> countable ?A\n\ngoal (1 subgoal):\n 1. countable (Y ` space M)", "unfolding disc_fct_def"], ["proof (prove)\nusing this:\n  Y ` space M \\<subseteq> range Y\n  countable (range Y)\n  point_measurable M (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n  \\<lbrakk>?A \\<subseteq> ?B; countable ?B\\<rbrakk>\n  \\<Longrightarrow> countable ?A\n\ngoal (1 subgoal):\n 1. countable (Y ` space M)", "by auto"], ["proof (state)\nthis:\n  countable (Y ` space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "hence \"countable ?C\""], ["proof (prove)\nusing this:\n  countable (Y ` space M)\n\ngoal (1 subgoal):\n 1. countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "using assms"], ["proof (prove)\nusing this:\n  countable (Y ` space M)\n  disc_fct Y\n  point_measurable M (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "unfolding disc_fct_def"], ["proof (prove)\nusing this:\n  countable (Y ` space M)\n  countable (range Y)\n  point_measurable M (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "by auto"], ["proof (state)\nthis:\n  countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "have eqset: \"D = (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D =\n    (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. D \\<subseteq> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                                  P (img_dce M Y X y)}.\n                      Y -` {b}) \\<inter>\n                  space M\n 2. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M\n    \\<subseteq> D", "show \"D\\<subseteq> (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D \\<subseteq> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                                  P (img_dce M Y X y)}.\n                      Y -` {b}) \\<inter>\n                  space M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "assume \"w\\<in> D\""], ["proof (state)\nthis:\n  w \\<in> D\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "hence \"w\\<in> space M \\<and> Y w \\<in> (space N) \\<and> (P (expl_cond_expect M Y X w))\""], ["proof (prove)\nusing this:\n  w \\<in> D\n\ngoal (1 subgoal):\n 1. w \\<in> space M \\<and>\n    Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)", "by (simp add: assms)"], ["proof (state)\nthis:\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "hence \"P (img_dce M Y X (Y w))\""], ["proof (prove)\nusing this:\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. P (img_dce M Y X (Y w))", "by (simp add: expl_cond_expect_def)"], ["proof (state)\nthis:\n  P (img_dce M Y X (Y w))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "hence \"Y w \\<in> ?C\""], ["proof (prove)\nusing this:\n  P (img_dce M Y X (Y w))\n\ngoal (1 subgoal):\n 1. Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "using \\<open>w \\<in> space M \\<and> Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\\<close>"], ["proof (prove)\nusing this:\n  P (img_dce M Y X (Y w))\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "by blast"], ["proof (state)\nthis:\n  Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "thus \"w\\<in> (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (prove)\nusing this:\n  Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                            P (img_dce M Y X y)}.\n                Y -` {b}) \\<inter>\n            space M", "using \\<open>w \\<in> space M \\<and> Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\\<close>"], ["proof (prove)\nusing this:\n  Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                            P (img_dce M Y X y)}.\n                Y -` {b}) \\<inter>\n            space M", "by blast"], ["proof (state)\nthis:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  D \\<subseteq> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                                P (img_dce M Y X y)}.\n                    Y -` {b}) \\<inter>\n                space M\n\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M\n    \\<subseteq> D", "show \"(\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M \\<subseteq> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M\n    \\<subseteq> D", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "assume \"w\\<in> (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (state)\nthis:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "from this"], ["proof (chain)\npicking this:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M", "obtain b where \"b\\<in> ?C \\<and> w\\<in> Y-`{b}\""], ["proof (prove)\nusing this:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        b \\<in> {y \\<in> Y ` space M \\<inter> space N.\n                 P (img_dce M Y X y)} \\<and>\n        w \\<in> Y -` {b} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "note bprops = this"], ["proof (state)\nthis:\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "hence \"Y w = b\""], ["proof (prove)\nusing this:\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. Y w = b", "by auto"], ["proof (state)\nthis:\n  Y w = b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "hence \"Y w\\<in> space N\""], ["proof (prove)\nusing this:\n  Y w = b\n\ngoal (1 subgoal):\n 1. Y w \\<in> space N", "using bprops"], ["proof (prove)\nusing this:\n  Y w = b\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. Y w \\<in> space N", "by simp"], ["proof (state)\nthis:\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "show \"w \\<in> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<in> D", "by (metis (mono_tags, lifting) IntE \\<open>Y w = b\\<close> \\<open>w \\<in> (\\<Union>b\\<in>?C. Y -` {b}) \\<inter> space M\\<close> assms(3)\n            bprops mem_Collect_eq o_apply expl_cond_expect_def)"], ["proof (state)\nthis:\n  w \\<in> D\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M\n  \\<subseteq> D\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "also"], ["proof (state)\nthis:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "have \"... = (\\<Union> b\\<in> ?C. Y-`{b}\\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M =\n    (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)", "by blast"], ["proof (state)\nthis:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "finally"], ["proof (chain)\npicking this:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)", "have \"D = (\\<Union> b\\<in> ?C. Y-`{b}\\<inter> space M)\""], ["proof (prove)\nusing this:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D =\n    (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)", "."], ["proof (state)\nthis:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "have \"\\<forall>b\\<in> ?C. Y-`{b} \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n       Y -` {b} \\<inter> space M \\<in> sets M", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  point_measurable M (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n       Y -` {b} \\<inter> space M \\<in> sets M", "unfolding point_measurable_def"], ["proof (prove)\nusing this:\n  disc_fct Y\n  Y ` space M \\<subseteq> space N \\<and>\n  (\\<forall>r\\<in>range Y \\<inter> space N.\n      Y -` {r} \\<inter> space M \\<in> sets M)\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n       Y -` {b} \\<inter> space M \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n     Y -` {b} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "hence \"(\\<Union> b\\<in> ?C. Y-`{b}\\<inter> space M) \\<in> sets M\""], ["proof (prove)\nusing this:\n  \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n     Y -` {b} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)\n    \\<in> sets M", "using \\<open>countable ?C\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n     Y -` {b} \\<inter> space M \\<in> sets M\n  countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)\n    \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n  \\<in> sets M\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n  \\<in> sets M\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "using \\<open>D = (\\<Union>b\\<in>?C. Y -` {b} \\<inter> space M)\\<close>"], ["proof (prove)\nusing this:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n  \\<in> sets M\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets M", "by blast"], ["proof (state)\nthis:\n  D \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_prop_sets2:\n  assumes \"disc_fct Y\"\n  and \"point_measurable (fct_gen_subalgebra M N Y) (space N) Y\"\n  and \"D = {w\\<in> space M. Y w \\<in> space N \\<and> (P (expl_cond_expect M Y X w))}\"\nshows \"D\\<in> sets (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "let ?C = \"{y \\<in> (Y`(space M)) \\<inter> (space N). P (img_dce M Y X y)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "have \"space M \\<subseteq> UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space M \\<subseteq> UNIV", "by simp"], ["proof (state)\nthis:\n  space M \\<subseteq> UNIV\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "hence \"Y`(space M) \\<subseteq> range Y\""], ["proof (prove)\nusing this:\n  space M \\<subseteq> UNIV\n\ngoal (1 subgoal):\n 1. Y ` space M \\<subseteq> range Y", "by auto"], ["proof (state)\nthis:\n  Y ` space M \\<subseteq> range Y\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "hence \"countable (Y`(space M))\""], ["proof (prove)\nusing this:\n  Y ` space M \\<subseteq> range Y\n\ngoal (1 subgoal):\n 1. countable (Y ` space M)", "using assms countable_subset"], ["proof (prove)\nusing this:\n  Y ` space M \\<subseteq> range Y\n  disc_fct Y\n  point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n  \\<lbrakk>?A \\<subseteq> ?B; countable ?B\\<rbrakk>\n  \\<Longrightarrow> countable ?A\n\ngoal (1 subgoal):\n 1. countable (Y ` space M)", "unfolding disc_fct_def"], ["proof (prove)\nusing this:\n  Y ` space M \\<subseteq> range Y\n  countable (range Y)\n  point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n  \\<lbrakk>?A \\<subseteq> ?B; countable ?B\\<rbrakk>\n  \\<Longrightarrow> countable ?A\n\ngoal (1 subgoal):\n 1. countable (Y ` space M)", "by auto"], ["proof (state)\nthis:\n  countable (Y ` space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "hence \"countable ?C\""], ["proof (prove)\nusing this:\n  countable (Y ` space M)\n\ngoal (1 subgoal):\n 1. countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "using assms"], ["proof (prove)\nusing this:\n  countable (Y ` space M)\n  disc_fct Y\n  point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "unfolding disc_fct_def"], ["proof (prove)\nusing this:\n  countable (Y ` space M)\n  countable (range Y)\n  point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "by auto"], ["proof (state)\nthis:\n  countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "have eqset: \"D = (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D =\n    (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. D \\<subseteq> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                                  P (img_dce M Y X y)}.\n                      Y -` {b}) \\<inter>\n                  space M\n 2. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M\n    \\<subseteq> D", "show \"D\\<subseteq> (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. D \\<subseteq> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                                  P (img_dce M Y X y)}.\n                      Y -` {b}) \\<inter>\n                  space M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "assume \"w\\<in> D\""], ["proof (state)\nthis:\n  w \\<in> D\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "hence \"w\\<in> space M \\<and> Y w \\<in> (space N) \\<and> (P (expl_cond_expect M Y X w))\""], ["proof (prove)\nusing this:\n  w \\<in> D\n\ngoal (1 subgoal):\n 1. w \\<in> space M \\<and>\n    Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)", "by (simp add: assms)"], ["proof (state)\nthis:\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "hence \"P (img_dce M Y X (Y w))\""], ["proof (prove)\nusing this:\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. P (img_dce M Y X (Y w))", "by (simp add: expl_cond_expect_def)"], ["proof (state)\nthis:\n  P (img_dce M Y X (Y w))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "hence \"Y w \\<in> ?C\""], ["proof (prove)\nusing this:\n  P (img_dce M Y X (Y w))\n\ngoal (1 subgoal):\n 1. Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "using \\<open>w \\<in> space M \\<and> Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\\<close>"], ["proof (prove)\nusing this:\n  P (img_dce M Y X (Y w))\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}", "by blast"], ["proof (state)\nthis:\n  Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> D \\<Longrightarrow>\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M", "thus \"w\\<in> (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (prove)\nusing this:\n  Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                            P (img_dce M Y X y)}.\n                Y -` {b}) \\<inter>\n            space M", "using \\<open>w \\<in> space M \\<and> Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\\<close>"], ["proof (prove)\nusing this:\n  Y w \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n  w \\<in> space M \\<and>\n  Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)\n\ngoal (1 subgoal):\n 1. w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                            P (img_dce M Y X y)}.\n                Y -` {b}) \\<inter>\n            space M", "by blast"], ["proof (state)\nthis:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  D \\<subseteq> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                                P (img_dce M Y X y)}.\n                    Y -` {b}) \\<inter>\n                space M\n\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M\n    \\<subseteq> D", "show \"(\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M \\<subseteq> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M\n    \\<subseteq> D", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "assume \"w\\<in> (\\<Union> b\\<in> ?C. Y-`{b})\\<inter> space M\""], ["proof (state)\nthis:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "from this"], ["proof (chain)\npicking this:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M", "obtain b where \"b\\<in> ?C \\<and> w\\<in> Y-`{b}\""], ["proof (prove)\nusing this:\n  w \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                          P (img_dce M Y X y)}.\n              Y -` {b}) \\<inter>\n          space M\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        b \\<in> {y \\<in> Y ` space M \\<inter> space N.\n                 P (img_dce M Y X y)} \\<and>\n        w \\<in> Y -` {b} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "note bprops = this"], ["proof (state)\nthis:\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "hence \"Y w = b\""], ["proof (prove)\nusing this:\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. Y w = b", "by auto"], ["proof (state)\nthis:\n  Y w = b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "hence \"Y w\\<in> space N\""], ["proof (prove)\nusing this:\n  Y w = b\n\ngoal (1 subgoal):\n 1. Y w \\<in> space N", "using bprops"], ["proof (prove)\nusing this:\n  Y w = b\n  b \\<in> {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)} \\<and>\n  w \\<in> Y -` {b}\n\ngoal (1 subgoal):\n 1. Y w \\<in> space N", "by simp"], ["proof (state)\nthis:\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                               P (img_dce M Y X y)}.\n                   Y -` {b}) \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> D", "show \"w \\<in> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<in> D", "by (metis (mono_tags, lifting) IntE \\<open>Y w = b\\<close> \\<open>w \\<in> (\\<Union>b\\<in>?C. Y -` {b}) \\<inter> space M\\<close> assms(3)\n            bprops mem_Collect_eq o_apply expl_cond_expect_def)"], ["proof (state)\nthis:\n  w \\<in> D\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M\n  \\<subseteq> D\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "also"], ["proof (state)\nthis:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "have \"... = (\\<Union> b\\<in> ?C. Y-`{b}\\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b}) \\<inter>\n    space M =\n    (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)", "by blast"], ["proof (state)\nthis:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b}) \\<inter>\n  space M =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "finally"], ["proof (chain)\npicking this:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)", "have \"D = (\\<Union> b\\<in> ?C. Y-`{b}\\<inter> space M)\""], ["proof (prove)\nusing this:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D =\n    (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)", "."], ["proof (state)\nthis:\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "have \"space M = space (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. space M = space (fct_gen_subalgebra M N Y)", "by (simp add: fct_gen_subalgebra_space)"], ["proof (state)\nthis:\n  space M = space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "hence \"\\<forall>b\\<in> ?C. Y-`{b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)\""], ["proof (prove)\nusing this:\n  space M = space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n       Y -` {b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)", "using assms"], ["proof (prove)\nusing this:\n  space M = space (fct_gen_subalgebra M N Y)\n  disc_fct Y\n  point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n       Y -` {b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)", "unfolding point_measurable_def"], ["proof (prove)\nusing this:\n  space M = space (fct_gen_subalgebra M N Y)\n  disc_fct Y\n  Y ` space (fct_gen_subalgebra M N Y) \\<subseteq> space N \\<and>\n  (\\<forall>r\\<in>range Y \\<inter> space N.\n      Y -` {r} \\<inter> space (fct_gen_subalgebra M N Y)\n      \\<in> sets (fct_gen_subalgebra M N Y))\n  D =\n  {w \\<in> space M. Y w \\<in> space N \\<and> P (expl_cond_expect M Y X w)}\n\ngoal (1 subgoal):\n 1. \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n       Y -` {b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)", "by auto"], ["proof (state)\nthis:\n  \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n     Y -` {b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "hence \"(\\<Union> b\\<in> ?C. Y-`{b}\\<inter> space M) \\<in> sets (fct_gen_subalgebra M N Y)\""], ["proof (prove)\nusing this:\n  \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n     Y -` {b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)\n    \\<in> sets (fct_gen_subalgebra M N Y)", "using \\<open>countable ?C\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n     Y -` {b} \\<inter> space M \\<in> sets (fct_gen_subalgebra M N Y)\n  countable {y \\<in> Y ` space M \\<inter> space N. P (img_dce M Y X y)}\n\ngoal (1 subgoal):\n 1. (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                    P (img_dce M Y X y)}.\n        Y -` {b} \\<inter> space M)\n    \\<in> sets (fct_gen_subalgebra M N Y)", "by blast"], ["proof (state)\nthis:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n  \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n  \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "using \\<open>D = (\\<Union>b\\<in>?C. Y -` {b} \\<inter> space M)\\<close>"], ["proof (prove)\nusing this:\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n  \\<in> sets (fct_gen_subalgebra M N Y)\n  D =\n  (\\<Union>b\\<in>{y \\<in> Y ` space M \\<inter> space N.\n                  P (img_dce M Y X y)}.\n      Y -` {b} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. D \\<in> sets (fct_gen_subalgebra M N Y)", "by blast"], ["proof (state)\nthis:\n  D \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_disc_fct:\n  assumes \"disc_fct Y\"\n  shows \"disc_fct (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. disc_fct (expl_cond_expect M Y X)", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n\ngoal (1 subgoal):\n 1. disc_fct (expl_cond_expect M Y X)", "unfolding disc_fct_def expl_cond_expect_def"], ["proof (prove)\nusing this:\n  countable (range Y)\n\ngoal (1 subgoal):\n 1. countable (range (img_dce M Y X \\<circ> Y))", "by (metis countable_image image_comp)"], ["", "lemma  expl_cond_expect_point_meas:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"point_measurable M UNIV (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable M UNIV (expl_cond_expect M Y X)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. point_measurable M UNIV (expl_cond_expect M Y X)", "have \"disc_fct (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. disc_fct (expl_cond_expect M Y X)", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. disc_fct (expl_cond_expect M Y X)", "by (simp add: expl_cond_expect_disc_fct)"], ["proof (state)\nthis:\n  disc_fct (expl_cond_expect M Y X)\n\ngoal (1 subgoal):\n 1. point_measurable M UNIV (expl_cond_expect M Y X)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable M UNIV (expl_cond_expect M Y X)", "unfolding point_measurable_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X ` space M \\<subseteq> UNIV \\<and>\n    (\\<forall>r\\<in>range (expl_cond_expect M Y X) \\<inter> UNIV.\n        expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. expl_cond_expect M Y X ` space M \\<subseteq> UNIV\n 2. \\<forall>r\\<in>range (expl_cond_expect M Y X) \\<inter> UNIV.\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "show \"(expl_cond_expect M Y X)`space M \\<subseteq> UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X ` space M \\<subseteq> UNIV", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X ` space M \\<subseteq> UNIV\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>range (expl_cond_expect M Y X) \\<inter> UNIV.\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "show \"\\<forall>r\\<in>range (expl_cond_expect M Y X) \\<inter> UNIV. expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>range (expl_cond_expect M Y X) \\<inter> UNIV.\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "fix r"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "assume \"r\\<in> range (expl_cond_expect M Y X) \\<inter> UNIV\""], ["proof (state)\nthis:\n  r \\<in> range (expl_cond_expect M Y X) \\<inter> UNIV\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "let ?D = \"{w \\<in> space M. Y w \\<in> space N \\<and> (expl_cond_expect M Y X w) = r}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "have \"?D \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n    \\<in> sets M", "using expl_cond_expect_prop_sets[of Y M N ?D \"\\<lambda>x. x = r\" X]"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct Y; point_measurable M (space N) Y;\n   {w \\<in> space M.\n    Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r} =\n   {w \\<in> space M.\n    Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\\<rbrakk>\n  \\<Longrightarrow> {w \\<in> space M.\n                     Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n                    \\<in> sets M\n\ngoal (1 subgoal):\n 1. {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n    \\<in> sets M", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct Y; point_measurable M (space N) Y;\n   {w \\<in> space M.\n    Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r} =\n   {w \\<in> space M.\n    Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\\<rbrakk>\n  \\<Longrightarrow> {w \\<in> space M.\n                     Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n                    \\<in> sets M\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n    \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n  \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "moreover"], ["proof (state)\nthis:\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n  \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "have \"expl_cond_expect M Y X -`{r}\\<inter> space M = ?D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` {r} \\<inter> space M =\n    {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. expl_cond_expect M Y X -` {r} \\<inter> space M\n    \\<subseteq> {w \\<in> space M.\n                 Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n 2. {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n    \\<subseteq> expl_cond_expect M Y X -` {r} \\<inter> space M", "show \"expl_cond_expect M Y X -`{r}\\<inter> space M \\<subseteq> ?D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` {r} \\<inter> space M\n    \\<subseteq> {w \\<in> space M.\n                 Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "assume \"w\\<in> expl_cond_expect M Y X -`{r}\\<inter> space M\""], ["proof (state)\nthis:\n  w \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "hence \"Y w \\<in> space N\""], ["proof (prove)\nusing this:\n  w \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M\n\ngoal (1 subgoal):\n 1. Y w \\<in> space N", "by (meson IntD2 assms(1) assms(2) disct_fct_point_measurable measurable_space)"], ["proof (state)\nthis:\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter>\n               space M \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "thus \"w \\<in> ?D\""], ["proof (prove)\nusing this:\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. w \\<in> {w \\<in> space M.\n             Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "using \\<open>w \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M\\<close>"], ["proof (prove)\nusing this:\n  Y w \\<in> space N\n  w \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M\n\ngoal (1 subgoal):\n 1. w \\<in> {w \\<in> space M.\n             Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "by blast"], ["proof (state)\nthis:\n  w \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X -` {r} \\<inter> space M\n  \\<subseteq> {w \\<in> space M.\n               Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n\ngoal (1 subgoal):\n 1. {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n    \\<subseteq> expl_cond_expect M Y X -` {r} \\<inter> space M", "show \"?D \\<subseteq> expl_cond_expect M Y X -`{r}\\<inter> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n    \\<subseteq> expl_cond_expect M Y X -` {r} \\<inter> space M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w = r} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w = r} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M", "assume \"w\\<in> ?D\""], ["proof (state)\nthis:\n  w \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w = r} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M", "thus \"w\\<in> expl_cond_expect M Y X -`{r}\\<inter> space M\""], ["proof (prove)\nusing this:\n  w \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n\ngoal (1 subgoal):\n 1. w \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M", "by blast"], ["proof (state)\nthis:\n  w \\<in> expl_cond_expect M Y X -` {r} \\<inter> space M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n  \\<subseteq> expl_cond_expect M Y X -` {r} \\<inter> space M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X -` {r} \\<inter> space M =\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> range (expl_cond_expect M Y X) \\<inter>\n               UNIV \\<Longrightarrow>\n       expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "ultimately"], ["proof (chain)\npicking this:\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n  \\<in> sets M\n  expl_cond_expect M Y X -` {r} \\<inter> space M =\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}", "show \"expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n  \\<in> sets M\n  expl_cond_expect M Y X -` {r} \\<inter> space M =\n  {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w = r}\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>r\\<in>range (expl_cond_expect M Y X) \\<inter> UNIV.\n     expl_cond_expect M Y X -` {r} \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  point_measurable M UNIV (expl_cond_expect M Y X)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_borel_measurable:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"(expl_cond_expect M Y X) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using expl_cond_expect_point_meas[of Y M] assms\n          disct_fct_point_measurable[of \"expl_cond_expect M Y X\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct Y; point_measurable M (space ?N) Y\\<rbrakk>\n  \\<Longrightarrow> point_measurable M UNIV (expl_cond_expect M Y ?X)\n  disc_fct Y\n  point_measurable M (space N) Y\n  \\<lbrakk>disc_fct (expl_cond_expect M Y X);\n   point_measurable ?M (space ?N) (expl_cond_expect M Y X)\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect M Y X \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "by (simp add: expl_cond_expect_disc_fct)"], ["", "lemma  expl_cond_exp_borel:\n  assumes \"Y \\<in> space M \\<rightarrow> space N\"\n  and \"disc_fct Y\"\n  and \"\\<forall>r\\<in> range Y\\<inter> space N. \\<exists>A\\<in> sets N. range Y\\<inter> A = {r}\"\n  shows \"(expl_cond_expect M Y X) \\<in> borel_measurable (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "proof (intro borel_measurableI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S.\n       open S \\<Longrightarrow>\n       expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n       \\<in> sets (fct_gen_subalgebra M N Y)", "fix S::\"real set\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S.\n       open S \\<Longrightarrow>\n       expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n       \\<in> sets (fct_gen_subalgebra M N Y)", "assume \"open S\""], ["proof (state)\nthis:\n  open S\n\ngoal (1 subgoal):\n 1. \\<And>S.\n       open S \\<Longrightarrow>\n       expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n       \\<in> sets (fct_gen_subalgebra M N Y)", "show \"expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) \\<in> sets (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n    \\<in> sets (fct_gen_subalgebra M N Y)", "proof (rule expl_cond_expect_prop_sets2)"], ["proof (state)\ngoal (3 subgoals):\n 1. disc_fct Y\n 2. point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n 3. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) =\n    {w \\<in> space M.\n     Y w \\<in> space N \\<and> ?P (expl_cond_expect M Y ?X w)}", "show \"disc_fct Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. disc_fct Y", "using assms"], ["proof (prove)\nusing this:\n  Y \\<in> space M \\<rightarrow> space N\n  disc_fct Y\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. disc_fct Y", "by simp"], ["proof (state)\nthis:\n  disc_fct Y\n\ngoal (2 subgoals):\n 1. point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n 2. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) =\n    {w \\<in> space M.\n     Y w \\<in> space N \\<and> ?P (expl_cond_expect M Y ?X w)}", "show \"point_measurable (fct_gen_subalgebra M N Y) (space N) Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable (fct_gen_subalgebra M N Y) (space N) Y", "using  assms"], ["proof (prove)\nusing this:\n  Y \\<in> space M \\<rightarrow> space N\n  disc_fct Y\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. point_measurable (fct_gen_subalgebra M N Y) (space N) Y", "by (simp add: singl_meas_if)"], ["proof (state)\nthis:\n  point_measurable (fct_gen_subalgebra M N Y) (space N) Y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) =\n    {w \\<in> space M.\n     Y w \\<in> space N \\<and> ?P (expl_cond_expect M Y ?X w)}", "show \"expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) = {w \\<in> space M. Y w \\<in> space N \\<and> (expl_cond_expect M Y X w) \\<in> S}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) =\n    {w \\<in> space M.\n     Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n    \\<subseteq> {w \\<in> space M.\n                 Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n 2. {w \\<in> space M.\n     Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n    \\<subseteq> expl_cond_expect M Y X -` S \\<inter>\n                space (fct_gen_subalgebra M N Y)", "show \" expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) \\<subseteq> {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n    \\<subseteq> {w \\<in> space M.\n                 Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "assume asm: \"x \\<in> expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\""], ["proof (state)\nthis:\n  x \\<in> expl_cond_expect M Y X -` S \\<inter>\n          space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "hence \"expl_cond_expect M Y X x \\<in> S\""], ["proof (prove)\nusing this:\n  x \\<in> expl_cond_expect M Y X -` S \\<inter>\n          space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X x \\<in> S", "by auto"], ["proof (state)\nthis:\n  expl_cond_expect M Y X x \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "moreover"], ["proof (state)\nthis:\n  expl_cond_expect M Y X x \\<in> S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "have  \"x\\<in> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> space M", "using asm"], ["proof (prove)\nusing this:\n  x \\<in> expl_cond_expect M Y X -` S \\<inter>\n          space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. x \\<in> space M", "by (simp add:fct_gen_subalgebra_space)"], ["proof (state)\nthis:\n  x \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "ultimately"], ["proof (chain)\npicking this:\n  expl_cond_expect M Y X x \\<in> S\n  x \\<in> space M", "show \"x \\<in>{w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\""], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X x \\<in> S\n  x \\<in> space M\n\ngoal (1 subgoal):\n 1. x \\<in> {w \\<in> space M.\n             Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "using assms"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X x \\<in> S\n  x \\<in> space M\n  Y \\<in> space M \\<rightarrow> space N\n  disc_fct Y\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. x \\<in> {w \\<in> space M.\n             Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}", "by auto"], ["proof (state)\nthis:\n  x \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n  \\<subseteq> {w \\<in> space M.\n               Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n\ngoal (1 subgoal):\n 1. {w \\<in> space M.\n     Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n    \\<subseteq> expl_cond_expect M Y X -` S \\<inter>\n                space (fct_gen_subalgebra M N Y)", "show \"{w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S} \\<subseteq> expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {w \\<in> space M.\n     Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n    \\<subseteq> expl_cond_expect M Y X -` S \\<inter>\n                space (fct_gen_subalgebra M N Y)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w \\<in> S} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w \\<in> S} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y)", "assume asm2: \"x \\<in> {w \\<in> space M. Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\""], ["proof (state)\nthis:\n  x \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w \\<in> S} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y)", "hence \"x\\<in> space (fct_gen_subalgebra M N Y)\""], ["proof (prove)\nusing this:\n  x \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n\ngoal (1 subgoal):\n 1. x \\<in> space (fct_gen_subalgebra M N Y)", "by (simp add:fct_gen_subalgebra_space)"], ["proof (state)\nthis:\n  x \\<in> space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w \\<in> S} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y)", "moreover"], ["proof (state)\nthis:\n  x \\<in> space (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w \\<in> S} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y)", "have \"x \\<in> expl_cond_expect M Y X -`S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> expl_cond_expect M Y X -` S", "using asm2"], ["proof (prove)\nusing this:\n  x \\<in> {w \\<in> space M.\n           Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n\ngoal (1 subgoal):\n 1. x \\<in> expl_cond_expect M Y X -` S", "by simp"], ["proof (state)\nthis:\n  x \\<in> expl_cond_expect M Y X -` S\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {w \\<in> space M.\n                Y w \\<in> space N \\<and>\n                expl_cond_expect M Y X w \\<in> S} \\<Longrightarrow>\n       x \\<in> expl_cond_expect M Y X -` S \\<inter>\n               space (fct_gen_subalgebra M N Y)", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> space (fct_gen_subalgebra M N Y)\n  x \\<in> expl_cond_expect M Y X -` S", "show \"x \\<in> expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\""], ["proof (prove)\nusing this:\n  x \\<in> space (fct_gen_subalgebra M N Y)\n  x \\<in> expl_cond_expect M Y X -` S\n\ngoal (1 subgoal):\n 1. x \\<in> expl_cond_expect M Y X -` S \\<inter>\n            space (fct_gen_subalgebra M N Y)", "by simp"], ["proof (state)\nthis:\n  x \\<in> expl_cond_expect M Y X -` S \\<inter>\n          space (fct_gen_subalgebra M N Y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {w \\<in> space M.\n   Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n  \\<subseteq> expl_cond_expect M Y X -` S \\<inter>\n              space (fct_gen_subalgebra M N Y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y) =\n  {w \\<in> space M.\n   Y w \\<in> space N \\<and> expl_cond_expect M Y X w \\<in> S}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X -` S \\<inter> space (fct_gen_subalgebra M N Y)\n  \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_indic_borel_measurable:\n  assumes \"disc_fct Y\"\n  and \"point_measurable M (space N) Y\"\n  and \"B\\<subseteq> space N\"\n  and \"countable B\"\n  shows \"(\\<lambda>w. expl_cond_expect M Y X w * indicator (countable_preimages B Y n \\<inter> space M) w)\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"countable_preimages B Y n \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<in> sets M", "using  assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  point_measurable M (space N) Y\n  B \\<subseteq> space N\n  countable B\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<in> sets M", "by (auto simp add: count_pre_meas)"], ["proof (state)\nthis:\n  countable_preimages B Y n \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"(expl_cond_expect M Y X)\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using expl_cond_expect_point_meas[of Y M N X] assms\n      disct_fct_point_measurable[of \"expl_cond_expect M Y X\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct Y; point_measurable M (space N) Y\\<rbrakk>\n  \\<Longrightarrow> point_measurable M UNIV (expl_cond_expect M Y X)\n  disc_fct Y\n  point_measurable M (space N) Y\n  B \\<subseteq> space N\n  countable B\n  \\<lbrakk>disc_fct (expl_cond_expect M Y X);\n   point_measurable ?M (space ?N) (expl_cond_expect M Y X)\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect M Y X \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "by (simp add: expl_cond_expect_disc_fct)"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "moreover"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"(indicator (countable_preimages B Y n \\<inter> space M))\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indicator (countable_preimages B Y n \\<inter> space M)\n    \\<in> borel_measurable M", "using \\<open>countable_preimages B Y n \\<inter> space M \\<in> sets M\\<close> borel_measurable_indicator"], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<in> sets M\n  ?A \\<in> sets ?M \\<Longrightarrow> indicator ?A \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. indicator (countable_preimages B Y n \\<inter> space M)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "ultimately"], ["proof (chain)\npicking this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M", "show ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "using borel_measurable_times"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   ?g \\<in> borel_measurable ?M\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x) \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (countable_preimages B Y n \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) dce_prod:\n  assumes \"point_measurable M (space N) Y\"\n   and \"integrable M X\"\n   and \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\nshows \"\\<forall> w. (Y w) \\<in> space N \\<longrightarrow> (expl_cond_expect M Y X) w * measure M ((Y -` {Y w})\\<inter> space M) = integral\\<^sup>L M (\\<lambda>y. (X y) * (indicator ((Y -`{Y w})\\<inter> space M) y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w.\n       Y w \\<in> space N \\<longrightarrow>\n       expl_cond_expect M Y X w *\n       Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n       LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       Y w \\<in> space N \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n       LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       Y w \\<in> space N \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n       LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "assume \"Y w\\<in> space N\""], ["proof (state)\nthis:\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       Y w \\<in> space N \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n       LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "let ?indY = \"(\\<lambda>y. indicator ((Y -`{Y w})\\<inter> space M) y)::'a \\<Rightarrow> real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       Y w \\<in> space N \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n       LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "show \"expl_cond_expect M Y X w * measure M ((Y -` {Y w})\\<inter> space M) = integral\\<^sup>L M (\\<lambda>y. (X y) * ?indY y) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "proof (cases \"AE y in M. ?indY y = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case True"], ["proof (state)\nthis:\n  AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "(* Very long proof, Sledgehammer was lost. Everything had to be detailed *)"], ["proof (state)\nthis:\n  AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"emeasure M ((Y -` {Y w})\\<inter> space M) = 0\""], ["proof (prove)\nusing this:\n  AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (1 subgoal):\n 1. emeasure M (Y -` {Y w} \\<inter> space M) = 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "have \"AE y in M. y \\<notin>  Y -` {Y w} \\<inter> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M", "using True eventually_elim2"], ["proof (prove)\nusing this:\n  AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n  \\<lbrakk>eventually ?P ?F; eventually ?Q ?F;\n   \\<And>i. \\<lbrakk>?P i; ?Q i\\<rbrakk> \\<Longrightarrow> ?R i\\<rbrakk>\n  \\<Longrightarrow> eventually ?R ?F\n\ngoal (1 subgoal):\n 1. AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M", "by auto"], ["proof (state)\nthis:\n  AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "hence \"\\<exists>N\\<in> null_sets M.{x\\<in> space M. \\<not>(x\\<notin> Y -` {Y w} \\<inter> space M)} \\<subseteq> N\""], ["proof (prove)\nusing this:\n  AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. \\<exists>N\\<in>null_sets M.\n       {x \\<in> space M. \\<not> x \\<notin> Y -` {Y w} \\<inter> space M}\n       \\<subseteq> N", "using eventually_ae_filter[of \"\\<lambda>x. x \\<notin> Y -` {Y w} \\<inter> space M\" M]"], ["proof (prove)\nusing this:\n  AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M\n  (AE x in M. x \\<notin> Y -` {Y w} \\<inter> space M) =\n  (\\<exists>N\\<in>null_sets M.\n      {x \\<in> space M. \\<not> x \\<notin> Y -` {Y w} \\<inter> space M}\n      \\<subseteq> N)\n\ngoal (1 subgoal):\n 1. \\<exists>N\\<in>null_sets M.\n       {x \\<in> space M. \\<not> x \\<notin> Y -` {Y w} \\<inter> space M}\n       \\<subseteq> N", "by simp"], ["proof (state)\nthis:\n  \\<exists>N\\<in>null_sets M.\n     {x \\<in> space M. \\<not> x \\<notin> Y -` {Y w} \\<inter> space M}\n     \\<subseteq> N\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "hence \"\\<exists>N\\<in> null_sets M. {x\\<in> space M. x\\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\""], ["proof (prove)\nusing this:\n  \\<exists>N\\<in>null_sets M.\n     {x \\<in> space M. \\<not> x \\<notin> Y -` {Y w} \\<inter> space M}\n     \\<subseteq> N\n\ngoal (1 subgoal):\n 1. \\<exists>N\\<in>null_sets M.\n       {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N", "by simp"], ["proof (state)\nthis:\n  \\<exists>N\\<in>null_sets M.\n     {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "from this"], ["proof (chain)\npicking this:\n  \\<exists>N\\<in>null_sets M.\n     {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N", "obtain N where \"N\\<in> null_sets M\" and \"{x\\<in> space M. x\\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\""], ["proof (prove)\nusing this:\n  \\<exists>N\\<in>null_sets M.\n     {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>N \\<in> null_sets M;\n         {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M}\n         \\<subseteq> N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  N \\<in> null_sets M\n  {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "note Nprops = this"], ["proof (state)\nthis:\n  N \\<in> null_sets M\n  {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "have \"{x\\<in> space M. x\\<in> Y -` {Y w}} \\<subseteq> N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x \\<in> space M. x \\<in> Y -` {Y w}} \\<subseteq> N", "using Nprops"], ["proof (prove)\nusing this:\n  N \\<in> null_sets M\n  {x \\<in> space M. x \\<in> Y -` {Y w} \\<inter> space M} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. {x \\<in> space M. x \\<in> Y -` {Y w}} \\<subseteq> N", "by auto"], ["proof (state)\nthis:\n  {x \\<in> space M. x \\<in> Y -` {Y w}} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "hence \"emeasure M {x\\<in> space M. x\\<in> Y -` {Y w}} \\<le> emeasure M N\""], ["proof (prove)\nusing this:\n  {x \\<in> space M. x \\<in> Y -` {Y w}} \\<subseteq> N\n\ngoal (1 subgoal):\n 1. emeasure M {x \\<in> space M. x \\<in> Y -` {Y w}} \\<le> emeasure M N", "by (simp add: emeasure_mono Nprops(1) null_setsD2)"], ["proof (state)\nthis:\n  emeasure M {x \\<in> space M. x \\<in> Y -` {Y w}} \\<le> emeasure M N\n\ngoal (1 subgoal):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) = 0", "thus ?thesis"], ["proof (prove)\nusing this:\n  emeasure M {x \\<in> space M. x \\<in> Y -` {Y w}} \\<le> emeasure M N\n\ngoal (1 subgoal):\n 1. emeasure M (Y -` {Y w} \\<inter> space M) = 0", "by (metis (no_types, lifting) Collect_cong Int_def Nprops(1) le_zero_eq null_setsD1)"], ["proof (state)\nthis:\n  emeasure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  emeasure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"enn2real (emeasure M ((Y -` {Y w})\\<inter> space M)) = 0\""], ["proof (prove)\nusing this:\n  emeasure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. enn2real (emeasure M (Y -` {Y w} \\<inter> space M)) = 0", "by simp"], ["proof (state)\nthis:\n  enn2real (emeasure M (Y -` {Y w} \\<inter> space M)) = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"measure M ((Y -` {Y w})\\<inter> space M) = 0\""], ["proof (prove)\nusing this:\n  enn2real (emeasure M (Y -` {Y w} \\<inter> space M)) = 0\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0", "unfolding measure_def"], ["proof (prove)\nusing this:\n  enn2real (emeasure M (Y -` {Y w} \\<inter> space M)) = 0\n\ngoal (1 subgoal):\n 1. enn2real (emeasure M (Y -` {Y w} \\<inter> space M)) = 0", "by simp"], ["proof (state)\nthis:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence lhs: \"expl_cond_expect M Y X w = 0\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = 0", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) = 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w =\n    0", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "have  zer: \"AE y in M. (X y) * ?indY y = (\\<lambda>y. 0) y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "using True"], ["proof (prove)\nusing this:\n  AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (1 subgoal):\n 1. AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "by auto"], ["proof (state)\nthis:\n  AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence rhs: \"integral\\<^sup>L M  (\\<lambda>y. (X y) * ?indY y) = 0\""], ["proof (prove)\nusing this:\n  AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (1 subgoal):\n 1. LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "have \"\\<forall> w\\<in> space M. 0 \\<le> X w * ?indY w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>wa\\<in>space M.\n       0 \\<le> X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa", "using assms"], ["proof (prove)\nusing this:\n  point_measurable M (space N) Y\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n\ngoal (1 subgoal):\n 1. \\<forall>wa\\<in>space M.\n       0 \\<le> X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa", "by simp"], ["proof (state)\nthis:\n  \\<forall>wa\\<in>space M.\n     0 \\<le> X wa * indicat_real (Y -` {Y w} \\<inter> space M) wa\n\ngoal (1 subgoal):\n 1. AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "have \"integrable M (\\<lambda>y. (X y) * ?indY y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)", "using assms"], ["proof (prove)\nusing this:\n  point_measurable M (space N) Y\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)", "by (metis (mono_tags, lifting) IntI UNIV_I \\<open>Y w \\<in> space N\\<close> image_eqI integrable_cong integrable_real_mult_indicator point_measurable_def)"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n\ngoal (1 subgoal):\n 1. AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "hence \"(\\<lambda>y. (X y) * ?indY y) \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n\ngoal (1 subgoal):\n 1. (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "using zer integral_cong_AE[of \"(\\<lambda>y. (X y) * ?indY y)\" M \"\\<lambda>y. 0\"]"], ["proof (prove)\nusing this:\n  (\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n  \\<in> borel_measurable M\n  AE y in M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n  \\<lbrakk>(\\<lambda>y. X y * indicat_real (Y -` {Y w} \\<inter> space M) y)\n           \\<in> borel_measurable M;\n   (\\<lambda>y. 0) \\<in> borel_measurable M;\n   AE x in M. X x * indicat_real (Y -` {Y w} \\<inter> space M) x =\n              0\\<rbrakk>\n  \\<Longrightarrow> LINT y|M.\n                       X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n                    LINT y|M. 0\n\ngoal (1 subgoal):\n 1. LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0", "by simp"], ["proof (state)\nthis:\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (2 subgoals):\n 1. AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n               0 \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus \"expl_cond_expect M Y X w*measure M ((Y -` {Y w})\\<inter> space M) = integral\\<^sup>L M (\\<lambda>y. (X y) * ?indY y)\""], ["proof (prove)\nusing this:\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "using lhs rhs"], ["proof (prove)\nusing this:\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n  expl_cond_expect M Y X w = 0\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y = 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case False"], ["proof (state)\nthis:\n  \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0)\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"\\<not>(AE y in M. y \\<notin> (Y -`{Y w})\\<inter> space M)\""], ["proof (prove)\nusing this:\n  \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y = 0)\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M)", "by (simp add: indicator_eq_0_iff)"], ["proof (state)\nthis:\n  \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"emeasure M ((Y -` {Y w})\\<inter> space M) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter>\n                                  space M) \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "have \"(Y -` {Y w})\\<inter> space M\\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "by (meson IntI UNIV_I \\<open>Y w \\<in> space N\\<close> assms(1) image_eqI point_measurable_def)"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter>\n                                  space M) \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "have \"(Y -` {Y w})\\<inter> space M \\<notin> null_sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<notin> null_sets M", "using \\<open>\\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M)\\<close> eventually_ae_filter"], ["proof (prove)\nusing this:\n  \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter> space M)\n  almost_everywhere ?M ?P =\n  (\\<exists>N\\<in>null_sets ?M.\n      {x \\<in> space ?M. \\<not> ?P x} \\<subseteq> N)\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<notin> null_sets M", "by blast"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<notin> null_sets M\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. y \\<notin> Y -` {Y w} \\<inter>\n                                  space M) \\<Longrightarrow>\n    emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "thus ?thesis"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<notin> null_sets M\n\ngoal (1 subgoal):\n 1. emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "using \\<open>Y -` {Y w} \\<inter> space M \\<in> sets M\\<close>"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<notin> null_sets M\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "by blast"], ["proof (state)\nthis:\n  emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"measure M ((Y -` {Y w})\\<inter> space M) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  emeasure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0", "by (simp add: emeasure_eq_measure)"], ["proof (state)\nthis:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<not> (AE y in M. indicat_real (Y -` {Y w} \\<inter> space M) y =\n                       0) \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus \"expl_cond_expect M Y X w* measure M ((Y -` {Y w})\\<inter> space M) = integral\\<^sup>L M (\\<lambda>y. (X y) * ?indY y)\""], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "unfolding expl_cond_expect_def img_dce_def"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "using o_apply"], ["proof (prove)\nusing this:\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) \\<noteq> 0\n  (?f \\<circ> ?g) ?x = ?f (?g ?x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>y.\n         if Sigma_Algebra.measure M (Y -` {y} \\<inter> space M) = 0 then 0\n         else (LINT w|M. X w * indicat_real (Y -` {y} \\<inter> space M) w) /\n              Sigma_Algebra.measure M (Y -` {y} \\<inter> space M)) \\<circ>\n     Y)\n     w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by auto"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  expl_cond_expect_const_exp:\n  shows \"integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X w * (indicator (Y -` {Y w} \\<inter> space M)) y) =\n    integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X y * (indicator (Y -` {Y w} \\<inter> space M)) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "let ?ind = \"(indicator (Y -` {Y w} \\<inter> space M))\""], ["proof (state)\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "have \"\\<forall> y\\<in> space M. expl_cond_expect M Y X w * ?ind y = expl_cond_expect M Y X y * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>space M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "assume \"y\\<in> space M\""], ["proof (state)\nthis:\n  y \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "show \"expl_cond_expect M Y X w * ?ind y = expl_cond_expect M Y X y * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "proof (cases \"y\\<in> Y -` {Y w} \\<inter> space M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. y \\<notin> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case False"], ["proof (state)\nthis:\n  y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (2 subgoals):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. y \\<notin> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case True"], ["proof (state)\nthis:\n  y \\<in> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"Y w = Y y\""], ["proof (prove)\nusing this:\n  y \\<in> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. Y w = Y y", "by auto"], ["proof (state)\nthis:\n  Y w = Y y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"expl_cond_expect M Y X w = expl_cond_expect M Y X y\""], ["proof (prove)\nusing this:\n  Y w = Y y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "using expl_cond_expect_const[of Y w y M X]"], ["proof (prove)\nusing this:\n  Y w = Y y\n  Y w = Y y \\<Longrightarrow>\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "by (meson Bochner_Integration.integral_cong)"], ["proof (state)\nthis:\n  LINT y|M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  nn_expl_cond_expect_const_exp:\n  assumes \"\\<forall>w\\<in> space M. 0 \\<le> X w\"\n  shows \"integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X w * (indicator (Y -` {Y w} \\<inter> space M)) y) =\n    integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X y * (indicator (Y -` {Y w} \\<inter> space M)) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "let ?ind = \"(indicator (Y -` {Y w} \\<inter> space M))\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "have forall: \"\\<forall> y\\<in> space M. expl_cond_expect M Y X w * ?ind y = expl_cond_expect M Y X y * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>space M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "assume \"y\\<in> space M\""], ["proof (state)\nthis:\n  y \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "show \"expl_cond_expect M Y X w * ?ind y = expl_cond_expect M Y X y * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "proof (cases \"y\\<in> Y -` {Y w} \\<inter> space M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. y \\<notin> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case False"], ["proof (state)\nthis:\n  y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (2 subgoals):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. y \\<notin> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case True"], ["proof (state)\nthis:\n  y \\<in> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"Y w = Y y\""], ["proof (prove)\nusing this:\n  y \\<in> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. Y w = Y y", "by auto"], ["proof (state)\nthis:\n  Y w = Y y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"expl_cond_expect M Y X w = expl_cond_expect M Y X y\""], ["proof (prove)\nusing this:\n  Y w = Y y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "using expl_cond_expect_const[of Y]"], ["proof (prove)\nusing this:\n  Y w = Y y\n  Y ?w = Y ?y \\<Longrightarrow>\n  expl_cond_expect ?M Y ?X ?w = expl_cond_expect ?M Y ?X ?y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "by blast"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "by (metis (no_types, lifting) forall nn_integral_cong)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) nn_expl_cond_bounded:\n  assumes \"\\<forall>w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"point_measurable M (space N) Y\"\n  and \"w\\<in> space M\"\n  and \"Y w\\<in> space N\"\n  shows \"integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X y * (indicator (Y -` {Y w} \\<inter> space M)) y) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "let ?ind = \"(indicator (Y -` {Y w} \\<inter> space M))::'a\\<Rightarrow>real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "have \"0 \\<le> expl_cond_expect M Y X w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> expl_cond_expect M Y X w", "using assms nn_expl_cond_expect_pos[of M X Y]"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  point_measurable M (space N) Y\n  w \\<in> space M\n  Y w \\<in> space N\n  \\<forall>w\\<in>space M. 0 \\<le> X w \\<Longrightarrow>\n  \\<forall>w\\<in>space M. 0 \\<le> expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. 0 \\<le> expl_cond_expect M Y X w", "by simp"], ["proof (state)\nthis:\n  0 \\<le> expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "have \"integrable M (\\<lambda>y. expl_cond_expect M Y X w * ?ind y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "have eq: \"(Y -`{Y w} \\<inter> space M) \\<inter> space M = (Y -`{Y w} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<inter> space M =\n    Y -` {Y w} \\<inter> space M", "by auto"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<inter> space M = Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "have \"(Y -` {Y w} \\<inter> space M) \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  point_measurable M (space N) Y\n  w \\<in> space M\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. Y -` {Y w} \\<inter> space M \\<in> sets M", "by (simp add: point_measurable_def)"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "moreover"], ["proof (state)\nthis:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "have \"emeasure M (Y -`{Y w} \\<inter> space M) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. emeasure M (Y -` {Y w} \\<inter> space M) < \\<infinity>", "by (simp add: inf.strict_order_iff)"], ["proof (state)\nthis:\n  emeasure M (Y -` {Y w} \\<inter> space M) < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "ultimately"], ["proof (chain)\npicking this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  emeasure M (Y -` {Y w} \\<inter> space M) < \\<infinity>", "have \"integrable M (\\<lambda>y. ?ind y)\""], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  emeasure M (Y -` {Y w} \\<inter> space M) < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M (indicat_real (Y -` {Y w} \\<inter> space M))", "using integrable_indicator_iff[of M \"(Y -`{Y w} \\<inter> space M)\"]"], ["proof (prove)\nusing this:\n  Y -` {Y w} \\<inter> space M \\<in> sets M\n  emeasure M (Y -` {Y w} \\<inter> space M) < \\<infinity>\n  integrable M (indicat_real (Y -` {Y w} \\<inter> space M)) =\n  (Y -` {Y w} \\<inter> space M \\<inter> space M \\<in> sets M \\<and>\n   emeasure M (Y -` {Y w} \\<inter> space M \\<inter> space M) < \\<infinity>)\n\ngoal (1 subgoal):\n 1. integrable M (indicat_real (Y -` {Y w} \\<inter> space M))", "by simp"], ["proof (state)\nthis:\n  integrable M (indicat_real (Y -` {Y w} \\<inter> space M))\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "thus ?thesis"], ["proof (prove)\nusing this:\n  integrable M (indicat_real (Y -` {Y w} \\<inter> space M))\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "using integrable_mult_left_iff[of M \"expl_cond_expect M Y X w\" \"?ind\"]"], ["proof (prove)\nusing this:\n  integrable M (indicat_real (Y -` {Y w} \\<inter> space M))\n  integrable M\n   (\\<lambda>x.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) x) =\n  (expl_cond_expect M Y X w = 0 \\<or>\n   integrable M (indicat_real (Y -` {Y w} \\<inter> space M)))\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>y.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>y.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>y.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "have \"\\<forall>y\\<in> space M. 0 \\<le> expl_cond_expect M Y X w * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>space M.\n       0 \\<le> expl_cond_expect M Y X w *\n               indicat_real (Y -` {Y w} \\<inter> space M) y", "using \\<open>0 \\<le> expl_cond_expect M Y X w\\<close> mult_nonneg_nonneg"], ["proof (prove)\nusing this:\n  0 \\<le> expl_cond_expect M Y X w\n  \\<lbrakk>(0::?'a) \\<le> ?a; (0::?'a) \\<le> ?b\\<rbrakk>\n  \\<Longrightarrow> (0::?'a) \\<le> ?a * ?b\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>space M.\n       0 \\<le> expl_cond_expect M Y X w *\n               indicat_real (Y -` {Y w} \\<inter> space M) y", "by blast"], ["proof (state)\nthis:\n  \\<forall>y\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "hence \"\\<forall>y\\<in> space M. expl_cond_expect M Y X w * ?ind y = norm (expl_cond_expect M Y X w * ?ind y)\""], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>space M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       norm\n        (expl_cond_expect M Y X w *\n         indicat_real (Y -` {Y w} \\<inter> space M) y)", "by auto"], ["proof (state)\nthis:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "hence inf: \"integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X w * ?ind y) < \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "using integrable_iff_bounded[of M \"(\\<lambda>y. expl_cond_expect M Y X w * ?ind y)\"]\n      \\<open>0 \\<le> expl_cond_expect M Y X w\\<close>  real_norm_def nn_integral_cong"], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y)\n  integrable M\n   (\\<lambda>y.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y) =\n  ((\\<lambda>y.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y)\n   \\<in> borel_measurable M \\<and>\n   \\<integral>\\<^sup>+ x. ennreal\n                           (norm\n                             (expl_cond_expect M Y X w *\n                              indicat_real (Y -` {Y w} \\<inter> space M) x))\n                      \\<partial>M\n   < \\<infinity>)\n  0 \\<le> expl_cond_expect M Y X w\n  norm ?r = \\<bar>?r\\<bar>\n  (\\<And>x.\n      x \\<in> space ?M \\<Longrightarrow> ?u x = ?v x) \\<Longrightarrow>\n  integral\\<^sup>N ?M ?u = integral\\<^sup>N ?M ?v\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "by (metis (no_types, lifting) \\<open>integrable M (\\<lambda>y. expl_cond_expect M Y X w * indicator (Y -` {Y w} \\<inter> space M) y)\\<close>)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "have \"integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X y * ?ind y) =\n    integral\\<^sup>N M (\\<lambda>y. expl_cond_expect M Y X w * ?ind y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  point_measurable M (space N) Y\n  w \\<in> space M\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M", "by (simp add: nn_expl_cond_expect_const_exp)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "have \"... < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "using inf"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real (Y -` {Y w} \\<inter> space M) x)\n                       \\<partial>M\n    < \\<infinity>", "."], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real (Y -` {Y w} \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure)  count_prod:\n  fixes Y::\"'a\\<Rightarrow>'b\"\n  assumes \"B\\<subseteq> space N\"\n  and \"point_measurable M (space N) Y\"\n  and \"integrable M X\"\n  and \"\\<forall> w \\<in> space M. 0 \\<le> X w\"\nshows \"\\<forall>i. integral\\<^sup>L M (\\<lambda>y. (X y) * (indicator (countable_preimages B Y i \\<inter> space M)) y) =\n  integral\\<^sup>L M (\\<lambda>y. (expl_cond_expect M Y X y) * (indicator (countable_preimages B Y i \\<inter> space M)) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       LINT y|M.\n          X y *\n          indicat_real (countable_preimages B Y i \\<inter> space M) y =\n       LINT y|M.\n          expl_cond_expect M Y X y *\n          indicat_real (countable_preimages B Y i \\<inter> space M) y", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       LINT y|M.\n          X y *\n          indicat_real (countable_preimages B Y i \\<inter> space M) y =\n       LINT y|M.\n          expl_cond_expect M Y X y *\n          indicat_real (countable_preimages B Y i \\<inter> space M) y", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       LINT y|M.\n          X y *\n          indicat_real (countable_preimages B Y i \\<inter> space M) y =\n       LINT y|M.\n          expl_cond_expect M Y X y *\n          indicat_real (countable_preimages B Y i \\<inter> space M) y", "show \"integral\\<^sup>L M (\\<lambda>y. X y * indicator (countable_preimages B Y i \\<inter> space M) y) =\n         integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X y * indicator (countable_preimages B Y i \\<inter> space M) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "proof (cases \"countable_preimages B Y i \\<inter> space M = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages B Y i \\<inter> space M = {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y\n 2. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "case True"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> space M = {}\n\ngoal (2 subgoals):\n 1. countable_preimages B Y i \\<inter> space M = {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y\n 2. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  countable_preimages B Y i \\<inter> space M = {}\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y i \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "case False"], ["proof (state)\nthis:\n  countable_preimages B Y i \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "from this"], ["proof (chain)\npicking this:\n  countable_preimages B Y i \\<inter> space M \\<noteq> {}", "obtain w where \"w\\<in> countable_preimages B Y i\""], ["proof (prove)\nusing this:\n  countable_preimages B Y i \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        w \\<in> countable_preimages B Y i \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  w \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "hence \"Y w = (from_nat_into B) i\""], ["proof (prove)\nusing this:\n  w \\<in> countable_preimages B Y i\n\ngoal (1 subgoal):\n 1. Y w = from_nat_into B i", "by (meson count_pre_img)"], ["proof (state)\nthis:\n  Y w = from_nat_into B i\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "hence \"Y w \\<in> B\""], ["proof (prove)\nusing this:\n  Y w = from_nat_into B i\n\ngoal (1 subgoal):\n 1. Y w \\<in> B", "proof (cases \"infinite B\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>Y w = from_nat_into B i; infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B\n 2. \\<lbrakk>Y w = from_nat_into B i; \\<not> infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B", "case True"], ["proof (state)\nthis:\n  infinite B\n\ngoal (2 subgoals):\n 1. \\<lbrakk>Y w = from_nat_into B i; infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B\n 2. \\<lbrakk>Y w = from_nat_into B i; \\<not> infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B", "thus ?thesis"], ["proof (prove)\nusing this:\n  infinite B\n\ngoal (1 subgoal):\n 1. Y w \\<in> B", "by (simp add: \\<open>Y w = from_nat_into B i\\<close> from_nat_into infinite_imp_nonempty)"], ["proof (state)\nthis:\n  Y w \\<in> B\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Y w = from_nat_into B i; \\<not> infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Y w = from_nat_into B i; \\<not> infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B", "case False"], ["proof (state)\nthis:\n  \\<not> infinite B\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Y w = from_nat_into B i; \\<not> infinite B\\<rbrakk>\n    \\<Longrightarrow> Y w \\<in> B", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> infinite B\n\ngoal (1 subgoal):\n 1. Y w \\<in> B", "by (metis Finite_Set.card_0_eq \\<open>Y w = from_nat_into B i\\<close> \\<open>w \\<in> countable_preimages B Y i\\<close> countable_preimages_def equals0D from_nat_into gr_implies_not0)"], ["proof (state)\nthis:\n  Y w \\<in> B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Y w \\<in> B\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "let ?ind = \"(indicator (Y -` {Y w} \\<inter> space M))::'a\\<Rightarrow>real\""], ["proof (state)\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "have \"integral\\<^sup>L M (\\<lambda>y. (X y) * (indicator (countable_preimages B Y i \\<inter> space M)) y) = integral\\<^sup>L M (\\<lambda>y. X y * ?ind y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by (metis (no_types, hide_lams) \\<open>Y w = from_nat_into B i\\<close> \\<open>\\<And>thesis. (\\<And>w. w \\<in> countable_preimages B Y i \\<Longrightarrow> thesis) \\<Longrightarrow> thesis\\<close> countable_preimages_def empty_iff)"], ["proof (state)\nthis:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "also"], ["proof (state)\nthis:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "have \"... =\n      expl_cond_expect M Y X w * measure M (Y -` {Y w} \\<inter> space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "using dce_prod[of N Y X]"], ["proof (prove)\nusing this:\n  \\<lbrakk>point_measurable M (space N) Y; integrable M X;\n   \\<forall>w\\<in>space M. 0 \\<le> X w\\<rbrakk>\n  \\<Longrightarrow> \\<forall>w.\n                       Y w \\<in> space N \\<longrightarrow>\n                       expl_cond_expect M Y X w *\n                       Sigma_Algebra.measure M\n                        (Y -` {Y w} \\<inter> space M) =\n                       LINT y|M.\n                          X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)", "by (metis (no_types, lifting) \\<open>Y w \\<in> B\\<close> assms subsetCE)"], ["proof (state)\nthis:\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "also"], ["proof (state)\nthis:\n  LINT y|M. X y * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M)\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "have \"... = expl_cond_expect M Y X w * (integral\\<^sup>L M ?ind)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n    expl_cond_expect M Y X w *\n    integral\\<^sup>L M (indicat_real (Y -` {Y w} \\<inter> space M))", "by auto"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n  expl_cond_expect M Y X w *\n  integral\\<^sup>L M (indicat_real (Y -` {Y w} \\<inter> space M))\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "also"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  Sigma_Algebra.measure M (Y -` {Y w} \\<inter> space M) =\n  expl_cond_expect M Y X w *\n  integral\\<^sup>L M (indicat_real (Y -` {Y w} \\<inter> space M))\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "have \"... = integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X w * ?ind y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    integral\\<^sup>L M (indicat_real (Y -` {Y w} \\<inter> space M)) =\n    LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "by auto"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  integral\\<^sup>L M (indicat_real (Y -` {Y w} \\<inter> space M)) =\n  LINT y|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "also"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w *\n  integral\\<^sup>L M (indicat_real (Y -` {Y w} \\<inter> space M)) =\n  LINT y|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "have \"... = integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X y * ?ind y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "have \"\\<forall> y\\<in> space M. expl_cond_expect M Y X w * ?ind y = expl_cond_expect M Y X y * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>y\\<in>space M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "assume \"y\\<in> space M\""], ["proof (state)\nthis:\n  y \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "show \"expl_cond_expect M Y X w * ?ind y = expl_cond_expect M Y X y * ?ind y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "proof (cases \"y\\<in> Y -` {Y w} \\<inter> space M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. y \\<notin> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case False"], ["proof (state)\nthis:\n  y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (2 subgoals):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n 2. y \\<notin> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  y \\<notin> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "case True"], ["proof (state)\nthis:\n  y \\<in> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"Y w = Y y\""], ["proof (prove)\nusing this:\n  y \\<in> Y -` {Y w} \\<inter> space M\n\ngoal (1 subgoal):\n 1. Y w = Y y", "by auto"], ["proof (state)\nthis:\n  Y w = Y y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "hence \"expl_cond_expect M Y X w = expl_cond_expect M Y X y\""], ["proof (prove)\nusing this:\n  Y w = Y y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "using expl_cond_expect_const[of Y]"], ["proof (prove)\nusing this:\n  Y w = Y y\n  Y ?w = Y ?y \\<Longrightarrow>\n  expl_cond_expect ?M Y ?X ?w = expl_cond_expect ?M Y ?X ?y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w = expl_cond_expect M Y X y", "by blast"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. y \\<in> Y -` {Y w} \\<inter> space M \\<Longrightarrow>\n    expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X w = expl_cond_expect M Y X y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X w *\n    indicat_real (Y -` {Y w} \\<inter> space M) y =\n    expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y", "by simp"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  expl_cond_expect M Y X w * indicat_real (Y -` {Y w} \\<inter> space M) y =\n  expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>y\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y", "by (meson Bochner_Integration.integral_cong)"], ["proof (state)\nthis:\n  LINT y|M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT y|M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "also"], ["proof (state)\nthis:\n  LINT y|M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y * indicat_real (Y -` {Y w} \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "have \"... = integral\\<^sup>L M (\\<lambda>y. expl_cond_expect M Y X y * indicator (countable_preimages B Y i \\<inter> space M) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (Y -` {Y w} \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "by (metis (no_types, hide_lams) \\<open>Y w = from_nat_into B i\\<close> \\<open>\\<And>thesis. (\\<And>w. w \\<in> countable_preimages B Y i \\<Longrightarrow> thesis) \\<Longrightarrow> thesis\\<close> countable_preimages_def empty_iff)"], ["proof (state)\nthis:\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (Y -` {Y w} \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y i \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. countable_preimages B Y i \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "finally"], ["proof (chain)\npicking this:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y i \\<inter> space M) y", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y i \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y i \\<inter> space M) y", "."], ["proof (state)\nthis:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y i \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y i \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y i \\<inter> space M) y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) count_pre_integrable:\n  assumes \"point_measurable M (space N) Y\"\n  and \"disc_fct Y\"\n  and \"B\\<subseteq> space N\"\n  and \"countable B\"\n  and \"integrable M X\"\n  and \"\\<forall> w \\<in> space M. 0 \\<le> X w\"\nshows \"integrable M (\\<lambda>w. expl_cond_expect M Y X w * indicator (countable_preimages B Y n \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "have \"integral\\<^sup>L M (\\<lambda>y. (X y) * (indicator (countable_preimages B Y n \\<inter> space M)) y) =\n  integral\\<^sup>L M (\\<lambda>y. (expl_cond_expect M Y X y) * (indicator (countable_preimages B Y n \\<inter> space M)) y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT y|M.\n       X y * indicat_real (countable_preimages B Y n \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y n \\<inter> space M) y", "using assms count_prod"], ["proof (prove)\nusing this:\n  point_measurable M (space N) Y\n  disc_fct Y\n  B \\<subseteq> space N\n  countable B\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  \\<lbrakk>?B \\<subseteq> space ?N; point_measurable M (space ?N) ?Y;\n   integrable M ?X; \\<forall>w\\<in>space M. 0 \\<le> ?X w\\<rbrakk>\n  \\<Longrightarrow> \\<forall>i.\n                       LINT y|M.\n                          ?X y *\n                          indicat_real\n                           (countable_preimages ?B ?Y i \\<inter> space M)\n                           y =\n                       LINT y|M.\n                          expl_cond_expect M ?Y ?X y *\n                          indicat_real\n                           (countable_preimages ?B ?Y i \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. LINT y|M.\n       X y * indicat_real (countable_preimages B Y n \\<inter> space M) y =\n    LINT y|M.\n       expl_cond_expect M Y X y *\n       indicat_real (countable_preimages B Y n \\<inter> space M) y", "by blast"], ["proof (state)\nthis:\n  LINT y|M.\n     X y * indicat_real (countable_preimages B Y n \\<inter> space M) y =\n  LINT y|M.\n     expl_cond_expect M Y X y *\n     indicat_real (countable_preimages B Y n \\<inter> space M) y\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "have \"\\<forall>w \\<in> space M. 0 \\<le> (expl_cond_expect M Y X w) * (indicator (countable_preimages B Y n \\<inter> space M)) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       0 \\<le> expl_cond_expect M Y X w *\n               indicat_real (countable_preimages B Y n \\<inter> space M) w", "by (simp add: assms nn_expl_cond_expect_pos)"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (countable_preimages B Y n \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "have \"countable_preimages B Y n \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<in> sets M", "using count_pre_meas[of M] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>point_measurable M (space ?N) ?Y; ?B \\<subseteq> space ?N;\n   countable ?B\\<rbrakk>\n  \\<Longrightarrow> \\<forall>i.\n                       countable_preimages ?B ?Y i \\<inter> space M\n                       \\<in> sets M\n  point_measurable M (space N) Y\n  disc_fct Y\n  B \\<subseteq> space N\n  countable B\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<in> sets M", "by auto"], ["proof (state)\nthis:\n  countable_preimages B Y n \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "hence \"integrable M (\\<lambda>w. X w * indicator (countable_preimages B Y n \\<inter> space M) w)\""], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         X w * indicat_real (countable_preimages B Y n \\<inter> space M) w)", "using assms integrable_real_mult_indicator"], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<in> sets M\n  point_measurable M (space N) Y\n  disc_fct Y\n  B \\<subseteq> space N\n  countable B\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  \\<lbrakk>?A \\<in> sets ?M; integrable ?M ?f\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. ?f x * indicat_real ?A x)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         X w * indicat_real (countable_preimages B Y n \\<inter> space M) w)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       X w * indicat_real (countable_preimages B Y n \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (countable_preimages B Y n \\<inter> space M) w)", "proof (rule integrableI_nonneg)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M\n 2. AE x in M. 0 \\<le> expl_cond_expect M Y X x *\n                       indicat_real\n                        (countable_preimages B Y n \\<inter> space M) x\n 3. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "show \"(\\<lambda>w. expl_cond_expect M Y X w * indicator (countable_preimages B Y n \\<inter> space M) w)\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"(expl_cond_expect M Y X)\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using expl_cond_expect_point_meas[of Y M N X] assms\n          disct_fct_point_measurable[of \"expl_cond_expect M Y X\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct Y; point_measurable M (space N) Y\\<rbrakk>\n  \\<Longrightarrow> point_measurable M UNIV (expl_cond_expect M Y X)\n  point_measurable M (space N) Y\n  disc_fct Y\n  B \\<subseteq> space N\n  countable B\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  \\<lbrakk>disc_fct (expl_cond_expect M Y X);\n   point_measurable ?M (space ?N) (expl_cond_expect M Y X)\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect M Y X \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "by (simp add: expl_cond_expect_disc_fct)"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "moreover"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"(indicator (countable_preimages B Y n \\<inter> space M))\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indicator (countable_preimages B Y n \\<inter> space M)\n    \\<in> borel_measurable M", "using \\<open>countable_preimages B Y n \\<inter> space M \\<in> sets M\\<close> borel_measurable_indicator"], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<in> sets M\n  ?A \\<in> sets ?M \\<Longrightarrow> indicator ?A \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. indicator (countable_preimages B Y n \\<inter> space M)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "ultimately"], ["proof (chain)\npicking this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M", "show ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "using borel_measurable_times"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  indicator (countable_preimages B Y n \\<inter> space M)\n  \\<in> borel_measurable M\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   ?g \\<in> borel_measurable ?M\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x) \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (countable_preimages B Y n \\<inter> space M) w)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (countable_preimages B Y n \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (countable_preimages B Y n \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (2 subgoals):\n 1. AE x in M. 0 \\<le> expl_cond_expect M Y X x *\n                       indicat_real\n                        (countable_preimages B Y n \\<inter> space M) x\n 2. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "show \"AE x in M. 0 \\<le> expl_cond_expect M Y X x * indicator (countable_preimages B Y n \\<inter> space M) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE x in M. 0 \\<le> expl_cond_expect M Y X x *\n                       indicat_real\n                        (countable_preimages B Y n \\<inter> space M) x", "by (simp add: \\<open>\\<forall>w\\<in>space M. 0 \\<le> expl_cond_expect M Y X w * indicator (countable_preimages B Y n \\<inter> space M) w\\<close>)"], ["proof (state)\nthis:\n  AE x in M. 0 \\<le> expl_cond_expect M Y X x *\n                     indicat_real\n                      (countable_preimages B Y n \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "show \"(\\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indicator (countable_preimages B Y n \\<inter> space M) x) \\<partial>M) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "proof (cases \"countable_preimages B Y n \\<inter> space M = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages B Y n \\<inter> space M = {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>\n 2. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "case True"], ["proof (state)\nthis:\n  countable_preimages B Y n \\<inter> space M = {}\n\ngoal (2 subgoals):\n 1. countable_preimages B Y n \\<inter> space M = {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>\n 2. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "thus ?thesis"], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M = {}\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (countable_preimages B Y n \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "case False"], ["proof (state)\nthis:\n  countable_preimages B Y n \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "from this"], ["proof (chain)\npicking this:\n  countable_preimages B Y n \\<inter> space M \\<noteq> {}", "obtain w where \"w\\<in> countable_preimages B Y n\\<inter> space M\""], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        w \\<in> countable_preimages B Y n \\<inter> space M \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  w \\<in> countable_preimages B Y n \\<inter> space M\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "hence \"countable_preimages B Y n = Y -`{Y w}\""], ["proof (prove)\nusing this:\n  w \\<in> countable_preimages B Y n \\<inter> space M\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n = Y -` {Y w}", "by (metis IntD1 count_pre_img countable_preimages_def equals0D)"], ["proof (state)\nthis:\n  countable_preimages B Y n = Y -` {Y w}\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "have \"w\\<in> space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<in> space M", "using False"], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. w \\<in> space M", "using \\<open>w \\<in> countable_preimages B Y n \\<inter> space M\\<close>"], ["proof (prove)\nusing this:\n  countable_preimages B Y n \\<inter> space M \\<noteq> {}\n  w \\<in> countable_preimages B Y n \\<inter> space M\n\ngoal (1 subgoal):\n 1. w \\<in> space M", "by blast"], ["proof (state)\nthis:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "moreover"], ["proof (state)\nthis:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "have \"Y w \\<in> space N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y w \\<in> space N", "by (meson \\<open>w \\<in> space M\\<close> assms(1) assms(2) disct_fct_point_measurable measurable_space)"], ["proof (state)\nthis:\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. countable_preimages B Y n \\<inter> space M \\<noteq> {} \\<Longrightarrow>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "ultimately"], ["proof (chain)\npicking this:\n  w \\<in> space M\n  Y w \\<in> space N", "show ?thesis"], ["proof (prove)\nusing this:\n  w \\<in> space M\n  Y w \\<in> space N\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "using assms nn_expl_cond_bounded[of X N Y]"], ["proof (prove)\nusing this:\n  w \\<in> space M\n  Y w \\<in> space N\n  point_measurable M (space N) Y\n  disc_fct Y\n  B \\<subseteq> space N\n  countable B\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> X w; integrable M X;\n   point_measurable M (space N) Y; ?w \\<in> space M;\n   Y ?w \\<in> space N\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ennreal\n    (expl_cond_expect M Y X x *\n     indicat_real (Y -` {Y ?w} \\<inter> space M) x)\n \\<partial>M\n                    < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "using \\<open>countable_preimages B Y n = Y -` {Y w}\\<close>"], ["proof (prove)\nusing this:\n  w \\<in> space M\n  Y w \\<in> space N\n  point_measurable M (space N) Y\n  disc_fct Y\n  B \\<subseteq> space N\n  countable B\n  integrable M X\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> X w; integrable M X;\n   point_measurable M (space N) Y; ?w \\<in> space M;\n   Y ?w \\<in> space N\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n   ennreal\n    (expl_cond_expect M Y X x *\n     indicat_real (Y -` {Y ?w} \\<inter> space M) x)\n \\<partial>M\n                    < \\<infinity>\n  countable_preimages B Y n = Y -` {Y w}\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (countable_preimages B Y n \\<inter> space M)\n                              x)\n                       \\<partial>M\n    < \\<infinity>", "by presburger"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (countable_preimages B Y n \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (countable_preimages B Y n \\<inter> space M) x)\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (countable_preimages B Y n \\<inter> space M) w)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) nn_cond_expl_is_cond_exp_tmp:\n  assumes \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space M') Y\"\nshows \"\\<forall> A \\<in> sets M'. integrable M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A)\\<inter> (space M)) w)) \\<and>\n  integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets M'.\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "fix A"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "assume \"A \\<in> sets M'\""], ["proof (state)\nthis:\n  A \\<in> sets M'\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?imA = \"A \\<inter> (range Y)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"countable ?imA\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable (A \\<inter> range Y)", "using assms disc_fct_def"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n  disc_fct ?f \\<equiv> countable (range ?f)\n\ngoal (1 subgoal):\n 1. countable (A \\<inter> range Y)", "by blast"], ["proof (state)\nthis:\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"Y -`A = Y -`?imA\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` A = Y -` (A \\<inter> range Y)", "by auto"], ["proof (state)\nthis:\n  Y -` A = Y -` (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "define prY where \"prY = countable_preimages ?imA Y\""], ["proof (state)\nthis:\n  prY = countable_preimages (A \\<inter> range Y) Y\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have un: \"Y -`?imA = (\\<Union> i. prY i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) = \\<Union> (range prY)", "using \\<open>countable ?imA\\<close>"], ["proof (prove)\nusing this:\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) = \\<Union> (range prY)", "by (metis count_pre_union_img prY_def)"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) = \\<Union> (range prY)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"(Y -`?imA) \\<inter> (space M) = (\\<Union> i. prY i) \\<inter> (space M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M =\n    \\<Union> (range prY) \\<inter> space M", "using \\<open>Y -`A = Y -`?imA\\<close> un"], ["proof (prove)\nusing this:\n  Y -` A = Y -` (A \\<inter> range Y)\n  Y -` (A \\<inter> range Y) = \\<Union> (range prY)\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M =\n    \\<Union> (range prY) \\<inter> space M", "by simp"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  \\<Union> (range prY) \\<inter> space M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  \\<Union> (range prY) \\<inter> space M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = (\\<Union> i. (prY i) \\<inter> (space M))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (range prY) \\<inter> space M =\n    (\\<Union>i. prY i \\<inter> space M)", "by blast"], ["proof (state)\nthis:\n  \\<Union> (range prY) \\<inter> space M =\n  (\\<Union>i. prY i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "finally"], ["proof (chain)\npicking this:\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  (\\<Union>i. prY i \\<inter> space M)", "have eq2: \"(Y -`?imA) \\<inter> (space M) = (\\<Union> i. (prY i) \\<inter> (space M))\""], ["proof (prove)\nusing this:\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  (\\<Union>i. prY i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M =\n    (\\<Union>i. prY i \\<inter> space M)", "."], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  (\\<Union>i. prY i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "define indpre::\"nat \\<Rightarrow> 'a \\<Rightarrow> real\" where \"indpre = (\\<lambda> i x. (indicator ((prY i) \\<inter> (space M))) x)\""], ["proof (state)\nthis:\n  indpre = (\\<lambda>i. indicat_real (prY i \\<inter> space M))\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"\\<forall> i. indpre i \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. indpre i \\<in> borel_measurable M", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. indpre i \\<in> borel_measurable M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. indpre i \\<in> borel_measurable M", "show \"indpre i \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indpre i \\<in> borel_measurable M", "unfolding indpre_def prY_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. indicat_real\n     (countable_preimages (A \\<inter> range Y) Y i \\<inter> space M)\n    \\<in> borel_measurable M", "proof (rule borel_measurable_indicator, cases \"countable_preimages (A \\<inter> range Y) Y i \\<inter> space M = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M =\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M\n 2. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "case True"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M = {}\n\ngoal (2 subgoals):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M =\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M\n 2. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "thus \"countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M = {}\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "case False"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "from this"], ["proof (chain)\npicking this:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq> {}", "obtain x where \"x\\<in> countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\""], ["proof (prove)\nusing this:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        x \\<in> countable_preimages (A \\<inter> range Y) Y i \\<inter>\n                space M \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x \\<in> countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "hence \"Y x \\<in> space M'\""], ["proof (prove)\nusing this:\n  x \\<in> countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n\ngoal (1 subgoal):\n 1. Y x \\<in> space M'", "by (metis Int_iff UN_I \\<open>A \\<in> sets M'\\<close> \\<open>prY \\<equiv> countable_preimages (A \\<inter> range Y) Y\\<close> imageE\n                 rangeI sets.sets_into_space subset_eq un vimage_eq)"], ["proof (state)\nthis:\n  Y x \\<in> space M'\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "thus \"countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  Y x \\<in> space M'\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "by (metis IntE IntI \\<open>x \\<in> countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\\<close> assms(4)\n                 count_pre_img countable_preimages_def empty_iff point_measurable_def rangeI)"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  indpre i \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. indpre i \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"\\<forall>i. integrable M (\\<lambda>w. (X w) * indpre i w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i. integrable M (\\<lambda>w. X w * indpre i w)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. integrable M (\\<lambda>w. X w * indpre i w)", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. integrable M (\\<lambda>w. X w * indpre i w)", "show \"integrable M (\\<lambda>w. (X w) * indpre i w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. X w * indpre i w)", "unfolding indpre_def prY_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         X w *\n         indicat_real\n          (countable_preimages (A \\<inter> range Y) Y i \\<inter> space M) w)", "proof (rule integrable_real_mult_indicator)"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M\n 2. integrable M X", "show \"countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "proof (cases \"countable_preimages (A \\<inter> range Y) Y i = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. countable_preimages (A \\<inter> range Y) Y i = {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M\n 2. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "case True"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i = {}\n\ngoal (2 subgoals):\n 1. countable_preimages (A \\<inter> range Y) Y i = {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M\n 2. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "thus \"countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\""], ["proof (prove)\nusing this:\n  countable_preimages (A \\<inter> range Y) Y i = {}\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "by (simp add: True)"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "case False"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "hence \"Y -` {(from_nat_into (A \\<inter> range Y)) i} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  countable_preimages (A \\<inter> range Y) Y i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. Y -` {from_nat_into (A \\<inter> range Y) i} \\<noteq> {}", "unfolding countable_preimages_def"], ["proof (prove)\nusing this:\n  (if infinite (A \\<inter> range Y) \\<or>\n      finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y)\n   then Y -` {from_nat_into (A \\<inter> range Y) i} else {}) \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. Y -` {from_nat_into (A \\<inter> range Y) i} \\<noteq> {}", "by meson"], ["proof (state)\nthis:\n  Y -` {from_nat_into (A \\<inter> range Y) i} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "have \"(infinite (A \\<inter> range Y)) \\<or> (finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infinite (A \\<inter> range Y) \\<or>\n    finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y)", "using False"], ["proof (prove)\nusing this:\n  countable_preimages (A \\<inter> range Y) Y i \\<noteq> {}\n\ngoal (1 subgoal):\n 1. infinite (A \\<inter> range Y) \\<or>\n    finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y)", "unfolding countable_preimages_def"], ["proof (prove)\nusing this:\n  (if infinite (A \\<inter> range Y) \\<or>\n      finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y)\n   then Y -` {from_nat_into (A \\<inter> range Y) i} else {}) \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. infinite (A \\<inter> range Y) \\<or>\n    finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y)", "by meson"], ["proof (state)\nthis:\n  infinite (A \\<inter> range Y) \\<or>\n  finite (A \\<inter> range Y) \\<and> i < card (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<noteq>\n    {} \\<Longrightarrow>\n    countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M\n    \\<in> sets M", "by (metis \\<open>A \\<in> sets M'\\<close> \\<open>countable (A \\<inter> range Y)\\<close> assms(4) count_pre_meas le_inf_iff\n               range_from_nat_into sets.Int_space_eq1 sets.empty_sets sets.sets_into_space subset_range_from_nat_into)"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M X", "show \"integrable M X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M X", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n\ngoal (1 subgoal):\n 1. integrable M X", "by simp"], ["proof (state)\nthis:\n  integrable M X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. X w * indpre i w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i. integrable M (\\<lambda>w. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence prod_bm: \"\\<forall> i. (\\<lambda>w. (X w) * indpre i w) \\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  \\<forall>i. integrable M (\\<lambda>w. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. \\<forall>i. (\\<lambda>w. X w * indpre i w) \\<in> borel_measurable M", "by (simp add: assms(2) borel_measurable_integrable borel_measurable_times)"], ["proof (state)\nthis:\n  \\<forall>i. (\\<lambda>w. X w * indpre i w) \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have posprod: \"\\<forall> i w. 0 \\<le> (X w) * indpre i w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i w. 0 \\<le> X w * indpre i w", "proof (intro allI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i w. 0 \\<le> X w * indpre i w", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i w. 0 \\<le> X w * indpre i w", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i w. 0 \\<le> X w * indpre i w", "show \"0 \\<le> (X w) * indpre i w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> X w * indpre i w", "by (metis IntE assms(1) indicator_pos_le indicator_simps(2) indpre_def mult_eq_0_iff mult_sign_intros(1))"], ["proof (state)\nthis:\n  0 \\<le> X w * indpre i w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i w. 0 \\<le> X w * indpre i w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?indA = \"indicator ((Y -`(A \\<inter> range Y))\\<inter> (space M))::'a\\<Rightarrow>real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"\\<forall> i j. i \\<noteq> j \\<longrightarrow> ((prY i) \\<inter> (space M)) \\<inter> ((prY j) \\<inter> (space M)) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i j.\n       i \\<noteq> j \\<longrightarrow>\n       prY i \\<inter> space M \\<inter> (prY j \\<inter> space M) = {}", "by (simp add: \\<open>countable (A \\<inter> range Y)\\<close> \\<open>prY \\<equiv> countable_preimages (A \\<inter> range Y) Y\\<close> count_pre_disj inf_commute inf_sup_aci(3))"], ["proof (state)\nthis:\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     prY i \\<inter> space M \\<inter> (prY j \\<inter> space M) = {}\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence sumind: \"\\<forall>x. (\\<lambda>i. indpre i x) sums ?indA x\""], ["proof (prove)\nusing this:\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     prY i \\<inter> space M \\<inter> (prY j \\<inter> space M) = {}\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. indpre i x) sums\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x", "using \\<open>countable ?imA\\<close> eq2"], ["proof (prove)\nusing this:\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     prY i \\<inter> space M \\<inter> (prY j \\<inter> space M) = {}\n  countable (A \\<inter> range Y)\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  (\\<Union>i. prY i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. indpre i x) sums\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x", "unfolding prY_def indpre_def"], ["proof (prove)\nusing this:\n  \\<forall>i j.\n     i \\<noteq> j \\<longrightarrow>\n     countable_preimages (A \\<inter> range Y) Y i \\<inter> space M \\<inter>\n     (countable_preimages (A \\<inter> range Y) Y j \\<inter> space M) =\n     {}\n  countable (A \\<inter> range Y)\n  Y -` (A \\<inter> range Y) \\<inter> space M =\n  (\\<Union>i. countable_preimages (A \\<inter> range Y) Y i \\<inter> space M)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i.\n           indicat_real\n            (countable_preimages (A \\<inter> range Y) Y i \\<inter> space M)\n            x) sums\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x", "by (metis indicator_sums)"], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<lambda>i. indpre i x) sums\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence sumxlim: \"\\<forall>x. (\\<lambda>i. (X x) * indpre i x::real) sums ((X x) * indicator ((Y -`?imA) \\<inter> (space M)) x)\""], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. indpre i x) sums\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. X x * indpre i x) sums\n       (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "using \\<open>countable ?imA\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. indpre i x) sums\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. X x * indpre i x) sums\n       (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "unfolding prY_def"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. indpre i x) sums\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. X x * indpre i x) sums\n       (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "using sums_mult"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. indpre i x) sums\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  countable (A \\<inter> range Y)\n  ?f sums ?a \\<Longrightarrow> (\\<lambda>n. ?c * ?f n) sums (?c * ?a)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. X x * indpre i x) sums\n       (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<lambda>i. X x * indpre i x) sums\n     (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence sum: \"\\<forall>x. (\\<Sum> i.((X x) * indpre i x)::real) = (X x) * indicator ((Y -`?imA) \\<inter> (space M)) x\""], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. X x * indpre i x) sums\n     (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<Sum>i. X x * indpre i x) =\n       X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x", "by (metis sums_unique)"], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence b: \"\\<forall> w. 0 \\<le> (\\<Sum> i.((X w) * indpre i w))\""], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. \\<forall>w. 0 \\<le> (\\<Sum>i. X w * indpre i w)", "using suminf_nonneg"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  \\<lbrakk>summable ?f; \\<And>n. (0::?'a) \\<le> ?f n\\<rbrakk>\n  \\<Longrightarrow> (0::?'a) \\<le> suminf ?f\n\ngoal (1 subgoal):\n 1. \\<forall>w. 0 \\<le> (\\<Sum>i. X w * indpre i w)", "by (metis \\<open>\\<forall>x. (\\<lambda>i. X x * indpre i x) sums (X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x)\\<close> posprod summable_def)"], ["proof (state)\nthis:\n  \\<forall>w. 0 \\<le> (\\<Sum>i. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have sumcondlim: \"\\<forall>x. (\\<lambda>i. (expl_cond_expect M Y X x) * indpre i x::real) sums ((expl_cond_expect M Y X x) * ?indA x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n       (expl_cond_expect M Y X x *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "using \\<open>countable ?imA\\<close>"], ["proof (prove)\nusing this:\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n       (expl_cond_expect M Y X x *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "unfolding prY_def"], ["proof (prove)\nusing this:\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n       (expl_cond_expect M Y X x *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "using sums_mult sumind"], ["proof (prove)\nusing this:\n  countable (A \\<inter> range Y)\n  ?f sums ?a \\<Longrightarrow> (\\<lambda>n. ?c * ?f n) sums (?c * ?a)\n  \\<forall>x.\n     (\\<lambda>i. indpre i x) sums\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n       (expl_cond_expect M Y X x *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)", "by blast"], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n     (expl_cond_expect M Y X x *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"integrable M (\\<lambda>w. (X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule integrable_real_mult_indicator)"], ["proof (state)\ngoal (2 subgoals):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n 2. integrable M X", "show \"Y -` (A\\<inter> range Y) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "using \\<open>A \\<in> sets M'\\<close> assms(3) assms(4) disct_fct_point_measurable measurable_sets"], ["proof (prove)\nusing this:\n  A \\<in> sets M'\n  disc_fct Y\n  point_measurable M (space M') Y\n  \\<lbrakk>disc_fct ?f; point_measurable ?M (space ?N) ?f\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n  \\<lbrakk>?f \\<in> ?M \\<rightarrow>\\<^sub>M ?A; ?S \\<in> sets ?A\\<rbrakk>\n  \\<Longrightarrow> ?f -` ?S \\<inter> space ?M \\<in> sets ?M\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by (metis \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close>)"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M X", "show \"integrable M X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M X", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n\ngoal (1 subgoal):\n 1. integrable M X", "by simp"], ["proof (state)\nthis:\n  integrable M X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence intsum: \"integrable M (\\<lambda>w. (\\<Sum>i. ((X w) * indpre i w)))\""], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. \\<Sum>i. X w * indpre i w)", "using sum\n       integrable_cong[of M M \"\\<lambda> w.(X w) * (indicator ((Y -`A)\\<inter> (space M)) w)\" \"\\<lambda>w. (\\<Sum> i.((X w) * indpre i w))\"]"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  \\<lbrakk>M = M;\n   \\<And>x.\n      x \\<in> space M \\<Longrightarrow>\n      X x * indicat_real (Y -` A \\<inter> space M) x =\n      (\\<Sum>i. X x * indpre i x)\\<rbrakk>\n  \\<Longrightarrow> integrable M\n                     (\\<lambda>w.\n                         X w * indicat_real (Y -` A \\<inter> space M) w) =\n                    integrable M (\\<lambda>w. \\<Sum>i. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. \\<Sum>i. X w * indpre i w)", "using \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close>"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  \\<lbrakk>M = M;\n   \\<And>x.\n      x \\<in> space M \\<Longrightarrow>\n      X x * indicat_real (Y -` A \\<inter> space M) x =\n      (\\<Sum>i. X x * indpre i x)\\<rbrakk>\n  \\<Longrightarrow> integrable M\n                     (\\<lambda>w.\n                         X w * indicat_real (Y -` A \\<inter> space M) w) =\n                    integrable M (\\<lambda>w. \\<Sum>i. X w * indpre i w)\n  Y -` A = Y -` (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. \\<Sum>i. X w * indpre i w)", "by presburger"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. \\<Sum>i. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"integral\\<^sup>L M (\\<lambda>w. (X w) * ?indA w) = integral\\<^sup>L M (\\<lambda>w. (\\<Sum> i.((X w) * indpre i w)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w =\n    LINT w|M. (\\<Sum>i. X w * indpre i w)", "using \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> sum"], ["proof (prove)\nusing this:\n  Y -` A = Y -` (A \\<inter> range Y)\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. LINT w|M.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w =\n    LINT w|M. (\\<Sum>i. X w * indpre i w)", "by auto"], ["proof (state)\nthis:\n  LINT w|M.\n     X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w =\n  LINT w|M. (\\<Sum>i. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  LINT w|M.\n     X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w =\n  LINT w|M. (\\<Sum>i. X w * indpre i w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... =\n      \\<integral>\\<^sup>+ w.   ((\\<Sum> i. ((X w) * indpre i w))) \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. (\\<Sum>i. X w * indpre i w)) =\n    \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M", "using nn_integral_eq_integral"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable ?M ?f; AE x in ?M. 0 \\<le> ?f x\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x. ennreal (?f x) \\<partial>?M =\n                    ennreal (integral\\<^sup>L ?M ?f)\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. (\\<Sum>i. X w * indpre i w)) =\n    \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M", "by (metis (mono_tags, lifting) AE_I2 intsum b  nn_integral_cong)"], ["proof (state)\nthis:\n  ennreal (LINT w|M. (\\<Sum>i. X w * indpre i w)) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  ennreal (LINT w|M. (\\<Sum>i. X w * indpre i w)) =\n  \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"(\\<integral>\\<^sup>+ w.   ((\\<Sum> i. ((X w) * indpre i w))) \\<partial>M) =  \\<integral>\\<^sup>+ w.   ((\\<Sum> i. ennreal ((X w) * indpre i w))) \\<partial>M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M =\n    \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M", "using suminf_ennreal2 summable_def posprod sum sumxlim"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>i. 0 \\<le> ?f i; summable ?f\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>i. ennreal (?f i)) = ennreal (\\<Sum>i. ?f i)\n  summable ?f = (\\<exists>s. ?f sums s)\n  \\<forall>i w. 0 \\<le> X w * indpre i w\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n  \\<forall>x.\n     (\\<lambda>i. X x * indpre i x) sums\n     (X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M =\n    \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>\\<And>i. 0 \\<le> f i; summable f\\<rbrakk>\n                \\<Longrightarrow> (\\<Sum>i. ennreal (f i)) =\n                                  ennreal (\\<Sum>i. f i);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i w. 0 \\<le> X w * indpre i w;\n     \\<forall>x.\n        (\\<Sum>i. X x * indpre i x) =\n        X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x;\n     \\<forall>x.\n        (\\<lambda>i. X x * indpre i x) sums\n        (X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          x)\\<rbrakk>\n    \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n     ennreal (\\<Sum>i. X x * indpre i x)\n   \\<partial>M =\n                      \\<integral>\\<^sup>+ w.\n     (\\<Sum>i. ennreal (X w * indpre i w))\n   \\<partial>M", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>\\<And>i. 0 \\<le> f i; summable f\\<rbrakk>\n                \\<Longrightarrow> (\\<Sum>i. ennreal (f i)) =\n                                  ennreal (\\<Sum>i. f i);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i w. 0 \\<le> X w * indpre i w;\n     \\<forall>x.\n        (\\<Sum>i. X x * indpre i x) =\n        X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x;\n     \\<forall>x.\n        (\\<lambda>i. X x * indpre i x) sums\n        (X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          x)\\<rbrakk>\n    \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n     ennreal (\\<Sum>i. X x * indpre i x)\n   \\<partial>M =\n                      \\<integral>\\<^sup>+ w.\n     (\\<Sum>i. ennreal (X w * indpre i w))\n   \\<partial>M", "fix aa :: 'a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>\\<And>i. 0 \\<le> f i; summable f\\<rbrakk>\n                \\<Longrightarrow> (\\<Sum>i. ennreal (f i)) =\n                                  ennreal (\\<Sum>i. f i);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i w. 0 \\<le> X w * indpre i w;\n     \\<forall>x.\n        (\\<Sum>i. X x * indpre i x) =\n        X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x;\n     \\<forall>x.\n        (\\<lambda>i. X x * indpre i x) sums\n        (X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          x)\\<rbrakk>\n    \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n     ennreal (\\<Sum>i. X x * indpre i x)\n   \\<partial>M =\n                      \\<integral>\\<^sup>+ w.\n     (\\<Sum>i. ennreal (X w * indpre i w))\n   \\<partial>M", "have \"\\<forall>a. ennreal (\\<Sum>n. X a * indpre n a) = (\\<Sum>n. ennreal (X a * indpre n a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a.\n       ennreal (\\<Sum>n. X a * indpre n a) =\n       (\\<Sum>n. ennreal (X a * indpre n a))", "by (metis (full_types) posprod suminf_ennreal2 summable_def sumxlim)"], ["proof (state)\nthis:\n  \\<forall>a.\n     ennreal (\\<Sum>n. X a * indpre n a) =\n     (\\<Sum>n. ennreal (X a * indpre n a))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>\\<And>i. 0 \\<le> f i; summable f\\<rbrakk>\n                \\<Longrightarrow> (\\<Sum>i. ennreal (f i)) =\n                                  ennreal (\\<Sum>i. f i);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i w. 0 \\<le> X w * indpre i w;\n     \\<forall>x.\n        (\\<Sum>i. X x * indpre i x) =\n        X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x;\n     \\<forall>x.\n        (\\<lambda>i. X x * indpre i x) sums\n        (X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          x)\\<rbrakk>\n    \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n     ennreal (\\<Sum>i. X x * indpre i x)\n   \\<partial>M =\n                      \\<integral>\\<^sup>+ w.\n     (\\<Sum>i. ennreal (X w * indpre i w))\n   \\<partial>M", "then"], ["proof (chain)\npicking this:\n  \\<forall>a.\n     ennreal (\\<Sum>n. X a * indpre n a) =\n     (\\<Sum>n. ennreal (X a * indpre n a))", "have \"(\\<integral>\\<^sup>+ a. ennreal (\\<Sum>n. X a * indpre n a) \\<partial>M) = (\\<integral>\\<^sup>+ a. (\\<Sum>n. ennreal (X a * indpre n a)) \\<partial>M) \\<or> ennreal (\\<Sum>n. X aa * indpre n aa) = (\\<Sum>n. ennreal (X aa * indpre n aa))\""], ["proof (prove)\nusing this:\n  \\<forall>a.\n     ennreal (\\<Sum>n. X a * indpre n a) =\n     (\\<Sum>n. ennreal (X a * indpre n a))\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ a. ennreal (\\<Sum>n. X a * indpre n a) \\<partial>M =\n    \\<integral>\\<^sup>+ a. (\\<Sum>n. ennreal (X a * indpre n a))\n                       \\<partial>M \\<or>\n    ennreal (\\<Sum>n. X aa * indpre n aa) =\n    (\\<Sum>n. ennreal (X aa * indpre n aa))", "by metis"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ a. ennreal (\\<Sum>n. X a * indpre n a) \\<partial>M =\n  \\<integral>\\<^sup>+ a. (\\<Sum>n. ennreal (X a * indpre n a))\n                     \\<partial>M \\<or>\n  ennreal (\\<Sum>n. X aa * indpre n aa) =\n  (\\<Sum>n. ennreal (X aa * indpre n aa))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>\\<And>i. 0 \\<le> f i; summable f\\<rbrakk>\n                \\<Longrightarrow> (\\<Sum>i. ennreal (f i)) =\n                                  ennreal (\\<Sum>i. f i);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i w. 0 \\<le> X w * indpre i w;\n     \\<forall>x.\n        (\\<Sum>i. X x * indpre i x) =\n        X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x;\n     \\<forall>x.\n        (\\<lambda>i. X x * indpre i x) sums\n        (X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          x)\\<rbrakk>\n    \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n     ennreal (\\<Sum>i. X x * indpre i x)\n   \\<partial>M =\n                      \\<integral>\\<^sup>+ w.\n     (\\<Sum>i. ennreal (X w * indpre i w))\n   \\<partial>M", "}"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ a. ennreal (\\<Sum>n. X a * indpre n a) \\<partial>M =\n  \\<integral>\\<^sup>+ a. (\\<Sum>n. ennreal (X a * indpre n a))\n                     \\<partial>M \\<or>\n  ennreal (\\<Sum>n. X ?aa2 * indpre n ?aa2) =\n  (\\<Sum>n. ennreal (X ?aa2 * indpre n ?aa2))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>f.\n                \\<lbrakk>\\<And>i. 0 \\<le> f i; summable f\\<rbrakk>\n                \\<Longrightarrow> (\\<Sum>i. ennreal (f i)) =\n                                  ennreal (\\<Sum>i. f i);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i w. 0 \\<le> X w * indpre i w;\n     \\<forall>x.\n        (\\<Sum>i. X x * indpre i x) =\n        X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x;\n     \\<forall>x.\n        (\\<lambda>i. X x * indpre i x) sums\n        (X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          x)\\<rbrakk>\n    \\<Longrightarrow> \\<integral>\\<^sup>+ x.\n     ennreal (\\<Sum>i. X x * indpre i x)\n   \\<partial>M =\n                      \\<integral>\\<^sup>+ w.\n     (\\<Sum>i. ennreal (X w * indpre i w))\n   \\<partial>M", "then"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ a. ennreal (\\<Sum>n. X a * indpre n a) \\<partial>M =\n  \\<integral>\\<^sup>+ a. (\\<Sum>n. ennreal (X a * indpre n a))\n                     \\<partial>M \\<or>\n  ennreal (\\<Sum>n. X ?aa2 * indpre n ?aa2) =\n  (\\<Sum>n. ennreal (X ?aa2 * indpre n ?aa2))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ a. ennreal (\\<Sum>n. X a * indpre n a) \\<partial>M =\n  \\<integral>\\<^sup>+ a. (\\<Sum>n. ennreal (X a * indpre n a))\n                     \\<partial>M \\<or>\n  ennreal (\\<Sum>n. X ?aa2 * indpre n ?aa2) =\n  (\\<Sum>n. ennreal (X ?aa2 * indpre n ?aa2))\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M =\n    \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M", "by presburger"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M =\n  \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M =\n  \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M =\n  \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = (\\<Sum>i. integral\\<^sup>N M ((\\<lambda>i w. (X w) * indpre i w) i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w))\n                       \\<partial>M =\n    (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M)", "proof (intro nn_integral_suminf)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<lambda>x. ennreal (X x * indpre i x)) \\<in> borel_measurable M", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<lambda>x. ennreal (X x * indpre i x)) \\<in> borel_measurable M", "show \"(\\<lambda>x. ennreal (X x * indpre i x))\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal (X x * indpre i x)) \\<in> borel_measurable M", "using measurable_compose_rev measurable_ennreal prod_bm"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f \\<in> ?L \\<rightarrow>\\<^sub>M ?N;\n   ?g \\<in> ?M \\<rightarrow>\\<^sub>M ?L\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?g x))\n                    \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n  ennreal \\<in> borel_measurable borel\n  \\<forall>i. (\\<lambda>w. X w * indpre i w) \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. ennreal (X x * indpre i x)) \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. ennreal (X x * indpre i x)) \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M =\n  (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M =\n  (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = (\\<Sum>i. integral\\<^sup>N M ((\\<lambda>i w. (expl_cond_expect M Y X w) * indpre i w) i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M) =\n    (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M)", "proof (intro suminf_cong)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "have \"A \\<inter> range Y \\<subseteq> space M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<inter> range Y \\<subseteq> space M'", "using \\<open>A \\<in> sets M'\\<close> sets.Int_space_eq1"], ["proof (prove)\nusing this:\n  A \\<in> sets M'\n  ?x \\<in> sets ?M \\<Longrightarrow> space ?M \\<inter> ?x = ?x\n\ngoal (1 subgoal):\n 1. A \\<inter> range Y \\<subseteq> space M'", "by auto"], ["proof (state)\nthis:\n  A \\<inter> range Y \\<subseteq> space M'\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "have \"integral\\<^sup>N M (\\<lambda>w. (X w) * indpre n w) = integral\\<^sup>L M (\\<lambda>w. (X w) * indpre n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n    ennreal (LINT w|M. X w * indpre n w)", "using nn_integral_eq_integral[of M \"\\<lambda>w. (X w) * indpre n w\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable M (\\<lambda>w. X w * indpre n w);\n   AE x in M. 0 \\<le> X x * indpre n x\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x)\n \\<partial>M =\n                    ennreal (LINT w|M. X w * indpre n w)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n    ennreal (LINT w|M. X w * indpre n w)", "by (simp add: \\<open>\\<forall>i. integrable M (\\<lambda>w. X w * indpre i w)\\<close> posprod)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n  ennreal (LINT w|M. X w * indpre n w)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n  ennreal (LINT w|M. X w * indpre n w)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "have \"... = integral\\<^sup>L M (\\<lambda>w. (expl_cond_expect M Y X) w * indpre n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. X w * indpre n w) =\n    ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. X w * indpre n w) =\n    ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)", "have \"integral\\<^sup>L M (\\<lambda>w. X w * indicator (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w) =\n         integral\\<^sup>L M (\\<lambda>w. expl_cond_expect M Y X w * indicator (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       X w *\n       indicat_real\n        (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real\n        (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w", "using count_prod[of \"A\\<inter> range Y\" \"M'\" Y X ] assms \\<open>A \\<inter> range Y \\<subseteq> space M'\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>A \\<inter> range Y \\<subseteq> space M';\n   point_measurable M (space M') Y; integrable M X;\n   \\<forall>w\\<in>space M. 0 \\<le> X w\\<rbrakk>\n  \\<Longrightarrow> \\<forall>i.\n                       LINT y|M.\n                          X y *\n                          indicat_real\n                           (countable_preimages (A \\<inter> range Y) Y\n                             i \\<inter>\n                            space M)\n                           y =\n                       LINT y|M.\n                          expl_cond_expect M Y X y *\n                          indicat_real\n                           (countable_preimages (A \\<inter> range Y) Y\n                             i \\<inter>\n                            space M)\n                           y\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n  A \\<inter> range Y \\<subseteq> space M'\n\ngoal (1 subgoal):\n 1. LINT w|M.\n       X w *\n       indicat_real\n        (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real\n        (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w", "by blast"], ["proof (state)\nthis:\n  LINT w|M.\n     X w *\n     indicat_real\n      (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w *\n     indicat_real\n      (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. X w * indpre n w) =\n    ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)", "thus ?thesis"], ["proof (prove)\nusing this:\n  LINT w|M.\n     X w *\n     indicat_real\n      (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w *\n     indicat_real\n      (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. X w * indpre n w) =\n    ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)", "using \\<open>indpre \\<equiv> \\<lambda>i. indicator (prY i \\<inter> space M)\\<close> prY_def"], ["proof (prove)\nusing this:\n  LINT w|M.\n     X w *\n     indicat_real\n      (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w *\n     indicat_real\n      (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w\n  indpre \\<equiv> \\<lambda>i. indicat_real (prY i \\<inter> space M)\n  prY = countable_preimages (A \\<inter> range Y) Y\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. X w * indpre n w) =\n    ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)", "by presburger"], ["proof (state)\nthis:\n  ennreal (LINT w|M. X w * indpre n w) =\n  ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ennreal (LINT w|M. X w * indpre n w) =\n  ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "also"], ["proof (state)\nthis:\n  ennreal (LINT w|M. X w * indpre n w) =\n  ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "have \"... = integral\\<^sup>N M (\\<lambda>w. (expl_cond_expect M Y X) w * indpre n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "have \"integrable M (\\<lambda>w. (expl_cond_expect M Y X) w * indpre n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. expl_cond_expect M Y X w * indpre n w)", "unfolding indpre_def prY_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real\n          (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w)", "using count_pre_integrable assms \\<open>A \\<inter> range Y \\<subseteq> space M'\\<close> \\<open>countable (A \\<inter> range Y)\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>point_measurable M (space ?N) ?Y; disc_fct ?Y;\n   ?B \\<subseteq> space ?N; countable ?B; integrable M ?X;\n   \\<forall>w\\<in>space M. 0 \\<le> ?X w\\<rbrakk>\n  \\<Longrightarrow> integrable M\n                     (\\<lambda>w.\n                         expl_cond_expect M ?Y ?X w *\n                         indicat_real\n                          (countable_preimages ?B ?Y ?n \\<inter> space M) w)\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n  A \\<inter> range Y \\<subseteq> space M'\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real\n          (countable_preimages (A \\<inter> range Y) Y n \\<inter> space M) w)", "by blast"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. expl_cond_expect M Y X w * indpre n w)\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "moreover"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. expl_cond_expect M Y X w * indpre n w)\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "have \"AE w in M. 0 \\<le> (expl_cond_expect M Y X) w * indpre n w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. 0 \\<le> expl_cond_expect M Y X w * indpre n w", "by (simp add: \\<open>indpre \\<equiv> \\<lambda>i. indicator (prY i \\<inter> space M)\\<close> assms(1) nn_expl_cond_expect_pos)"], ["proof (state)\nthis:\n  AE w in M. 0 \\<le> expl_cond_expect M Y X w * indpre n w\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "ultimately"], ["proof (chain)\npicking this:\n  integrable M (\\<lambda>w. expl_cond_expect M Y X w * indpre n w)\n  AE w in M. 0 \\<le> expl_cond_expect M Y X w * indpre n w", "show ?thesis"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. expl_cond_expect M Y X w * indpre n w)\n  AE w in M. 0 \\<le> expl_cond_expect M Y X w * indpre n w\n\ngoal (1 subgoal):\n 1. ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "by (simp add:nn_integral_eq_integral)"], ["proof (state)\nthis:\n  ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n  \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                     \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ennreal (LINT w|M. expl_cond_expect M Y X w * indpre n w) =\n  \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n       \\<integral>\\<^sup>+ x. ennreal\n                               (expl_cond_expect M Y X x * indpre n x)\n                          \\<partial>M", "finally"], ["proof (chain)\npicking this:\n  \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                     \\<partial>M", "show \"integral\\<^sup>N M (\\<lambda>w. (X w) * indpre n w) = integral\\<^sup>N M (\\<lambda>w. (expl_cond_expect M Y X) w * indpre n w)\""], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                       \\<partial>M", "."], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal (X x * indpre n x) \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre n x)\n                     \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M) =\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M) =\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>N M (\\<lambda>w. \\<Sum>i. ((expl_cond_expect M Y X w) * indpre i w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "have \"(\\<lambda>x. (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x))) =\n      (\\<lambda>x. ennreal (\\<Sum>i. (expl_cond_expect M Y X x * indpre i x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))", "have posex: \"\\<forall> i x. 0 \\<le> (expl_cond_expect M Y X x) * (indpre i x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x", "by (metis IntE \\<open>indpre \\<equiv> \\<lambda>i. indicator (prY i \\<inter> space M)\\<close> assms(1) indicator_pos_le indicator_simps(2) mult_eq_0_iff mult_sign_intros(1) nn_expl_cond_expect_pos)"], ["proof (state)\nthis:\n  \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))", "have \"\\<forall>x. (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =  (ennreal (\\<Sum>i. (expl_cond_expect M Y X x * indpre i x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n       ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n       ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n       ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "show \"(\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =  (ennreal (\\<Sum>i. (expl_cond_expect M Y X x * indpre i x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "using suminf_ennreal2[of \"\\<lambda>i. (expl_cond_expect M Y X x * indpre i x)\"] sumcondlim summable_def posex"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>i. 0 \\<le> expl_cond_expect M Y X x * indpre i x;\n   summable (\\<lambda>i. expl_cond_expect M Y X x * indpre i x)\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>i.\n                        ennreal (expl_cond_expect M Y X x * indpre i x)) =\n                    ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n  \\<forall>x.\n     (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n     (expl_cond_expect M Y X x *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n  summable ?f = (\\<exists>s. ?f sums s)\n  \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x\n\ngoal (1 subgoal):\n 1. (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>\\<And>i.\n                         0 \\<le> expl_cond_expect M Y X x * indpre i x;\n              summable\n               (\\<lambda>i. expl_cond_expect M Y X x * indpre i x)\\<rbrakk>\n             \\<Longrightarrow> (\\<Sum>i.\n                                   ennreal\n                                    (expl_cond_expect M Y X x *\n                                     indpre i x)) =\n                               ennreal\n                                (\\<Sum>i.\n                                    expl_cond_expect M Y X x * indpre i x);\n     \\<forall>x.\n        (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n        (expl_cond_expect M Y X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>i.\n                          ennreal (expl_cond_expect M Y X x * indpre i x)) =\n                      ennreal\n                       (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "have f1: \"summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x)", "using sumcondlim summable_def"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n     (expl_cond_expect M Y X x *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n  summable ?f = (\\<exists>s. ?f sums s)\n\ngoal (1 subgoal):\n 1. summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x)", "by blast"], ["proof (state)\nthis:\n  summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>\\<And>i.\n                         0 \\<le> expl_cond_expect M Y X x * indpre i x;\n              summable\n               (\\<lambda>i. expl_cond_expect M Y X x * indpre i x)\\<rbrakk>\n             \\<Longrightarrow> (\\<Sum>i.\n                                   ennreal\n                                    (expl_cond_expect M Y X x *\n                                     indpre i x)) =\n                               ennreal\n                                (\\<Sum>i.\n                                    expl_cond_expect M Y X x * indpre i x);\n     \\<forall>x.\n        (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n        (expl_cond_expect M Y X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>i.\n                          ennreal (expl_cond_expect M Y X x * indpre i x)) =\n                      ennreal\n                       (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "obtain nn :: nat where\n             \"\\<not> 0 \\<le> expl_cond_expect M Y X x * indpre nn x \\<or> \\<not> summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x) \\<or> ennreal (\\<Sum>n. expl_cond_expect M Y X x * indpre n x) = (\\<Sum>n. ennreal (expl_cond_expect M Y X x * indpre n x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>nn.\n        \\<not> 0 \\<le> expl_cond_expect M Y X x * indpre nn x \\<or>\n        \\<not> summable\n                (\\<lambda>n. expl_cond_expect M Y X x * indpre n x) \\<or>\n        ennreal (\\<Sum>n. expl_cond_expect M Y X x * indpre n x) =\n        (\\<Sum>n.\n            ennreal\n             (expl_cond_expect M Y X x * indpre n x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis (full_types) \\<open>\\<lbrakk>\\<And>i. 0 \\<le> expl_cond_expect M Y X x * indpre i x; summable (\\<lambda>i. expl_cond_expect M Y X x * indpre i x)\\<rbrakk> \\<Longrightarrow> (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) = ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\\<close>)"], ["proof (state)\nthis:\n  \\<not> 0 \\<le> expl_cond_expect M Y X x * indpre nn x \\<or>\n  \\<not> summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x) \\<or>\n  ennreal (\\<Sum>n. expl_cond_expect M Y X x * indpre n x) =\n  (\\<Sum>n. ennreal (expl_cond_expect M Y X x * indpre n x))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>\\<And>i.\n                         0 \\<le> expl_cond_expect M Y X x * indpre i x;\n              summable\n               (\\<lambda>i. expl_cond_expect M Y X x * indpre i x)\\<rbrakk>\n             \\<Longrightarrow> (\\<Sum>i.\n                                   ennreal\n                                    (expl_cond_expect M Y X x *\n                                     indpre i x)) =\n                               ennreal\n                                (\\<Sum>i.\n                                    expl_cond_expect M Y X x * indpre i x);\n     \\<forall>x.\n        (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n        (expl_cond_expect M Y X x *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x);\n     \\<And>f. summable f = (\\<exists>s. f sums s);\n     \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>i.\n                          ennreal (expl_cond_expect M Y X x * indpre i x)) =\n                      ennreal\n                       (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "then"], ["proof (chain)\npicking this:\n  \\<not> 0 \\<le> expl_cond_expect M Y X x * indpre nn x \\<or>\n  \\<not> summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x) \\<or>\n  ennreal (\\<Sum>n. expl_cond_expect M Y X x * indpre n x) =\n  (\\<Sum>n. ennreal (expl_cond_expect M Y X x * indpre n x))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> expl_cond_expect M Y X x * indpre nn x \\<or>\n  \\<not> summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x) \\<or>\n  ennreal (\\<Sum>n. expl_cond_expect M Y X x * indpre n x) =\n  (\\<Sum>n. ennreal (expl_cond_expect M Y X x * indpre n x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "using f1 posex"], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> expl_cond_expect M Y X x * indpre nn x \\<or>\n  \\<not> summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x) \\<or>\n  ennreal (\\<Sum>n. expl_cond_expect M Y X x * indpre n x) =\n  (\\<Sum>n. ennreal (expl_cond_expect M Y X x * indpre n x))\n  summable (\\<lambda>n. expl_cond_expect M Y X x * indpre n x)\n  \\<forall>i x. 0 \\<le> expl_cond_expect M Y X x * indpre i x\n\ngoal (1 subgoal):\n 1. (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)", "by presburger"], ["proof (state)\nthis:\n  (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n  ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n  ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x.\n     (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n     ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n     ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n    (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n  (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n  (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "have \"\\<forall>i. (\\<lambda>w. (expl_cond_expect M Y X w) * indpre i w) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n       \\<in> borel_measurable M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n       \\<in> borel_measurable M", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n       \\<in> borel_measurable M", "using \\<open>\\<forall>i. (indpre i)\\<in> borel_measurable M\\<close> assms(3) assms(4) borel_measurable_times expl_cond_expect_borel_measurable"], ["proof (prove)\nusing this:\n  \\<forall>i. indpre i \\<in> borel_measurable M\n  disc_fct Y\n  point_measurable M (space M') Y\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   ?g \\<in> borel_measurable ?M\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x) \\<in> borel_measurable ?M\n  \\<lbrakk>disc_fct ?Y; point_measurable ?M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect ?M ?Y ?X \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n       \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  \\<forall>i.\n     (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n     \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i.\n     (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n     \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "hence \"\\<And>i. (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre i x))\\<in> borel_measurable M\""], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n     \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre i x))\n       \\<in> borel_measurable M", "using measurable_compose_rev measurable_ennreal"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     (\\<lambda>w. expl_cond_expect M Y X w * indpre i w)\n     \\<in> borel_measurable M\n  \\<lbrakk>?f \\<in> ?L \\<rightarrow>\\<^sub>M ?N;\n   ?g \\<in> ?M \\<rightarrow>\\<^sub>M ?L\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?g x))\n                    \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n  ennreal \\<in> borel_measurable borel\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre i x))\n       \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre ?i x))\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre ?i x))\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "using nn_integral_suminf[of \"(\\<lambda>i w.  (expl_cond_expect M Y X w) * indpre i w)\" M, symmetric]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre ?i x))\n  \\<in> borel_measurable M\n  (\\<And>i.\n      (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre i x))\n      \\<in> borel_measurable M) \\<Longrightarrow>\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. (\\<Sum>i.\n                             ennreal\n                              (expl_cond_expect M Y X x * indpre i x))\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "using \\<open>(\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) = (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre ?i x))\n  \\<in> borel_measurable M\n  (\\<And>i.\n      (\\<lambda>x. ennreal (expl_cond_expect M Y X x * indpre i x))\n      \\<in> borel_measurable M) \\<Longrightarrow>\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. (\\<Sum>i.\n                             ennreal\n                              (expl_cond_expect M Y X x * indpre i x))\n                     \\<partial>M\n  (\\<lambda>x. \\<Sum>i. ennreal (expl_cond_expect M Y X x * indpre i x)) =\n  (\\<lambda>x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x))\n\ngoal (1 subgoal):\n 1. (\\<Sum>i.\n        \\<integral>\\<^sup>+ x. ennreal\n                                (expl_cond_expect M Y X x * indpre i x)\n                           \\<partial>M) =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                     \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  (\\<Sum>i.\n      \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x)\n                         \\<partial>M) =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>N M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M", "using sumcondlim"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     (\\<lambda>i. expl_cond_expect M Y X x * indpre i x) sums\n     (expl_cond_expect M Y X x *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M", "by (metis (no_types, lifting) sums_unique)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (\\<Sum>i. expl_cond_expect M Y X x * indpre i x)\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have scdint: \"integrable M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have rv: \"(\\<lambda>w. (expl_cond_expect M Y X w) * indicator ((Y -`?imA) \\<inter> (space M)) w) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"expl_cond_expect M Y X \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using expl_cond_expect_borel_measurable"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct ?Y; point_measurable ?M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect ?M ?Y ?X \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct ?Y; point_measurable ?M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect ?M ?Y ?X \\<in> borel_measurable ?M\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "moreover"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"(Y -`?imA) \\<inter> (space M) \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by (metis \\<open>A \\<in> sets M'\\<close> \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> assms(3) assms(4) disct_fct_point_measurable measurable_sets)"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "ultimately"], ["proof (chain)\npicking this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "show ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "using borel_measurable_indicator_iff borel_measurable_times"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n  (indicator ?A \\<in> borel_measurable ?M) =\n  (?A \\<inter> space ?M \\<in> sets ?M)\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   ?g \\<in> borel_measurable ?M\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x) \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have born:  \"integral\\<^sup>N M (\\<lambda>w. ennreal (norm (expl_cond_expect M Y X w * ?indA w))) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "have \"integral\\<^sup>N M (\\<lambda>w. ennreal (norm (expl_cond_expect M Y X w * ?indA w))) =\n            integral\\<^sup>N M (\\<lambda>w. ennreal (expl_cond_expect M Y X w * ?indA w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "have \"\\<forall>w\\<in> space M. norm (expl_cond_expect M Y X w * ?indA w) = expl_cond_expect M Y X w * ?indA w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       norm\n        (expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w", "using nn_expl_cond_expect_pos"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space ?M. 0 \\<le> ?X w \\<Longrightarrow>\n  \\<forall>w\\<in>space ?M. 0 \\<le> expl_cond_expect ?M ?Y ?X w\n\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       norm\n        (expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w", "by (simp add: nn_expl_cond_expect_pos assms(1))"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M.\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "by (metis (no_types, lifting) nn_integral_cong)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ w. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n                     \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ w. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ w. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "by (metis (no_types, lifting)\n             \\<open>(\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M) = (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x) \\<partial>M)\\<close>\n             \\<open>(\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x) \\<partial>M) = (\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x) \\<partial>M)\\<close>\n             \\<open>(\\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M) = (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M)\\<close>\n             \\<open>(\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M) = (\\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M)\\<close>\n             \\<open>(\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x) \\<partial>M) = (\\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x) \\<partial>M)\\<close>\n             \\<open>ennreal (integral\\<^sup>L M (\\<lambda>w. \\<Sum>i. X w * indpre i w)) = (\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M)\\<close>\n             ennreal_less_top infinity_ennreal_def)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "show \"integrable M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule iffD2[OF integrable_iff_bounded])"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M \\<and>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "show \"((\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) w) \\<in> borel_measurable M) \\<and>\n          ((\\<integral>\\<^sup>+ x. (ennreal (norm (expl_cond_expect M Y X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x))) \\<partial>M) < \\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M \\<and>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "show \"(\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) w)\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "using rv"], ["proof (prove)\nusing this:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "show \"(\\<integral>\\<^sup>+ x. ennreal (norm (expl_cond_expect M Y X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x)) \\<partial>M) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "using born"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M \\<and>\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "moreover"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have \"\\<forall>w\\<in> space M. 0 \\<le> (expl_cond_expect M Y X w) * indicator ((Y -`?imA) \\<inter> (space M)) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       0 \\<le> expl_cond_expect M Y X w *\n               indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w", "by (simp add: assms(1) nn_expl_cond_expect_pos)"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "ultimately"], ["proof (chain)\npicking this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<forall>w\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w", "show ?thesis"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<forall>w\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "using nn_integral_eq_integral"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<forall>w\\<in>space M.\n     0 \\<le> expl_cond_expect M Y X w *\n             indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n  \\<lbrakk>integrable ?M ?f; AE x in ?M. 0 \\<le> ?f x\\<rbrakk>\n  \\<Longrightarrow> \\<integral>\\<^sup>+ x. ennreal (?f x) \\<partial>?M =\n                    ennreal (integral\\<^sup>L ?M ?f)\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x)\n                       \\<partial>M =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "by (metis (mono_tags, lifting) AE_I2 nn_integral_cong)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n                     \\<partial>M =\n  ennreal\n   (LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (expl_cond_expect M Y X x *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) x)\n                     \\<partial>M =\n  ennreal\n   (LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "finally"], ["proof (chain)\npicking this:\n  ennreal\n   (LINT w|M.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n  ennreal\n   (LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have myeq: \"ennreal (integral\\<^sup>L M (\\<lambda>w. (X w) * ?indA w)) = integral\\<^sup>L M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\nusing this:\n  ennreal\n   (LINT w|M.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n  ennreal\n   (LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "."], ["proof (state)\nthis:\n  ennreal\n   (LINT w|M.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n  ennreal\n   (LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets M' \\<Longrightarrow>\n       integrable M\n        (\\<lambda>w.\n            expl_cond_expect M Y X w *\n            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "thus \"integrable M (\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` A \\<inter> space M) w) \\<and> integral\\<^sup>L M (\\<lambda>w. X w * indicator (Y -` A \\<inter> space M) w) =\n         integral\\<^sup>L M  (\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\nusing this:\n  ennreal\n   (LINT w|M.\n       X w * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n  ennreal\n   (LINT w|M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "have \"0 \\<le> integral\\<^sup>L M (\\<lambda>w. X w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w", "using \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> b sum"], ["proof (prove)\nusing this:\n  Y -` A = Y -` (A \\<inter> range Y)\n  \\<forall>w. 0 \\<le> (\\<Sum>i. X w * indpre i w)\n  \\<forall>x.\n     (\\<Sum>i. X x * indpre i x) =\n     X x * indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) x\n\ngoal (1 subgoal):\n 1. 0 \\<le> LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w", "by fastforce"], ["proof (state)\nthis:\n  0 \\<le> LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "moreover"], ["proof (state)\nthis:\n  0 \\<le> LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "have \"0 \\<le> integral\\<^sup>L M (\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> LINT w|M.\n               expl_cond_expect M Y X w *\n               indicat_real (Y -` A \\<inter> space M) w", "by (simp add:  assms(1) nn_expl_cond_expect_pos)"], ["proof (state)\nthis:\n  0 \\<le> LINT w|M.\n             expl_cond_expect M Y X w *\n             indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "ultimately"], ["proof (chain)\npicking this:\n  0 \\<le> LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w\n  0 \\<le> LINT w|M.\n             expl_cond_expect M Y X w *\n             indicat_real (Y -` A \\<inter> space M) w", "have expeq: \"integral\\<^sup>L M (\\<lambda>w. X w * indicator (Y -` A \\<inter> space M) w) =\n         integral\\<^sup>L M  (\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\nusing this:\n  0 \\<le> LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w\n  0 \\<le> LINT w|M.\n             expl_cond_expect M Y X w *\n             indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "by (metis (mono_tags, lifting) Bochner_Integration.integral_cong \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> ennreal_inj myeq)"], ["proof (state)\nthis:\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "have \"integrable M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have rv: \"(\\<lambda>w. (expl_cond_expect M Y X w) * indicator ((Y -`?imA) \\<inter> (space M)) w) \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"expl_cond_expect M Y X \\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using expl_cond_expect_borel_measurable"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct ?Y; point_measurable ?M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect ?M ?Y ?X \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>disc_fct ?Y; point_measurable ?M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> expl_cond_expect ?M ?Y ?X \\<in> borel_measurable ?M\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space M') Y\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "moreover"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "have \"(Y -`?imA) \\<inter> (space M) \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by (metis \\<open>A \\<in> sets M'\\<close> \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> assms(3) assms(4) disct_fct_point_measurable measurable_sets)"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "ultimately"], ["proof (chain)\npicking this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "show ?thesis"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "using borel_measurable_indicator_iff borel_measurable_times"], ["proof (prove)\nusing this:\n  expl_cond_expect M Y X \\<in> borel_measurable M\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n  (indicator ?A \\<in> borel_measurable ?M) =\n  (?A \\<inter> space ?M \\<in> sets ?M)\n  \\<lbrakk>?f \\<in> borel_measurable ?M;\n   ?g \\<in> borel_measurable ?M\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x * ?g x) \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "have born:  \"integral\\<^sup>N M (\\<lambda>w. ennreal (norm (expl_cond_expect M Y X w * ?indA w))) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "have \"integral\\<^sup>N M (\\<lambda>w. ennreal (norm (expl_cond_expect M Y X w * ?indA w))) =\n              integral\\<^sup>N M (\\<lambda>w. ennreal (expl_cond_expect M Y X w * ?indA w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "have \"\\<forall>w\\<in> space M. norm (expl_cond_expect M Y X w * ?indA w) = expl_cond_expect M Y X w * ?indA w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       norm\n        (expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w", "using nn_expl_cond_expect_pos"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space ?M. 0 \\<le> ?X w \\<Longrightarrow>\n  \\<forall>w\\<in>space ?M. 0 \\<le> expl_cond_expect ?M ?Y ?X w\n\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       norm\n        (expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w", "by (simp add: nn_expl_cond_expect_pos assms(1))"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M.\n     norm\n      (expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M =\n    \\<integral>\\<^sup>+ w. ennreal\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w)\n                       \\<partial>M", "by (metis (no_types, lifting) nn_integral_cong)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ w. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n                     \\<partial>M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ w. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M =\n  \\<integral>\\<^sup>+ w. ennreal\n                          (expl_cond_expect M Y X w *\n                           indicat_real\n                            (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n                     \\<partial>M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ w. ennreal\n                            (norm\n                              (expl_cond_expect M Y X w *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                w))\n                       \\<partial>M\n    < \\<infinity>", "by (metis (no_types, lifting)\n               \\<open>(\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M) = (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x) \\<partial>M)\\<close>\n               \\<open>(\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indpre i x) \\<partial>M) = (\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x) \\<partial>M)\\<close>\n               \\<open>(\\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M) = (\\<Sum>i. \\<integral>\\<^sup>+ x. ennreal (X x * indpre i x) \\<partial>M)\\<close>\n               \\<open>(\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M) = (\\<integral>\\<^sup>+ w. (\\<Sum>i. ennreal (X w * indpre i w)) \\<partial>M)\\<close>\n               \\<open>(\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. expl_cond_expect M Y X x * indpre i x) \\<partial>M) = (\\<integral>\\<^sup>+ x. ennreal (expl_cond_expect M Y X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x) \\<partial>M)\\<close>\n               \\<open>ennreal (integral\\<^sup>L M (\\<lambda>w. \\<Sum>i. X w * indpre i w)) = (\\<integral>\\<^sup>+ x. ennreal (\\<Sum>i. X x * indpre i x) \\<partial>M)\\<close>\n               ennreal_less_top infinity_ennreal_def)"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "show \"integrable M (\\<lambda>w. (expl_cond_expect M Y X w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule iffD2[OF integrable_iff_bounded])"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M \\<and>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "show \"((\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) w) \\<in> borel_measurable M) \\<and>\n            ((\\<integral>\\<^sup>+ x. (ennreal (norm (expl_cond_expect M Y X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x))) \\<partial>M) < \\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M \\<and>\n    \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M\n 2. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "show \"(\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) w)\\<in> borel_measurable M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "using rv"], ["proof (prove)\nusing this:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. (\\<lambda>w.\n        expl_cond_expect M Y X w *\n        indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n    \\<in> borel_measurable M", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "show \"(\\<integral>\\<^sup>+ x. ennreal (norm (expl_cond_expect M Y X x * indicator (Y -` (A \\<inter> range Y) \\<inter> space M) x)) \\<partial>M) < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "using born"], ["proof (prove)\nusing this:\n  \\<integral>\\<^sup>+ w. ennreal\n                          (norm\n                            (expl_cond_expect M Y X w *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              w))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<integral>\\<^sup>+ x. ennreal\n                            (norm\n                              (expl_cond_expect M Y X x *\n                               indicat_real\n                                (Y -` (A \\<inter> range Y) \\<inter> space M)\n                                x))\n                       \\<partial>M\n    < \\<infinity>", "by simp"], ["proof (state)\nthis:\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>w.\n      expl_cond_expect M Y X w *\n      indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  \\<in> borel_measurable M \\<and>\n  \\<integral>\\<^sup>+ x. ennreal\n                          (norm\n                            (expl_cond_expect M Y X x *\n                             indicat_real\n                              (Y -` (A \\<inter> range Y) \\<inter> space M)\n                              x))\n                     \\<partial>M\n  < \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "hence \"integrable M (\\<lambda>w. expl_cond_expect M Y X w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w)", "using \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close>"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  Y -` A = Y -` (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w)", "by presburger"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. ennreal\n     (LINT w|M.\n         X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w) =\n    ennreal\n     (LINT w|M.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M)\n          w) \\<Longrightarrow>\n    integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "thus ?thesis"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "using expeq"], ["proof (prove)\nusing this:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w)\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` A \\<inter> space M) w) \\<and>\n    LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "by simp"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` A \\<inter> space M) w) \\<and>\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` A \\<inter> space M) w) \\<and>\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) nn_expl_cond_exp_integrable:\n  assumes \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"integrable M (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have \"Y-`space N \\<inter> space M = space M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` space N \\<inter> space M = space M", "by (meson assms(3) assms(4) disct_fct_point_measurable inf_absorb2 measurable_space subsetI vimageI)"], ["proof (state)\nthis:\n  Y -` space N \\<inter> space M = space M\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "let ?indA = \"indicator ((Y -`space N)\\<inter> (space M))::'a\\<Rightarrow>real\""], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have \"\\<forall>w\\<in> space M. (?indA w)= (1::real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       indicat_real (Y -` space N \\<inter> space M) w = 1", "by (simp add: \\<open>Y -` space N \\<inter> space M = space M\\<close>)"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M. indicat_real (Y -` space N \\<inter> space M) w = 1\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "hence \"\\<forall>w\\<in> space M. ((expl_cond_expect M Y X) w) * (?indA w) = (expl_cond_expect M Y X) w\""], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. indicat_real (Y -` space N \\<inter> space M) w = 1\n\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` space N \\<inter> space M) w =\n       expl_cond_expect M Y X w", "by simp"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` space N \\<inter> space M) w =\n     expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "moreover"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` space N \\<inter> space M) w =\n     expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have \"integrable M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (?indA w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` space N \\<inter> space M) w)", "using assms\n      nn_cond_expl_is_cond_exp_tmp[of X Y N]"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M. 0 \\<le> X w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> X w; integrable M X; disc_fct Y;\n   point_measurable M (space N) Y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>A\\<in>sets N.\n                       integrable M\n                        (\\<lambda>w.\n                            expl_cond_expect M Y X w *\n                            indicat_real (Y -` A \\<inter> space M) w) \\<and>\n                       LINT w|M.\n                          X w * indicat_real (Y -` A \\<inter> space M) w =\n                       LINT w|M.\n                          expl_cond_expect M Y X w *\n                          indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y X w *\n         indicat_real (Y -` space N \\<inter> space M) w)", "by blast"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` space N \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` space N \\<inter> space M) w =\n     expl_cond_expect M Y X w\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` space N \\<inter> space M) w)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y X w *\n     indicat_real (Y -` space N \\<inter> space M) w =\n     expl_cond_expect M Y X w\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y X w *\n       indicat_real (Y -` space N \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "by (metis (no_types, lifting) integrable_cong)"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y X)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) nn_cond_expl_is_cond_exp:\n  assumes \"\\<forall> w\\<in> space M. 0 \\<le> X w\"\n  and \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "by (metis (mono_tags, lifting) assms nn_cond_expl_is_cond_exp_tmp)"], ["", "lemma (in finite_measure) expl_cond_exp_integrable:\n  assumes \"integrable M X\"\n    and \"disc_fct Y\"\n    and \"point_measurable M (space N) Y\"\n  shows \"integrable M (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "let ?zer = \"\\<lambda>w. 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "let ?Xp = \"\\<lambda>w. max (?zer w) (X w)\""], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "let ?Xn = \"\\<lambda>w. max (?zer 0) (-X w)\""], ["proof (state)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have \"\\<forall>w. X w = ?Xp w - ?Xn w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w. X w = max 0 (X w) - max 0 (- X w)", "by auto"], ["proof (state)\nthis:\n  \\<forall>w. X w = max 0 (X w) - max 0 (- X w)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have ints: \"integrable M ?Xp\" \"integrable M ?Xn\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (X w)) &&&\n    integrable M (\\<lambda>w. max 0 (- X w))", "using integrable_max assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable ?M ?f; integrable ?M ?g\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. max (?f x) (?g x))\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (X w)) &&&\n    integrable M (\\<lambda>w. max 0 (- X w))", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "hence \"integrable M (expl_cond_expect M Y ?Xp)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "using assms nn_expl_cond_exp_integrable"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> ?X w; integrable M ?X;\n   disc_fct ?Y; point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> integrable M (expl_cond_expect M ?Y ?X)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "by (metis max.cobounded1)"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "moreover"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have \"integrable M (expl_cond_expect M Y ?Xn)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "using ints assms nn_expl_cond_exp_integrable"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> ?X w; integrable M ?X;\n   disc_fct ?Y; point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> integrable M (expl_cond_expect M ?Y ?X)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "by (metis max.cobounded1)"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "ultimately"], ["proof (chain)\npicking this:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "have integr: \"integrable M (\\<lambda>w. (expl_cond_expect M Y ?Xp) w - (expl_cond_expect M Y ?Xn) w)\""], ["proof (prove)\nusing this:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))\n\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n         expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w)", "by auto"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "have \"\\<forall>w\\<in> space M. (expl_cond_expect M Y ?Xp) w - (expl_cond_expect M Y ?Xn) w = (expl_cond_expect M Y X) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w\\<in>space M.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "assume \"w\\<in> space M\""], ["proof (state)\nthis:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "hence \"(expl_cond_expect M Y ?Xp) w - (expl_cond_expect M Y ?Xn) w = (expl_cond_expect M Y (\\<lambda>x. ?Xp x - ?Xn x)) w\""], ["proof (prove)\nusing this:\n  w \\<in> space M\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n    expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n    expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w", "using ints"], ["proof (prove)\nusing this:\n  w \\<in> space M\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n    expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n    expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w", "by (simp add: expl_cond_exp_diff)"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n  expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n  expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "also"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n  expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n  expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "have \"... = expl_cond_expect M Y X w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w =\n    expl_cond_expect M Y X w", "using expl_cond_exp_cong \\<open>\\<forall>w. X w = ?Xp w - ?Xn w\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space ?M. ?X w = ?Z w \\<Longrightarrow>\n  \\<forall>w\\<in>space ?M.\n     expl_cond_expect ?M ?Y ?X w = expl_cond_expect ?M ?Y ?Z w\n  \\<forall>w. X w = max 0 (X w) - max 0 (- X w)\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w =\n    expl_cond_expect M Y X w", "by auto"], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w =\n  expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       w \\<in> space M \\<Longrightarrow>\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n       expl_cond_expect M Y X w", "finally"], ["proof (chain)\npicking this:\n  expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n  expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n  expl_cond_expect M Y X w", "show \"(expl_cond_expect M Y ?Xp) w - (expl_cond_expect M Y ?Xn) w = expl_cond_expect M Y X w\""], ["proof (prove)\nusing this:\n  expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n  expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n  expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n    expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n    expl_cond_expect M Y X w", "."], ["proof (state)\nthis:\n  expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n  expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n  expl_cond_expect M Y X w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n     expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n     expl_cond_expect M Y X w\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "using integr"], ["proof (prove)\nusing this:\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w =\n     expl_cond_expect M Y X w\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "by (metis (mono_tags, lifting) integrable_cong)"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y X)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) is_cond_exp:\n  assumes \"integrable M X\"\n  and \"disc_fct  Y\"\n  and \"point_measurable M (space N) Y\"\nshows \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?zer = \"\\<lambda>w. 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?Xp = \"\\<lambda>w. max (?zer w) (X w)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?Xn = \"\\<lambda>w. max (?zer 0) (-X w)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"\\<forall>w. X w = ?Xp w - ?Xn w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>w. X w = max 0 (X w) - max 0 (- X w)", "by auto"], ["proof (state)\nthis:\n  \\<forall>w. X w = max 0 (X w) - max 0 (- X w)\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have ints: \"integrable M ?Xp\" \"integrable M ?Xn\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (X w)) &&&\n    integrable M (\\<lambda>w. max 0 (- X w))", "using integrable_max assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable ?M ?f; integrable ?M ?g\\<rbrakk>\n  \\<Longrightarrow> integrable ?M (\\<lambda>x. max (?f x) (?g x))\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (X w)) &&&\n    integrable M (\\<lambda>w. max 0 (- X w))", "by auto"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "hence posint: \"integrable M (expl_cond_expect M Y ?Xp)\""], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "using assms nn_expl_cond_exp_integrable"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> ?X w; integrable M ?X;\n   disc_fct ?Y; point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> integrable M (expl_cond_expect M ?Y ?X)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "by (metis max.cobounded1)"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have negint: \"integrable M (expl_cond_expect M Y ?Xn)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "using ints assms nn_expl_cond_exp_integrable"], ["proof (prove)\nusing this:\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> ?X w; integrable M ?X;\n   disc_fct ?Y; point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> integrable M (expl_cond_expect M ?Y ?X)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "by (metis max.cobounded1)"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have eqp: \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (?Xp w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n    integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y ?Xp) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n          indicat_real (Y -` A \\<inter> space M) w", "using nn_cond_expl_is_cond_exp[of ?Xp Y N] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> max 0 (X w);\n   integrable M (\\<lambda>w. max 0 (X w)); disc_fct Y;\n   point_measurable M (space N) Y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>A\\<in>sets N.\n                       LINT w|M.\n                          max 0 (X w) *\n                          indicat_real (Y -` A \\<inter> space M) w =\n                       LINT w|M.\n                          expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n                          indicat_real (Y -` A \\<inter> space M) w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n          indicat_real (Y -` A \\<inter> space M) w", "by auto"], ["proof (state)\nthis:\n  \\<forall>A\\<in>sets N.\n     LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w =\n     LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have eqn: \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (?Xn w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n    integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y ?Xn) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n          indicat_real (Y -` A \\<inter> space M) w", "using nn_cond_expl_is_cond_exp[of ?Xn Y N] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>w\\<in>space M. 0 \\<le> max 0 (- X w);\n   integrable M (\\<lambda>w. max 0 (- X w)); disc_fct Y;\n   point_measurable M (space N) Y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>A\\<in>sets N.\n                       LINT w|M.\n                          max 0 (- X w) *\n                          indicat_real (Y -` A \\<inter> space M) w =\n                       LINT w|M.\n                          expl_cond_expect M Y (\\<lambda>w. max 0 (- X w))\n                           w *\n                          indicat_real (Y -` A \\<inter> space M) w\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n          indicat_real (Y -` A \\<inter> space M) w", "by auto"], ["proof (state)\nthis:\n  \\<forall>A\\<in>sets N.\n     LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n     LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "show \"\\<forall> A \\<in> sets N. integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator ((Y -`A)\\<inter> (space M)) w)) =\n    integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets N.\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "fix A"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "assume \"A\\<in> sets N\""], ["proof (state)\nthis:\n  A \\<in> sets N\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?imA = \"A \\<inter> (range Y)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"countable ?imA\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable (A \\<inter> range Y)", "using assms disc_fct_def"], ["proof (prove)\nusing this:\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n  disc_fct ?f \\<equiv> countable (range ?f)\n\ngoal (1 subgoal):\n 1. countable (A \\<inter> range Y)", "by blast"], ["proof (state)\nthis:\n  countable (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"Y -`A = Y -`?imA\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` A = Y -` (A \\<inter> range Y)", "by auto"], ["proof (state)\nthis:\n  Y -` A = Y -` (A \\<inter> range Y)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have yev: \"Y -` (A\\<inter> range Y) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "using \\<open>A \\<in> sets N\\<close> assms(3) assms(2) disct_fct_point_measurable measurable_sets"], ["proof (prove)\nusing this:\n  A \\<in> sets N\n  point_measurable M (space N) Y\n  disc_fct Y\n  \\<lbrakk>disc_fct ?f; point_measurable ?M (space ?N) ?f\\<rbrakk>\n  \\<Longrightarrow> ?f \\<in> ?M \\<rightarrow>\\<^sub>M ?N\n  \\<lbrakk>?f \\<in> ?M \\<rightarrow>\\<^sub>M ?A; ?S \\<in> sets ?A\\<rbrakk>\n  \\<Longrightarrow> ?f -` ?S \\<inter> space ?M \\<in> sets ?M\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by (metis \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close>)"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "let ?indA = \"indicator ((Y -`(A \\<inter> range Y))\\<inter> (space M))::'a\\<Rightarrow>real\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have intp: \"integrable M (\\<lambda>w. (?Xp w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         max 0 (X w) *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule integrable_real_mult_indicator)"], ["proof (state)\ngoal (2 subgoals):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n 2. integrable M (\\<lambda>x. max 0 (X x))", "show \"Y -` (A\\<inter> range Y) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "using yev"], ["proof (prove)\nusing this:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. max 0 (X x))", "show \"integrable M ?Xp\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (X w))", "using assms"], ["proof (prove)\nusing this:\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (X w))", "by simp"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. max 0 (X w))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       max 0 (X w) *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have intn: \"integrable M (\\<lambda>w. (?Xn w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         max 0 (- X w) *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule integrable_real_mult_indicator)"], ["proof (state)\ngoal (2 subgoals):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n 2. integrable M (\\<lambda>x. max 0 (- X x))", "show \"Y -` (A\\<inter> range Y) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "using yev"], ["proof (prove)\nusing this:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>x. max 0 (- X x))", "show \"integrable M ?Xn\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (- X w))", "using assms"], ["proof (prove)\nusing this:\n  integrable M X\n  disc_fct Y\n  point_measurable M (space N) Y\n\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. max 0 (- X w))", "by simp"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       max 0 (- X w) *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have exintp: \"integrable M (\\<lambda>w. (expl_cond_expect M Y ?Xp w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule integrable_real_mult_indicator)"], ["proof (state)\ngoal (2 subgoals):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n 2. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "show \"Y -` (A\\<inter> range Y) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "using yev"], ["proof (prove)\nusing this:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "show \"integrable M (expl_cond_expect M Y ?Xp)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "using posint"], ["proof (prove)\nusing this:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))", "by simp"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have exintn: \"integrable M (\\<lambda>w. (expl_cond_expect M Y ?Xn w) * ?indA w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M\n     (\\<lambda>w.\n         expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n         indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)", "proof (rule integrable_real_mult_indicator)"], ["proof (state)\ngoal (2 subgoals):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n 2. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "show \"Y -` (A\\<inter> range Y) \\<inter> space M \\<in> sets M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "using yev"], ["proof (prove)\nusing this:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M", "by simp"], ["proof (state)\nthis:\n  Y -` (A \\<inter> range Y) \\<inter> space M \\<in> sets M\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "show \"integrable M (expl_cond_expect M Y ?Xn)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "using negint"], ["proof (prove)\nusing this:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))", "by simp"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"integral\\<^sup>L M (\\<lambda>w. X w * indicator (Y -` A \\<inter> space M) w) =\n      integral\\<^sup>L M (\\<lambda>w. (?Xp w - ?Xn w) * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       (max 0 (X w) - max 0 (- X w)) *\n       indicat_real (Y -` A \\<inter> space M) w", "using \\<open>\\<forall>w. X w =?Xp w - ?Xn w\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>w. X w = max 0 (X w) - max 0 (- X w)\n\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       (max 0 (X w) - max 0 (- X w)) *\n       indicat_real (Y -` A \\<inter> space M) w", "by auto"], ["proof (state)\nthis:\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     (max 0 (X w) - max 0 (- X w)) *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     (max 0 (X w) - max 0 (- X w)) *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... =   integral\\<^sup>L M (\\<lambda>w. (?Xp w * indicator (Y -` A \\<inter> space M) w) - ?Xn w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       (max 0 (X w) - max 0 (- X w)) *\n       indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n       max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w", "by (simp add: left_diff_distrib)"], ["proof (state)\nthis:\n  LINT w|M.\n     (max 0 (X w) - max 0 (- X w)) *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n     max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  LINT w|M.\n     (max 0 (X w) - max 0 (- X w)) *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n     max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. (?Xp w * indicator (Y -` A \\<inter> space M) w)) -\n      integral\\<^sup>L M (\\<lambda>w. ?Xn w * indicator (Y -` A \\<inter> space M) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n       max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n    (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w)", "using \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> intp intn"], ["proof (prove)\nusing this:\n  Y -` A = Y -` (A \\<inter> range Y)\n  integrable M\n   (\\<lambda>w.\n       max 0 (X w) *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  integrable M\n   (\\<lambda>w.\n       max 0 (- X w) *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. LINT w|M.\n       max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n       max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n    (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w)", "by auto"], ["proof (state)\nthis:\n  LINT w|M.\n     max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n     max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n  (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  LINT w|M.\n     max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w -\n     max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n  (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y ?Xp) w) * (indicator ((Y -`A) \\<inter> (space M))) w) -\n      integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y ?Xn) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w) =\n    (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w)", "using eqp eqn"], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>sets N.\n     LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w =\n     LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w\n  \\<forall>A\\<in>sets N.\n     LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w =\n     LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w) =\n    (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w)", "by (simp add: \\<open>A \\<in> sets N\\<close>)"], ["proof (state)\nthis:\n  (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w) =\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  (LINT w|M. max 0 (X w) * indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M. max 0 (- X w) * indicat_real (Y -` A \\<inter> space M) w) =\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y ?Xp) w) * (indicator ((Y -`A) \\<inter> (space M))) w -\n      ((expl_cond_expect M Y ?Xn) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w) =\n    LINT w|M.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n       indicat_real (Y -` A \\<inter> space M) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n       indicat_real (Y -` A \\<inter> space M) w", "using \\<open>Y -` A = Y -` (A \\<inter> range Y)\\<close> exintn exintp"], ["proof (prove)\nusing this:\n  Y -` A = Y -` (A \\<inter> range Y)\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n  integrable M\n   (\\<lambda>w.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n       indicat_real (Y -` (A \\<inter> range Y) \\<inter> space M) w)\n\ngoal (1 subgoal):\n 1. (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w) -\n    (LINT w|M.\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n        indicat_real (Y -` A \\<inter> space M) w) =\n    LINT w|M.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n       indicat_real (Y -` A \\<inter> space M) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n       indicat_real (Y -` A \\<inter> space M) w", "by auto"], ["proof (state)\nthis:\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w) =\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w) -\n  (LINT w|M.\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n      indicat_real (Y -` A \\<inter> space M) w) =\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y ?Xp) w - (expl_cond_expect M Y ?Xn) w) * (indicator ((Y -`A) \\<inter> (space M))) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n       indicat_real (Y -` A \\<inter> space M) w -\n       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n       indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n       indicat_real (Y -` A \\<inter> space M) w", "by (simp add: left_diff_distrib)"], ["proof (state)\nthis:\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w -\n     expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y (\\<lambda>x. ?Xp x - ?Xn x) w) * (indicator ((Y -`A) \\<inter> (space M))) w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n       indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n       indicat_real (Y -` A \\<inter> space M) w", "using expl_cond_exp_diff[of M ?Xp ?Xn Y] ints"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable M (\\<lambda>w. max 0 (X w));\n   integrable M (\\<lambda>w. max 0 (- X w))\\<rbrakk>\n  \\<Longrightarrow> \\<forall>w\\<in>space M.\n                       expl_cond_expect M Y\n                        (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w =\n                       expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n                       expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w\n  integrable M (\\<lambda>w. max 0 (X w))\n  integrable M (\\<lambda>w. max 0 (- X w))\n\ngoal (1 subgoal):\n 1. LINT w|M.\n       (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n        expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n       indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n       indicat_real (Y -` A \\<inter> space M) w", "by (metis (mono_tags, lifting) Bochner_Integration.integral_cong)"], ["proof (state)\nthis:\n  LINT w|M.\n     (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "also"], ["proof (state)\nthis:\n  LINT w|M.\n     (expl_cond_expect M Y (\\<lambda>w. max 0 (X w)) w -\n      expl_cond_expect M Y (\\<lambda>w. max 0 (- X w)) w) *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n     indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "have \"... = integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X w) * (indicator ((Y -`A) \\<inter> (space M))) w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT w|M.\n       expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n       indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "using \\<open>\\<forall>w. X w = ?Xp w - ?Xn w\\<close> expl_cond_exp_cong[of M X \"\\<lambda>x. ?Xp x - ?Xn x\" Y]"], ["proof (prove)\nusing this:\n  \\<forall>w. X w = max 0 (X w) - max 0 (- X w)\n  \\<forall>w\\<in>space M.\n     X w = max 0 (X w) - max 0 (- X w) \\<Longrightarrow>\n  \\<forall>w\\<in>space M.\n     expl_cond_expect M Y X w =\n     expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w\n\ngoal (1 subgoal):\n 1. LINT w|M.\n       expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n       indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "by presburger"], ["proof (state)\nthis:\n  LINT w|M.\n     expl_cond_expect M Y (\\<lambda>x. max 0 (X x) - max 0 (- X x)) w *\n     indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets N \\<Longrightarrow>\n       LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n       LINT w|M.\n          expl_cond_expect M Y X w *\n          indicat_real (Y -` A \\<inter> space M) w", "finally"], ["proof (chain)\npicking this:\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "show \"integral\\<^sup>L M (\\<lambda>w. X w * indicator (Y -` A \\<inter> space M) w) = integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X w) * (indicator ((Y -`A) \\<inter> (space M))) w))\""], ["proof (prove)\nusing this:\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n    LINT w|M.\n       expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w", "."], ["proof (state)\nthis:\n  LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n  LINT w|M.\n     expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>A\\<in>sets N.\n     LINT w|M. X w * indicat_real (Y -` A \\<inter> space M) w =\n     LINT w|M.\n        expl_cond_expect M Y X w * indicat_real (Y -` A \\<inter> space M) w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) charact_cond_exp:\n  assumes \"disc_fct Y\"\n    and \"integrable M X\"\n    and \"point_measurable M (space N) Y\"\n    and \"Y \\<in> space M \\<rightarrow> space N\"\n    and \"\\<forall>r\\<in> range Y\\<inter> space N. \\<exists>A\\<in> sets N. range Y\\<inter> A = {r}\"\n  shows \"AE w in M. real_cond_exp M (fct_gen_subalgebra M N Y) X w = expl_cond_expect M Y X w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (fct_gen_subalgebra M N Y) X w =\n               expl_cond_expect M Y X w", "proof (rule sigma_finite_subalgebra.real_cond_exp_charact)"], ["proof (state)\ngoal (5 subgoals):\n 1. sigma_finite_subalgebra M (fct_gen_subalgebra M N Y)\n 2. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)\n 3. integrable M X\n 4. integrable M (expl_cond_expect M Y X)\n 5. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "have \"Y\\<in> measurable M N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y \\<in> M \\<rightarrow>\\<^sub>M N", "by (simp add: assms(1) assms(3) disct_fct_point_measurable)"], ["proof (state)\nthis:\n  Y \\<in> M \\<rightarrow>\\<^sub>M N\n\ngoal (5 subgoals):\n 1. sigma_finite_subalgebra M (fct_gen_subalgebra M N Y)\n 2. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)\n 3. integrable M X\n 4. integrable M (expl_cond_expect M Y X)\n 5. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "have \"point_measurable M (space N) Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable M (space N) Y", "by (simp add: assms(3))"], ["proof (state)\nthis:\n  point_measurable M (space N) Y\n\ngoal (5 subgoals):\n 1. sigma_finite_subalgebra M (fct_gen_subalgebra M N Y)\n 2. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)\n 3. integrable M X\n 4. integrable M (expl_cond_expect M Y X)\n 5. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "show \"sigma_finite_subalgebra M (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M (fct_gen_subalgebra M N Y)", "unfolding sigma_finite_subalgebra_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. subalgebra M (fct_gen_subalgebra M N Y) \\<and>\n    sigma_finite_measure (restr_to_subalg M (fct_gen_subalgebra M N Y))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. subalgebra M (fct_gen_subalgebra M N Y)\n 2. sigma_finite_measure (restr_to_subalg M (fct_gen_subalgebra M N Y))", "show \"subalgebra M (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subalgebra M (fct_gen_subalgebra M N Y)", "using \\<open>Y\\<in> measurable M N\\<close>"], ["proof (prove)\nusing this:\n  Y \\<in> M \\<rightarrow>\\<^sub>M N\n\ngoal (1 subgoal):\n 1. subalgebra M (fct_gen_subalgebra M N Y)", "by (simp add: fct_gen_subalgebra_is_subalgebra)"], ["proof (state)\nthis:\n  subalgebra M (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. sigma_finite_measure (restr_to_subalg M (fct_gen_subalgebra M N Y))", "show \"sigma_finite_measure (restr_to_subalg M (fct_gen_subalgebra M N Y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sigma_finite_measure (restr_to_subalg M (fct_gen_subalgebra M N Y))", "unfolding sigma_finite_measure_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A.\n       countable A \\<and>\n       A \\<subseteq> sets\n                      (restr_to_subalg M (fct_gen_subalgebra M N Y)) \\<and>\n       \\<Union> A =\n       space (restr_to_subalg M (fct_gen_subalgebra M N Y)) \\<and>\n       (\\<forall>a\\<in>A.\n           emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y))\n            a \\<noteq>\n           \\<infinity>)", "proof (intro exI conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. countable ?A\n 2. ?A \\<subseteq> sets (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 3. \\<Union> ?A = space (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 4. \\<forall>a\\<in>?A.\n       emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n       \\<infinity>", "let ?A = \"{space M}\""], ["proof (state)\ngoal (4 subgoals):\n 1. countable ?A\n 2. ?A \\<subseteq> sets (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 3. \\<Union> ?A = space (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 4. \\<forall>a\\<in>?A.\n       emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n       \\<infinity>", "show \"countable ?A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. countable {space M}", "by simp"], ["proof (state)\nthis:\n  countable {space M}\n\ngoal (3 subgoals):\n 1. {space M}\n    \\<subseteq> sets (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 2. \\<Union> {space M} =\n    space (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 3. \\<forall>a\\<in>{space M}.\n       emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n       \\<infinity>", "show \"?A \\<subseteq> sets (restr_to_subalg M (fct_gen_subalgebra M N Y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {space M}\n    \\<subseteq> sets (restr_to_subalg M (fct_gen_subalgebra M N Y))", "by (metis empty_subsetI insert_subset sets.top space_restr_to_subalg)"], ["proof (state)\nthis:\n  {space M} \\<subseteq> sets (restr_to_subalg M (fct_gen_subalgebra M N Y))\n\ngoal (2 subgoals):\n 1. \\<Union> {space M} =\n    space (restr_to_subalg M (fct_gen_subalgebra M N Y))\n 2. \\<forall>a\\<in>{space M}.\n       emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n       \\<infinity>", "show \"\\<Union> ?A = space (restr_to_subalg M (fct_gen_subalgebra M N Y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {space M} =\n    space (restr_to_subalg M (fct_gen_subalgebra M N Y))", "by (simp add: space_restr_to_subalg)"], ["proof (state)\nthis:\n  \\<Union> {space M} = space (restr_to_subalg M (fct_gen_subalgebra M N Y))\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>{space M}.\n       emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n       \\<infinity>", "show \"\\<forall>a\\<in>{space M}. emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>{space M}.\n       emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n       \\<infinity>", "by (metis \\<open>subalgebra M (fct_gen_subalgebra M N Y)\\<close> emeasure_finite emeasure_restr_to_subalg infinity_ennreal_def sets.top singletonD subalgebra_def)"], ["proof (state)\nthis:\n  \\<forall>a\\<in>{space M}.\n     emeasure (restr_to_subalg M (fct_gen_subalgebra M N Y)) a \\<noteq>\n     \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sigma_finite_measure (restr_to_subalg M (fct_gen_subalgebra M N Y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sigma_finite_subalgebra M (fct_gen_subalgebra M N Y)\n\ngoal (4 subgoals):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)\n 2. integrable M X\n 3. integrable M (expl_cond_expect M Y X)\n 4. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "show \"integrable M X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M X", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  point_measurable M (space N) Y\n  Y \\<in> space M \\<rightarrow> space N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. integrable M X", "by simp"], ["proof (state)\nthis:\n  integrable M X\n\ngoal (3 subgoals):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)\n 2. integrable M (expl_cond_expect M Y X)\n 3. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "show \"expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  point_measurable M (space N) Y\n  Y \\<in> space M \\<rightarrow> space N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)", "by (simp add:expl_cond_exp_borel)"], ["proof (state)\nthis:\n  expl_cond_expect M Y X \\<in> borel_measurable (fct_gen_subalgebra M N Y)\n\ngoal (2 subgoals):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)\n 2. integrable M (expl_cond_expect M Y X)", "show \"integrable M (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "using assms expl_cond_exp_integrable"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  point_measurable M (space N) Y\n  Y \\<in> space M \\<rightarrow> space N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n  \\<lbrakk>integrable M ?X; disc_fct ?Y;\n   point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> integrable M (expl_cond_expect M ?Y ?X)\n\ngoal (1 subgoal):\n 1. integrable M (expl_cond_expect M Y X)", "by blast"], ["proof (state)\nthis:\n  integrable M (expl_cond_expect M Y X)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)", "have \"\\<forall>A\\<in> sets M. integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator A w)) = set_lebesgue_integral M A X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets M.\n       LINT w|M. X w * indicat_real A w = set_lebesgue_integral M A X", "by (metis (no_types, lifting) Bochner_Integration.integral_cong mult_commute_abs real_scaleR_def set_lebesgue_integral_def)"], ["proof (state)\nthis:\n  \\<forall>A\\<in>sets M.\n     LINT w|M. X w * indicat_real A w = set_lebesgue_integral M A X\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)", "have \"\\<forall>A\\<in> sets M. integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator A w)) = set_lebesgue_integral M A (expl_cond_expect M Y X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets M.\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)", "by (metis (no_types, lifting) Bochner_Integration.integral_cong mult_commute_abs real_scaleR_def set_lebesgue_integral_def)"], ["proof (state)\nthis:\n  \\<forall>A\\<in>sets M.\n     LINT w|M. expl_cond_expect M Y X w * indicat_real A w =\n     set_lebesgue_integral M A (expl_cond_expect M Y X)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)", "have \"\\<forall>A\\<in> sets (fct_gen_subalgebra M N Y). integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator A w)) =\n  integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator A w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>sets (fct_gen_subalgebra M N Y).\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "fix A"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "assume \"A \\<in> sets (fct_gen_subalgebra M N Y)\""], ["proof (state)\nthis:\n  A \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "hence \"A \\<in> {Y -` B \\<inter> space M |B. B \\<in> sets N}\""], ["proof (prove)\nusing this:\n  A \\<in> sets (fct_gen_subalgebra M N Y)\n\ngoal (1 subgoal):\n 1. A \\<in> {Y -` B \\<inter> space M |B. B \\<in> sets N}", "using assms"], ["proof (prove)\nusing this:\n  A \\<in> sets (fct_gen_subalgebra M N Y)\n  disc_fct Y\n  integrable M X\n  point_measurable M (space N) Y\n  Y \\<in> space M \\<rightarrow> space N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. A \\<in> {Y -` B \\<inter> space M |B. B \\<in> sets N}", "by (simp add:fct_gen_subalgebra_sigma_sets)"], ["proof (state)\nthis:\n  A \\<in> {Y -` B \\<inter> space M |B. B \\<in> sets N}\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "hence \"\\<exists>B \\<in> sets N. A = Y -`B \\<inter> space M\""], ["proof (prove)\nusing this:\n  A \\<in> {Y -` B \\<inter> space M |B. B \\<in> sets N}\n\ngoal (1 subgoal):\n 1. \\<exists>B\\<in>sets N. A = Y -` B \\<inter> space M", "by auto"], ["proof (state)\nthis:\n  \\<exists>B\\<in>sets N. A = Y -` B \\<inter> space M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "from this"], ["proof (chain)\npicking this:\n  \\<exists>B\\<in>sets N. A = Y -` B \\<inter> space M", "obtain B where \"B\\<in> sets N\" and \"A = Y -`B\\<inter> space M\""], ["proof (prove)\nusing this:\n  \\<exists>B\\<in>sets N. A = Y -` B \\<inter> space M\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>B \\<in> sets N; A = Y -` B \\<inter> space M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  B \\<in> sets N\n  A = Y -` B \\<inter> space M\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       LINT w|M. X w * indicat_real A w =\n       LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "thus \"integral\\<^sup>L M (\\<lambda>w. (X w) * (indicator A w)) =\n      integral\\<^sup>L M (\\<lambda>w. ((expl_cond_expect M Y X) w) * (indicator A w))\""], ["proof (prove)\nusing this:\n  B \\<in> sets N\n  A = Y -` B \\<inter> space M\n\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real A w =\n    LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "using is_cond_exp"], ["proof (prove)\nusing this:\n  B \\<in> sets N\n  A = Y -` B \\<inter> space M\n  \\<lbrakk>integrable M ?X; disc_fct ?Y;\n   point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>A\\<in>sets ?N.\n                       LINT w|M.\n                          ?X w * indicat_real (?Y -` A \\<inter> space M) w =\n                       LINT w|M.\n                          expl_cond_expect M ?Y ?X w *\n                          indicat_real (?Y -` A \\<inter> space M) w\n\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real A w =\n    LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "using Bochner_Integration.integral_cong \\<open>point_measurable M (space N) Y\\<close> assms(1) assms(2)"], ["proof (prove)\nusing this:\n  B \\<in> sets N\n  A = Y -` B \\<inter> space M\n  \\<lbrakk>integrable M ?X; disc_fct ?Y;\n   point_measurable M (space ?N) ?Y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>A\\<in>sets ?N.\n                       LINT w|M.\n                          ?X w * indicat_real (?Y -` A \\<inter> space M) w =\n                       LINT w|M.\n                          expl_cond_expect M ?Y ?X w *\n                          indicat_real (?Y -` A \\<inter> space M) w\n  \\<lbrakk>?M = ?N;\n   \\<And>x. x \\<in> space ?N \\<Longrightarrow> ?f x = ?g x\\<rbrakk>\n  \\<Longrightarrow> integral\\<^sup>L ?M ?f = integral\\<^sup>L ?N ?g\n  point_measurable M (space N) Y\n  disc_fct Y\n  integrable M X\n\ngoal (1 subgoal):\n 1. LINT w|M. X w * indicat_real A w =\n    LINT w|M. expl_cond_expect M Y X w * indicat_real A w", "by blast"], ["proof (state)\nthis:\n  LINT w|M. X w * indicat_real A w =\n  LINT w|M. expl_cond_expect M Y X w * indicat_real A w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>A\\<in>sets (fct_gen_subalgebra M N Y).\n     LINT w|M. X w * indicat_real A w =\n     LINT w|M. expl_cond_expect M Y X w * indicat_real A w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)", "thus \"\\<And>A. A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow> set_lebesgue_integral M A X = set_lebesgue_integral M A (expl_cond_expect M Y X)\""], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>sets (fct_gen_subalgebra M N Y).\n     LINT w|M. X w * indicat_real A w =\n     LINT w|M. expl_cond_expect M Y X w * indicat_real A w\n\ngoal (1 subgoal):\n 1. \\<And>A.\n       A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n       set_lebesgue_integral M A X =\n       set_lebesgue_integral M A (expl_cond_expect M Y X)", "by (smt Bochner_Integration.integral_cong Groups.mult_ac(2) real_scaleR_def set_lebesgue_integral_def)"], ["proof (state)\nthis:\n  ?A \\<in> sets (fct_gen_subalgebra M N Y) \\<Longrightarrow>\n  set_lebesgue_integral M ?A X =\n  set_lebesgue_integral M ?A (expl_cond_expect M Y X)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) charact_cond_exp':\n  assumes \"disc_fct Y\"\n    and \"integrable M X\"\n    and \"Y\\<in> measurable M N\"\n    and \"\\<forall>r\\<in> range Y\\<inter> space N. \\<exists>A\\<in> sets N. range Y\\<inter> A = {r}\"\n  shows \"AE w in M. real_cond_exp M (fct_gen_subalgebra M N Y) X w = expl_cond_expect M Y X w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (fct_gen_subalgebra M N Y) X w =\n               expl_cond_expect M Y X w", "proof (rule charact_cond_exp)"], ["proof (state)\ngoal (5 subgoals):\n 1. disc_fct Y\n 2. integrable M X\n 3. point_measurable M (space N) Y\n 4. Y \\<in> space M \\<rightarrow> space N\n 5. \\<forall>r\\<in>range Y \\<inter> space N.\n       \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}", "show \"disc_fct Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. disc_fct Y", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  Y \\<in> M \\<rightarrow>\\<^sub>M N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. disc_fct Y", "by simp"], ["proof (state)\nthis:\n  disc_fct Y\n\ngoal (4 subgoals):\n 1. integrable M X\n 2. point_measurable M (space N) Y\n 3. Y \\<in> space M \\<rightarrow> space N\n 4. \\<forall>r\\<in>range Y \\<inter> space N.\n       \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}", "show \"integrable M X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M X", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  Y \\<in> M \\<rightarrow>\\<^sub>M N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. integrable M X", "by simp"], ["proof (state)\nthis:\n  integrable M X\n\ngoal (3 subgoals):\n 1. point_measurable M (space N) Y\n 2. Y \\<in> space M \\<rightarrow> space N\n 3. \\<forall>r\\<in>range Y \\<inter> space N.\n       \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}", "show \"\\<forall>r\\<in>range Y \\<inter> space N. \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>range Y \\<inter> space N.\n       \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  Y \\<in> M \\<rightarrow>\\<^sub>M N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. \\<forall>r\\<in>range Y \\<inter> space N.\n       \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}", "by simp"], ["proof (state)\nthis:\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (2 subgoals):\n 1. point_measurable M (space N) Y\n 2. Y \\<in> space M \\<rightarrow> space N", "show \"Y\\<in> space M \\<rightarrow> space N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y \\<in> space M \\<rightarrow> space N", "by (meson Pi_I assms(3) measurable_space)"], ["proof (state)\nthis:\n  Y \\<in> space M \\<rightarrow> space N\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) Y", "show \"point_measurable M (space N) Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. point_measurable M (space N) Y", "using assms"], ["proof (prove)\nusing this:\n  disc_fct Y\n  integrable M X\n  Y \\<in> M \\<rightarrow>\\<^sub>M N\n  \\<forall>r\\<in>range Y \\<inter> space N.\n     \\<exists>A\\<in>sets N. range Y \\<inter> A = {r}\n\ngoal (1 subgoal):\n 1. point_measurable M (space N) Y", "by (simp add: meas_single_meas)"], ["proof (state)\nthis:\n  point_measurable M (space N) Y\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}