{"file_name": "/home/qj213/afp-2021-10-22/thys/DiscretePricing/Martingale.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/DiscretePricing", "problem_names": ["lemma martingaleAE:\n  assumes \"martingale M F X\"\n  and \"t \\<le> s\"\nshows \"AE w in M. real_cond_exp M (F t) (X s) w = (X t) w\"", "lemma martingale_add:\n  assumes \"martingale M F X\"\n  and \"martingale M F Y\"\n  and \"\\<forall>m. sigma_finite_subalgebra M (F m)\"\nshows \"martingale M F (\\<lambda>n w. X n w + Y n w)\"", "lemma  disc_martingale_charact:\n  assumes \"(\\<forall>n. integrable M (X n))\"\n  and \"filtration M F\"\n  and \"\\<forall>m. sigma_finite_subalgebra M (F m)\"\n  and \"\\<forall>m. X m \\<in> borel_measurable (F m)\"\n  and \"(\\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = (X n) w)\"\nshows \"martingale M F X \"", "lemma (in finite_measure) constant_martingale:\n  assumes \"\\<forall>t. sigma_finite_subalgebra M (F t)\"\nand \"filtration M F\"\nshows \"martingale M F (\\<lambda>n w. c)\""], "translations": [["", "lemma martingaleAE:\n  assumes \"martingale M F X\"\n  and \"t \\<le> s\"\nshows \"AE w in M. real_cond_exp M (F t) (X s) w = (X t) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F t) (X s) w = X t w", "using assms"], ["proof (prove)\nusing this:\n  martingale M F X\n  t \\<le> s\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F t) (X s) w = X t w", "unfolding martingale_def"], ["proof (prove)\nusing this:\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  borel_adapt_stoch_proc F X \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  t \\<le> s\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F t) (X s) w = X t w", "by simp"], ["", "lemma martingale_add:\n  assumes \"martingale M F X\"\n  and \"martingale M F Y\"\n  and \"\\<forall>m. sigma_finite_subalgebra M (F m)\"\nshows \"martingale M F (\\<lambda>n w. X n w + Y n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. martingale M F (\\<lambda>n w. X n w + Y n w)", "unfolding martingale_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Filtration.filtration M F \\<and>\n    (\\<forall>t. integrable M (\\<lambda>w. X t w + Y t w)) \\<and>\n    borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w) \\<and>\n    (\\<forall>t s.\n        t \\<le> s \\<longrightarrow>\n        (AE w in M. real_cond_exp M (F t) (\\<lambda>w. X s w + Y s w) w =\n                    X t w + Y t w))", "proof (intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. Filtration.filtration M F\n 2. \\<forall>t. integrable M (\\<lambda>w. X t w + Y t w)\n 3. borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)\n 4. \\<forall>t s.\n       t \\<le> s \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F t) (\\<lambda>w. X s w + Y s w) w =\n                   X t w + Y t w)", "let ?sum = \"\\<lambda>n w. X n w + Y n w\""], ["proof (state)\ngoal (4 subgoals):\n 1. Filtration.filtration M F\n 2. \\<forall>t. integrable M (\\<lambda>w. X t w + Y t w)\n 3. borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)\n 4. \\<forall>t s.\n       t \\<le> s \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F t) (\\<lambda>w. X s w + Y s w) w =\n                   X t w + Y t w)", "show \"\\<forall>n. integrable M (\\<lambda>w. X n w + Y n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. integrable M (\\<lambda>w. X n w + Y n w)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n. integrable M (\\<lambda>w. X n w + Y n w)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n. integrable M (\\<lambda>w. X n w + Y n w)", "show \"integrable M (\\<lambda>w. X n w + Y n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. X n w + Y n w)", "by (metis Bochner_Integration.integrable_add assms(1) assms(2) martingale_def)"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. X n w + Y n w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>n. integrable M (\\<lambda>w. X n w + Y n w)\n\ngoal (3 subgoals):\n 1. Filtration.filtration M F\n 2. borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)\n 3. \\<forall>t s.\n       t \\<le> s \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F t) (\\<lambda>w. X s w + Y s w) w =\n                   X t w + Y t w)", "show \"\\<forall>n m. n \\<le> m \\<longrightarrow> (AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w = X n w + Y n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n m.\n       n \\<le> m \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n                   X n w + Y n w)", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       n \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n                  X n w + Y n w", "fix n::'b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       n \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n                  X n w + Y n w", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       n \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n                  X n w + Y n w", "assume \"n \\<le> m\""], ["proof (state)\nthis:\n  n \\<le> m\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       n \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n                  X n w + Y n w", "show \"AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w = X n w + Y n w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "have \"integrable M (X m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (X m)", "using assms"], ["proof (prove)\nusing this:\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. integrable M (X m)", "unfolding martingale_def"], ["proof (prove)\nusing this:\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  borel_adapt_stoch_proc F X \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (Y t)) \\<and>\n  borel_adapt_stoch_proc F Y \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (Y s) w = Y t w))\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. integrable M (X m)", "by simp"], ["proof (state)\nthis:\n  integrable M (X m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "moreover"], ["proof (state)\nthis:\n  integrable M (X m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "have \"integrable M (Y m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (Y m)", "using assms"], ["proof (prove)\nusing this:\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. integrable M (Y m)", "unfolding martingale_def"], ["proof (prove)\nusing this:\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  borel_adapt_stoch_proc F X \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (Y t)) \\<and>\n  borel_adapt_stoch_proc F Y \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (Y s) w = Y t w))\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. integrable M (Y m)", "by simp"], ["proof (state)\nthis:\n  integrable M (Y m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "moreover"], ["proof (state)\nthis:\n  integrable M (Y m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "have \" sigma_finite_subalgebra M (F n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M (F n)", "using assms"], ["proof (prove)\nusing this:\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M (F n)", "by simp"], ["proof (state)\nthis:\n  sigma_finite_subalgebra M (F n)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "ultimately"], ["proof (chain)\npicking this:\n  integrable M (X m)\n  integrable M (Y m)\n  sigma_finite_subalgebra M (F n)", "have \"AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n        real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w\""], ["proof (prove)\nusing this:\n  integrable M (X m)\n  integrable M (Y m)\n  sigma_finite_subalgebra M (F n)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w", "using sigma_finite_subalgebra.real_cond_exp_add[of M \"F n\" \"X m\" \"Y m\"]"], ["proof (prove)\nusing this:\n  integrable M (X m)\n  integrable M (Y m)\n  sigma_finite_subalgebra M (F n)\n  \\<lbrakk>sigma_finite_subalgebra M (F n); integrable M (X m);\n   integrable M (Y m)\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_cond_exp M (F n)\n                                (\\<lambda>x. X m x + Y m x) x =\n                               real_cond_exp M (F n) (X m) x +\n                               real_cond_exp M (F n) (Y m) x\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w", "by simp"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n             real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "moreover"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n             real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "have \"AE w in M. real_cond_exp M (F n) (X m) w = X n w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (X m) w = X n w", "using \\<open>n\\<le> m\\<close> assms"], ["proof (prove)\nusing this:\n  n \\<le> m\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (X m) w = X n w", "unfolding martingale_def"], ["proof (prove)\nusing this:\n  n \\<le> m\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  borel_adapt_stoch_proc F X \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (Y t)) \\<and>\n  borel_adapt_stoch_proc F Y \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (Y s) w = Y t w))\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (X m) w = X n w", "by simp"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (X m) w = X n w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "moreover"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (X m) w = X n w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "have \"AE w in M. real_cond_exp M (F n) (Y m) w = Y n w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (Y m) w = Y n w", "using \\<open>n\\<le> m\\<close> assms"], ["proof (prove)\nusing this:\n  n \\<le> m\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (Y m) w = Y n w", "unfolding martingale_def"], ["proof (prove)\nusing this:\n  n \\<le> m\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  borel_adapt_stoch_proc F X \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (Y t)) \\<and>\n  borel_adapt_stoch_proc F Y \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (Y s) w = Y t w))\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (Y m) w = Y n w", "by simp"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (Y m) w = Y n w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "ultimately"], ["proof (chain)\npicking this:\n  AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n             real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w\n  AE w in M. real_cond_exp M (F n) (X m) w = X n w\n  AE w in M. real_cond_exp M (F n) (Y m) w = Y n w", "show ?thesis"], ["proof (prove)\nusing this:\n  AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n             real_cond_exp M (F n) (X m) w + real_cond_exp M (F n) (Y m) w\n  AE w in M. real_cond_exp M (F n) (X m) w = X n w\n  AE w in M. real_cond_exp M (F n) (Y m) w = Y n w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n               X n w + Y n w", "by auto"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n             X n w + Y n w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n             X n w + Y n w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>n m.\n     n \\<le> m \\<longrightarrow>\n     (AE w in M. real_cond_exp M (F n) (\\<lambda>w. X m w + Y m w) w =\n                 X n w + Y n w)\n\ngoal (2 subgoals):\n 1. Filtration.filtration M F\n 2. borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)", "show \"filtration M F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "using assms"], ["proof (prove)\nusing this:\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "unfolding martingale_def"], ["proof (prove)\nusing this:\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  borel_adapt_stoch_proc F X \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (Y t)) \\<and>\n  borel_adapt_stoch_proc F Y \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (Y s) w = Y t w))\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "by simp"], ["proof (state)\nthis:\n  Filtration.filtration M F\n\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)", "show \"borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)", "unfolding adapt_stoch_proc_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t. (\\<lambda>w. X t w + Y t w) \\<in> borel_measurable (F t)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t. (\\<lambda>w. X t w + Y t w) \\<in> borel_measurable (F t)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t. (\\<lambda>w. X t w + Y t w) \\<in> borel_measurable (F t)", "show \"(\\<lambda>w. X n w + Y n w) \\<in> borel_measurable (F n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>w. X n w + Y n w) \\<in> borel_measurable (F n)", "using assms"], ["proof (prove)\nusing this:\n  martingale M F X\n  martingale M F Y\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>w. X n w + Y n w) \\<in> borel_measurable (F n)", "unfolding martingale_def adapt_stoch_proc_def"], ["proof (prove)\nusing this:\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (X t)) \\<and>\n  (\\<forall>t. X t \\<in> borel_measurable (F t)) \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (X s) w = X t w))\n  Filtration.filtration M F \\<and>\n  (\\<forall>t. integrable M (Y t)) \\<and>\n  (\\<forall>t. Y t \\<in> borel_measurable (F t)) \\<and>\n  (\\<forall>t s.\n      t \\<le> s \\<longrightarrow>\n      (AE w in M. real_cond_exp M (F t) (Y s) w = Y t w))\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>w. X n w + Y n w) \\<in> borel_measurable (F n)", "by (simp add: borel_measurable_add)"], ["proof (state)\nthis:\n  (\\<lambda>w. X n w + Y n w) \\<in> borel_measurable (F n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  borel_adapt_stoch_proc F (\\<lambda>n w. X n w + Y n w)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma  disc_martingale_charact:\n  assumes \"(\\<forall>n. integrable M (X n))\"\n  and \"filtration M F\"\n  and \"\\<forall>m. sigma_finite_subalgebra M (F m)\"\n  and \"\\<forall>m. X m \\<in> borel_measurable (F m)\"\n  and \"(\\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = (X n) w)\"\nshows \"martingale M F X \""], ["proof (prove)\ngoal (1 subgoal):\n 1. martingale M F X", "unfolding martingale_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Filtration.filtration M F \\<and>\n    (\\<forall>t. integrable M (X t)) \\<and>\n    borel_adapt_stoch_proc F X \\<and>\n    (\\<forall>t s.\n        t \\<le> s \\<longrightarrow>\n        (AE w in M. real_cond_exp M (F t) (X s) w = X t w))", "proof (intro conjI)"], ["proof (state)\ngoal (4 subgoals):\n 1. Filtration.filtration M F\n 2. \\<forall>t. integrable M (X t)\n 3. borel_adapt_stoch_proc F X\n 4. \\<forall>t s.\n       t \\<le> s \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F t) (X s) w = X t w)", "have \"\\<forall> k m. k \\<le> m \\<longrightarrow> (AE w in M. real_cond_exp M (F (m-k)) (X m) w = X (m-k) w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k m.\n       k \\<le> m \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w)", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k m.\n       k \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k m.\n       k \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w", "fix k::nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k m.\n       k \\<le> m \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w", "show \"k\\<le>m \\<Longrightarrow> AE w in M. real_cond_exp M (F (m-k)) (X m) w = X (m-k) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w", "proof (induct k)"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "case 0"], ["proof (state)\nthis:\n  0 \\<le> m\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "have \"X m \\<in> borel_measurable (F m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X m \\<in> borel_measurable (F m)", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. X m \\<in> borel_measurable (F m)", "by simp"], ["proof (state)\nthis:\n  X m \\<in> borel_measurable (F m)\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "moreover"], ["proof (state)\nthis:\n  X m \\<in> borel_measurable (F m)\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "have \"integrable M (X m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (X m)", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. integrable M (X m)", "by simp"], ["proof (state)\nthis:\n  integrable M (X m)\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "moreover"], ["proof (state)\nthis:\n  integrable M (X m)\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "have \"sigma_finite_subalgebra M (F m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M (F m)", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. sigma_finite_subalgebra M (F m)", "by simp"], ["proof (state)\nthis:\n  sigma_finite_subalgebra M (F m)\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "ultimately"], ["proof (chain)\npicking this:\n  X m \\<in> borel_measurable (F m)\n  integrable M (X m)\n  sigma_finite_subalgebra M (F m)", "have \"AE w in M. real_cond_exp M (F m) (X m) w = X m w\""], ["proof (prove)\nusing this:\n  X m \\<in> borel_measurable (F m)\n  integrable M (X m)\n  sigma_finite_subalgebra M (F m)\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F m) (X m) w = X m w", "using sigma_finite_subalgebra.real_cond_exp_F_meas[of M \"F m\" \"X m\"]"], ["proof (prove)\nusing this:\n  X m \\<in> borel_measurable (F m)\n  integrable M (X m)\n  sigma_finite_subalgebra M (F m)\n  \\<lbrakk>sigma_finite_subalgebra M (F m); integrable M (X m);\n   X m \\<in> borel_measurable (F m)\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_cond_exp M (F m) (X m) x = X m x\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F m) (X m) w = X m w", "by simp"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F m) (X m) w = X m w\n\ngoal (2 subgoals):\n 1. 0 \\<le> m \\<Longrightarrow>\n    AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n 2. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "thus ?case"], ["proof (prove)\nusing this:\n  AE w in M. real_cond_exp M (F m) (X m) w = X m w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w", "using 0"], ["proof (prove)\nusing this:\n  AE w in M. real_cond_exp M (F m) (X m) w = X m w\n  0 \\<le> m\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w", "by simp"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - 0)) (X m) w = X (m - 0) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "case (Suc k)"], ["proof (state)\nthis:\n  k \\<le> m \\<Longrightarrow>\n  AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w\n  Suc k \\<le> m\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "have \"Suc (m - (Suc k)) = m - k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc (m - Suc k) = m - k", "using Suc"], ["proof (prove)\nusing this:\n  k \\<le> m \\<Longrightarrow>\n  AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w\n  Suc k \\<le> m\n\ngoal (1 subgoal):\n 1. Suc (m - Suc k) = m - k", "by simp"], ["proof (state)\nthis:\n  Suc (m - Suc k) = m - k\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "hence \"AE w in M. real_cond_exp M (F (m - (Suc k))) (X (Suc (m - (Suc k)))) w = (X (m - (Suc k))) w\""], ["proof (prove)\nusing this:\n  Suc (m - Suc k) = m - k\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k)) (X (Suc (m - Suc k))) w =\n               X (m - Suc k) w", "using assms"], ["proof (prove)\nusing this:\n  Suc (m - Suc k) = m - k\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k)) (X (Suc (m - Suc k))) w =\n               X (m - Suc k) w", "by blast"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (Suc (m - Suc k))) w =\n             X (m - Suc k) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "hence \"AE w in M. real_cond_exp M (F (m - (Suc k))) (X ((m - k))) w = (X (m - (Suc k))) w\""], ["proof (prove)\nusing this:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (Suc (m - Suc k))) w =\n             X (m - Suc k) w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k)) (X (m - k)) w =\n               X (m - Suc k) w", "using assms(3) \\<open>Suc (m - (Suc k)) = m - k\\<close>"], ["proof (prove)\nusing this:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (Suc (m - Suc k))) w =\n             X (m - Suc k) w\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  Suc (m - Suc k) = m - k\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k)) (X (m - k)) w =\n               X (m - Suc k) w", "by simp"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (m - k)) w = X (m - Suc k) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "moreover"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (m - k)) w = X (m - Suc k) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "have \"AE w in M. real_cond_exp M (F (m - (Suc k))) (real_cond_exp M (F (m - k)) (X m)) w =\n        real_cond_exp M (F (m - (Suc k))) (X m) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k))\n                (real_cond_exp M (F (m - k)) (X m)) w =\n               real_cond_exp M (F (m - Suc k)) (X m) w", "using  sigma_finite_subalgebra.real_cond_exp_nested_subalg[of M \"F (m- (Suc k))\" \"F (m-k)\"  \"X m\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>sigma_finite_subalgebra M (F (m - Suc k));\n   subalgebra M (F (m - k)); subalgebra (F (m - k)) (F (m - Suc k));\n   integrable M (X m)\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_cond_exp M (F (m - Suc k))\n                                (real_cond_exp M (F (m - k)) (X m)) x =\n                               real_cond_exp M (F (m - Suc k)) (X m) x\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k))\n                (real_cond_exp M (F (m - k)) (X m)) w =\n               real_cond_exp M (F (m - Suc k)) (X m) w", "by (metis Filtration.filtration_def Suc_n_not_le_n \\<open>Suc (m - Suc k) = m - k\\<close> assms(1) assms(2) assms(3)\n            filtrationE1 nat_le_linear)"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X m) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "moreover"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X m) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "have \"AE w in M. real_cond_exp M (F (m - (Suc k))) (real_cond_exp M (F (m - k)) (X m)) w =\n        real_cond_exp M (F (m - (Suc k))) (X (m-k)) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k))\n                (real_cond_exp M (F (m - k)) (X m)) w =\n               real_cond_exp M (F (m - Suc k)) (X (m - k)) w", "using Suc\n        sigma_finite_subalgebra.real_cond_exp_cong[of M \"F (m - (Suc k))\" \"real_cond_exp M (F (m - k)) (X m)\" \"X (m - k)\"]\n        borel_measurable_cond_exp[of M \"F (m-k)\" \"X m\"]"], ["proof (prove)\nusing this:\n  k \\<le> m \\<Longrightarrow>\n  AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w\n  Suc k \\<le> m\n  \\<lbrakk>sigma_finite_subalgebra M (F (m - Suc k));\n   AE x in M. real_cond_exp M (F (m - k)) (X m) x = X (m - k) x;\n   real_cond_exp M (F (m - k)) (X m) \\<in> borel_measurable M;\n   X (m - k) \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_cond_exp M (F (m - Suc k))\n                                (real_cond_exp M (F (m - k)) (X m)) x =\n                               real_cond_exp M (F (m - Suc k)) (X (m - k)) x\n  real_cond_exp M (F (m - k)) (X m) \\<in> borel_measurable (F (m - k))\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k))\n                (real_cond_exp M (F (m - k)) (X m)) w =\n               real_cond_exp M (F (m - Suc k)) (X (m - k)) w", "using Suc_leD assms(1) assms(3) borel_measurable_cond_exp2"], ["proof (prove)\nusing this:\n  k \\<le> m \\<Longrightarrow>\n  AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w\n  Suc k \\<le> m\n  \\<lbrakk>sigma_finite_subalgebra M (F (m - Suc k));\n   AE x in M. real_cond_exp M (F (m - k)) (X m) x = X (m - k) x;\n   real_cond_exp M (F (m - k)) (X m) \\<in> borel_measurable M;\n   X (m - k) \\<in> borel_measurable M\\<rbrakk>\n  \\<Longrightarrow> AE x in M. real_cond_exp M (F (m - Suc k))\n                                (real_cond_exp M (F (m - k)) (X m)) x =\n                               real_cond_exp M (F (m - Suc k)) (X (m - k)) x\n  real_cond_exp M (F (m - k)) (X m) \\<in> borel_measurable (F (m - k))\n  Suc ?m \\<le> ?n \\<Longrightarrow> ?m \\<le> ?n\n  \\<forall>n. integrable M (X n)\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  real_cond_exp ?M ?F ?f \\<in> borel_measurable ?M\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k))\n                (real_cond_exp M (F (m - k)) (X m)) w =\n               real_cond_exp M (F (m - Suc k)) (X (m - k)) w", "by blast"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X (m - k)) w\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>k \\<le> m \\<Longrightarrow>\n                AE w in M. real_cond_exp M (F (m - k)) (X m) w =\n                           X (m - k) w;\n        Suc k \\<le> m\\<rbrakk>\n       \\<Longrightarrow> AE w in M. real_cond_exp M (F (m - Suc k)) (X m)\n                                     w =\n                                    X (m - Suc k) w", "ultimately"], ["proof (chain)\npicking this:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (m - k)) w = X (m - Suc k) w\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X m) w\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X (m - k)) w", "show ?case"], ["proof (prove)\nusing this:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X (m - k)) w = X (m - Suc k) w\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X m) w\n  AE w in M. real_cond_exp M (F (m - Suc k))\n              (real_cond_exp M (F (m - k)) (X m)) w =\n             real_cond_exp M (F (m - Suc k)) (X (m - k)) w\n\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F (m - Suc k)) (X m) w = X (m - Suc k) w", "by auto"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F (m - Suc k)) (X m) w = X (m - Suc k) w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  k \\<le> m \\<Longrightarrow>\n  AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>k m.\n     k \\<le> m \\<longrightarrow>\n     (AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w)\n\ngoal (4 subgoals):\n 1. Filtration.filtration M F\n 2. \\<forall>t. integrable M (X t)\n 3. borel_adapt_stoch_proc F X\n 4. \\<forall>t s.\n       t \\<le> s \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F t) (X s) w = X t w)", "thus \"\\<forall> n m. n \\<le> m \\<longrightarrow> (AE w in M. real_cond_exp M (F n) (X m) w = X n w)\""], ["proof (prove)\nusing this:\n  \\<forall>k m.\n     k \\<le> m \\<longrightarrow>\n     (AE w in M. real_cond_exp M (F (m - k)) (X m) w = X (m - k) w)\n\ngoal (1 subgoal):\n 1. \\<forall>n m.\n       n \\<le> m \\<longrightarrow>\n       (AE w in M. real_cond_exp M (F n) (X m) w = X n w)", "by (metis diff_diff_cancel diff_le_self)"], ["proof (state)\nthis:\n  \\<forall>n m.\n     n \\<le> m \\<longrightarrow>\n     (AE w in M. real_cond_exp M (F n) (X m) w = X n w)\n\ngoal (3 subgoals):\n 1. Filtration.filtration M F\n 2. \\<forall>t. integrable M (X t)\n 3. borel_adapt_stoch_proc F X", "show \"\\<forall>t. integrable M (X t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t. integrable M (X t)", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. \\<forall>t. integrable M (X t)", "by simp"], ["proof (state)\nthis:\n  \\<forall>t. integrable M (X t)\n\ngoal (2 subgoals):\n 1. Filtration.filtration M F\n 2. borel_adapt_stoch_proc F X", "show \"filtration M F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "by simp"], ["proof (state)\nthis:\n  Filtration.filtration M F\n\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F X", "show \"borel_adapt_stoch_proc F X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F X", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F X", "unfolding adapt_stoch_proc_def"], ["proof (prove)\nusing this:\n  \\<forall>n. integrable M (X n)\n  Filtration.filtration M F\n  \\<forall>m. sigma_finite_subalgebra M (F m)\n  \\<forall>m. X m \\<in> borel_measurable (F m)\n  \\<forall>n. AE w in M. real_cond_exp M (F n) (X (Suc n)) w = X n w\n\ngoal (1 subgoal):\n 1. \\<forall>t. X t \\<in> borel_measurable (F t)", "by simp"], ["proof (state)\nthis:\n  borel_adapt_stoch_proc F X\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in finite_measure) constant_martingale:\n  assumes \"\\<forall>t. sigma_finite_subalgebra M (F t)\"\nand \"filtration M F\"\nshows \"martingale M F (\\<lambda>n w. c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. martingale M F (\\<lambda>n w. c)", "unfolding martingale_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Filtration.filtration M F \\<and>\n    (\\<forall>t. integrable M (\\<lambda>w. c)) \\<and>\n    borel_adapt_stoch_proc F (\\<lambda>n w. c) \\<and>\n    (\\<forall>t s.\n        t \\<le> s \\<longrightarrow>\n        (AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c))", "proof (intro allI conjI impI)"], ["proof (state)\ngoal (4 subgoals):\n 1. Filtration.filtration M F\n 2. \\<And>t. integrable M (\\<lambda>w. c)\n 3. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 4. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "show \"filtration M F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>t. sigma_finite_subalgebra M (F t)\n  Filtration.filtration M F\n\ngoal (1 subgoal):\n 1. Filtration.filtration M F", "by simp"], ["proof (state)\nthis:\n  Filtration.filtration M F\n\ngoal (3 subgoals):\n 1. \\<And>t. integrable M (\\<lambda>w. c)\n 2. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 3. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "{"], ["proof (state)\nthis:\n  Filtration.filtration M F\n\ngoal (3 subgoals):\n 1. \\<And>t. integrable M (\\<lambda>w. c)\n 2. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 3. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "fix t"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t. integrable M (\\<lambda>w. c)\n 2. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 3. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "show \"integrable M (\\<lambda>w. c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable M (\\<lambda>w. c)", "by simp"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. c)\n\ngoal (2 subgoals):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 2. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "}"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. c)\n\ngoal (2 subgoals):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 2. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "{"], ["proof (state)\nthis:\n  integrable M (\\<lambda>w. c)\n\ngoal (2 subgoals):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 2. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "fix t::'b"], ["proof (state)\ngoal (2 subgoals):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 2. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "fix s"], ["proof (state)\ngoal (2 subgoals):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 2. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "assume \"t \\<le> s\""], ["proof (state)\nthis:\n  t \\<le> s\n\ngoal (2 subgoals):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)\n 2. \\<And>t s.\n       t \\<le> s \\<Longrightarrow>\n       AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "show \"AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c", "by (intro sigma_finite_subalgebra.real_cond_exp_F_meas, (auto simp add: assms))"], ["proof (state)\nthis:\n  AE w in M. real_cond_exp M (F t) (\\<lambda>w. c) w = c\n\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)", "}"], ["proof (state)\nthis:\n  ?t2 \\<le> ?s2 \\<Longrightarrow>\n  AE w in M. real_cond_exp M (F ?t2) (\\<lambda>w. c) w = c\n\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)", "show \"borel_adapt_stoch_proc F (\\<lambda>n w. c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. borel_adapt_stoch_proc F (\\<lambda>n w. c)", "unfolding adapt_stoch_proc_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t. (\\<lambda>w. c) \\<in> borel_measurable (F t)", "by simp"], ["proof (state)\nthis:\n  borel_adapt_stoch_proc F (\\<lambda>n w. c)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}