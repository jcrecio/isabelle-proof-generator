{"file_name": "/home/qj213/afp-2021-10-22/thys/CZH_Foundations/czh_sets/CZH_Sets_FBRelations.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/CZH_Foundations", "problem_names": ["lemma fpair_iff[simp]: \"([a, b]\\<^sub>\\<circ> = [a', b']\\<^sub>\\<circ>) = (a = a' \\<and> b = b')\"", "lemmas fpair_inject[elim!] = fpair_iff[THEN iffD1, THEN conjE]", "lemma small_fpairs[simp]: \"small {x. x \\<in>\\<^sub>\\<circ> r \\<and> (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}\"", "lemma fpairsI[intro]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r\" and \"x = [a, b]\\<^sub>\\<circ>\" \n  shows \"x \\<in>\\<^sub>\\<circ> fpairs r\"", "lemma fpairsD[dest]:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\" \n  shows \"x \\<in>\\<^sub>\\<circ> r\" and \"\\<exists>a b. x = [a, b]\\<^sub>\\<circ>\"", "lemma fpairsE[elim]:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fpairs_iff: \"x \\<in>\\<^sub>\\<circ> fpairs r \\<longleftrightarrow> x \\<in>\\<^sub>\\<circ> r \\<and> (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)\"", "lemma fpairs_iff_elts: \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r \\<longleftrightarrow> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fpairs_vempty[simp]: \"fpairs 0 = 0\"", "lemma fpairs_vsingleton[simp]: \"fpairs (set {[a, b]\\<^sub>\\<circ>}) = set {[a, b]\\<^sub>\\<circ>}\"", "lemma fpairs_vinsert: \"fpairs (vinsert [a, b]\\<^sub>\\<circ> A) = set {[a, b]\\<^sub>\\<circ>} \\<union>\\<^sub>\\<circ> fpairs A\"", "lemma fpairs_mono:\n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\"\n  shows \"fpairs r \\<subseteq>\\<^sub>\\<circ> fpairs s\"", "lemma fpairs_vunion: \"fpairs (A \\<union>\\<^sub>\\<circ> B) = fpairs A \\<union>\\<^sub>\\<circ> fpairs B\"", "lemma fpairs_vintersection: \"fpairs (A \\<inter>\\<^sub>\\<circ> B) = fpairs A \\<inter>\\<^sub>\\<circ> fpairs B\"", "lemma fpairs_vdiff: \"fpairs (A -\\<^sub>\\<circ> B) = fpairs A -\\<^sub>\\<circ> fpairs B\"", "lemma fpairs_ex_vfst:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\"\n  shows \"\\<exists>b. [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fpairs_ex_vsnd:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\"\n  shows \"\\<exists>a. [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fpair_vcpower2I[intro]:\n  assumes \"a \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\" and \"b \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\"\n  shows \"vconcat [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\"", "lemma fid_on_small[simp]: \"small {[a, a]\\<^sub>\\<circ> | a. a \\<in>\\<^sub>\\<circ> A}\"", "lemma fid_on_eqI: \n  assumes \"a = b\" and \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\"", "lemma fid_onI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"[a, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\"", "lemma fid_onD[dest!]: \n  assumes \"[a, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\"\n  shows \"a \\<in>\\<^sub>\\<circ> A\"", "lemma fid_onE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> fid_on A\" and \"\\<exists>a\\<in>\\<^sub>\\<circ>A. x = [a, a]\\<^sub>\\<circ> \\<Longrightarrow> P\" \n  shows P", "lemma fid_on_iff: \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A \\<longleftrightarrow> a = b \\<and> a \\<in>\\<^sub>\\<circ> A\"", "lemma fid_on_vempty[simp]: \"fid_on 0 = 0\"", "lemma fid_on_vsingleton[simp]: \"fid_on (set {a}) = set {[a, a]\\<^sub>\\<circ>}\"", "lemma fid_on_vdoubleton: \"fid_on (set {a, b}) = set {[a, a]\\<^sub>\\<circ>, [b, b]\\<^sub>\\<circ>}\"", "lemma fid_on_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\" \n  shows \"fid_on A \\<subseteq>\\<^sub>\\<circ> fid_on B\"", "lemma fid_on_vinsert: \"vinsert [a, a]\\<^sub>\\<circ> (fid_on A) = fid_on (vinsert a A)\"", "lemma fid_on_vintersection: \"fid_on (A \\<inter>\\<^sub>\\<circ> B) = fid_on A \\<inter>\\<^sub>\\<circ> fid_on B\"", "lemma fid_on_vunion: \"fid_on (A \\<union>\\<^sub>\\<circ> B) = fid_on A \\<union>\\<^sub>\\<circ> fid_on B\"", "lemma fid_on_vdiff: \"fid_on (A -\\<^sub>\\<circ> B) = fid_on A -\\<^sub>\\<circ> fid_on B\"", "lemma fid_on_vsubset_vcpower: \"fid_on A \\<subseteq>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\"", "lemma small_fconst_on[simp]: \"small {[a, c]\\<^sub>\\<circ> | a. a \\<in>\\<^sub>\\<circ> A}\"", "lemma fconst_onI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c\"", "lemma fconst_onD[dest!]: \n  assumes \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c\"\n  shows \"a \\<in>\\<^sub>\\<circ> A\"", "lemma fconst_onE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> fconst_on A c\"\n  obtains a where \"a \\<in>\\<^sub>\\<circ> A\" and \"x = [a, c]\\<^sub>\\<circ>\"", "lemma fconst_on_iff: \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c \\<longleftrightarrow> a \\<in>\\<^sub>\\<circ> A\"", "lemma fconst_on_vempty[simp]: \"fconst_on 0 c = 0\"", "lemma fconst_on_vsingleton[simp]: \"fconst_on (set {a}) c = set {[a, c]\\<^sub>\\<circ>}\"", "lemma fconst_on_vdoubleton: \"fconst_on (set {a, b}) c = set {[a, c]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>}\"", "lemma fconst_on_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\" \n  shows \"fconst_on A c \\<subseteq>\\<^sub>\\<circ> fconst_on B c\"", "lemma fconst_on_vinsert:\n  \"(vinsert [a, c]\\<^sub>\\<circ> (fconst_on A c)) = (fconst_on (vinsert a A) c)\"", "lemma fconst_on_vintersection: \n  \"fconst_on (A \\<inter>\\<^sub>\\<circ> B) c = fconst_on A c \\<inter>\\<^sub>\\<circ> fconst_on B c\"", "lemma fconst_on_vunion: \"fconst_on (A \\<union>\\<^sub>\\<circ> B) c = fconst_on A c \\<union>\\<^sub>\\<circ> fconst_on B c\"", "lemma fconst_on_vdiff: \"fconst_on (A -\\<^sub>\\<circ> B) c = fconst_on A c -\\<^sub>\\<circ> fconst_on B c\"", "lemma fconst_on_eq_ftimes: \"fconst_on A c = A \\<times>\\<^sub>\\<bullet> set {c}\"", "lemma fcomp_small[simp]: \"small {[a, c]\\<^sub>\\<circ> | a c. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and> [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\" \n  (is \\<open>small ?s\\<close>)", "lemma fcompI[intro]: \n  assumes \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\" \n  shows \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\"", "lemma fcompD[dest]: \n  assumes \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\"\n  shows \"\\<exists>b. [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\"", "lemma fcompE[elim]:\n  assumes \"ac \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\" \n  obtains a b c where \"ac = [a, c]\\<^sub>\\<circ>\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\" and \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fcomp_assoc: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<circ>\\<^sub>\\<bullet> t = r \\<circ>\\<^sub>\\<bullet> (s \\<circ>\\<^sub>\\<bullet> t)\"", "lemma fcomp_vempty_left[simp]: \"0 \\<circ>\\<^sub>\\<bullet> r = 0\"", "lemma fcomp_vempty_right[simp]: \"r \\<circ>\\<^sub>\\<bullet> 0 = 0\"", "lemma fcomp_mono:\n  assumes \"r' \\<subseteq>\\<^sub>\\<circ> r\" and \"s' \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"r' \\<circ>\\<^sub>\\<bullet> s' \\<subseteq>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\"", "lemma fcomp_vinsert_left[simp]: \n  \"vinsert ([a, b]\\<^sub>\\<circ>) s \\<circ>\\<^sub>\\<bullet> r = (set {[a, b]\\<^sub>\\<circ>} \\<circ>\\<^sub>\\<bullet> r) \\<union>\\<^sub>\\<circ> (s \\<circ>\\<^sub>\\<bullet> r)\"", "lemma fcomp_vinsert_right[simp]: \n  \"r \\<circ>\\<^sub>\\<bullet> vinsert [a, b]\\<^sub>\\<circ> s = (r \\<circ>\\<^sub>\\<bullet> set {[a, b]\\<^sub>\\<circ>}) \\<union>\\<^sub>\\<circ> (r \\<circ>\\<^sub>\\<bullet> s)\"", "lemma fcomp_vunion_left[simp]: \"(s \\<union>\\<^sub>\\<circ> t) \\<circ>\\<^sub>\\<bullet> r = (s \\<circ>\\<^sub>\\<bullet> r) \\<union>\\<^sub>\\<circ> (t \\<circ>\\<^sub>\\<bullet> r)\"", "lemma fcomp_vunion_right[simp]: \"r \\<circ>\\<^sub>\\<bullet> (s \\<union>\\<^sub>\\<circ> t) = (r \\<circ>\\<^sub>\\<bullet> s) \\<union>\\<^sub>\\<circ> (r \\<circ>\\<^sub>\\<bullet> t)\"", "lemma fcomp_fid_on_idem[simp]: \"fid_on A \\<circ>\\<^sub>\\<bullet> fid_on A = fid_on A\"", "lemma fcomp_fid_on[simp]: \"fid_on A \\<circ>\\<^sub>\\<bullet> fid_on B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\"", "lemma fcomp_fconst_on_fid_on[simp]: \"fconst_on A c \\<circ>\\<^sub>\\<bullet> fid_on A = fconst_on A c\"", "lemma fcomp_vsubset_vtimes:\n  assumes \"r \\<subseteq>\\<^sub>\\<circ> B \\<times>\\<^sub>\\<bullet> C\" and \"s \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\" \n  shows \"r \\<circ>\\<^sub>\\<bullet> s \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> C\"", "lemma fcomp_obtain_middle[elim]:\n  assumes \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f \\<circ>\\<^sub>\\<bullet> g\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> g\" and \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f\"", "lemma fconverse_small[simp]: \"small {[b, a]\\<^sub>\\<circ> | a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma fconverseI[sym, intro!]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"[b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\"", "lemma fconverseD[sym, dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\"\n  shows \"[b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fconverseE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\" \n  obtains a b where \"x = [b, a]\\<^sub>\\<circ>\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fconverse_iff: \"[b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> \\<longleftrightarrow> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fconverse_vempty[simp]: \"0\\<inverse>\\<^sub>\\<bullet> = 0\"", "lemma fconverse_vsingleton: \"(set {[a, b]\\<^sub>\\<circ>})\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ>}\"", "lemma fconverse_vdoubleton: \"(set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>})\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ>, [d, c]\\<^sub>\\<circ>}\"", "lemma fconverse_vinsert: \"(vinsert [a, b]\\<^sub>\\<circ> r)\\<inverse>\\<^sub>\\<bullet> = vinsert [b, a]\\<^sub>\\<circ> (r\\<inverse>\\<^sub>\\<bullet>)\"", "lemma fconverse_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s)\\<inverse>\\<^sub>\\<bullet> = r\\<inverse>\\<^sub>\\<bullet> \\<inter>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>\"", "lemma fconverse_vunion: \"(r \\<union>\\<^sub>\\<circ> s)\\<inverse>\\<^sub>\\<bullet> = r\\<inverse>\\<^sub>\\<bullet> \\<union>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>\"", "lemma fconverse_fid_on[simp]: \"(fid_on A)\\<inverse>\\<^sub>\\<bullet> = fid_on A\"", "lemma fconverse_fconst_on[simp]: \"(fconst_on A c)\\<inverse>\\<^sub>\\<bullet> = set {c} \\<times>\\<^sub>\\<bullet> A\"", "lemma fconverse_fcomp: \"(r \\<circ>\\<^sub>\\<bullet> s)\\<inverse>\\<^sub>\\<bullet> = s\\<inverse>\\<^sub>\\<bullet> \\<circ>\\<^sub>\\<bullet> r\\<inverse>\\<^sub>\\<bullet>\"", "lemma fconverse_ftimes: \"(A \\<times>\\<^sub>\\<bullet> B)\\<inverse>\\<^sub>\\<bullet> = (B \\<times>\\<^sub>\\<bullet> A)\"", "lemma fconverse_pred:\n  assumes \"small {[a, b]\\<^sub>\\<circ> | a b. P a b}\"\n  shows \"(set {[a, b]\\<^sub>\\<circ> | a b. P a b})\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ> | a b. P a b}\"", "lemma flrestriction_small[simp]: \"small {[a, b]\\<^sub>\\<circ> | a b. a \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma flrestrictionI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" \n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestrictionD[dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"  \n  shows \"a \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma flrestrictionE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"a \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma flrestriction_on_vempty[simp]: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> 0 = 0\"", "lemma flrestriction_vempty[simp]: \"0 \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = 0\"", "lemma flrestriction_vsingleton_in[simp]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ>}\"", "lemma flrestriction_vsingleton_nin[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = 0\"", "lemma flrestriction_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\"\n  shows \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B\"", "lemma flrestriction_vinsert_nin[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestriction_vinsert_in: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"", "lemma flrestriction_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestriction_vunion: \"(r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestriction_vdiff: \"(r -\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A -\\<^sub>\\<circ> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestriction_fid_on[simp]: \"(fid_on A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\"", "lemma flrestriction_fconst_on: \"(fconst_on A c) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B = (fconst_on B c) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestriction_fconst_on_commute:\n  assumes \"x \\<in>\\<^sub>\\<circ> fconst_on A c \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B\"\n  shows \"x \\<in>\\<^sub>\\<circ> fconst_on B c \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma flrestriction_fcomp[simp]: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<circ>\\<^sub>\\<bullet> (s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"", "lemma fcomp_rel_fid_on[simp]: \"r \\<circ>\\<^sub>\\<bullet> fid_on A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"", "lemma fcomp_fconst_on: \n  \"r \\<circ>\\<^sub>\\<bullet> (fconst_on A c) = (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> set {c}) \\<circ>\\<^sub>\\<bullet> (fconst_on A c)\"", "lemma flrestriction_vsubset_fpairs: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r\"", "lemma flrestriction_vsubset_frel: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r\"", "lemma frrestriction_small[simp]: \"small {[a, b]\\<^sub>\\<circ> | a b. b \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma frrestrictionI[intro!]: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" \n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"", "lemma frrestrictionD[dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"  \n  shows \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma frrestrictionE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma frrestriction_on_vempty[simp]: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> 0 = 0\"", "lemma frrestriction_vempty[simp]: \"0 \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = 0\"", "lemma frrestriction_vsingleton_in[simp]: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ>}\"", "lemma frrestriction_vsingleton_nin[simp]: \n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = 0\"", "lemma frrestriction_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\"\n  shows \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B\"", "lemma frrestriction_vinsert_nin[simp]:\n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"", "lemma frrestriction_vinsert_in: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma frrestriction_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"", "lemma frrestriction_vunion: \"(r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"", "lemma frrestriction_vdiff: \"(r -\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A -\\<^sub>\\<circ> s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"", "lemma frrestriction_fid_on[simp]: \"(fid_on A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\"", "lemma frrestriction_fconst_on:\n  assumes \"c \\<in>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B = fconst_on A c\"", "lemma frrestriction_fcomp[simp]: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<circ>\\<^sub>\\<bullet> s\"", "lemma fcomp_fid_on_rel[simp]: \"fid_on A \\<circ>\\<^sub>\\<bullet> r = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"", "lemma fcomp_fconst_on_rel: \"(fconst_on A c) \\<circ>\\<^sub>\\<bullet> r = (fconst_on A c) \\<circ>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma flrestriction_fconverse: \"r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>\"", "lemma frrestriction_fconverse: \"r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>\"", "lemma frrestriction_vsubset_rel: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r\"", "lemma frrestriction_vsubset_vpairs: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r\"", "lemma frestriction_small[simp]: \n  \"small {[a, b]\\<^sub>\\<circ> | a b. a \\<in>\\<^sub>\\<circ> A \\<and> b \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma frestrictionI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" \n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestrictionD[dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\"  \n  shows \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma frestrictionE[elim!]:\n  assumes \"x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma frestriction_on_vempty[simp]: \"r \\<restriction>\\<^sub>\\<bullet> 0 = 0\"", "lemma frestriction_vempty[simp]: \"0 \\<restriction>\\<^sub>\\<bullet> A = 0\"", "lemma frestriction_vsingleton_in[simp]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ>}\"", "lemma frestriction_vsingleton_nin_left[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A = 0\"", "lemma frestriction_vsingleton_nin_right[simp]: \n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A = 0\"", "lemma frestriction_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\"\n  shows \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> B\"", "lemma frestriction_vinsert_nin[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\" and \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestriction_vinsert_in: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sub>\\<bullet> A = vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sub>\\<bullet> A)\"", "lemma frestriction_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> s \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestriction_vunion: \"(r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestriction_vdiff: \"(r -\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A -\\<^sub>\\<circ> s \\<restriction>\\<^sub>\\<bullet> A\"", "lemma fid_on_frestriction[simp]: \"(fid_on A) \\<restriction>\\<^sub>\\<bullet> B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\"", "lemma frestriction_fconst_on_ex:\n  assumes \"c \\<in>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) \\<restriction>\\<^sub>\\<bullet> B = fconst_on (A \\<inter>\\<^sub>\\<circ> B) c\"", "lemma frestriction_fconst_on_nex:\n  assumes \"c \\<notin>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) \\<restriction>\\<^sub>\\<bullet> B = 0\"", "lemma frestriction_fcomp[simp]: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<circ>\\<^sub>\\<bullet> (s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"", "lemma frestriction_fconverse: \"r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>\"", "lemma frrestriction_flrestriction[simp]: \"(r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\"", "lemma flrestriction_frrestriction[simp]: \"(r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestriction_flrestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestriction_frrestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\"", "lemma frestriction_vsubset_fpairs: \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r\"", "lemma frestriction_vsubset_ftimes: \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\"", "lemma frestriction_vsubset_rel: \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r\"", "lemma fdomain_small[simp]: \"small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma fdomainI[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\"", "lemma fdomainD[dest]: \n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\"\n  shows \"\\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fdomainE[elim]:\n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fdomain_iff: \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<longleftrightarrow> (\\<exists>y. [a, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\"", "lemma fdomain_vempty[simp]: \"\\<D>\\<^sub>\\<bullet> 0 = 0\"", "lemma fdomain_vsingleton[simp]: \"\\<D>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {a}\"", "lemma fdomain_vdoubleton[simp]: \"\\<D>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) = set {a, c}\"", "lemma fdomain_mono: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\"\n  shows \"\\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> s\"", "lemma fdomain_vinsert[simp]: \"\\<D>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) = vinsert a (\\<D>\\<^sub>\\<bullet> r)\"", "lemma fdomain_vunion: \"\\<D>\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) = \\<D>\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B\"", "lemma fdomain_vintersection_vsubset: \"\\<D>\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B) \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B\"", "lemma fdomain_vdiff_vsubset: \"\\<D>\\<^sub>\\<bullet> A -\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)\"", "lemma fdomain_fid_on[simp]: \"\\<D>\\<^sub>\\<bullet> (fid_on A) = A\"", "lemma fdomain_fconst_on[simp]: \"\\<D>\\<^sub>\\<bullet> (fconst_on A c) = A\"", "lemma fdomain_flrestriction: \"\\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) = \\<D>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A\"", "lemma fdomain_vsubset_ftimes:\n  assumes \"fpairs r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\"\n  shows \"\\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> A\"", "lemma fdomain_vsubset_VUnion2: \"\\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\"", "lemma frange_small[simp]: \"small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma frangeI[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"", "lemma frangeD[dest]: \n  assumes \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"\n  shows \"\\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma frangeE[elim!]:\n  assumes \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"\n  obtains a where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma frange_iff: \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<longleftrightarrow> (\\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\"", "lemma frange_vempty[simp]: \"\\<R>\\<^sub>\\<bullet> 0 = 0\"", "lemma frange_vsingleton[simp]: \"\\<R>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {b}\"", "lemma frange_vdoubleton[simp]: \"\\<R>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) = set {b, d}\"", "lemma frange_mono: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\"", "lemma frange_vinsert[simp]: \"\\<R>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) = vinsert b (\\<R>\\<^sub>\\<bullet> r)\"", "lemma frange_vunion: \"\\<R>\\<^sub>\\<bullet> (r \\<union>\\<^sub>\\<circ> s) = \\<R>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\"", "lemma frange_vintersection_vsubset: \"\\<R>\\<^sub>\\<bullet> (r \\<inter>\\<^sub>\\<circ> s) \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\"", "lemma frange_vdiff_vsubset: \"\\<R>\\<^sub>\\<bullet> r -\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r -\\<^sub>\\<circ> s)\"", "lemma frange_fid_on[simp]: \"\\<R>\\<^sub>\\<bullet> (fid_on A) = A\"", "lemma frange_fconst_on_vempty[simp]: \"\\<R>\\<^sub>\\<bullet> (fconst_on 0 c) = 0\"", "lemma frange_fconst_on_ne[simp]: \n  assumes \"A \\<noteq> 0\"\n  shows \"\\<R>\\<^sub>\\<bullet> (fconst_on A c) = set {c}\"", "lemma frange_vrrestriction: \"\\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) = \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A\"", "lemma fdomain_fconverse[simp]: \"\\<D>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) = \\<R>\\<^sub>\\<bullet> r\"", "lemma frange_fconverse[simp]: \"\\<R>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) = \\<D>\\<^sub>\\<bullet> r\"", "lemma frange_iff_vdomain: \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<longleftrightarrow> (\\<exists>a\\<in>\\<^sub>\\<circ>\\<D>\\<^sub>\\<bullet> r. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\"", "lemma frange_vsubset_ftimes:\n  assumes \"fpairs r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\"\n  shows \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B\"", "lemma fpairs_vsubset_fdomain_frange[simp]: \"fpairs r \\<subseteq>\\<^sub>\\<circ> (\\<D>\\<^sub>\\<bullet> r) \\<times>\\<^sub>\\<bullet> (\\<R>\\<^sub>\\<bullet> r)\"", "lemma frange_vsubset_VUnion2: \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\"", "lemma ffieldI1[intro]: \n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"\n  shows \"a \\<in>\\<^sub>\\<circ> ffield r\"", "lemma ffieldI2[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"a \\<in>\\<^sub>\\<circ> ffield r\"", "lemma ffieldI3[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"b \\<in>\\<^sub>\\<circ> ffield r\"", "lemma ffieldD[intro]: \n  assumes \"a \\<in>\\<^sub>\\<circ> ffield r\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"", "lemma ffieldE[elim]:  \n  assumes \"a \\<in>\\<^sub>\\<circ> ffield r\" and \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow> P\"\n  shows P", "lemma ffield_pair[elim]:\n  assumes \"a \\<in>\\<^sub>\\<circ> ffield r\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or> [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \"", "lemma ffield_iff: \"a \\<in>\\<^sub>\\<circ> ffield r \\<longleftrightarrow> (\\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or> [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\"", "lemma ffield_vempty[simp]: \"ffield 0 = 0\"", "lemma ffield_vsingleton[simp]: \"ffield (set {[a, b]\\<^sub>\\<circ>}) = set {a, b}\"", "lemma ffield_vdoubleton[simp]: \n  \"ffield (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) = set {a, b, c, d}\"", "lemma ffield_mono:\n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"ffield r \\<subseteq>\\<^sub>\\<circ> ffield s\"", "lemma ffield_vinsert[simp]: \n  \"ffield (vinsert [a, b]\\<^sub>\\<circ> r) = set {a, b} \\<union>\\<^sub>\\<circ> (ffield r)\"", "lemma ffield_vunion[simp]: \"ffield (r \\<union>\\<^sub>\\<circ> s) = ffield r \\<union>\\<^sub>\\<circ> ffield s\"", "lemma fid_on_ffield[simp]: \"ffield (fid_on A) = A\"", "lemma fconst_on_ffield_ne[intro, simp]:\n  assumes \"A \\<noteq> 0\" \n  shows \"ffield (fconst_on A c) = vinsert c A\"", "lemma fconst_on_ffield_vempty[simp]: \"ffield (fconst_on 0 c) = 0\"", "lemma ffield_fconverse[simp]: \"ffield (r\\<inverse>\\<^sub>\\<bullet>) = ffield r\"", "lemma ffield_vsubset_VUnion2: \"\\<F>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\"", "lemma fimage_small[simp]: \"small {b. \\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma fimageI1: \n  assumes \"x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"\n  shows \"x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"", "lemma fimageI2[intro]:\n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"a \\<in>\\<^sub>\\<circ> A\" \n  shows \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"", "lemma fimageD[dest]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"\n  shows \"x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"", "lemma fimageE[elim]:\n  assumes \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"\n  obtains a where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"a \\<in>\\<^sub>\\<circ> A\"", "lemma fimage_iff: \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A \\<longleftrightarrow> (\\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\"", "lemma fimage_vempty[simp]: \"0 `\\<^sub>\\<bullet> A = 0\"", "lemma fimage_of_vempty[simp]: \"r `\\<^sub>\\<bullet> 0 = 0\"", "lemma fimage_vsingleton_in[intro, simp]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" \n  shows \"set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = set {b}\"", "lemma fimage_vsingleton_nin[intro, simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\" \n  shows \"set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = 0\"", "lemma fimage_vsingleton_vinsert[intro, simp]: \n  \"set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> vinsert a A = set {b}\"", "lemma fimage_mono: \n  assumes \"r' \\<subseteq>\\<^sub>\\<circ> r\" and \"A' \\<subseteq>\\<^sub>\\<circ> A\" \n  shows \"(r' `\\<^sub>\\<bullet> A') \\<subseteq>\\<^sub>\\<circ> (r `\\<^sub>\\<bullet> A)\"", "lemma fimage_vinsert: \"r `\\<^sub>\\<bullet> (vinsert a A) = r `\\<^sub>\\<bullet> set {a} \\<union>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"", "lemma fimage_vunion_left: \"(r \\<union>\\<^sub>\\<circ> s) `\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s `\\<^sub>\\<bullet> A\"", "lemma fimage_vunion_right: \"r `\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) = r `\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\"", "lemma fimage_vintersection: \"r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B) \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\"", "lemma fimage_vdiff: \"r `\\<^sub>\\<bullet> A -\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)\"", "lemma fimage_vsingleton_iff[iff]: \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> set {a} \\<longleftrightarrow> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"", "lemma fimage_is_vempty[iff]: \"r `\\<^sub>\\<bullet> A = 0 \\<longleftrightarrow> vdisjnt (\\<D>\\<^sub>\\<bullet> r) A\"", "lemma fid_on_fimage[simp]: \"(fid_on A) `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> B\"", "lemma fimage_fconst_on_ne[simp]: \n  assumes \"B \\<inter>\\<^sub>\\<circ> A \\<noteq> 0\" \n  shows \"(fconst_on A c) `\\<^sub>\\<bullet> B = set {c}\"", "lemma fimage_fconst_on_vempty[simp]: \n  assumes \"vdisjnt A B\"\n  shows \"(fconst_on A c) `\\<^sub>\\<bullet> B = 0\"", "lemma fimage_fconst_on_vsubset_const[simp]: \"(fconst_on A c) `\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> set {c}\"", "lemma fcomp_frange: \"\\<R>\\<^sub>\\<bullet> (r \\<circ>\\<^sub>\\<bullet> s) = r `\\<^sub>\\<bullet> (\\<R>\\<^sub>\\<bullet> s)\"", "lemma fcomp_fimage: \"(r \\<circ>\\<^sub>\\<bullet> s) `\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> (s `\\<^sub>\\<bullet> A)\"", "lemma fimage_flrestriction[simp]: \"(r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B = r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)\"", "lemma fimage_frrestriction[simp]: \"(r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\"", "lemma fimage_frestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> (r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B))\"", "lemma fimage_fdomain: \"r `\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = \\<R>\\<^sub>\\<bullet> r\"", "lemma fimage_eq_imp_fcomp: \n  assumes \"f `\\<^sub>\\<bullet> A = g `\\<^sub>\\<bullet> B\" \n  shows \"(h \\<circ>\\<^sub>\\<bullet> f) `\\<^sub>\\<bullet> A = (h \\<circ>\\<^sub>\\<bullet> g) `\\<^sub>\\<bullet> B\"", "lemma fcomp_rel_fconst_on_ftimes: \"r \\<circ>\\<^sub>\\<bullet> (fconst_on A c) = A \\<times>\\<^sub>\\<bullet> (r `\\<^sub>\\<bullet> set {c})\"", "lemma fimage_vsubset: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\" \n  shows \"r `\\<^sub>\\<bullet> C \\<subseteq>\\<^sub>\\<circ> B\"", "lemma fimage_set_def: \"r `\\<^sub>\\<bullet> A = set {b. \\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma fimage_vsingleton: \"r `\\<^sub>\\<bullet> set {a} = set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma fimage_strict_vsubset: \"f `\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> f `\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> f\"", "lemma finvimage_small[simp]: \"small {a. \\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma finvimageI[intro]:\n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"b \\<in>\\<^sub>\\<circ> A\" \n  shows \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"", "lemma finvimageD[dest]: \n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma finvimageE[elim]:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"b \\<in>\\<^sub>\\<circ> A\"", "lemma finvimageI1: \n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"\n  shows \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"", "lemma finvimageD1: \n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma finvimageE1:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \" and \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<Longrightarrow> P\"\n  shows P", "lemma finvimageI2: \n  assumes \"a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"", "lemma finvimageD2:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\"", "lemma finvimageE2:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<circ> A\" and \"a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<circ> `\\<^sub>\\<circ> A \\<Longrightarrow> P\"\n  shows P", "lemma finvimage_iff: \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<longleftrightarrow> (\\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\"", "lemma finvimage_iff1: \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<longleftrightarrow> a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma finvimage_iff2: \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<longleftrightarrow> a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\"", "lemma finvimage_vempty[simp]: \"0 -`\\<^sub>\\<bullet> A = 0\"", "lemma finvimage_of_vempty[simp]: \"r -`\\<^sub>\\<bullet> 0 = 0\"", "lemma finvimage_vsingleton_in[intro, simp]: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = set {a}\"", "lemma finvimage_vsingleton_nin[intro, simp]: \n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = 0\"", "lemma finvimage_vsingleton_vinsert[intro, simp]: \n  \"set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> vinsert b A = set {a}\"", "lemma finvimage_mono: \n  assumes \"r' \\<subseteq>\\<^sub>\\<circ> r\" and \"A' \\<subseteq>\\<^sub>\\<circ> A\"\n  shows \"(r' -`\\<^sub>\\<bullet> A') \\<subseteq>\\<^sub>\\<circ> (r -`\\<^sub>\\<bullet> A)\"", "lemma finvimage_vinsert: \"r -`\\<^sub>\\<bullet> (vinsert a A) = r -`\\<^sub>\\<bullet> set {a} \\<union>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"", "lemma finvimage_vunion_left: \"(r \\<union>\\<^sub>\\<circ> s) -`\\<^sub>\\<bullet> A = r -`\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s -`\\<^sub>\\<bullet> A\"", "lemma finvimage_vunion_right: \"r -`\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) = r -`\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\"", "lemma finvimage_vintersection: \"r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B) \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\"", "lemma finvimage_vdiff: \"r -`\\<^sub>\\<bullet> A -\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)\"", "lemma finvimage_set_def: \"r -`\\<^sub>\\<bullet> A = set {a. \\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\"", "lemma finvimage_eq_fdomain_frestriction: \"r -`\\<^sub>\\<bullet> A = \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma finvimage_frange[simp]: \"r -`\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = \\<D>\\<^sub>\\<bullet> r\"", "lemma finvimage_frange_vsubset[simp]: \n  assumes \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B\" \n  shows \"r -`\\<^sub>\\<bullet> B = \\<D>\\<^sub>\\<bullet> r\"", "lemma finvimage_fid_on[simp]: \"(fid_on A) -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> B\"", "lemma finvimage_fconst_on_vsubset_fdomain[simp]: \"(fconst_on A c) -`\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> A\"", "lemma finvimage_fconst_on_ne[simp]: \n  assumes \"c \\<in>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) -`\\<^sub>\\<bullet> B = A\"", "lemma finvimage_fconst_on_vempty[simp]: \n  assumes \"c \\<notin>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) -`\\<^sub>\\<bullet> B = 0\"", "lemma finvimage_fcomp: \"(g \\<circ>\\<^sub>\\<bullet> f) -`\\<^sub>\\<bullet> x = f -`\\<^sub>\\<bullet> (g -`\\<^sub>\\<bullet> x) \"", "lemma finvimage_fconverse[simp]: \"r\\<inverse>\\<^sub>\\<bullet> -`\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> A\"", "lemma finvimage_flrestriction[simp]: \"(r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\"", "lemma finvimage_frrestriction[simp]: \"(r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B = (r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B))\"", "lemma finvimage_frestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> (r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B))\"", "lemma fdomain_fcomp[simp]: \"\\<D>\\<^sub>\\<bullet> (r \\<circ>\\<^sub>\\<bullet> s) = s -`\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r\"", "lemma fpairs_eqI[intro!]:\n  assumes \"\\<And>x. x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> \\<exists>a b. x = [a, b]\\<^sub>\\<circ>\"\n  shows \"fpairs r = r\"", "lemma fpairs_eqD[dest]: \n  assumes \"fpairs r = r\"\n  shows \"\\<And>x. x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> \\<exists>a b. x = [a, b]\\<^sub>\\<circ>\"", "lemma fpairs_eqE[elim!]: \n  assumes \"fpairs r = r\" and \"(\\<And>x. x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> \\<exists>a b. x = [a, b]\\<^sub>\\<circ>) \\<Longrightarrow> P\"\n  shows P", "lemmas fbrelationI[intro!] = fbrelation.intro", "lemmas fbrelationD[dest!] = fbrelation.fbrelation", "lemma fbrelationE[elim!]: \n  assumes \"fbrelation r\" and \"(fpairs r = r) \\<Longrightarrow> P\"\n  shows P", "lemma fbrelationE1:\n  assumes \"fbrelation r\" and \"x \\<in>\\<^sub>\\<circ> r\" \n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\"", "lemma fbrelationD1[dest]:\n  assumes \"fbrelation r\" and \"x \\<in>\\<^sub>\\<circ> r\" \n  shows \"\\<exists>a b. x = [a, b]\\<^sub>\\<circ>\"", "lemma fbrelation_vsubset:\n  assumes \"fbrelation s\" and \"r \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"fbrelation r\"", "lemma fbrelation_vinsert: \"fbrelation (vinsert [a, b]\\<^sub>\\<circ> r) \\<longleftrightarrow> fbrelation r\"", "lemma (in fbrelation) fbrelation_vinsertI: \"fbrelation (vinsert [a, b]\\<^sub>\\<circ> r)\"", "lemma fbrelation_vinsertD[dest]:\n  assumes \"fbrelation (vinsert \\<langle>a, b\\<rangle> r)\"\n  shows \"fbrelation r\"", "lemma fbrelation_vunion: \"fbrelation (r \\<union>\\<^sub>\\<circ> s) \\<longleftrightarrow> fbrelation r \\<and> fbrelation s\"", "lemma (in fbrelation_pair) fbrelation_vunionI: \"fbrelation (r\\<^sub>1 \\<union>\\<^sub>\\<circ> r\\<^sub>2)\"", "lemma fbrelation_vunionD[dest]: \n  assumes \"fbrelation (r \\<union>\\<^sub>\\<circ> s)\"\n  shows \"fbrelation r\" and \"fbrelation s\"", "lemma (in fbrelation) fbrelation_vintersectionI: \"fbrelation (r \\<inter>\\<^sub>\\<circ> s)\"", "lemma (in fbrelation) fbrelation_vdiffI: \"fbrelation (r -\\<^sub>\\<circ> s)\"", "lemma fbrelation_vempty: \"fbrelation 0\"", "lemma fbrelation_vsingleton: \"fbrelation (set {[a, b]\\<^sub>\\<circ>})\"", "lemma fbrelation_vdoubleton: \"fbrelation (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>})\"", "lemma fbrelation_sid_on[simp]: \"fbrelation (fid_on A)\"", "lemma fbrelation_fconst_on[simp]: \"fbrelation (fconst_on A c)\"", "lemma (in fbrelation_pair) fbrelation_fcomp: \"fbrelation (r\\<^sub>1 \\<circ>\\<^sub>\\<bullet> r\\<^sub>2)\"", "lemma (in fbrelation) fbrelation_fconverse: \"fbrelation (r\\<inverse>\\<^sub>\\<bullet>)\"", "lemma fbrelation_flrestriction[intro, simp]: \"fbrelation (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"", "lemma fbrelation_frrestriction[intro, simp]: \"fbrelation (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"", "lemma fbrelation_frestriction[intro, simp]: \"fbrelation (r \\<restriction>\\<^sub>\\<bullet> A)\"", "lemma (in fbrelation) fconverse_fconverse[simp]: \"(r\\<inverse>\\<^sub>\\<bullet>)\\<inverse>\\<^sub>\\<bullet> = r\"", "lemma (in fbrelation_pair) fconverse_mono[simp]: \"r\\<^sub>1\\<inverse>\\<^sub>\\<bullet> \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2\\<inverse>\\<^sub>\\<bullet> \\<longleftrightarrow> r\\<^sub>1 \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2\"", "lemma (in fbrelation_pair) fconverse_inject[simp]: \"r\\<^sub>1\\<inverse>\\<^sub>\\<bullet> = r\\<^sub>2\\<inverse>\\<^sub>\\<bullet> \\<longleftrightarrow> r\\<^sub>1 = r\\<^sub>2\"", "lemma (in fbrelation) fconverse_vsubset_swap_2: \n  assumes \"r\\<inverse>\\<^sub>\\<bullet> \\<subseteq>\\<^sub>\\<circ> s\"\n  shows \"r \\<subseteq>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>\"", "lemma (in fbrelation) flrestriction_fdomain[simp]: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = r\"", "lemma (in fbrelation) frrestriction_frange[simp]: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = r\"", "lemma vsubset_vtimes_fbrelation: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\"\n  shows \"fbrelation r\"", "lemma (in fbrelation) fbrelation_vintersection_vdomain:\n  assumes \"vdisjnt (\\<D>\\<^sub>\\<bullet> r) (\\<D>\\<^sub>\\<bullet> s)\"\n  shows \"vdisjnt r s\"", "lemma (in fbrelation) fbrelation_vintersection_vrange:\n  assumes \"vdisjnt (\\<R>\\<^sub>\\<bullet> r) (\\<R>\\<^sub>\\<bullet> s)\"\n  shows \"vdisjnt r s\"", "lemma (in fbrelation) fbrelation_vintersection_vfield:\n  assumes \"vdisjnt (ffield r) (ffield s)\"\n  shows \"vdisjnt r s\"", "lemma (in fbrelation) vdomain_vrange_vtimes: \"r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<times>\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r\"", "lemma (in fbrelation) fconverse_eq_frel[intro, simp]:\n  assumes \"\\<And>a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"r\\<inverse>\\<^sub>\\<bullet> = r\"", "lemma fcomp_fconverse_frel_eq_frel_fbrelationI:\n  assumes \"r\\<inverse>\\<^sub>\\<bullet> \\<circ>\\<^sub>\\<bullet> r = r\"\n  shows \"fbrelation r\"", "lemmas [intro, simp] = fbrelation.fconverse_fconverse\n  and fconverse_eq_frel[intro, simp] = fbrelation.fconverse_eq_frel", "lemmas_with[OF fbrelation_pair.intro[OF r\\<^sub>1 r\\<^sub>2]] :\n  fbrelation_fconverse_mono[intro, simp] = fbrelation_pair.fconverse_mono\n  and fbrelation_frrestriction_srange[intro, simp] = \n    fbrelation_pair.fconverse_inject"], "translations": [["", "lemma fpair_iff[simp]: \"([a, b]\\<^sub>\\<circ> = [a', b']\\<^sub>\\<circ>) = (a = a' \\<and> b = b')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a, b]\\<^sub>\\<circ> = [a', b']\\<^sub>\\<circ>) = (a = a' \\<and> b = b')", "by simp"], ["", "lemmas fpair_inject[elim!] = fpair_iff[THEN iffD1, THEN conjE]"], ["", "subsection\\<open>\\<open>fpairs\\<close>\\<close>"], ["", "definition fpairs :: \"V \\<Rightarrow> V\" where\n  \"fpairs r = set {x. x \\<in>\\<^sub>\\<circ> r \\<and> (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}\""], ["", "lemma small_fpairs[simp]: \"small {x. x \\<in>\\<^sub>\\<circ> r \\<and> (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {x. x \\<in>\\<^sub>\\<circ> r \\<and>\n         (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}", "by (rule down[of _ r]) clarsimp"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fpairsI[intro]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r\" and \"x = [a, b]\\<^sub>\\<circ>\" \n  shows \"x \\<in>\\<^sub>\\<circ> fpairs r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> fpairs r", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r\n  x = [a, b]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> fpairs r", "unfolding fpairs_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r\n  x = [a, b]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> set {x. x \\<in>\\<^sub>\\<circ> r \\<and>\n                                  (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}", "by auto"], ["", "lemma fpairsD[dest]:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\" \n  shows \"x \\<in>\\<^sub>\\<circ> r\" and \"\\<exists>a b. x = [a, b]\\<^sub>\\<circ>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r &&& \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fpairs r\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r &&& \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "unfolding fpairs_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {x. x \\<in>\\<^sub>\\<circ> r \\<and>\n                                (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r &&& \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "by auto"], ["", "lemma fpairsE[elim]:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fpairs r\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding fpairs_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {x. x \\<in>\\<^sub>\\<circ> r \\<and>\n                                (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)}\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma fpairs_iff: \"x \\<in>\\<^sub>\\<circ> fpairs r \\<longleftrightarrow> x \\<in>\\<^sub>\\<circ> r \\<and> (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<in>\\<^sub>\\<circ> fpairs r) =\n    (x \\<in>\\<^sub>\\<circ> r \\<and>\n     (\\<exists>a b. x = [a, b]\\<^sub>\\<circ>))", "by auto"], ["", "text\\<open>Elementary properties.\\<close>"], ["", "lemma fpairs_iff_elts: \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r \\<longleftrightarrow> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r) =\n    ([a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fpairs_vempty[simp]: \"fpairs 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by auto"], ["", "lemma fpairs_vsingleton[simp]: \"fpairs (set {[a, b]\\<^sub>\\<circ>}) = set {[a, b]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs (set {[a, b]\\<^sub>\\<circ>}) = set {[a, b]\\<^sub>\\<circ>}", "by auto"], ["", "lemma fpairs_vinsert: \"fpairs (vinsert [a, b]\\<^sub>\\<circ> A) = set {[a, b]\\<^sub>\\<circ>} \\<union>\\<^sub>\\<circ> fpairs A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs (vinsert [a, b]\\<^sub>\\<circ> A) =\n    set {[a, b]\\<^sub>\\<circ>} \\<union>\\<^sub>\\<circ> fpairs A", "by auto"], ["", "lemma fpairs_mono:\n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\"\n  shows \"fpairs r \\<subseteq>\\<^sub>\\<circ> fpairs s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs r \\<subseteq>\\<^sub>\\<circ> fpairs s", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. fpairs r \\<subseteq>\\<^sub>\\<circ> fpairs s", "by blast"], ["", "lemma fpairs_vunion: \"fpairs (A \\<union>\\<^sub>\\<circ> B) = fpairs A \\<union>\\<^sub>\\<circ> fpairs B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs (A \\<union>\\<^sub>\\<circ> B) =\n    fpairs A \\<union>\\<^sub>\\<circ> fpairs B", "by auto"], ["", "lemma fpairs_vintersection: \"fpairs (A \\<inter>\\<^sub>\\<circ> B) = fpairs A \\<inter>\\<^sub>\\<circ> fpairs B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs (A \\<inter>\\<^sub>\\<circ> B) =\n    fpairs A \\<inter>\\<^sub>\\<circ> fpairs B", "by auto"], ["", "lemma fpairs_vdiff: \"fpairs (A -\\<^sub>\\<circ> B) = fpairs A -\\<^sub>\\<circ> fpairs B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs (A -\\<^sub>\\<circ> B) = fpairs A -\\<^sub>\\<circ> fpairs B", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fpairs_ex_vfst:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\"\n  shows \"\\<exists>b. [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "from assms"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> fpairs r", "have xr: \"x \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fpairs r\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "moreover"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "from assms"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> fpairs r", "obtain b where x_def: \"x = [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fpairs r\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        x =\n        [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x = [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> r\n  x = [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>", "have \"[x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r\n  x = [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "then"], ["proof (chain)\npicking this:\n  [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "show ?thesis"], ["proof (prove)\nusing this:\n  [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  \\<exists>b.\n     [x\\<lparr>0\\<^sub>\\<nat>\\<rparr>, b]\\<^sub>\\<circ>\n     \\<in>\\<^sub>\\<circ> r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fpairs_ex_vsnd:\n  assumes \"x \\<in>\\<^sub>\\<circ> fpairs r\"\n  shows \"\\<exists>a. [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "from assms"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> fpairs r", "have xr: \"x \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fpairs r\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "moreover"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "from assms"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> fpairs r", "obtain a where x_def: \"x = [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fpairs r\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        x =\n        [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: nat_omega_simps)"], ["proof (state)\nthis:\n  x = [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> r\n  x = [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>", "have \"[a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r\n  x = [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "then"], ["proof (chain)\npicking this:\n  [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "show ?thesis"], ["proof (prove)\nusing this:\n  [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n       \\<in>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  \\<exists>a.\n     [a, x\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n     \\<in>\\<^sub>\\<circ> r\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fpair_vcpower2I[intro]:\n  assumes \"a \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\" and \"b \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\"\n  shows \"vconcat [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vconcat [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. vconcat [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "from assms"], ["proof (chain)\npicking this:\n  a \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\n  b \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>", "obtain a' b' \n    where a_def: \"a = [a']\\<^sub>\\<circ>\" and b_def: \"b = [b']\\<^sub>\\<circ>\" and \"a'\\<in>\\<^sub>\\<circ> A\" and \"b'\\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\n  b \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 1\\<^sub>\\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>a' b'.\n        \\<lbrakk>a = [a']\\<^sub>\\<circ>; b = [b']\\<^sub>\\<circ>;\n         a' \\<in>\\<^sub>\\<circ> A; b' \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (force elim: vcons_vcpower1E)"], ["proof (state)\nthis:\n  a = [a']\\<^sub>\\<circ>\n  b = [b']\\<^sub>\\<circ>\n  a' \\<in>\\<^sub>\\<circ> A\n  b' \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vconcat [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "then"], ["proof (chain)\npicking this:\n  a = [a']\\<^sub>\\<circ>\n  b = [b']\\<^sub>\\<circ>\n  a' \\<in>\\<^sub>\\<circ> A\n  b' \\<in>\\<^sub>\\<circ> A", "show ?thesis"], ["proof (prove)\nusing this:\n  a = [a']\\<^sub>\\<circ>\n  b = [b']\\<^sub>\\<circ>\n  a' \\<in>\\<^sub>\\<circ> A\n  b' \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vconcat [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "by (auto simp: nat_omega_simps)"], ["proof (state)\nthis:\n  vconcat [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Constructors\\<close>"], ["", "subsubsection\\<open>Identity relation\\<close>"], ["", "definition fid_on :: \"V \\<Rightarrow> V\"\n  where \"fid_on A = set {[a, a]\\<^sub>\\<circ> | a. a \\<in>\\<^sub>\\<circ> A}\""], ["", "lemma fid_on_small[simp]: \"small {[a, a]\\<^sub>\\<circ> | a. a \\<in>\\<^sub>\\<circ> A}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small {[a, a]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}", "proof(rule down[of _ \\<open>A ^\\<^sub>\\<times> (2\\<^sub>\\<nat>)\\<close>], intro subsetI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, a]\\<^sub>\\<circ> |a.\n                a \\<in>\\<^sub>\\<circ> A} \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, a]\\<^sub>\\<circ> |a.\n                a \\<in>\\<^sub>\\<circ> A} \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "assume \"x \\<in> {[a, a]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}\""], ["proof (state)\nthis:\n  x \\<in> {[a, a]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, a]\\<^sub>\\<circ> |a.\n                a \\<in>\\<^sub>\\<circ> A} \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "then"], ["proof (chain)\npicking this:\n  x \\<in> {[a, a]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}", "obtain a where x_def: \"x = [a, a]\\<^sub>\\<circ>\" and \"a \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\nusing this:\n  x \\<in> {[a, a]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>x = [a, a]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by clarsimp"], ["proof (state)\nthis:\n  x = [a, a]\\<^sub>\\<circ>\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, a]\\<^sub>\\<circ> |a.\n                a \\<in>\\<^sub>\\<circ> A} \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "interpret vfsequence \\<open>[a, a]\\<^sub>\\<circ>\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. vfsequence [a, a]\\<^sub>\\<circ>", "by simp"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, a]\\<^sub>\\<circ> |a.\n                a \\<in>\\<^sub>\\<circ> A} \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "have vcard_aa: \"2\\<^sub>\\<nat> = vcard [a, a]\\<^sub>\\<circ>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2\\<^sub>\\<nat> = vcard [a, a]\\<^sub>\\<circ>", "by (simp add: nat_omega_simps)"], ["proof (state)\nthis:\n  2\\<^sub>\\<nat> = vcard [a, a]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, a]\\<^sub>\\<circ> |a.\n                a \\<in>\\<^sub>\\<circ> A} \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "from \\<open>a \\<in>\\<^sub>\\<circ> A\\<close>"], ["proof (chain)\npicking this:\n  a \\<in>\\<^sub>\\<circ> A", "show \"x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\""], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "unfolding x_def vcard_aa"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. [a, a]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> vcard [a, a]\\<^sub>\\<circ>", "by (intro vfsequence_vrange_vcpower) auto"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fid_on_eqI: \n  assumes \"a = b\" and \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A", "using assms"], ["proof (prove)\nusing this:\n  a = b\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A", "by (simp add: fid_on_def)"], ["", "lemma fid_onI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"[a, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A", "by (rule fid_on_eqI) (simp_all add: assms)"], ["", "lemma fid_onD[dest!]: \n  assumes \"[a, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\"\n  shows \"a \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A", "using assms"], ["proof (prove)\nusing this:\n  [a, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A", "unfolding fid_on_def"], ["proof (prove)\nusing this:\n  [a, a]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[a, a]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A", "by auto"], ["", "lemma fid_onE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> fid_on A\" and \"\\<exists>a\\<in>\\<^sub>\\<circ>A. x = [a, a]\\<^sub>\\<circ> \\<Longrightarrow> P\" \n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fid_on A\n  \\<exists>a\\<in>elts A. x = [a, a]\\<^sub>\\<circ> \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "unfolding fid_on_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {[a, a]\\<^sub>\\<circ> |a.\n                             a \\<in>\\<^sub>\\<circ> A}\n  \\<exists>a\\<in>elts A. x = [a, a]\\<^sub>\\<circ> \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "by auto"], ["", "lemma fid_on_iff: \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A \\<longleftrightarrow> a = b \\<and> a \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fid_on A) =\n    (a = b \\<and> a \\<in>\\<^sub>\\<circ> A)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fid_on_vempty[simp]: \"fid_on 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by auto"], ["", "lemma fid_on_vsingleton[simp]: \"fid_on (set {a}) = set {[a, a]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on (set {a}) = set {[a, a]\\<^sub>\\<circ>}", "by auto"], ["", "lemma fid_on_vdoubleton: \"fid_on (set {a, b}) = set {[a, a]\\<^sub>\\<circ>, [b, b]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on (set {a, b}) = set {[a, a]\\<^sub>\\<circ>, [b, b]\\<^sub>\\<circ>}", "by force"], ["", "lemma fid_on_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\" \n  shows \"fid_on A \\<subseteq>\\<^sub>\\<circ> fid_on B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<subseteq>\\<^sub>\\<circ> fid_on B", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. fid_on A \\<subseteq>\\<^sub>\\<circ> fid_on B", "by auto"], ["", "lemma fid_on_vinsert: \"vinsert [a, a]\\<^sub>\\<circ> (fid_on A) = fid_on (vinsert a A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, a]\\<^sub>\\<circ> (fid_on A) = fid_on (vinsert a A)", "by auto"], ["", "lemma fid_on_vintersection: \"fid_on (A \\<inter>\\<^sub>\\<circ> B) = fid_on A \\<inter>\\<^sub>\\<circ> fid_on B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on (A \\<inter>\\<^sub>\\<circ> B) =\n    fid_on A \\<inter>\\<^sub>\\<circ> fid_on B", "by auto"], ["", "lemma fid_on_vunion: \"fid_on (A \\<union>\\<^sub>\\<circ> B) = fid_on A \\<union>\\<^sub>\\<circ> fid_on B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on (A \\<union>\\<^sub>\\<circ> B) =\n    fid_on A \\<union>\\<^sub>\\<circ> fid_on B", "by auto"], ["", "lemma fid_on_vdiff: \"fid_on (A -\\<^sub>\\<circ> B) = fid_on A -\\<^sub>\\<circ> fid_on B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on (A -\\<^sub>\\<circ> B) = fid_on A -\\<^sub>\\<circ> fid_on B", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fid_on_vsubset_vcpower: \"fid_on A \\<subseteq>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<subseteq>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "by force"], ["", "subsubsection\\<open>Constant function\\<close>"], ["", "definition fconst_on :: \"V \\<Rightarrow> V \\<Rightarrow> V\"\n  where \"fconst_on A c = set {[a, c]\\<^sub>\\<circ> | a. a \\<in>\\<^sub>\\<circ> A}\""], ["", "lemma small_fconst_on[simp]: \"small {[a, c]\\<^sub>\\<circ> | a. a \\<in>\\<^sub>\\<circ> A}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small {[a, c]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}", "by (rule down[of _ \\<open>A \\<times>\\<^sub>\\<bullet> set {c}\\<close>]) blast"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fconst_onI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c", "unfolding fconst_on_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> set {[a, c]\\<^sub>\\<circ> |a.\n                             a \\<in>\\<^sub>\\<circ> A}", "by simp"], ["", "lemma fconst_onD[dest!]: \n  assumes \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c\"\n  shows \"a \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A", "using assms"], ["proof (prove)\nusing this:\n  [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A", "unfolding fconst_on_def"], ["proof (prove)\nusing this:\n  [a, c]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[a, c]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> A}\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A", "by simp"], ["", "lemma fconst_onE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> fconst_on A c\"\n  obtains a where \"a \\<in>\\<^sub>\\<circ> A\" and \"x = [a, c]\\<^sub>\\<circ>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in>\\<^sub>\\<circ> A; x = [a, c]\\<^sub>\\<circ>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fconst_on A c\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in>\\<^sub>\\<circ> A; x = [a, c]\\<^sub>\\<circ>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding fconst_on_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {[a, c]\\<^sub>\\<circ> |a.\n                             a \\<in>\\<^sub>\\<circ> A}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in>\\<^sub>\\<circ> A; x = [a, c]\\<^sub>\\<circ>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma fconst_on_iff: \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c \\<longleftrightarrow> a \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fconst_on A c) =\n    (a \\<in>\\<^sub>\\<circ> A)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fconst_on_vempty[simp]: \"fconst_on 0 c = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on []\\<^sub>\\<circ> c = []\\<^sub>\\<circ>", "unfolding fconst_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, c]\\<^sub>\\<circ> |a. a \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>} =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma fconst_on_vsingleton[simp]: \"fconst_on (set {a}) c = set {[a, c]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on (set {a}) c = set {[a, c]\\<^sub>\\<circ>}", "by auto"], ["", "lemma fconst_on_vdoubleton: \"fconst_on (set {a, b}) c = set {[a, c]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on (set {a, b}) c =\n    set {[a, c]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>}", "by force"], ["", "lemma fconst_on_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\" \n  shows \"fconst_on A c \\<subseteq>\\<^sub>\\<circ> fconst_on B c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<subseteq>\\<^sub>\\<circ> fconst_on B c", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. fconst_on A c \\<subseteq>\\<^sub>\\<circ> fconst_on B c", "by auto"], ["", "lemma fconst_on_vinsert:\n  \"(vinsert [a, c]\\<^sub>\\<circ> (fconst_on A c)) = (fconst_on (vinsert a A) c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, c]\\<^sub>\\<circ> (fconst_on A c) = fconst_on (vinsert a A) c", "by auto"], ["", "lemma fconst_on_vintersection: \n  \"fconst_on (A \\<inter>\\<^sub>\\<circ> B) c = fconst_on A c \\<inter>\\<^sub>\\<circ> fconst_on B c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on (A \\<inter>\\<^sub>\\<circ> B) c =\n    fconst_on A c \\<inter>\\<^sub>\\<circ> fconst_on B c", "by auto"], ["", "lemma fconst_on_vunion: \"fconst_on (A \\<union>\\<^sub>\\<circ> B) c = fconst_on A c \\<union>\\<^sub>\\<circ> fconst_on B c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on (A \\<union>\\<^sub>\\<circ> B) c =\n    fconst_on A c \\<union>\\<^sub>\\<circ> fconst_on B c", "by auto"], ["", "lemma fconst_on_vdiff: \"fconst_on (A -\\<^sub>\\<circ> B) c = fconst_on A c -\\<^sub>\\<circ> fconst_on B c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on (A -\\<^sub>\\<circ> B) c =\n    fconst_on A c -\\<^sub>\\<circ> fconst_on B c", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fconst_on_eq_ftimes: \"fconst_on A c = A \\<times>\\<^sub>\\<bullet> set {c}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c = A \\<times>\\<^sub>\\<bullet> set {c}", "by blast"], ["", "subsubsection\\<open>Composition\\<close>"], ["", "definition fcomp :: \"V \\<Rightarrow> V \\<Rightarrow> V\" (infixr \\<open>\\<circ>\\<^sub>\\<bullet>\\<close> 75)\n  where \"r \\<circ>\\<^sub>\\<bullet> s = set {[a, c]\\<^sub>\\<circ> | a c. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and> [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "notation fcomp (infixr \"\\<circ>\\<^sub>\\<bullet>\" 75)"], ["", "lemma fcomp_small[simp]: \"small {[a, c]\\<^sub>\\<circ> | a c. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and> [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\" \n  (is \\<open>small ?s\\<close>)"], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "define comp' where \"comp' = (\\<lambda>\\<langle>ab, cd\\<rangle>. [ab\\<lparr>0\\<^sub>\\<nat>\\<rparr>, cd\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>)\""], ["proof (state)\nthis:\n  comp' =\n  (\\<lambda>\\<langle>ab, cd\\<rangle>.\n      [ab\\<lparr>0\\<^sub>\\<nat>\\<rparr>,\n       cd\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>)\n\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have \"small (elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small (elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))", "by simp"], ["proof (state)\nthis:\n  small (elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\n\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "then"], ["proof (chain)\npicking this:\n  small (elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))", "have small_comp: \"small (comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\""], ["proof (prove)\nusing this:\n  small (elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\n\ngoal (1 subgoal):\n 1. small (comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))", "by simp"], ["proof (state)\nthis:\n  small (comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\n\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have ss: \"?s \\<subseteq> (comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {[a, c]\\<^sub>\\<circ> |a c.\n     \\<exists>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n        [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n                \\<exists>b.\n                   [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n                   [b, c]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r} \\<Longrightarrow>\n       x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n                \\<exists>b.\n                   [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n                   [b, c]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r} \\<Longrightarrow>\n       x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "assume \"x \\<in> ?s\""], ["proof (state)\nthis:\n  x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n           \\<exists>b.\n              [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n              [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n                \\<exists>b.\n                   [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n                   [b, c]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r} \\<Longrightarrow>\n       x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n           \\<exists>b.\n              [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n              [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "obtain a b c where x_def: \"x = [a, c]\\<^sub>\\<circ>\" \n      and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\" \n      and \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n           \\<exists>b.\n              [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n              [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>a c b.\n        \\<lbrakk>x = [a, c]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s;\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x = [a, c]\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\n  [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n                \\<exists>b.\n                   [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n                   [b, c]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r} \\<Longrightarrow>\n       x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  x = [a, c]\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\n  [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "have abbc: \"\\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle> \\<in>\\<^sub>\\<circ> vpairs (s \\<times>\\<^sub>\\<circ> r)\""], ["proof (prove)\nusing this:\n  x = [a, c]\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\n  [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n    \\<in>\\<^sub>\\<circ> vpairs (s \\<times>\\<^sub>\\<circ> r)", "by (simp add: vpairs_iff_elts)"], ["proof (state)\nthis:\n  \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n  \\<in>\\<^sub>\\<circ> vpairs (s \\<times>\\<^sub>\\<circ> r)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n                \\<exists>b.\n                   [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n                   [b, c]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r} \\<Longrightarrow>\n       x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "have x_def': \"x = comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>", "unfolding comp'_def x_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ> =\n    (\\<lambda>\\<langle>ab, cd\\<rangle>.\n        [ab\\<lparr>0\\<^sub>\\<nat>\\<rparr>,\n         cd\\<lparr>1\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>)\n     \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>", "by (auto simp: nat_omega_simps)"], ["proof (state)\nthis:\n  x = comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {[a, c]\\<^sub>\\<circ> |a c.\n                \\<exists>b.\n                   [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n                   [b, c]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r} \\<Longrightarrow>\n       x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  x = comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>", "show \"x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))\""], ["proof (prove)\nusing this:\n  x = comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n\ngoal (1 subgoal):\n 1. x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "unfolding x_def'"], ["proof (prove)\nusing this:\n  comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle> =\n  comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n\ngoal (1 subgoal):\n 1. comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n    \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "using abbc"], ["proof (prove)\nusing this:\n  comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle> =\n  comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n  \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n  \\<in>\\<^sub>\\<circ> vpairs (s \\<times>\\<^sub>\\<circ> r)\n\ngoal (1 subgoal):\n 1. comp' \\<langle>[a, b]\\<^sub>\\<circ>, [b, c]\\<^sub>\\<circ>\\<rangle>\n    \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "by auto"], ["proof (state)\nthis:\n  x \\<in> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {[a, c]\\<^sub>\\<circ> |a c.\n   \\<exists>b.\n      [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n      [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))\n\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "with small_comp"], ["proof (chain)\npicking this:\n  small (comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\n  {[a, c]\\<^sub>\\<circ> |a c.\n   \\<exists>b.\n      [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n      [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))", "show ?thesis"], ["proof (prove)\nusing this:\n  small (comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r)))\n  {[a, c]\\<^sub>\\<circ> |a c.\n   \\<exists>b.\n      [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n      [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> comp' ` elts (vpairs (s \\<times>\\<^sub>\\<circ> r))\n\ngoal (1 subgoal):\n 1. small\n     {[a, c]\\<^sub>\\<circ> |a c.\n      \\<exists>b.\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (meson smaller_than_small)"], ["proof (state)\nthis:\n  small\n   {[a, c]\\<^sub>\\<circ> |a c.\n    \\<exists>b.\n       [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s \\<and>\n       [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fcompI[intro]: \n  assumes \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\" \n  shows \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s", "using assms"], ["proof (prove)\nusing this:\n  [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s", "unfolding fcomp_def"], ["proof (prove)\nusing this:\n  [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. [a, c]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> set {[a, c]\\<^sub>\\<circ> |a c.\n                             \\<exists>b.\n                                [a, b]\\<^sub>\\<circ>\n                                \\<in>\\<^sub>\\<circ> s \\<and>\n                                [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by auto"], ["", "lemma fcompD[dest]: \n  assumes \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\"\n  shows \"\\<exists>b. [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<and>\n       [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s", "using assms"], ["proof (prove)\nusing this:\n  [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<and>\n       [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s", "unfolding fcomp_def"], ["proof (prove)\nusing this:\n  [a, c]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[a, c]\\<^sub>\\<circ> |a c.\n                           \\<exists>b.\n                              [a, b]\\<^sub>\\<circ>\n                              \\<in>\\<^sub>\\<circ> s \\<and>\n                              [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<and>\n       [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s", "by auto"], ["", "lemma fcompE[elim]:\n  assumes \"ac \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\" \n  obtains a b c where \"ac = [a, c]\\<^sub>\\<circ>\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s\" and \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a c b.\n        \\<lbrakk>ac = [a, c]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s;\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  ac \\<in>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\n\ngoal (1 subgoal):\n 1. (\\<And>a c b.\n        \\<lbrakk>ac = [a, c]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s;\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding fcomp_def"], ["proof (prove)\nusing this:\n  ac \\<in>\\<^sub>\\<circ> set {[a, c]\\<^sub>\\<circ> |a c.\n                              \\<exists>b.\n                                 [a, b]\\<^sub>\\<circ>\n                                 \\<in>\\<^sub>\\<circ> s \\<and>\n                                 [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>a c b.\n        \\<lbrakk>ac = [a, c]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> s;\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by clarsimp"], ["", "text\\<open>Elementary properties.\\<close>"], ["", "lemma fcomp_assoc: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<circ>\\<^sub>\\<bullet> t = r \\<circ>\\<^sub>\\<bullet> (s \\<circ>\\<^sub>\\<bullet> t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<circ>\\<^sub>\\<bullet> s) \\<circ>\\<^sub>\\<bullet> t =\n    r \\<circ>\\<^sub>\\<bullet> s \\<circ>\\<^sub>\\<bullet> t", "by fast"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fcomp_vempty_left[simp]: \"0 \\<circ>\\<^sub>\\<bullet> r = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> \\<circ>\\<^sub>\\<bullet> r = []\\<^sub>\\<circ>", "unfolding vcomp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> \\<circ>\\<^sub>\\<bullet> r = []\\<^sub>\\<circ>", "by force"], ["", "lemma fcomp_vempty_right[simp]: \"r \\<circ>\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "unfolding vcomp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by force"], ["", "lemma fcomp_mono:\n  assumes \"r' \\<subseteq>\\<^sub>\\<circ> r\" and \"s' \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"r' \\<circ>\\<^sub>\\<bullet> s' \\<subseteq>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r' \\<circ>\\<^sub>\\<bullet> s'\n    \\<subseteq>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s", "using assms"], ["proof (prove)\nusing this:\n  r' \\<subseteq>\\<^sub>\\<circ> r\n  s' \\<subseteq>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. r' \\<circ>\\<^sub>\\<bullet> s'\n    \\<subseteq>\\<^sub>\\<circ> r \\<circ>\\<^sub>\\<bullet> s", "by force"], ["", "lemma fcomp_vinsert_left[simp]: \n  \"vinsert ([a, b]\\<^sub>\\<circ>) s \\<circ>\\<^sub>\\<bullet> r = (set {[a, b]\\<^sub>\\<circ>} \\<circ>\\<^sub>\\<bullet> r) \\<union>\\<^sub>\\<circ> (s \\<circ>\\<^sub>\\<bullet> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> s \\<circ>\\<^sub>\\<bullet> r =\n    set {[a, b]\\<^sub>\\<circ>} \\<circ>\\<^sub>\\<bullet>\n    r \\<union>\\<^sub>\\<circ>\n    s \\<circ>\\<^sub>\\<bullet> r", "by auto"], ["", "lemma fcomp_vinsert_right[simp]: \n  \"r \\<circ>\\<^sub>\\<bullet> vinsert [a, b]\\<^sub>\\<circ> s = (r \\<circ>\\<^sub>\\<bullet> set {[a, b]\\<^sub>\\<circ>}) \\<union>\\<^sub>\\<circ> (r \\<circ>\\<^sub>\\<bullet> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> vinsert [a, b]\\<^sub>\\<circ> s =\n    r \\<circ>\\<^sub>\\<bullet>\n    set {[a, b]\\<^sub>\\<circ>} \\<union>\\<^sub>\\<circ>\n    r \\<circ>\\<^sub>\\<bullet> s", "by auto"], ["", "lemma fcomp_vunion_left[simp]: \"(s \\<union>\\<^sub>\\<circ> t) \\<circ>\\<^sub>\\<bullet> r = (s \\<circ>\\<^sub>\\<bullet> r) \\<union>\\<^sub>\\<circ> (t \\<circ>\\<^sub>\\<bullet> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<union>\\<^sub>\\<circ> t) \\<circ>\\<^sub>\\<bullet> r =\n    s \\<circ>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n    t \\<circ>\\<^sub>\\<bullet> r", "by auto"], ["", "lemma fcomp_vunion_right[simp]: \"r \\<circ>\\<^sub>\\<bullet> (s \\<union>\\<^sub>\\<circ> t) = (r \\<circ>\\<^sub>\\<bullet> s) \\<union>\\<^sub>\\<circ> (r \\<circ>\\<^sub>\\<bullet> t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> (s \\<union>\\<^sub>\\<circ> t) =\n    r \\<circ>\\<^sub>\\<bullet> s \\<union>\\<^sub>\\<circ>\n    r \\<circ>\\<^sub>\\<bullet> t", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fcomp_fid_on_idem[simp]: \"fid_on A \\<circ>\\<^sub>\\<bullet> fid_on A = fid_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<circ>\\<^sub>\\<bullet> fid_on A = fid_on A", "by auto"], ["", "lemma fcomp_fid_on[simp]: \"fid_on A \\<circ>\\<^sub>\\<bullet> fid_on B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<circ>\\<^sub>\\<bullet> fid_on B =\n    fid_on (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma fcomp_fconst_on_fid_on[simp]: \"fconst_on A c \\<circ>\\<^sub>\\<bullet> fid_on A = fconst_on A c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<circ>\\<^sub>\\<bullet> fid_on A = fconst_on A c", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fcomp_vsubset_vtimes:\n  assumes \"r \\<subseteq>\\<^sub>\\<circ> B \\<times>\\<^sub>\\<bullet> C\" and \"s \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\" \n  shows \"r \\<circ>\\<^sub>\\<bullet> s \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> s\n    \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> C", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> B \\<times>\\<^sub>\\<bullet> C\n  s \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\n\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> s\n    \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> C", "by blast"], ["", "lemma fcomp_obtain_middle[elim]:\n  assumes \"[a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f \\<circ>\\<^sub>\\<bullet> g\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> g\" and \"[b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> g;\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  [a, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f \\<circ>\\<^sub>\\<bullet> g\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> g;\n         [b, c]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "subsubsection\\<open>Converse relation\\<close>"], ["", "definition fconverse :: \"V \\<Rightarrow> V\" (\\<open>(_\\<inverse>\\<^sub>\\<bullet>)\\<close> [1000] 999)\n  where \"r\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ> | a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "lemma fconverse_small[simp]: \"small {[b, a]\\<^sub>\\<circ> | a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {[b, a]\\<^sub>\\<circ> |a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. small\n     {[b, a]\\<^sub>\\<circ> |a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have eq: \n    \"{[b, a]\\<^sub>\\<circ> | a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} = (\\<lambda>x. [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>, x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) ` elts (fpairs r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {[b, a]\\<^sub>\\<circ> |a b.\n     [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} =\n    (\\<lambda>x.\n        [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n         x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n    elts (fpairs r)", "proof(rule subset_antisym; rule subsetI, unfold mem_Collect_eq)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r)\n 2. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r) \\<Longrightarrow>\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r)\n 2. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r) \\<Longrightarrow>\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "assume \"x \\<in> (\\<lambda>x. [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>, x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) ` elts (fpairs r)\""], ["proof (state)\nthis:\n  x \\<in> (\\<lambda>x.\n              [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n               x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n          elts (fpairs r)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r)\n 2. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r) \\<Longrightarrow>\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "then"], ["proof (chain)\npicking this:\n  x \\<in> (\\<lambda>x.\n              [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n               x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n          elts (fpairs r)", "obtain a b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r\" \n      and \"x = (\\<lambda>x. [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>, x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) [a, b]\\<^sub>\\<circ>\""], ["proof (prove)\nusing this:\n  x \\<in> (\\<lambda>x.\n              [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n               x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n          elts (fpairs r)\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r;\n         x =\n         [[a, b]\\<^sub>\\<circ>\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n          [a, b]\\<^sub>\\<circ>\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r\n  x =\n  [[a, b]\\<^sub>\\<circ>\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n   [a, b]\\<^sub>\\<circ>\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r)\n 2. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r) \\<Longrightarrow>\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "then"], ["proof (chain)\npicking this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r\n  x =\n  [[a, b]\\<^sub>\\<circ>\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n   [a, b]\\<^sub>\\<circ>\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>", "show \"\\<exists>a b. x = [b, a]\\<^sub>\\<circ> \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> fpairs r\n  x =\n  [[a, b]\\<^sub>\\<circ>\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n   [a, b]\\<^sub>\\<circ>\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       x = [b, a]\\<^sub>\\<circ> \\<and>\n       [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by (auto simp: nat_omega_simps)"], ["proof (state)\nthis:\n  \\<exists>a b.\n     x = [b, a]\\<^sub>\\<circ> \\<and>\n     [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<exists>a b.\n          x = [b, a]\\<^sub>\\<circ> \\<and>\n          [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       x \\<in> (\\<lambda>x.\n                   [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n                    x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n               elts (fpairs r)", "qed (use image_iff fpairs_iff_elts in \\<open>fastforce simp: nat_omega_simps\\<close>)"], ["proof (state)\nthis:\n  {[b, a]\\<^sub>\\<circ> |a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} =\n  (\\<lambda>x.\n      [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n       x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n  elts (fpairs r)\n\ngoal (1 subgoal):\n 1. small\n     {[b, a]\\<^sub>\\<circ> |a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {[b, a]\\<^sub>\\<circ> |a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "unfolding eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     ((\\<lambda>x.\n          [x\\<lparr>1\\<^sub>\\<nat>\\<rparr>,\n           x\\<lparr>0\\<^sub>\\<nat>\\<rparr>]\\<^sub>\\<circ>) `\n      elts (fpairs r))", "by (rule replacement) auto"], ["proof (state)\nthis:\n  small\n   {[b, a]\\<^sub>\\<circ> |a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fconverseI[sym, intro!]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"[b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>", "unfolding fconverse_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [b, a]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> set {[b, a]\\<^sub>\\<circ> |a b.\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by simp"], ["", "lemma fconverseD[sym, dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\"\n  shows \"[b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\n\ngoal (1 subgoal):\n 1. [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "unfolding fconverse_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[b, a]\\<^sub>\\<circ> |a b.\n                           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by simp"], ["", "lemma fconverseE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\" \n  obtains a b where \"x = [b, a]\\<^sub>\\<circ>\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b a.\n        \\<lbrakk>x = [b, a]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\n\ngoal (1 subgoal):\n 1. (\\<And>b a.\n        \\<lbrakk>x = [b, a]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding fconverse_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {[b, a]\\<^sub>\\<circ> |a b.\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>b a.\n        \\<lbrakk>x = [b, a]\\<^sub>\\<circ>;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma fconverse_iff: \"[b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> \\<longleftrightarrow> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>) =\n    ([a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fconverse_vempty[simp]: \"0\\<inverse>\\<^sub>\\<bullet> = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ>\\<inverse>\\<^sub>\\<bullet> = []\\<^sub>\\<circ>", "by auto"], ["", "lemma fconverse_vsingleton: \"(set {[a, b]\\<^sub>\\<circ>})\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (set {[a, b]\\<^sub>\\<circ>})\\<inverse>\\<^sub>\\<bullet> =\n    set {[b, a]\\<^sub>\\<circ>}", "by auto"], ["", "lemma fconverse_vdoubleton: \"(set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>})\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ>, [d, c]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (set {[a, b]\\<^sub>\\<circ>,\n          [c, d]\\<^sub>\\<circ>})\\<inverse>\\<^sub>\\<bullet> =\n    set {[b, a]\\<^sub>\\<circ>, [d, c]\\<^sub>\\<circ>}", "by force"], ["", "lemma fconverse_vinsert: \"(vinsert [a, b]\\<^sub>\\<circ> r)\\<inverse>\\<^sub>\\<bullet> = vinsert [b, a]\\<^sub>\\<circ> (r\\<inverse>\\<^sub>\\<bullet>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (vinsert [a, b]\\<^sub>\\<circ> r)\\<inverse>\\<^sub>\\<bullet> =\n    vinsert [b, a]\\<^sub>\\<circ> (r\\<inverse>\\<^sub>\\<bullet>)", "by auto"], ["", "lemma fconverse_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s)\\<inverse>\\<^sub>\\<bullet> = r\\<inverse>\\<^sub>\\<bullet> \\<inter>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<inter>\\<^sub>\\<circ> s)\\<inverse>\\<^sub>\\<bullet> =\n    r\\<inverse>\\<^sub>\\<bullet> \\<inter>\\<^sub>\\<circ>\n    s\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "lemma fconverse_vunion: \"(r \\<union>\\<^sub>\\<circ> s)\\<inverse>\\<^sub>\\<bullet> = r\\<inverse>\\<^sub>\\<bullet> \\<union>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union>\\<^sub>\\<circ> s)\\<inverse>\\<^sub>\\<bullet> =\n    r\\<inverse>\\<^sub>\\<bullet> \\<union>\\<^sub>\\<circ>\n    s\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fconverse_fid_on[simp]: \"(fid_on A)\\<inverse>\\<^sub>\\<bullet> = fid_on A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (fid_on A)\\<inverse>\\<^sub>\\<bullet> = fid_on A", "by auto"], ["", "lemma fconverse_fconst_on[simp]: \"(fconst_on A c)\\<inverse>\\<^sub>\\<bullet> = set {c} \\<times>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (fconst_on A c)\\<inverse>\\<^sub>\\<bullet> =\n    set {c} \\<times>\\<^sub>\\<bullet> A", "by blast"], ["", "lemma fconverse_fcomp: \"(r \\<circ>\\<^sub>\\<bullet> s)\\<inverse>\\<^sub>\\<bullet> = s\\<inverse>\\<^sub>\\<bullet> \\<circ>\\<^sub>\\<bullet> r\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<circ>\\<^sub>\\<bullet> s)\\<inverse>\\<^sub>\\<bullet> =\n    s\\<inverse>\\<^sub>\\<bullet> \\<circ>\\<^sub>\\<bullet>\n    r\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "lemma fconverse_ftimes: \"(A \\<times>\\<^sub>\\<bullet> B)\\<inverse>\\<^sub>\\<bullet> = (B \\<times>\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A \\<times>\\<^sub>\\<bullet> B)\\<inverse>\\<^sub>\\<bullet> =\n    B \\<times>\\<^sub>\\<bullet> A", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fconverse_pred:\n  assumes \"small {[a, b]\\<^sub>\\<circ> | a b. P a b}\"\n  shows \"(set {[a, b]\\<^sub>\\<circ> | a b. P a b})\\<inverse>\\<^sub>\\<bullet> = set {[b, a]\\<^sub>\\<circ> | a b. P a b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (set {[a, b]\\<^sub>\\<circ> |a b. P a b})\\<inverse>\\<^sub>\\<bullet> =\n    set {[b, a]\\<^sub>\\<circ> |a b. P a b}", "using assms"], ["proof (prove)\nusing this:\n  small {[a, b]\\<^sub>\\<circ> |a b. P a b}\n\ngoal (1 subgoal):\n 1. (set {[a, b]\\<^sub>\\<circ> |a b. P a b})\\<inverse>\\<^sub>\\<bullet> =\n    set {[b, a]\\<^sub>\\<circ> |a b. P a b}", "unfolding fconverse_def"], ["proof (prove)\nusing this:\n  small {[a, b]\\<^sub>\\<circ> |a b. P a b}\n\ngoal (1 subgoal):\n 1. set {[b, a]\\<^sub>\\<circ> |a b.\n         [a, b]\\<^sub>\\<circ>\n         \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b. P a b}} =\n    set {[b, a]\\<^sub>\\<circ> |a b. P a b}", "by simp"], ["", "subsubsection\\<open>Left restriction\\<close>"], ["", "definition flrestriction :: \"V \\<Rightarrow> V \\<Rightarrow> V\" (infixr \\<open>\\<restriction>\\<^sup>l\\<^sub>\\<bullet>\\<close> 80)\n  where \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ> | a b. a \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "lemma flrestriction_small[simp]: \"small {[a, b]\\<^sub>\\<circ> | a b. a \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {[a, b]\\<^sub>\\<circ> |a b.\n      a \\<in>\\<^sub>\\<circ> A \\<and>\n      [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule down[of _ r]) auto"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma flrestrictionI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" \n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "unfolding flrestriction_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                             a \\<in>\\<^sub>\\<circ> A \\<and>\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by simp"], ["", "lemma flrestrictionD[dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"  \n  shows \"a \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "unfolding flrestriction_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                           a \\<in>\\<^sub>\\<circ> A \\<and>\n                           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by auto"], ["", "lemma flrestrictionE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"a \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding flrestriction_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                             a \\<in>\\<^sub>\\<circ> A \\<and>\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma flrestriction_on_vempty[simp]: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> []\\<^sub>\\<circ> =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma flrestriction_vempty[simp]: \"0 \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma flrestriction_vsingleton_in[simp]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    set {[a, b]\\<^sub>\\<circ>}", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    set {[a, b]\\<^sub>\\<circ>}", "by auto"], ["", "lemma flrestriction_vsingleton_nin[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  a \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma flrestriction_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\"\n  shows \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B", "by auto"], ["", "lemma flrestriction_vinsert_nin[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "lemma flrestriction_vinsert_in: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n    A =\n    vinsert [a, b]\\<^sub>\\<circ>\n     (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n    A =\n    vinsert [a, b]\\<^sub>\\<circ>\n     (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "by auto"], ["", "lemma flrestriction_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ>\n    s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "lemma flrestriction_vunion: \"(r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ>\n    s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "lemma flrestriction_vdiff: \"(r -\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A -\\<^sub>\\<circ> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r -\\<^sub>\\<circ> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A -\\<^sub>\\<circ>\n    s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma flrestriction_fid_on[simp]: \"(fid_on A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B =\n    fid_on (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma flrestriction_fconst_on: \"(fconst_on A c) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B = (fconst_on B c) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B =\n    fconst_on B c \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "lemma flrestriction_fconst_on_commute:\n  assumes \"x \\<in>\\<^sub>\\<circ> fconst_on A c \\<restriction>\\<^sup>l\\<^sub>\\<bullet> B\"\n  shows \"x \\<in>\\<^sub>\\<circ> fconst_on B c \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> fconst_on B\n                           c \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n                          A", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> fconst_on A c \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n                        B\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> fconst_on B\n                           c \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n                          A", "by auto"], ["", "lemma flrestriction_fcomp[simp]: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<circ>\\<^sub>\\<bullet> (s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    r \\<circ>\\<^sub>\\<bullet> s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "text\\<open>Previous connections.\\<close>"], ["", "lemma fcomp_rel_fid_on[simp]: \"r \\<circ>\\<^sub>\\<bullet> fid_on A = r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> fid_on A =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "lemma fcomp_fconst_on: \n  \"r \\<circ>\\<^sub>\\<bullet> (fconst_on A c) = (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> set {c}) \\<circ>\\<^sub>\\<bullet> (fconst_on A c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> fconst_on A c =\n    r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> set {c} \\<circ>\\<^sub>\\<bullet>\n    fconst_on A c", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma flrestriction_vsubset_fpairs: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> fpairs r", "by (rule vsubsetI) (metis fpairs_iff_elts flrestrictionE)"], ["", "lemma flrestriction_vsubset_frel: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r", "by auto"], ["", "subsubsection\\<open>Right restriction\\<close>"], ["", "definition frrestriction :: \"V \\<Rightarrow> V \\<Rightarrow> V\" (infixr \\<open>\\<restriction>\\<^sup>r\\<^sub>\\<bullet>\\<close> 80)\n  where \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ> | a b. b \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "lemma frrestriction_small[simp]: \"small {[a, b]\\<^sub>\\<circ> | a b. b \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {[a, b]\\<^sub>\\<circ> |a b.\n      b \\<in>\\<^sub>\\<circ> A \\<and>\n      [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule down[of _ r]) auto"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma frrestrictionI[intro!]: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" \n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> A\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "unfolding frrestriction_def"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> A\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                             b \\<in>\\<^sub>\\<circ> A \\<and>\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by simp"], ["", "lemma frrestrictionD[dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"  \n  shows \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "unfolding frrestriction_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                           b \\<in>\\<^sub>\\<circ> A \\<and>\n                           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by auto"], ["", "lemma frrestrictionE[elim!]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; b \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; b \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding frrestriction_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                             b \\<in>\\<^sub>\\<circ> A \\<and>\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; b \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma frrestriction_on_vempty[simp]: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> []\\<^sub>\\<circ> =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma frrestriction_vempty[simp]: \"0 \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma frrestriction_vsingleton_in[simp]: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    set {[a, b]\\<^sub>\\<circ>}", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    set {[a, b]\\<^sub>\\<circ>}", "by auto"], ["", "lemma frrestriction_vsingleton_nin[simp]: \n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  b \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma frrestriction_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\"\n  shows \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B", "by auto"], ["", "lemma frrestriction_vinsert_nin[simp]:\n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  b \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frrestriction_vinsert_in: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n    A =\n    vinsert [a, b]\\<^sub>\\<circ>\n     (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n    A =\n    vinsert [a, b]\\<^sub>\\<circ>\n     (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "by auto"], ["", "lemma frrestriction_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ>\n    s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frrestriction_vunion: \"(r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ>\n    s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frrestriction_vdiff: \"(r -\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A -\\<^sub>\\<circ> s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r -\\<^sub>\\<circ> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A -\\<^sub>\\<circ>\n    s \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma frrestriction_fid_on[simp]: \"(fid_on A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B =\n    fid_on (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma frrestriction_fconst_on:\n  assumes \"c \\<in>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B = fconst_on A c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B = fconst_on A c", "using assms"], ["proof (prove)\nusing this:\n  c \\<in>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sup>r\\<^sub>\\<bullet> B = fconst_on A c", "by auto"], ["", "lemma frrestriction_fcomp[simp]: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<circ>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<circ>\\<^sub>\\<bullet> s", "by auto"], ["", "text\\<open>Previous connections.\\<close>"], ["", "lemma fcomp_fid_on_rel[simp]: \"fid_on A \\<circ>\\<^sub>\\<bullet> r = r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<circ>\\<^sub>\\<bullet> r =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "by force"], ["", "lemma fcomp_fconst_on_rel: \"(fconst_on A c) \\<circ>\\<^sub>\\<bullet> r = (fconst_on A c) \\<circ>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<circ>\\<^sub>\\<bullet> r =\n    fconst_on A c \\<circ>\\<^sub>\\<bullet>\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A", "by auto"], ["", "lemma flrestriction_fconverse: \"r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A =\n    (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "lemma frrestriction_fconverse: \"r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A =\n    (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma frrestriction_vsubset_rel: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r", "by auto"], ["", "lemma frrestriction_vsubset_vpairs: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> fpairs r", "by auto"], ["", "subsubsection\\<open>Restriction\\<close>"], ["", "definition frestriction :: \"V \\<Rightarrow> V \\<Rightarrow> V\" (infixr \\<open>\\<restriction>\\<^sub>\\<bullet>\\<close> 80)\n  where \"r \\<restriction>\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ> | a b. a \\<in>\\<^sub>\\<circ> A \\<and> b \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "lemma frestriction_small[simp]: \n  \"small {[a, b]\\<^sub>\\<circ> | a b. a \\<in>\\<^sub>\\<circ> A \\<and> b \\<in>\\<^sub>\\<circ> A \\<and> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {[a, b]\\<^sub>\\<circ> |a b.\n      a \\<in>\\<^sub>\\<circ> A \\<and>\n      b \\<in>\\<^sub>\\<circ> A \\<and>\n      [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule down[of _ r]) auto"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma frestrictionI[intro!]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" \n  shows \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n  b \\<in>\\<^sub>\\<circ> A\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A", "unfolding frestriction_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n  b \\<in>\\<^sub>\\<circ> A\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. [a, b]\\<^sub>\\<circ>\n    \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                             a \\<in>\\<^sub>\\<circ> A \\<and>\n                             b \\<in>\\<^sub>\\<circ> A \\<and>\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by simp"], ["", "lemma frestrictionD[dest]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\"  \n  shows \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A &&&\n    b \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A &&&\n    b \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "unfolding frestriction_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ>\n  \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                           a \\<in>\\<^sub>\\<circ> A \\<and>\n                           b \\<in>\\<^sub>\\<circ> A \\<and>\n                           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> A &&&\n    b \\<in>\\<^sub>\\<circ> A &&& [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by auto"], ["", "lemma frestrictionE[elim!]:\n  assumes \"x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\"\n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\" and \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\" and \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A;\n         b \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A;\n         b \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding frestriction_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> set {[a, b]\\<^sub>\\<circ> |a b.\n                             a \\<in>\\<^sub>\\<circ> A \\<and>\n                             b \\<in>\\<^sub>\\<circ> A \\<and>\n                             [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>x = [a, b]\\<^sub>\\<circ>; a \\<in>\\<^sub>\\<circ> A;\n         b \\<in>\\<^sub>\\<circ> A;\n         [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by clarsimp"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma frestriction_on_vempty[simp]: \"r \\<restriction>\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by auto"], ["", "lemma frestriction_vempty[simp]: \"0 \\<restriction>\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> \\<restriction>\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "by auto"], ["", "lemma frestriction_vsingleton_in[simp]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A = set {[a, b]\\<^sub>\\<circ>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A =\n    set {[a, b]\\<^sub>\\<circ>}", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n  b \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A =\n    set {[a, b]\\<^sub>\\<circ>}", "by auto"], ["", "lemma frestriction_vsingleton_nin_left[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  a \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma frestriction_vsingleton_nin_right[simp]: \n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  b \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} \\<restriction>\\<^sub>\\<bullet> A =\n    []\\<^sub>\\<circ>", "by auto"], ["", "lemma frestriction_mono: \n  assumes \"A \\<subseteq>\\<^sub>\\<circ> B\"\n  shows \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> B", "using assms"], ["proof (prove)\nusing this:\n  A \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> B", "by auto"], ["", "lemma frestriction_vinsert_nin[simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\" and \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<notin>\\<^sub>\\<circ> A\n  b \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frestriction_vinsert_in: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" and \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"(vinsert [a, b]\\<^sub>\\<circ> r) \\<restriction>\\<^sub>\\<bullet> A = vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A =\n    vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sub>\\<bullet> A)", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n  b \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. vinsert [a, b]\\<^sub>\\<circ> r \\<restriction>\\<^sub>\\<bullet> A =\n    vinsert [a, b]\\<^sub>\\<circ> (r \\<restriction>\\<^sub>\\<bullet> A)", "by auto"], ["", "lemma frestriction_vintersection: \"(r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> s \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<inter>\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ>\n    s \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frestriction_vunion: \"(r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union>\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ>\n    s \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frestriction_vdiff: \"(r -\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A -\\<^sub>\\<circ> s \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r -\\<^sub>\\<circ> s) \\<restriction>\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sub>\\<bullet> A -\\<^sub>\\<circ>\n    s \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fid_on_frestriction[simp]: \"(fid_on A) \\<restriction>\\<^sub>\\<bullet> B = fid_on (A \\<inter>\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A \\<restriction>\\<^sub>\\<bullet> B =\n    fid_on (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma frestriction_fconst_on_ex:\n  assumes \"c \\<in>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) \\<restriction>\\<^sub>\\<bullet> B = fconst_on (A \\<inter>\\<^sub>\\<circ> B) c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sub>\\<bullet> B =\n    fconst_on (A \\<inter>\\<^sub>\\<circ> B) c", "using assms"], ["proof (prove)\nusing this:\n  c \\<in>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sub>\\<bullet> B =\n    fconst_on (A \\<inter>\\<^sub>\\<circ> B) c", "by auto"], ["", "lemma frestriction_fconst_on_nex:\n  assumes \"c \\<notin>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) \\<restriction>\\<^sub>\\<bullet> B = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sub>\\<bullet> B = []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  c \\<notin>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. fconst_on A c \\<restriction>\\<^sub>\\<bullet> B = []\\<^sub>\\<circ>", "by auto"], ["", "lemma frestriction_fcomp[simp]: \"(r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<circ>\\<^sub>\\<bullet> (s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<circ>\\<^sub>\\<bullet> s) \\<restriction>\\<^sub>\\<bullet> A =\n    r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A \\<circ>\\<^sub>\\<bullet>\n    s \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frestriction_fconverse: \"r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sub>\\<bullet> A = (r \\<restriction>\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> \\<restriction>\\<^sub>\\<bullet> A =\n    (r \\<restriction>\\<^sub>\\<bullet> A)\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "text\\<open>Previous connections.\\<close>"], ["", "lemma frrestriction_flrestriction[simp]: \"(r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n     A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "lemma flrestriction_frrestriction[simp]: \"(r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n     A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frestriction_flrestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sub>\\<bullet>\n     A) \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "lemma frestriction_frrestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A = r \\<restriction>\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sub>\\<bullet>\n     A) \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n    A =\n    r \\<restriction>\\<^sub>\\<bullet> A", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma frestriction_vsubset_fpairs: \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> fpairs r", "by auto"], ["", "lemma frestriction_vsubset_ftimes: \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> A ^\\<^sub>\\<times> 2\\<^sub>\\<nat>", "by force"], ["", "lemma frestriction_vsubset_rel: \"r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> r", "by auto"], ["", "subsection\\<open>Properties\\<close>"], ["", "subsubsection\\<open>Domain\\<close>"], ["", "definition fdomain :: \"V \\<Rightarrow> V\" (\\<open>\\<D>\\<^sub>\\<bullet>\\<close>)\n  where \"\\<D>\\<^sub>\\<bullet> r = set {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "notation fdomain (\\<open>\\<D>\\<^sub>\\<bullet>\\<close>)"], ["", "lemma fdomain_small[simp]: \"small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have ss: \"{a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r", "using image_iff"], ["proof (prove)\nusing this:\n  (?z \\<in> ?f ` ?A) = (\\<exists>x\\<in>?A. ?z = ?f x)\n\ngoal (1 subgoal):\n 1. {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r", "by force"], ["proof (state)\nthis:\n  {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r\n\ngoal (1 subgoal):\n 1. small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have small: \"small ((\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small ((\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r)", "by (rule replacement) simp"], ["proof (state)\nthis:\n  small ((\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r)\n\ngoal (1 subgoal):\n 1. small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule smaller_than_small, rule small, rule ss)"], ["proof (state)\nthis:\n  small {a. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fdomainI[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r", "unfolding fdomain_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> set {a. \\<exists>b.\n                                     [a, b]\\<^sub>\\<circ>\n                                     \\<in>\\<^sub>\\<circ> r}", "by auto"], ["", "lemma fdomainD[dest]: \n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\"\n  shows \"\\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "unfolding fdomain_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> set {a. \\<exists>b.\n                                   [a, b]\\<^sub>\\<circ>\n                                   \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. \\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by auto"], ["", "lemma fdomainE[elim]:\n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding fdomain_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> set {a. \\<exists>b.\n                                   [a, b]\\<^sub>\\<circ>\n                                   \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by clarsimp"], ["", "lemma fdomain_iff: \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<longleftrightarrow> (\\<exists>y. [a, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r) =\n    (\\<exists>y. [a, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fdomain_vempty[simp]: \"\\<D>\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by force"], ["", "lemma fdomain_vsingleton[simp]: \"\\<D>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {a}", "by auto"], ["", "lemma fdomain_vdoubleton[simp]: \"\\<D>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) = set {a, c}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet>\n     (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) =\n    set {a, c}", "by force"], ["", "lemma fdomain_mono: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\"\n  shows \"\\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> s", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> s", "by blast"], ["", "lemma fdomain_vinsert[simp]: \"\\<D>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) = vinsert a (\\<D>\\<^sub>\\<bullet> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) =\n    vinsert a (\\<D>\\<^sub>\\<bullet> r)", "by force"], ["", "lemma fdomain_vunion: \"\\<D>\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) = \\<D>\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) =\n    \\<D>\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B", "by force"], ["", "lemma fdomain_vintersection_vsubset: \"\\<D>\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B) \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)\n    \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ>\n                              \\<D>\\<^sub>\\<bullet> B", "by auto"], ["", "lemma fdomain_vdiff_vsubset: \"\\<D>\\<^sub>\\<bullet> A -\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> A -\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> B\n    \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fdomain_fid_on[simp]: \"\\<D>\\<^sub>\\<bullet> (fid_on A) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (fid_on A) = A", "by force"], ["", "lemma fdomain_fconst_on[simp]: \"\\<D>\\<^sub>\\<bullet> (fconst_on A c) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (fconst_on A c) = A", "by force"], ["", "lemma fdomain_flrestriction: \"\\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) = \\<D>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) =\n    \\<D>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fdomain_vsubset_ftimes:\n  assumes \"fpairs r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\"\n  shows \"\\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> A", "using assms"], ["proof (prove)\nusing this:\n  fpairs r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\n\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> A", "by blast"], ["", "lemma fdomain_vsubset_VUnion2: \"\\<D>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> r\n    \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                               (\\<Union>\\<^sub>\\<circ>\n                                 (\\<Union>\\<^sub>\\<circ> r))", "proof(intro vsubsetI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "assume \"x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\""], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r", "obtain y where \"[x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "have \"set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>, \\<langle>1\\<^sub>\\<nat>, y\\<rangle>} \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n         \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n    \\<in>\\<^sub>\\<circ> r", "unfolding vcons_vdoubleton"], ["proof (prove)\nusing this:\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n         \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n    \\<in>\\<^sub>\\<circ> r", "by simp"], ["proof (state)\nthis:\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "with insert_commute"], ["proof (chain)\npicking this:\n  insert ?x (insert ?y ?A) = insert ?y (insert ?x ?A)\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r", "have \"\\<langle>0\\<^sub>\\<nat>, x\\<rangle> \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>r\""], ["proof (prove)\nusing this:\n  insert ?x (insert ?y ?A) = insert ?y (insert ?x ?A)\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<langle>0\\<^sub>\\<nat>, x\\<rangle>\n    \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  \\<langle>0\\<^sub>\\<nat>, x\\<rangle>\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  \\<langle>0\\<^sub>\\<nat>, x\\<rangle>\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r", "show \"x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\""], ["proof (prove)\nusing this:\n  \\<langle>0\\<^sub>\\<nat>, x\\<rangle>\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                           (\\<Union>\\<^sub>\\<circ>\n                             (\\<Union>\\<^sub>\\<circ> r))", "unfolding vpair_def"], ["proof (prove)\nusing this:\n  set {set {0\\<^sub>\\<nat>}, set {0\\<^sub>\\<nat>, x}}\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                           (\\<Union>\\<^sub>\\<circ>\n                             (\\<Union>\\<^sub>\\<circ> r))", "by (metis (full_types) VUnion_iff insert_commute vintersection_vdoubleton)"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                         (\\<Union>\\<^sub>\\<circ> (\\<Union>\\<^sub>\\<circ> r))\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection\\<open>Range\\<close>"], ["", "definition frange :: \"V \\<Rightarrow> V\" (\\<open>\\<R>\\<^sub>\\<bullet>\\<close>)\n  where \"frange r = set {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["", "notation frange (\\<open>\\<R>\\<^sub>\\<bullet>\\<close>)"], ["", "lemma frange_small[simp]: \"small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have ss: \"{b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r", "using image_iff"], ["proof (prove)\nusing this:\n  (?z \\<in> ?f ` ?A) = (\\<exists>x\\<in>?A. ?z = ?f x)\n\ngoal (1 subgoal):\n 1. {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r", "by (fastforce simp: nat_omega_simps)"], ["proof (state)\nthis:\n  {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r\n\ngoal (1 subgoal):\n 1. small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have small: \"small ((\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small ((\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r)", "by (rule replacement) simp"], ["proof (state)\nthis:\n  small ((\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r)\n\ngoal (1 subgoal):\n 1. small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule smaller_than_small, rule small, rule ss)"], ["proof (state)\nthis:\n  small {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma frangeI[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r", "unfolding frange_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> set {b. \\<exists>a.\n                                     [a, b]\\<^sub>\\<circ>\n                                     \\<in>\\<^sub>\\<circ> r}", "by auto"], ["", "lemma frangeD[dest]: \n  assumes \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"\n  shows \"\\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "unfolding frange_def"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> set {b. \\<exists>a.\n                                   [a, b]\\<^sub>\\<circ>\n                                   \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "by simp"], ["", "lemma frangeE[elim!]:\n  assumes \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"\n  obtains a where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding frange_def"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> set {b. \\<exists>a.\n                                   [a, b]\\<^sub>\\<circ>\n                                   \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by clarsimp"], ["", "lemma frange_iff: \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<longleftrightarrow> (\\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r) =\n    (\\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma frange_vempty[simp]: \"\\<R>\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by auto"], ["", "lemma frange_vsingleton[simp]: \"\\<R>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {b}", "by auto"], ["", "lemma frange_vdoubleton[simp]: \"\\<R>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) = set {b, d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet>\n     (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) =\n    set {b, d}", "by force"], ["", "lemma frange_mono: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s", "by force"], ["", "lemma frange_vinsert[simp]: \"\\<R>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) = vinsert b (\\<R>\\<^sub>\\<bullet> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) =\n    vinsert b (\\<R>\\<^sub>\\<bullet> r)", "by auto"], ["", "lemma frange_vunion: \"\\<R>\\<^sub>\\<bullet> (r \\<union>\\<^sub>\\<circ> s) = \\<R>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (r \\<union>\\<^sub>\\<circ> s) =\n    \\<R>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s", "by auto"], ["", "lemma frange_vintersection_vsubset: \"\\<R>\\<^sub>\\<bullet> (r \\<inter>\\<^sub>\\<circ> s) \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (r \\<inter>\\<^sub>\\<circ> s)\n    \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ>\n                              \\<R>\\<^sub>\\<bullet> s", "by auto"], ["", "lemma frange_vdiff_vsubset: \"\\<R>\\<^sub>\\<bullet> r -\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r -\\<^sub>\\<circ> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> r -\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s\n    \\<subseteq>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r -\\<^sub>\\<circ> s)", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma frange_fid_on[simp]: \"\\<R>\\<^sub>\\<bullet> (fid_on A) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (fid_on A) = A", "by force"], ["", "lemma frange_fconst_on_vempty[simp]: \"\\<R>\\<^sub>\\<bullet> (fconst_on 0 c) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (fconst_on []\\<^sub>\\<circ> c) = []\\<^sub>\\<circ>", "by auto"], ["", "lemma frange_fconst_on_ne[simp]: \n  assumes \"A \\<noteq> 0\"\n  shows \"\\<R>\\<^sub>\\<bullet> (fconst_on A c) = set {c}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (fconst_on A c) = set {c}", "using assms"], ["proof (prove)\nusing this:\n  A \\<noteq> []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (fconst_on A c) = set {c}", "by force"], ["", "lemma frange_vrrestriction: \"\\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) = \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) =\n    \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A", "by auto"], ["", "text\\<open>Previous connections\\<close>"], ["", "lemma fdomain_fconverse[simp]: \"\\<D>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) = \\<R>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) =\n    \\<R>\\<^sub>\\<bullet> r", "by auto"], ["", "lemma frange_fconverse[simp]: \"\\<R>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) = \\<D>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) =\n    \\<D>\\<^sub>\\<bullet> r", "by force"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma frange_iff_vdomain: \"b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<longleftrightarrow> (\\<exists>a\\<in>\\<^sub>\\<circ>\\<D>\\<^sub>\\<bullet> r. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r) =\n    (\\<exists>a\\<in>elts (\\<D>\\<^sub>\\<bullet> r).\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "lemma frange_vsubset_ftimes:\n  assumes \"fpairs r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\"\n  shows \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B", "using assms"], ["proof (prove)\nusing this:\n  fpairs r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\n\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B", "by blast"], ["", "lemma fpairs_vsubset_fdomain_frange[simp]: \"fpairs r \\<subseteq>\\<^sub>\\<circ> (\\<D>\\<^sub>\\<bullet> r) \\<times>\\<^sub>\\<bullet> (\\<R>\\<^sub>\\<bullet> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs r\n    \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                               r \\<times>\\<^sub>\\<bullet>\n                              \\<R>\\<^sub>\\<bullet> r", "by blast"], ["", "lemma frange_vsubset_VUnion2: \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> r\n    \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                               (\\<Union>\\<^sub>\\<circ>\n                                 (\\<Union>\\<^sub>\\<circ> r))", "proof(intro vsubsetI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "assume \"y \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\""], ["proof (state)\nthis:\n  y \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  y \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r", "obtain x where \"[x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  y \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r", "have \"set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>, \\<langle>1\\<^sub>\\<nat>, y\\<rangle>} \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\nusing this:\n  [x, y]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n         \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n    \\<in>\\<^sub>\\<circ> r", "unfolding vcons_vdoubleton"], ["proof (prove)\nusing this:\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n         \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n    \\<in>\\<^sub>\\<circ> r", "by simp"], ["proof (state)\nthis:\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "with insert_commute"], ["proof (chain)\npicking this:\n  insert ?x (insert ?y ?A) = insert ?y (insert ?x ?A)\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r", "have \"\\<langle>1\\<^sub>\\<nat>, y\\<rangle> \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>r\""], ["proof (prove)\nusing this:\n  insert ?x (insert ?y ?A) = insert ?y (insert ?x ?A)\n  set {\\<langle>0\\<^sub>\\<nat>, x\\<rangle>,\n       \\<langle>1\\<^sub>\\<nat>, y\\<rangle>}\n  \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<langle>1\\<^sub>\\<nat>, y\\<rangle>\n    \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r", "by auto"], ["proof (state)\nthis:\n  \\<langle>1\\<^sub>\\<nat>, y\\<rangle>\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                              (\\<Union>\\<^sub>\\<circ>\n                                (\\<Union>\\<^sub>\\<circ> r))", "then"], ["proof (chain)\npicking this:\n  \\<langle>1\\<^sub>\\<nat>, y\\<rangle>\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r", "show \"y \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\""], ["proof (prove)\nusing this:\n  \\<langle>1\\<^sub>\\<nat>, y\\<rangle>\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. y \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                           (\\<Union>\\<^sub>\\<circ>\n                             (\\<Union>\\<^sub>\\<circ> r))", "unfolding vpair_def"], ["proof (prove)\nusing this:\n  set {set {1\\<^sub>\\<nat>}, set {1\\<^sub>\\<nat>, y}}\n  \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. y \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                           (\\<Union>\\<^sub>\\<circ>\n                             (\\<Union>\\<^sub>\\<circ> r))", "by (metis (full_types) VUnion_iff insert_commute vintersection_vdoubleton)"], ["proof (state)\nthis:\n  y \\<in>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                         (\\<Union>\\<^sub>\\<circ> (\\<Union>\\<^sub>\\<circ> r))\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection\\<open>Field\\<close>"], ["", "definition ffield :: \"V \\<Rightarrow> V\"\n  where \"ffield r = \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\""], ["", "abbreviation app_ffield :: \"V \\<Rightarrow> V\" (\\<open>\\<F>\\<^sub>\\<bullet>\\<close>)\n  where \"\\<F>\\<^sub>\\<bullet> r \\<equiv> ffield r\""], ["", "text\\<open>Rules.\\<close>"], ["", "lemma ffieldI1[intro]: \n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\"\n  shows \"a \\<in>\\<^sub>\\<circ> ffield r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                        \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "unfolding ffield_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                        \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                          \\<R>\\<^sub>\\<bullet> r", "by simp"], ["", "lemma ffieldI2[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"a \\<in>\\<^sub>\\<circ> ffield r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "by auto"], ["", "lemma ffieldI3[intro]: \n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"b \\<in>\\<^sub>\\<circ> ffield r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "by auto"], ["", "lemma ffieldD[intro]: \n  assumes \"a \\<in>\\<^sub>\\<circ> ffield r\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                          \\<R>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                          \\<R>\\<^sub>\\<bullet> r", "unfolding ffield_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                        \\<R>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                          \\<R>\\<^sub>\\<bullet> r", "by simp"], ["", "lemma ffieldE[elim]:  \n  assumes \"a \\<in>\\<^sub>\\<circ> ffield r\" and \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n                        \\<R>\\<^sub>\\<bullet> r \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "by (auto dest: ffieldD)"], ["", "lemma ffield_pair[elim]:\n  assumes \"a \\<in>\\<^sub>\\<circ> ffield r\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or> [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or>\n        [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or>\n        [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma ffield_iff: \"a \\<in>\\<^sub>\\<circ> ffield r \\<longleftrightarrow> (\\<exists>b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or> [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r) =\n    (\\<exists>b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<or>\n        [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma ffield_vempty[simp]: \"ffield 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by force"], ["", "lemma ffield_vsingleton[simp]: \"ffield (set {[a, b]\\<^sub>\\<circ>}) = set {a, b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (set {[a, b]\\<^sub>\\<circ>}) = set {a, b}", "by force"], ["", "lemma ffield_vdoubleton[simp]: \n  \"ffield (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) = set {a, b, c, d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet>\n     (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>}) =\n    set {a, b, c, d}", "by force"], ["", "lemma ffield_mono:\n  assumes \"r \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"ffield r \\<subseteq>\\<^sub>\\<circ> ffield s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> s", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> s", "by fastforce"], ["", "lemma ffield_vinsert[simp]: \n  \"ffield (vinsert [a, b]\\<^sub>\\<circ> r) = set {a, b} \\<union>\\<^sub>\\<circ> (ffield r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (vinsert [a, b]\\<^sub>\\<circ> r) =\n    set {a, b} \\<union>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> r", "apply (intro vsubset_antisym; intro vsubsetI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet>\n                              (vinsert [a, b]\\<^sub>\\<circ>\n                                r) \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> set {a, b} \\<union>\\<^sub>\\<circ>\n                             \\<F>\\<^sub>\\<bullet> r\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> set {a, b} \\<union>\\<^sub>\\<circ>\n                             \\<F>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet>\n                              (vinsert [a, b]\\<^sub>\\<circ> r)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. x_ \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet>\n                            (vinsert [a, b]\\<^sub>\\<circ>\n                              r) \\<Longrightarrow>\n    x_ \\<in>\\<^sub>\\<circ> set {a, b} \\<union>\\<^sub>\\<circ>\n                           \\<F>\\<^sub>\\<bullet> r", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> set {a, b} \\<union>\\<^sub>\\<circ>\n                             \\<F>\\<^sub>\\<bullet> r \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet>\n                              (vinsert [a, b]\\<^sub>\\<circ> r)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. x_ \\<in>\\<^sub>\\<circ> set {a, b} \\<union>\\<^sub>\\<circ>\n                           \\<F>\\<^sub>\\<bullet> r \\<Longrightarrow>\n    x_ \\<in>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet>\n                            (vinsert [a, b]\\<^sub>\\<circ> r)", "by (metis ffield_iff vinsert_iff vinsert_vinsert)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma ffield_vunion[simp]: \"ffield (r \\<union>\\<^sub>\\<circ> s) = ffield r \\<union>\\<^sub>\\<circ> ffield s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (r \\<union>\\<^sub>\\<circ> s) =\n    \\<F>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> s", "unfolding ffield_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (r \\<union>\\<^sub>\\<circ> s) \\<union>\\<^sub>\\<circ>\n    \\<R>\\<^sub>\\<bullet> (r \\<union>\\<^sub>\\<circ> s) =\n    \\<D>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n    \\<R>\\<^sub>\\<bullet> r \\<union>\\<^sub>\\<circ>\n    (\\<D>\\<^sub>\\<bullet> s \\<union>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s)", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fid_on_ffield[simp]: \"ffield (fid_on A) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (fid_on A) = A", "by force"], ["", "lemma fconst_on_ffield_ne[intro, simp]:\n  assumes \"A \\<noteq> 0\" \n  shows \"ffield (fconst_on A c) = vinsert c A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (fconst_on A c) = vinsert c A", "using assms"], ["proof (prove)\nusing this:\n  A \\<noteq> []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (fconst_on A c) = vinsert c A", "by force"], ["", "lemma fconst_on_ffield_vempty[simp]: \"ffield (fconst_on 0 c) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (fconst_on []\\<^sub>\\<circ> c) = []\\<^sub>\\<circ>", "by auto"], ["", "lemma ffield_fconverse[simp]: \"ffield (r\\<inverse>\\<^sub>\\<bullet>) = ffield r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> (r\\<inverse>\\<^sub>\\<bullet>) =\n    \\<F>\\<^sub>\\<bullet> r", "by force"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma ffield_vsubset_VUnion2: \"\\<F>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>(\\<Union>\\<^sub>\\<circ>r))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> r\n    \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                               (\\<Union>\\<^sub>\\<circ>\n                                 (\\<Union>\\<^sub>\\<circ> r))", "using fdomain_vsubset_VUnion2 frange_vsubset_VUnion2"], ["proof (prove)\nusing this:\n  \\<D>\\<^sub>\\<bullet> ?r\n  \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                             (\\<Union>\\<^sub>\\<circ>\n                               (\\<Union>\\<^sub>\\<circ> ?r))\n  \\<R>\\<^sub>\\<bullet> ?r\n  \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                             (\\<Union>\\<^sub>\\<circ>\n                               (\\<Union>\\<^sub>\\<circ> ?r))\n\ngoal (1 subgoal):\n 1. \\<F>\\<^sub>\\<bullet> r\n    \\<subseteq>\\<^sub>\\<circ> \\<Union>\\<^sub>\\<circ>\n                               (\\<Union>\\<^sub>\\<circ>\n                                 (\\<Union>\\<^sub>\\<circ> r))", "by (auto simp: ffield_def)"], ["", "subsubsection\\<open>Image\\<close>"], ["", "definition fimage :: \"V \\<Rightarrow> V \\<Rightarrow> V\" (infixr \\<open>`\\<^sub>\\<bullet>\\<close> 90)\n  where \"r `\\<^sub>\\<bullet> A = \\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\""], ["", "notation fimage (infixr \"`\\<^sub>\\<bullet>\" 90)"], ["", "lemma fimage_small[simp]: \"small {b. \\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. small\n     {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "from image_iff ord_of_nat_succ_vempty"], ["proof (chain)\npicking this:\n  (?z \\<in> ?f ` ?A) = (\\<exists>x\\<in>?A. ?z = ?f x)\n  ZFC_in_HOL.succ []\\<^sub>\\<circ> = 1\\<^sub>\\<nat>", "have ss: \n    \"{b. \\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r\""], ["proof (prove)\nusing this:\n  (?z \\<in> ?f ` ?A) = (\\<exists>x\\<in>?A. ?z = ?f x)\n  ZFC_in_HOL.succ []\\<^sub>\\<circ> = 1\\<^sub>\\<nat>\n\ngoal (1 subgoal):\n 1. {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r", "by fastforce"], ["proof (state)\nthis:\n  {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> (\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r\n\ngoal (1 subgoal):\n 1. small\n     {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have small: \"small ((\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small ((\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r)", "by (rule replacement) simp"], ["proof (state)\nthis:\n  small ((\\<lambda>x. x\\<lparr>1\\<^sub>\\<nat>\\<rparr>) ` elts r)\n\ngoal (1 subgoal):\n 1. small\n     {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule smaller_than_small, rule small, rule ss)"], ["proof (state)\nthis:\n  small\n   {b. \\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fimageI1: \n  assumes \"x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\"\n  shows \"x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "unfolding fimage_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "by simp"], ["", "lemma fimageI2[intro]:\n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"a \\<in>\\<^sub>\\<circ> A\" \n  shows \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "using assms fimageI1"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n  a \\<in>\\<^sub>\\<circ> A\n  ?x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                          (?r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n                           ?A) \\<Longrightarrow>\n  ?x \\<in>\\<^sub>\\<circ> ?r `\\<^sub>\\<bullet> ?A\n\ngoal (1 subgoal):\n 1. b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "by auto"], ["", "lemma fimageD[dest]: \n  assumes \"x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"\n  shows \"x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "using assms"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "unfolding fimage_def"], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "by simp"], ["", "lemma fimageE[elim]:\n  assumes \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\"\n  obtains a where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"a \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n         a \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n         a \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding fimage_def"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n         a \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma fimage_iff: \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A \\<longleftrightarrow> (\\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A) =\n    (\\<exists>a\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fimage_vempty[simp]: \"0 `\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> `\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "by force"], ["", "lemma fimage_of_vempty[simp]: \"r `\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by force"], ["", "lemma fimage_vsingleton_in[intro, simp]: \n  assumes \"a \\<in>\\<^sub>\\<circ> A\" \n  shows \"set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = set {b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = set {b}", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = set {b}", "by auto"], ["", "lemma fimage_vsingleton_nin[intro, simp]: \n  assumes \"a \\<notin>\\<^sub>\\<circ> A\" \n  shows \"set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  a \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "by auto"], ["", "lemma fimage_vsingleton_vinsert[intro, simp]: \n  \"set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> vinsert a A = set {b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} `\\<^sub>\\<bullet> vinsert a A = set {b}", "by auto"], ["", "lemma fimage_mono: \n  assumes \"r' \\<subseteq>\\<^sub>\\<circ> r\" and \"A' \\<subseteq>\\<^sub>\\<circ> A\" \n  shows \"(r' `\\<^sub>\\<bullet> A') \\<subseteq>\\<^sub>\\<circ> (r `\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r' `\\<^sub>\\<bullet> A' \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  r' \\<subseteq>\\<^sub>\\<circ> r\n  A' \\<subseteq>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. r' `\\<^sub>\\<bullet> A' \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "by fastforce"], ["", "lemma fimage_vinsert: \"r `\\<^sub>\\<bullet> (vinsert a A) = r `\\<^sub>\\<bullet> set {a} \\<union>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> vinsert a A =\n    r `\\<^sub>\\<bullet> set {a} \\<union>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A", "by auto"], ["", "lemma fimage_vunion_left: \"(r \\<union>\\<^sub>\\<circ> s) `\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union>\\<^sub>\\<circ> s) `\\<^sub>\\<bullet> A =\n    r `\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s `\\<^sub>\\<bullet> A", "by auto"], ["", "lemma fimage_vunion_right: \"r `\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) = r `\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) =\n    r `\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B", "by auto"], ["", "lemma fimage_vintersection: \"r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B) \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)\n    \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ>\n                              r `\\<^sub>\\<bullet> B", "by auto"], ["", "lemma fimage_vdiff: \"r `\\<^sub>\\<bullet> A -\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> A -\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\n    \\<subseteq>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma fimage_vsingleton_iff[iff]: \"b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> set {a} \\<longleftrightarrow> [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b \\<in>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> set {a}) =\n    ([a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "lemma fimage_is_vempty[iff]: \"r `\\<^sub>\\<bullet> A = 0 \\<longleftrightarrow> vdisjnt (\\<D>\\<^sub>\\<bullet> r) A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r `\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>) =\n    (\\<D>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> A = []\\<^sub>\\<circ>)", "by fastforce"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fid_on_fimage[simp]: \"(fid_on A) `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> B", "by force"], ["", "lemma fimage_fconst_on_ne[simp]: \n  assumes \"B \\<inter>\\<^sub>\\<circ> A \\<noteq> 0\" \n  shows \"(fconst_on A c) `\\<^sub>\\<bullet> B = set {c}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c `\\<^sub>\\<bullet> B = set {c}", "using assms"], ["proof (prove)\nusing this:\n  B \\<inter>\\<^sub>\\<circ> A \\<noteq> []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. fconst_on A c `\\<^sub>\\<bullet> B = set {c}", "by auto"], ["", "lemma fimage_fconst_on_vempty[simp]: \n  assumes \"vdisjnt A B\"\n  shows \"(fconst_on A c) `\\<^sub>\\<bullet> B = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c `\\<^sub>\\<bullet> B = []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  A \\<inter>\\<^sub>\\<circ> B = []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. fconst_on A c `\\<^sub>\\<bullet> B = []\\<^sub>\\<circ>", "by auto"], ["", "lemma fimage_fconst_on_vsubset_const[simp]: \"(fconst_on A c) `\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> set {c}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c `\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> set {c}", "by auto"], ["", "lemma fcomp_frange: \"\\<R>\\<^sub>\\<bullet> (r \\<circ>\\<^sub>\\<bullet> s) = r `\\<^sub>\\<bullet> (\\<R>\\<^sub>\\<bullet> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<R>\\<^sub>\\<bullet> (r \\<circ>\\<^sub>\\<bullet> s) =\n    r `\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> s", "by blast"], ["", "lemma fcomp_fimage: \"(r \\<circ>\\<^sub>\\<bullet> s) `\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> (s `\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<circ>\\<^sub>\\<bullet> s) `\\<^sub>\\<bullet> A =\n    r `\\<^sub>\\<bullet> s `\\<^sub>\\<bullet> A", "by blast"], ["", "lemma fimage_flrestriction[simp]: \"(r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B = r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B =\n    r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma fimage_frrestriction[simp]: \"(r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B =\n    A \\<inter>\\<^sub>\\<circ> r `\\<^sub>\\<bullet> B", "by auto"], ["", "lemma fimage_frestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> (r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sub>\\<bullet> A) `\\<^sub>\\<bullet> B =\n    A \\<inter>\\<^sub>\\<circ>\n    r `\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma fimage_fdomain: \"r `\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = \\<R>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = \\<R>\\<^sub>\\<bullet> r", "by auto"], ["", "lemma fimage_eq_imp_fcomp: \n  assumes \"f `\\<^sub>\\<bullet> A = g `\\<^sub>\\<bullet> B\" \n  shows \"(h \\<circ>\\<^sub>\\<bullet> f) `\\<^sub>\\<bullet> A = (h \\<circ>\\<^sub>\\<bullet> g) `\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (h \\<circ>\\<^sub>\\<bullet> f) `\\<^sub>\\<bullet> A =\n    (h \\<circ>\\<^sub>\\<bullet> g) `\\<^sub>\\<bullet> B", "using assms"], ["proof (prove)\nusing this:\n  f `\\<^sub>\\<bullet> A = g `\\<^sub>\\<bullet> B\n\ngoal (1 subgoal):\n 1. (h \\<circ>\\<^sub>\\<bullet> f) `\\<^sub>\\<bullet> A =\n    (h \\<circ>\\<^sub>\\<bullet> g) `\\<^sub>\\<bullet> B", "by (metis fcomp_fimage)"], ["", "text\\<open>Previous connections.\\<close>"], ["", "lemma fcomp_rel_fconst_on_ftimes: \"r \\<circ>\\<^sub>\\<bullet> (fconst_on A c) = A \\<times>\\<^sub>\\<bullet> (r `\\<^sub>\\<bullet> set {c})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<circ>\\<^sub>\\<bullet> fconst_on A c =\n    A \\<times>\\<^sub>\\<bullet> r `\\<^sub>\\<bullet> set {c}", "by blast"], ["", "text\\<open>Further special properties.\\<close>"], ["", "lemma fimage_vsubset: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\" \n  shows \"r `\\<^sub>\\<bullet> C \\<subseteq>\\<^sub>\\<circ> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> C \\<subseteq>\\<^sub>\\<circ> B", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\n\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> C \\<subseteq>\\<^sub>\\<circ> B", "by blast"], ["", "lemma fimage_set_def: \"r `\\<^sub>\\<bullet> A = set {b. \\<exists>a\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> A =\n    set {b. \\<exists>a\\<in>elts A.\n               [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "unfolding fimage_def frange_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. set {b. \\<exists>a.\n               [a, b]\\<^sub>\\<circ>\n               \\<in>\\<^sub>\\<circ> r \\<restriction>\\<^sup>l\\<^sub>\\<bullet>\n                                   A} =\n    set {b. \\<exists>a\\<in>elts A.\n               [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by auto"], ["", "lemma fimage_vsingleton: \"r `\\<^sub>\\<bullet> set {a} = set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> set {a} =\n    set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> set {a} =\n    set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have \"{b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} \\<subseteq> {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by auto"], ["proof (state)\nthis:\n  {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> set {a} =\n    set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "then"], ["proof (chain)\npicking this:\n  {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have [simp]: \"small {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\nusing this:\n  {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> {b. \\<exists>a. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. small {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule smaller_than_small[OF frange_small[of r]])"], ["proof (state)\nthis:\n  small {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> set {a} =\n    set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. r `\\<^sub>\\<bullet> set {a} =\n    set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by auto"], ["proof (state)\nthis:\n  r `\\<^sub>\\<bullet> set {a} =\n  set {b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fimage_strict_vsubset: \"f `\\<^sub>\\<bullet> A \\<subseteq>\\<^sub>\\<circ> f `\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f `\\<^sub>\\<bullet> A\n    \\<subseteq>\\<^sub>\\<circ> f `\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> f", "by auto"], ["", "subsubsection\\<open>Inverse image\\<close>"], ["", "definition finvimage :: \"V \\<Rightarrow> V \\<Rightarrow> V\" (infixr \\<open>-`\\<^sub>\\<bullet>\\<close> 90)\n  where \"r -`\\<^sub>\\<bullet> A = r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\""], ["", "lemma finvimage_small[simp]: \"small {a. \\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. small\n     {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have ss: \"{a. \\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r} \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r", "using image_iff"], ["proof (prove)\nusing this:\n  (?z \\<in> ?f ` ?A) = (\\<exists>x\\<in>?A. ?z = ?f x)\n\ngoal (1 subgoal):\n 1. {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n    \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r", "by fastforce"], ["proof (state)\nthis:\n  {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n  \\<subseteq> (\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r\n\ngoal (1 subgoal):\n 1. small\n     {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "have small: \"small ((\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. small ((\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r)", "by (rule replacement) simp"], ["proof (state)\nthis:\n  small ((\\<lambda>x. x\\<lparr>0\\<^sub>\\<nat>\\<rparr>) ` elts r)\n\ngoal (1 subgoal):\n 1. small\n     {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. small\n     {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by (rule smaller_than_small, rule small, rule ss)"], ["proof (state)\nthis:\n  small\n   {a. \\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma finvimageI[intro]:\n  assumes \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"b \\<in>\\<^sub>\\<circ> A\" \n  shows \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "using assms finvimage_def"], ["proof (prove)\nusing this:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n  b \\<in>\\<^sub>\\<circ> A\n  ?r -`\\<^sub>\\<bullet> ?A =\n  ?r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> ?A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "by auto"], ["", "lemma finvimageD[dest]: \n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "using finvimage_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\n  ?r -`\\<^sub>\\<bullet> ?A =\n  ?r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> ?A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "by auto"], ["", "lemma finvimageE[elim]:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  obtains b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\" and \"b \\<in>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n         b \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n         b \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding finvimage_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n         b \\<in>\\<^sub>\\<circ> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma finvimageI1: \n  assumes \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\"\n  shows \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "unfolding fimage_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "by (simp add: finvimage_def fimageI1 flrestriction_fconverse)"], ["", "lemma finvimageD1: \n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                           (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "by fastforce"], ["", "lemma finvimageE1:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \" and \"a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\n  a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                         (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet>\n                          A) \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "by auto"], ["", "lemma finvimageI2: \n  assumes \"a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "unfolding finvimage_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A", "by simp"], ["", "lemma finvimageD2:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\"\n  shows \"a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A", "unfolding finvimage_def"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\n\ngoal (1 subgoal):\n 1. a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A", "by simp"], ["", "lemma finvimageE2:\n  assumes \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<circ> A\" and \"a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<circ> `\\<^sub>\\<circ> A \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "unfolding vimage_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<circ> A\n  a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<circ> `\\<^sub>\\<circ>\n                        A \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "by blast"], ["", "lemma finvimage_iff: \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<longleftrightarrow> (\\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A) =\n    (\\<exists>b\\<in>elts A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r)", "by auto"], ["", "lemma finvimage_iff1: \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<longleftrightarrow> a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A) =\n    (a \\<in>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                            (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A))", "by auto"], ["", "lemma finvimage_iff2: \"a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<longleftrightarrow> a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<in>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A) =\n    (a \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> A)", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma finvimage_vempty[simp]: \"0 -`\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. []\\<^sub>\\<circ> -`\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "by force"], ["", "lemma finvimage_of_vempty[simp]: \"r -`\\<^sub>\\<bullet> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> []\\<^sub>\\<circ> = []\\<^sub>\\<circ>", "by force"], ["", "lemma finvimage_vsingleton_in[intro, simp]: \n  assumes \"b \\<in>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = set {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = set {a}", "using assms"], ["proof (prove)\nusing this:\n  b \\<in>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = set {a}", "by auto"], ["", "lemma finvimage_vsingleton_nin[intro, simp]: \n  assumes \"b \\<notin>\\<^sub>\\<circ> A\"\n  shows \"set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  b \\<notin>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> A = []\\<^sub>\\<circ>", "by auto"], ["", "lemma finvimage_vsingleton_vinsert[intro, simp]: \n  \"set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> vinsert b A = set {a}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set {[a, b]\\<^sub>\\<circ>} -`\\<^sub>\\<bullet> vinsert b A = set {a}", "by auto"], ["", "lemma finvimage_mono: \n  assumes \"r' \\<subseteq>\\<^sub>\\<circ> r\" and \"A' \\<subseteq>\\<^sub>\\<circ> A\"\n  shows \"(r' -`\\<^sub>\\<bullet> A') \\<subseteq>\\<^sub>\\<circ> (r -`\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r' -`\\<^sub>\\<bullet> A'\n    \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "using assms"], ["proof (prove)\nusing this:\n  r' \\<subseteq>\\<^sub>\\<circ> r\n  A' \\<subseteq>\\<^sub>\\<circ> A\n\ngoal (1 subgoal):\n 1. r' -`\\<^sub>\\<bullet> A'\n    \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A", "by fastforce"], ["", "lemma finvimage_vinsert: \"r -`\\<^sub>\\<bullet> (vinsert a A) = r -`\\<^sub>\\<bullet> set {a} \\<union>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> vinsert a A =\n    r -`\\<^sub>\\<bullet> set {a} \\<union>\\<^sub>\\<circ>\n    r -`\\<^sub>\\<bullet> A", "by auto"], ["", "lemma finvimage_vunion_left: \"(r \\<union>\\<^sub>\\<circ> s) -`\\<^sub>\\<bullet> A = r -`\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s -`\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<union>\\<^sub>\\<circ> s) -`\\<^sub>\\<bullet> A =\n    r -`\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> s -`\\<^sub>\\<bullet> A", "by auto"], ["", "lemma finvimage_vunion_right: \"r -`\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) = r -`\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> (A \\<union>\\<^sub>\\<circ> B) =\n    r -`\\<^sub>\\<bullet> A \\<union>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B", "by auto"], ["", "lemma finvimage_vintersection: \"r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B) \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)\n    \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> A \\<inter>\\<^sub>\\<circ>\n                              r -`\\<^sub>\\<bullet> B", "by auto"], ["", "lemma finvimage_vdiff: \"r -`\\<^sub>\\<bullet> A -\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> A -\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\n    \\<subseteq>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> (A -\\<^sub>\\<circ> B)", "by auto"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma finvimage_set_def: \"r -`\\<^sub>\\<bullet> A = set {a. \\<exists>b\\<in>\\<^sub>\\<circ>A. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> A =\n    set {a. \\<exists>b\\<in>elts A.\n               [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r}", "by fastforce"], ["", "lemma finvimage_eq_fdomain_frestriction: \"r -`\\<^sub>\\<bullet> A = \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> A =\n    \\<D>\\<^sub>\\<bullet> (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "by fastforce"], ["", "lemma finvimage_frange[simp]: \"r -`\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = \\<D>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = \\<D>\\<^sub>\\<bullet> r", "unfolding invimage_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = \\<D>\\<^sub>\\<bullet> r", "by force"], ["", "lemma finvimage_frange_vsubset[simp]: \n  assumes \"\\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B\" \n  shows \"r -`\\<^sub>\\<bullet> B = \\<D>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> B = \\<D>\\<^sub>\\<bullet> r", "using assms"], ["proof (prove)\nusing this:\n  \\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. r -`\\<^sub>\\<bullet> B = \\<D>\\<^sub>\\<bullet> r", "unfolding finvimage_def"], ["proof (prove)\nusing this:\n  \\<R>\\<^sub>\\<bullet> r \\<subseteq>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> B = \\<D>\\<^sub>\\<bullet> r", "by force"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma finvimage_fid_on[simp]: \"(fid_on A) -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fid_on A -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> B", "by force"], ["", "lemma finvimage_fconst_on_vsubset_fdomain[simp]: \"(fconst_on A c) -`\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c -`\\<^sub>\\<bullet> B \\<subseteq>\\<^sub>\\<circ> A", "unfolding finvimage_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (fconst_on A c)\\<inverse>\\<^sub>\\<bullet> `\\<^sub>\\<bullet> B\n    \\<subseteq>\\<^sub>\\<circ> A", "by blast"], ["", "lemma finvimage_fconst_on_ne[simp]: \n  assumes \"c \\<in>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) -`\\<^sub>\\<bullet> B = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c -`\\<^sub>\\<bullet> B = A", "by (simp add: assms finvimage_eq_fdomain_frestriction frrestriction_fconst_on)"], ["", "lemma finvimage_fconst_on_vempty[simp]: \n  assumes \"c \\<notin>\\<^sub>\\<circ> B\"\n  shows \"(fconst_on A c) -`\\<^sub>\\<bullet> B = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fconst_on A c -`\\<^sub>\\<bullet> B = []\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  c \\<notin>\\<^sub>\\<circ> B\n\ngoal (1 subgoal):\n 1. fconst_on A c -`\\<^sub>\\<bullet> B = []\\<^sub>\\<circ>", "by auto"], ["", "lemma finvimage_fcomp: \"(g \\<circ>\\<^sub>\\<bullet> f) -`\\<^sub>\\<bullet> x = f -`\\<^sub>\\<bullet> (g -`\\<^sub>\\<bullet> x) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g \\<circ>\\<^sub>\\<bullet> f) -`\\<^sub>\\<bullet> x =\n    f -`\\<^sub>\\<bullet> g -`\\<^sub>\\<bullet> x", "by (simp add: finvimage_def fconverse_fcomp fcomp_fimage)"], ["", "lemma finvimage_fconverse[simp]: \"r\\<inverse>\\<^sub>\\<bullet> -`\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> -`\\<^sub>\\<bullet> A = r `\\<^sub>\\<bullet> A", "by auto"], ["", "lemma finvimage_flrestriction[simp]: \"(r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B =\n    A \\<inter>\\<^sub>\\<circ> r -`\\<^sub>\\<bullet> B", "by auto"], ["", "lemma finvimage_frrestriction[simp]: \"(r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B = (r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B =\n    r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)", "by auto"], ["", "lemma finvimage_frestriction[simp]: \"(r \\<restriction>\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B = A \\<inter>\\<^sub>\\<circ> (r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r \\<restriction>\\<^sub>\\<bullet> A) -`\\<^sub>\\<bullet> B =\n    A \\<inter>\\<^sub>\\<circ>\n    r -`\\<^sub>\\<bullet> (A \\<inter>\\<^sub>\\<circ> B)", "by blast"], ["", "text\\<open>Previous connections.\\<close>"], ["", "lemma fdomain_fcomp[simp]: \"\\<D>\\<^sub>\\<bullet> (r \\<circ>\\<^sub>\\<bullet> s) = s -`\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<D>\\<^sub>\\<bullet> (r \\<circ>\\<^sub>\\<bullet> s) =\n    s -`\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r", "by force"], ["", "subsection\\<open>Classification of relations\\<close>"], ["", "subsubsection\\<open>Binary relation\\<close>"], ["", "locale fbrelation = \n  fixes r :: V\n  assumes fbrelation[simp]: \"fpairs r = r\""], ["", "locale fbrelation_pair = r\\<^sub>1: fbrelation r\\<^sub>1 + r\\<^sub>2: fbrelation r\\<^sub>2 for r\\<^sub>1 r\\<^sub>2"], ["", "text\\<open>Rules.\\<close>"], ["", "lemma fpairs_eqI[intro!]:\n  assumes \"\\<And>x. x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> \\<exists>a b. x = [a, b]\\<^sub>\\<circ>\"\n  shows \"fpairs r = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fpairs r = r", "using assms"], ["proof (prove)\nusing this:\n  ?x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n  \\<exists>a b. ?x = [a, b]\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. fpairs r = r", "by auto"], ["", "lemma fpairs_eqD[dest]: \n  assumes \"fpairs r = r\"\n  shows \"\\<And>x. x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> \\<exists>a b. x = [a, b]\\<^sub>\\<circ>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  fpairs r = r\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n       \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "by auto"], ["", "lemma fpairs_eqE[elim!]: \n  assumes \"fpairs r = r\" and \"(\\<And>x. x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> \\<exists>a b. x = [a, b]\\<^sub>\\<circ>) \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  fpairs r = r\n  (\\<And>x.\n      x \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n      \\<exists>a b. x = [a, b]\\<^sub>\\<circ>) \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "by auto"], ["", "lemmas fbrelationI[intro!] = fbrelation.intro"], ["", "lemmas fbrelationD[dest!] = fbrelation.fbrelation"], ["", "lemma fbrelationE[elim!]: \n  assumes \"fbrelation r\" and \"(fpairs r = r) \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  fbrelation r\n  fpairs r = r \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "unfolding fbrelation_def"], ["proof (prove)\nusing this:\n  fpairs r = r\n  fpairs r = r \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "by auto"], ["", "lemma fbrelationE1:\n  assumes \"fbrelation r\" and \"x \\<in>\\<^sub>\\<circ> r\" \n  obtains a b where \"x = [a, b]\\<^sub>\\<circ>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        x = [a, b]\\<^sub>\\<circ> \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  fbrelation r\n  x \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        x = [a, b]\\<^sub>\\<circ> \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["", "lemma fbrelationD1[dest]:\n  assumes \"fbrelation r\" and \"x \\<in>\\<^sub>\\<circ> r\" \n  shows \"\\<exists>a b. x = [a, b]\\<^sub>\\<circ>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "using assms"], ["proof (prove)\nusing this:\n  fbrelation r\n  x \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. \\<exists>a b. x = [a, b]\\<^sub>\\<circ>", "by auto"], ["", "text\\<open>Set operations.\\<close>"], ["", "lemma fbrelation_vsubset:\n  assumes \"fbrelation s\" and \"r \\<subseteq>\\<^sub>\\<circ> s\" \n  shows \"fbrelation r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation r", "using assms"], ["proof (prove)\nusing this:\n  fbrelation s\n  r \\<subseteq>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. fbrelation r", "by auto"], ["", "lemma fbrelation_vinsert: \"fbrelation (vinsert [a, b]\\<^sub>\\<circ> r) \\<longleftrightarrow> fbrelation r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (vinsert [a, b]\\<^sub>\\<circ> r) = fbrelation r", "by auto"], ["", "lemma (in fbrelation) fbrelation_vinsertI: \"fbrelation (vinsert [a, b]\\<^sub>\\<circ> r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (vinsert [a, b]\\<^sub>\\<circ> r)", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. fbrelation (vinsert [a, b]\\<^sub>\\<circ> r)", "by auto"], ["", "lemma fbrelation_vinsertD[dest]:\n  assumes \"fbrelation (vinsert \\<langle>a, b\\<rangle> r)\"\n  shows \"fbrelation r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation r", "using assms"], ["proof (prove)\nusing this:\n  fbrelation (vinsert \\<langle>a, b\\<rangle> r)\n\ngoal (1 subgoal):\n 1. fbrelation r", "by auto"], ["", "lemma fbrelation_vunion: \"fbrelation (r \\<union>\\<^sub>\\<circ> s) \\<longleftrightarrow> fbrelation r \\<and> fbrelation s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r \\<union>\\<^sub>\\<circ> s) =\n    (fbrelation r \\<and> fbrelation s)", "by auto"], ["", "lemma (in fbrelation_pair) fbrelation_vunionI: \"fbrelation (r\\<^sub>1 \\<union>\\<^sub>\\<circ> r\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r\\<^sub>1 \\<union>\\<^sub>\\<circ> r\\<^sub>2)", "using r\\<^sub>1.fbrelation_axioms r\\<^sub>2.fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\\<^sub>1\n  fbrelation r\\<^sub>2\n\ngoal (1 subgoal):\n 1. fbrelation (r\\<^sub>1 \\<union>\\<^sub>\\<circ> r\\<^sub>2)", "by auto"], ["", "lemma fbrelation_vunionD[dest]: \n  assumes \"fbrelation (r \\<union>\\<^sub>\\<circ> s)\"\n  shows \"fbrelation r\" and \"fbrelation s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation r &&& fbrelation s", "using assms"], ["proof (prove)\nusing this:\n  fbrelation (r \\<union>\\<^sub>\\<circ> s)\n\ngoal (1 subgoal):\n 1. fbrelation r &&& fbrelation s", "by auto"], ["", "lemma (in fbrelation) fbrelation_vintersectionI: \"fbrelation (r \\<inter>\\<^sub>\\<circ> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r \\<inter>\\<^sub>\\<circ> s)", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. fbrelation (r \\<inter>\\<^sub>\\<circ> s)", "by auto"], ["", "lemma (in fbrelation) fbrelation_vdiffI: \"fbrelation (r -\\<^sub>\\<circ> s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r -\\<^sub>\\<circ> s)", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. fbrelation (r -\\<^sub>\\<circ> s)", "by auto"], ["", "text\\<open>Connections.\\<close>"], ["", "lemma fbrelation_vempty: \"fbrelation 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation []\\<^sub>\\<circ>", "by auto"], ["", "lemma fbrelation_vsingleton: \"fbrelation (set {[a, b]\\<^sub>\\<circ>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (set {[a, b]\\<^sub>\\<circ>})", "by auto"], ["", "global_interpretation frel_vsingleton: fbrelation \\<open>set {[a, b]\\<^sub>\\<circ>}\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (set {[a, b]\\<^sub>\\<circ>})", "by (rule fbrelation_vsingleton)"], ["", "lemma fbrelation_vdoubleton: \"fbrelation (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (set {[a, b]\\<^sub>\\<circ>, [c, d]\\<^sub>\\<circ>})", "by auto"], ["", "lemma fbrelation_sid_on[simp]: \"fbrelation (fid_on A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (fid_on A)", "by auto"], ["", "lemma fbrelation_fconst_on[simp]: \"fbrelation (fconst_on A c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (fconst_on A c)", "by auto"], ["", "lemma (in fbrelation_pair) fbrelation_fcomp: \"fbrelation (r\\<^sub>1 \\<circ>\\<^sub>\\<bullet> r\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r\\<^sub>1 \\<circ>\\<^sub>\\<bullet> r\\<^sub>2)", "using r\\<^sub>1.fbrelation_axioms r\\<^sub>2.fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\\<^sub>1\n  fbrelation r\\<^sub>2\n\ngoal (1 subgoal):\n 1. fbrelation (r\\<^sub>1 \\<circ>\\<^sub>\\<bullet> r\\<^sub>2)", "by auto"], ["", "sublocale fbrelation_pair \\<subseteq> fcomp\\<^sub>2\\<^sub>1: fbrelation \\<open>r\\<^sub>2 \\<circ>\\<^sub>\\<bullet> r\\<^sub>1\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r\\<^sub>2 \\<circ>\\<^sub>\\<bullet> r\\<^sub>1)", "by \n    (\n      simp add: \n        fbrelation_pair.fbrelation_fcomp \n        fbrelation_pair_def \n        r\\<^sub>1.fbrelation_axioms \n        r\\<^sub>2.fbrelation_axioms\n     )"], ["", "sublocale fbrelation_pair \\<subseteq> fcomp\\<^sub>1\\<^sub>2: fbrelation \\<open>r\\<^sub>1 \\<circ>\\<^sub>\\<bullet> r\\<^sub>2\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r\\<^sub>1 \\<circ>\\<^sub>\\<bullet> r\\<^sub>2)", "by (rule fbrelation_fcomp)"], ["", "lemma (in fbrelation) fbrelation_fconverse: \"fbrelation (r\\<inverse>\\<^sub>\\<bullet>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r\\<inverse>\\<^sub>\\<bullet>)", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. fbrelation (r\\<inverse>\\<^sub>\\<bullet>)", "by clarsimp"], ["", "lemma fbrelation_flrestriction[intro, simp]: \"fbrelation (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> A)", "by auto"], ["", "lemma fbrelation_frrestriction[intro, simp]: \"fbrelation (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> A)", "by auto"], ["", "lemma fbrelation_frestriction[intro, simp]: \"fbrelation (r \\<restriction>\\<^sub>\\<bullet> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation (r \\<restriction>\\<^sub>\\<bullet> A)", "by auto"], ["", "text\\<open>Previous connections.\\<close>"], ["", "lemma (in fbrelation) fconverse_fconverse[simp]: \"(r\\<inverse>\\<^sub>\\<bullet>)\\<inverse>\\<^sub>\\<bullet> = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r\\<inverse>\\<^sub>\\<bullet>)\\<inverse>\\<^sub>\\<bullet> = r", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. (r\\<inverse>\\<^sub>\\<bullet>)\\<inverse>\\<^sub>\\<bullet> = r", "by auto"], ["", "lemma (in fbrelation_pair) fconverse_mono[simp]: \"r\\<^sub>1\\<inverse>\\<^sub>\\<bullet> \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2\\<inverse>\\<^sub>\\<bullet> \\<longleftrightarrow> r\\<^sub>1 \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r\\<^sub>1\\<inverse>\\<^sub>\\<bullet>\n     \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2\\<inverse>\\<^sub>\\<bullet>) =\n    (r\\<^sub>1 \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2)", "using r\\<^sub>1.fbrelation_axioms r\\<^sub>2.fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\\<^sub>1\n  fbrelation r\\<^sub>2\n\ngoal (1 subgoal):\n 1. (r\\<^sub>1\\<inverse>\\<^sub>\\<bullet>\n     \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2\\<inverse>\\<^sub>\\<bullet>) =\n    (r\\<^sub>1 \\<subseteq>\\<^sub>\\<circ> r\\<^sub>2)", "by (force intro: fconverse_vunion)+"], ["", "lemma (in fbrelation_pair) fconverse_inject[simp]: \"r\\<^sub>1\\<inverse>\\<^sub>\\<bullet> = r\\<^sub>2\\<inverse>\\<^sub>\\<bullet> \\<longleftrightarrow> r\\<^sub>1 = r\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (r\\<^sub>1\\<inverse>\\<^sub>\\<bullet> =\n     r\\<^sub>2\\<inverse>\\<^sub>\\<bullet>) =\n    (r\\<^sub>1 = r\\<^sub>2)", "using r\\<^sub>1.fbrelation_axioms r\\<^sub>2.fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\\<^sub>1\n  fbrelation r\\<^sub>2\n\ngoal (1 subgoal):\n 1. (r\\<^sub>1\\<inverse>\\<^sub>\\<bullet> =\n     r\\<^sub>2\\<inverse>\\<^sub>\\<bullet>) =\n    (r\\<^sub>1 = r\\<^sub>2)", "by fast"], ["", "lemma (in fbrelation) fconverse_vsubset_swap_2: \n  assumes \"r\\<inverse>\\<^sub>\\<bullet> \\<subseteq>\\<^sub>\\<circ> s\"\n  shows \"r \\<subseteq>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<subseteq>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>", "using assms fbrelation_axioms"], ["proof (prove)\nusing this:\n  r\\<inverse>\\<^sub>\\<bullet> \\<subseteq>\\<^sub>\\<circ> s\n  fbrelation r\n\ngoal (1 subgoal):\n 1. r \\<subseteq>\\<^sub>\\<circ> s\\<inverse>\\<^sub>\\<bullet>", "by auto"], ["", "lemma (in fbrelation) flrestriction_fdomain[simp]: \"r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = r", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>l\\<^sub>\\<bullet> \\<D>\\<^sub>\\<bullet> r = r", "by (elim fbrelationE) blast"], ["", "lemma (in fbrelation) frrestriction_frange[simp]: \"r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = r", "using fbrelation_axioms"], ["proof (prove)\nusing this:\n  fbrelation r\n\ngoal (1 subgoal):\n 1. r \\<restriction>\\<^sup>r\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r = r", "by (elim fbrelationE) blast"], ["", "text\\<open>Special properties.\\<close>"], ["", "lemma vsubset_vtimes_fbrelation: \n  assumes \"r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\"\n  shows \"fbrelation r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation r", "using assms"], ["proof (prove)\nusing this:\n  r \\<subseteq>\\<^sub>\\<circ> A \\<times>\\<^sub>\\<bullet> B\n\ngoal (1 subgoal):\n 1. fbrelation r", "by blast"], ["", "lemma (in fbrelation) fbrelation_vintersection_vdomain:\n  assumes \"vdisjnt (\\<D>\\<^sub>\\<bullet> r) (\\<D>\\<^sub>\\<bullet> s)\"\n  shows \"vdisjnt r s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<inter>\\<^sub>\\<circ> s = []\\<^sub>\\<circ>", "proof(rule vsubset_antisym; rule vsubsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "assume \"x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\""], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "then"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "obtain a b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        [a, b]\\<^sub>\\<circ>\n        \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis fbrelationE1 fbrelation_vintersectionI)"], ["proof (state)\nthis:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "with assms"], ["proof (chain)\npicking this:\n  \\<D>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> s =\n  []\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "show \"x \\<in>\\<^sub>\\<circ> 0\""], ["proof (prove)\nusing this:\n  \\<D>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> s =\n  []\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>", "by auto"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "qed simp"], ["", "lemma (in fbrelation) fbrelation_vintersection_vrange:\n  assumes \"vdisjnt (\\<R>\\<^sub>\\<bullet> r) (\\<R>\\<^sub>\\<bullet> s)\"\n  shows \"vdisjnt r s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<inter>\\<^sub>\\<circ> s = []\\<^sub>\\<circ>", "proof(rule vsubset_antisym; rule vsubsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "assume \"x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\""], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "then"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "obtain a b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        [a, b]\\<^sub>\\<circ>\n        \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis fbrelationE1 fbrelation_vintersectionI)"], ["proof (state)\nthis:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "with assms"], ["proof (chain)\npicking this:\n  \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s =\n  []\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "show \"x \\<in>\\<^sub>\\<circ> 0\""], ["proof (prove)\nusing this:\n  \\<R>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<R>\\<^sub>\\<bullet> s =\n  []\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>", "by auto"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "qed simp"], ["", "lemma (in fbrelation) fbrelation_vintersection_vfield:\n  assumes \"vdisjnt (ffield r) (ffield s)\"\n  shows \"vdisjnt r s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<inter>\\<^sub>\\<circ> s = []\\<^sub>\\<circ>", "proof(rule vsubset_antisym; rule vsubsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "assume \"x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\""], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "then"], ["proof (chain)\npicking this:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "obtain a b where \"[a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\""], ["proof (prove)\nusing this:\n  x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        [a, b]\\<^sub>\\<circ>\n        \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis fbrelationE1 fbrelation_vintersectionI)"], ["proof (state)\nthis:\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n 2. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "with assms"], ["proof (chain)\npicking this:\n  \\<F>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> s =\n  []\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "show \"x \\<in>\\<^sub>\\<circ> 0\""], ["proof (prove)\nusing this:\n  \\<F>\\<^sub>\\<bullet> r \\<inter>\\<^sub>\\<circ> \\<F>\\<^sub>\\<bullet> s =\n  []\\<^sub>\\<circ>\n  [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s\n\ngoal (1 subgoal):\n 1. x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>", "by auto"], ["proof (state)\nthis:\n  x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in>\\<^sub>\\<circ> []\\<^sub>\\<circ> \\<Longrightarrow>\n       x \\<in>\\<^sub>\\<circ> r \\<inter>\\<^sub>\\<circ> s", "qed auto"], ["", "lemma (in fbrelation) vdomain_vrange_vtimes: \"r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet> r \\<times>\\<^sub>\\<bullet> \\<R>\\<^sub>\\<bullet> r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                                 r \\<times>\\<^sub>\\<bullet>\n                                \\<R>\\<^sub>\\<bullet> r", "using fbrelation"], ["proof (prove)\nusing this:\n  fpairs r = r\n\ngoal (1 subgoal):\n 1. r \\<subseteq>\\<^sub>\\<circ> \\<D>\\<^sub>\\<bullet>\n                                 r \\<times>\\<^sub>\\<bullet>\n                                \\<R>\\<^sub>\\<bullet> r", "by blast"], ["", "lemma (in fbrelation) fconverse_eq_frel[intro, simp]:\n  assumes \"\\<And>a b. [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow> [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\"\n  shows \"r\\<inverse>\\<^sub>\\<bullet> = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> = r", "using assms"], ["proof (prove)\nusing this:\n  [?a, ?b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n  [?b, ?a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r\n\ngoal (1 subgoal):\n 1. r\\<inverse>\\<^sub>\\<bullet> = r", "apply (intro vsubset_antisym; intro vsubsetI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>a b.\n                   [a, b]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n                   [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n        \\<And>a b.\n           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n           [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n        x \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\\<rbrakk>\n       \\<Longrightarrow> x \\<in>\\<^sub>\\<circ> r\n 2. \\<And>x.\n       \\<lbrakk>\\<And>a b.\n                   [a, b]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n                   [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n        \\<And>a b.\n           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n           [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n        x \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n       \\<Longrightarrow> x \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a b.\n                [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n                [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n     \\<And>a b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n     x_ \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>\\<rbrakk>\n    \\<Longrightarrow> x_ \\<in>\\<^sub>\\<circ> r", "by blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>a b.\n                   [a, b]\\<^sub>\\<circ>\n                   \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n                   [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n        \\<And>a b.\n           [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n           [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n        x \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n       \\<Longrightarrow> x \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a b.\n                [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n                [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n     \\<And>a b.\n        [a, b]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r \\<Longrightarrow>\n        [b, a]\\<^sub>\\<circ> \\<in>\\<^sub>\\<circ> r;\n     x_ \\<in>\\<^sub>\\<circ> r\\<rbrakk>\n    \\<Longrightarrow> x_ \\<in>\\<^sub>\\<circ> r\\<inverse>\\<^sub>\\<bullet>", "by (metis fconverseE fconverseI fconverse_fconverse)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma fcomp_fconverse_frel_eq_frel_fbrelationI:\n  assumes \"r\\<inverse>\\<^sub>\\<bullet> \\<circ>\\<^sub>\\<bullet> r = r\"\n  shows \"fbrelation r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fbrelation r", "using assms"], ["proof (prove)\nusing this:\n  r\\<inverse>\\<^sub>\\<bullet> \\<circ>\\<^sub>\\<bullet> r = r\n\ngoal (1 subgoal):\n 1. fbrelation r", "by (intro fbrelationI, elim vequalityE vsubsetE) force"], ["", "text\\<open>Alternative forms of existing results.\\<close>"], ["", "lemmas [intro, simp] = fbrelation.fconverse_fconverse\n  and fconverse_eq_frel[intro, simp] = fbrelation.fconverse_eq_frel"], ["", "context\n  fixes r\\<^sub>1 r\\<^sub>2\n  assumes r\\<^sub>1: \"fbrelation r\\<^sub>1\"\n    and r\\<^sub>2: \"fbrelation r\\<^sub>2\"\nbegin"], ["", "lemmas_with[OF fbrelation_pair.intro[OF r\\<^sub>1 r\\<^sub>2]] :\n  fbrelation_fconverse_mono[intro, simp] = fbrelation_pair.fconverse_mono\n  and fbrelation_frrestriction_srange[intro, simp] = \n    fbrelation_pair.fconverse_inject"], ["", "end"], ["", "text\\<open>\\newpage\\<close>"], ["", "end"]]}