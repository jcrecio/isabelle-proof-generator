{"file_name": "/home/qj213/afp-2021-10-22/thys/Partial_Order_Reduction/Ample_Abstract.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Partial_Order_Reduction", "problem_names": ["lemma ample_subset:\n      assumes \"ample_set q A\"\n      shows \"A \\<subseteq> {a. en a q}\"", "lemma ample_nonempty:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\"\n      shows \"A \\<noteq> {}\"", "lemma ample_wellfounded:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\" \"a \\<in> A\"\n      shows \"src (ex a q) q\"", "lemma ample_invisible:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\"\n      shows \"A \\<subseteq> invisible\"", "lemma ample_independent:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\" \"path w q\" \"A \\<inter> set w = {}\"\n      shows \"Ind A (set w)\"", "lemma ample_en[intro]: \"ample_set q {a. en a q}\"", "lemma reduction_words_fin:\n      assumes \"q \\<in> nodes\" \"R.path w q\"\n      shows \"S.path w q\"", "lemma reduction_words_inf:\n      assumes \"q \\<in> nodes\" \"R.run w q\"\n      shows \"S.run w q\"", "lemma reduction_step:\n      assumes \"q \\<in> nodes\" \"run w q\"\n      obtains\n        (deferred) a where \"ren a q\" \"[a] \\<preceq>\\<^sub>F\\<^sub>I w\" |\n        (omitted) \"{a. ren a q} \\<subseteq> invisible\" \"Ind {a. ren a q} (sset w)\"", "lemma reduction_chunk:\n      assumes \"q \\<in> nodes\" \"run ([a] @- v) q\"\n      obtains b b\\<^sub>1 b\\<^sub>2 u\n      where\n        \"R.path (b @ [a]) q\"\n        \"Ind {a} (set b)\" \"set b \\<subseteq> invisible\"\n        \"b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\" \"b\\<^sub>1 @- u =\\<^sub>I v\" \"Ind (set b\\<^sub>2) (sset u)\"", "lemma reduced_run_words_fin:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"R.path w q\"", "lemma reduced_run_invar_2:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"v\\<^sub>2 =\\<^sub>I l @- u\"", "lemma reduced_run_invar_1:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\"", "lemma reduced_run_invisible:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"set w\\<^sub>2 \\<subseteq> invisible\"", "lemma reduced_run_ind:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"Ind (set w\\<^sub>2) (sset u)\"", "lemma reduced_run_decompose:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\"", "lemma reduced_run_project:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"project visible w\\<^sub>1 = project visible w\"", "lemma reduced_run_length_1:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"length v\\<^sub>1 \\<le> length w\\<^sub>1\"", "lemma reduced_run_length:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"length v\\<^sub>1 \\<le> length w\"", "lemma reduced_run_step:\n      assumes \"q \\<in> nodes\" \"run (v\\<^sub>1 @- [a] @- v\\<^sub>2) q\"\n      assumes \"reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\"\n      obtains l' w' w\\<^sub>1' w\\<^sub>2' u'\n      where \"reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w') (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2') u'\"", "lemma reduction_word:\n      assumes \"q \\<in> nodes\" \"run v q\"\n      obtains u w\n      where\n        \"R.run w q\"\n        \"v =\\<^sub>I u\" \"u \\<preceq>\\<^sub>I w\"\n        \"lproject visible (llist_of_stream u) = lproject visible (llist_of_stream w)\"", "lemma reduction_equivalent:\n      assumes \"q \\<in> nodes\" \"run u q\"\n      obtains v\n      where \"R.run v q\" \"snth (smap int (q ## trace u q)) \\<approx> snth (smap int (q ## trace v q))\"", "lemma reduction_language_subset: \"R.language \\<subseteq> S.language\"", "lemma reduction_language_stuttering:\n      assumes \"u \\<in> S.language\"\n      obtains v\n      where \"v \\<in> R.language\" \"snth u \\<approx> snth v\""], "translations": [["", "lemma ample_subset:\n      assumes \"ample_set q A\"\n      shows \"A \\<subseteq> {a. en a q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> {a. en a q}", "using assms"], ["proof (prove)\nusing this:\n  ample_set q A\n\ngoal (1 subgoal):\n 1. A \\<subseteq> {a. en a q}", "unfolding ample_set_def"], ["proof (prove)\nusing this:\n  A \\<subseteq> {a. en a q} \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<noteq> {}) \\<and>\n  (\\<forall>a.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      a \\<in> A \\<longrightarrow> src (ex a q) q) \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<subseteq> invisible) \\<and>\n  (\\<forall>w.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      path w q \\<longrightarrow>\n      A \\<inter> set w = {} \\<longrightarrow> Ind A (set w))\n\ngoal (1 subgoal):\n 1. A \\<subseteq> {a. en a q}", "by auto"], ["", "(* implicit in [1], condition C0 in [2] *)"], ["", "lemma ample_nonempty:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\"\n      shows \"A \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<noteq> {}", "using assms"], ["proof (prove)\nusing this:\n  ample_set q A\n  A \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. A \\<noteq> {}", "unfolding ample_set_def"], ["proof (prove)\nusing this:\n  A \\<subseteq> {a. en a q} \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<noteq> {}) \\<and>\n  (\\<forall>a.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      a \\<in> A \\<longrightarrow> src (ex a q) q) \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<subseteq> invisible) \\<and>\n  (\\<forall>w.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      path w q \\<longrightarrow>\n      A \\<inter> set w = {} \\<longrightarrow> Ind A (set w))\n  A \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. A \\<noteq> {}", "by auto"], ["", "(* condition C2 in [1, 2] *)"], ["", "lemma ample_wellfounded:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\" \"a \\<in> A\"\n      shows \"src (ex a q) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. src (ex a q) q", "using assms"], ["proof (prove)\nusing this:\n  ample_set q A\n  A \\<subset> {a. en a q}\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. src (ex a q) q", "unfolding ample_set_def"], ["proof (prove)\nusing this:\n  A \\<subseteq> {a. en a q} \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<noteq> {}) \\<and>\n  (\\<forall>a.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      a \\<in> A \\<longrightarrow> src (ex a q) q) \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<subseteq> invisible) \\<and>\n  (\\<forall>w.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      path w q \\<longrightarrow>\n      A \\<inter> set w = {} \\<longrightarrow> Ind A (set w))\n  A \\<subset> {a. en a q}\n  a \\<in> A\n\ngoal (1 subgoal):\n 1. src (ex a q) q", "by auto"], ["", "(* condition C3' in [1], not needed in [2] *)"], ["", "lemma ample_invisible:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\"\n      shows \"A \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<subseteq> invisible", "using assms"], ["proof (prove)\nusing this:\n  ample_set q A\n  A \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. A \\<subseteq> invisible", "unfolding ample_set_def"], ["proof (prove)\nusing this:\n  A \\<subseteq> {a. en a q} \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<noteq> {}) \\<and>\n  (\\<forall>a.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      a \\<in> A \\<longrightarrow> src (ex a q) q) \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<subseteq> invisible) \\<and>\n  (\\<forall>w.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      path w q \\<longrightarrow>\n      A \\<inter> set w = {} \\<longrightarrow> Ind A (set w))\n  A \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. A \\<subseteq> invisible", "by auto"], ["", "(* condition C1 in [1, 2] *)"], ["", "lemma ample_independent:\n      assumes \"ample_set q A\" \"A \\<subset> {a. en a q}\" \"path w q\" \"A \\<inter> set w = {}\"\n      shows \"Ind A (set w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind A (set w)", "using assms"], ["proof (prove)\nusing this:\n  ample_set q A\n  A \\<subset> {a. en a q}\n  path w q\n  A \\<inter> set w = {}\n\ngoal (1 subgoal):\n 1. Ind A (set w)", "unfolding ample_set_def"], ["proof (prove)\nusing this:\n  A \\<subseteq> {a. en a q} \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<noteq> {}) \\<and>\n  (\\<forall>a.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      a \\<in> A \\<longrightarrow> src (ex a q) q) \\<and>\n  (A \\<subset> {a. en a q} \\<longrightarrow> A \\<subseteq> invisible) \\<and>\n  (\\<forall>w.\n      A \\<subset> {a. en a q} \\<longrightarrow>\n      path w q \\<longrightarrow>\n      A \\<inter> set w = {} \\<longrightarrow> Ind A (set w))\n  A \\<subset> {a. en a q}\n  path w q\n  A \\<inter> set w = {}\n\ngoal (1 subgoal):\n 1. Ind A (set w)", "by auto"], ["", "lemma ample_en[intro]: \"ample_set q {a. en a q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ample_set q {a. en a q}", "unfolding ample_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. en a q} \\<subseteq> {a. en a q} \\<and>\n    ({a. en a q} \\<subset> {a. en a q} \\<longrightarrow>\n     {a. en a q} \\<noteq> {}) \\<and>\n    (\\<forall>a.\n        {a. en a q} \\<subset> {a. en a q} \\<longrightarrow>\n        a \\<in> {a. en a q} \\<longrightarrow> src (ex a q) q) \\<and>\n    ({a. en a q} \\<subset> {a. en a q} \\<longrightarrow>\n     {a. en a q} \\<subseteq> invisible) \\<and>\n    (\\<forall>w.\n        {a. en a q} \\<subset> {a. en a q} \\<longrightarrow>\n        path w q \\<longrightarrow>\n        {a. en a q} \\<inter> set w = {} \\<longrightarrow>\n        Ind {a. en a q} (set w))", "by blast"], ["", "end"], ["", "locale ample_abstract =\n    S?: transition_system_complete ex en init int +\n    R: transition_system_complete ex ren init int +\n    ample_base ex en int ind src\n    for ex :: \"'action \\<Rightarrow> 'state \\<Rightarrow> 'state\"\n    and en :: \"'action \\<Rightarrow> 'state \\<Rightarrow> bool\"\n    and init :: \"'state \\<Rightarrow> bool\"\n    and int :: \"'state \\<Rightarrow> 'interpretation\"\n    and ind :: \"'action \\<Rightarrow> 'action \\<Rightarrow> bool\"\n    and src :: \"'state \\<Rightarrow> 'state \\<Rightarrow> bool\"\n    and ren :: \"'action \\<Rightarrow> 'state \\<Rightarrow> bool\"\n    +\n    assumes reduction_ample: \"q \\<in> nodes \\<Longrightarrow> ample_set q {a. ren a q}\"\n  begin"], ["", "lemma reduction_words_fin:\n      assumes \"q \\<in> nodes\" \"R.path w q\"\n      shows \"S.path w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. path w q", "using assms(2, 1) ample_subset reduction_ample"], ["proof (prove)\nusing this:\n  R.path w q\n  q \\<in> nodes\n  ample_set ?q ?A \\<Longrightarrow> ?A \\<subseteq> {a. en a ?q}\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n\ngoal (1 subgoal):\n 1. path w q", "by induct auto"], ["", "lemma reduction_words_inf:\n      assumes \"q \\<in> nodes\" \"R.run w q\"\n      shows \"S.run w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run w q", "using reduction_words_fin assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; R.path ?w ?q\\<rbrakk>\n  \\<Longrightarrow> path ?w ?q\n  q \\<in> nodes\n  R.run w q\n\ngoal (1 subgoal):\n 1. run w q", "by (auto intro: words_infI_construct)"], ["", "(* lemma 3.7 in [1] *)"], ["", "lemma reduction_step:\n      assumes \"q \\<in> nodes\" \"run w q\"\n      obtains\n        (deferred) a where \"ren a q\" \"[a] \\<preceq>\\<^sub>F\\<^sub>I w\" |\n        (omitted) \"{a. ren a q} \\<subseteq> invisible\" \"Ind {a. ren a q} (sset w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "proof (cases \"{a. en a q} = {a. ren a q}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} = {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  {a. en a q} = {a. ren a q}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} = {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 1: \"run (shd w ## sdrop 1 w) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run (shd w ## sdrop 1 w) q", "using assms(2)"], ["proof (prove)\nusing this:\n  run w q\n\ngoal (1 subgoal):\n 1. run (shd w ## sdrop 1 w) q", "by simp"], ["proof (state)\nthis:\n  run (shd w ## sdrop 1 w) q\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} = {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule deferred)"], ["proof (state)\ngoal (2 subgoals):\n 1. ren ?a q\n 2. [?a] \\<preceq>\\<^sub>F\\<^sub>I w", "show \"ren (shd w) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ren (shd w) q", "using True 1"], ["proof (prove)\nusing this:\n  {a. en a q} = {a. ren a q}\n  run (shd w ## sdrop 1 w) q\n\ngoal (1 subgoal):\n 1. ren (shd w) q", "by blast"], ["proof (state)\nthis:\n  ren (shd w) q\n\ngoal (1 subgoal):\n 1. [shd w] \\<preceq>\\<^sub>F\\<^sub>I w", "show \"[shd w] \\<preceq>\\<^sub>F\\<^sub>I w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [shd w] \\<preceq>\\<^sub>F\\<^sub>I w", "by simp"], ["proof (state)\nthis:\n  [shd w] \\<preceq>\\<^sub>F\\<^sub>I w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  {a. en a q} \\<noteq> {a. ren a q}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 1: \"{a. ren a q} \\<subset> {a. en a q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subset> {a. en a q}", "using ample_subset reduction_ample assms(1) False"], ["proof (prove)\nusing this:\n  ample_set ?q ?A \\<Longrightarrow> ?A \\<subseteq> {a. en a ?q}\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  q \\<in> nodes\n  {a. en a q} \\<noteq> {a. ren a q}\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subset> {a. en a q}", "by auto"], ["proof (state)\nthis:\n  {a. ren a q} \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a.\n                \\<lbrakk>ren a q; [a] \\<preceq>\\<^sub>F\\<^sub>I w\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n      Ind {a. ren a q} (sset w)\\<rbrakk>\n     \\<Longrightarrow> thesis;\n     {a. en a q} \\<noteq> {a. ren a q}\\<rbrakk>\n    \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (cases \"{a. ren a q} \\<inter> sset w = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. {a. ren a q} \\<inter> sset w = {} \\<Longrightarrow> thesis\n 2. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  {a. ren a q} \\<inter> sset w = {}\n\ngoal (2 subgoals):\n 1. {a. ren a q} \\<inter> sset w = {} \\<Longrightarrow> thesis\n 2. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule omitted)"], ["proof (state)\ngoal (2 subgoals):\n 1. {a. ren a q} \\<subseteq> invisible\n 2. Ind {a. ren a q} (sset w)", "show \"{a. ren a q} \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subseteq> invisible", "using ample_invisible reduction_ample assms(1) 1"], ["proof (prove)\nusing this:\n  \\<lbrakk>ample_set ?q ?A; ?A \\<subset> {a. en a ?q}\\<rbrakk>\n  \\<Longrightarrow> ?A \\<subseteq> invisible\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  q \\<in> nodes\n  {a. ren a q} \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subseteq> invisible", "by auto"], ["proof (state)\nthis:\n  {a. ren a q} \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (sset w)", "show \"Ind {a. ren a q} (sset w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (sset w)", "proof safe"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>b \\<in> sset w; ren a q\\<rbrakk> \\<Longrightarrow> ind a b", "fix a b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>b \\<in> sset w; ren a q\\<rbrakk> \\<Longrightarrow> ind a b", "assume 2: \"b \\<in> sset w\" \"ren a q\""], ["proof (state)\nthis:\n  b \\<in> sset w\n  ren a q\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>b \\<in> sset w; ren a q\\<rbrakk> \\<Longrightarrow> ind a b", "obtain u v where 3: \"w = u @- b ## v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u v. w = u @- b ## v \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using split_stream_first' 2(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> sset ?xs;\n   \\<And>ys zs.\n      \\<lbrakk>?xs = ys @- ?x ## zs; ?x \\<notin> set ys\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  b \\<in> sset w\n\ngoal (1 subgoal):\n 1. (\\<And>u v. w = u @- b ## v \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by this"], ["proof (state)\nthis:\n  w = u @- b ## v\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>b \\<in> sset w; ren a q\\<rbrakk> \\<Longrightarrow> ind a b", "have 4: \"Ind {a. ren a q} (set (u @ [b]))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (set (u @ [b]))", "proof (rule ample_independent)"], ["proof (state)\ngoal (4 subgoals):\n 1. ample_set ?q {a. ren a q}\n 2. {a. ren a q} \\<subset> {a. en a ?q}\n 3. path (u @ [b]) ?q\n 4. {a. ren a q} \\<inter> set (u @ [b]) = {}", "show \"ample_set q {a. ren a q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ample_set q {a. ren a q}", "using reduction_ample assms(1)"], ["proof (prove)\nusing this:\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  q \\<in> nodes\n\ngoal (1 subgoal):\n 1. ample_set q {a. ren a q}", "by this"], ["proof (state)\nthis:\n  ample_set q {a. ren a q}\n\ngoal (3 subgoals):\n 1. {a. ren a q} \\<subset> {a. en a q}\n 2. path (u @ [b]) q\n 3. {a. ren a q} \\<inter> set (u @ [b]) = {}", "show \"{a. ren a q} \\<subset> {a. en a q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subset> {a. en a q}", "using 1"], ["proof (prove)\nusing this:\n  {a. ren a q} \\<subset> {a. en a q}\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subset> {a. en a q}", "by this"], ["proof (state)\nthis:\n  {a. ren a q} \\<subset> {a. en a q}\n\ngoal (2 subgoals):\n 1. path (u @ [b]) q\n 2. {a. ren a q} \\<inter> set (u @ [b]) = {}", "show \"path (u @ [b]) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. path (u @ [b]) q", "using assms(2) 3"], ["proof (prove)\nusing this:\n  run w q\n  w = u @- b ## v\n\ngoal (1 subgoal):\n 1. path (u @ [b]) q", "by blast"], ["proof (state)\nthis:\n  path (u @ [b]) q\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> set (u @ [b]) = {}", "show \"{a. ren a q} \\<inter> set (u @ [b]) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> set (u @ [b]) = {}", "using True 3"], ["proof (prove)\nusing this:\n  {a. ren a q} \\<inter> sset w = {}\n  w = u @- b ## v\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> set (u @ [b]) = {}", "by auto"], ["proof (state)\nthis:\n  {a. ren a q} \\<inter> set (u @ [b]) = {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a. ren a q} (set (u @ [b]))\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>b \\<in> sset w; ren a q\\<rbrakk> \\<Longrightarrow> ind a b", "show \"ind a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ind a b", "using 2 3 4"], ["proof (prove)\nusing this:\n  b \\<in> sset w\n  ren a q\n  w = u @- b ## v\n  Ind {a. ren a q} (set (u @ [b]))\n\ngoal (1 subgoal):\n 1. ind a b", "by auto"], ["proof (state)\nthis:\n  ind a b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a. ren a q} (sset w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  {a. ren a q} \\<inter> sset w \\<noteq> {}\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "obtain u a v where 2: \"w = u @- a ## v\" \"{a. ren a q} \\<inter> set u = {}\" \"ren a q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u a v.\n        \\<lbrakk>w = u @- a ## v; {a. ren a q} \\<inter> set u = {};\n         ren a q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using split_stream_first[OF False]"], ["proof (prove)\nusing this:\n  (\\<And>ys a zs.\n      \\<lbrakk>w = ys @- a ## zs; {a. ren a q} \\<inter> set ys = {};\n       a \\<in> {a. ren a q}\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>u a v.\n        \\<lbrakk>w = u @- a ## v; {a. ren a q} \\<inter> set u = {};\n         ren a q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  w = u @- a ## v\n  {a. ren a q} \\<inter> set u = {}\n  ren a q\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "have 3: \"path u q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. path u q", "using assms(2)"], ["proof (prove)\nusing this:\n  run w q\n\ngoal (1 subgoal):\n 1. path u q", "unfolding 2(1)"], ["proof (prove)\nusing this:\n  run (u @- a ## v) q\n\ngoal (1 subgoal):\n 1. path u q", "by auto"], ["proof (state)\nthis:\n  path u q\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "have 4: \"Ind {a. ren a q} (set u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (set u)", "using ample_independent reduction_ample assms(1) 1 3 2(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>ample_set ?q ?A; ?A \\<subset> {a. en a ?q}; path ?w ?q;\n   ?A \\<inter> set ?w = {}\\<rbrakk>\n  \\<Longrightarrow> Ind ?A (set ?w)\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  q \\<in> nodes\n  {a. ren a q} \\<subset> {a. en a q}\n  path u q\n  {a. ren a q} \\<inter> set u = {}\n\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (set u)", "by this"], ["proof (state)\nthis:\n  Ind {a. ren a q} (set u)\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "have 5: \"Ind (set [a]) (set u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set u)", "using 4 2(3)"], ["proof (prove)\nusing this:\n  Ind {a. ren a q} (set u)\n  ren a q\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set u)", "by simp"], ["proof (state)\nthis:\n  Ind (set [a]) (set u)\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "have 6: \"[a] @ u =\\<^sub>F u @ [a]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ u =\\<^sub>F u @ [a]", "using 5"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set u)\n\ngoal (1 subgoal):\n 1. [a] @ u =\\<^sub>F u @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ u =\\<^sub>F u @ [a]\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<inter> sset w \\<noteq> {} \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule deferred)"], ["proof (state)\ngoal (2 subgoals):\n 1. ren ?a q\n 2. [?a] \\<preceq>\\<^sub>F\\<^sub>I w", "show \"ren a q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ren a q", "using 2(3)"], ["proof (prove)\nusing this:\n  ren a q\n\ngoal (1 subgoal):\n 1. ren a q", "by this"], ["proof (state)\nthis:\n  ren a q\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "have \"[a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- u @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- u @- v", "by blast"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- u @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "also"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- u @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "have \"[a] @- u @- v = ([a] @ u) @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- u @- v = ([a] @ u) @- v", "by simp"], ["proof (state)\nthis:\n  [a] @- u @- v = ([a] @ u) @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "also"], ["proof (state)\nthis:\n  [a] @- u @- v = ([a] @ u) @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "have \"([a] @ u) @- v =\\<^sub>I (u @ [a]) @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ u) @- v =\\<^sub>I (u @ [a]) @- v", "using 6"], ["proof (prove)\nusing this:\n  [a] @ u =\\<^sub>F u @ [a]\n\ngoal (1 subgoal):\n 1. ([a] @ u) @- v =\\<^sub>I (u @ [a]) @- v", "by blast"], ["proof (state)\nthis:\n  ([a] @ u) @- v =\\<^sub>I (u @ [a]) @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "also"], ["proof (state)\nthis:\n  ([a] @ u) @- v =\\<^sub>I (u @ [a]) @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "have \"(u @ [a]) @- v = u @- [a] @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (u @ [a]) @- v = u @- [a] @- v", "by simp"], ["proof (state)\nthis:\n  (u @ [a]) @- v = u @- [a] @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "also"], ["proof (state)\nthis:\n  (u @ [a]) @- v = u @- [a] @- v\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "have \"\\<dots> = w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u @- [a] @- v = w", "unfolding 2(1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. u @- [a] @- v = u @- a ## v", "by simp"], ["proof (state)\nthis:\n  u @- [a] @- v = w\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "finally"], ["proof (chain)\npicking this:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I w", "show \"[a] \\<preceq>\\<^sub>F\\<^sub>I w\""], ["proof (prove)\nusing this:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I w\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I w", "by this"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "(* theorem 3.9 in [1] *)"], ["", "lemma reduction_chunk:\n      assumes \"q \\<in> nodes\" \"run ([a] @- v) q\"\n      obtains b b\\<^sub>1 b\\<^sub>2 u\n      where\n        \"R.path (b @ [a]) q\"\n        \"Ind {a} (set b)\" \"set b \\<subseteq> invisible\"\n        \"b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\" \"b\\<^sub>1 @- u =\\<^sub>I v\" \"Ind (set b\\<^sub>2) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b b\\<^sub>1 b\\<^sub>2 u.\n        \\<lbrakk>R.path (b @ [a]) q; Ind {a} (set b);\n         set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n         b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using wellfounded assms"], ["proof (prove)\nusing this:\n  wfP src\n  q \\<in> nodes\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. (\\<And>b b\\<^sub>1 b\\<^sub>2 u.\n        \\<lbrakk>R.path (b @ [a]) q; Ind {a} (set b);\n         set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n         b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof (induct q arbitrary: thesis v rule: wfP_induct_rule)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x thesis v.\n       \\<lbrakk>\\<And>y thesis v.\n                   \\<lbrakk>src y x;\n                    \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n                       \\<lbrakk>R.path (b @ [a]) y; Ind {a} (set b);\n                        set b \\<subseteq> invisible;\n                        b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n                        b\\<^sub>1 @- u =\\<^sub>I v;\n                        Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n                    y \\<in> nodes; run ([a] @- v) y\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n           \\<lbrakk>R.path (b @ [a]) x; Ind {a} (set b);\n            set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n            b\\<^sub>1 @- u =\\<^sub>I v;\n            Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        x \\<in> nodes; run ([a] @- v) x\\<rbrakk>\n       \\<Longrightarrow> thesis", "case (less q)"], ["proof (state)\nthis:\n  \\<lbrakk>src ?y q;\n   \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n      \\<lbrakk>R.path (b @ [a]) ?y; Ind {a} (set b);\n       set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n       b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n      \\<Longrightarrow> ?thesis;\n   ?y \\<in> nodes; run ([a] @- ?v) ?y\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<lbrakk>R.path (?b @ [a]) q; Ind {a} (set ?b);\n   set ?b \\<subseteq> invisible; ?b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2;\n   ?b\\<^sub>1 @- ?u =\\<^sub>I v; Ind (set ?b\\<^sub>2) (sset ?u)\\<rbrakk>\n  \\<Longrightarrow> thesis\n  q \\<in> nodes\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. \\<And>x thesis v.\n       \\<lbrakk>\\<And>y thesis v.\n                   \\<lbrakk>src y x;\n                    \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n                       \\<lbrakk>R.path (b @ [a]) y; Ind {a} (set b);\n                        set b \\<subseteq> invisible;\n                        b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n                        b\\<^sub>1 @- u =\\<^sub>I v;\n                        Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n                       \\<Longrightarrow> thesis;\n                    y \\<in> nodes; run ([a] @- v) y\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n           \\<lbrakk>R.path (b @ [a]) x; Ind {a} (set b);\n            set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n            b\\<^sub>1 @- u =\\<^sub>I v;\n            Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n           \\<Longrightarrow> thesis;\n        x \\<in> nodes; run ([a] @- v) x\\<rbrakk>\n       \\<Longrightarrow> thesis", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (cases \"ren a q\")"], ["proof (state)\ngoal (2 subgoals):\n 1. ren a q \\<Longrightarrow> thesis\n 2. \\<not> ren a q \\<Longrightarrow> thesis", "case (True)"], ["proof (state)\nthis:\n  ren a q\n\ngoal (2 subgoals):\n 1. ren a q \\<Longrightarrow> thesis\n 2. \\<not> ren a q \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule less(2))"], ["proof (state)\ngoal (6 subgoals):\n 1. R.path (?b @ [a]) q\n 2. Ind {a} (set ?b)\n 3. set ?b \\<subseteq> invisible\n 4. ?b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 5. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 6. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"R.path ([] @ [a]) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.path ([] @ [a]) q", "using True"], ["proof (prove)\nusing this:\n  ren a q\n\ngoal (1 subgoal):\n 1. R.path ([] @ [a]) q", "by auto"], ["proof (state)\nthis:\n  R.path ([] @ [a]) q\n\ngoal (5 subgoals):\n 1. Ind {a} (set [])\n 2. set [] \\<subseteq> invisible\n 3. [] =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 4. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 5. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"Ind {a} (set [])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set [])", "by auto"], ["proof (state)\nthis:\n  Ind {a} (set [])\n\ngoal (4 subgoals):\n 1. set [] \\<subseteq> invisible\n 2. [] =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 3. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 4. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"set [] \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set [] \\<subseteq> invisible", "by auto"], ["proof (state)\nthis:\n  set [] \\<subseteq> invisible\n\ngoal (3 subgoals):\n 1. [] =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"[] =\\<^sub>F [] @ []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] =\\<^sub>F [] @ []", "by auto"], ["proof (state)\nthis:\n  [] =\\<^sub>F [] @ []\n\ngoal (2 subgoals):\n 1. [] @- ?u =\\<^sub>I v\n 2. Ind (set []) (sset ?u)", "show \"[] @- v =\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] @- v =\\<^sub>I v", "by auto"], ["proof (state)\nthis:\n  [] @- v =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. Ind (set []) (sset v)", "show \"Ind (set []) (sset v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set []) (sset v)", "by auto"], ["proof (state)\nthis:\n  Ind (set []) (sset v)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<not> ren a q \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> ren a q \\<Longrightarrow> thesis", "case (False)"], ["proof (state)\nthis:\n  \\<not> ren a q\n\ngoal (1 subgoal):\n 1. \\<not> ren a q \\<Longrightarrow> thesis", "have 0: \"{a. en a q} \\<noteq> {a. ren a q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. en a q} \\<noteq> {a. ren a q}", "using False less(4)"], ["proof (prove)\nusing this:\n  \\<not> ren a q\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. {a. en a q} \\<noteq> {a. ren a q}", "by auto"], ["proof (state)\nthis:\n  {a. en a q} \\<noteq> {a. ren a q}\n\ngoal (1 subgoal):\n 1. \\<not> ren a q \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "using less(3, 4)"], ["proof (prove)\nusing this:\n  q \\<in> nodes\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. thesis", "proof (cases rule: reduction_step)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa.\n       \\<lbrakk>ren aa q; [aa] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "case (deferred c)"], ["proof (state)\nthis:\n  ren c q\n  [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n\ngoal (2 subgoals):\n 1. \\<And>aa.\n       \\<lbrakk>ren aa q; [aa] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 1: \"ren c q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ren c q", "using deferred(1)"], ["proof (prove)\nusing this:\n  ren c q\n\ngoal (1 subgoal):\n 1. ren c q", "by simp"], ["proof (state)\nthis:\n  ren c q\n\ngoal (2 subgoals):\n 1. \\<And>aa.\n       \\<lbrakk>ren aa q; [aa] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 2: \"ind a c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ind a c", "proof (rule le_fininf_ind'')"], ["proof (state)\ngoal (3 subgoals):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I ?w\n 2. [c] \\<preceq>\\<^sub>F\\<^sub>I ?w\n 3. a \\<noteq> c", "show \"[a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v", "by blast"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n\ngoal (2 subgoals):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n 2. a \\<noteq> c", "show \"[c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v", "using deferred(2)"], ["proof (prove)\nusing this:\n  [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n\ngoal (1 subgoal):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v", "by this"], ["proof (state)\nthis:\n  [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n\ngoal (1 subgoal):\n 1. a \\<noteq> c", "show \"a \\<noteq> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<noteq> c", "using False 1"], ["proof (prove)\nusing this:\n  \\<not> ren a q\n  ren c q\n\ngoal (1 subgoal):\n 1. a \\<noteq> c", "by auto"], ["proof (state)\nthis:\n  a \\<noteq> c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ind a c\n\ngoal (2 subgoals):\n 1. \\<And>aa.\n       \\<lbrakk>ren aa q; [aa] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "obtain v' where 3: \"[a] @- v =\\<^sub>I [c] @- [a] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have 10: \"[c] \\<preceq>\\<^sub>F\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I v", "proof (rule le_fininf_not_member')"], ["proof (state)\ngoal (2 subgoals):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I ?u @- v\n 2. c \\<notin> set ?u", "show \"[c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v", "using deferred(2)"], ["proof (prove)\nusing this:\n  [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n\ngoal (1 subgoal):\n 1. [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v", "by this"], ["proof (state)\nthis:\n  [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n\ngoal (1 subgoal):\n 1. c \\<notin> set [a]", "show \"c \\<notin> set [a]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<notin> set [a]", "using False 1"], ["proof (prove)\nusing this:\n  \\<not> ren a q\n  ren c q\n\ngoal (1 subgoal):\n 1. c \\<notin> set [a]", "by auto"], ["proof (state)\nthis:\n  c \\<notin> set [a]\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  [c] \\<preceq>\\<^sub>F\\<^sub>I v\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "obtain v' where 11: \"v =\\<^sub>I [c] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        v =\\<^sub>I [c] @- v' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 10"], ["proof (prove)\nusing this:\n  [c] \\<preceq>\\<^sub>F\\<^sub>I v\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        v =\\<^sub>I [c] @- v' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  v =\\<^sub>I [c] @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have 12: \"Ind (set [a]) (set [c])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set [c])", "using 2"], ["proof (prove)\nusing this:\n  ind a c\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set [c])", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set [c])\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have 13: \"[a] @ [c] =\\<^sub>F [c] @ [a]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ [c] =\\<^sub>F [c] @ [a]", "using 12"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set [c])\n\ngoal (1 subgoal):\n 1. [a] @ [c] =\\<^sub>F [c] @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ [c] =\\<^sub>F [c] @ [a]\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"[a] @- v =\\<^sub>I [a] @- [c] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- v =\\<^sub>I [a] @- [c] @- v'", "using 11"], ["proof (prove)\nusing this:\n  v =\\<^sub>I [c] @- v'\n\ngoal (1 subgoal):\n 1. [a] @- v =\\<^sub>I [a] @- [c] @- v'", "by blast"], ["proof (state)\nthis:\n  [a] @- v =\\<^sub>I [a] @- [c] @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "also"], ["proof (state)\nthis:\n  [a] @- v =\\<^sub>I [a] @- [c] @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"\\<dots> = ([a] @ [c]) @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- [c] @- v' = ([a] @ [c]) @- v'", "by simp"], ["proof (state)\nthis:\n  [a] @- [c] @- v' = ([a] @ [c]) @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "also"], ["proof (state)\nthis:\n  [a] @- [c] @- v' = ([a] @ [c]) @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"\\<dots> =\\<^sub>I ([c] @ [a]) @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ [c]) @- v' =\\<^sub>I ([c] @ [a]) @- v'", "using 13"], ["proof (prove)\nusing this:\n  [a] @ [c] =\\<^sub>F [c] @ [a]\n\ngoal (1 subgoal):\n 1. ([a] @ [c]) @- v' =\\<^sub>I ([c] @ [a]) @- v'", "by blast"], ["proof (state)\nthis:\n  ([a] @ [c]) @- v' =\\<^sub>I ([c] @ [a]) @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "also"], ["proof (state)\nthis:\n  ([a] @ [c]) @- v' =\\<^sub>I ([c] @ [a]) @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"\\<dots> = [c] @- [a] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([c] @ [a]) @- v' = [c] @- [a] @- v'", "by simp"], ["proof (state)\nthis:\n  ([c] @ [a]) @- v' = [c] @- [a] @- v'\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        [a] @- v =\\<^sub>I [c] @- [a] @- v' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "finally"], ["proof (chain)\npicking this:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'", "show ?thesis"], ["proof (prove)\nusing this:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n  [a] @- v =\\<^sub>I [c] @- [a] @- ?v' \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n\ngoal (2 subgoals):\n 1. \\<And>aa.\n       \\<lbrakk>ren aa q; [aa] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 4: \"run ([c] @- [a] @- v') q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ([c] @- [a] @- v') q", "using eq_inf_word 3 less(4)"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w\\<^sub>1 =\\<^sub>I ?w\\<^sub>2; run ?w\\<^sub>1 ?p\\<rbrakk>\n  \\<Longrightarrow> run ?w\\<^sub>2 ?p\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. run ([c] @- [a] @- v') q", "by this"], ["proof (state)\nthis:\n  run ([c] @- [a] @- v') q\n\ngoal (2 subgoals):\n 1. \\<And>aa.\n       \\<lbrakk>ren aa q; [aa] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule less(1))"], ["proof (state)\ngoal (4 subgoals):\n 1. src ?y q\n 2. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) ?y; Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 3. ?y \\<in> nodes\n 4. run ([a] @- ?v) ?y", "show \"src (ex c q) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. src (ex c q) q", "using ample_wellfounded ample_subset reduction_ample less(3) 0 1"], ["proof (prove)\nusing this:\n  \\<lbrakk>ample_set ?q ?A; ?A \\<subset> {a. en a ?q}; ?a \\<in> ?A\\<rbrakk>\n  \\<Longrightarrow> src (ex ?a ?q) ?q\n  ample_set ?q ?A \\<Longrightarrow> ?A \\<subseteq> {a. en a ?q}\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  q \\<in> nodes\n  {a. en a q} \\<noteq> {a. ren a q}\n  ren c q\n\ngoal (1 subgoal):\n 1. src (ex c q) q", "by blast"], ["proof (state)\nthis:\n  src (ex c q) q\n\ngoal (3 subgoals):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. ex c q \\<in> nodes\n 3. run ([a] @- ?v) (ex c q)", "have 100: \"en c q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. en c q", "using less(4) deferred(2) le_fininf_word"], ["proof (prove)\nusing this:\n  run ([a] @- v) q\n  [c] \\<preceq>\\<^sub>F\\<^sub>I [a] @- v\n  \\<lbrakk>?w\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I ?w\\<^sub>2;\n   run ?w\\<^sub>2 ?p\\<rbrakk>\n  \\<Longrightarrow> path ?w\\<^sub>1 ?p\n\ngoal (1 subgoal):\n 1. en c q", "by auto"], ["proof (state)\nthis:\n  en c q\n\ngoal (3 subgoals):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. ex c q \\<in> nodes\n 3. run ([a] @- ?v) (ex c q)", "show \"ex c q \\<in> nodes\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ex c q \\<in> nodes", "using less(3) 100"], ["proof (prove)\nusing this:\n  q \\<in> nodes\n  en c q\n\ngoal (1 subgoal):\n 1. ex c q \\<in> nodes", "by auto"], ["proof (state)\nthis:\n  ex c q \\<in> nodes\n\ngoal (2 subgoals):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. run ([a] @- ?v) (ex c q)", "show \"run ([a] @- v') (ex c q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ([a] @- v') (ex c q)", "using 4"], ["proof (prove)\nusing this:\n  run ([c] @- [a] @- v') q\n\ngoal (1 subgoal):\n 1. run ([a] @- v') (ex c q)", "by auto"], ["proof (state)\nthis:\n  run ([a] @- v') (ex c q)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "fix b b\\<^sub>1 b\\<^sub>2 u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 5: \"R.path (b @ [a]) (ex c q)\""], ["proof (state)\nthis:\n  R.path (b @ [a]) (ex c q)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 6: \"Ind {a} (set b)\""], ["proof (state)\nthis:\n  Ind {a} (set b)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 7: \"set b \\<subseteq> invisible\""], ["proof (state)\nthis:\n  set b \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 8: \"b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\""], ["proof (state)\nthis:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 9: \"b\\<^sub>1 @- u =\\<^sub>I v'\""], ["proof (state)\nthis:\n  b\\<^sub>1 @- u =\\<^sub>I v'\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 10: \"Ind (set b\\<^sub>2) (sset u)\""], ["proof (state)\nthis:\n  Ind (set b\\<^sub>2) (sset u)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v'; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"thesis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule less(2))"], ["proof (state)\ngoal (6 subgoals):\n 1. R.path (?b @ [a]) q\n 2. Ind {a} (set ?b)\n 3. set ?b \\<subseteq> invisible\n 4. ?b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 5. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 6. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"R.path (([c] @ b) @ [a]) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.path (([c] @ b) @ [a]) q", "using 1 5"], ["proof (prove)\nusing this:\n  ren c q\n  R.path (b @ [a]) (ex c q)\n\ngoal (1 subgoal):\n 1. R.path (([c] @ b) @ [a]) q", "by auto"], ["proof (state)\nthis:\n  R.path (([c] @ b) @ [a]) q\n\ngoal (5 subgoals):\n 1. Ind {a} (set ([c] @ b))\n 2. set ([c] @ b) \\<subseteq> invisible\n 3. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 4. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 5. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"Ind {a} (set ([c] @ b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "using 6 2"], ["proof (prove)\nusing this:\n  Ind {a} (set b)\n  ind a c\n\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "by auto"], ["proof (state)\nthis:\n  Ind {a} (set ([c] @ b))\n\ngoal (4 subgoals):\n 1. set ([c] @ b) \\<subseteq> invisible\n 2. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 3. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 4. Ind (set ?b\\<^sub>2) (sset ?u)", "have 11: \"c \\<in> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<in> invisible", "using ample_invisible ample_subset reduction_ample less(3) 0 1"], ["proof (prove)\nusing this:\n  \\<lbrakk>ample_set ?q ?A; ?A \\<subset> {a. en a ?q}\\<rbrakk>\n  \\<Longrightarrow> ?A \\<subseteq> invisible\n  ample_set ?q ?A \\<Longrightarrow> ?A \\<subseteq> {a. en a ?q}\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  q \\<in> nodes\n  {a. en a q} \\<noteq> {a. ren a q}\n  ren c q\n\ngoal (1 subgoal):\n 1. c \\<in> invisible", "by blast"], ["proof (state)\nthis:\n  c \\<in> invisible\n\ngoal (4 subgoals):\n 1. set ([c] @ b) \\<subseteq> invisible\n 2. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 3. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 4. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"set ([c] @ b) \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set ([c] @ b) \\<subseteq> invisible", "using 7 11"], ["proof (prove)\nusing this:\n  set b \\<subseteq> invisible\n  c \\<in> invisible\n\ngoal (1 subgoal):\n 1. set ([c] @ b) \\<subseteq> invisible", "by auto"], ["proof (state)\nthis:\n  set ([c] @ b) \\<subseteq> invisible\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have \"[c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2", "using 8"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "also"], ["proof (state)\nthis:\n  [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have \"[c] @ b\\<^sub>1 @ b\\<^sub>2 = ([c] @ b\\<^sub>1) @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @ b\\<^sub>1 @ b\\<^sub>2 = ([c] @ b\\<^sub>1) @ b\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  [c] @ b\\<^sub>1 @ b\\<^sub>2 = ([c] @ b\\<^sub>1) @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "finally"], ["proof (chain)\npicking this:\n  [c] @ b =\\<^sub>F ([c] @ b\\<^sub>1) @ b\\<^sub>2", "show \"[c] @ b =\\<^sub>F ([c] @ b\\<^sub>1) @ b\\<^sub>2\""], ["proof (prove)\nusing this:\n  [c] @ b =\\<^sub>F ([c] @ b\\<^sub>1) @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. [c] @ b =\\<^sub>F ([c] @ b\\<^sub>1) @ b\\<^sub>2", "by this"], ["proof (state)\nthis:\n  [c] @ b =\\<^sub>F ([c] @ b\\<^sub>1) @ b\\<^sub>2\n\ngoal (2 subgoals):\n 1. ([c] @ b\\<^sub>1) @- ?u =\\<^sub>I v\n 2. Ind (set b\\<^sub>2) (sset ?u)", "show \"([c] @ b\\<^sub>1) @- u =\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have 10: \"Ind (set [a]) (set [c])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set [c])", "using 2"], ["proof (prove)\nusing this:\n  ind a c\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set [c])", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set [c])\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have 11: \"[a] @ [c] =\\<^sub>F [c] @ [a]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ [c] =\\<^sub>F [c] @ [a]", "using 10"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set [c])\n\ngoal (1 subgoal):\n 1. [a] @ [c] =\\<^sub>F [c] @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ [c] =\\<^sub>F [c] @ [a]\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"[a] @- v =\\<^sub>I [c] @- [a] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- v =\\<^sub>I [c] @- [a] @- v'", "using 3"], ["proof (prove)\nusing this:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n\ngoal (1 subgoal):\n 1. [a] @- v =\\<^sub>I [c] @- [a] @- v'", "by this"], ["proof (state)\nthis:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "also"], ["proof (state)\nthis:\n  [a] @- v =\\<^sub>I [c] @- [a] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"\\<dots> = ([c] @ [a]) @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @- [a] @- v' = ([c] @ [a]) @- v'", "by simp"], ["proof (state)\nthis:\n  [c] @- [a] @- v' = ([c] @ [a]) @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "also"], ["proof (state)\nthis:\n  [c] @- [a] @- v' = ([c] @ [a]) @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"\\<dots> =\\<^sub>I ([a] @ [c]) @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([c] @ [a]) @- v' =\\<^sub>I ([a] @ [c]) @- v'", "using 11"], ["proof (prove)\nusing this:\n  [a] @ [c] =\\<^sub>F [c] @ [a]\n\ngoal (1 subgoal):\n 1. ([c] @ [a]) @- v' =\\<^sub>I ([a] @ [c]) @- v'", "by blast"], ["proof (state)\nthis:\n  ([c] @ [a]) @- v' =\\<^sub>I ([a] @ [c]) @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "also"], ["proof (state)\nthis:\n  ([c] @ [a]) @- v' =\\<^sub>I ([a] @ [c]) @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"\\<dots> = [a] @- [c] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ [c]) @- v' = [a] @- [c] @- v'", "by simp"], ["proof (state)\nthis:\n  ([a] @ [c]) @- v' = [a] @- [c] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "finally"], ["proof (chain)\npicking this:\n  [a] @- v =\\<^sub>I [a] @- [c] @- v'", "have 12: \"[a] @- v =\\<^sub>I [a] @- [c] @- v'\""], ["proof (prove)\nusing this:\n  [a] @- v =\\<^sub>I [a] @- [c] @- v'\n\ngoal (1 subgoal):\n 1. [a] @- v =\\<^sub>I [a] @- [c] @- v'", "by this"], ["proof (state)\nthis:\n  [a] @- v =\\<^sub>I [a] @- [c] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have 12: \"v =\\<^sub>I [c] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v =\\<^sub>I [c] @- v'", "using 12"], ["proof (prove)\nusing this:\n  [a] @- v =\\<^sub>I [a] @- [c] @- v'\n\ngoal (1 subgoal):\n 1. v =\\<^sub>I [c] @- v'", "by blast"], ["proof (state)\nthis:\n  v =\\<^sub>I [c] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"([c] @ b\\<^sub>1) @- u = [c] @- b\\<^sub>1 @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u = [c] @- b\\<^sub>1 @- u", "by simp"], ["proof (state)\nthis:\n  ([c] @ b\\<^sub>1) @- u = [c] @- b\\<^sub>1 @- u\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "also"], ["proof (state)\nthis:\n  ([c] @ b\\<^sub>1) @- u = [c] @- b\\<^sub>1 @- u\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"\\<dots> =\\<^sub>I [c] @- v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @- b\\<^sub>1 @- u =\\<^sub>I [c] @- v'", "using 9"], ["proof (prove)\nusing this:\n  b\\<^sub>1 @- u =\\<^sub>I v'\n\ngoal (1 subgoal):\n 1. [c] @- b\\<^sub>1 @- u =\\<^sub>I [c] @- v'", "by blast"], ["proof (state)\nthis:\n  [c] @- b\\<^sub>1 @- u =\\<^sub>I [c] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "also"], ["proof (state)\nthis:\n  [c] @- b\\<^sub>1 @- u =\\<^sub>I [c] @- v'\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "have \"\\<dots> =\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @- v' =\\<^sub>I v", "using 12"], ["proof (prove)\nusing this:\n  v =\\<^sub>I [c] @- v'\n\ngoal (1 subgoal):\n 1. [c] @- v' =\\<^sub>I v", "by blast"], ["proof (state)\nthis:\n  [c] @- v' =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "finally"], ["proof (chain)\npicking this:\n  ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "show ?thesis"], ["proof (prove)\nusing this:\n  ([c] @ b\\<^sub>1) @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @- u =\\<^sub>I v", "by this"], ["proof (state)\nthis:\n  ([c] @ b\\<^sub>1) @- u =\\<^sub>I v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ([c] @ b\\<^sub>1) @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. Ind (set b\\<^sub>2) (sset u)", "show \"Ind (set b\\<^sub>2) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set b\\<^sub>2) (sset u)", "using 10"], ["proof (prove)\nusing this:\n  Ind (set b\\<^sub>2) (sset u)\n\ngoal (1 subgoal):\n 1. Ind (set b\\<^sub>2) (sset u)", "by this"], ["proof (state)\nthis:\n  Ind (set b\\<^sub>2) (sset u)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "case (omitted)"], ["proof (state)\nthis:\n  {a. ren a q} \\<subseteq> invisible\n  Ind {a. ren a q} (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 1: \"{a. ren a q} \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subseteq> invisible", "using omitted(1)"], ["proof (prove)\nusing this:\n  {a. ren a q} \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. {a. ren a q} \\<subseteq> invisible", "by simp"], ["proof (state)\nthis:\n  {a. ren a q} \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 2: \"Ind {a. ren a q} (sset ([a] @- v))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (sset ([a] @- v))", "using omitted(2)"], ["proof (prove)\nusing this:\n  Ind {a. ren a q} (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. Ind {a. ren a q} (sset ([a] @- v))", "by simp"], ["proof (state)\nthis:\n  Ind {a. ren a q} (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "obtain c where 3: \"ren c q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>c. ren c q \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>c. ren c q \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "have 1: \"en a q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. en a q", "using less(4)"], ["proof (prove)\nusing this:\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. en a q", "by auto"], ["proof (state)\nthis:\n  en a q\n\ngoal (1 subgoal):\n 1. (\\<And>c. ren c q \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "using reduction_ample ample_nonempty less(3) 1 that"], ["proof (prove)\nusing this:\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  \\<lbrakk>ample_set ?q ?A; ?A \\<subset> {a. en a ?q}\\<rbrakk>\n  \\<Longrightarrow> ?A \\<noteq> {}\n  q \\<in> nodes\n  en a q\n  ren ?c q \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ren c q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 4: \"Ind (set [c]) (sset ([a] @- v))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset ([a] @- v))", "using 2 3"], ["proof (prove)\nusing this:\n  Ind {a. ren a q} (sset ([a] @- v))\n  ren c q\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset ([a] @- v))", "by auto"], ["proof (state)\nthis:\n  Ind (set [c]) (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 6: \"path [c] q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. path [c] q", "using reduction_ample ample_subset less(3) 3"], ["proof (prove)\nusing this:\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  ample_set ?q ?A \\<Longrightarrow> ?A \\<subseteq> {a. en a ?q}\n  q \\<in> nodes\n  ren c q\n\ngoal (1 subgoal):\n 1. path [c] q", "by auto"], ["proof (state)\nthis:\n  path [c] q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 7: \"run ([a] @- v) (target [c] q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ([a] @- v) (target [c] q)", "using diamond_fin_word_inf_word 4 6 less(4)"], ["proof (prove)\nusing this:\n  \\<lbrakk>Ind (set ?v) (sset ?w); path ?v ?p; run ?w ?p\\<rbrakk>\n  \\<Longrightarrow> run ?w (target ?v ?p)\n  Ind (set [c]) (sset ([a] @- v))\n  path [c] q\n  run ([a] @- v) q\n\ngoal (1 subgoal):\n 1. run ([a] @- v) (target [c] q)", "by this"], ["proof (state)\nthis:\n  run ([a] @- v) (target [c] q)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{a. ren a q} \\<subseteq> invisible;\n     Ind {a. ren a q} (sset ([a] @- v))\\<rbrakk>\n    \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule less(1))"], ["proof (state)\ngoal (4 subgoals):\n 1. src ?y q\n 2. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) ?y; Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 3. ?y \\<in> nodes\n 4. run ([a] @- ?v) ?y", "show \"src (ex c q) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. src (ex c q) q", "using reduction_ample ample_wellfounded ample_subset less(3) 0 3"], ["proof (prove)\nusing this:\n  ?q \\<in> nodes \\<Longrightarrow> ample_set ?q {a. ren a ?q}\n  \\<lbrakk>ample_set ?q ?A; ?A \\<subset> {a. en a ?q}; ?a \\<in> ?A\\<rbrakk>\n  \\<Longrightarrow> src (ex ?a ?q) ?q\n  ample_set ?q ?A \\<Longrightarrow> ?A \\<subseteq> {a. en a ?q}\n  q \\<in> nodes\n  {a. en a q} \\<noteq> {a. ren a q}\n  ren c q\n\ngoal (1 subgoal):\n 1. src (ex c q) q", "by blast"], ["proof (state)\nthis:\n  src (ex c q) q\n\ngoal (3 subgoals):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. ex c q \\<in> nodes\n 3. run ([a] @- ?v) (ex c q)", "show \"ex c q \\<in> nodes\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ex c q \\<in> nodes", "using less(3) 6"], ["proof (prove)\nusing this:\n  q \\<in> nodes\n  path [c] q\n\ngoal (1 subgoal):\n 1. ex c q \\<in> nodes", "by auto"], ["proof (state)\nthis:\n  ex c q \\<in> nodes\n\ngoal (2 subgoals):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. run ([a] @- ?v) (ex c q)", "show \"run ([a] @- v) (ex c q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ([a] @- v) (ex c q)", "using 7"], ["proof (prove)\nusing this:\n  run ([a] @- v) (target [c] q)\n\ngoal (1 subgoal):\n 1. run ([a] @- v) (ex c q)", "by auto"], ["proof (state)\nthis:\n  run ([a] @- v) (ex c q)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "fix b s b\\<^sub>1 b\\<^sub>2 u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 5: \"R.path (b @ [a]) (ex c q)\""], ["proof (state)\nthis:\n  R.path (b @ [a]) (ex c q)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 6: \"Ind {a} (set b)\""], ["proof (state)\nthis:\n  Ind {a} (set b)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 7: \"set b \\<subseteq> invisible\""], ["proof (state)\nthis:\n  set b \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 8: \"b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\""], ["proof (state)\nthis:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 9: \"b\\<^sub>1 @- u =\\<^sub>I v\""], ["proof (state)\nthis:\n  b\\<^sub>1 @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 10: \"Ind (set b\\<^sub>2) (sset u)\""], ["proof (state)\nthis:\n  Ind (set b\\<^sub>2) (sset u)\n\ngoal (1 subgoal):\n 1. \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n       \\<lbrakk>R.path (b @ [a]) (ex c q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        b\\<^sub>1 @- u =\\<^sub>I v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"thesis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule less(2))"], ["proof (state)\ngoal (6 subgoals):\n 1. R.path (?b @ [a]) q\n 2. Ind {a} (set ?b)\n 3. set ?b \\<subseteq> invisible\n 4. ?b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 5. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 6. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"R.path (([c] @ b) @ [a]) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.path (([c] @ b) @ [a]) q", "using 3 5"], ["proof (prove)\nusing this:\n  ren c q\n  R.path (b @ [a]) (ex c q)\n\ngoal (1 subgoal):\n 1. R.path (([c] @ b) @ [a]) q", "by auto"], ["proof (state)\nthis:\n  R.path (([c] @ b) @ [a]) q\n\ngoal (5 subgoals):\n 1. Ind {a} (set ([c] @ b))\n 2. set ([c] @ b) \\<subseteq> invisible\n 3. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 4. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 5. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"Ind {a} (set ([c] @ b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "have 1: \"ind c a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ind c a", "using 4"], ["proof (prove)\nusing this:\n  Ind (set [c]) (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. ind c a", "by simp"], ["proof (state)\nthis:\n  ind c a\n\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "have 2: \"ind a c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ind a c", "using independence_symmetric 1"], ["proof (prove)\nusing this:\n  ind ?a ?b \\<Longrightarrow> ind ?b ?a\n  ind c a\n\ngoal (1 subgoal):\n 1. ind a c", "by this"], ["proof (state)\nthis:\n  ind a c\n\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "using 6 2"], ["proof (prove)\nusing this:\n  Ind {a} (set b)\n  ind a c\n\ngoal (1 subgoal):\n 1. Ind {a} (set ([c] @ b))", "by auto"], ["proof (state)\nthis:\n  Ind {a} (set ([c] @ b))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a} (set ([c] @ b))\n\ngoal (4 subgoals):\n 1. set ([c] @ b) \\<subseteq> invisible\n 2. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 3. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 4. Ind (set ?b\\<^sub>2) (sset ?u)", "have 11: \"c \\<in> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<in> invisible", "using 1 3"], ["proof (prove)\nusing this:\n  {a. ren a q} \\<subseteq> invisible\n  ren c q\n\ngoal (1 subgoal):\n 1. c \\<in> invisible", "by auto"], ["proof (state)\nthis:\n  c \\<in> invisible\n\ngoal (4 subgoals):\n 1. set ([c] @ b) \\<subseteq> invisible\n 2. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 3. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 4. Ind (set ?b\\<^sub>2) (sset ?u)", "show \"set ([c] @ b) \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set ([c] @ b) \\<subseteq> invisible", "using 7 11"], ["proof (prove)\nusing this:\n  set b \\<subseteq> invisible\n  c \\<in> invisible\n\ngoal (1 subgoal):\n 1. set ([c] @ b) \\<subseteq> invisible", "by auto"], ["proof (state)\nthis:\n  set ([c] @ b) \\<subseteq> invisible\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have 12: \"Ind (set [c]) (set b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (set b\\<^sub>1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Ind (set [c]) (set b\\<^sub>1)", "have 1: \"set b\\<^sub>1 \\<subseteq> sset v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set b\\<^sub>1 \\<subseteq> sset v", "using 9"], ["proof (prove)\nusing this:\n  b\\<^sub>1 @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. set b\\<^sub>1 \\<subseteq> sset v", "by force"], ["proof (state)\nthis:\n  set b\\<^sub>1 \\<subseteq> sset v\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (set b\\<^sub>1)", "have 2: \"Ind (set [c]) (sset v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset v)", "using 4"], ["proof (prove)\nusing this:\n  Ind (set [c]) (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset v)", "by simp"], ["proof (state)\nthis:\n  Ind (set [c]) (sset v)\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (set b\\<^sub>1)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (set b\\<^sub>1)", "using 1 2"], ["proof (prove)\nusing this:\n  set b\\<^sub>1 \\<subseteq> sset v\n  Ind (set [c]) (sset v)\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (set b\\<^sub>1)", "by auto"], ["proof (state)\nthis:\n  Ind (set [c]) (set b\\<^sub>1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind (set [c]) (set b\\<^sub>1)\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have \"[c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2", "using 8"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "also"], ["proof (state)\nthis:\n  [c] @ b =\\<^sub>F [c] @ b\\<^sub>1 @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have \"\\<dots> = ([c] @ b\\<^sub>1) @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [c] @ b\\<^sub>1 @ b\\<^sub>2 = ([c] @ b\\<^sub>1) @ b\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  [c] @ b\\<^sub>1 @ b\\<^sub>2 = ([c] @ b\\<^sub>1) @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "also"], ["proof (state)\nthis:\n  [c] @ b\\<^sub>1 @ b\\<^sub>2 = ([c] @ b\\<^sub>1) @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have \"\\<dots> =\\<^sub>F (b\\<^sub>1 @ [c]) @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @ b\\<^sub>2 =\\<^sub>F (b\\<^sub>1 @ [c]) @ b\\<^sub>2", "using 12"], ["proof (prove)\nusing this:\n  Ind (set [c]) (set b\\<^sub>1)\n\ngoal (1 subgoal):\n 1. ([c] @ b\\<^sub>1) @ b\\<^sub>2 =\\<^sub>F (b\\<^sub>1 @ [c]) @ b\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  ([c] @ b\\<^sub>1) @ b\\<^sub>2 =\\<^sub>F (b\\<^sub>1 @ [c]) @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "also"], ["proof (state)\nthis:\n  ([c] @ b\\<^sub>1) @ b\\<^sub>2 =\\<^sub>F (b\\<^sub>1 @ [c]) @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "have \"\\<dots> = b\\<^sub>1 @ [c] @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (b\\<^sub>1 @ [c]) @ b\\<^sub>2 = b\\<^sub>1 @ [c] @ b\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  (b\\<^sub>1 @ [c]) @ b\\<^sub>2 = b\\<^sub>1 @ [c] @ b\\<^sub>2\n\ngoal (3 subgoals):\n 1. [c] @ b =\\<^sub>F ?b\\<^sub>1 @ ?b\\<^sub>2\n 2. ?b\\<^sub>1 @- ?u =\\<^sub>I v\n 3. Ind (set ?b\\<^sub>2) (sset ?u)", "finally"], ["proof (chain)\npicking this:\n  [c] @ b =\\<^sub>F b\\<^sub>1 @ [c] @ b\\<^sub>2", "show \"[c] @ b =\\<^sub>F b\\<^sub>1 @ [c] @ b\\<^sub>2\""], ["proof (prove)\nusing this:\n  [c] @ b =\\<^sub>F b\\<^sub>1 @ [c] @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. [c] @ b =\\<^sub>F b\\<^sub>1 @ [c] @ b\\<^sub>2", "by this"], ["proof (state)\nthis:\n  [c] @ b =\\<^sub>F b\\<^sub>1 @ [c] @ b\\<^sub>2\n\ngoal (2 subgoals):\n 1. b\\<^sub>1 @- ?u =\\<^sub>I v\n 2. Ind (set ([c] @ b\\<^sub>2)) (sset ?u)", "show \"b\\<^sub>1 @- u =\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b\\<^sub>1 @- u =\\<^sub>I v", "using 9"], ["proof (prove)\nusing this:\n  b\\<^sub>1 @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. b\\<^sub>1 @- u =\\<^sub>I v", "by this"], ["proof (state)\nthis:\n  b\\<^sub>1 @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. Ind (set ([c] @ b\\<^sub>2)) (sset u)", "have 13: \"Ind (set [c]) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset u)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset u)", "have 1: \"sset u \\<subseteq> sset v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sset u \\<subseteq> sset v", "using 9"], ["proof (prove)\nusing this:\n  b\\<^sub>1 @- u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. sset u \\<subseteq> sset v", "by force"], ["proof (state)\nthis:\n  sset u \\<subseteq> sset v\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset u)", "have 2: \"Ind (set [c]) (sset v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset v)", "using 4"], ["proof (prove)\nusing this:\n  Ind (set [c]) (sset ([a] @- v))\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset v)", "by simp"], ["proof (state)\nthis:\n  Ind (set [c]) (sset v)\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset u)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset u)", "using 1 2"], ["proof (prove)\nusing this:\n  sset u \\<subseteq> sset v\n  Ind (set [c]) (sset v)\n\ngoal (1 subgoal):\n 1. Ind (set [c]) (sset u)", "by blast"], ["proof (state)\nthis:\n  Ind (set [c]) (sset u)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind (set [c]) (sset u)\n\ngoal (1 subgoal):\n 1. Ind (set ([c] @ b\\<^sub>2)) (sset u)", "show \"Ind (set ([c] @ b\\<^sub>2)) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set ([c] @ b\\<^sub>2)) (sset u)", "using 10 13"], ["proof (prove)\nusing this:\n  Ind (set b\\<^sub>2) (sset u)\n  Ind (set [c]) (sset u)\n\ngoal (1 subgoal):\n 1. Ind (set ([c] @ b\\<^sub>2)) (sset u)", "by auto"], ["proof (state)\nthis:\n  Ind (set ([c] @ b\\<^sub>2)) (sset u)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "(*\n      q: initial state\n      v\\<^sub>1: operations of the original run processed so far\n      v\\<^sub>2: operations of the original run remaining\n      l: operations executed in the reduced run, but not yet in the original run\n      w: reduced run processed so far\n      w\\<^sub>1: selected reduced run processed so far\n      w\\<^sub>2: unselected reduced run processed so far\n      u: continuation of w\n    *)"], ["", "inductive reduced_run :: \"'state \\<Rightarrow> 'action list \\<Rightarrow> 'action stream \\<Rightarrow> 'action list \\<Rightarrow>\n      'action list \\<Rightarrow> 'action list \\<Rightarrow> 'action list \\<Rightarrow> 'action stream \\<Rightarrow> bool\"\n      where\n        init: \"reduced_run q [] v [] [] [] [] v\" |\n        absorb: \"reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u \\<Longrightarrow> a \\<in> set l \\<Longrightarrow>\n          reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 (remove1 a l) w w\\<^sub>1 w\\<^sub>2 u\" |\n        extend: \"reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u \\<Longrightarrow> a \\<notin> set l \\<Longrightarrow>\n          R.path (b @ [a]) (target w q) \\<Longrightarrow>\n          Ind {a} (set b) \\<Longrightarrow> set b \\<subseteq> invisible \\<Longrightarrow>\n          b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2 \\<Longrightarrow> [a] @- b\\<^sub>1 @- u' =\\<^sub>I u \\<Longrightarrow> Ind (set b\\<^sub>2) (sset u') \\<Longrightarrow>\n          reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 (l @ b\\<^sub>1) (w @ b @ [a]) (w\\<^sub>1 @ b\\<^sub>1 @ [a]) (w\\<^sub>2 @ b\\<^sub>2) u'\""], ["", "lemma reduced_run_words_fin:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"R.path w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.path w q", "using assms"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. R.path w q", "by induct auto"], ["", "lemma reduced_run_invar_2:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"v\\<^sub>2 =\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>2 =\\<^sub>I l @- u", "using assms"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. v\\<^sub>2 =\\<^sub>I l @- u", "proof induct"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>q v. v =\\<^sub>I [] @- v\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "case (init q v)"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<And>q v. v =\\<^sub>I [] @- v\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. v =\\<^sub>I [] @- v", "by simp"], ["proof (state)\nthis:\n  v =\\<^sub>I [] @- v\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "case (absorb q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u)"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n  a \\<in> set l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "obtain l\\<^sub>1 l\\<^sub>2 where 10: \"l = l\\<^sub>1 @ [a] @ l\\<^sub>2\" \"a \\<notin> set l\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l\\<^sub>1 l\\<^sub>2.\n        \\<lbrakk>l = l\\<^sub>1 @ [a] @ l\\<^sub>2;\n         a \\<notin> set l\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using split_list_first[OF absorb(3)]"], ["proof (prove)\nusing this:\n  \\<exists>ys zs. l = ys @ a # zs \\<and> a \\<notin> set ys\n\ngoal (1 subgoal):\n 1. (\\<And>l\\<^sub>1 l\\<^sub>2.\n        \\<lbrakk>l = l\\<^sub>1 @ [a] @ l\\<^sub>2;\n         a \\<notin> set l\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  l = l\\<^sub>1 @ [a] @ l\\<^sub>2\n  a \\<notin> set l\\<^sub>1\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 11: \"Ind {a} (set l\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set l\\<^sub>1)", "proof (rule le_fininf_ind')"], ["proof (state)\ngoal (3 subgoals):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I ?w\n 2. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I ?w\n 3. a \\<notin> set l\\<^sub>1", "show \"[a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "using absorb(2)"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by auto"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u\n 2. a \\<notin> set l\\<^sub>1", "show \"l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u", "unfolding 10(1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I (l\\<^sub>1 @ [a] @ l\\<^sub>2) @- u", "by auto"], ["proof (state)\nthis:\n  l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. a \\<notin> set l\\<^sub>1", "show \"a \\<notin> set l\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<notin> set l\\<^sub>1", "using 10(2)"], ["proof (prove)\nusing this:\n  a \\<notin> set l\\<^sub>1\n\ngoal (1 subgoal):\n 1. a \\<notin> set l\\<^sub>1", "by this"], ["proof (state)\nthis:\n  a \\<notin> set l\\<^sub>1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a} (set l\\<^sub>1)\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 12: \"Ind (set [a]) (set l\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l\\<^sub>1)", "using 11"], ["proof (prove)\nusing this:\n  Ind {a} (set l\\<^sub>1)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l\\<^sub>1)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set l\\<^sub>1)\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"[a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2", "unfolding 10(1) remove1_append"], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @\n    (if a \\<in> set l\\<^sub>1 then remove1 a l\\<^sub>1 @ [a] @ l\\<^sub>2\n     else l\\<^sub>1 @\n          (if a \\<in> set [a] then remove1 a [a] @ l\\<^sub>2\n           else [a] @ remove1 a l\\<^sub>2)) =\n    [a] @ l\\<^sub>1 @ l\\<^sub>2", "using 10(2)"], ["proof (prove)\nusing this:\n  a \\<notin> set l\\<^sub>1\n\ngoal (1 subgoal):\n 1. [a] @\n    (if a \\<in> set l\\<^sub>1 then remove1 a l\\<^sub>1 @ [a] @ l\\<^sub>2\n     else l\\<^sub>1 @\n          (if a \\<in> set [a] then remove1 a [a] @ l\\<^sub>2\n           else [a] @ remove1 a l\\<^sub>2)) =\n    [a] @ l\\<^sub>1 @ l\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  [a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  [a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"\\<dots> =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ l\\<^sub>1 @ l\\<^sub>2 =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  [a] @ l\\<^sub>1 @ l\\<^sub>2 =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  [a] @ l\\<^sub>1 @ l\\<^sub>2 =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"\\<dots> =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2", "using 12"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set l\\<^sub>1)\n\ngoal (1 subgoal):\n 1. ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"\\<dots> = l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l\\<^sub>1 @ [a]) @ l\\<^sub>2 = l", "unfolding 10(1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (l\\<^sub>1 @ [a]) @ l\\<^sub>2 = l\\<^sub>1 @ [a] @ l\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  (l\\<^sub>1 @ [a]) @ l\\<^sub>2 = l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "finally"], ["proof (chain)\npicking this:\n  [a] @ remove1 a l =\\<^sub>F l", "have 13: \"[a] @ remove1 a l =\\<^sub>F l\""], ["proof (prove)\nusing this:\n  [a] @ remove1 a l =\\<^sub>F l\n\ngoal (1 subgoal):\n 1. [a] @ remove1 a l =\\<^sub>F l", "by this"], ["proof (state)\nthis:\n  [a] @ remove1 a l =\\<^sub>F l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"[a] @- remove1 a l @- u = ([a] @ remove1 a l) @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- remove1 a l @- u = ([a] @ remove1 a l) @- u", "unfolding conc_conc"], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- remove1 a l @- u = ([a] @ remove1 a l) @- u", "by simp"], ["proof (state)\nthis:\n  [a] @- remove1 a l @- u = ([a] @ remove1 a l) @- u\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  [a] @- remove1 a l @- u = ([a] @ remove1 a l) @- u\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"\\<dots> =\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ remove1 a l) @- u =\\<^sub>I l @- u", "using 13"], ["proof (prove)\nusing this:\n  [a] @ remove1 a l =\\<^sub>F l\n\ngoal (1 subgoal):\n 1. ([a] @ remove1 a l) @- u =\\<^sub>I l @- u", "by blast"], ["proof (state)\nthis:\n  ([a] @ remove1 a l) @- u =\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  ([a] @ remove1 a l) @- u =\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"\\<dots> =\\<^sub>I [a] @- v\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l @- u =\\<^sub>I [a] @- v\\<^sub>2", "using absorb(2)"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. l @- u =\\<^sub>I [a] @- v\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  l @- u =\\<^sub>I [a] @- v\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "finally"], ["proof (chain)\npicking this:\n  [a] @- remove1 a l @- u =\\<^sub>I [a] @- v\\<^sub>2", "show ?case"], ["proof (prove)\nusing this:\n  [a] @- remove1 a l @- u =\\<^sub>I [a] @- v\\<^sub>2\n\ngoal (1 subgoal):\n 1. v\\<^sub>2 =\\<^sub>I remove1 a l @- u", "by blast"], ["proof (state)\nthis:\n  v\\<^sub>2 =\\<^sub>I remove1 a l @- u\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "case (extend q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1 b\\<^sub>2 u')"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n  a \\<notin> set l\n  R.path (b @ [a]) (target w q)\n  Ind {a} (set b)\n  set b \\<subseteq> invisible\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n  Ind (set b\\<^sub>2) (sset u')\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 11: \"Ind {a} (set l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set l)", "proof (rule le_fininf_ind')"], ["proof (state)\ngoal (3 subgoals):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I ?w\n 2. l \\<preceq>\\<^sub>F\\<^sub>I ?w\n 3. a \\<notin> set l", "show \"[a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "using extend(2)"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by auto"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. l \\<preceq>\\<^sub>F\\<^sub>I l @- u\n 2. a \\<notin> set l", "show \"l \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by auto"], ["proof (state)\nthis:\n  l \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. a \\<notin> set l", "show \"a \\<notin> set l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<notin> set l", "using extend(3)"], ["proof (prove)\nusing this:\n  a \\<notin> set l\n\ngoal (1 subgoal):\n 1. a \\<notin> set l", "by this"], ["proof (state)\nthis:\n  a \\<notin> set l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a} (set l)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 11: \"Ind (set [a]) (set l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l)", "using 11"], ["proof (prove)\nusing this:\n  Ind {a} (set l)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set l)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 12: \"eq_fin ([a] @ l) (l @ [a])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ l =\\<^sub>F l @ [a]", "using 11"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set l)\n\ngoal (1 subgoal):\n 1. [a] @ l =\\<^sub>F l @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ l =\\<^sub>F l @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 131: \"set b\\<^sub>1 \\<subseteq> set b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set b\\<^sub>1 \\<subseteq> set b", "using extend(7)"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. set b\\<^sub>1 \\<subseteq> set b", "by auto"], ["proof (state)\nthis:\n  set b\\<^sub>1 \\<subseteq> set b\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 132: \"Ind (set [a]) (set b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b)", "using extend(5)"], ["proof (prove)\nusing this:\n  Ind {a} (set b)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set b)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 13: \"Ind (set [a]) (set b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b\\<^sub>1)", "using 131 132"], ["proof (prove)\nusing this:\n  set b\\<^sub>1 \\<subseteq> set b\n  Ind (set [a]) (set b)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b\\<^sub>1)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set b\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have 14: \"eq_fin ([a] @ b\\<^sub>1) (b\\<^sub>1 @ [a])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]", "using 13"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set b\\<^sub>1)\n\ngoal (1 subgoal):\n 1. [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"[a] @- ((l @ b\\<^sub>1) @- u') = ([a] @ l) @- b\\<^sub>1 @- u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- (l @ b\\<^sub>1) @- u' = ([a] @ l) @- b\\<^sub>1 @- u'", "by simp"], ["proof (state)\nthis:\n  [a] @- (l @ b\\<^sub>1) @- u' = ([a] @ l) @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  [a] @- (l @ b\\<^sub>1) @- u' = ([a] @ l) @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"eq_inf \\<dots> ((l @ [a]) @- b\\<^sub>1 @- u')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ l) @- b\\<^sub>1 @- u' =\\<^sub>I (l @ [a]) @- b\\<^sub>1 @- u'", "using 12"], ["proof (prove)\nusing this:\n  [a] @ l =\\<^sub>F l @ [a]\n\ngoal (1 subgoal):\n 1. ([a] @ l) @- b\\<^sub>1 @- u' =\\<^sub>I (l @ [a]) @- b\\<^sub>1 @- u'", "by blast"], ["proof (state)\nthis:\n  ([a] @ l) @- b\\<^sub>1 @- u' =\\<^sub>I (l @ [a]) @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  ([a] @ l) @- b\\<^sub>1 @- u' =\\<^sub>I (l @ [a]) @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"\\<dots> = l @- [a] @- b\\<^sub>1 @- u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l @ [a]) @- b\\<^sub>1 @- u' = l @- [a] @- b\\<^sub>1 @- u'", "by simp"], ["proof (state)\nthis:\n  (l @ [a]) @- b\\<^sub>1 @- u' = l @- [a] @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  (l @ [a]) @- b\\<^sub>1 @- u' = l @- [a] @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"eq_inf \\<dots> (l @- u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l @- [a] @- b\\<^sub>1 @- u' =\\<^sub>I l @- u", "using extend(8)"], ["proof (prove)\nusing this:\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n\ngoal (1 subgoal):\n 1. l @- [a] @- b\\<^sub>1 @- u' =\\<^sub>I l @- u", "by blast"], ["proof (state)\nthis:\n  l @- [a] @- b\\<^sub>1 @- u' =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "also"], ["proof (state)\nthis:\n  l @- [a] @- b\\<^sub>1 @- u' =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "have \"eq_inf \\<dots> ([a] @- v\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l @- u =\\<^sub>I [a] @- v\\<^sub>2", "using extend(2)"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. l @- u =\\<^sub>I [a] @- v\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  l @- u =\\<^sub>I [a] @- v\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        [a] @- v\\<^sub>2 =\\<^sub>I l @- u; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "finally"], ["proof (chain)\npicking this:\n  [a] @- (l @ b\\<^sub>1) @- u' =\\<^sub>I [a] @- v\\<^sub>2", "show ?case"], ["proof (prove)\nusing this:\n  [a] @- (l @ b\\<^sub>1) @- u' =\\<^sub>I [a] @- v\\<^sub>2\n\ngoal (1 subgoal):\n 1. v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'", "by blast"], ["proof (state)\nthis:\n  v\\<^sub>2 =\\<^sub>I (l @ b\\<^sub>1) @- u'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_invar_1:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1", "using assms"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1", "proof induct"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>q v. [] @ [] =\\<^sub>F []\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "case (init q v)"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<And>q v. [] @ [] =\\<^sub>F []\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. [] @ [] =\\<^sub>F []", "by simp"], ["proof (state)\nthis:\n  [] @ [] =\\<^sub>F []\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "case (absorb q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u)"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\n  a \\<in> set l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 1: \"[a] @- v\\<^sub>2 =\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- v\\<^sub>2 =\\<^sub>I l @- u", "using reduced_run_invar_2 absorb(1)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?v\\<^sub>2 =\\<^sub>I ?l @- ?u\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. [a] @- v\\<^sub>2 =\\<^sub>I l @- u", "by this"], ["proof (state)\nthis:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "obtain l\\<^sub>1 l\\<^sub>2 where 10: \"l = l\\<^sub>1 @ [a] @ l\\<^sub>2\" \"a \\<notin> set l\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l\\<^sub>1 l\\<^sub>2.\n        \\<lbrakk>l = l\\<^sub>1 @ [a] @ l\\<^sub>2;\n         a \\<notin> set l\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using split_list_first[OF absorb(3)]"], ["proof (prove)\nusing this:\n  \\<exists>ys zs. l = ys @ a # zs \\<and> a \\<notin> set ys\n\ngoal (1 subgoal):\n 1. (\\<And>l\\<^sub>1 l\\<^sub>2.\n        \\<lbrakk>l = l\\<^sub>1 @ [a] @ l\\<^sub>2;\n         a \\<notin> set l\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  l = l\\<^sub>1 @ [a] @ l\\<^sub>2\n  a \\<notin> set l\\<^sub>1\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 11: \"Ind {a} (set l\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set l\\<^sub>1)", "proof (rule le_fininf_ind')"], ["proof (state)\ngoal (3 subgoals):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I ?w\n 2. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I ?w\n 3. a \\<notin> set l\\<^sub>1", "show \"[a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "using 1"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by auto"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u\n 2. a \\<notin> set l\\<^sub>1", "show \"l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u", "unfolding 10(1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I (l\\<^sub>1 @ [a] @ l\\<^sub>2) @- u", "by auto"], ["proof (state)\nthis:\n  l\\<^sub>1 \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. a \\<notin> set l\\<^sub>1", "show \"a \\<notin> set l\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<notin> set l\\<^sub>1", "using 10(2)"], ["proof (prove)\nusing this:\n  a \\<notin> set l\\<^sub>1\n\ngoal (1 subgoal):\n 1. a \\<notin> set l\\<^sub>1", "by this"], ["proof (state)\nthis:\n  a \\<notin> set l\\<^sub>1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a} (set l\\<^sub>1)\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 12: \"Ind (set [a]) (set l\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l\\<^sub>1)", "using 11"], ["proof (prove)\nusing this:\n  Ind {a} (set l\\<^sub>1)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l\\<^sub>1)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set l\\<^sub>1)\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"[a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2", "unfolding 10(1) remove1_append"], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @\n    (if a \\<in> set l\\<^sub>1 then remove1 a l\\<^sub>1 @ [a] @ l\\<^sub>2\n     else l\\<^sub>1 @\n          (if a \\<in> set [a] then remove1 a [a] @ l\\<^sub>2\n           else [a] @ remove1 a l\\<^sub>2)) =\n    [a] @ l\\<^sub>1 @ l\\<^sub>2", "using 10(2)"], ["proof (prove)\nusing this:\n  a \\<notin> set l\\<^sub>1\n\ngoal (1 subgoal):\n 1. [a] @\n    (if a \\<in> set l\\<^sub>1 then remove1 a l\\<^sub>1 @ [a] @ l\\<^sub>2\n     else l\\<^sub>1 @\n          (if a \\<in> set [a] then remove1 a [a] @ l\\<^sub>2\n           else [a] @ remove1 a l\\<^sub>2)) =\n    [a] @ l\\<^sub>1 @ l\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  [a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  [a] @ remove1 a l = [a] @ l\\<^sub>1 @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"\\<dots> =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ l\\<^sub>1 @ l\\<^sub>2 =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  [a] @ l\\<^sub>1 @ l\\<^sub>2 =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  [a] @ l\\<^sub>1 @ l\\<^sub>2 =\\<^sub>F ([a] @ l\\<^sub>1) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"\\<dots> =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2", "using 12"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set l\\<^sub>1)\n\ngoal (1 subgoal):\n 1. ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  ([a] @ l\\<^sub>1) @ l\\<^sub>2 =\\<^sub>F (l\\<^sub>1 @ [a]) @ l\\<^sub>2\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"\\<dots> = l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l\\<^sub>1 @ [a]) @ l\\<^sub>2 = l", "unfolding 10(1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (l\\<^sub>1 @ [a]) @ l\\<^sub>2 = l\\<^sub>1 @ [a] @ l\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  (l\\<^sub>1 @ [a]) @ l\\<^sub>2 = l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "finally"], ["proof (chain)\npicking this:\n  [a] @ remove1 a l =\\<^sub>F l", "have 13: \"[a] @ remove1 a l =\\<^sub>F l\""], ["proof (prove)\nusing this:\n  [a] @ remove1 a l =\\<^sub>F l\n\ngoal (1 subgoal):\n 1. [a] @ remove1 a l =\\<^sub>F l", "by this"], ["proof (state)\nthis:\n  [a] @ remove1 a l =\\<^sub>F l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"w\\<^sub>1 =\\<^sub>F v\\<^sub>1 @ l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 =\\<^sub>F v\\<^sub>1 @ l", "using absorb(2)"], ["proof (prove)\nusing this:\n  v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 =\\<^sub>F v\\<^sub>1 @ l", "by auto"], ["proof (state)\nthis:\n  w\\<^sub>1 =\\<^sub>F v\\<^sub>1 @ l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 =\\<^sub>F v\\<^sub>1 @ l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"\\<dots> =\\<^sub>F v\\<^sub>1 @ ([a] @ remove1 a l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l =\\<^sub>F v\\<^sub>1 @ [a] @ remove1 a l", "using 13"], ["proof (prove)\nusing this:\n  [a] @ remove1 a l =\\<^sub>F l\n\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l =\\<^sub>F v\\<^sub>1 @ [a] @ remove1 a l", "by blast"], ["proof (state)\nthis:\n  v\\<^sub>1 @ l =\\<^sub>F v\\<^sub>1 @ [a] @ remove1 a l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  v\\<^sub>1 @ l =\\<^sub>F v\\<^sub>1 @ [a] @ remove1 a l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"\\<dots> = (v\\<^sub>1 @ [a]) @ remove1 a l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ [a] @ remove1 a l = (v\\<^sub>1 @ [a]) @ remove1 a l", "by simp"], ["proof (state)\nthis:\n  v\\<^sub>1 @ [a] @ remove1 a l = (v\\<^sub>1 @ [a]) @ remove1 a l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "finally"], ["proof (chain)\npicking this:\n  w\\<^sub>1 =\\<^sub>F (v\\<^sub>1 @ [a]) @ remove1 a l", "show ?case"], ["proof (prove)\nusing this:\n  w\\<^sub>1 =\\<^sub>F (v\\<^sub>1 @ [a]) @ remove1 a l\n\ngoal (1 subgoal):\n 1. (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  (v\\<^sub>1 @ [a]) @ remove1 a l =\\<^sub>F w\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "case (extend q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1 b\\<^sub>2 u')"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\n  a \\<notin> set l\n  R.path (b @ [a]) (target w q)\n  Ind {a} (set b)\n  set b \\<subseteq> invisible\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n  Ind (set b\\<^sub>2) (sset u')\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 1: \"[a] @- v\\<^sub>2 =\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- v\\<^sub>2 =\\<^sub>I l @- u", "using reduced_run_invar_2 extend(1)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?v\\<^sub>2 =\\<^sub>I ?l @- ?u\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. [a] @- v\\<^sub>2 =\\<^sub>I l @- u", "by this"], ["proof (state)\nthis:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 11: \"Ind {a} (set l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set l)", "proof (rule le_fininf_ind')"], ["proof (state)\ngoal (3 subgoals):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I ?w\n 2. l \\<preceq>\\<^sub>F\\<^sub>I ?w\n 3. a \\<notin> set l", "show \"[a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "using 1"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by auto"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (2 subgoals):\n 1. l \\<preceq>\\<^sub>F\\<^sub>I l @- u\n 2. a \\<notin> set l", "show \"l \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by auto"], ["proof (state)\nthis:\n  l \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. a \\<notin> set l", "show \"a \\<notin> set l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<notin> set l", "using extend(3)"], ["proof (prove)\nusing this:\n  a \\<notin> set l\n\ngoal (1 subgoal):\n 1. a \\<notin> set l", "by auto"], ["proof (state)\nthis:\n  a \\<notin> set l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind {a} (set l)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 11: \"Ind (set [a]) (set l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l)", "using 11"], ["proof (prove)\nusing this:\n  Ind {a} (set l)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set l)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set l)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 12: \"eq_fin ([a] @ l) (l @ [a])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ l =\\<^sub>F l @ [a]", "using 11"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set l)\n\ngoal (1 subgoal):\n 1. [a] @ l =\\<^sub>F l @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ l =\\<^sub>F l @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 131: \"set b\\<^sub>1 \\<subseteq> set b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set b\\<^sub>1 \\<subseteq> set b", "using extend(7)"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. set b\\<^sub>1 \\<subseteq> set b", "by auto"], ["proof (state)\nthis:\n  set b\\<^sub>1 \\<subseteq> set b\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 132: \"Ind (set [a]) (set b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b)", "using extend(5)"], ["proof (prove)\nusing this:\n  Ind {a} (set b)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set b)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 13: \"Ind (set [a]) (set b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b\\<^sub>1)", "using 131 132"], ["proof (prove)\nusing this:\n  set b\\<^sub>1 \\<subseteq> set b\n  Ind (set [a]) (set b)\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b\\<^sub>1)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set b\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have 14: \"eq_fin ([a] @ b\\<^sub>1) (b\\<^sub>1 @ [a])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]", "using 13"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set b\\<^sub>1)\n\ngoal (1 subgoal):\n 1. [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]", "by blast"], ["proof (state)\nthis:\n  [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"eq_fin (w\\<^sub>1 @ b\\<^sub>1 @ [a]) (w\\<^sub>1 @ [a] @ b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ b\\<^sub>1 @ [a] =\\<^sub>F w\\<^sub>1 @ [a] @ b\\<^sub>1", "using 14"], ["proof (prove)\nusing this:\n  [a] @ b\\<^sub>1 =\\<^sub>F b\\<^sub>1 @ [a]\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ b\\<^sub>1 @ [a] =\\<^sub>F w\\<^sub>1 @ [a] @ b\\<^sub>1", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 @ b\\<^sub>1 @ [a] =\\<^sub>F w\\<^sub>1 @ [a] @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 @ b\\<^sub>1 @ [a] =\\<^sub>F w\\<^sub>1 @ [a] @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"eq_fin \\<dots> ((v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ [a] @ b\\<^sub>1 =\\<^sub>F (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1", "using extend(2)"], ["proof (prove)\nusing this:\n  v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ [a] @ b\\<^sub>1 =\\<^sub>F (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 @ [a] @ b\\<^sub>1 =\\<^sub>F (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 @ [a] @ b\\<^sub>1 =\\<^sub>F (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"eq_fin \\<dots> (v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1 =\\<^sub>F\n    v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1", "by simp"], ["proof (state)\nthis:\n  (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1 =\\<^sub>F\n  v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  (v\\<^sub>1 @ l) @ [a] @ b\\<^sub>1 =\\<^sub>F\n  v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"eq_fin \\<dots> (v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1 =\\<^sub>F\n    v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1", "using 12"], ["proof (prove)\nusing this:\n  [a] @ l =\\<^sub>F l @ [a]\n\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1 =\\<^sub>F\n    v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1", "by blast"], ["proof (state)\nthis:\n  v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1 =\\<^sub>F\n  v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "also"], ["proof (state)\nthis:\n  v\\<^sub>1 @ (l @ [a]) @ b\\<^sub>1 =\\<^sub>F\n  v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "have \"\\<dots> = (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1 = (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1", "by simp"], ["proof (state)\nthis:\n  v\\<^sub>1 @ ([a] @ l) @ b\\<^sub>1 = (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F\n                         w\\<^sub>1 @ b\\<^sub>1 @ [a]", "finally"], ["proof (chain)\npicking this:\n  w\\<^sub>1 @ b\\<^sub>1 @ [a] =\\<^sub>F (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1", "show ?case"], ["proof (prove)\nusing this:\n  w\\<^sub>1 @ b\\<^sub>1 @ [a] =\\<^sub>F (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1\n\ngoal (1 subgoal):\n 1. (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F w\\<^sub>1 @ b\\<^sub>1 @ [a]", "by auto"], ["proof (state)\nthis:\n  (v\\<^sub>1 @ [a]) @ l @ b\\<^sub>1 =\\<^sub>F w\\<^sub>1 @ b\\<^sub>1 @ [a]\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_invisible:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"set w\\<^sub>2 \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<subseteq> invisible", "using assms"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<subseteq> invisible", "proof induct"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>q v. set [] \\<subseteq> invisible\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> set w\\<^sub>2 \\<subseteq> invisible\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "case (init q v)"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<And>q v. set [] \\<subseteq> invisible\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> set w\\<^sub>2 \\<subseteq> invisible\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. set [] \\<subseteq> invisible", "by simp"], ["proof (state)\nthis:\n  set [] \\<subseteq> invisible\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> set w\\<^sub>2 \\<subseteq> invisible\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> set w\\<^sub>2 \\<subseteq> invisible\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "case (absorb q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u)"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  set w\\<^sub>2 \\<subseteq> invisible\n  a \\<in> set l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> set w\\<^sub>2 \\<subseteq> invisible\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<subseteq> invisible", "using absorb(2)"], ["proof (prove)\nusing this:\n  set w\\<^sub>2 \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<subseteq> invisible", "by this"], ["proof (state)\nthis:\n  set w\\<^sub>2 \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "case (extend q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1 b\\<^sub>2 u')"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  set w\\<^sub>2 \\<subseteq> invisible\n  a \\<notin> set l\n  R.path (b @ [a]) (target w q)\n  Ind {a} (set b)\n  set b \\<subseteq> invisible\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n  Ind (set b\\<^sub>2) (sset u')\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "have 1: \"set b\\<^sub>2 \\<subseteq> set b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set b\\<^sub>2 \\<subseteq> set b", "using extend(7)"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. set b\\<^sub>2 \\<subseteq> set b", "by auto"], ["proof (state)\nthis:\n  set b\\<^sub>2 \\<subseteq> set b\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        set w\\<^sub>2 \\<subseteq> invisible; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible", "unfolding set_append"], ["proof (prove)\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<union> set b\\<^sub>2 \\<subseteq> invisible", "using extend(2) extend(6) 1"], ["proof (prove)\nusing this:\n  set w\\<^sub>2 \\<subseteq> invisible\n  set b \\<subseteq> invisible\n  set b\\<^sub>2 \\<subseteq> set b\n\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<union> set b\\<^sub>2 \\<subseteq> invisible", "by blast"], ["proof (state)\nthis:\n  set (w\\<^sub>2 @ b\\<^sub>2) \\<subseteq> invisible\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_ind:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"Ind (set w\\<^sub>2) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "using assms"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "proof induct"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>q v. Ind (set []) (sset v)\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> Ind (set w\\<^sub>2) (sset u)\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "case (init q v)"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<And>q v. Ind (set []) (sset v)\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> Ind (set w\\<^sub>2) (sset u)\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set []) (sset v)", "by simp"], ["proof (state)\nthis:\n  Ind (set []) (sset v)\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> Ind (set w\\<^sub>2) (sset u)\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> Ind (set w\\<^sub>2) (sset u)\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "case (absorb q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u)"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  Ind (set w\\<^sub>2) (sset u)\n  a \\<in> set l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> Ind (set w\\<^sub>2) (sset u)\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "using absorb(2)"], ["proof (prove)\nusing this:\n  Ind (set w\\<^sub>2) (sset u)\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "by this"], ["proof (state)\nthis:\n  Ind (set w\\<^sub>2) (sset u)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "case (extend q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1 b\\<^sub>2 u')"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  Ind (set w\\<^sub>2) (sset u)\n  a \\<notin> set l\n  R.path (b @ [a]) (target w q)\n  Ind {a} (set b)\n  set b \\<subseteq> invisible\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n  Ind (set b\\<^sub>2) (sset u')\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "have 1: \"sset u' \\<subseteq> sset u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sset u' \\<subseteq> sset u", "using extend(8)"], ["proof (prove)\nusing this:\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n\ngoal (1 subgoal):\n 1. sset u' \\<subseteq> sset u", "by force"], ["proof (state)\nthis:\n  sset u' \\<subseteq> sset u\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        Ind (set w\\<^sub>2) (sset u); a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "using extend(2) extend(9) 1"], ["proof (prove)\nusing this:\n  Ind (set w\\<^sub>2) (sset u)\n  Ind (set b\\<^sub>2) (sset u')\n  sset u' \\<subseteq> sset u\n\ngoal (1 subgoal):\n 1. Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')", "unfolding set_append"], ["proof (prove)\nusing this:\n  Ind (set w\\<^sub>2) (sset u)\n  Ind (set b\\<^sub>2) (sset u')\n  sset u' \\<subseteq> sset u\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2 \\<union> set b\\<^sub>2) (sset u')", "by blast"], ["proof (state)\nthis:\n  Ind (set (w\\<^sub>2 @ b\\<^sub>2)) (sset u')\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_decompose:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "using assms"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "proof induct"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>q v. [] =\\<^sub>F [] @ []\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "case (init q v)"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<And>q v. [] =\\<^sub>F [] @ []\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n 3. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. [] =\\<^sub>F [] @ []", "by simp"], ["proof (state)\nthis:\n  [] =\\<^sub>F [] @ []\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "case (absorb q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u)"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n  a \\<in> set l\n\ngoal (2 subgoals):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<in> set l\\<rbrakk>\n       \\<Longrightarrow> w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n 2. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "using absorb(2)"], ["proof (prove)\nusing this:\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "by this"], ["proof (state)\nthis:\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "case (extend q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1 b\\<^sub>2 u')"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n  a \\<notin> set l\n  R.path (b @ [a]) (target w q)\n  Ind {a} (set b)\n  set b \\<subseteq> invisible\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n  Ind (set b\\<^sub>2) (sset u')\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have 1: \"Ind (set [a]) (set b\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b\\<^sub>2)", "using extend(5) extend(7)"], ["proof (prove)\nusing this:\n  Ind {a} (set b)\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. Ind (set [a]) (set b\\<^sub>2)", "by auto"], ["proof (state)\nthis:\n  Ind (set [a]) (set b\\<^sub>2)\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have 2: \"Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))", "have 1: \"Ind (set w\\<^sub>2) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "using reduced_run_ind extend(1)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  Ind (set ?w\\<^sub>2) (sset ?u)\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "by this"], ["proof (state)\nthis:\n  Ind (set w\\<^sub>2) (sset u)\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))", "have 2: \"u =\\<^sub>I [a] @- b\\<^sub>1 @- u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u =\\<^sub>I [a] @- b\\<^sub>1 @- u'", "using extend(8)"], ["proof (prove)\nusing this:\n  [a] @- b\\<^sub>1 @- u' =\\<^sub>I u\n\ngoal (1 subgoal):\n 1. u =\\<^sub>I [a] @- b\\<^sub>1 @- u'", "by auto"], ["proof (state)\nthis:\n  u =\\<^sub>I [a] @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))", "have 3: \"sset u = sset ([a] @- b\\<^sub>1 @- u')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sset u = sset ([a] @- b\\<^sub>1 @- u')", "using 2"], ["proof (prove)\nusing this:\n  u =\\<^sub>I [a] @- b\\<^sub>1 @- u'\n\ngoal (1 subgoal):\n 1. sset u = sset ([a] @- b\\<^sub>1 @- u')", "by blast"], ["proof (state)\nthis:\n  sset u = sset ([a] @- b\\<^sub>1 @- u')\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))", "unfolding set_append"], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set b\\<^sub>1 \\<union> set [a])", "using 1 3"], ["proof (prove)\nusing this:\n  Ind (set w\\<^sub>2) (sset u)\n  sset u = sset ([a] @- b\\<^sub>1 @- u')\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (set b\\<^sub>1 \\<union> set [a])", "by simp"], ["proof (state)\nthis:\n  Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"w @ b @ [a] =\\<^sub>F (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w @ b @ [a] =\\<^sub>F (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a]", "using extend(2)"], ["proof (prove)\nusing this:\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. w @ b @ [a] =\\<^sub>F (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a]", "by blast"], ["proof (state)\nthis:\n  w @ b @ [a] =\\<^sub>F (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "also"], ["proof (state)\nthis:\n  w @ b @ [a] =\\<^sub>F (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"\\<dots> =\\<^sub>F (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a] =\\<^sub>F\n    (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a]", "using extend(7)"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a] =\\<^sub>F\n    (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a]", "by blast"], ["proof (state)\nthis:\n  (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a] =\\<^sub>F\n  (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "also"], ["proof (state)\nthis:\n  (w\\<^sub>1 @ w\\<^sub>2) @ b @ [a] =\\<^sub>F\n  (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"\\<dots> = w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ (b\\<^sub>2 @ [a])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a] =\n    w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a]", "by simp"], ["proof (state)\nthis:\n  (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a] =\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "also"], ["proof (state)\nthis:\n  (w\\<^sub>1 @ w\\<^sub>2) @ (b\\<^sub>1 @ b\\<^sub>2) @ [a] =\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a]\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"\\<dots> =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ ([a] @ b\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a] =\\<^sub>F\n    w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2", "using 1"], ["proof (prove)\nusing this:\n  Ind (set [a]) (set b\\<^sub>2)\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a] =\\<^sub>F\n    w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a] =\\<^sub>F\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ b\\<^sub>2 @ [a] =\\<^sub>F\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"\\<dots> =\\<^sub>F w\\<^sub>1 @ (w\\<^sub>2 @ (b\\<^sub>1 @ [a])) @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2 =\\<^sub>F\n    w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2 =\\<^sub>F\n  w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 @ w\\<^sub>2 @ b\\<^sub>1 @ [a] @ b\\<^sub>2 =\\<^sub>F\n  w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"\\<dots> =\\<^sub>F w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2 =\\<^sub>F\n    w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2", "using 2"], ["proof (prove)\nusing this:\n  Ind (set w\\<^sub>2) (set (b\\<^sub>1 @ [a]))\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2 =\\<^sub>F\n    w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2 =\\<^sub>F\n  w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 @ (w\\<^sub>2 @ b\\<^sub>1 @ [a]) @ b\\<^sub>2 =\\<^sub>F\n  w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "have \"\\<dots> =\\<^sub>F (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2 =\\<^sub>F\n    (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  w\\<^sub>1 @ ((b\\<^sub>1 @ [a]) @ w\\<^sub>2) @ b\\<^sub>2 =\\<^sub>F\n  (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<And>q v\\<^sub>1 a v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u b b\\<^sub>1\n       b\\<^sub>2 u'.\n       \\<lbrakk>reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1\n                 w\\<^sub>2 u;\n        w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2; a \\<notin> set l;\n        R.path (b @ [a]) (target w q); Ind {a} (set b);\n        set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n        [a] @- b\\<^sub>1 @- u' =\\<^sub>I u;\n        Ind (set b\\<^sub>2) (sset u')\\<rbrakk>\n       \\<Longrightarrow> w @ b @ [a] =\\<^sub>F\n                         (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @\n                         w\\<^sub>2 @ b\\<^sub>2", "finally"], ["proof (chain)\npicking this:\n  w @ b @ [a] =\\<^sub>F\n  (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2", "show ?case"], ["proof (prove)\nusing this:\n  w @ b @ [a] =\\<^sub>F\n  (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. w @ b @ [a] =\\<^sub>F\n    (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2", "by this"], ["proof (state)\nthis:\n  w @ b @ [a] =\\<^sub>F\n  (w\\<^sub>1 @ b\\<^sub>1 @ [a]) @ w\\<^sub>2 @ b\\<^sub>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_project:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"project visible w\\<^sub>1 = project visible w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have 1: \"w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w", "using reduced_run_decompose assms"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?w =\\<^sub>F ?w\\<^sub>1 @ ?w\\<^sub>2\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w", "by auto"], ["proof (state)\nthis:\n  w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have 2: \"set w\\<^sub>2 \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<subseteq> invisible", "using reduced_run_invisible assms"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  set ?w\\<^sub>2 \\<subseteq> invisible\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. set w\\<^sub>2 \\<subseteq> invisible", "by this"], ["proof (state)\nthis:\n  set w\\<^sub>2 \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have 3: \"project visible w\\<^sub>2 = []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. project visible w\\<^sub>2 = []", "unfolding filter_empty_conv"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>set w\\<^sub>2. x \\<notin> visible", "using 2"], ["proof (prove)\nusing this:\n  set w\\<^sub>2 \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>set w\\<^sub>2. x \\<notin> visible", "by auto"], ["proof (state)\nthis:\n  project visible w\\<^sub>2 = []\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have \"project visible w\\<^sub>1 = project visible w\\<^sub>1 @ project visible w\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 =\n    project visible w\\<^sub>1 @ project visible w\\<^sub>2", "using 3"], ["proof (prove)\nusing this:\n  project visible w\\<^sub>2 = []\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 =\n    project visible w\\<^sub>1 @ project visible w\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  project visible w\\<^sub>1 =\n  project visible w\\<^sub>1 @ project visible w\\<^sub>2\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "also"], ["proof (state)\nthis:\n  project visible w\\<^sub>1 =\n  project visible w\\<^sub>1 @ project visible w\\<^sub>2\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have \"\\<dots> = project visible (w\\<^sub>1 @ w\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 @ project visible w\\<^sub>2 =\n    project visible (w\\<^sub>1 @ w\\<^sub>2)", "by simp"], ["proof (state)\nthis:\n  project visible w\\<^sub>1 @ project visible w\\<^sub>2 =\n  project visible (w\\<^sub>1 @ w\\<^sub>2)\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "also"], ["proof (state)\nthis:\n  project visible w\\<^sub>1 @ project visible w\\<^sub>2 =\n  project visible (w\\<^sub>1 @ w\\<^sub>2)\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have \"\\<dots> = list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. project visible (w\\<^sub>1 @ w\\<^sub>2) =\n    list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2)))", "by simp"], ["proof (state)\nthis:\n  project visible (w\\<^sub>1 @ w\\<^sub>2) =\n  list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2)))\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "also"], ["proof (state)\nthis:\n  project visible (w\\<^sub>1 @ w\\<^sub>2) =\n  list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2)))\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have \"\\<dots> = list_of (lproject visible (llist_of w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2))) =\n    list_of (lproject visible (llist_of w))", "using eq_fin_lproject_visible 1"], ["proof (prove)\nusing this:\n  ?u =\\<^sub>F ?v \\<Longrightarrow>\n  lproject visible (llist_of ?u) = lproject visible (llist_of ?v)\n  w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w\n\ngoal (1 subgoal):\n 1. list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2))) =\n    list_of (lproject visible (llist_of w))", "by metis"], ["proof (state)\nthis:\n  list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2))) =\n  list_of (lproject visible (llist_of w))\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "also"], ["proof (state)\nthis:\n  list_of (lproject visible (llist_of (w\\<^sub>1 @ w\\<^sub>2))) =\n  list_of (lproject visible (llist_of w))\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "have \"\\<dots> = project visible w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. list_of (lproject visible (llist_of w)) = project visible w", "by simp"], ["proof (state)\nthis:\n  list_of (lproject visible (llist_of w)) = project visible w\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "finally"], ["proof (chain)\npicking this:\n  project visible w\\<^sub>1 = project visible w", "show ?thesis"], ["proof (prove)\nusing this:\n  project visible w\\<^sub>1 = project visible w\n\ngoal (1 subgoal):\n 1. project visible w\\<^sub>1 = project visible w", "by this"], ["proof (state)\nthis:\n  project visible w\\<^sub>1 = project visible w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_length_1:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"length v\\<^sub>1 \\<le> length w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w\\<^sub>1", "using reduced_run_invar_1 assms"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?v\\<^sub>1 @ ?l =\\<^sub>F ?w\\<^sub>1\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w\\<^sub>1", "by force"], ["", "lemma reduced_run_length:\n      assumes \"reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\"\n      shows \"length v\\<^sub>1 \\<le> length w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w", "have \"length v\\<^sub>1 \\<le> length w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w\\<^sub>1", "using reduced_run_length_1 assms"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  length ?v\\<^sub>1 \\<le> length ?w\\<^sub>1\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w\\<^sub>1", "by this"], ["proof (state)\nthis:\n  length v\\<^sub>1 \\<le> length w\\<^sub>1\n\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w", "also"], ["proof (state)\nthis:\n  length v\\<^sub>1 \\<le> length w\\<^sub>1\n\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w", "have \"\\<dots> \\<le> length w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length w\\<^sub>1 \\<le> length w", "using reduced_run_decompose assms"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?w =\\<^sub>F ?w\\<^sub>1 @ ?w\\<^sub>2\n  reduced_run q v\\<^sub>1 v\\<^sub>2 l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. length w\\<^sub>1 \\<le> length w", "by force"], ["proof (state)\nthis:\n  length w\\<^sub>1 \\<le> length w\n\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w", "finally"], ["proof (chain)\npicking this:\n  length v\\<^sub>1 \\<le> length w", "show ?thesis"], ["proof (prove)\nusing this:\n  length v\\<^sub>1 \\<le> length w\n\ngoal (1 subgoal):\n 1. length v\\<^sub>1 \\<le> length w", "by this"], ["proof (state)\nthis:\n  length v\\<^sub>1 \\<le> length w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduced_run_step:\n      assumes \"q \\<in> nodes\" \"run (v\\<^sub>1 @- [a] @- v\\<^sub>2) q\"\n      assumes \"reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\"\n      obtains l' w' w\\<^sub>1' w\\<^sub>2' u'\n      where \"reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w') (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2') u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof (cases \"a \\<in> set l\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<in> set l\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "case True"], ["proof (state)\nthis:\n  a \\<in> set l\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<in> set l\\<rbrakk>\n    \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule that, rule absorb)"], ["proof (state)\ngoal (2 subgoals):\n 1. reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) ?l2 (w @ ?w')\n     (w\\<^sub>1 @ ?w\\<^sub>1') (w\\<^sub>2 @ ?w\\<^sub>2') ?u'\n 2. a \\<in> set ?l2", "show \"reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l (w @ []) (w\\<^sub>1 @ []) (w\\<^sub>2 @ []) u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l (w @ []) (w\\<^sub>1 @ [])\n     (w\\<^sub>2 @ []) u", "using assms(3)"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l (w @ []) (w\\<^sub>1 @ [])\n     (w\\<^sub>2 @ []) u", "by simp"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l (w @ []) (w\\<^sub>1 @ [])\n   (w\\<^sub>2 @ []) u\n\ngoal (1 subgoal):\n 1. a \\<in> set l", "show \"a \\<in> set l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> set l", "using True"], ["proof (prove)\nusing this:\n  a \\<in> set l\n\ngoal (1 subgoal):\n 1. a \\<in> set l", "by this"], ["proof (state)\nthis:\n  a \\<in> set l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "case False"], ["proof (state)\nthis:\n  a \\<notin> set l\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 1: \"v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1", "using reduced_run_invar_1 assms(3)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?v\\<^sub>1 @ ?l =\\<^sub>F ?w\\<^sub>1\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1", "by this"], ["proof (state)\nthis:\n  v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 2: \"[a] @- v\\<^sub>2 =\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- v\\<^sub>2 =\\<^sub>I l @- u", "using reduced_run_invar_2 assms(3)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?v\\<^sub>2 =\\<^sub>I ?l @- ?u\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. [a] @- v\\<^sub>2 =\\<^sub>I l @- u", "by this"], ["proof (state)\nthis:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 3: \"w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "using reduced_run_decompose assms(3)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?w =\\<^sub>F ?w\\<^sub>1 @ ?w\\<^sub>2\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "by this"], ["proof (state)\nthis:\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have \"v\\<^sub>1 @ l @ w\\<^sub>2 = (v\\<^sub>1 @ l) @ w\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l @ w\\<^sub>2 = (v\\<^sub>1 @ l) @ w\\<^sub>2", "by simp"], ["proof (state)\nthis:\n  v\\<^sub>1 @ l @ w\\<^sub>2 = (v\\<^sub>1 @ l) @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "also"], ["proof (state)\nthis:\n  v\\<^sub>1 @ l @ w\\<^sub>2 = (v\\<^sub>1 @ l) @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have \"\\<dots> =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v\\<^sub>1 @ l) @ w\\<^sub>2 =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "using 1"], ["proof (prove)\nusing this:\n  v\\<^sub>1 @ l =\\<^sub>F w\\<^sub>1\n\ngoal (1 subgoal):\n 1. (v\\<^sub>1 @ l) @ w\\<^sub>2 =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2", "by blast"], ["proof (state)\nthis:\n  (v\\<^sub>1 @ l) @ w\\<^sub>2 =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "also"], ["proof (state)\nthis:\n  (v\\<^sub>1 @ l) @ w\\<^sub>2 =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have \"\\<dots> =\\<^sub>F w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w", "using 3"], ["proof (prove)\nusing this:\n  w =\\<^sub>F w\\<^sub>1 @ w\\<^sub>2\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 @ w\\<^sub>2 =\\<^sub>F w\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "finally"], ["proof (chain)\npicking this:\n  v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w", "have 4: \"v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w\""], ["proof (prove)\nusing this:\n  v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w\n\ngoal (1 subgoal):\n 1. v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w", "by this"], ["proof (state)\nthis:\n  v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 5: \"run ((v\\<^sub>1 @ l) @- w\\<^sub>2 @- u) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ((v\\<^sub>1 @ l) @- w\\<^sub>2 @- u) q", "proof (rule diamond_fin_word_inf_word')"], ["proof (state)\ngoal (3 subgoals):\n 1. Ind (set w\\<^sub>2) (sset u)\n 2. path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q\n 3. run ((v\\<^sub>1 @ l) @- u) q", "show \"Ind (set w\\<^sub>2) (sset u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "using reduced_run_ind assms(3)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  Ind (set ?w\\<^sub>2) (sset ?u)\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. Ind (set w\\<^sub>2) (sset u)", "by this"], ["proof (state)\nthis:\n  Ind (set w\\<^sub>2) (sset u)\n\ngoal (2 subgoals):\n 1. path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q\n 2. run ((v\\<^sub>1 @ l) @- u) q", "have 6: \"R.path w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.path w q", "using reduced_run_words_fin assms(3)"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  R.path ?w ?q\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. R.path w q", "by this"], ["proof (state)\nthis:\n  R.path w q\n\ngoal (2 subgoals):\n 1. path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q\n 2. run ((v\\<^sub>1 @ l) @- u) q", "have 7: \"path w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. path w q", "using reduction_words_fin assms(1) 6"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; R.path ?w ?q\\<rbrakk>\n  \\<Longrightarrow> path ?w ?q\n  q \\<in> nodes\n  R.path w q\n\ngoal (1 subgoal):\n 1. path w q", "by auto"], ["proof (state)\nthis:\n  path w q\n\ngoal (2 subgoals):\n 1. path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q\n 2. run ((v\\<^sub>1 @ l) @- u) q", "show \"path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q", "using eq_fin_word 4 7"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w\\<^sub>1 =\\<^sub>F ?w\\<^sub>2; path ?w\\<^sub>1 ?p\\<rbrakk>\n  \\<Longrightarrow> path ?w\\<^sub>2 ?p\n  v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w\n  path w q\n\ngoal (1 subgoal):\n 1. path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q", "by auto"], ["proof (state)\nthis:\n  path ((v\\<^sub>1 @ l) @ w\\<^sub>2) q\n\ngoal (1 subgoal):\n 1. run ((v\\<^sub>1 @ l) @- u) q", "have 8: \"v\\<^sub>1 @- [a] @- v\\<^sub>2 =\\<^sub>I v\\<^sub>1 @- l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v\\<^sub>1 @- [a] @- v\\<^sub>2 =\\<^sub>I v\\<^sub>1 @- l @- u", "using 2"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. v\\<^sub>1 @- [a] @- v\\<^sub>2 =\\<^sub>I v\\<^sub>1 @- l @- u", "by blast"], ["proof (state)\nthis:\n  v\\<^sub>1 @- [a] @- v\\<^sub>2 =\\<^sub>I v\\<^sub>1 @- l @- u\n\ngoal (1 subgoal):\n 1. run ((v\\<^sub>1 @ l) @- u) q", "show \"run ((v\\<^sub>1 @ l) @- u) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ((v\\<^sub>1 @ l) @- u) q", "using eq_inf_word assms(2) 8"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w\\<^sub>1 =\\<^sub>I ?w\\<^sub>2; run ?w\\<^sub>1 ?p\\<rbrakk>\n  \\<Longrightarrow> run ?w\\<^sub>2 ?p\n  run (v\\<^sub>1 @- [a] @- v\\<^sub>2) q\n  v\\<^sub>1 @- [a] @- v\\<^sub>2 =\\<^sub>I v\\<^sub>1 @- l @- u\n\ngoal (1 subgoal):\n 1. run ((v\\<^sub>1 @ l) @- u) q", "by auto"], ["proof (state)\nthis:\n  run ((v\\<^sub>1 @ l) @- u) q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  run ((v\\<^sub>1 @ l) @- w\\<^sub>2 @- u) q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 6: \"run (w @- u) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run (w @- u) q", "using eq_inf_word 4 5"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w\\<^sub>1 =\\<^sub>I ?w\\<^sub>2; run ?w\\<^sub>1 ?p\\<rbrakk>\n  \\<Longrightarrow> run ?w\\<^sub>2 ?p\n  v\\<^sub>1 @ l @ w\\<^sub>2 =\\<^sub>F w\n  run ((v\\<^sub>1 @ l) @- w\\<^sub>2 @- u) q\n\ngoal (1 subgoal):\n 1. run (w @- u) q", "by (metis eq_inf_concat_end shift_append)"], ["proof (state)\nthis:\n  run (w @- u) q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 7: \"[a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "using 2"], ["proof (prove)\nusing this:\n  [a] @- v\\<^sub>2 =\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u", "by blast"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 8: \"[a] \\<preceq>\\<^sub>F\\<^sub>I u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I u", "using le_fininf_not_member' 7 False"], ["proof (prove)\nusing this:\n  \\<lbrakk>[?a] \\<preceq>\\<^sub>F\\<^sub>I ?u @- ?v;\n   ?a \\<notin> set ?u\\<rbrakk>\n  \\<Longrightarrow> [?a] \\<preceq>\\<^sub>F\\<^sub>I ?v\n  [a] \\<preceq>\\<^sub>F\\<^sub>I l @- u\n  a \\<notin> set l\n\ngoal (1 subgoal):\n 1. [a] \\<preceq>\\<^sub>F\\<^sub>I u", "by this"], ["proof (state)\nthis:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I u\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "obtain u' where 9: \"u =\\<^sub>I [a] @- u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u'.\n        u =\\<^sub>I [a] @- u' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 8"], ["proof (prove)\nusing this:\n  [a] \\<preceq>\\<^sub>F\\<^sub>I u\n\ngoal (1 subgoal):\n 1. (\\<And>u'.\n        u =\\<^sub>I [a] @- u' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by rule"], ["proof (state)\nthis:\n  u =\\<^sub>I [a] @- u'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 101: \"target w q \\<in> nodes\""], ["proof (prove)\ngoal (1 subgoal):\n 1. target w q \\<in> nodes", "using assms(1) 6"], ["proof (prove)\nusing this:\n  q \\<in> nodes\n  run (w @- u) q\n\ngoal (1 subgoal):\n 1. target w q \\<in> nodes", "by auto"], ["proof (state)\nthis:\n  target w q \\<in> nodes\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "have 10: \"run ([a] @- u') (target w q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run ([a] @- u') (target w q)", "using eq_inf_word 9 6"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w\\<^sub>1 =\\<^sub>I ?w\\<^sub>2; run ?w\\<^sub>1 ?p\\<rbrakk>\n  \\<Longrightarrow> run ?w\\<^sub>2 ?p\n  u =\\<^sub>I [a] @- u'\n  run (w @- u) q\n\ngoal (1 subgoal):\n 1. run ([a] @- u') (target w q)", "by blast"], ["proof (state)\nthis:\n  run ([a] @- u') (target w q)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "obtain b b\\<^sub>1 b\\<^sub>2 u'' where 11:\n        \"R.path (b @ [a]) (target w q)\"\n        \"Ind {a} (set b)\" \"set b \\<subseteq> invisible\"\n        \"b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\" \"b\\<^sub>1 @- u'' =\\<^sub>I u'\" \"Ind (set b\\<^sub>2) (sset u'')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>b b\\<^sub>1 b\\<^sub>2 u''.\n        \\<lbrakk>R.path (b @ [a]) (target w q); Ind {a} (set b);\n         set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n         b\\<^sub>1 @- u'' =\\<^sub>I u';\n         Ind (set b\\<^sub>2) (sset u'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using reduction_chunk 101 10"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; run ([?a] @- ?v) ?q;\n   \\<And>b b\\<^sub>1 b\\<^sub>2 u.\n      \\<lbrakk>R.path (b @ [?a]) ?q; Ind {?a} (set b);\n       set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n       b\\<^sub>1 @- u =\\<^sub>I ?v; Ind (set b\\<^sub>2) (sset u)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  target w q \\<in> nodes\n  run ([a] @- u') (target w q)\n\ngoal (1 subgoal):\n 1. (\\<And>b b\\<^sub>1 b\\<^sub>2 u''.\n        \\<lbrakk>R.path (b @ [a]) (target w q); Ind {a} (set b);\n         set b \\<subseteq> invisible; b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2;\n         b\\<^sub>1 @- u'' =\\<^sub>I u';\n         Ind (set b\\<^sub>2) (sset u'')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by this"], ["proof (state)\nthis:\n  R.path (b @ [a]) (target w q)\n  Ind {a} (set b)\n  set b \\<subseteq> invisible\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n  b\\<^sub>1 @- u'' =\\<^sub>I u'\n  Ind (set b\\<^sub>2) (sset u'')\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                reduced_run q (v\\<^sub>1 @ [a]) v\\<^sub>2 l' (w @ w')\n                 (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n                 u' \\<Longrightarrow>\n                thesis;\n     a \\<notin> set l\\<rbrakk>\n    \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (rule that, rule extend)"], ["proof (state)\ngoal (8 subgoals):\n 1. reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) ?l2 w w\\<^sub>1 w\\<^sub>2 ?u2\n 2. a \\<notin> set ?l2\n 3. R.path (?b2 @ [a]) (target w q)\n 4. Ind {a} (set ?b2)\n 5. set ?b2 \\<subseteq> invisible\n 6. ?b2 =\\<^sub>F ?b\\<^sub>12 @ ?w\\<^sub>2'\n 7. [a] @- ?b\\<^sub>12 @- ?u' =\\<^sub>I ?u2\n 8. Ind (set ?w\\<^sub>2') (sset ?u')", "show \"reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u", "using assms(3)"], ["proof (prove)\nusing this:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u", "by this"], ["proof (state)\nthis:\n  reduced_run q v\\<^sub>1 ([a] @- v\\<^sub>2) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (7 subgoals):\n 1. a \\<notin> set l\n 2. R.path (?b2 @ [a]) (target w q)\n 3. Ind {a} (set ?b2)\n 4. set ?b2 \\<subseteq> invisible\n 5. ?b2 =\\<^sub>F ?b\\<^sub>12 @ ?w\\<^sub>2'\n 6. [a] @- ?b\\<^sub>12 @- ?u' =\\<^sub>I u\n 7. Ind (set ?w\\<^sub>2') (sset ?u')", "show \"a \\<notin> set l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<notin> set l", "using False"], ["proof (prove)\nusing this:\n  a \\<notin> set l\n\ngoal (1 subgoal):\n 1. a \\<notin> set l", "by this"], ["proof (state)\nthis:\n  a \\<notin> set l\n\ngoal (6 subgoals):\n 1. R.path (?b2 @ [a]) (target w q)\n 2. Ind {a} (set ?b2)\n 3. set ?b2 \\<subseteq> invisible\n 4. ?b2 =\\<^sub>F ?b\\<^sub>12 @ ?w\\<^sub>2'\n 5. [a] @- ?b\\<^sub>12 @- ?u' =\\<^sub>I u\n 6. Ind (set ?w\\<^sub>2') (sset ?u')", "show \"R.path (b @ [a]) (target w q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.path (b @ [a]) (target w q)", "using 11(1)"], ["proof (prove)\nusing this:\n  R.path (b @ [a]) (target w q)\n\ngoal (1 subgoal):\n 1. R.path (b @ [a]) (target w q)", "by this"], ["proof (state)\nthis:\n  R.path (b @ [a]) (target w q)\n\ngoal (5 subgoals):\n 1. Ind {a} (set b)\n 2. set b \\<subseteq> invisible\n 3. b =\\<^sub>F ?b\\<^sub>12 @ ?w\\<^sub>2'\n 4. [a] @- ?b\\<^sub>12 @- ?u' =\\<^sub>I u\n 5. Ind (set ?w\\<^sub>2') (sset ?u')", "show \"Ind {a} (set b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind {a} (set b)", "using 11(2)"], ["proof (prove)\nusing this:\n  Ind {a} (set b)\n\ngoal (1 subgoal):\n 1. Ind {a} (set b)", "by this"], ["proof (state)\nthis:\n  Ind {a} (set b)\n\ngoal (4 subgoals):\n 1. set b \\<subseteq> invisible\n 2. b =\\<^sub>F ?b\\<^sub>12 @ ?w\\<^sub>2'\n 3. [a] @- ?b\\<^sub>12 @- ?u' =\\<^sub>I u\n 4. Ind (set ?w\\<^sub>2') (sset ?u')", "show \"set b \\<subseteq> invisible\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set b \\<subseteq> invisible", "using 11(3)"], ["proof (prove)\nusing this:\n  set b \\<subseteq> invisible\n\ngoal (1 subgoal):\n 1. set b \\<subseteq> invisible", "by this"], ["proof (state)\nthis:\n  set b \\<subseteq> invisible\n\ngoal (3 subgoals):\n 1. b =\\<^sub>F ?b\\<^sub>12 @ ?w\\<^sub>2'\n 2. [a] @- ?b\\<^sub>12 @- ?u' =\\<^sub>I u\n 3. Ind (set ?w\\<^sub>2') (sset ?u')", "show \"b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2", "using 11(4)"], ["proof (prove)\nusing this:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (1 subgoal):\n 1. b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2", "by this"], ["proof (state)\nthis:\n  b =\\<^sub>F b\\<^sub>1 @ b\\<^sub>2\n\ngoal (2 subgoals):\n 1. [a] @- b\\<^sub>1 @- ?u' =\\<^sub>I u\n 2. Ind (set b\\<^sub>2) (sset ?u')", "show \"[a] @- b\\<^sub>1 @- u'' =\\<^sub>I u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a] @- b\\<^sub>1 @- u'' =\\<^sub>I u", "using 9 11(5)"], ["proof (prove)\nusing this:\n  u =\\<^sub>I [a] @- u'\n  b\\<^sub>1 @- u'' =\\<^sub>I u'\n\ngoal (1 subgoal):\n 1. [a] @- b\\<^sub>1 @- u'' =\\<^sub>I u", "by blast"], ["proof (state)\nthis:\n  [a] @- b\\<^sub>1 @- u'' =\\<^sub>I u\n\ngoal (1 subgoal):\n 1. Ind (set b\\<^sub>2) (sset u'')", "show \"Ind (set b\\<^sub>2) (sset u'')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Ind (set b\\<^sub>2) (sset u'')", "using 11(6)"], ["proof (prove)\nusing this:\n  Ind (set b\\<^sub>2) (sset u'')\n\ngoal (1 subgoal):\n 1. Ind (set b\\<^sub>2) (sset u'')", "by this"], ["proof (state)\nthis:\n  Ind (set b\\<^sub>2) (sset u'')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "(* theorem 3.11 in [1] *)"], ["", "lemma reduction_word:\n      assumes \"q \\<in> nodes\" \"run v q\"\n      obtains u w\n      where\n        \"R.run w q\"\n        \"v =\\<^sub>I u\" \"u \\<preceq>\\<^sub>I w\"\n        \"lproject visible (llist_of_stream u) = lproject visible (llist_of_stream w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>w u.\n        \\<lbrakk>R.run w q; v =\\<^sub>I u; u \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream u) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>w u.\n        \\<lbrakk>R.run w q; v =\\<^sub>I u; u \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream u) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define P where \"P \\<equiv> \\<lambda> k w w\\<^sub>1. \\<exists> l w\\<^sub>2 u. reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\""], ["proof (state)\nthis:\n  P \\<equiv>\n  \\<lambda>k w w\\<^sub>1.\n     \\<exists>l w\\<^sub>2 u.\n        reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. (\\<And>w u.\n        \\<lbrakk>R.run w q; v =\\<^sub>I u; u \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream u) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain w w\\<^sub>1 where 1: \"\\<And> k. P k (w k) (w\\<^sub>1 k)\" \"chain w\" \"chain w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>w w\\<^sub>1.\n        \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n         chain w\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof (rule chain_construct_2'[of P])"], ["proof (state)\ngoal (5 subgoals):\n 1. (\\<And>w w\\<^sub>1.\n        \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n         chain w\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    P 0 ?u\\<^sub>02 ?v\\<^sub>02\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 4. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 5. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"P 0 [] []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P 0 [] []", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>l w\\<^sub>2.\n       Ex (reduced_run q (stake 0 v) (sdrop 0 v) l [] [] w\\<^sub>2)", "using init"], ["proof (prove)\nusing this:\n  reduced_run ?q [] ?v [] [] [] [] ?v\n\ngoal (1 subgoal):\n 1. \\<exists>l w\\<^sub>2.\n       Ex (reduced_run q (stake 0 v) (sdrop 0 v) l [] [] w\\<^sub>2)", "by force"], ["proof (state)\nthis:\n  P 0 [] []\n\ngoal (4 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 4. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 4. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "fix k w w\\<^sub>1"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 4. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "assume 1: \"P k w w\\<^sub>1\""], ["proof (state)\nthis:\n  P k w w\\<^sub>1\n\ngoal (4 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 4. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain l w\\<^sub>2 u where 2: \"reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l w\\<^sub>2 u.\n        reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2\n         u \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using 1"], ["proof (prove)\nusing this:\n  P k w w\\<^sub>1\n\ngoal (1 subgoal):\n 1. (\\<And>l w\\<^sub>2 u.\n        reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2\n         u \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding P_def"], ["proof (prove)\nusing this:\n  \\<exists>l w\\<^sub>2.\n     Ex (reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2)\n\ngoal (1 subgoal):\n 1. (\\<And>l w\\<^sub>2 u.\n        reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2\n         u \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (4 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 4. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "obtain l' w' w\\<^sub>1' w\\<^sub>2' u' where 3:\n          \"reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w') (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2') u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof (rule reduced_run_step)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    ?q2 \\<in> nodes\n 2. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    run (?v\\<^sub>12 @- [?a2] @- ?v\\<^sub>22) ?q2\n 3. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    reduced_run ?q2 ?v\\<^sub>12 ([?a2] @- ?v\\<^sub>22) ?l2 ?w2 ?w\\<^sub>12\n     ?w\\<^sub>22 ?u2\n 4. \\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n       \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                   reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l'\n                    (w @ w') (w\\<^sub>1 @ w\\<^sub>1')\n                    (w\\<^sub>2 @ w\\<^sub>2') u' \\<Longrightarrow>\n                   thesis;\n        reduced_run ?q2 (?v\\<^sub>12 @ [?a2]) ?v\\<^sub>22 l' (?w2 @ w')\n         (?w\\<^sub>12 @ w\\<^sub>1') (?w\\<^sub>22 @ w\\<^sub>2') u'\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"q \\<in> nodes\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q \\<in> nodes", "using assms(1)"], ["proof (prove)\nusing this:\n  q \\<in> nodes\n\ngoal (1 subgoal):\n 1. q \\<in> nodes", "by this"], ["proof (state)\nthis:\n  q \\<in> nodes\n\ngoal (3 subgoals):\n 1. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    run (?v\\<^sub>12 @- [?a2] @- ?v\\<^sub>22) q\n 2. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    reduced_run q ?v\\<^sub>12 ([?a2] @- ?v\\<^sub>22) ?l2 ?w2 ?w\\<^sub>12\n     ?w\\<^sub>22 ?u2\n 3. \\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n       \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                   reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l'\n                    (w @ w') (w\\<^sub>1 @ w\\<^sub>1')\n                    (w\\<^sub>2 @ w\\<^sub>2') u' \\<Longrightarrow>\n                   thesis;\n        reduced_run q (?v\\<^sub>12 @ [?a2]) ?v\\<^sub>22 l' (?w2 @ w')\n         (?w\\<^sub>12 @ w\\<^sub>1') (?w\\<^sub>22 @ w\\<^sub>2') u'\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"run (stake k v @- [v !! k] @- sdrop (Suc k) v) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run (stake k v @- [v !! k] @- sdrop (Suc k) v) q", "using assms(2)"], ["proof (prove)\nusing this:\n  run v q\n\ngoal (1 subgoal):\n 1. run (stake k v @- [v !! k] @- sdrop (Suc k) v) q", "by (metis shift_append stake_Suc stake_sdrop)"], ["proof (state)\nthis:\n  run (stake k v @- [v !! k] @- sdrop (Suc k) v) q\n\ngoal (2 subgoals):\n 1. (\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2')\n         u' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    reduced_run q (stake k v) ([v !! k] @- sdrop (Suc k) v) ?l2 ?w2\n     ?w\\<^sub>12 ?w\\<^sub>22 ?u2\n 2. \\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n       \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                   reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l'\n                    (w @ w') (w\\<^sub>1 @ w\\<^sub>1')\n                    (w\\<^sub>2 @ w\\<^sub>2') u' \\<Longrightarrow>\n                   thesis;\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (?w2 @ w')\n         (?w\\<^sub>12 @ w\\<^sub>1') (?w\\<^sub>22 @ w\\<^sub>2') u'\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"reduced_run q (stake k v) ([v !! k] @- sdrop (Suc k) v) l w w\\<^sub>1 w\\<^sub>2 u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reduced_run q (stake k v) ([v !! k] @- sdrop (Suc k) v) l w w\\<^sub>1\n     w\\<^sub>2 u", "using 2"], ["proof (prove)\nusing this:\n  reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. reduced_run q (stake k v) ([v !! k] @- sdrop (Suc k) v) l w w\\<^sub>1\n     w\\<^sub>2 u", "by (metis sdrop_simps shift.simps stream.collapse)"], ["proof (state)\nthis:\n  reduced_run q (stake k v) ([v !! k] @- sdrop (Suc k) v) l w w\\<^sub>1\n   w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. \\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n       \\<lbrakk>\\<And>l' w' w\\<^sub>1' w\\<^sub>2' u'.\n                   reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l'\n                    (w @ w') (w\\<^sub>1 @ w\\<^sub>1')\n                    (w\\<^sub>2 @ w\\<^sub>2') u' \\<Longrightarrow>\n                   thesis;\n        reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n         (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2') u'\\<rbrakk>\n       \\<Longrightarrow> thesis", "qed"], ["proof (state)\nthis:\n  reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n   (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2') u'\n\ngoal (4 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>u' v'.\n                            P (Suc k) u' v' \\<and>\n                            u \\<le> u' \\<and> v \\<le> v'\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 3. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 4. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"\\<exists> w' w\\<^sub>1'. P (Suc k) w' w\\<^sub>1' \\<and> w \\<le> w' \\<and> w\\<^sub>1 \\<le> w\\<^sub>1'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>w' w\\<^sub>1'.\n       P (Suc k) w' w\\<^sub>1' \\<and>\n       w \\<le> w' \\<and> w\\<^sub>1 \\<le> w\\<^sub>1'", "unfolding P_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>w' w\\<^sub>1'.\n       (\\<exists>l w\\<^sub>2.\n           Ex (reduced_run q (stake (Suc k) v) (sdrop (Suc k) v) l w'\n                w\\<^sub>1' w\\<^sub>2)) \\<and>\n       w \\<le> w' \\<and> w\\<^sub>1 \\<le> w\\<^sub>1'", "using 3"], ["proof (prove)\nusing this:\n  reduced_run q (stake k v @ [v !! k]) (sdrop (Suc k) v) l' (w @ w')\n   (w\\<^sub>1 @ w\\<^sub>1') (w\\<^sub>2 @ w\\<^sub>2') u'\n\ngoal (1 subgoal):\n 1. \\<exists>w' w\\<^sub>1'.\n       (\\<exists>l w\\<^sub>2.\n           Ex (reduced_run q (stake (Suc k) v) (sdrop (Suc k) v) l w'\n                w\\<^sub>1' w\\<^sub>2)) \\<and>\n       w \\<le> w' \\<and> w\\<^sub>1 \\<le> w\\<^sub>1'", "by (metis prefix_fin_append stake_Suc)"], ["proof (state)\nthis:\n  \\<exists>w' w\\<^sub>1'.\n     P (Suc k) w' w\\<^sub>1' \\<and>\n     w \\<le> w' \\<and> w\\<^sub>1 \\<le> w\\<^sub>1'\n\ngoal (3 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length u\n 2. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 3. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"k \\<le> length w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> length w", "using reduced_run_length 2"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  length ?v\\<^sub>1 \\<le> length ?w\n  reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. k \\<le> length w", "by force"], ["proof (state)\nthis:\n  k \\<le> length w\n\ngoal (2 subgoals):\n 1. \\<And>k u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        P k u v\\<rbrakk>\n       \\<Longrightarrow> k \\<le> length v\n 2. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "show \"k \\<le> length w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> length w\\<^sub>1", "using reduced_run_length_1 2"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  length ?v\\<^sub>1 \\<le> length ?w\\<^sub>1\n  reduced_run q (stake k v) (sdrop k v) l w w\\<^sub>1 w\\<^sub>2 u\n\ngoal (1 subgoal):\n 1. k \\<le> length w\\<^sub>1", "by force"], ["proof (state)\nthis:\n  k \\<le> length w\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>\\<And>w w\\<^sub>1.\n                   \\<lbrakk>\\<And>k. P k (w k) (w\\<^sub>1 k); chain w;\n                    chain w\\<^sub>1\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<And>k. P k (u k) (v k); chain u; chain v\\<rbrakk>\n       \\<Longrightarrow> thesis", "qed rule"], ["proof (state)\nthis:\n  P ?k (w ?k) (w\\<^sub>1 ?k)\n  chain w\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. (\\<And>w u.\n        \\<lbrakk>R.run w q; v =\\<^sub>I u; u \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream u) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain l w\\<^sub>2 u where 2:\n        \"\\<And> k. reduced_run q (stake k v) (sdrop k v) (l k) (w k) (w\\<^sub>1 k) (w\\<^sub>2 k) (u k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>l w\\<^sub>2 u.\n        (\\<And>k.\n            reduced_run q (stake k v) (sdrop k v) (l k) (w k) (w\\<^sub>1 k)\n             (w\\<^sub>2 k) (u k)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using 1(1)"], ["proof (prove)\nusing this:\n  P ?k (w ?k) (w\\<^sub>1 ?k)\n\ngoal (1 subgoal):\n 1. (\\<And>l w\\<^sub>2 u.\n        (\\<And>k.\n            reduced_run q (stake k v) (sdrop k v) (l k) (w k) (w\\<^sub>1 k)\n             (w\\<^sub>2 k) (u k)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding P_def"], ["proof (prove)\nusing this:\n  \\<exists>l w\\<^sub>2.\n     Ex (reduced_run q (stake ?k v) (sdrop ?k v) l (w ?k) (w\\<^sub>1 ?k)\n          w\\<^sub>2)\n\ngoal (1 subgoal):\n 1. (\\<And>l w\\<^sub>2 u.\n        (\\<And>k.\n            reduced_run q (stake k v) (sdrop k v) (l k) (w k) (w\\<^sub>1 k)\n             (w\\<^sub>2 k) (u k)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  reduced_run q (stake ?k v) (sdrop ?k v) (l ?k) (w ?k) (w\\<^sub>1 ?k)\n   (w\\<^sub>2 ?k) (u ?k)\n\ngoal (1 subgoal):\n 1. (\\<And>w u.\n        \\<lbrakk>R.run w q; v =\\<^sub>I u; u \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream u) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. R.run ?w q\n 2. v =\\<^sub>I ?u\n 3. ?u \\<preceq>\\<^sub>I ?w\n 4. lproject visible (llist_of_stream ?u) =\n    lproject visible (llist_of_stream ?w)", "show \"R.run (Word_Prefixes.limit w) q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.run (Word_Prefixes.limit w) q", "using reduced_run_words_fin 1(2) 2"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  R.path ?w ?q\n  chain w\n  reduced_run q (stake ?k v) (sdrop ?k v) (l ?k) (w ?k) (w\\<^sub>1 ?k)\n   (w\\<^sub>2 ?k) (u ?k)\n\ngoal (1 subgoal):\n 1. R.run (Word_Prefixes.limit w) q", "by blast"], ["proof (state)\nthis:\n  R.run (Word_Prefixes.limit w) q\n\ngoal (3 subgoals):\n 1. v =\\<^sub>I ?u\n 2. ?u \\<preceq>\\<^sub>I Word_Prefixes.limit w\n 3. lproject visible (llist_of_stream ?u) =\n    lproject visible (llist_of_stream (Word_Prefixes.limit w))", "show \"v =\\<^sub>I Word_Prefixes.limit w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v =\\<^sub>I Word_Prefixes.limit w\\<^sub>1", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<preceq>\\<^sub>I Word_Prefixes.limit w\\<^sub>1\n 2. Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I v", "show \"v \\<preceq>\\<^sub>I Word_Prefixes.limit w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<preceq>\\<^sub>I Word_Prefixes.limit w\\<^sub>1", "proof (rule le_infI_chain_right')"], ["proof (state)\ngoal (2 subgoals):\n 1. chain w\\<^sub>1\n 2. \\<And>k. stake k v \\<preceq>\\<^sub>F w\\<^sub>1 (?l k)", "show \"chain w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. chain w\\<^sub>1", "using 1(3)"], ["proof (prove)\nusing this:\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. chain w\\<^sub>1", "by this"], ["proof (state)\nthis:\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>k. stake k v \\<preceq>\\<^sub>F w\\<^sub>1 (?l k)", "show \"\\<And> k. stake k v \\<preceq>\\<^sub>F w\\<^sub>1 k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k. stake k v \\<preceq>\\<^sub>F w\\<^sub>1 k", "using reduced_run_invar_1[OF 2]"], ["proof (prove)\nusing this:\n  stake ?k1 v @ l ?k1 =\\<^sub>F w\\<^sub>1 ?k1\n\ngoal (1 subgoal):\n 1. \\<And>k. stake k v \\<preceq>\\<^sub>F w\\<^sub>1 k", "by auto"], ["proof (state)\nthis:\n  stake ?k v \\<preceq>\\<^sub>F w\\<^sub>1 ?k\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<preceq>\\<^sub>I Word_Prefixes.limit w\\<^sub>1\n\ngoal (1 subgoal):\n 1. Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I v", "show \"Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I v", "proof (rule le_infI_chain_left)"], ["proof (state)\ngoal (2 subgoals):\n 1. chain w\\<^sub>1\n 2. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "show \"chain w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. chain w\\<^sub>1", "using 1(3)"], ["proof (prove)\nusing this:\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. chain w\\<^sub>1", "by this"], ["proof (state)\nthis:\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "have \"w\\<^sub>1 k =\\<^sub>F stake k v @ l k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 k =\\<^sub>F stake k v @ l k", "using reduced_run_invar_1 2"], ["proof (prove)\nusing this:\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  ?v\\<^sub>1 @ ?l =\\<^sub>F ?w\\<^sub>1\n  reduced_run q (stake ?k v) (sdrop ?k v) (l ?k) (w ?k) (w\\<^sub>1 ?k)\n   (w\\<^sub>2 ?k) (u ?k)\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 k =\\<^sub>F stake k v @ l k", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 k =\\<^sub>F stake k v @ l k\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 k =\\<^sub>F stake k v @ l k\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "have \"\\<dots> \\<le>\\<^sub>F\\<^sub>I stake k v @- l k @- u k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stake k v @ l k \\<le>\\<^sub>F\\<^sub>I stake k v @- l k @- u k", "by auto"], ["proof (state)\nthis:\n  stake k v @ l k \\<le>\\<^sub>F\\<^sub>I stake k v @- l k @- u k\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "also"], ["proof (state)\nthis:\n  stake k v @ l k \\<le>\\<^sub>F\\<^sub>I stake k v @- l k @- u k\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "have \"\\<dots> =\\<^sub>I stake k v @- sdrop k v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stake k v @- l k @- u k =\\<^sub>I stake k v @- sdrop k v", "using reduced_run_invar_2[OF 2]"], ["proof (prove)\nusing this:\n  sdrop ?k1 v =\\<^sub>I l ?k1 @- u ?k1\n\ngoal (1 subgoal):\n 1. stake k v @- l k @- u k =\\<^sub>I stake k v @- sdrop k v", "by blast"], ["proof (state)\nthis:\n  stake k v @- l k @- u k =\\<^sub>I stake k v @- sdrop k v\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "also"], ["proof (state)\nthis:\n  stake k v @- l k @- u k =\\<^sub>I stake k v @- sdrop k v\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "have \"\\<dots> = v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. stake k v @- sdrop k v = v", "by simp"], ["proof (state)\nthis:\n  stake k v @- sdrop k v = v\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "finally"], ["proof (chain)\npicking this:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "show \"w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v\""], ["proof (prove)\nusing this:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v", "by this"], ["proof (state)\nthis:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v =\\<^sub>I Word_Prefixes.limit w\\<^sub>1\n\ngoal (2 subgoals):\n 1. Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I Word_Prefixes.limit w\n 2. lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n    lproject visible (llist_of_stream (Word_Prefixes.limit w))", "show \"Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I Word_Prefixes.limit w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I Word_Prefixes.limit w", "proof (rule le_infI_chain_left)"], ["proof (state)\ngoal (2 subgoals):\n 1. chain w\\<^sub>1\n 2. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "show \"chain w\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. chain w\\<^sub>1", "using 1(3)"], ["proof (prove)\nusing this:\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. chain w\\<^sub>1", "by this"], ["proof (state)\nthis:\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "have \"w\\<^sub>1 k \\<preceq>\\<^sub>F w k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w\\<^sub>1 k \\<preceq>\\<^sub>F w k", "using reduced_run_decompose[OF 2]"], ["proof (prove)\nusing this:\n  w ?k1 =\\<^sub>F w\\<^sub>1 ?k1 @ w\\<^sub>2 ?k1\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 k \\<preceq>\\<^sub>F w k", "by blast"], ["proof (state)\nthis:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F w k\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "also"], ["proof (state)\nthis:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F w k\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "have \"\\<dots> \\<le>\\<^sub>F\\<^sub>I Word_Prefixes.limit w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w k \\<le>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "using chain_prefix_limit 1(2)"], ["proof (prove)\nusing this:\n  chain ?w \\<Longrightarrow>\n  ?w ?k \\<le>\\<^sub>F\\<^sub>I Word_Prefixes.limit ?w\n  chain w\n\ngoal (1 subgoal):\n 1. w k \\<le>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "by this"], ["proof (state)\nthis:\n  w k \\<le>\\<^sub>F\\<^sub>I Word_Prefixes.limit w\n\ngoal (1 subgoal):\n 1. \\<And>k. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "finally"], ["proof (chain)\npicking this:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "show \"w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w\""], ["proof (prove)\nusing this:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w\n\ngoal (1 subgoal):\n 1. w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w", "by this"], ["proof (state)\nthis:\n  w\\<^sub>1 k \\<preceq>\\<^sub>F\\<^sub>I Word_Prefixes.limit w\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Word_Prefixes.limit w\\<^sub>1 \\<preceq>\\<^sub>I Word_Prefixes.limit w\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n    lproject visible (llist_of_stream (Word_Prefixes.limit w))", "show \"lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n          lproject visible (llist_of_stream (Word_Prefixes.limit w))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n    lproject visible (llist_of_stream (Word_Prefixes.limit w))", "using lproject_eq_limit_chain reduced_run_project 1"], ["proof (prove)\nusing this:\n  \\<lbrakk>chain ?u; chain ?v;\n   \\<And>k. project ?A (?u k) = project ?A (?v k)\\<rbrakk>\n  \\<Longrightarrow> lproject ?A (llist_of_stream (Word_Prefixes.limit ?u)) =\n                    lproject ?A (llist_of_stream (Word_Prefixes.limit ?v))\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  project visible ?w\\<^sub>1 = project visible ?w\n  P ?k (w ?k) (w\\<^sub>1 ?k)\n  chain w\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n    lproject visible (llist_of_stream (Word_Prefixes.limit w))", "unfolding P_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>chain ?u; chain ?v;\n   \\<And>k. project ?A (?u k) = project ?A (?v k)\\<rbrakk>\n  \\<Longrightarrow> lproject ?A (llist_of_stream (Word_Prefixes.limit ?u)) =\n                    lproject ?A (llist_of_stream (Word_Prefixes.limit ?v))\n  reduced_run ?q ?v\\<^sub>1 ?v\\<^sub>2 ?l ?w ?w\\<^sub>1 ?w\\<^sub>2\n   ?u \\<Longrightarrow>\n  project visible ?w\\<^sub>1 = project visible ?w\n  \\<exists>l w\\<^sub>2.\n     Ex (reduced_run q (stake ?k v) (sdrop ?k v) l (w ?k) (w\\<^sub>1 ?k)\n          w\\<^sub>2)\n  chain w\n  chain w\\<^sub>1\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n    lproject visible (llist_of_stream (Word_Prefixes.limit w))", "by metis"], ["proof (state)\nthis:\n  lproject visible (llist_of_stream (Word_Prefixes.limit w\\<^sub>1)) =\n  lproject visible (llist_of_stream (Word_Prefixes.limit w))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "(* theorem 3.12 in [1] *)"], ["", "lemma reduction_equivalent:\n      assumes \"q \\<in> nodes\" \"run u q\"\n      obtains v\n      where \"R.run v q\" \"snth (smap int (q ## trace u q)) \\<approx> snth (smap int (q ## trace v q))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>R.run v q;\n         (!!) (smap int (q ## trace u q)) \\<approx>\n         (!!) (smap int (q ## trace v q))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>R.run v q;\n         (!!) (smap int (q ## trace u q)) \\<approx>\n         (!!) (smap int (q ## trace v q))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain v w where 1: \"R.run w q\" \"u =\\<^sub>I v\" \"v \\<preceq>\\<^sub>I w\"\n        \"lproject visible (llist_of_stream v) = lproject visible (llist_of_stream w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>w v.\n        \\<lbrakk>R.run w q; u =\\<^sub>I v; v \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream v) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using reduction_word assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; run ?v ?q;\n   \\<And>u w.\n      \\<lbrakk>R.run w ?q; ?v =\\<^sub>I u; u \\<preceq>\\<^sub>I w;\n       lproject visible (llist_of_stream u) =\n       lproject visible (llist_of_stream w)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  q \\<in> nodes\n  run u q\n\ngoal (1 subgoal):\n 1. (\\<And>w v.\n        \\<lbrakk>R.run w q; u =\\<^sub>I v; v \\<preceq>\\<^sub>I w;\n         lproject visible (llist_of_stream v) =\n         lproject visible (llist_of_stream w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by this"], ["proof (state)\nthis:\n  R.run w q\n  u =\\<^sub>I v\n  v \\<preceq>\\<^sub>I w\n  lproject visible (llist_of_stream v) =\n  lproject visible (llist_of_stream w)\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>R.run v q;\n         (!!) (smap int (q ## trace u q)) \\<approx>\n         (!!) (smap int (q ## trace v q))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. R.run ?v q\n 2. (!!) (smap int (q ## trace u q)) \\<approx>\n    (!!) (smap int (q ## trace ?v q))", "show \"R.run w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.run w q", "using 1(1)"], ["proof (prove)\nusing this:\n  R.run w q\n\ngoal (1 subgoal):\n 1. R.run w q", "by this"], ["proof (state)\nthis:\n  R.run w q\n\ngoal (1 subgoal):\n 1. (!!) (smap int (q ## trace u q)) \\<approx>\n    (!!) (smap int (q ## trace w q))", "show \"snth (smap int (q ## trace u q)) \\<approx> snth (smap int (q ## trace w q))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (!!) (smap int (q ## trace u q)) \\<approx>\n    (!!) (smap int (q ## trace w q))", "proof (rule execute_inf_visible)"], ["proof (state)\ngoal (5 subgoals):\n 1. run u q\n 2. run w q\n 3. u \\<preceq>\\<^sub>I ?w\n 4. w \\<preceq>\\<^sub>I ?w\n 5. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "show \"run u q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run u q", "using assms(2)"], ["proof (prove)\nusing this:\n  run u q\n\ngoal (1 subgoal):\n 1. run u q", "by this"], ["proof (state)\nthis:\n  run u q\n\ngoal (4 subgoals):\n 1. run w q\n 2. u \\<preceq>\\<^sub>I ?w\n 3. w \\<preceq>\\<^sub>I ?w\n 4. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "show \"run w q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. run w q", "using reduction_words_inf assms(1) 1(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; R.run ?w ?q\\<rbrakk> \\<Longrightarrow> run ?w ?q\n  q \\<in> nodes\n  R.run w q\n\ngoal (1 subgoal):\n 1. run w q", "by auto"], ["proof (state)\nthis:\n  run w q\n\ngoal (3 subgoals):\n 1. u \\<preceq>\\<^sub>I ?w\n 2. w \\<preceq>\\<^sub>I ?w\n 3. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "have \"u =\\<^sub>I v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u =\\<^sub>I v", "using 1(2)"], ["proof (prove)\nusing this:\n  u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. u =\\<^sub>I v", "by this"], ["proof (state)\nthis:\n  u =\\<^sub>I v\n\ngoal (3 subgoals):\n 1. u \\<preceq>\\<^sub>I ?w\n 2. w \\<preceq>\\<^sub>I ?w\n 3. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "also"], ["proof (state)\nthis:\n  u =\\<^sub>I v\n\ngoal (3 subgoals):\n 1. u \\<preceq>\\<^sub>I ?w\n 2. w \\<preceq>\\<^sub>I ?w\n 3. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "have \"\\<dots> \\<preceq>\\<^sub>I w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<preceq>\\<^sub>I w", "using 1(3)"], ["proof (prove)\nusing this:\n  v \\<preceq>\\<^sub>I w\n\ngoal (1 subgoal):\n 1. v \\<preceq>\\<^sub>I w", "by this"], ["proof (state)\nthis:\n  v \\<preceq>\\<^sub>I w\n\ngoal (3 subgoals):\n 1. u \\<preceq>\\<^sub>I ?w\n 2. w \\<preceq>\\<^sub>I ?w\n 3. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "finally"], ["proof (chain)\npicking this:\n  u \\<preceq>\\<^sub>I w", "show \"u \\<preceq>\\<^sub>I w\""], ["proof (prove)\nusing this:\n  u \\<preceq>\\<^sub>I w\n\ngoal (1 subgoal):\n 1. u \\<preceq>\\<^sub>I w", "by this"], ["proof (state)\nthis:\n  u \\<preceq>\\<^sub>I w\n\ngoal (2 subgoals):\n 1. w \\<preceq>\\<^sub>I w\n 2. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "show \"w \\<preceq>\\<^sub>I w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<preceq>\\<^sub>I w", "by simp"], ["proof (state)\nthis:\n  w \\<preceq>\\<^sub>I w\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "have \"lproject visible (llist_of_stream u) = lproject visible (llist_of_stream v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream v)", "using eq_inf_lproject_visible 1(2)"], ["proof (prove)\nusing this:\n  ?u =\\<^sub>I ?v \\<Longrightarrow>\n  lproject visible (llist_of_stream ?u) =\n  lproject visible (llist_of_stream ?v)\n  u =\\<^sub>I v\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream v)", "by this"], ["proof (state)\nthis:\n  lproject visible (llist_of_stream u) =\n  lproject visible (llist_of_stream v)\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "also"], ["proof (state)\nthis:\n  lproject visible (llist_of_stream u) =\n  lproject visible (llist_of_stream v)\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "have \"\\<dots> = lproject visible (llist_of_stream w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream v) =\n    lproject visible (llist_of_stream w)", "using 1(4)"], ["proof (prove)\nusing this:\n  lproject visible (llist_of_stream v) =\n  lproject visible (llist_of_stream w)\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream v) =\n    lproject visible (llist_of_stream w)", "by this"], ["proof (state)\nthis:\n  lproject visible (llist_of_stream v) =\n  lproject visible (llist_of_stream w)\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "finally"], ["proof (chain)\npicking this:\n  lproject visible (llist_of_stream u) =\n  lproject visible (llist_of_stream w)", "show \"lproject visible (llist_of_stream u) = lproject visible (llist_of_stream w)\""], ["proof (prove)\nusing this:\n  lproject visible (llist_of_stream u) =\n  lproject visible (llist_of_stream w)\n\ngoal (1 subgoal):\n 1. lproject visible (llist_of_stream u) =\n    lproject visible (llist_of_stream w)", "by this"], ["proof (state)\nthis:\n  lproject visible (llist_of_stream u) =\n  lproject visible (llist_of_stream w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (!!) (smap int (q ## trace u q)) \\<approx>\n  (!!) (smap int (q ## trace w q))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma reduction_language_subset: \"R.language \\<subseteq> S.language\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.language \\<subseteq> language", "unfolding S.language_def R.language_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {smap int (p ## trace w p) |p w. init p \\<and> R.run w p}\n    \\<subseteq> {smap int (p ## trace w p) |p w. init p \\<and> run w p}", "using reduction_words_inf"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; R.run ?w ?q\\<rbrakk> \\<Longrightarrow> run ?w ?q\n\ngoal (1 subgoal):\n 1. {smap int (p ## trace w p) |p w. init p \\<and> R.run w p}\n    \\<subseteq> {smap int (p ## trace w p) |p w. init p \\<and> run w p}", "by blast"], ["", "lemma reduction_language_stuttering:\n      assumes \"u \\<in> S.language\"\n      obtains v\n      where \"v \\<in> R.language\" \"snth u \\<approx> snth v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R.language; (!!) u \\<approx> (!!) v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R.language; (!!) u \\<approx> (!!) v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain q v where 1: \"u = smap int (q ## trace v q)\" \"init q\" \"S.run v q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>q v.\n        \\<lbrakk>u = smap int (q ## trace v q); init q; run v q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  u \\<in> language\n\ngoal (1 subgoal):\n 1. (\\<And>q v.\n        \\<lbrakk>u = smap int (q ## trace v q); init q; run v q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by rule"], ["proof (state)\nthis:\n  u = smap int (q ## trace v q)\n  init q\n  run v q\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R.language; (!!) u \\<approx> (!!) v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain v' where 2: \"R.run v' q\" \"snth (smap int (q ## trace v q)) \\<approx> snth (smap int (q ## trace v' q))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>R.run v' q;\n         (!!) (smap int (q ## trace v q)) \\<approx>\n         (!!) (smap int (q ## trace v' q))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using reduction_equivalent 1(2, 3)"], ["proof (prove)\nusing this:\n  \\<lbrakk>?q \\<in> nodes; run ?u ?q;\n   \\<And>v.\n      \\<lbrakk>R.run v ?q;\n       (!!) (smap int (?q ## trace ?u ?q)) \\<approx>\n       (!!) (smap int (?q ## trace v ?q))\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  init q\n  run v q\n\ngoal (1 subgoal):\n 1. (\\<And>v'.\n        \\<lbrakk>R.run v' q;\n         (!!) (smap int (q ## trace v q)) \\<approx>\n         (!!) (smap int (q ## trace v' q))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  R.run v' q\n  (!!) (smap int (q ## trace v q)) \\<approx>\n  (!!) (smap int (q ## trace v' q))\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> R.language; (!!) u \\<approx> (!!) v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof (intro that R.languageI)"], ["proof (state)\ngoal (4 subgoals):\n 1. ?v = smap int (?p1 ## trace ?v1 ?p1)\n 2. init ?p1\n 3. R.run ?v1 ?p1\n 4. (!!) u \\<approx> (!!) ?v", "show \"smap int (q ## trace v' q) = smap int (q ## trace v' q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. smap int (q ## trace v' q) = smap int (q ## trace v' q)", "by rule"], ["proof (state)\nthis:\n  smap int (q ## trace v' q) = smap int (q ## trace v' q)\n\ngoal (3 subgoals):\n 1. init q\n 2. R.run v' q\n 3. (!!) u \\<approx> (!!) (smap int (q ## trace v' q))", "show \"init q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. init q", "using 1(2)"], ["proof (prove)\nusing this:\n  init q\n\ngoal (1 subgoal):\n 1. init q", "by this"], ["proof (state)\nthis:\n  init q\n\ngoal (2 subgoals):\n 1. R.run v' q\n 2. (!!) u \\<approx> (!!) (smap int (q ## trace v' q))", "show \"R.run v' q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R.run v' q", "using 2(1)"], ["proof (prove)\nusing this:\n  R.run v' q\n\ngoal (1 subgoal):\n 1. R.run v' q", "by this"], ["proof (state)\nthis:\n  R.run v' q\n\ngoal (1 subgoal):\n 1. (!!) u \\<approx> (!!) (smap int (q ## trace v' q))", "show \"snth u \\<approx> snth (smap int (q ## trace v' q))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (!!) u \\<approx> (!!) (smap int (q ## trace v' q))", "unfolding 1(1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (!!) (smap int (q ## trace v q)) \\<approx>\n    (!!) (smap int (q ## trace v' q))", "using 2(2)"], ["proof (prove)\nusing this:\n  (!!) (smap int (q ## trace v q)) \\<approx>\n  (!!) (smap int (q ## trace v' q))\n\ngoal (1 subgoal):\n 1. (!!) (smap int (q ## trace v q)) \\<approx>\n    (!!) (smap int (q ## trace v' q))", "by this"], ["proof (state)\nthis:\n  (!!) u \\<approx> (!!) (smap int (q ## trace v' q))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}