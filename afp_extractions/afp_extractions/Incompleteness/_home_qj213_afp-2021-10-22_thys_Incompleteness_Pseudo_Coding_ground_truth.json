{"file_name": "/home/qj213/afp-2021-10-22/thys/Incompleteness/Pseudo_Coding.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Incompleteness", "problem_names": ["lemma Collect_disj_Un: \"{f i |i. P i \\<or> Q i} = {f i |i. P i} \\<union> {f i |i. Q i}\"", "lemma NEQ_quot_tm: \"i\\<noteq>j \\<Longrightarrow> {} \\<turnstile> \\<guillemotleft>Var i\\<guillemotright> NEQ \\<guillemotleft>Var j\\<guillemotright>\"", "lemma EQ_quot_tm_Fls: \"i\\<noteq>j \\<Longrightarrow> insert (\\<guillemotleft>Var i\\<guillemotright> EQ \\<guillemotleft>Var j\\<guillemotright>) H \\<turnstile> Fls\"", "lemma perm_commute: \"a \\<sharp> p \\<Longrightarrow> a' \\<sharp> p \\<Longrightarrow> (a \\<rightleftharpoons> a') + p = p + (a \\<rightleftharpoons> a')\"", "lemma perm_self_inverseI: \"\\<lbrakk>-p = q; a \\<sharp> p; a' \\<sharp> p\\<rbrakk> \\<Longrightarrow> - ((a \\<rightleftharpoons> a') + p) = (a \\<rightleftharpoons> a') + q\"", "lemma fresh_image:\n  fixes f :: \"'a \\<Rightarrow> 'b::fs\"  shows \"finite A \\<Longrightarrow> i \\<sharp> f ` A \\<longleftrightarrow> (\\<forall>x\\<in>A. i \\<sharp> f x)\"", "lemma atom_in_atom_image [simp]: \"atom j \\<in> atom ` V \\<longleftrightarrow> j \\<in> V\"", "lemma fresh_star_empty [simp]: \"{} \\<sharp>* bs\"", "lemma fresh_star_finite_insert:\n  fixes S :: \"('a::fs) set\"  shows \"finite S \\<Longrightarrow> a \\<sharp>* insert x S \\<longleftrightarrow> a \\<sharp>* x \\<and> a \\<sharp>* S\"", "lemma fresh_finite_Diff_single [simp]:\n  fixes V :: \"name set\"   shows \"finite V \\<Longrightarrow> a \\<sharp> (V - {j}) \\<longleftrightarrow> (a \\<sharp> j \\<longrightarrow> a \\<sharp> V)\"", "lemma fresh_image_atom [simp]: \"finite A \\<Longrightarrow> i \\<sharp> atom ` A \\<longleftrightarrow> i \\<sharp> A\"", "lemma atom_fresh_star_atom_set_conv: \"\\<lbrakk>atom i \\<sharp> bs; finite bs\\<rbrakk> \\<Longrightarrow> bs \\<sharp>* i\"", "lemma notin_V:\n  assumes p: \"atom i \\<sharp> p\" and V: \"finite V\" \"atom ` (p \\<bullet> V) \\<sharp>* V\" \n  shows \"i \\<notin> V\" \"i \\<notin> p \\<bullet> V\"", "lemma ssubst_empty [simp]: \"ssubst t {} F = t\"", "lemma F_unfold: \"F i = (if i \\<in> Vs then Var (p \\<bullet> i) else Var i)\"", "lemma finite_V [simp]: \"V \\<subseteq> Vs \\<Longrightarrow> finite V\"", "lemma perm_exits_Vs: \"i \\<in> Vs \\<Longrightarrow> (p \\<bullet> i) \\<notin> Vs\"", "lemma atom_fresh_perm: \"\\<lbrakk>x \\<in> Vs; y \\<in> Vs\\<rbrakk> \\<Longrightarrow> atom x \\<sharp> p \\<bullet> y\"", "lemma fresh_pj: \"\\<lbrakk>a \\<sharp> p; j \\<in> Vs\\<rbrakk> \\<Longrightarrow> a \\<sharp> p \\<bullet> j\"", "lemma fresh_Vs: \"a \\<sharp> p \\<Longrightarrow> a \\<sharp> Vs\"", "lemma fresh_pVs: \"a \\<sharp> p \\<Longrightarrow> a \\<sharp> p \\<bullet> Vs\"", "lemma assumes \"V \\<subseteq> Vs\" \"a \\<sharp> p\"\n      shows fresh_pV [simp]: \"a \\<sharp> p \\<bullet> V\" and fresh_V [simp]: \"a \\<sharp> V\"", "lemma qp_insert:\n  fixes i::name and i'::name\n  assumes \"atom i \\<sharp> p\" \"atom i' \\<sharp> (i,p)\"\n    shows  \"quote_perm ((atom i \\<rightleftharpoons> atom i') + p) (insert i Vs)\"", "lemma subst_F_left_commute: \"subst x (F x) (subst y (F y) t) = subst y (F y) (subst x (F x) t)\"", "lemma \n  assumes \"finite V\" \"i \\<notin> V\" \n  shows ssubst_insert:  \"ssubst t (insert i V) F = subst i (F i) (ssubst t V F)\"  (is ?thesis1)\n    and ssubst_insert2: \"ssubst t (insert i V) F = ssubst (subst i (F i) t) V F\"  (is ?thesis2)", "lemma ssubst_insert_if:\n  \"finite V \\<Longrightarrow> \n     ssubst t (insert i V) F = (if i \\<in> V then ssubst t V F \n                                         else subst i (F i) (ssubst t V F))\"", "lemma ssubst_single [simp]: \"ssubst t {i} F = subst i (F i) t\"", "lemma ssubst_Var_if [simp]:\n  assumes \"finite V\"  \n    shows \"ssubst (Var i) V F = (if i \\<in> V then F i else Var i)\"", "lemma ssubst_Zero [simp]: \"finite V \\<Longrightarrow> ssubst Zero V F = Zero\"", "lemma ssubst_Eats [simp]: \"finite V \\<Longrightarrow> ssubst (Eats t u) V F = Eats (ssubst t V F) (ssubst u V F)\"", "lemma ssubst_SUCC [simp]: \"finite V \\<Longrightarrow> ssubst (SUCC t) V F = SUCC (ssubst t V F)\"", "lemma ssubst_ORD_OF [simp]: \"finite V \\<Longrightarrow> ssubst (ORD_OF n) V F = ORD_OF n\"", "lemma ssubst_HPair [simp]: \n  \"finite V \\<Longrightarrow> ssubst (HPair t u) V F = HPair (ssubst t V F) (ssubst u V F)\"", "lemma ssubst_HTuple [simp]: \"finite V \\<Longrightarrow> ssubst (HTuple n) V F = (HTuple n)\"", "lemma ssubst_Subset:\n  assumes \"finite V\" shows \"ssubst \\<lfloor>t SUBS u\\<rfloor>V V F = Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F) (ssubst \\<lfloor>u\\<rfloor>V V F)\"", "lemma fresh_ssubst: \n  assumes \"finite V\" \"a \\<sharp> p \\<bullet> V\" \"a \\<sharp> t\"\n    shows \"a \\<sharp> ssubst t V F\"", "lemma fresh_ssubst': \n  assumes \"finite V\" \"atom i \\<sharp> t\" \"atom (p \\<bullet> i) \\<sharp> t\"\n    shows \"atom i \\<sharp> ssubst t V F\"", "lemma ssubst_vquot_Ex:\n  \"\\<lbrakk>finite V; atom i \\<sharp> p \\<bullet> V\\<rbrakk> \n   \\<Longrightarrow> ssubst \\<lfloor>Ex i A\\<rfloor>(insert i V) (insert i V) F = ssubst \\<lfloor>Ex i A\\<rfloor>V V F\"", "lemma ground_ssubst_eq: \"\\<lbrakk>finite V; supp t = {}\\<rbrakk> \\<Longrightarrow> ssubst t V F = t\"", "lemma ssubst_quot_tm [simp]:\n  fixes t::tm shows \"finite V \\<Longrightarrow> ssubst \\<guillemotleft>t\\<guillemotright> V F = \\<guillemotleft>t\\<guillemotright>\"", "lemma ssubst_quot_fm [simp]:\n  fixes A::fm shows \"finite V \\<Longrightarrow> ssubst \\<guillemotleft>A\\<guillemotright> V F = \\<guillemotleft>A\\<guillemotright>\"", "lemma atom_in_p_Vs: \"\\<lbrakk>i \\<in> p \\<bullet> V; V \\<subseteq> Vs\\<rbrakk> \\<Longrightarrow> i \\<in> p \\<bullet> Vs\"", "lemma SubstTermP_vquot_dbtm:\n  assumes w: \"w \\<in> Vs - V\" and V: \"V \\<subseteq> Vs\" \"V' = p \\<bullet> V\"\n      and s: \"supp dbtm \\<subseteq> atom ` Vs\"\n  shows\n  \"insert (ConstP (F w)) {ConstP (F i) | i. i \\<in> V}\n   \\<turnstile> SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w) \n                (ssubst (vquot_dbtm V dbtm) V F)\n                (subst w (F w) (ssubst (vquot_dbtm (insert w V) dbtm) V F))\"", "lemma SubstFormP_vquot_dbfm:\n  assumes w: \"w \\<in> Vs - V\" and V: \"V \\<subseteq> Vs\" \"V' = p \\<bullet> V\"\n      and s: \"supp dbfm \\<subseteq> atom ` Vs\"\n  shows\n  \"insert (ConstP (F w)) {ConstP (F i) | i. i \\<in> V}\n   \\<turnstile> SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                (ssubst (vquot_dbfm V dbfm) V F) \n                (subst w (F w) (ssubst (vquot_dbfm (insert w V) dbfm) V F))\"", "lemma ssubst_SubstFormP:\n  fixes A::fm\n  assumes w: \"w \\<in> Vs - V\" and V: \"V \\<subseteq> Vs\" \"V' = p \\<bullet> V\"\n      and s: \"supp A \\<subseteq> atom ` Vs\"\n  shows\n  \"insert (ConstP (F w)) {ConstP (F i) | i. i \\<in> V}\n   \\<turnstile> SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w) \n                (ssubst \\<lfloor>A\\<rfloor>V V F) \n                (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)\"", "theorem PfP_implies_PfP_ssubst:\n  fixes \\<beta>::fm\n  assumes \\<beta>: \"{} \\<turnstile> PfP \\<guillemotleft>\\<beta>\\<guillemotright>\"\n      and V: \"V \\<subseteq> Vs\"\n      and s: \"supp \\<beta> \\<subseteq> atom ` Vs\"\n    shows    \"{ConstP (F i) | i. i \\<in> V} \\<turnstile> PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)\""], "translations": [["", "lemma Collect_disj_Un: \"{f i |i. P i \\<or> Q i} = {f i |i. P i} \\<union> {f i |i. Q i}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f i |i. P i \\<or> Q i} = {f i |i. P i} \\<union> {f i |i. Q i}", "by auto"], ["", "abbreviation Q_Subset :: \"tm \\<Rightarrow> tm \\<Rightarrow> tm\"\n  where \"Q_Subset t u \\<equiv> (Q_All (Q_Imp (Q_Mem (Q_Ind Zero) t) (Q_Mem (Q_Ind Zero) u)))\""], ["", "lemma NEQ_quot_tm: \"i\\<noteq>j \\<Longrightarrow> {} \\<turnstile> \\<guillemotleft>Var i\\<guillemotright> NEQ \\<guillemotleft>Var j\\<guillemotright>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    {} \\<turnstile>\n    \\<guillemotleft>Var i\\<guillemotright> NEQ\n    \\<guillemotleft>Var j\\<guillemotright>", "by (auto intro: Sigma_fm_imp_thm [OF OrdNotEqP_sf] \n           simp: ground_fm_aux_def supp_conv_fresh quot_tm_def)"], ["", "lemma EQ_quot_tm_Fls: \"i\\<noteq>j \\<Longrightarrow> insert (\\<guillemotleft>Var i\\<guillemotright> EQ \\<guillemotleft>Var j\\<guillemotright>) H \\<turnstile> Fls\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    insert\n     (\\<guillemotleft>Var i\\<guillemotright> EQ\n      \\<guillemotleft>Var j\\<guillemotright>)\n     H \\<turnstile>\n    Fls", "by (metis (full_types) NEQ_quot_tm Assume OrdNotEqP_E cut2 thin0)"], ["", "lemma perm_commute: \"a \\<sharp> p \\<Longrightarrow> a' \\<sharp> p \\<Longrightarrow> (a \\<rightleftharpoons> a') + p = p + (a \\<rightleftharpoons> a')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<sharp> p; a' \\<sharp> p\\<rbrakk>\n    \\<Longrightarrow> (a \\<rightleftharpoons> a') + p =\n                      p + (a \\<rightleftharpoons> a')", "by (rule plus_perm_eq) (simp add: supp_swap fresh_def)"], ["", "lemma perm_self_inverseI: \"\\<lbrakk>-p = q; a \\<sharp> p; a' \\<sharp> p\\<rbrakk> \\<Longrightarrow> - ((a \\<rightleftharpoons> a') + p) = (a \\<rightleftharpoons> a') + q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>- p = q; a \\<sharp> p; a' \\<sharp> p\\<rbrakk>\n    \\<Longrightarrow> - ((a \\<rightleftharpoons> a') + p) =\n                      (a \\<rightleftharpoons> a') + q", "by (simp_all add: perm_commute fresh_plus_perm minus_add)"], ["", "lemma fresh_image:\n  fixes f :: \"'a \\<Rightarrow> 'b::fs\"  shows \"finite A \\<Longrightarrow> i \\<sharp> f ` A \\<longleftrightarrow> (\\<forall>x\\<in>A. i \\<sharp> f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite A \\<Longrightarrow>\n    i \\<sharp> f ` A = (\\<forall>x\\<in>A. i \\<sharp> f x)", "by (induct rule: finite_induct) (auto simp: fresh_finite_insert)"], ["", "lemma atom_in_atom_image [simp]: \"atom j \\<in> atom ` V \\<longleftrightarrow> j \\<in> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (atom j \\<in> atom ` V) = (j \\<in> V)", "by auto"], ["", "lemma fresh_star_empty [simp]: \"{} \\<sharp>* bs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<sharp>* bs", "by (simp add: fresh_star_def)"], ["", "declare fresh_star_insert [simp]"], ["", "lemma fresh_star_finite_insert:\n  fixes S :: \"('a::fs) set\"  shows \"finite S \\<Longrightarrow> a \\<sharp>* insert x S \\<longleftrightarrow> a \\<sharp>* x \\<and> a \\<sharp>* S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite S \\<Longrightarrow>\n    a \\<sharp>* insert x S = (a \\<sharp>* x \\<and> a \\<sharp>* S)", "by (auto simp: fresh_star_def fresh_finite_insert)"], ["", "lemma fresh_finite_Diff_single [simp]:\n  fixes V :: \"name set\"   shows \"finite V \\<Longrightarrow> a \\<sharp> (V - {j}) \\<longleftrightarrow> (a \\<sharp> j \\<longrightarrow> a \\<sharp> V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow>\n    a \\<sharp> V - {j} = (a \\<sharp> j \\<longrightarrow> a \\<sharp> V)", "apply (auto simp: fresh_finite_insert)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>finite V; a \\<sharp> V - {j}; a \\<sharp> j\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> V\n 2. \\<lbrakk>finite V; \\<not> a \\<sharp> j\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> V - {j}\n 3. \\<lbrakk>finite V; a \\<sharp> V\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> V - {j}", "apply (metis finite_Diff fresh_finite_insert insert_Diff_single)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite V; \\<not> a \\<sharp> j\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> V - {j}\n 2. \\<lbrakk>finite V; a \\<sharp> V\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> V - {j}", "apply (metis Diff_iff finite_Diff fresh_atom fresh_atom_at_base fresh_finite_set_at_base insertI1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite V; a \\<sharp> V\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> V - {j}", "apply (metis Diff_idemp Diff_insert_absorb finite_Diff fresh_finite_insert insert_Diff_single insert_absorb)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma fresh_image_atom [simp]: \"finite A \\<Longrightarrow> i \\<sharp> atom ` A \\<longleftrightarrow> i \\<sharp> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite A \\<Longrightarrow> i \\<sharp> atom ` A = i \\<sharp> A", "by (induct rule: finite_induct) (auto simp: fresh_finite_insert)"], ["", "lemma atom_fresh_star_atom_set_conv: \"\\<lbrakk>atom i \\<sharp> bs; finite bs\\<rbrakk> \\<Longrightarrow> bs \\<sharp>* i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>atom i \\<sharp> bs; finite bs\\<rbrakk>\n    \\<Longrightarrow> bs \\<sharp>* i", "by (metis fresh_finite_atom_set fresh_ineq_at_base fresh_star_def)"], ["", "lemma notin_V:\n  assumes p: \"atom i \\<sharp> p\" and V: \"finite V\" \"atom ` (p \\<bullet> V) \\<sharp>* V\" \n  shows \"i \\<notin> V\" \"i \\<notin> p \\<bullet> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<notin> V &&& i \\<notin> p \\<bullet> V", "using V"], ["proof (prove)\nusing this:\n  finite V\n  atom ` (p \\<bullet> V) \\<sharp>* V\n\ngoal (1 subgoal):\n 1. i \\<notin> V &&& i \\<notin> p \\<bullet> V", "apply (auto simp: fresh_def fresh_star_def supp_finite_set_at_base)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>finite V; \\<forall>a\\<in>p \\<bullet> V. a \\<notin> V;\n     i \\<in> V\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>finite V; \\<forall>a\\<in>p \\<bullet> V. a \\<notin> V;\n     i \\<in> p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> False", "apply (metis p mem_permute_iff fresh_at_base_permI)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "section\\<open>Simultaneous Substitution\\<close>"], ["", "definition ssubst :: \"tm \\<Rightarrow> name set \\<Rightarrow> (name \\<Rightarrow> tm) \\<Rightarrow> tm\"\n  where \"ssubst t V F = Finite_Set.fold (\\<lambda>i. subst i (F i)) t V\""], ["", "definition make_F :: \"name set \\<Rightarrow> perm \\<Rightarrow> name \\<Rightarrow> tm\"\n  where \"make_F Vs p \\<equiv> \\<lambda>i. if i \\<in> Vs then Var (p \\<bullet> i) else Var i\""], ["", "lemma ssubst_empty [simp]: \"ssubst t {} F = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst t {} F = t", "by (simp add: ssubst_def)"], ["", "text\\<open>Renaming a finite set of variables. Based on the theorem \\<open>at_set_avoiding\\<close>\\<close>"], ["", "locale quote_perm =\n  fixes p :: perm and Vs :: \"name set\" and F :: \"name \\<Rightarrow> tm\"\n  assumes p: \"atom ` (p \\<bullet> Vs) \\<sharp>* Vs\" \n      and pinv: \"-p = p\"\n      and Vs:  \"finite Vs\" \n  defines \"F \\<equiv> make_F Vs p\"\nbegin"], ["", "lemma F_unfold: \"F i = (if i \\<in> Vs then Var (p \\<bullet> i) else Var i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F i = (if i \\<in> Vs then Var (p \\<bullet> i) else Var i)", "by (simp add: F_def make_F_def)"], ["", "lemma finite_V [simp]: \"V \\<subseteq> Vs \\<Longrightarrow> finite V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. V \\<subseteq> Vs \\<Longrightarrow> finite V", "by (metis Vs finite_subset)"], ["", "lemma perm_exits_Vs: \"i \\<in> Vs \\<Longrightarrow> (p \\<bullet> i) \\<notin> Vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i \\<in> Vs \\<Longrightarrow> p \\<bullet> i \\<notin> Vs", "by (metis Vs fresh_finite_set_at_base imageI fresh_star_def mem_permute_iff p)"], ["", "lemma atom_fresh_perm: \"\\<lbrakk>x \\<in> Vs; y \\<in> Vs\\<rbrakk> \\<Longrightarrow> atom x \\<sharp> p \\<bullet> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> Vs; y \\<in> Vs\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> p \\<bullet> y", "by (metis imageI Vs p fresh_finite_set_at_base fresh_star_def mem_permute_iff fresh_at_base(2))"], ["", "lemma fresh_pj: \"\\<lbrakk>a \\<sharp> p; j \\<in> Vs\\<rbrakk> \\<Longrightarrow> a \\<sharp> p \\<bullet> j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<sharp> p; j \\<in> Vs\\<rbrakk>\n    \\<Longrightarrow> a \\<sharp> p \\<bullet> j", "by (metis atom_fresh_perm fresh_at_base(2) fresh_perm fresh_permute_left pinv)"], ["", "lemma fresh_Vs: \"a \\<sharp> p \\<Longrightarrow> a \\<sharp> Vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<sharp> p \\<Longrightarrow> a \\<sharp> Vs", "by (metis Vs fresh_def fresh_perm fresh_permute_iff fresh_star_def p permute_finite supp_finite_set_at_base)"], ["", "lemma fresh_pVs: \"a \\<sharp> p \\<Longrightarrow> a \\<sharp> p \\<bullet> Vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<sharp> p \\<Longrightarrow> a \\<sharp> p \\<bullet> Vs", "by (metis fresh_Vs fresh_perm fresh_permute_left pinv)"], ["", "lemma assumes \"V \\<subseteq> Vs\" \"a \\<sharp> p\"\n      shows fresh_pV [simp]: \"a \\<sharp> p \\<bullet> V\" and fresh_V [simp]: \"a \\<sharp> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<sharp> p \\<bullet> V &&& a \\<sharp> V", "using fresh_pVs fresh_Vs assms"], ["proof (prove)\nusing this:\n  ?a \\<sharp> p \\<Longrightarrow> ?a \\<sharp> p \\<bullet> Vs\n  ?a \\<sharp> p \\<Longrightarrow> ?a \\<sharp> Vs\n  V \\<subseteq> Vs\n  a \\<sharp> p\n\ngoal (1 subgoal):\n 1. a \\<sharp> p \\<bullet> V &&& a \\<sharp> V", "apply (auto simp: fresh_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>a.\n                a \\<notin> supp p \\<Longrightarrow>\n                a \\<notin> supp (p \\<bullet> Vs);\n     \\<And>a. a \\<notin> supp p \\<Longrightarrow> a \\<notin> supp Vs;\n     V \\<subseteq> Vs; a \\<notin> supp p;\n     a \\<in> supp (p \\<bullet> V)\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>\\<And>a.\n                a \\<notin> supp p \\<Longrightarrow>\n                a \\<notin> supp (p \\<bullet> Vs);\n     \\<And>a. a \\<notin> supp p \\<Longrightarrow> a \\<notin> supp Vs;\n     V \\<subseteq> Vs; a \\<notin> supp p; a \\<in> supp V\\<rbrakk>\n    \\<Longrightarrow> False", "apply (metis (full_types) Vs finite_V permute_finite subsetD subset_Un_eq supp_of_finite_union union_eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>a.\n                a \\<notin> supp p \\<Longrightarrow>\n                a \\<notin> supp (p \\<bullet> Vs);\n     \\<And>a. a \\<notin> supp p \\<Longrightarrow> a \\<notin> supp Vs;\n     V \\<subseteq> Vs; a \\<notin> supp p; a \\<in> supp V\\<rbrakk>\n    \\<Longrightarrow> False", "by (metis Vs finite_V subsetD subset_Un_eq supp_of_finite_union)"], ["", "lemma qp_insert:\n  fixes i::name and i'::name\n  assumes \"atom i \\<sharp> p\" \"atom i' \\<sharp> (i,p)\"\n    shows  \"quote_perm ((atom i \\<rightleftharpoons> atom i') + p) (insert i Vs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. quote_perm ((atom i \\<rightleftharpoons> atom i') + p) (insert i Vs)", "using p pinv Vs assms"], ["proof (prove)\nusing this:\n  atom ` (p \\<bullet> Vs) \\<sharp>* Vs\n  - p = p\n  finite Vs\n  atom i \\<sharp> p\n  atom i' \\<sharp> (i, p)\n\ngoal (1 subgoal):\n 1. quote_perm ((atom i \\<rightleftharpoons> atom i') + p) (insert i Vs)", "by (auto simp: quote_perm_def fresh_at_base_permI atom_fresh_star_atom_set_conv swap_fresh_fresh \n                 fresh_star_finite_insert fresh_finite_insert perm_self_inverseI)"], ["", "lemma subst_F_left_commute: \"subst x (F x) (subst y (F y) t) = subst y (F y) (subst x (F x) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst x (F x) (subst y (F y) t) = subst y (F y) (subst x (F x) t)", "by (metis subst_tm_commute2 F_unfold subst_tm_id F_unfold atom_fresh_perm tm.fresh(2))"], ["", "lemma \n  assumes \"finite V\" \"i \\<notin> V\" \n  shows ssubst_insert:  \"ssubst t (insert i V) F = subst i (F i) (ssubst t V F)\"  (is ?thesis1)\n    and ssubst_insert2: \"ssubst t (insert i V) F = ssubst (subst i (F i) t) V F\"  (is ?thesis2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst t (insert i V) F = subst i (F i) (ssubst t V F) &&&\n    ssubst t (insert i V) F = ssubst (subst i (F i) t) V F", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. ssubst t (insert i V) F = subst i (F i) (ssubst t V F)\n 2. ssubst t (insert i V) F = ssubst (subst i (F i) t) V F", "interpret comp_fun_commute \"(\\<lambda>i. subst i (F i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. comp_fun_commute (\\<lambda>i. subst i (F i))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y x.\n       subst y (F y) \\<circ> subst x (F x) =\n       subst x (F x) \\<circ> subst y (F y)", "qed (simp add: subst_F_left_commute fun_eq_iff)"], ["proof (state)\ngoal (2 subgoals):\n 1. ssubst t (insert i V) F = subst i (F i) (ssubst t V F)\n 2. ssubst t (insert i V) F = ssubst (subst i (F i) t) V F", "show ?thesis1"], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst t (insert i V) F = subst i (F i) (ssubst t V F)", "using assms Vs"], ["proof (prove)\nusing this:\n  finite V\n  i \\<notin> V\n  finite Vs\n\ngoal (1 subgoal):\n 1. ssubst t (insert i V) F = subst i (F i) (ssubst t V F)", "by (simp add: ssubst_def)"], ["proof (state)\nthis:\n  ssubst t (insert i V) F = subst i (F i) (ssubst t V F)\n\ngoal (1 subgoal):\n 1. ssubst t (insert i V) F = ssubst (subst i (F i) t) V F", "show ?thesis2"], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst t (insert i V) F = ssubst (subst i (F i) t) V F", "using assms Vs"], ["proof (prove)\nusing this:\n  finite V\n  i \\<notin> V\n  finite Vs\n\ngoal (1 subgoal):\n 1. ssubst t (insert i V) F = ssubst (subst i (F i) t) V F", "by (simp add: ssubst_def fold_insert2 del: fold_insert)"], ["proof (state)\nthis:\n  ssubst t (insert i V) F = ssubst (subst i (F i) t) V F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ssubst_insert_if:\n  \"finite V \\<Longrightarrow> \n     ssubst t (insert i V) F = (if i \\<in> V then ssubst t V F \n                                         else subst i (F i) (ssubst t V F))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow>\n    ssubst t (insert i V) F =\n    (if i \\<in> V then ssubst t V F else subst i (F i) (ssubst t V F))", "by (simp add: ssubst_insert insert_absorb)"], ["", "lemma ssubst_single [simp]: \"ssubst t {i} F = subst i (F i) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst t {i} F = subst i (F i) t", "by (simp add: ssubst_insert)"], ["", "lemma ssubst_Var_if [simp]:\n  assumes \"finite V\"  \n    shows \"ssubst (Var i) V F = (if i \\<in> V then F i else Var i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst (Var i) V F = (if i \\<in> V then F i else Var i)", "using assms"], ["proof (prove)\nusing this:\n  finite V\n\ngoal (1 subgoal):\n 1. ssubst (Var i) V F = (if i \\<in> V then F i else Var i)", "apply (induction V, auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>Fa.\n       \\<lbrakk>finite Fa; i \\<notin> Fa; ssubst (Var i) Fa F = Var i;\n        finite V\\<rbrakk>\n       \\<Longrightarrow> ssubst (Var i) (insert i Fa) F = F i\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa; ssubst (Var i) Fa F = F i;\n        finite V; i \\<in> Fa\\<rbrakk>\n       \\<Longrightarrow> ssubst (Var i) (insert x Fa) F = F i\n 3. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa; ssubst (Var i) Fa F = Var i;\n        finite V; i \\<noteq> x; i \\<notin> Fa\\<rbrakk>\n       \\<Longrightarrow> ssubst (Var i) (insert x Fa) F = Var i", "apply (metis ssubst_insert subst.simps(2))"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa; ssubst (Var i) Fa F = F i;\n        finite V; i \\<in> Fa\\<rbrakk>\n       \\<Longrightarrow> ssubst (Var i) (insert x Fa) F = F i\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa; ssubst (Var i) Fa F = Var i;\n        finite V; i \\<noteq> x; i \\<notin> Fa\\<rbrakk>\n       \\<Longrightarrow> ssubst (Var i) (insert x Fa) F = Var i", "apply (metis ssubst_insert2 subst.simps(2))+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma ssubst_Zero [simp]: \"finite V \\<Longrightarrow> ssubst Zero V F = Zero\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow> ssubst Zero V F = Zero", "by (induct V rule: finite_induct) (auto simp: ssubst_insert)"], ["", "lemma ssubst_Eats [simp]: \"finite V \\<Longrightarrow> ssubst (Eats t u) V F = Eats (ssubst t V F) (ssubst u V F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow>\n    ssubst (Eats t u) V F = Eats (ssubst t V F) (ssubst u V F)", "by (induct V rule: finite_induct) (auto simp: ssubst_insert)"], ["", "lemma ssubst_SUCC [simp]: \"finite V \\<Longrightarrow> ssubst (SUCC t) V F = SUCC (ssubst t V F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow> ssubst (SUCC t) V F = SUCC (ssubst t V F)", "by (metis SUCC_def ssubst_Eats)"], ["", "lemma ssubst_ORD_OF [simp]: \"finite V \\<Longrightarrow> ssubst (ORD_OF n) V F = ORD_OF n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow> ssubst (ORD_OF n) V F = ORD_OF n", "by (induction n) auto"], ["", "lemma ssubst_HPair [simp]: \n  \"finite V \\<Longrightarrow> ssubst (HPair t u) V F = HPair (ssubst t V F) (ssubst u V F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow>\n    ssubst (HPair t u) V F = HPair (ssubst t V F) (ssubst u V F)", "by (simp add: HPair_def)"], ["", "lemma ssubst_HTuple [simp]: \"finite V \\<Longrightarrow> ssubst (HTuple n) V F = (HTuple n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow> ssubst (HTuple n) V F = HTuple n", "by (induction n) (auto simp: HTuple.simps)"], ["", "lemma ssubst_Subset:\n  assumes \"finite V\" shows \"ssubst \\<lfloor>t SUBS u\\<rfloor>V V F = Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F) (ssubst \\<lfloor>u\\<rfloor>V V F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ssubst \\<lfloor>t SUBS u\\<rfloor>V V F =\n    Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F)\n     (ssubst \\<lfloor>u\\<rfloor>V V F)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ssubst \\<lfloor>t SUBS u\\<rfloor>V V F =\n    Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F)\n     (ssubst \\<lfloor>u\\<rfloor>V V F)", "obtain i::name where \"atom i \\<sharp> (t,u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        atom i \\<sharp> (t, u) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule obtain_fresh)"], ["proof (state)\nthis:\n  atom i \\<sharp> (t, u)\n\ngoal (1 subgoal):\n 1. ssubst \\<lfloor>t SUBS u\\<rfloor>V V F =\n    Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F)\n     (ssubst \\<lfloor>u\\<rfloor>V V F)", "thus ?thesis"], ["proof (prove)\nusing this:\n  atom i \\<sharp> (t, u)\n\ngoal (1 subgoal):\n 1. ssubst \\<lfloor>t SUBS u\\<rfloor>V V F =\n    Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F)\n     (ssubst \\<lfloor>u\\<rfloor>V V F)", "using assms"], ["proof (prove)\nusing this:\n  atom i \\<sharp> (t, u)\n  finite V\n\ngoal (1 subgoal):\n 1. ssubst \\<lfloor>t SUBS u\\<rfloor>V V F =\n    Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F)\n     (ssubst \\<lfloor>u\\<rfloor>V V F)", "by (auto simp: Subset.simps [of i] vquot_fm_def vquot_tm_def trans_tm_forget)"], ["proof (state)\nthis:\n  ssubst \\<lfloor>t SUBS u\\<rfloor>V V F =\n  Q_Subset (ssubst \\<lfloor>t\\<rfloor>V V F)\n   (ssubst \\<lfloor>u\\<rfloor>V V F)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fresh_ssubst: \n  assumes \"finite V\" \"a \\<sharp> p \\<bullet> V\" \"a \\<sharp> t\"\n    shows \"a \\<sharp> ssubst t V F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<sharp> ssubst t V F", "using assms"], ["proof (prove)\nusing this:\n  finite V\n  a \\<sharp> p \\<bullet> V\n  a \\<sharp> t\n\ngoal (1 subgoal):\n 1. a \\<sharp> ssubst t V F", "by (induct V) \n     (auto simp: ssubst_insert_if fresh_finite_insert F_unfold intro: fresh_ineq_at_base)"], ["", "lemma fresh_ssubst': \n  assumes \"finite V\" \"atom i \\<sharp> t\" \"atom (p \\<bullet> i) \\<sharp> t\"\n    shows \"atom i \\<sharp> ssubst t V F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom i \\<sharp> ssubst t V F", "using assms"], ["proof (prove)\nusing this:\n  finite V\n  atom i \\<sharp> t\n  atom (p \\<bullet> i) \\<sharp> t\n\ngoal (1 subgoal):\n 1. atom i \\<sharp> ssubst t V F", "by (induct t rule: tm.induct) (auto simp: F_unfold fresh_permute_left pinv)"], ["", "lemma ssubst_vquot_Ex:\n  \"\\<lbrakk>finite V; atom i \\<sharp> p \\<bullet> V\\<rbrakk> \n   \\<Longrightarrow> ssubst \\<lfloor>Ex i A\\<rfloor>(insert i V) (insert i V) F = ssubst \\<lfloor>Ex i A\\<rfloor>V V F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite V; atom i \\<sharp> p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> ssubst \\<lfloor>SyntaxN.Ex i A\\<rfloor>(insert i V)\n                       (insert i V) F =\n                      ssubst \\<lfloor>SyntaxN.Ex i A\\<rfloor>V V F", "by (simp add: ssubst_insert_if insert_absorb vquot_fm_insert fresh_ssubst)"], ["", "lemma ground_ssubst_eq: \"\\<lbrakk>finite V; supp t = {}\\<rbrakk> \\<Longrightarrow> ssubst t V F = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite V; supp t = {}\\<rbrakk>\n    \\<Longrightarrow> ssubst t V F = t", "by (induct V rule: finite_induct) (auto simp: ssubst_insert fresh_def)"], ["", "lemma ssubst_quot_tm [simp]:\n  fixes t::tm shows \"finite V \\<Longrightarrow> ssubst \\<guillemotleft>t\\<guillemotright> V F = \\<guillemotleft>t\\<guillemotright>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow>\n    ssubst \\<guillemotleft>t\\<guillemotright> V F =\n    \\<guillemotleft>t\\<guillemotright>", "by (simp add: ground_ssubst_eq supp_conv_fresh)"], ["", "lemma ssubst_quot_fm [simp]:\n  fixes A::fm shows \"finite V \\<Longrightarrow> ssubst \\<guillemotleft>A\\<guillemotright> V F = \\<guillemotleft>A\\<guillemotright>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite V \\<Longrightarrow>\n    ssubst \\<guillemotleft>A\\<guillemotright> V F =\n    \\<guillemotleft>A\\<guillemotright>", "by (simp add: ground_ssubst_eq supp_conv_fresh)"], ["", "lemma atom_in_p_Vs: \"\\<lbrakk>i \\<in> p \\<bullet> V; V \\<subseteq> Vs\\<rbrakk> \\<Longrightarrow> i \\<in> p \\<bullet> Vs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<in> p \\<bullet> V; V \\<subseteq> Vs\\<rbrakk>\n    \\<Longrightarrow> i \\<in> p \\<bullet> Vs", "by (metis (full_types) True_eqvt subsetD subset_eqvt)"], ["", "section\\<open>The Main Theorems of Section 7\\<close>"], ["", "lemma SubstTermP_vquot_dbtm:\n  assumes w: \"w \\<in> Vs - V\" and V: \"V \\<subseteq> Vs\" \"V' = p \\<bullet> V\"\n      and s: \"supp dbtm \\<subseteq> atom ` Vs\"\n  shows\n  \"insert (ConstP (F w)) {ConstP (F i) | i. i \\<in> V}\n   \\<turnstile> SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w) \n                (ssubst (vquot_dbtm V dbtm) V F)\n                (subst w (F w) (ssubst (vquot_dbtm (insert w V) dbtm) V F))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V dbtm) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) dbtm) V F))", "using s"], ["proof (prove)\nusing this:\n  supp dbtm \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V dbtm) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) dbtm) V F))", "proof (induct dbtm rule: dbtm.induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. supp DBZero \\<subseteq> atom ` Vs \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V DBZero) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) DBZero) V F))\n 2. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 3. \\<And>x.\n       supp (DBInd x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBInd x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd x)) V F))\n 4. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "case DBZero"], ["proof (state)\nthis:\n  supp DBZero \\<subseteq> atom ` Vs\n\ngoal (4 subgoals):\n 1. supp DBZero \\<subseteq> atom ` Vs \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V DBZero) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) DBZero) V F))\n 2. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 3. \\<And>x.\n       supp (DBInd x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBInd x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd x)) V F))\n 4. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "thus ?case"], ["proof (prove)\nusing this:\n  supp DBZero \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V DBZero) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) DBZero) V F))", "using V w"], ["proof (prove)\nusing this:\n  supp DBZero \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n  w \\<in> Vs - V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V DBZero) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) DBZero) V F))", "by (auto intro: SubstTermP_Zero [THEN cut1] ConstP_imp_TermP [THEN cut1])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V DBZero) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) DBZero) V F))\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 2. \\<And>x.\n       supp (DBInd x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBInd x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd x)) V F))\n 3. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 2. \\<And>x.\n       supp (DBInd x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBInd x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd x)) V F))\n 3. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "case (DBInd n)"], ["proof (state)\nthis:\n  supp (DBInd n) \\<subseteq> atom ` Vs\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 2. \\<And>x.\n       supp (DBInd x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBInd x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd x)) V F))\n 3. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "thus ?case"], ["proof (prove)\nusing this:\n  supp (DBInd n) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBInd n)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd n)) V F))", "using V"], ["proof (prove)\nusing this:\n  supp (DBInd n) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBInd n)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd n)) V F))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) (Q_Ind (ORD_OF n)) (Q_Ind (ORD_OF n))", "apply (rule thin [of \"{ConstP (F w)}\"])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> {ConstP (F w)} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) (Q_Ind (ORD_OF n)) (Q_Ind (ORD_OF n))\n 2. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> {ConstP (F w)}\n                      \\<subseteq> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V}", "apply (rule SubstTermP_Ind [THEN cut3])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> {ConstP (F w)} \\<turnstile>\n                      VarP \\<guillemotleft>Var w\\<guillemotright>\n 2. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> {ConstP (F w)} \\<turnstile> IndP (Q_Ind (ORD_OF n))\n 3. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> {ConstP (F w)} \\<turnstile> TermP (F w)\n 4. \\<lbrakk>supp n \\<subseteq> atom ` Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V\\<rbrakk>\n    \\<Longrightarrow> {ConstP (F w)}\n                      \\<subseteq> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V}", "apply (auto simp: IndP_Q_Ind OrdP_ORD_OF ConstP_imp_TermP)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V (DBInd n)) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBInd n)) V F))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 2. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 2. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "case (DBVar i)"], ["proof (state)\nthis:\n  supp (DBVar i) \\<subseteq> atom ` Vs\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       supp (DBVar x) \\<subseteq> atom ` Vs \\<Longrightarrow>\n       insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n       SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n        (ssubst (vquot_dbtm V (DBVar x)) V F)\n        (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar x)) V F))\n 2. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "proof (cases \"i \\<in> V'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<in> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))\n 2. i \\<notin> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "case True"], ["proof (state)\nthis:\n  i \\<in> V'\n\ngoal (2 subgoals):\n 1. i \\<in> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))\n 2. i \\<notin> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "hence \"i \\<notin> Vs\""], ["proof (prove)\nusing this:\n  i \\<in> V'\n\ngoal (1 subgoal):\n 1. i \\<notin> Vs", "using assms"], ["proof (prove)\nusing this:\n  i \\<in> V'\n  w \\<in> Vs - V\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n  supp dbtm \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. i \\<notin> Vs", "by (metis p Vs atom_in_atom_image atom_in_p_Vs fresh_finite_set_at_base fresh_star_def)"], ["proof (state)\nthis:\n  i \\<notin> Vs\n\ngoal (2 subgoals):\n 1. i \\<in> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))\n 2. i \\<notin> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "thus ?thesis"], ["proof (prove)\nusing this:\n  i \\<notin> Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "using DBVar True V"], ["proof (prove)\nusing this:\n  i \\<notin> Vs\n  supp (DBVar i) \\<subseteq> atom ` Vs\n  i \\<in> V'\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "by auto"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V (DBVar i)) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))\n\ngoal (1 subgoal):\n 1. i \\<notin> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<notin> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "case False"], ["proof (state)\nthis:\n  i \\<notin> V'\n\ngoal (1 subgoal):\n 1. i \\<notin> V' \\<Longrightarrow>\n    insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "thus ?thesis"], ["proof (prove)\nusing this:\n  i \\<notin> V'\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "using DBVar V w"], ["proof (prove)\nusing this:\n  i \\<notin> V'\n  supp (DBVar i) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n  w \\<in> Vs - V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBVar i)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))", "apply (auto simp: quot_Var [symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>w \\<notin> p \\<bullet> V; V \\<subseteq> Vs; V' = p \\<bullet> V;\n     w \\<in> Vs; w \\<notin> V; i = w\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) \\<guillemotleft>Var w\\<guillemotright> (F w)\n 2. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<in> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) (F i) (subst w (F w) (F i))\n 3. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<notin> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) \\<guillemotleft>Var i\\<guillemotright>\n                       \\<guillemotleft>Var i\\<guillemotright>", "apply (blast intro: thin [of \"{ConstP (F w)}\"] ConstP_imp_TermP\n                            SubstTermP_Var_same [THEN cut2])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<in> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) (F i) (subst w (F w) (F i))\n 2. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<notin> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) \\<guillemotleft>Var i\\<guillemotright>\n                       \\<guillemotleft>Var i\\<guillemotright>", "apply (subst forget_subst_tm, metis F_unfold atom_fresh_perm tm.fresh(2))"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<in> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) (F i) (F i)\n 2. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<notin> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) \\<guillemotleft>Var i\\<guillemotright>\n                       \\<guillemotleft>Var i\\<guillemotright>", "apply (blast intro: Hyp thin [of \"{ConstP (F w)}\"] ConstP_imp_TermP\n                           SubstTermP_Const [THEN cut2])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<notin> p \\<bullet> V; i \\<in> Vs; V \\<subseteq> Vs;\n     V' = p \\<bullet> V; w \\<in> Vs; w \\<notin> V; i \\<noteq> w;\n     i \\<notin> V\\<rbrakk>\n    \\<Longrightarrow> insert (ConstP (F w))\n                       {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                      SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                       (F w) \\<guillemotleft>Var i\\<guillemotright>\n                       \\<guillemotleft>Var i\\<guillemotright>", "apply (blast intro: Hyp thin [of \"{ConstP (F w)}\"] ConstP_imp_TermP EQ_quot_tm_Fls\n                           SubstTermP_Var_diff [THEN cut4])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V (DBVar i)) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V (DBVar i)) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBVar i)) V F))\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "case (DBEats tm1 tm2)"], ["proof (state)\nthis:\n  supp tm1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V tm1) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) tm1) V F))\n  supp tm2 \\<subseteq> atom ` Vs \\<Longrightarrow>\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V tm2) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) tm2) V F))\n  supp (DBEats tm1 tm2) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2a.\n       \\<lbrakk>supp x1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n                insert (ConstP (F w))\n                 {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                 (ssubst (vquot_dbtm V x1) V F)\n                 (subst w (F w) (ssubst (vquot_dbtm (insert w V) x1) V F));\n        supp x2a \\<subseteq> atom ` Vs \\<Longrightarrow>\n        insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n        SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n         (ssubst (vquot_dbtm V x2a) V F)\n         (subst w (F w) (ssubst (vquot_dbtm (insert w V) x2a) V F));\n        supp (DBEats x1 x2a) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstTermP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbtm V (DBEats x1 x2a)) V F)\n                          (subst w (F w)\n                            (ssubst\n                              (vquot_dbtm (insert w V) (DBEats x1 x2a)) V\n                              F))", "thus ?case"], ["proof (prove)\nusing this:\n  supp tm1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V tm1) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) tm1) V F))\n  supp tm2 \\<subseteq> atom ` Vs \\<Longrightarrow>\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V tm2) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) tm2) V F))\n  supp (DBEats tm1 tm2) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBEats tm1 tm2)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBEats tm1 tm2)) V F))", "using V"], ["proof (prove)\nusing this:\n  supp tm1 \\<subseteq> atom ` Vs \\<Longrightarrow>\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V tm1) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) tm1) V F))\n  supp tm2 \\<subseteq> atom ` Vs \\<Longrightarrow>\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V tm2) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) tm2) V F))\n  supp (DBEats tm1 tm2) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbtm V (DBEats tm1 tm2)) V F)\n     (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBEats tm1 tm2)) V F))", "by (auto simp: SubstTermP_Eats [THEN cut2])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstTermP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbtm V (DBEats tm1 tm2)) V F)\n   (subst w (F w) (ssubst (vquot_dbtm (insert w V) (DBEats tm1 tm2)) V F))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma SubstFormP_vquot_dbfm:\n  assumes w: \"w \\<in> Vs - V\" and V: \"V \\<subseteq> Vs\" \"V' = p \\<bullet> V\"\n      and s: \"supp dbfm \\<subseteq> atom ` Vs\"\n  shows\n  \"insert (ConstP (F w)) {ConstP (F i) | i. i \\<in> V}\n   \\<turnstile> SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                (ssubst (vquot_dbfm V dbfm) V F) \n                (subst w (F w) (ssubst (vquot_dbfm (insert w V) dbfm) V F))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V dbfm) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) dbfm) V F))", "using w s"], ["proof (prove)\nusing this:\n  w \\<in> Vs - V\n  supp dbfm \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V dbfm) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) dbfm) V F))", "proof (induct dbfm rule: dbfm.induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBMem x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBMem x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBMem x1 x2))\n                              V F))\n 2. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBEq x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEq x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEq x1 x2)) V\n                              F))\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 4. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 5. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "case (DBMem t u)"], ["proof (state)\nthis:\n  w \\<in> Vs - V\n  supp (DBMem t u) \\<subseteq> atom ` Vs\n\ngoal (5 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBMem x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBMem x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBMem x1 x2))\n                              V F))\n 2. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBEq x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEq x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEq x1 x2)) V\n                              F))\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 4. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 5. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "thus ?case"], ["proof (prove)\nusing this:\n  w \\<in> Vs - V\n  supp (DBMem t u) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBMem t u)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBMem t u)) V F))", "using V"], ["proof (prove)\nusing this:\n  w \\<in> Vs - V\n  supp (DBMem t u) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBMem t u)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBMem t u)) V F))", "by (auto intro: SubstTermP_vquot_dbtm SubstFormP_Mem [THEN cut2])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbfm V (DBMem t u)) V F)\n   (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBMem t u)) V F))\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBEq x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEq x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEq x1 x2)) V\n                              F))\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 3. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 4. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBEq x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEq x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEq x1 x2)) V\n                              F))\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 3. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 4. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "case (DBEq t u)"], ["proof (state)\nthis:\n  w \\<in> Vs - V\n  supp (DBEq t u) \\<subseteq> atom ` Vs\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>w \\<in> Vs - V;\n        supp (DBEq x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEq x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEq x1 x2)) V\n                              F))\n 2. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 3. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 4. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "thus ?case"], ["proof (prove)\nusing this:\n  w \\<in> Vs - V\n  supp (DBEq t u) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBEq t u)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBEq t u)) V F))", "using V"], ["proof (prove)\nusing this:\n  w \\<in> Vs - V\n  supp (DBEq t u) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBEq t u)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBEq t u)) V F))", "by (auto intro: SubstTermP_vquot_dbtm SubstFormP_Eq [THEN cut2])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbfm V (DBEq t u)) V F)\n   (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBEq t u)) V F))\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 2. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 3. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 2. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 3. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "case (DBDisj A B)"], ["proof (state)\nthis:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  \\<lbrakk>w \\<in> Vs - V; supp B \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V B) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) B) V F))\n  w \\<in> Vs - V\n  supp (DBDisj A B) \\<subseteq> atom ` Vs\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x1 \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x1) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x1) V\n F));\n        \\<lbrakk>w \\<in> Vs - V; supp x2 \\<subseteq> atom ` Vs\\<rbrakk>\n        \\<Longrightarrow> insert (ConstP (F w))\n                           {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                          SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                           (F w) (ssubst (vquot_dbfm V x2) V F)\n                           (subst w (F w)\n                             (ssubst (vquot_dbfm (insert w V) x2) V F));\n        w \\<in> Vs - V; supp (DBDisj x1 x2) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBDisj x1 x2)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBDisj x1 x2))\n                              V F))\n 2. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 3. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  \\<lbrakk>w \\<in> Vs - V; supp B \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V B) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) B) V F))\n  w \\<in> Vs - V\n  supp (DBDisj A B) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBDisj A B)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBDisj A B)) V F))", "using V"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  \\<lbrakk>w \\<in> Vs - V; supp B \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V B) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) B) V F))\n  w \\<in> Vs - V\n  supp (DBDisj A B) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBDisj A B)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBDisj A B)) V F))", "by (auto intro: SubstFormP_Disj [THEN cut2])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbfm V (DBDisj A B)) V F)\n   (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBDisj A B)) V F))\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 2. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 2. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "case (DBNeg A)"], ["proof (state)\nthis:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  w \\<in> Vs - V\n  supp (DBNeg A) \\<subseteq> atom ` Vs\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBNeg x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBNeg x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBNeg x)) V\n                              F))\n 2. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  w \\<in> Vs - V\n  supp (DBNeg A) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBNeg A)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBNeg A)) V F))", "using V"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  w \\<in> Vs - V\n  supp (DBNeg A) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBNeg A)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBNeg A)) V F))", "by (auto intro: SubstFormP_Neg [THEN cut1])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbfm V (DBNeg A)) V F)\n   (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBNeg A)) V F))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "case (DBEx A)"], ["proof (state)\nthis:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  w \\<in> Vs - V\n  supp (DBEx A) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<lbrakk>w \\<in> Vs - V;\n                 supp x \\<subseteq> atom ` Vs\\<rbrakk>\n                \\<Longrightarrow> insert (ConstP (F w))\n                                   {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                                  SubstFormP\n                                   \\<guillemotleft>Var w\\<guillemotright>\n                                   (F w) (ssubst (vquot_dbfm V x) V F)\n                                   (subst w (F w)\n                                     (ssubst (vquot_dbfm (insert w V) x) V\n F));\n        w \\<in> Vs - V; supp (DBEx x) \\<subseteq> atom ` Vs\\<rbrakk>\n       \\<Longrightarrow> insert (ConstP (F w))\n                          {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                         SubstFormP \\<guillemotleft>Var w\\<guillemotright>\n                          (F w) (ssubst (vquot_dbfm V (DBEx x)) V F)\n                          (subst w (F w)\n                            (ssubst (vquot_dbfm (insert w V) (DBEx x)) V F))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  w \\<in> Vs - V\n  supp (DBEx A) \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBEx A)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBEx A)) V F))", "using V"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> Vs - V; supp A \\<subseteq> atom ` Vs\\<rbrakk>\n  \\<Longrightarrow> insert (ConstP (F w))\n                     {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n                    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n                     (ssubst (vquot_dbfm V A) V F)\n                     (subst w (F w)\n                       (ssubst (vquot_dbfm (insert w V) A) V F))\n  w \\<in> Vs - V\n  supp (DBEx A) \\<subseteq> atom ` Vs\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst (vquot_dbfm V (DBEx A)) V F)\n     (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBEx A)) V F))", "by (auto intro: SubstFormP_Ex [THEN cut1])"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst (vquot_dbfm V (DBEx A)) V F)\n   (subst w (F w) (ssubst (vquot_dbfm (insert w V) (DBEx A)) V F))\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Lemmas 7.5 and 7.6\\<close>"], ["", "lemma ssubst_SubstFormP:\n  fixes A::fm\n  assumes w: \"w \\<in> Vs - V\" and V: \"V \\<subseteq> Vs\" \"V' = p \\<bullet> V\"\n      and s: \"supp A \\<subseteq> atom ` Vs\"\n  shows\n  \"insert (ConstP (F w)) {ConstP (F i) | i. i \\<in> V}\n   \\<turnstile> SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w) \n                (ssubst \\<lfloor>A\\<rfloor>V V F) \n                (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst \\<lfloor>A\\<rfloor>V V F)\n     (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst \\<lfloor>A\\<rfloor>V V F)\n     (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)", "have \"w \\<notin> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<notin> V", "using assms"], ["proof (prove)\nusing this:\n  w \\<in> Vs - V\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n  supp A \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. w \\<notin> V", "by auto"], ["proof (state)\nthis:\n  w \\<notin> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst \\<lfloor>A\\<rfloor>V V F)\n     (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)", "thus ?thesis"], ["proof (prove)\nusing this:\n  w \\<notin> V\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst \\<lfloor>A\\<rfloor>V V F)\n     (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)", "using assms"], ["proof (prove)\nusing this:\n  w \\<notin> V\n  w \\<in> Vs - V\n  V \\<subseteq> Vs\n  V' = p \\<bullet> V\n  supp A \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n     (ssubst \\<lfloor>A\\<rfloor>V V F)\n     (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)", "by (simp add: vquot_fm_def supp_conv_fresh ssubst_insert_if SubstFormP_vquot_dbfm)"], ["proof (state)\nthis:\n  insert (ConstP (F w)) {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  SubstFormP \\<guillemotleft>Var w\\<guillemotright> (F w)\n   (ssubst \\<lfloor>A\\<rfloor>V V F)\n   (ssubst \\<lfloor>A\\<rfloor>(insert w V) (insert w V) F)\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Theorem 7.3\\<close>"], ["", "theorem PfP_implies_PfP_ssubst:\n  fixes \\<beta>::fm\n  assumes \\<beta>: \"{} \\<turnstile> PfP \\<guillemotleft>\\<beta>\\<guillemotright>\"\n      and V: \"V \\<subseteq> Vs\"\n      and s: \"supp \\<beta> \\<subseteq> atom ` Vs\"\n    shows    \"{ConstP (F i) | i. i \\<in> V} \\<turnstile> PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)", "using finite_V [OF V] V"], ["proof (prove)\nusing this:\n  finite V\n  V \\<subseteq> Vs\n\ngoal (1 subgoal):\n 1. {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)", "proof induction"], ["proof (state)\ngoal (2 subgoals):\n 1. {} \\<subseteq> Vs \\<Longrightarrow>\n    {ConstP (F i) |i. i \\<in> {}} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>{} {} F)\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa;\n        Fa \\<subseteq> Vs \\<Longrightarrow>\n        {ConstP (F i) |i. i \\<in> Fa} \\<turnstile>\n        PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>Fa Fa F);\n        insert x Fa \\<subseteq> Vs\\<rbrakk>\n       \\<Longrightarrow> {ConstP (F i) |i. i \\<in> insert x Fa} \\<turnstile>\n                         PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert x Fa)\n                               (insert x Fa) F)", "case empty"], ["proof (state)\nthis:\n  {} \\<subseteq> Vs\n\ngoal (2 subgoals):\n 1. {} \\<subseteq> Vs \\<Longrightarrow>\n    {ConstP (F i) |i. i \\<in> {}} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>{} {} F)\n 2. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa;\n        Fa \\<subseteq> Vs \\<Longrightarrow>\n        {ConstP (F i) |i. i \\<in> Fa} \\<turnstile>\n        PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>Fa Fa F);\n        insert x Fa \\<subseteq> Vs\\<rbrakk>\n       \\<Longrightarrow> {ConstP (F i) |i. i \\<in> insert x Fa} \\<turnstile>\n                         PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert x Fa)\n                               (insert x Fa) F)", "thus ?case"], ["proof (prove)\nusing this:\n  {} \\<subseteq> Vs\n\ngoal (1 subgoal):\n 1. {ConstP (F i) |i. i \\<in> {}} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>{} {} F)", "by (auto simp: \\<beta>)"], ["proof (state)\nthis:\n  {ConstP (F i) |i. i \\<in> {}} \\<turnstile>\n  PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>{} {} F)\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa;\n        Fa \\<subseteq> Vs \\<Longrightarrow>\n        {ConstP (F i) |i. i \\<in> Fa} \\<turnstile>\n        PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>Fa Fa F);\n        insert x Fa \\<subseteq> Vs\\<rbrakk>\n       \\<Longrightarrow> {ConstP (F i) |i. i \\<in> insert x Fa} \\<turnstile>\n                         PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert x Fa)\n                               (insert x Fa) F)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa;\n        Fa \\<subseteq> Vs \\<Longrightarrow>\n        {ConstP (F i) |i. i \\<in> Fa} \\<turnstile>\n        PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>Fa Fa F);\n        insert x Fa \\<subseteq> Vs\\<rbrakk>\n       \\<Longrightarrow> {ConstP (F i) |i. i \\<in> insert x Fa} \\<turnstile>\n                         PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert x Fa)\n                               (insert x Fa) F)", "case (insert i V)"], ["proof (state)\nthis:\n  finite V\n  i \\<notin> V\n  V \\<subseteq> Vs \\<Longrightarrow>\n  {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)\n  insert i V \\<subseteq> Vs\n\ngoal (1 subgoal):\n 1. \\<And>x Fa.\n       \\<lbrakk>finite Fa; x \\<notin> Fa;\n        Fa \\<subseteq> Vs \\<Longrightarrow>\n        {ConstP (F i) |i. i \\<in> Fa} \\<turnstile>\n        PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>Fa Fa F);\n        insert x Fa \\<subseteq> Vs\\<rbrakk>\n       \\<Longrightarrow> {ConstP (F i) |i. i \\<in> insert x Fa} \\<turnstile>\n                         PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert x Fa)\n                               (insert x Fa) F)", "thus ?case"], ["proof (prove)\nusing this:\n  finite V\n  i \\<notin> V\n  V \\<subseteq> Vs \\<Longrightarrow>\n  {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)\n  insert i V \\<subseteq> Vs\n\ngoal (1 subgoal):\n 1. {ConstP (F ia) |ia. ia \\<in> insert i V} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert i V) (insert i V) F)", "using assms"], ["proof (prove)\nusing this:\n  finite V\n  i \\<notin> V\n  V \\<subseteq> Vs \\<Longrightarrow>\n  {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)\n  insert i V \\<subseteq> Vs\n  {} \\<turnstile> PfP \\<guillemotleft>\\<beta>\\<guillemotright>\n  V \\<subseteq> Vs\n  supp \\<beta> \\<subseteq> atom ` Vs\n\ngoal (1 subgoal):\n 1. {ConstP (F ia) |ia. ia \\<in> insert i V} \\<turnstile>\n    PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert i V) (insert i V) F)", "by (auto simp: Collect_disj_Un fresh_finite_set_at_base \n               intro: PfP_implies_SubstForm_PfP thin1 ssubst_SubstFormP)"], ["proof (state)\nthis:\n  {ConstP (F ia) |ia. ia \\<in> insert i V} \\<turnstile>\n  PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>(insert i V) (insert i V) F)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {ConstP (F i) |i. i \\<in> V} \\<turnstile>\n  PfP (ssubst \\<lfloor>\\<beta>\\<rfloor>V V F)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}