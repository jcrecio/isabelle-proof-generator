{"file_name": "/home/qj213/afp-2021-10-22/thys/LTL_to_DRA/LTL_Rabin_Unfold_Opt.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/LTL_to_DRA", "problem_names": ["lemma finite_reach_af_opt:\n  \"finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))\"", "lemma finite_reach_af_G_opt:\n  \"finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))\"", "lemma wellformed_mojmir_opt:\n  assumes \"Only_G \\<G>\"\n  assumes \"finite \\<Sigma>\"\n  assumes \"range w \\<subseteq> \\<Sigma>\"\n  shows \"mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\"", "lemma unfold_token_run_eq:\n  assumes \"x \\<le> n\"\n  shows \"\\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)\" \n  (is \"?lhs = ?rhs\")", "lemma unfold_token_succeeds_eq:\n  \"\\<MM>.token_succeeds x = \\<UU>.token_succeeds x\"", "lemma unfold_accept_eq:\n  \"\\<MM>.accept = \\<UU>.accept\"", "lemma unfold_\\<S>_eq:\n  assumes \"\\<MM>.accept\"\n  shows \"\\<forall>\\<^sub>\\<infinity>n. \\<MM>.\\<S> (Suc n) = (\\<lambda>q. step_abs q (w n)) ` (\\<UU>.\\<S> n) \\<union> {Abs \\<phi>} \\<union> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\"", "lemma unfold_optimisation_correct_M:\n  assumes \"dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\"\n  assumes \"dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\"\n  assumes \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> \\<pi>\\<^sub>\\<A> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\"\n  assumes \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> \\<pi>\\<^sub>\\<UU> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\"\n  shows \"accepting_pair\\<^sub>R (ltl_to_rabin_af.\\<delta>\\<^sub>\\<A> \\<Sigma>) (ltl_to_rabin_af.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w \\<longleftrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\"", "theorem ltl_to_generalized_rabin_correct:\n  \"w \\<Turnstile> \\<phi> \\<longleftrightarrow> accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\" \n  (is \"_ \\<longleftrightarrow> ?rhs\")", "lemma ltl_to_generalized_rabin_af\\<^sub>\\<UU>_wellformed:\n  \"finite \\<Sigma> \\<Longrightarrow> range w \\<subseteq> \\<Sigma> \\<Longrightarrow> ltl_to_rabin_af_unf \\<Sigma> w\"", "theorem ltl_to_generalized_rabin_af\\<^sub>\\<UU>_correct:\n  assumes \"finite \\<Sigma>\"\n  assumes \"range w \\<subseteq> \\<Sigma>\"\n  shows \"w \\<Turnstile> \\<phi> = accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\""], "translations": [["", "lemma finite_reach_af_opt:\n  \"finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))", "proof (cases \"\\<Sigma> \\<noteq> {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))\n 2. \\<not> \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))", "case True"], ["proof (state)\nthis:\n  \\<Sigma> \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))\n 2. \\<not> \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))", "using af_abs_opt.finite_abs_reach"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite (af_abs_opt.abs_reach (Abs ?\\<phi>))\n\ngoal (1 subgoal):\n 1. finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))", "unfolding af_abs_opt.abs_reach_def reach_foldl_def[OF True]"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite {foldl af_abs_opt.f_abs (Abs ?\\<phi>) w |w. True}\n\ngoal (1 subgoal):\n 1. finite\n     {foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n      set w \\<subseteq> \\<Sigma>}", "using finite_subset[of \"{foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w. set w \\<subseteq> \\<Sigma>}\" \"{foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w. True}\"]"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite {foldl af_abs_opt.f_abs (Abs ?\\<phi>) w |w. True}\n  \\<lbrakk>{foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n            set w \\<subseteq> \\<Sigma>}\n           \\<subseteq> {foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w. True};\n   finite {foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w. True}\\<rbrakk>\n  \\<Longrightarrow> finite\n                     {foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n                      set w \\<subseteq> \\<Sigma>}\n\ngoal (1 subgoal):\n 1. finite\n     {foldl \\<up>af\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n      set w \\<subseteq> \\<Sigma>}", "unfolding af_letter_abs_opt_def"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite {foldl af_abs_opt.f_abs (Abs ?\\<phi>) w |w. True}\n  \\<lbrakk>{foldl af_abs_opt.f_abs (Abs \\<phi>) w |w.\n            set w \\<subseteq> \\<Sigma>}\n           \\<subseteq> {foldl af_abs_opt.f_abs (Abs \\<phi>) w |w. True};\n   finite {foldl af_abs_opt.f_abs (Abs \\<phi>) w |w. True}\\<rbrakk>\n  \\<Longrightarrow> finite\n                     {foldl af_abs_opt.f_abs (Abs \\<phi>) w |w.\n                      set w \\<subseteq> \\<Sigma>}\n\ngoal (1 subgoal):\n 1. finite\n     {foldl af_abs_opt.f_abs (Abs \\<phi>) w |w. set w \\<subseteq> \\<Sigma>}", "by blast"], ["proof (state)\nthis:\n  finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))\n\ngoal (1 subgoal):\n 1. \\<not> \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>\\<UU> (Abs \\<phi>))", "qed (simp add: reach_def)"], ["", "lemma finite_reach_af_G_opt:\n  \"finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))", "proof (cases \"\\<Sigma> \\<noteq> {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))\n 2. \\<not> \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))", "case True"], ["proof (state)\nthis:\n  \\<Sigma> \\<noteq> {}\n\ngoal (2 subgoals):\n 1. \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))\n 2. \\<not> \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n\ngoal (1 subgoal):\n 1. finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))", "using af_G_abs_opt.finite_abs_reach"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite (af_G_abs_opt.abs_reach (Abs ?\\<phi>))\n\ngoal (1 subgoal):\n 1. finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))", "unfolding af_G_abs_opt.abs_reach_def reach_foldl_def[OF True]"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite {foldl af_G_abs_opt.f_abs (Abs ?\\<phi>) w |w. True}\n\ngoal (1 subgoal):\n 1. finite\n     {foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n      set w \\<subseteq> \\<Sigma>}", "using finite_subset[of \"{foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w. set w \\<subseteq> \\<Sigma>}\" \"{foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w. True}\"]"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite {foldl af_G_abs_opt.f_abs (Abs ?\\<phi>) w |w. True}\n  \\<lbrakk>{foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n            set w \\<subseteq> \\<Sigma>}\n           \\<subseteq> {foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n                        True};\n   finite\n    {foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w. True}\\<rbrakk>\n  \\<Longrightarrow> finite\n                     {foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n                      set w \\<subseteq> \\<Sigma>}\n\ngoal (1 subgoal):\n 1. finite\n     {foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w |w.\n      set w \\<subseteq> \\<Sigma>}", "unfolding af_G_letter_abs_opt_def"], ["proof (prove)\nusing this:\n  \\<Sigma> \\<noteq> {}\n  finite {foldl af_G_abs_opt.f_abs (Abs ?\\<phi>) w |w. True}\n  \\<lbrakk>{foldl af_G_abs_opt.f_abs (Abs \\<phi>) w |w.\n            set w \\<subseteq> \\<Sigma>}\n           \\<subseteq> {foldl af_G_abs_opt.f_abs (Abs \\<phi>) w |w. True};\n   finite {foldl af_G_abs_opt.f_abs (Abs \\<phi>) w |w. True}\\<rbrakk>\n  \\<Longrightarrow> finite\n                     {foldl af_G_abs_opt.f_abs (Abs \\<phi>) w |w.\n                      set w \\<subseteq> \\<Sigma>}\n\ngoal (1 subgoal):\n 1. finite\n     {foldl af_G_abs_opt.f_abs (Abs \\<phi>) w |w.\n      set w \\<subseteq> \\<Sigma>}", "by blast"], ["proof (state)\nthis:\n  finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))\n\ngoal (1 subgoal):\n 1. \\<not> \\<Sigma> \\<noteq> {} \\<Longrightarrow>\n    finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>))", "qed (simp add: reach_def)"], ["", "lemma wellformed_mojmir_opt:\n  assumes \"Only_G \\<G>\"\n  assumes \"finite \\<Sigma>\"\n  assumes \"range w \\<subseteq> \\<Sigma>\"\n  shows \"mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w\n     {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w\n     {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "have \"\\<forall>q \\<nu>. q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<longrightarrow> af_G_letter_abs_opt q \\<nu> \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>q \\<nu>.\n       q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<longrightarrow>\n       \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n       \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "using \\<open>Only_G \\<G>\\<close> af_G_letter_opt_sat_core_lifted"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<lbrakk>Only_G ?\\<G>; ?\\<G> \\<Turnstile>\\<^sub>P Rep ?\\<phi>\\<rbrakk>\n  \\<Longrightarrow> ?\\<G> \\<Turnstile>\\<^sub>P\n                    Rep (\\<up>af\\<^sub>G\\<^sub>\\<UU> ?\\<phi> ?\\<nu>)\n\ngoal (1 subgoal):\n 1. \\<forall>q \\<nu>.\n       q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<longrightarrow>\n       \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n       \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by auto"], ["proof (state)\nthis:\n  \\<forall>q \\<nu>.\n     q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<longrightarrow>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n     \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w\n     {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "thus \"?thesis\""], ["proof (prove)\nusing this:\n  \\<forall>q \\<nu>.\n     q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<longrightarrow>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n     \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w\n     {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "using finite_reach_af_G_opt assms"], ["proof (prove)\nusing this:\n  \\<forall>q \\<nu>.\n     q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<longrightarrow>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n     \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  finite (reach ?\\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs ?\\<phi>))\n  Only_G \\<G>\n  finite \\<Sigma>\n  range w \\<subseteq> \\<Sigma>\n\ngoal (1 subgoal):\n 1. mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w\n     {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by (unfold_locales; auto)"], ["proof (state)\nthis:\n  mojmir \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<phi>) w\n   {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal:\nNo subgoals!", "qed"], ["", "locale ltl_FG_to_rabin_opt_def = \n  fixes \n    \\<Sigma> :: \"'a set set\"\n  fixes\n    \\<phi> :: \"'a ltl\"\n  fixes\n    \\<G> :: \"'a ltl set\"\n  fixes \n    w :: \"'a set word\"\nbegin"], ["", "sublocale mojmir_to_rabin_def \\<Sigma> \"\\<up>af\\<^sub>G\\<^sub>\\<UU>\" \"Abs (Unf\\<^sub>G \\<phi>)\" w \"{q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "end"], ["", "locale ltl_FG_to_rabin_opt = ltl_FG_to_rabin_opt_def +\n  assumes \n    wellformed_\\<G>: \"Only_G \\<G>\"\n  assumes\n    bounded_w: \"range w \\<subseteq> \\<Sigma>\"\n  assumes\n    finite_\\<Sigma>: \"finite \\<Sigma>\"\nbegin"], ["", "sublocale mojmir_to_rabin \\<Sigma> \"\\<up>af\\<^sub>G\\<^sub>\\<UU>\" \"Abs (Unf\\<^sub>G \\<phi>)\" w \"{q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mojmir_to_rabin \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (Abs (Unf\\<^sub>G \\<phi>)) w {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. finite \\<Sigma>\n 2. finite\n     (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))\n 3. range w \\<subseteq> \\<Sigma>\n 4. \\<And>q \\<nu>.\n       q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n       \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n       \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "show \"\\<And>q \\<nu>. q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow> \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu> \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>q \\<nu>.\n       q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n       \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n       \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "using wellformed_\\<G> af_G_letter_opt_sat_core_lifted"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<lbrakk>Only_G ?\\<G>; ?\\<G> \\<Turnstile>\\<^sub>P Rep ?\\<phi>\\<rbrakk>\n  \\<Longrightarrow> ?\\<G> \\<Turnstile>\\<^sub>P\n                    Rep (\\<up>af\\<^sub>G\\<^sub>\\<UU> ?\\<phi> ?\\<nu>)\n\ngoal (1 subgoal):\n 1. \\<And>q \\<nu>.\n       q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n       \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n       \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by auto"], ["proof (state)\nthis:\n  ?q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<up>af\\<^sub>G\\<^sub>\\<UU> ?q ?\\<nu>\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (3 subgoals):\n 1. finite \\<Sigma>\n 2. finite\n     (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))\n 3. range w \\<subseteq> \\<Sigma>", "have nonempty_\\<Sigma>: \"\\<Sigma> \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Sigma> \\<noteq> {}", "using bounded_w"], ["proof (prove)\nusing this:\n  range w \\<subseteq> \\<Sigma>\n\ngoal (1 subgoal):\n 1. \\<Sigma> \\<noteq> {}", "by blast"], ["proof (state)\nthis:\n  \\<Sigma> \\<noteq> {}\n\ngoal (3 subgoals):\n 1. finite \\<Sigma>\n 2. finite\n     (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))\n 3. range w \\<subseteq> \\<Sigma>", "show \"finite (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))\" (is \"finite ?A\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))", "using finite_reach_af_G_opt wellformed_\\<G>"], ["proof (prove)\nusing this:\n  finite (reach ?\\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs ?\\<phi>))\n  Only_G \\<G>\n\ngoal (1 subgoal):\n 1. finite\n     (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))", "by blast"], ["proof (state)\nthis:\n  finite\n   (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>)))\n\ngoal (2 subgoals):\n 1. finite \\<Sigma>\n 2. range w \\<subseteq> \\<Sigma>", "qed (insert finite_\\<Sigma> bounded_w)"], ["", "end"], ["", "subsection \\<open>Equivalences between the standard and the eager Mojmir construction\\<close>"], ["", "context\n  fixes \n    \\<Sigma> :: \"'a set set\"\n  fixes \n    \\<phi> :: \"'a ltl\"\n  fixes\n    \\<G> :: \"'a ltl set\"\n  fixes\n    w :: \"'a set word\"\n  assumes \n    context_assms: \"Only_G \\<G>\" \"finite \\<Sigma>\" \"range w \\<subseteq> \\<Sigma>\"\nbegin\n\n\\<comment> \\<open>Create an interpretation of the mojmir locale for the standard construction\\<close>"], ["", "interpretation \\<MM>: ltl_FG_to_rabin \\<Sigma> \\<phi> \\<G> w"], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_FG_to_rabin \\<Sigma> \\<G> w", "by (unfold_locales; insert context_assms; auto)\n\n\\<comment> \\<open>Create an interpretation of the mojmir locale for the optimised construction\\<close>"], ["", "interpretation \\<UU>: ltl_FG_to_rabin_opt \\<Sigma> \\<phi> \\<G> w"], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_FG_to_rabin_opt \\<Sigma> \\<G> w", "by (unfold_locales; insert context_assms; auto)"], ["", "lemma unfold_token_run_eq:\n  assumes \"x \\<le> n\"\n  shows \"\\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)\" \n  (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "have \"x + (n - x) = n\" and \"x + (Suc n - x) = Suc n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x + (n - x) = n &&& x + (Suc n - x) = Suc n", "using assms"], ["proof (prove)\nusing this:\n  x \\<le> n\n\ngoal (1 subgoal):\n 1. x + (n - x) = n &&& x + (Suc n - x) = Suc n", "by arith+"], ["proof (state)\nthis:\n  x + (n - x) = n\n  x + (Suc n - x) = Suc n\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "have \"w [x \\<rightarrow> Suc n] = w [x \\<rightarrow> n] @ [w n]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w [x \\<rightarrow> Suc n] = w [x \\<rightarrow> n] @ [w n]", "unfolding upt_Suc subsequence_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. map w (if x \\<le> n then [x..<n] @ [n] else []) = map w [x..<n] @ [w n]", "using assms"], ["proof (prove)\nusing this:\n  x \\<le> n\n\ngoal (1 subgoal):\n 1. map w (if x \\<le> n then [x..<n] @ [n] else []) = map w [x..<n] @ [w n]", "by simp"], ["proof (state)\nthis:\n  w [x \\<rightarrow> Suc n] = w [x \\<rightarrow> n] @ [w n]\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "have \"af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]) = step (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>) (w [x \\<rightarrow> n])) (w n)\" (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]) =\n    step\n     (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>) (w [x \\<rightarrow> n]))\n     (w n)", "unfolding af_to_af_opt[symmetric] \\<open>w [x \\<rightarrow> Suc n] = w [x \\<rightarrow> n] @ [w n]\\<close> foldl_append"], ["proof (prove)\ngoal (1 subgoal):\n 1. af\\<^sub>G (af\\<^sub>G \\<phi> (w [x \\<rightarrow> n])) [w n] =\n    step (Unf\\<^sub>G (af\\<^sub>G \\<phi> (w [x \\<rightarrow> n]))) (w n)", "using af_letter_alt_def"], ["proof (prove)\nusing this:\n  af_letter ?\\<phi> ?\\<nu> = step (Unf ?\\<phi>) ?\\<nu>\n  af_G_letter ?\\<phi> ?\\<nu> = step (Unf\\<^sub>G ?\\<phi>) ?\\<nu>\n\ngoal (1 subgoal):\n 1. af\\<^sub>G (af\\<^sub>G \\<phi> (w [x \\<rightarrow> n])) [w n] =\n    step (Unf\\<^sub>G (af\\<^sub>G \\<phi> (w [x \\<rightarrow> n]))) (w n)", "by auto"], ["proof (state)\nthis:\n  af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]) =\n  step (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>) (w [x \\<rightarrow> n]))\n   (w n)\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "moreover"], ["proof (state)\nthis:\n  af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]) =\n  step (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>) (w [x \\<rightarrow> n]))\n   (w n)\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "have \"?lhs = Abs ?l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) =\n    Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))", "unfolding \\<MM>.token_run.simps run_foldl"], ["proof (prove)\ngoal (1 subgoal):\n 1. foldl \\<up>af\\<^sub>G (Abs \\<phi>) (map (suffix x w) [0..<Suc n - x]) =\n    Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))", "using subsequence_shift \\<open>x + (Suc n - x) = Suc n\\<close> Nat.add_0_right subsequence_def"], ["proof (prove)\nusing this:\n  suffix ?i ?w [?j \\<rightarrow> ?k] = ?w [?i + ?j \\<rightarrow> ?i + ?k]\n  x + (Suc n - x) = Suc n\n  ?m + 0 = ?m\n  ?w [?i \\<rightarrow> ?j] \\<equiv> map ?w [?i..<?j]\n\ngoal (1 subgoal):\n 1. foldl \\<up>af\\<^sub>G (Abs \\<phi>) (map (suffix x w) [0..<Suc n - x]) =\n    Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))", "by (metis af_G_abs.f_foldl_abs_alt_def af_G_abs.f_foldl_abs.abs_eq af_G_letter_abs_def)"], ["proof (state)\nthis:\n  \\<MM>.token_run x (Suc n) =\n  Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "moreover"], ["proof (state)\nthis:\n  \\<MM>.token_run x (Suc n) =\n  Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "have \"Abs ?r = ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Abs (step\n          (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n            (w [x \\<rightarrow> n]))\n          (w n)) =\n    \\<up>step (\\<UU>.token_run x n) (w n)", "unfolding \\<UU>.token_run.simps run_foldl subsequence_def[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. Abs (step\n          (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n            (w [x \\<rightarrow> n]))\n          (w n)) =\n    \\<up>step\n     (foldl \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G \\<phi>))\n       (prefix (n - x) (suffix x w)))\n     (w n)", "unfolding subsequence_shift \\<open>x + (n - x) = n\\<close> Nat.add_0_right af_G_letter_abs_opt_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Abs (step\n          (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n            (w [x \\<rightarrow> n]))\n          (w n)) =\n    \\<up>step\n     (foldl af_G_abs_opt.f_abs (Abs (Unf\\<^sub>G \\<phi>))\n       (w [x \\<rightarrow> n]))\n     (w n)", "unfolding af_G_abs_opt.f_foldl_abs_alt_def[unfolded af_G_abs_opt.f_foldl_abs.abs_eq, symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. Abs (step\n          (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n            (w [x \\<rightarrow> n]))\n          (w n)) =\n    \\<up>step\n     (Abs (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n            (w [x \\<rightarrow> n])))\n     (w n)", "by (simp add: step_abs.abs_eq)"], ["proof (state)\nthis:\n  Abs (step\n        (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n          (w [x \\<rightarrow> n]))\n        (w n)) =\n  \\<up>step (\\<UU>.token_run x n) (w n)\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "ultimately"], ["proof (chain)\npicking this:\n  af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]) =\n  step (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>) (w [x \\<rightarrow> n]))\n   (w n)\n  \\<MM>.token_run x (Suc n) =\n  Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))\n  Abs (step\n        (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n          (w [x \\<rightarrow> n]))\n        (w n)) =\n  \\<up>step (\\<UU>.token_run x n) (w n)", "show \"?lhs = ?rhs\""], ["proof (prove)\nusing this:\n  af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]) =\n  step (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>) (w [x \\<rightarrow> n]))\n   (w n)\n  \\<MM>.token_run x (Suc n) =\n  Abs (af\\<^sub>G \\<phi> (w [x \\<rightarrow> Suc n]))\n  Abs (step\n        (af\\<^sub>G\\<^sub>\\<UU> (Unf\\<^sub>G \\<phi>)\n          (w [x \\<rightarrow> n]))\n        (w n)) =\n  \\<up>step (\\<UU>.token_run x n) (w n)\n\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)", "by presburger"], ["proof (state)\nthis:\n  \\<MM>.token_run x (Suc n) = \\<up>step (\\<UU>.token_run x n) (w n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unfold_token_succeeds_eq:\n  \"\\<MM>.token_succeeds x = \\<UU>.token_succeeds x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.token_succeeds x = \\<UU>.token_succeeds x", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "assume \"\\<MM>.token_succeeds x\""], ["proof (state)\nthis:\n  \\<MM>.token_succeeds x\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "then"], ["proof (chain)\npicking this:\n  \\<MM>.token_succeeds x", "obtain n where \"\\<And>m. m > n \\<Longrightarrow> \\<MM>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  \\<MM>.token_succeeds x\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (\\<And>m.\n            n < m \\<Longrightarrow>\n            \\<MM>.token_run x m\n            \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<MM>.token_succeeds_alt_def MOST_nat"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n>m.\n        \\<MM>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (\\<And>m.\n            n < m \\<Longrightarrow>\n            \\<MM>.token_run x m\n            \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  n < ?m \\<Longrightarrow>\n  \\<MM>.token_run x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "then"], ["proof (chain)\npicking this:\n  n < ?m \\<Longrightarrow>\n  \\<MM>.token_run x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "obtain n where \"\\<MM>.token_run x (Suc n) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\" and \"x \\<le> n\""], ["proof (prove)\nusing this:\n  n < ?m \\<Longrightarrow>\n  \\<MM>.token_run x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>\\<MM>.token_run x (Suc n)\n                 \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q};\n         x \\<le> n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases \"x \\<le> n\") auto"], ["proof (state)\nthis:\n  \\<MM>.token_run x (Suc n) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  x \\<le> n\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "hence 1: \"\\<G> \\<Turnstile>\\<^sub>P Rep (step_abs (\\<UU>.token_run x n) (w n))\""], ["proof (prove)\nusing this:\n  \\<MM>.token_run x (Suc n) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  x \\<le> n\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))", "using unfold_token_run_eq"], ["proof (prove)\nusing this:\n  \\<MM>.token_run x (Suc n) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  x \\<le> n\n  ?x \\<le> ?n \\<Longrightarrow>\n  \\<MM>.token_run ?x (Suc ?n) = \\<up>step (\\<UU>.token_run ?x ?n) (w ?n)\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))", "by fastforce"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "moreover"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "have \"Suc n - x = Suc (n - x)\" and \"x + (n - x) = n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc n - x = Suc (n - x) &&& x + (n - x) = n", "using \\<open>x \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  x \\<le> n\n\ngoal (1 subgoal):\n 1. Suc n - x = Suc (n - x) &&& x + (n - x) = n", "by arith+"], ["proof (state)\nthis:\n  Suc n - x = Suc (n - x)\n  x + (n - x) = n\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "ultimately"], ["proof (chain)\npicking this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n  Suc n - x = Suc (n - x)\n  x + (n - x) = n", "have \"\\<UU>.token_run x (Suc n) = Unf\\<^sub>G_abs (step_abs (\\<UU>.token_run x n) (w n))\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n  Suc n - x = Suc (n - x)\n  x + (n - x) = n\n\ngoal (1 subgoal):\n 1. \\<UU>.token_run x (Suc n) =\n    \\<up>Unf\\<^sub>G (\\<up>step (\\<UU>.token_run x n) (w n))", "unfolding af_G_letter_abs_opt_split"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n  Suc n - x = Suc (n - x)\n  x + (n - x) = n\n\ngoal (1 subgoal):\n 1. \\<UU>.token_run x (Suc n) =\n    \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<UU>.token_run x n) (w n)", "by simp"], ["proof (state)\nthis:\n  \\<UU>.token_run x (Suc n) =\n  \\<up>Unf\\<^sub>G (\\<up>step (\\<UU>.token_run x n) (w n))\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "hence \"\\<G> \\<Turnstile>\\<^sub>P Rep (\\<UU>.token_run x (Suc n))\""], ["proof (prove)\nusing this:\n  \\<UU>.token_run x (Suc n) =\n  \\<up>Unf\\<^sub>G (\\<up>step (\\<UU>.token_run x n) (w n))\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P Rep (\\<UU>.token_run x (Suc n))", "using 1 Unf\\<^sub>G_\\<G>[OF \\<open>Only_G \\<G>\\<close>]"], ["proof (prove)\nusing this:\n  \\<UU>.token_run x (Suc n) =\n  \\<up>Unf\\<^sub>G (\\<up>step (\\<UU>.token_run x n) (w n))\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Unf\\<^sub>G ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P Rep (\\<UU>.token_run x (Suc n))", "by (simp add: Rep_Abs_equiv Unf\\<^sub>G_abs_def)"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<UU>.token_run x (Suc n))\n\ngoal (2 subgoals):\n 1. \\<MM>.token_succeeds x \\<Longrightarrow> \\<UU>.token_succeeds x\n 2. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "thus \"\\<UU>.token_succeeds x\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<UU>.token_run x (Suc n))\n\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x", "unfolding \\<UU>.token_succeeds_def"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<UU>.token_run x (Suc n))\n\ngoal (1 subgoal):\n 1. \\<exists>n.\n       \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by blast"], ["proof (state)\nthis:\n  \\<UU>.token_succeeds x\n\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "assume \"\\<UU>.token_succeeds x\""], ["proof (state)\nthis:\n  \\<UU>.token_succeeds x\n\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "then"], ["proof (chain)\npicking this:\n  \\<UU>.token_succeeds x", "obtain n where \"\\<And>m. m > n \\<Longrightarrow> \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  \\<UU>.token_succeeds x\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (\\<And>m.\n            n < m \\<Longrightarrow>\n            \\<UU>.token_run x m\n            \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<UU>.token_succeeds_alt_def MOST_nat"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n>m.\n        \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        (\\<And>m.\n            n < m \\<Longrightarrow>\n            \\<UU>.token_run x m\n            \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  n < ?m \\<Longrightarrow>\n  \\<UU>.token_run x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "then"], ["proof (chain)\npicking this:\n  n < ?m \\<Longrightarrow>\n  \\<UU>.token_run x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "obtain n where \"\\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\" and \"x \\<le> n\""], ["proof (prove)\nusing this:\n  n < ?m \\<Longrightarrow>\n  \\<UU>.token_run x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>\\<UU>.token_run x n\n                 \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q};\n         x \\<le> n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases \"x \\<le> n\") (fastforce, auto)"], ["proof (state)\nthis:\n  \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  x \\<le> n\n\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "hence \"\\<G> \\<Turnstile>\\<^sub>P Rep (step_abs (\\<UU>.token_run x n) (w n))\""], ["proof (prove)\nusing this:\n  \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  x \\<le> n\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))", "using step_\\<G>[OF \\<open>Only_G \\<G>\\<close>] Rep_step[unfolded ltl_prop_equiv_def]"], ["proof (prove)\nusing this:\n  \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  x \\<le> n\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P step ?\\<phi> ?\\<nu>\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step ?\\<Phi> ?\\<nu>) =\n     \\<A> \\<Turnstile>\\<^sub>P step (Rep ?\\<Phi>) ?\\<nu>\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))", "by blast"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n\ngoal (1 subgoal):\n 1. \\<UU>.token_succeeds x \\<Longrightarrow> \\<MM>.token_succeeds x", "thus \"\\<MM>.token_succeeds x\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x n) (w n))\n\ngoal (1 subgoal):\n 1. \\<MM>.token_succeeds x", "unfolding \\<MM>.token_succeeds_def unfold_token_run_eq[OF \\<open>x \\<le> n\\<close>, symmetric]"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P Rep (\\<MM>.token_run x (Suc n))\n\ngoal (1 subgoal):\n 1. \\<exists>n.\n       \\<MM>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by blast"], ["proof (state)\nthis:\n  \\<MM>.token_succeeds x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma unfold_accept_eq:\n  \"\\<MM>.accept = \\<UU>.accept\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.accept\\<^sub>R' = \\<UU>.accept", "unfolding \\<MM>.accept_def \\<UU>.accept_def MOST_nat_le unfold_token_succeeds_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>m. \\<forall>n\\<ge>m. \\<UU>.token_succeeds n) =\n    (\\<exists>m. \\<forall>n\\<ge>m. \\<UU>.token_succeeds n)", ".."], ["", "lemma unfold_\\<S>_eq:\n  assumes \"\\<MM>.accept\"\n  shows \"\\<forall>\\<^sub>\\<infinity>n. \\<MM>.\\<S> (Suc n) = (\\<lambda>q. step_abs q (w n)) ` (\\<UU>.\\<S> n) \\<union> {Abs \\<phi>} \\<union> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "proof -\n  \\<comment> \\<open>Obtain lower bounds for proof\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "obtain i\\<^sub>\\<MM> where i\\<^sub>\\<MM>_def: \"\\<MM>.smallest_accepting_rank = Some i\\<^sub>\\<MM>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>\\<MM>.\n        \\<MM>.smallest_accepting_rank\\<^sub>R =\n        Some i\\<^sub>\\<MM> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  \\<MM>.accept\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>\\<MM>.\n        \\<MM>.smallest_accepting_rank\\<^sub>R =\n        Some i\\<^sub>\\<MM> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<MM>.smallest_accepting_rank_def"], ["proof (prove)\nusing this:\n  \\<MM>.accept\\<^sub>R'\n\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>\\<MM>.\n        (if \\<MM>.accept\\<^sub>R'\n         then Some\n               (LEAST i.\n                   finite \\<MM>.fail \\<and>\n                   finite (\\<MM>.merge i) \\<and> infinite (\\<MM>.succeed i))\n         else None) =\n        Some i\\<^sub>\\<MM> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  \\<MM>.smallest_accepting_rank\\<^sub>R = Some i\\<^sub>\\<MM>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "obtain n\\<^sub>\\<MM> where n\\<^sub>\\<MM>_def: \"\\<And>x m. m \\<ge> n\\<^sub>\\<MM> \\<Longrightarrow> \\<MM>.token_succeeds x = (m < x \\<or> (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x m = Some j) \\<or> \\<MM>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n\\<^sub>\\<MM>.\n        (\\<And>x m.\n            n\\<^sub>\\<MM> \\<le> m \\<Longrightarrow>\n            \\<MM>.token_succeeds x =\n            (m < x \\<or>\n             (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x m = Some j) \\<or>\n             \\<MM>.token_run x m\n             \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<MM>.token_smallest_accepting_rank[OF i\\<^sub>\\<MM>_def]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>n.\n     \\<forall>x.\n        \\<MM>.token_succeeds x =\n        (n < x \\<or>\n         (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x n = Some j) \\<or>\n         \\<MM>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. (\\<And>n\\<^sub>\\<MM>.\n        (\\<And>x m.\n            n\\<^sub>\\<MM> \\<le> m \\<Longrightarrow>\n            \\<MM>.token_succeeds x =\n            (m < x \\<or>\n             (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x m = Some j) \\<or>\n             \\<MM>.token_run x m\n             \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<forall>x.\n           \\<MM>.token_succeeds x =\n           (n < x \\<or>\n            (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x n = Some j) \\<or>\n            \\<MM>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. (\\<And>n\\<^sub>\\<MM>.\n        (\\<And>x m.\n            n\\<^sub>\\<MM> \\<le> m \\<Longrightarrow>\n            \\<MM>.token_succeeds x =\n            (m < x \\<or>\n             (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x m = Some j) \\<or>\n             \\<MM>.token_run x m\n             \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  n\\<^sub>\\<MM> \\<le> ?m \\<Longrightarrow>\n  \\<MM>.token_succeeds ?x =\n  (?m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank ?x ?m = Some j) \\<or>\n   \\<MM>.token_run ?x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "have \"\\<UU>.accept\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<UU>.accept", "using assms unfold_accept_eq"], ["proof (prove)\nusing this:\n  \\<MM>.accept\\<^sub>R'\n  \\<MM>.accept\\<^sub>R' = \\<UU>.accept\n\ngoal (1 subgoal):\n 1. \\<UU>.accept", "by simp"], ["proof (state)\nthis:\n  \\<UU>.accept\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "obtain i\\<^sub>\\<UU> where i\\<^sub>\\<UU>_def: \"\\<UU>.smallest_accepting_rank = Some i\\<^sub>\\<UU>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>\\<UU>.\n        \\<UU>.smallest_accepting_rank = Some i\\<^sub>\\<UU> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>\\<UU>.accept\\<close>"], ["proof (prove)\nusing this:\n  \\<UU>.accept\n\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>\\<UU>.\n        \\<UU>.smallest_accepting_rank = Some i\\<^sub>\\<UU> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<UU>.smallest_accepting_rank_def"], ["proof (prove)\nusing this:\n  \\<UU>.accept\n\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>\\<UU>.\n        (if \\<UU>.accept\n         then Some\n               (LEAST i.\n                   finite \\<UU>.fail \\<and>\n                   finite (\\<UU>.merge i) \\<and> infinite (\\<UU>.succeed i))\n         else None) =\n        Some i\\<^sub>\\<UU> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  \\<UU>.smallest_accepting_rank = Some i\\<^sub>\\<UU>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "obtain n\\<^sub>\\<UU> where n\\<^sub>\\<UU>_def: \"\\<And>x m. m \\<ge> n\\<^sub>\\<UU> \\<Longrightarrow> \\<UU>.token_succeeds x = (m < x \\<or> (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or> \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n\\<^sub>\\<UU>.\n        (\\<And>x m.\n            n\\<^sub>\\<UU> \\<le> m \\<Longrightarrow>\n            \\<UU>.token_succeeds x =\n            (m < x \\<or>\n             (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n             \\<UU>.token_run x m\n             \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<UU>.token_smallest_accepting_rank[OF i\\<^sub>\\<UU>_def]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>n.\n     \\<forall>x.\n        \\<UU>.token_succeeds x =\n        (n < x \\<or>\n         (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x n = Some j) \\<or>\n         \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. (\\<And>n\\<^sub>\\<UU>.\n        (\\<And>x m.\n            n\\<^sub>\\<UU> \\<le> m \\<Longrightarrow>\n            \\<UU>.token_succeeds x =\n            (m < x \\<or>\n             (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n             \\<UU>.token_run x m\n             \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<forall>x.\n           \\<UU>.token_succeeds x =\n           (n < x \\<or>\n            (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x n = Some j) \\<or>\n            \\<UU>.token_run x n \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. (\\<And>n\\<^sub>\\<UU>.\n        (\\<And>x m.\n            n\\<^sub>\\<UU> \\<le> m \\<Longrightarrow>\n            \\<UU>.token_succeeds x =\n            (m < x \\<or>\n             (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n             \\<UU>.token_run x m\n             \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  n\\<^sub>\\<UU> \\<le> ?m \\<Longrightarrow>\n  \\<UU>.token_succeeds ?x =\n  (?m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank ?x ?m = Some j) \\<or>\n   \\<UU>.token_run ?x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>n.\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "proof (unfold MOST_nat_le, rule, rule, rule)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?m \\<le> n \\<Longrightarrow>\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?m \\<le> n \\<Longrightarrow>\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "assume \"m \\<ge> max n\\<^sub>\\<MM> n\\<^sub>\\<UU>\""], ["proof (state)\nthis:\n  max n\\<^sub>\\<MM> n\\<^sub>\\<UU> \\<le> m\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?m \\<le> n \\<Longrightarrow>\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "hence \"m \\<ge> n\\<^sub>\\<MM>\" and \"m \\<ge> n\\<^sub>\\<UU>\" and \"Suc m \\<ge> n\\<^sub>\\<MM>\""], ["proof (prove)\nusing this:\n  max n\\<^sub>\\<MM> n\\<^sub>\\<UU> \\<le> m\n\ngoal (1 subgoal):\n 1. n\\<^sub>\\<MM> \\<le> m &&&\n    n\\<^sub>\\<UU> \\<le> m &&& n\\<^sub>\\<MM> \\<le> Suc m", "by simp+\n    \\<comment> \\<open>Using the properties of @{term n\\<^sub>\\<MM>} and @{term n\\<^sub>\\<UU>} and the lemma @{thm unfold_token_succeeds_eq}, \n       we prove that the behaviour of x in @{text \\<MM>} and @{text \\<UU>} is similar in regards to \n       creation time, accepting rank or final states.\\<close>"], ["proof (state)\nthis:\n  n\\<^sub>\\<MM> \\<le> m\n  n\\<^sub>\\<UU> \\<le> m\n  n\\<^sub>\\<MM> \\<le> Suc m\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?m \\<le> n \\<Longrightarrow>\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "hence token_trans: \"\\<And>x. Suc m < x \\<or> (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or> \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n      \\<longleftrightarrow> m < x \\<or> (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or> \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  n\\<^sub>\\<MM> \\<le> m\n  n\\<^sub>\\<UU> \\<le> m\n  n\\<^sub>\\<MM> \\<le> Suc m\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (Suc m < x \\<or>\n        (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n        \\<MM>.token_run x (Suc m)\n        \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n       (m < x \\<or>\n        (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n        \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})", "using n\\<^sub>\\<MM>_def n\\<^sub>\\<UU>_def"], ["proof (prove)\nusing this:\n  n\\<^sub>\\<MM> \\<le> m\n  n\\<^sub>\\<UU> \\<le> m\n  n\\<^sub>\\<MM> \\<le> Suc m\n  n\\<^sub>\\<MM> \\<le> ?m \\<Longrightarrow>\n  \\<MM>.token_succeeds ?x =\n  (?m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank ?x ?m = Some j) \\<or>\n   \\<MM>.token_run ?x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n  n\\<^sub>\\<UU> \\<le> ?m \\<Longrightarrow>\n  \\<UU>.token_succeeds ?x =\n  (?m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank ?x ?m = Some j) \\<or>\n   \\<UU>.token_run ?x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (Suc m < x \\<or>\n        (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n        \\<MM>.token_run x (Suc m)\n        \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n       (m < x \\<or>\n        (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n        \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})", "unfolding unfold_token_succeeds_eq"], ["proof (prove)\nusing this:\n  n\\<^sub>\\<MM> \\<le> m\n  n\\<^sub>\\<UU> \\<le> m\n  n\\<^sub>\\<MM> \\<le> Suc m\n  n\\<^sub>\\<MM> \\<le> ?m \\<Longrightarrow>\n  \\<UU>.token_succeeds ?x =\n  (?m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank ?x ?m = Some j) \\<or>\n   \\<MM>.token_run ?x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n  n\\<^sub>\\<UU> \\<le> ?m \\<Longrightarrow>\n  \\<UU>.token_succeeds ?x =\n  (?m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank ?x ?m = Some j) \\<or>\n   \\<UU>.token_run ?x ?m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (Suc m < x \\<or>\n        (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n        \\<MM>.token_run x (Suc m)\n        \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n       (m < x \\<or>\n        (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n        \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})", "by presburger"], ["proof (state)\nthis:\n  (Suc m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank ?x (Suc m) = Some j) \\<or>\n   \\<MM>.token_run ?x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n  (m < ?x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank ?x m = Some j) \\<or>\n   \\<UU>.token_run ?x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?m \\<le> n \\<Longrightarrow>\n       \\<MM>.\\<S>\\<^sub>R (Suc n) =\n       (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n       {Abs \\<phi>} \\<union>\n       {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "show \"\\<MM>.\\<S> (Suc m) = (\\<lambda>q. step_abs q (w m)) ` (\\<UU>.\\<S> m) \\<union> {Abs \\<phi>} \\<union> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\" (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m) =\n    (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "fix q"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "assume \"\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\""], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "moreover"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "then"], ["proof (chain)\npicking this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j", "obtain x where q_def: \"q = \\<MM>.token_run x (Suc m)\" and \"x \\<le> Suc m\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>q = \\<MM>.token_run x (Suc m); x \\<le> Suc m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<MM>.push_down_state_rank_tokens"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n  \\<MM>.state_rank ?q ?n = Some ?i \\<Longrightarrow>\n  \\<MM>.configuration ?q ?n \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>q = \\<MM>.token_run x (Suc m); x \\<le> Suc m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  q = \\<MM>.token_run x (Suc m)\n  x \\<le> Suc m\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n  q = \\<MM>.token_run x (Suc m)\n  x \\<le> Suc m", "have \"\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n  q = \\<MM>.token_run x (Suc m)\n  x \\<le> Suc m\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j", "using \\<MM>.rank_eq_state_rank"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j\n  q = \\<MM>.token_run x (Suc m)\n  x \\<le> Suc m\n  ?x \\<le> ?n \\<Longrightarrow>\n  \\<MM>.rank ?x ?n = \\<MM>.state_rank (\\<MM>.token_run ?x ?n) ?n\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j", "by metis"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "hence token_cases: \"(\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or> \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<or> x = Suc m\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n    \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<or>\n    x = Suc m", "using token_trans[of x] \\<MM>.rank_Some_time"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j\n  (Suc m < x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n   \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n  (m < x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n   \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n  \\<MM>.rank ?x ?n = Some ?j \\<Longrightarrow> ?x \\<le> ?n\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n    \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<or>\n    x = Suc m", "by fastforce"], ["proof (state)\nthis:\n  (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n  \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<or>\n  x = Suc m\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "have \"q \\<in> ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "proof (cases \"x \\<noteq> Suc m\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "case True"], ["proof (state)\nthis:\n  x \\<noteq> Suc m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "hence \"x \\<le> m\""], ["proof (prove)\nusing this:\n  x \\<noteq> Suc m\n\ngoal (1 subgoal):\n 1. x \\<le> m", "using \\<open>x \\<le> Suc m\\<close>"], ["proof (prove)\nusing this:\n  x \\<noteq> Suc m\n  x \\<le> Suc m\n\ngoal (1 subgoal):\n 1. x \\<le> m", "by arith"], ["proof (state)\nthis:\n  x \\<le> m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "have \"\\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow> \\<G> \\<Turnstile>\\<^sub>P Rep q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<UU>.token_run x m\n    \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n    \\<G> \\<Turnstile>\\<^sub>P Rep q", "unfolding \\<open>q = \\<MM>.token_run x (Suc m)\\<close> unfold_token_run_eq[OF \\<open>x \\<le> m\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<UU>.token_run x m\n    \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n    \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x m) (w m))", "using Rep_step[unfolded ltl_prop_equiv_def] step_\\<G>[OF \\<open>Only_G \\<G>\\<close>]"], ["proof (prove)\nusing this:\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step ?\\<Phi> ?\\<nu>) =\n     \\<A> \\<Turnstile>\\<^sub>P step (Rep ?\\<Phi>) ?\\<nu>\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P step ?\\<phi> ?\\<nu>\n\ngoal (1 subgoal):\n 1. \\<UU>.token_run x m\n    \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n    \\<G> \\<Turnstile>\\<^sub>P Rep (\\<up>step (\\<UU>.token_run x m) (w m))", "by blast"], ["proof (state)\nthis:\n  \\<UU>.token_run x m\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Rep q\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "moreover"], ["proof (state)\nthis:\n  \\<UU>.token_run x m\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Rep q\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "{"], ["proof (state)\nthis:\n  \\<UU>.token_run x m\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Rep q\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "assume \"\\<exists>j \\<ge> i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\""], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "moreover"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "define q' where \"q' = \\<UU>.token_run x m\""], ["proof (state)\nthis:\n  q' = \\<UU>.token_run x m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n  q' = \\<UU>.token_run x m", "have \"\\<exists>j \\<ge> i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n  q' = \\<UU>.token_run x m\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j", "unfolding \\<UU>.rank_eq_state_rank[OF \\<open>x \\<le> m\\<close>] q'_def"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>.\n     \\<UU>.state_rank (\\<UU>.token_run x m) m = Some j\n  \\<UU>.token_run x m = \\<UU>.token_run x m\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>.\n       \\<UU>.state_rank (\\<UU>.token_run x m) m = Some j", "by blast"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "hence \"q' \\<in> \\<UU>.\\<S> m\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n\ngoal (1 subgoal):\n 1. q' \\<in> \\<UU>.\\<S> m", "using assms i\\<^sub>\\<UU>_def"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n  \\<MM>.accept\\<^sub>R'\n  \\<UU>.smallest_accepting_rank = Some i\\<^sub>\\<UU>\n\ngoal (1 subgoal):\n 1. q' \\<in> \\<UU>.\\<S> m", "by simp"], ["proof (state)\nthis:\n  q' \\<in> \\<UU>.\\<S> m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "moreover"], ["proof (state)\nthis:\n  q' \\<in> \\<UU>.\\<S> m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "have \"q = step_abs q' (w m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. q = \\<up>step q' (w m)", "unfolding q_def q'_def unfold_token_run_eq[OF \\<open>x \\<le> m\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<up>step (\\<UU>.token_run x m) (w m) =\n    \\<up>step (\\<UU>.token_run x m) (w m)", ".."], ["proof (state)\nthis:\n  q = \\<up>step q' (w m)\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "ultimately"], ["proof (chain)\npicking this:\n  q' \\<in> \\<UU>.\\<S> m\n  q = \\<up>step q' (w m)", "have \"q \\<in> (\\<lambda>q. step_abs q (w m)) ` (\\<UU>.\\<S> m)\""], ["proof (prove)\nusing this:\n  q' \\<in> \\<UU>.\\<S> m\n  q = \\<up>step q' (w m)\n\ngoal (1 subgoal):\n 1. q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m", "by blast"], ["proof (state)\nthis:\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "}"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j \\<Longrightarrow>\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m\n\ngoal (2 subgoals):\n 1. x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "ultimately"], ["proof (chain)\npicking this:\n  \\<UU>.token_run x m\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Rep q\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j \\<Longrightarrow>\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<UU>.token_run x m\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Rep q\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j \\<Longrightarrow>\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m\n\ngoal (1 subgoal):\n 1. q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "using token_cases True"], ["proof (prove)\nusing this:\n  \\<UU>.token_run x m\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow>\n  \\<G> \\<Turnstile>\\<^sub>P Rep q\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j \\<Longrightarrow>\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m\n  (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n  \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<or>\n  x = Suc m\n  x \\<noteq> Suc m\n\ngoal (1 subgoal):\n 1. q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by blast"], ["proof (state)\nthis:\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n          {Abs \\<phi>} \\<union>\n          {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<not> x \\<noteq> Suc m \\<Longrightarrow>\n    q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n            {Abs \\<phi>} \\<union>\n            {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "qed (simp add: q_def)"], ["proof (state)\nthis:\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n          {Abs \\<phi>} \\<union>\n          {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "}"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>.\n     \\<MM>.state_rank ?q2 (Suc m) = Some j \\<Longrightarrow>\n  ?q2\n  \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n        {Abs \\<phi>} \\<union>\n        {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (2 subgoals):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n 2. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "thus \"?lhs \\<subseteq> ?rhs\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>.\n     \\<MM>.state_rank ?q2 (Suc m) = Some j \\<Longrightarrow>\n  ?q2\n  \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n        {Abs \\<phi>} \\<union>\n        {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc m)\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "unfolding \\<MM>.\\<S>.simps i\\<^sub>\\<MM>_def option.sel"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<MM>.\n     \\<MM>.state_rank ?q2 (Suc m) = Some j \\<Longrightarrow>\n  ?q2\n  \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n        {Abs \\<phi>} \\<union>\n        {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<union>\n    {q. \\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j}\n    \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n                {Abs \\<phi>} \\<union>\n                {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by blast"], ["proof (state)\nthis:\n  \\<MM>.\\<S>\\<^sub>R (Suc m)\n  \\<subseteq> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n              {Abs \\<phi>} \\<union>\n              {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "fix q"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "assume \"q \\<in> (\\<lambda>q. step_abs q (w m)) ` (\\<UU>.\\<S> m)\""], ["proof (state)\nthis:\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "then"], ["proof (chain)\npicking this:\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m", "obtain q' where q_def: \"q = step_abs q' (w m)\" and \"q' \\<in> \\<UU>.\\<S> m\""], ["proof (prove)\nusing this:\n  q \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m\n\ngoal (1 subgoal):\n 1. (\\<And>q'.\n        \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  q = \\<up>step q' (w m)\n  q' \\<in> \\<UU>.\\<S> m\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "hence \"q \\<in> ?lhs\""], ["proof (prove)\nusing this:\n  q = \\<up>step q' (w m)\n  q' \\<in> \\<UU>.\\<S> m\n\ngoal (1 subgoal):\n 1. q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "proof (cases \"\\<G> \\<Turnstile>\\<^sub>P Rep q'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "case False"], ["proof (state)\nthis:\n  \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "hence \"\\<exists>j \\<ge> i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\""], ["proof (prove)\nusing this:\n  \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j", "using \\<open>q' \\<in> \\<UU>.\\<S> m\\<close>"], ["proof (prove)\nusing this:\n  \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\n  q' \\<in> \\<UU>.\\<S> m\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j", "unfolding \\<UU>.\\<S>.simps i\\<^sub>\\<UU>_def option.sel"], ["proof (prove)\nusing this:\n  \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\n  q' \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<union>\n           {q. \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q m = Some j}\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j", "by blast"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "moreover"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "then"], ["proof (chain)\npicking this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j", "obtain x where q'_def: \"q' = \\<UU>.token_run x m\" and \"x \\<le> m\" and \"x \\<le> Suc m\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>q' = \\<UU>.token_run x m; x \\<le> m; x \\<le> Suc m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<UU>.push_down_state_rank_tokens"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n  \\<UU>.state_rank ?q ?n = Some ?i \\<Longrightarrow>\n  \\<UU>.configuration ?q ?n \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>q' = \\<UU>.token_run x m; x \\<le> m; x \\<le> Suc m\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  q' = \\<UU>.token_run x m\n  x \\<le> m\n  x \\<le> Suc m\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n  q' = \\<UU>.token_run x m\n  x \\<le> m\n  x \\<le> Suc m", "have \"\\<exists>j \\<ge> i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.state_rank q' m = Some j\n  q' = \\<UU>.token_run x m\n  x \\<le> m\n  x \\<le> Suc m\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j", "unfolding \\<UU>.rank_eq_state_rank[OF \\<open>x \\<le> m\\<close>] q'_def"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>.\n     \\<UU>.state_rank (\\<UU>.token_run x m) m = Some j\n  \\<UU>.token_run x m = \\<UU>.token_run x m\n  x \\<le> m\n  x \\<le> Suc m\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i\\<^sub>\\<UU>.\n       \\<UU>.state_rank (\\<UU>.token_run x m) m = Some j", "by blast"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "hence \"(\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or> \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n    \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "using token_trans[of x] \\<UU>.rank_Some_time"], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j\n  (Suc m < x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n   \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n  (m < x \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank x m = Some j) \\<or>\n   \\<UU>.token_run x m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n  \\<UU>.rank ?x ?n = Some ?j \\<Longrightarrow> ?x \\<le> ?n\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n    \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by fastforce"], ["proof (state)\nthis:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n  \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "moreover"], ["proof (state)\nthis:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n  \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "have \"\\<MM>.token_run x (Suc m) = q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.token_run x (Suc m) = q", "unfolding q_def q'_def unfold_token_run_eq[OF \\<open>x \\<le> m\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<up>step (\\<UU>.token_run x m) (w m) =\n    \\<up>step (\\<UU>.token_run x m) (w m)", ".."], ["proof (state)\nthis:\n  \\<MM>.token_run x (Suc m) = q\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n  \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  \\<MM>.token_run x (Suc m) = q", "have \"(\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j) \\<or> q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n  \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  \\<MM>.token_run x (Suc m) = q\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<MM>.\n        \\<MM>.state_rank q (Suc m) = Some j) \\<or>\n    q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "using \\<MM>.rank_eq_state_rank[OF \\<open>x \\<le> Suc m\\<close>]"], ["proof (prove)\nusing this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank x (Suc m) = Some j) \\<or>\n  \\<MM>.token_run x (Suc m) \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  \\<MM>.token_run x (Suc m) = q\n  \\<MM>.rank x (Suc m) =\n  \\<MM>.state_rank (\\<MM>.token_run x (Suc m)) (Suc m)\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<MM>.\n        \\<MM>.state_rank q (Suc m) = Some j) \\<or>\n    q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}", "by metis"], ["proof (state)\nthis:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j) \\<or>\n  q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n 2. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<not> \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j) \\<or>\n  q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "unfolding \\<MM>.\\<S>.simps option.sel i\\<^sub>\\<MM>_def"], ["proof (prove)\nusing this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.state_rank q (Suc m) = Some j) \\<or>\n  q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. q \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<union>\n            {q. \\<exists>j\\<ge>i\\<^sub>\\<MM>.\n                   \\<MM>.state_rank q (Suc m) = Some j}", "by blast"], ["proof (state)\nthis:\n  q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>q = \\<up>step q' (w m); q' \\<in> \\<UU>.\\<S> m;\n     \\<G> \\<Turnstile>\\<^sub>P Rep q'\\<rbrakk>\n    \\<Longrightarrow> q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "qed (insert step_\\<G>[OF \\<open>Only_G \\<G>\\<close>, of \"Rep q'\"], unfold q_def Rep_step[unfolded ltl_prop_equiv_def, rule_format, symmetric], auto)"], ["proof (state)\nthis:\n  q \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "}"], ["proof (state)\nthis:\n  ?q2 \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<Longrightarrow>\n  ?q2 \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "moreover"], ["proof (state)\nthis:\n  ?q2 \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<Longrightarrow>\n  ?q2 \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "have \"(\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or> \\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<MM>.\n        \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or>\n    \\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)", "using token_trans[of \"Suc m\"]"], ["proof (prove)\nusing this:\n  (Suc m < Suc m \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or>\n   \\<MM>.token_run (Suc m) (Suc m)\n   \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}) =\n  (m < Suc m \\<or>\n   (\\<exists>j\\<ge>i\\<^sub>\\<UU>. \\<UU>.rank (Suc m) m = Some j) \\<or>\n   \\<UU>.token_run (Suc m) m \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q})\n\ngoal (1 subgoal):\n 1. (\\<exists>j\\<ge>i\\<^sub>\\<MM>.\n        \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or>\n    \\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)", "by simp"], ["proof (state)\nthis:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or>\n  \\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "hence \"Abs \\<phi> \\<in> ?lhs\""], ["proof (prove)\nusing this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or>\n  \\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)\n\ngoal (1 subgoal):\n 1. Abs \\<phi> \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "using i\\<^sub>\\<MM>_def \\<MM>.rank_eq_state_rank[OF order_refl]"], ["proof (prove)\nusing this:\n  (\\<exists>j\\<ge>i\\<^sub>\\<MM>. \\<MM>.rank (Suc m) (Suc m) = Some j) \\<or>\n  \\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)\n  \\<MM>.smallest_accepting_rank\\<^sub>R = Some i\\<^sub>\\<MM>\n  \\<MM>.rank ?n ?n = \\<MM>.state_rank (\\<MM>.token_run ?n ?n) ?n\n\ngoal (1 subgoal):\n 1. Abs \\<phi> \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "by (cases \"\\<G> \\<Turnstile>\\<^sub>P Rep (Abs \\<phi>)\") simp+"], ["proof (state)\nthis:\n  Abs \\<phi> \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "ultimately"], ["proof (chain)\npicking this:\n  ?q2 \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<Longrightarrow>\n  ?q2 \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n  Abs \\<phi> \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)", "show \"?lhs \\<supseteq> ?rhs\""], ["proof (prove)\nusing this:\n  ?q2 \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<Longrightarrow>\n  ?q2 \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n  Abs \\<phi> \\<in> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)", "unfolding \\<MM>.\\<S>.simps"], ["proof (prove)\nusing this:\n  ?q2 \\<in> (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<Longrightarrow>\n  ?q2\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<union>\n        {q. \\<exists>j\\<ge>the \\<MM>.smallest_accepting_rank\\<^sub>R.\n               \\<MM>.state_rank q (Suc m) = Some j}\n  Abs \\<phi>\n  \\<in> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<union>\n        {q. \\<exists>j\\<ge>the \\<MM>.smallest_accepting_rank\\<^sub>R.\n               \\<MM>.state_rank q (Suc m) = Some j}\n\ngoal (1 subgoal):\n 1. (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n    {Abs \\<phi>} \\<union>\n    {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n    \\<subseteq> {q. \\<G> \\<Turnstile>\\<^sub>P Rep q} \\<union>\n                {q. \\<exists>j\\<ge>the \\<MM>.smallest_accepting_rank\\<^sub>R.\n                       \\<MM>.state_rank q (Suc m) = Some j}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n  {Abs \\<phi>} \\<union>\n  {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n  \\<subseteq> \\<MM>.\\<S>\\<^sub>R (Suc m)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<MM>.\\<S>\\<^sub>R (Suc m) =\n  (\\<lambda>q. \\<up>step q (w m)) ` \\<UU>.\\<S> m \\<union>\n  {Abs \\<phi>} \\<union>\n  {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>n.\n     \\<MM>.\\<S>\\<^sub>R (Suc n) =\n     (\\<lambda>q. \\<up>step q (w n)) ` \\<UU>.\\<S> n \\<union>\n     {Abs \\<phi>} \\<union>\n     {q. \\<G> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "subsection \\<open>Automaton Definition\\<close>"], ["", "fun M\\<^sub>\\<UU>_fin :: \"('a ltl \\<rightharpoonup> nat) \\<Rightarrow> ('a ltl\\<^sub>P \\<times> ('a ltl \\<rightharpoonup> 'a ltl\\<^sub>P \\<rightharpoonup> nat), 'a set) transition set\"\nwhere\n  \"M\\<^sub>\\<UU>_fin \\<pi> = {((\\<phi>', m), \\<nu>, p). \\<not>(\\<forall>S. (\\<forall>\\<chi> \\<in> (dom \\<pi>). S \\<up>\\<Turnstile>\\<^sub>P Abs \\<chi> \\<and> S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G (dom \\<pi>) (Abs (theG \\<chi>)) \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi> \\<chi>). the (m \\<chi>) q = Some j) \\<longrightarrow> S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G (dom \\<pi>) (\\<up>step q \\<nu>))) \\<longrightarrow> S \\<up>\\<Turnstile>\\<^sub>P (\\<up>step \\<phi>' \\<nu>))}\""], ["", "locale ltl_to_rabin_af_unf = ltl_to_rabin_base \"\\<up>af\\<^sub>\\<UU>\" \"\\<up>af\\<^sub>G\\<^sub>\\<UU>\" \"Abs o Unf\" \"Abs o Unf\\<^sub>G\" M\\<^sub>\\<UU>_fin begin"], ["", "abbreviation \"\\<delta>\\<^sub>\\<UU> \\<equiv> delta\""], ["", "abbreviation \"\\<iota>\\<^sub>\\<UU> \\<equiv> initial\""], ["", "abbreviation \"Acc\\<^sub>\\<UU>_fin \\<equiv> Acc_fin\""], ["", "abbreviation \"Acc\\<^sub>\\<UU>_inf \\<equiv> Acc_inf\""], ["", "abbreviation \"F\\<^sub>\\<UU> \\<equiv> rabin_pairs\""], ["", "abbreviation \"Acc\\<^sub>\\<UU> \\<equiv> Acc\""], ["", "abbreviation \"\\<A>\\<^sub>\\<UU> \\<equiv> ltl_to_generalized_rabin\""], ["", "subsection \\<open>Properties\\<close>"], ["", "subsection \\<open>Correctness Theorem\\<close>"], ["", "lemma unfold_optimisation_correct_M:\n  assumes \"dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\"\n  assumes \"dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\"\n  assumes \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> \\<pi>\\<^sub>\\<A> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\"\n  assumes \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> \\<pi>\\<^sub>\\<UU> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\"\n  shows \"accepting_pair\\<^sub>R (ltl_to_rabin_af.\\<delta>\\<^sub>\\<A> \\<Sigma>) (ltl_to_rabin_af.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w \\<longleftrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R\n     (ltl_to_rabin_base_def.delta \\<up>af \\<up>af\\<^sub>G Abs \\<Sigma>)\n     (ltl_to_rabin_base_def.initial Abs Abs \\<phi>)\n     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "proof -\n  \\<comment> \\<open>Preliminary Facts\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R\n     (ltl_to_rabin_base_def.delta \\<up>af \\<up>af\\<^sub>G Abs \\<Sigma>)\n     (ltl_to_rabin_base_def.initial Abs Abs \\<phi>)\n     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "note \\<G>_properties[OF \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close>]"], ["proof (state)\nthis:\n  finite (dom \\<pi>\\<^sub>\\<A>)\n  Only_G (dom \\<pi>\\<^sub>\\<A>)\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R\n     (ltl_to_rabin_base_def.delta \\<up>af \\<up>af\\<^sub>G Abs \\<Sigma>)\n     (ltl_to_rabin_base_def.initial Abs Abs \\<phi>)\n     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "interpret \\<A>: ltl_to_rabin_af"], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_to_rabin_af \\<Sigma> w", "using ltl_to_generalized_rabin_af_wellformed bounded_w finite_\\<Sigma>"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite ?\\<Sigma>; range ?w \\<subseteq> ?\\<Sigma>\\<rbrakk>\n  \\<Longrightarrow> ltl_to_rabin_af ?\\<Sigma> ?w\n  range w \\<subseteq> \\<Sigma>\n  finite \\<Sigma>\n\ngoal (1 subgoal):\n 1. ltl_to_rabin_af \\<Sigma> w", "by auto\n\n  \\<comment> \\<open>Define constants for both runs\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "define r\\<^sub>\\<A> r\\<^sub>\\<UU>\n    where \"r\\<^sub>\\<A> = run\\<^sub>t (ltl_to_rabin_af.\\<delta>\\<^sub>\\<A> \\<Sigma>) (ltl_to_rabin_af.\\<iota>\\<^sub>\\<A> \\<phi>) w\"\n      and \"r\\<^sub>\\<UU> = run\\<^sub>t (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\""], ["proof (state)\nthis:\n  r\\<^sub>\\<A> =\n  run\\<^sub>t (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w\n  r\\<^sub>\\<UU> =\n  run\\<^sub>t (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "hence \"finite (range r\\<^sub>\\<A>)\" and \"finite (range r\\<^sub>\\<UU>)\""], ["proof (prove)\nusing this:\n  r\\<^sub>\\<A> =\n  run\\<^sub>t (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w\n  r\\<^sub>\\<UU> =\n  run\\<^sub>t (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n\ngoal (1 subgoal):\n 1. finite (range r\\<^sub>\\<A>) &&& finite (range r\\<^sub>\\<UU>)", "using run\\<^sub>t_finite[OF \\<A>.finite_reach] run\\<^sub>t_finite[OF finite_reach] bounded_w finite_\\<Sigma>"], ["proof (prove)\nusing this:\n  r\\<^sub>\\<A> =\n  run\\<^sub>t (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w\n  r\\<^sub>\\<UU> =\n  run\\<^sub>t (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n  \\<lbrakk>finite \\<Sigma>; range ?w \\<subseteq> \\<Sigma>\\<rbrakk>\n  \\<Longrightarrow> finite\n                     (range\n                       (run\\<^sub>t (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                         (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>1) ?w))\n  \\<lbrakk>finite \\<Sigma>; range ?w \\<subseteq> \\<Sigma>\\<rbrakk>\n  \\<Longrightarrow> finite\n                     (range\n                       (run\\<^sub>t (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                         (\\<iota>\\<^sub>\\<UU> ?\\<phi>1) ?w))\n  range w \\<subseteq> \\<Sigma>\n  finite \\<Sigma>\n\ngoal (1 subgoal):\n 1. finite (range r\\<^sub>\\<A>) &&& finite (range r\\<^sub>\\<UU>)", "by simp+\n\n  \\<comment> \\<open>Prove that the limit of both runs behave the same in respect to the M acceptance condition\\<close>"], ["proof (state)\nthis:\n  finite (range r\\<^sub>\\<A>)\n  finite (range r\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "have \"limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {} \\<longleftrightarrow> limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "have \"ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w", "by (unfold_locales; insert \\<G>_elements[OF \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close>] finite_\\<Sigma> bounded_w)"], ["proof (state)\nthis:\n  ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "hence X: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "by (metis assms(3)[unfolded ltl_prop_entails_abs.rep_eq] ltl_FG_to_rabin.smallest_accepting_rank_properties(1) domD)"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<forall>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>. mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc i)\n       = (\\<lambda>q. step_abs q (w i)) ` (mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} i) \\<union> {Abs (theG \\<chi>)} \\<union> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n          mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc i) =\n          (\\<lambda>q. \\<up>step q (w i)) `\n          mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n           (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} i \\<union>\n          {Abs (theG \\<chi>)} \\<union>\n          {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "using almost_all_commutative'[OF \\<open>finite (dom \\<pi>\\<^sub>\\<A>)\\<close>] X unfold_\\<S>_eq[OF \\<open>Only_G (dom \\<pi>\\<^sub>\\<A>)\\<close>] finite_\\<Sigma> bounded_w"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n      \\<forall>\\<^sub>\\<infinity>i. ?P x i) \\<Longrightarrow>\n  \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>dom \\<pi>\\<^sub>\\<A>. ?P x i\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  \\<lbrakk>finite ?\\<Sigma>; range ?w \\<subseteq> ?\\<Sigma>;\n   mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<phi>) ?w\n    {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>n.\n                       mojmir_def.\\<S> ?\\<Sigma> \\<up>af\\<^sub>G\n                        (Abs ?\\<phi>) ?w\n                        {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n                        (Suc n) =\n                       (\\<lambda>q. \\<up>step q (?w n)) `\n                       mojmir_def.\\<S> ?\\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                        (Abs (Unf\\<^sub>G ?\\<phi>)) ?w\n                        {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n                        n \\<union>\n                       {Abs ?\\<phi>} \\<union>\n                       {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  finite \\<Sigma>\n  range w \\<subseteq> \\<Sigma>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n          mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc i) =\n          (\\<lambda>q. \\<up>step q (w i)) `\n          mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n           (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} i \\<union>\n          {Abs (theG \\<chi>)} \\<union>\n          {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "by simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n        mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n         {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc i) =\n        (\\<lambda>q. \\<up>step q (w i)) `\n        mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n         (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n         {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} i \\<union>\n        {Abs (theG \\<chi>)} \\<union>\n        {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n        mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n         {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc i) =\n        (\\<lambda>q. \\<up>step q (w i)) `\n        mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n         (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n         {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} i \\<union>\n        {Abs (theG \\<chi>)} \\<union>\n        {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "obtain i where i_def: \"\\<And>j \\<chi>. j \\<ge> i \\<Longrightarrow> \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc j)\n       = (\\<lambda>q. step_abs q (w j)) ` (mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} j) \\<union> {Abs (theG \\<chi>)} \\<union> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n        mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n         {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc i) =\n        (\\<lambda>q. \\<up>step q (w i)) `\n        mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n         (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n         {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} i \\<union>\n        {Abs (theG \\<chi>)} \\<union>\n        {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (\\<And>j \\<chi>.\n            \\<lbrakk>i \\<le> j; \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\\<rbrakk>\n            \\<Longrightarrow> mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\n                               (Abs (theG \\<chi>)) w\n                               {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                                   Rep q}\n                               (Suc j) =\n                              (\\<lambda>q. \\<up>step q (w j)) `\n                              mojmir_def.\\<S> \\<Sigma>\n                               \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                               (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n                               {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                                   Rep q}\n                               j \\<union>\n                              {Abs (theG \\<chi>)} \\<union>\n                              {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                                  Rep q}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n           mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n            {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} (Suc n) =\n           (\\<lambda>q. \\<up>step q (w n)) `\n           mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n            (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n            {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} n \\<union>\n           {Abs (theG \\<chi>)} \\<union>\n           {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (\\<And>j \\<chi>.\n            \\<lbrakk>i \\<le> j; \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\\<rbrakk>\n            \\<Longrightarrow> mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\n                               (Abs (theG \\<chi>)) w\n                               {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                                   Rep q}\n                               (Suc j) =\n                              (\\<lambda>q. \\<up>step q (w j)) `\n                              mojmir_def.\\<S> \\<Sigma>\n                               \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                               (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n                               {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                                   Rep q}\n                               j \\<union>\n                              {Abs (theG \\<chi>)} \\<union>\n                              {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                                  Rep q}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>i \\<le> ?j10; ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A>\\<rbrakk>\n  \\<Longrightarrow> mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\n                     (Abs (theG ?\\<chi>10)) w\n                     {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n                     (Suc ?j10) =\n                    (\\<lambda>q. \\<up>step q (w ?j10)) `\n                    mojmir_def.\\<S> \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                     (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n                     {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n                     ?j10 \\<union>\n                    {Abs (theG ?\\<chi>10)} \\<union>\n                    {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "obtain j where \"limit r\\<^sub>\\<A> = range (suffix j r\\<^sub>\\<A>)\"\n      and \"limit r\\<^sub>\\<UU> = range (suffix j r\\<^sub>\\<UU>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>limit r\\<^sub>\\<A> = range (suffix j r\\<^sub>\\<A>);\n         limit r\\<^sub>\\<UU> = range (suffix j r\\<^sub>\\<UU>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>finite (range r\\<^sub>\\<A>)\\<close> \\<open>finite (range r\\<^sub>\\<UU>)\\<close>"], ["proof (prove)\nusing this:\n  finite (range r\\<^sub>\\<A>)\n  finite (range r\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>limit r\\<^sub>\\<A> = range (suffix j r\\<^sub>\\<A>);\n         limit r\\<^sub>\\<UU> = range (suffix j r\\<^sub>\\<UU>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule common_range_limit)"], ["proof (state)\nthis:\n  limit r\\<^sub>\\<A> = range (suffix j r\\<^sub>\\<A>)\n  limit r\\<^sub>\\<UU> = range (suffix j r\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "hence \"limit r\\<^sub>\\<A> = range (suffix (j + i + 1) r\\<^sub>\\<A>)\"\n      and \"limit r\\<^sub>\\<UU> = range (suffix (j + i) r\\<^sub>\\<UU>)\""], ["proof (prove)\nusing this:\n  limit r\\<^sub>\\<A> = range (suffix j r\\<^sub>\\<A>)\n  limit r\\<^sub>\\<UU> = range (suffix j r\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. limit r\\<^sub>\\<A> = range (suffix (j + i + 1) r\\<^sub>\\<A>) &&&\n    limit r\\<^sub>\\<UU> = range (suffix (j + i) r\\<^sub>\\<UU>)", "by (meson le_add1 limit_range_suffix_incr)+"], ["proof (state)\nthis:\n  limit r\\<^sub>\\<A> = range (suffix (j + i + 1) r\\<^sub>\\<A>)\n  limit r\\<^sub>\\<UU> = range (suffix (j + i) r\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "moreover"], ["proof (state)\nthis:\n  limit r\\<^sub>\\<A> = range (suffix (j + i + 1) r\\<^sub>\\<A>)\n  limit r\\<^sub>\\<UU> = range (suffix (j + i) r\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "have \"\\<And>j. j \\<ge> i \\<Longrightarrow> r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A> \\<longleftrightarrow> r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "assume \"j \\<ge> i\""], ["proof (state)\nthis:\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "obtain \\<phi>\\<^sub>\\<A> m\\<^sub>\\<A> x where r\\<^sub>\\<A>_def': \"r\\<^sub>\\<A> (Suc j) = ((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<phi>\\<^sub>\\<A> m\\<^sub>\\<A> x.\n        r\\<^sub>\\<A> (Suc j) =\n        ((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding r\\<^sub>\\<A>_def run\\<^sub>t.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<phi>\\<^sub>\\<A> m\\<^sub>\\<A> x.\n        (run (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w (Suc j),\n         w (Suc j),\n         run (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w (Suc (Suc j))) =\n        ((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using prod.exhaust"], ["proof (prove)\nusing this:\n  (\\<And>x1 x2. ?y = (x1, x2) \\<Longrightarrow> ?P) \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (\\<And>\\<phi>\\<^sub>\\<A> m\\<^sub>\\<A> x.\n        (run (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w (Suc j),\n         w (Suc j),\n         run (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w (Suc (Suc j))) =\n        ((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  r\\<^sub>\\<A> (Suc j) = ((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "obtain \\<phi>\\<^sub>\\<UU> m\\<^sub>\\<UU> y where r\\<^sub>\\<UU>_def': \"r\\<^sub>\\<UU> j = ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<phi>\\<^sub>\\<UU> m\\<^sub>\\<UU> y.\n        r\\<^sub>\\<UU> j =\n        ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding r\\<^sub>\\<UU>_def run\\<^sub>t.simps"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<phi>\\<^sub>\\<UU> m\\<^sub>\\<UU> y.\n        (run (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n          j,\n         w j,\n         run (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n          (Suc j)) =\n        ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using prod.exhaust"], ["proof (prove)\nusing this:\n  (\\<And>x1 x2. ?y = (x1, x2) \\<Longrightarrow> ?P) \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (\\<And>\\<phi>\\<^sub>\\<UU> m\\<^sub>\\<UU> y.\n        (run (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n          j,\n         w j,\n         run (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n          (Suc j)) =\n        ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  r\\<^sub>\\<UU> j = ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have m\\<^sub>\\<A>_def: \"\\<And>\\<chi> q. \\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow> the (m\\<^sub>\\<A> \\<chi>) q = semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w q (Suc j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<chi> q.\n       \\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n       the (m\\<^sub>\\<A> \\<chi>) q =\n       semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\n        (Abs (theG \\<chi>)) w q (Suc j)", "using \\<A>.run_properties(2)[of _ \\<phi> \"Suc j\"] r\\<^sub>\\<A>_def'[unfolded r\\<^sub>\\<A>_def] prod.sel"], ["proof (prove)\nusing this:\n  ?\\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n  the (snd (run (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n             (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w (Suc j))\n        ?\\<chi>)\n   ?q =\n  semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG ?\\<chi>)) w\n   ?q (Suc j)\n  run\\<^sub>t (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) w (Suc j) =\n  ((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n  fst (?x1.0, ?x2.0) = ?x1.0\n  snd (?x1.0, ?x2.0) = ?x2.0\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi> q.\n       \\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n       the (m\\<^sub>\\<A> \\<chi>) q =\n       semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\n        (Abs (theG \\<chi>)) w q (Suc j)", "by simp"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n  the (m\\<^sub>\\<A> ?\\<chi>10) ?q10 =\n  semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10))\n   w ?q10 (Suc j)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have m\\<^sub>\\<UU>_def: \"\\<And>\\<chi> q. \\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow> the (m\\<^sub>\\<UU> \\<chi>) q = semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w q j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<chi> q.\n       \\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n       the (m\\<^sub>\\<UU> \\<chi>) q =\n       semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w q j", "using run_properties(2)[of _ \\<phi> j] r\\<^sub>\\<UU>_def'[unfolded r\\<^sub>\\<UU>_def] prod.sel"], ["proof (prove)\nusing this:\n  ?\\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n  the (snd (run (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>)\n             w j)\n        ?\\<chi>)\n   ?q =\n  semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   ((Abs \\<circ> Unf\\<^sub>G) (theG ?\\<chi>)) w ?q j\n  run\\<^sub>t (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) w\n   j =\n  ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n  fst (?x1.0, ?x2.0) = ?x1.0\n  snd (?x1.0, ?x2.0) = ?x2.0\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi> q.\n       \\<chi> \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n       the (m\\<^sub>\\<UU> \\<chi>) q =\n       semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w q j", "by simp"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n  the (m\\<^sub>\\<UU> ?\\<chi>10) ?q10 =\n  semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w ?q10 j\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "{"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> \\<^bold>G \\<phi> \\<Longrightarrow>\n  the (m\\<^sub>\\<UU> ?\\<chi>10) ?q10 =\n  semi_mojmir_def.state_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w ?q10 j\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have upt_Suc_0: \"[0..<Suc j] = [0..<j] @ [j]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [0..<Suc j] = [0..<j] @ [j]", "by simp"], ["proof (state)\nthis:\n  [0..<Suc j] = [0..<j] @ [j]\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have \"Rep (fst (fst (r\\<^sub>\\<A> (Suc j)))) \\<equiv>\\<^sub>P step (Rep (fst (fst (r\\<^sub>\\<UU> j)))) (w j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Rep (fst (fst (r\\<^sub>\\<A> (Suc j)))) \\<equiv>\\<^sub>P\n    step (Rep (fst (fst (r\\<^sub>\\<UU> j)))) (w j)", "unfolding r\\<^sub>\\<A>_def r\\<^sub>\\<UU>_def run\\<^sub>t.simps fst_conv \\<A>.run_properties(1)[of \\<phi> \"Suc j\"] run_properties(1) comp_apply"], ["proof (prove)\ngoal (1 subgoal):\n 1. Rep (foldl \\<up>af (Abs \\<phi>) (prefix (Suc j) w)) \\<equiv>\\<^sub>P\n    step (Rep (foldl \\<up>af\\<^sub>\\<UU> (Abs (Unf \\<phi>)) (prefix j w)))\n     (w j)", "unfolding subsequence_def upt_Suc_0 map_append map_def list.map af_abs_equiv Unf_abs.abs_eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. Rep (\\<up>step\n          (foldl \\<up>af\\<^sub>\\<UU> (Abs (Unf \\<phi>)) (map w [0..<j]))\n          (w j)) \\<equiv>\\<^sub>P\n    step\n     (Rep (foldl \\<up>af\\<^sub>\\<UU> (Abs (Unf \\<phi>)) (map w [0..<j])))\n     (w j)", "using Rep_step"], ["proof (prove)\nusing this:\n  Rep (\\<up>step ?\\<Phi> ?\\<nu>) \\<equiv>\\<^sub>P step (Rep ?\\<Phi>) ?\\<nu>\n\ngoal (1 subgoal):\n 1. Rep (\\<up>step\n          (foldl \\<up>af\\<^sub>\\<UU> (Abs (Unf \\<phi>)) (map w [0..<j]))\n          (w j)) \\<equiv>\\<^sub>P\n    step\n     (Rep (foldl \\<up>af\\<^sub>\\<UU> (Abs (Unf \\<phi>)) (map w [0..<j])))\n     (w j)", "by auto"], ["proof (state)\nthis:\n  Rep (fst (fst (r\\<^sub>\\<A> (Suc j)))) \\<equiv>\\<^sub>P\n  step (Rep (fst (fst (r\\<^sub>\\<UU> j)))) (w j)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence A: \"\\<And>S. S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A> \\<longleftrightarrow> S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j)\""], ["proof (prove)\nusing this:\n  Rep (fst (fst (r\\<^sub>\\<A> (Suc j)))) \\<equiv>\\<^sub>P\n  step (Rep (fst (fst (r\\<^sub>\\<UU> j)))) (w j)\n\ngoal (1 subgoal):\n 1. \\<And>S.\n       S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A> =\n       S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j)", "unfolding r\\<^sub>\\<A>_def' r\\<^sub>\\<UU>_def' prod.sel ltl_prop_equiv_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A> =\n     \\<A> \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j)\n\ngoal (1 subgoal):\n 1. \\<And>S.\n       S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A> =\n       S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j)", ".."], ["proof (state)\nthis:\n  ?S10 \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A> =\n  ?S10 \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "{"], ["proof (state)\nthis:\n  ?S10 \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A> =\n  ?S10 \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "fix S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "assume \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<chi>\""], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P ?\\<chi>10\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence \"dom \\<pi>\\<^sub>\\<A> \\<subseteq> S\""], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P ?\\<chi>10\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<A> \\<subseteq> S", "using \\<open>Only_G (dom \\<pi>\\<^sub>\\<A>)\\<close> assms"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P ?\\<chi>10\n  Only_G (dom \\<pi>\\<^sub>\\<A>)\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<A> \\<subseteq> S", "by (metis ltl_prop_entailment.simps(8) subsetI)"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> S\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "{"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> S\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "fix \\<chi>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "assume \"\\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\""], ["proof (state)\nthis:\n  \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "interpret \\<MM>: ltl_FG_to_rabin \\<Sigma> \"theG \\<chi>\" \"dom \\<pi>\\<^sub>\\<A>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w", "by (unfold_locales, insert \\<open>Only_G (dom \\<pi>\\<^sub>\\<A>)\\<close> bounded_w finite_\\<Sigma>)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "interpret \\<UU>: ltl_FG_to_rabin_opt \\<Sigma> \"theG \\<chi>\" \"dom \\<pi>\\<^sub>\\<A>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_FG_to_rabin_opt \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w", "by (unfold_locales, insert \\<open>Only_G (dom \\<pi>\\<^sub>\\<A>)\\<close> bounded_w finite_\\<Sigma>)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have \"\\<And>q \\<nu>. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q \\<Longrightarrow> dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep (step_abs q \\<nu>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>q \\<nu>.\n       dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q \\<Longrightarrow>\n       dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step q \\<nu>)", "using \\<open>Only_G (dom \\<pi>\\<^sub>\\<A>)\\<close>"], ["proof (prove)\nusing this:\n  Only_G (dom \\<pi>\\<^sub>\\<A>)\n\ngoal (1 subgoal):\n 1. \\<And>q \\<nu>.\n       dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q \\<Longrightarrow>\n       dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step q \\<nu>)", "by (metis ltl_prop_equiv_def Rep_step step_\\<G>)"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep ?q10 \\<Longrightarrow>\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step ?q10 ?\\<nu>10)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "then"], ["proof (chain)\npicking this:\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep ?q10 \\<Longrightarrow>\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step ?q10 ?\\<nu>10)", "have subsetStep: \"\\<And>\\<nu>. (\\<lambda>q. step_abs q \\<nu>) ` {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} \\<subseteq> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep ?q10 \\<Longrightarrow>\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep (\\<up>step ?q10 ?\\<nu>10)\n\ngoal (1 subgoal):\n 1. \\<And>\\<nu>.\n       (\\<lambda>q. \\<up>step q \\<nu>) `\n       {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n       \\<subseteq> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>q. \\<up>step q ?\\<nu>10) `\n  {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  \\<subseteq> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "let ?P = \"\\<lambda>q. S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have \"\\<And>q \\<nu>. (dom \\<pi>\\<^sub>\\<A>) \\<Turnstile>\\<^sub>P Rep q \\<Longrightarrow> ?P q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>q \\<nu>.\n       dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)", "using \\<open>Only_G (dom \\<pi>\\<^sub>\\<A>)\\<close> eval\\<^sub>G_prop_entailment \\<open>(dom \\<pi>\\<^sub>\\<A>) \\<subseteq> S\\<close>"], ["proof (prove)\nusing this:\n  Only_G (dom \\<pi>\\<^sub>\\<A>)\n  ?S \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<phi> =\n  ?S \\<Turnstile>\\<^sub>P ?\\<phi>\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> S\n\ngoal (1 subgoal):\n 1. \\<And>q \\<nu>.\n       dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)", "by blast"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep ?q10 \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q10)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence \"\\<And>q. q \\<in> {q. (dom \\<pi>\\<^sub>\\<A>) \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow> ?P q\""], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep ?q10 \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q10)\n\ngoal (1 subgoal):\n 1. \\<And>q.\n       q \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                   Rep q} \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)", "by simp"], ["proof (state)\nthis:\n  ?q11\n  \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n            Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q11)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "moreover"], ["proof (state)\nthis:\n  ?q11\n  \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n            Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q11)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have Y: \"\\<MM>.\\<S> (Suc j) = (\\<lambda>q. step_abs q (w j)) ` (\\<UU>.\\<S> j) \\<union> {Abs (theG \\<chi>)} \\<union> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc j) =\n    (\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n    {Abs (theG \\<chi>)} \\<union>\n    {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "using i_def[OF \\<open>j \\<ge> i\\<close> \\<open>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\\<close>]"], ["proof (prove)\nusing this:\n  \\<MM>.\\<S>\\<^sub>R (Suc j) =\n  (\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n  {Abs (theG \\<chi>)} \\<union>\n  {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<MM>.\\<S>\\<^sub>R (Suc j) =\n    (\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n    {Abs (theG \\<chi>)} \\<union>\n    {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}", "by simp"], ["proof (state)\nthis:\n  \\<MM>.\\<S>\\<^sub>R (Suc j) =\n  (\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n  {Abs (theG \\<chi>)} \\<union>\n  {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have 1: \"\\<MM>.smallest_accepting_rank = (\\<pi>\\<^sub>\\<A> \\<chi>)\"\n              and 2: \"\\<UU>.smallest_accepting_rank = (\\<pi>\\<^sub>\\<UU> \\<chi>)\"\n              and 3: \"\\<chi> \\<in> \\<^bold>G \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<MM>.smallest_accepting_rank\\<^sub>R = \\<pi>\\<^sub>\\<A> \\<chi> &&&\n    \\<UU>.smallest_accepting_rank = \\<pi>\\<^sub>\\<UU> \\<chi> &&&\n    \\<chi> \\<in> \\<^bold>G \\<phi>", "using \\<open>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\\<close> assms[unfolded ltl_prop_entails_abs.rep_eq]"], ["proof (prove)\nusing this:\n  \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<MM>.smallest_accepting_rank\\<^sub>R = \\<pi>\\<^sub>\\<A> \\<chi> &&&\n    \\<UU>.smallest_accepting_rank = \\<pi>\\<^sub>\\<UU> \\<chi> &&&\n    \\<chi> \\<in> \\<^bold>G \\<phi>", "by auto"], ["proof (state)\nthis:\n  \\<MM>.smallest_accepting_rank\\<^sub>R = \\<pi>\\<^sub>\\<A> \\<chi>\n  \\<UU>.smallest_accepting_rank = \\<pi>\\<^sub>\\<UU> \\<chi>\n  \\<chi> \\<in> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "ultimately"], ["proof (chain)\npicking this:\n  ?q11\n  \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n            Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q11)\n  \\<MM>.smallest_accepting_rank\\<^sub>R = \\<pi>\\<^sub>\\<A> \\<chi>\n  \\<UU>.smallest_accepting_rank = \\<pi>\\<^sub>\\<UU> \\<chi>\n  \\<chi> \\<in> \\<^bold>G \\<phi>", "have \"(\\<forall>q \\<in> \\<MM>.\\<S> (Suc j). ?P q) = (\\<forall>q \\<in> (\\<lambda>q. step_abs q (w j)) ` (\\<UU>.\\<S> j) \\<union> {Abs (theG \\<chi>)}. ?P q)\""], ["proof (prove)\nusing this:\n  ?q11\n  \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n            Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q11)\n  \\<MM>.smallest_accepting_rank\\<^sub>R = \\<pi>\\<^sub>\\<A> \\<chi>\n  \\<UU>.smallest_accepting_rank = \\<pi>\\<^sub>\\<UU> \\<chi>\n  \\<chi> \\<in> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<forall>q\\<in>\\<MM>.\\<S>\\<^sub>R (Suc j).\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n    (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n                    {Abs (theG \\<chi>)}.\n        S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))", "unfolding Y"], ["proof (prove)\nusing this:\n  ?q11\n  \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n            Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q11)\n  \\<MM>.smallest_accepting_rank\\<^sub>R = \\<pi>\\<^sub>\\<A> \\<chi>\n  \\<UU>.smallest_accepting_rank = \\<pi>\\<^sub>\\<UU> \\<chi>\n  \\<chi> \\<in> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n                    {Abs (theG \\<chi>)} \\<union>\n                    {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}.\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n    (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n                    {Abs (theG \\<chi>)}.\n        S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))", "by blast"], ["proof (state)\nthis:\n  (\\<forall>q\\<in>\\<MM>.\\<S>\\<^sub>R (Suc j).\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n  (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n                  {Abs (theG \\<chi>)}.\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence 4: \"(\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<A> \\<chi>). the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow> ?P q) = ((\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<UU> \\<chi>). the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow> ?P (step_abs q (w j))) \\<and> ?P (Abs (theG \\<chi>)))\""], ["proof (prove)\nusing this:\n  (\\<forall>q\\<in>\\<MM>.\\<S>\\<^sub>R (Suc j).\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n  (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n                  {Abs (theG \\<chi>)}.\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))\n\ngoal (1 subgoal):\n 1. (\\<forall>q.\n        (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n            the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n    ((\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n          (Rep (\\<up>step q (w j)))) \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>))))", "using \\<open>\\<And>q. q \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} \\<Longrightarrow> ?P q\\<close> subsetStep"], ["proof (prove)\nusing this:\n  (\\<forall>q\\<in>\\<MM>.\\<S>\\<^sub>R (Suc j).\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n  (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) ` \\<UU>.\\<S> j \\<union>\n                  {Abs (theG \\<chi>)}.\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))\n  ?q \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n               Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q)\n  (\\<lambda>q. \\<up>step q ?\\<nu>10) `\n  {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  \\<subseteq> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<forall>q.\n        (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n            the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n    ((\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n          (Rep (\\<up>step q (w j)))) \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>))))", "unfolding m\\<^sub>\\<A>_def[OF 3, symmetric] m\\<^sub>\\<UU>_def[OF 3, symmetric] \\<MM>.\\<S>.simps \\<UU>.\\<S>.simps 1 2 Set.image_Un option.sel"], ["proof (prove)\nusing this:\n  (\\<forall>q\\<in>{q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                      Rep q} \\<union>\n                  {q. \\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                         the (m\\<^sub>\\<A> \\<chi>) q = Some j}.\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n  (\\<forall>q\\<in>(\\<lambda>q. \\<up>step q (w j)) `\n                  {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n                      Rep q} \\<union>\n                  (\\<lambda>q. \\<up>step q (w j)) `\n                  {q. \\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                         the (m\\<^sub>\\<UU> \\<chi>) q = Some j} \\<union>\n                  {Abs (theG \\<chi>)}.\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))\n  ?q \\<in> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P\n               Rep q} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep ?q)\n  (\\<lambda>q. \\<up>step q ?\\<nu>10) `\n  {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  \\<subseteq> {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. (\\<forall>q.\n        (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n            the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n    ((\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n          (Rep (\\<up>step q (w j)))) \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>))))", "by blast"], ["proof (state)\nthis:\n  (\\<forall>q.\n      (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n          the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) =\n  ((\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n           the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (\\<up>step q (w j)))) \\<and>\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>))))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "have \"S \\<Turnstile>\\<^sub>P \\<chi> \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<A> \\<chi>). the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q)) \\<longleftrightarrow>\n              S \\<Turnstile>\\<^sub>P \\<chi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<UU> \\<chi>). the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n             the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) =\n    (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))", "unfolding 4"], ["proof (prove)\ngoal (1 subgoal):\n 1. (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n          (Rep (\\<up>step q (w j)))) \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>)))) =\n    (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))", "using eval\\<^sub>G_respectfulness(2)[OF Rep_Abs_equiv, unfolded ltl_prop_equiv_def]"], ["proof (prove)\nusing this:\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S (Rep (Abs ?\\<psi>)) =\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<psi>\n\ngoal (1 subgoal):\n 1. (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n          (Rep (\\<up>step q (w j)))) \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>)))) =\n    (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))", "using eval\\<^sub>G_respectfulness(2)[OF Rep_step, unfolded ltl_prop_equiv_def]"], ["proof (prove)\nusing this:\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S (Rep (Abs ?\\<psi>)) =\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<psi>\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G ?S (Rep (\\<up>step ?\\<Phi>1 ?\\<nu>1)) =\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S (step (Rep ?\\<Phi>1) ?\\<nu>1)\n\ngoal (1 subgoal):\n 1. (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n          (Rep (\\<up>step q (w j)))) \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep (Abs (theG \\<chi>)))) =\n    (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n     (\\<forall>q.\n         (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n             the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))", "by blast"], ["proof (state)\nthis:\n  (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n   (\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n           the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) =\n  (S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n   (\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n           the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "}"], ["proof (state)\nthis:\n  ?\\<chi>12 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  (S \\<Turnstile>\\<^sub>P ?\\<chi>12 \\<and>\n   (\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> ?\\<chi>12).\n           the (m\\<^sub>\\<A> ?\\<chi>12) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) =\n  (S \\<Turnstile>\\<^sub>P ?\\<chi>12 \\<and>\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG ?\\<chi>12) \\<and>\n   (\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> ?\\<chi>12).\n           the (m\\<^sub>\\<UU> ?\\<chi>12) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence \"((\\<forall>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>. S \\<Turnstile>\\<^sub>P \\<chi> \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<A> \\<chi>). the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow> S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>)\n            \\<longleftrightarrow> ((\\<forall>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU>. S \\<Turnstile>\\<^sub>P \\<chi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<UU> \\<chi>). the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (step (Rep q) (w j)))) \\<longrightarrow> S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\""], ["proof (prove)\nusing this:\n  ?\\<chi>12 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  (S \\<Turnstile>\\<^sub>P ?\\<chi>12 \\<and>\n   (\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> ?\\<chi>12).\n           the (m\\<^sub>\\<A> ?\\<chi>12) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) =\n  (S \\<Turnstile>\\<^sub>P ?\\<chi>12 \\<and>\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG ?\\<chi>12) \\<and>\n   (\\<forall>q.\n       (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> ?\\<chi>12).\n           the (m\\<^sub>\\<UU> ?\\<chi>12) q = Some j) \\<longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))\n\ngoal (1 subgoal):\n 1. ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n         S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n         (\\<forall>q.\n             (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                 the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n             S \\<Turnstile>\\<^sub>P\n             eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n    ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n         S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n         S \\<Turnstile>\\<^sub>P\n         eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n         (\\<forall>q.\n             (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                 the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n             S \\<Turnstile>\\<^sub>P\n             eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n              (step (Rep q) (w j)))) \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))", "by (simp add: \\<open>\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> (S \\<Turnstile>\\<^sub>P \\<chi> \\<and> (\\<forall>q. (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>). the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) = (S \\<Turnstile>\\<^sub>P \\<chi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and> (\\<forall>q. (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>). the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (step (Rep q) (w j))))\\<close> A assms(2))"], ["proof (state)\nthis:\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n       S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n               the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n           S \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow>\n   S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n       S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n               the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n           S \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n            (step (Rep q) (w j)))) \\<longrightarrow>\n   S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "}"], ["proof (state)\nthis:\n  (\\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n      ?S12 \\<Turnstile>\\<^sub>P \\<chi>) \\<Longrightarrow>\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n       ?S12 \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n               the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n           ?S12 \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow>\n   ?S12 \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n       ?S12 \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       ?S12 \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n               the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n           ?S12 \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n            (step (Rep q) (w j)))) \\<longrightarrow>\n   ?S12 \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence \"(\\<forall>S. (\\<forall>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>. S \\<Turnstile>\\<^sub>P \\<chi> \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<A> \\<chi>). the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow> S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) \\<longleftrightarrow> \n        (\\<forall>S. (\\<forall>\\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU>. S \\<Turnstile>\\<^sub>P \\<chi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and> (\\<forall>q. (\\<exists>j \\<ge> the (\\<pi>\\<^sub>\\<UU> \\<chi>). the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (step (Rep q) (w j)))) \\<longrightarrow> S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\""], ["proof (prove)\nusing this:\n  (\\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n      ?S12 \\<Turnstile>\\<^sub>P \\<chi>) \\<Longrightarrow>\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n       ?S12 \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n               the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n           ?S12 \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow>\n   ?S12 \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n       ?S12 \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       ?S12 \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n               the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n           ?S12 \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n            (step (Rep q) (w j)))) \\<longrightarrow>\n   ?S12 \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. (\\<forall>S.\n        (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n            S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n            (\\<forall>q.\n                (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                    the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n                 (Rep q))) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n    (\\<forall>S.\n        (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n            S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n            S \\<Turnstile>\\<^sub>P\n            eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n            (\\<forall>q.\n                (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                    the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n                 (step (Rep q) (w j)))) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))", "unfolding assms"], ["proof (prove)\nusing this:\n  (\\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n      ?S12 \\<Turnstile>\\<^sub>P \\<chi>) \\<Longrightarrow>\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n       ?S12 \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n               the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n           ?S12 \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (Rep q))) \\<longrightarrow>\n   ?S12 \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  ((\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n       ?S12 \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n       ?S12 \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n       (\\<forall>q.\n           (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n               the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n           ?S12 \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n            (step (Rep q) (w j)))) \\<longrightarrow>\n   ?S12 \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. (\\<forall>S.\n        (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n            S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n            (\\<forall>q.\n                (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                    the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n                 (Rep q))) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n    (\\<forall>S.\n        (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n            S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n            S \\<Turnstile>\\<^sub>P\n            eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>) (theG \\<chi>) \\<and>\n            (\\<forall>q.\n                (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                    the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n                 (step (Rep q) (w j)))) \\<longrightarrow>\n        S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))", "by auto"], ["proof (state)\nthis:\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n          S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                  the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<Turnstile>\\<^sub>P\n              eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n               (Rep q))) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n          S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n          S \\<Turnstile>\\<^sub>P\n          eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                  the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<Turnstile>\\<^sub>P\n              eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n               (step (Rep q) (w j)))) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "}"], ["proof (state)\nthis:\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n          S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                  the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<Turnstile>\\<^sub>P\n              eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n               (Rep q))) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n          S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n          S \\<Turnstile>\\<^sub>P\n          eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                  the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<Turnstile>\\<^sub>P\n              eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n               (step (Rep q) (w j)))) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "hence \"((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x) \\<in> M_fin \\<pi>\\<^sub>\\<A> \\<longleftrightarrow> ((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y) \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>\""], ["proof (prove)\nusing this:\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n          S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                  the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<Turnstile>\\<^sub>P\n              eval\\<^sub>G (dom \\<pi>\\<^sub>\\<A>)\n               (Rep q))) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P Rep \\<phi>\\<^sub>\\<A>) =\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n          S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n          S \\<Turnstile>\\<^sub>P\n          eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>) (theG \\<chi>) \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                  the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<Turnstile>\\<^sub>P\n              eval\\<^sub>G (dom \\<pi>\\<^sub>\\<UU>)\n               (step (Rep q) (w j)))) \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P step (Rep \\<phi>\\<^sub>\\<UU>) (w j))\n\ngoal (1 subgoal):\n 1. (((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n     \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n    (((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n     \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "unfolding M_fin.simps M\\<^sub>\\<UU>_fin.simps ltl_prop_entails_abs.abs_eq[symmetric] eval\\<^sub>G_abs.abs_eq[symmetric] ltl\\<^sub>P_abs_rep step_abs.abs_eq[symmetric]"], ["proof (prove)\nusing this:\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n          S \\<up>\\<Turnstile>\\<^sub>P Abs \\<chi> \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<A> \\<chi>).\n                  the (m\\<^sub>\\<A> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G\n     (dom \\<pi>\\<^sub>\\<A>) q)) \\<longrightarrow>\n      S \\<up>\\<Turnstile>\\<^sub>P \\<phi>\\<^sub>\\<A>) =\n  (\\<forall>S.\n      (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n          S \\<up>\\<Turnstile>\\<^sub>P Abs \\<chi> \\<and>\n          S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G\n (dom \\<pi>\\<^sub>\\<UU>) (Abs (theG \\<chi>)) \\<and>\n          (\\<forall>q.\n              (\\<exists>j\\<ge>the (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                  the (m\\<^sub>\\<UU> \\<chi>) q = Some j) \\<longrightarrow>\n              S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G\n     (dom \\<pi>\\<^sub>\\<UU>) (\\<up>step q (w j)))) \\<longrightarrow>\n      S \\<up>\\<Turnstile>\\<^sub>P \\<up>step \\<phi>\\<^sub>\\<UU> (w j))\n\ngoal (1 subgoal):\n 1. (((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n     \\<in> {((\\<phi>', m), \\<nu>, p).\n            \\<not> (\\<forall>S.\n                       (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<A>.\n                           S \\<up>\\<Turnstile>\\<^sub>P Abs \\<chi> \\<and>\n                           (\\<forall>q.\n                               (\\<exists>j\\<ge>the\n          (\\<pi>\\<^sub>\\<A> \\<chi>).\n                                   the (m \\<chi>) q =\n                                   Some j) \\<longrightarrow>\n                               S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G\n                      (dom \\<pi>\\<^sub>\\<A>) q)) \\<longrightarrow>\n                       S \\<up>\\<Turnstile>\\<^sub>P \\<phi>')}) =\n    (((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n     \\<in> {((\\<phi>', m), \\<nu>, p).\n            \\<not> (\\<forall>S.\n                       (\\<forall>\\<chi>\\<in>dom \\<pi>\\<^sub>\\<UU>.\n                           S \\<up>\\<Turnstile>\\<^sub>P Abs \\<chi> \\<and>\n                           S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G\n                  (dom \\<pi>\\<^sub>\\<UU>) (Abs (theG \\<chi>)) \\<and>\n                           (\\<forall>q.\n                               (\\<exists>j\\<ge>the\n          (\\<pi>\\<^sub>\\<UU> \\<chi>).\n                                   the (m \\<chi>) q =\n                                   Some j) \\<longrightarrow>\n                               S \\<up>\\<Turnstile>\\<^sub>P \\<up>eval\\<^sub>G\n                      (dom \\<pi>\\<^sub>\\<UU>)\n                      (\\<up>step q \\<nu>))) \\<longrightarrow>\n                       S \\<up>\\<Turnstile>\\<^sub>P \\<up>step \\<phi>'\n              \\<nu>)})", "by blast"], ["proof (state)\nthis:\n  (((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n   \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n   \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. \\<And>j.\n       i \\<le> j \\<Longrightarrow>\n       (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "thus \"?thesis j\""], ["proof (prove)\nusing this:\n  (((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n   \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n   \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n    (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "unfolding r\\<^sub>\\<A>_def' r\\<^sub>\\<UU>_def'"], ["proof (prove)\nusing this:\n  (((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n   \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n   \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (((\\<phi>\\<^sub>\\<A>, m\\<^sub>\\<A>), w (Suc j), x)\n     \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n    (((\\<phi>\\<^sub>\\<UU>, m\\<^sub>\\<UU>), w j, y)\n     \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "."], ["proof (state)\nthis:\n  (r\\<^sub>\\<A> (Suc j) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (r\\<^sub>\\<UU> j \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  i \\<le> ?j10 \\<Longrightarrow>\n  (r\\<^sub>\\<A> (Suc ?j10) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (r\\<^sub>\\<UU> ?j10 \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "hence \"\\<And>n. r\\<^sub>\\<A> (j + i + 1 + n) \\<in> M_fin \\<pi>\\<^sub>\\<A> \\<longleftrightarrow> r\\<^sub>\\<UU> (j + i + n) \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>\""], ["proof (prove)\nusing this:\n  i \\<le> ?j10 \\<Longrightarrow>\n  (r\\<^sub>\\<A> (Suc ?j10) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (r\\<^sub>\\<UU> ?j10 \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       (r\\<^sub>\\<A> (j + i + 1 + n) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n       (r\\<^sub>\\<UU> (j + i + n) \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)", "by simp"], ["proof (state)\nthis:\n  (r\\<^sub>\\<A> (j + i + 1 + ?n10) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (r\\<^sub>\\<UU> (j + i + ?n10) \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "hence \"range (suffix (j + i + 1) r\\<^sub>\\<A>) \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {} \\<longleftrightarrow> range (suffix (j + i) r\\<^sub>\\<UU>) \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {}\""], ["proof (prove)\nusing this:\n  (r\\<^sub>\\<A> (j + i + 1 + ?n10) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (r\\<^sub>\\<UU> (j + i + ?n10) \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (range (suffix (j + i + 1) r\\<^sub>\\<A>) \\<inter>\n     M_fin \\<pi>\\<^sub>\\<A> =\n     {}) =\n    (range (suffix (j + i) r\\<^sub>\\<UU>) \\<inter>\n     M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> =\n     {})", "unfolding suffix_def"], ["proof (prove)\nusing this:\n  (r\\<^sub>\\<A> (j + i + 1 + ?n10) \\<in> M_fin \\<pi>\\<^sub>\\<A>) =\n  (r\\<^sub>\\<UU> (j + i + ?n10) \\<in> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. (range (\\<lambda>n. r\\<^sub>\\<A> (j + i + 1 + n)) \\<inter>\n     M_fin \\<pi>\\<^sub>\\<A> =\n     {}) =\n    (range (\\<lambda>n. r\\<^sub>\\<UU> (j + i + n)) \\<inter>\n     M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> =\n     {})", "by blast"], ["proof (state)\nthis:\n  (range (suffix (j + i + 1) r\\<^sub>\\<A>) \\<inter> M_fin \\<pi>\\<^sub>\\<A> =\n   {}) =\n  (range (suffix (j + i) r\\<^sub>\\<UU>) \\<inter>\n   M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> =\n   {})\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "ultimately"], ["proof (chain)\npicking this:\n  limit r\\<^sub>\\<A> = range (suffix (j + i + 1) r\\<^sub>\\<A>)\n  limit r\\<^sub>\\<UU> = range (suffix (j + i) r\\<^sub>\\<UU>)\n  (range (suffix (j + i + 1) r\\<^sub>\\<A>) \\<inter> M_fin \\<pi>\\<^sub>\\<A> =\n   {}) =\n  (range (suffix (j + i) r\\<^sub>\\<UU>) \\<inter>\n   M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> =\n   {})", "show \"limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {} \\<longleftrightarrow> limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {}\""], ["proof (prove)\nusing this:\n  limit r\\<^sub>\\<A> = range (suffix (j + i + 1) r\\<^sub>\\<A>)\n  limit r\\<^sub>\\<UU> = range (suffix (j + i) r\\<^sub>\\<UU>)\n  (range (suffix (j + i + 1) r\\<^sub>\\<A>) \\<inter> M_fin \\<pi>\\<^sub>\\<A> =\n   {}) =\n  (range (suffix (j + i) r\\<^sub>\\<UU>) \\<inter>\n   M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> =\n   {})\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})", "by force"], ["proof (state)\nthis:\n  (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n  (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n  (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "moreover"], ["proof (state)\nthis:\n  (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n  (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "have \"limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {}\" and \"limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {} &&&\n    limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}", "using limit_nonempty \\<open>finite (range r\\<^sub>\\<UU>)\\<close> \\<open>finite (range r\\<^sub>\\<A>)\\<close>"], ["proof (prove)\nusing this:\n  finite (range ?x) \\<Longrightarrow> \\<exists>a. a \\<in> limit ?x\n  finite (range r\\<^sub>\\<UU>)\n  finite (range r\\<^sub>\\<A>)\n\ngoal (1 subgoal):\n 1. limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {} &&&\n    limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {}\n  limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "ultimately"], ["proof (chain)\npicking this:\n  (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n  (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})\n  limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {}\n  limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}", "show ?thesis"], ["proof (prove)\nusing this:\n  (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n  (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})\n  limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {}\n  limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "unfolding accepting_pair\\<^sub>R_def fst_conv snd_conv r\\<^sub>\\<A>_def[symmetric] r\\<^sub>\\<UU>_def[symmetric] Let_def"], ["proof (prove)\nusing this:\n  (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {}) =\n  (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> = {})\n  limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {}\n  limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (limit r\\<^sub>\\<A> \\<inter> M_fin \\<pi>\\<^sub>\\<A> = {} \\<and>\n     limit r\\<^sub>\\<A> \\<inter> UNIV \\<noteq> {}) =\n    (limit r\\<^sub>\\<UU> \\<inter> M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> =\n     {} \\<and>\n     limit r\\<^sub>\\<UU> \\<inter> UNIV \\<noteq> {})", "by blast"], ["proof (state)\nthis:\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV)\n   w\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem ltl_to_generalized_rabin_correct:\n  \"w \\<Turnstile> \\<phi> \\<longleftrightarrow> accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\" \n  (is \"_ \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> =\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w", "proof (unfold ltl_to_generalized_rabin_af_correct[OF finite_\\<Sigma> bounded_w], standard)"], ["proof (state)\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "let ?lhs = \"accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w\""], ["proof (state)\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "interpret \\<A>: ltl_to_rabin_af \\<Sigma> w"], ["proof (prove)\ngoal (1 subgoal):\n 1. ltl_to_rabin_af \\<Sigma> w", "using ltl_to_generalized_rabin_af_wellformed bounded_w finite_\\<Sigma>"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite ?\\<Sigma>; range ?w \\<subseteq> ?\\<Sigma>\\<rbrakk>\n  \\<Longrightarrow> ltl_to_rabin_af ?\\<Sigma> ?w\n  range w \\<subseteq> \\<Sigma>\n  finite \\<Sigma>\n\ngoal (1 subgoal):\n 1. ltl_to_rabin_af \\<Sigma> w", "by auto"], ["proof (state)\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "assume ?lhs"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "then"], ["proof (chain)\npicking this:\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "obtain \\<pi> where I: \"dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\" \n      and II:  \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> the (\\<pi> \\<chi>) < \\<A>.max_rank_of \\<Sigma> \\<chi>\"\n      and III: \"accepting_pair\\<^sub>R (ltl_to_rabin_af.\\<delta>\\<^sub>\\<A> \\<Sigma>) (ltl_to_rabin_af.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>, UNIV) w\"\n      and IV:  \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>) (ltl_to_rabin_af.\\<iota>\\<^sub>\\<A> \\<phi>) (\\<A>.Acc \\<Sigma> \\<pi> \\<chi>) w\""], ["proof (prove)\nusing this:\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>.\n        \\<lbrakk>dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n            the (\\<pi> \\<chi>) < \\<A>.max_rank_of \\<Sigma> \\<chi>;\n         accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n            accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n             (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n             (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> \\<chi>) w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (unfold ltl_to_generalized_rabin_af.simps; blast intro: \\<A>.accept\\<^sub>G\\<^sub>R_I)\n \n    \\<comment> \\<open>Normalise @{text \\<pi>} to the smallest accepting ranks\\<close>"], ["proof (state)\nthis:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < \\<A>.max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> ?\\<chi>10) w\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "then"], ["proof (chain)\npicking this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < \\<A>.max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> ?\\<chi>10) w", "obtain \\<pi>\\<^sub>\\<A> where A: \"dom \\<pi> = dom \\<pi>\\<^sub>\\<A>\"\n      and B: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> \\<pi>\\<^sub>\\<A> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\"\n      and C: \"accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>) (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w\" \n      and D: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>) (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (\\<A>.Acc \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w\""], ["proof (prove)\nusing this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < \\<A>.max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> ?\\<chi>10) w\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>\\<^sub>\\<A>.\n        \\<lbrakk>dom \\<pi> = dom \\<pi>\\<^sub>\\<A>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n            \\<pi>\\<^sub>\\<A> \\<chi> =\n            mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n             (Abs (theG \\<chi>)) w\n             {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n         accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n            accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n             (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n             (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>)\n             w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<A>.normalize_\\<pi>"], ["proof (prove)\nusing this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < \\<A>.max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> ?\\<chi>10) w\n  \\<lbrakk>dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom ?\\<pi> \\<Longrightarrow>\n      the (?\\<pi> \\<chi>) < \\<A>.max_rank_of \\<Sigma> \\<chi>;\n   accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n    (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>) (M_fin ?\\<pi>, UNIV) w;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom ?\\<pi> \\<Longrightarrow>\n      accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n       (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>)\n       (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> ?\\<pi> \\<chi>) w;\n   \\<And>\\<pi>\\<^sub>\\<A>.\n      \\<lbrakk>dom ?\\<pi> = dom \\<pi>\\<^sub>\\<A>;\n       \\<And>\\<chi>.\n          \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n          \\<pi>\\<^sub>\\<A> \\<chi> =\n          mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n           (Abs (theG \\<chi>)) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n       accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n        (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w;\n       \\<And>\\<chi>.\n          \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n          accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n           (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>)\n           (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>\\<^sub>\\<A>.\n        \\<lbrakk>dom \\<pi> = dom \\<pi>\\<^sub>\\<A>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n            \\<pi>\\<^sub>\\<A> \\<chi> =\n            mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n             (Abs (theG \\<chi>)) w\n             {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n         accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n          (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n            accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n             (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n             (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>)\n             w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast\n  \n    \\<comment> \\<open>Properties about the domain of @{text \\<pi>}\\<close>"], ["proof (state)\nthis:\n  dom \\<pi> = dom \\<pi>\\<^sub>\\<A>\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> ?\\<chi>10) w\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "note \\<G>_properties[OF \\<open>dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\\<close>]"], ["proof (state)\nthis:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \\<MM>_Accept: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> mojmir_def.accept af_G_letter_abs (Abs (theG \\<chi>)) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\""], ["proof (prove)\nusing this:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "using I II IV \\<A>.Acc_to_mojmir_accept"], ["proof (prove)\nusing this:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < \\<A>.max_rank_of \\<Sigma> ?\\<chi>10\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> ?\\<chi>10) w\n  \\<lbrakk>G ?\\<psi> \\<in> dom ?\\<pi>;\n   dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n    (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>)\n    (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> ?\\<pi> (G ?\\<psi>)) w;\n   the (?\\<pi> (G ?\\<psi>))\n   < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\n      (Abs ?\\<psi>)\\<rbrakk>\n  \\<Longrightarrow> mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<psi>) w\n                     {q. dom ?\\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "unfolding ltl_to_rabin_base_def.max_rank_of_def"], ["proof (prove)\nusing this:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10)\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10))\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi> ?\\<chi>10) w\n  \\<lbrakk>G ?\\<psi> \\<in> dom ?\\<pi>;\n   dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n    (\\<A>.\\<iota>\\<^sub>\\<A> ?\\<phi>)\n    (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> ?\\<pi> (G ?\\<psi>)) w;\n   the (?\\<pi> (G ?\\<psi>))\n   < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\n      (Abs ?\\<psi>)\\<rbrakk>\n  \\<Longrightarrow> mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<psi>) w\n                     {q. dom ?\\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "by (metis ltl.sel(8))"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \\<UU>_Accept: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> mojmir_def.accept af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\""], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "using unfold_accept_eq[OF \\<open>Only_G (dom \\<pi>)\\<close> finite_\\<Sigma> bounded_w]"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<phi>) w\n   {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q} =\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G ?\\<phi>))\n   w {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "unfolding ltl_prop_entails_abs.rep_eq"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<phi>) w\n   {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q} =\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G ?\\<phi>))\n   w {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}", "by blast\n  \n    \\<comment> \\<open>Define @{text \\<pi>} for the other automaton\\<close>"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "define \\<pi>\\<^sub>\\<UU>\n      where \"\\<pi>\\<^sub>\\<UU> \\<chi> = (if \\<chi> \\<in> dom \\<pi> then mojmir_def.smallest_accepting_rank \\<Sigma> af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q} else None)\"\n      for \\<chi>"], ["proof (state)\nthis:\n  \\<pi>\\<^sub>\\<UU> ?\\<chi> =\n  (if ?\\<chi> \\<in> dom \\<pi>\n   then mojmir_def.smallest_accepting_rank \\<Sigma>\n         \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG ?\\<chi>))) w\n         {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n   else None)\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have 1: \"dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>", "using \\<UU>_Accept"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>", "by (auto simp add: \\<pi>\\<^sub>\\<UU>_def dom_def mojmir_def.smallest_accepting_rank_def)"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \"dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\" and \"dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\" and \"dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\""], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A> &&&\n    dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi> &&&\n    dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>", "using A \\<open>dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\\<close>"], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\n  dom \\<pi> = dom \\<pi>\\<^sub>\\<A>\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A> &&&\n    dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi> &&&\n    dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>", "by blast+"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\n  dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have 2: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> \\<pi>\\<^sub>\\<UU> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       \\<pi>\\<^sub>\\<UU> \\<chi> =\n       mojmir_def.smallest_accepting_rank \\<Sigma>\n        \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}", "using 1"], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       \\<pi>\\<^sub>\\<UU> \\<chi> =\n       mojmir_def.smallest_accepting_rank \\<Sigma>\n        \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}", "unfolding \\<open>dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<close> \\<pi>\\<^sub>\\<UU>_def"], ["proof (prove)\nusing this:\n  dom \\<pi> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       (if \\<chi> \\<in> dom \\<pi>\n        then mojmir_def.smallest_accepting_rank \\<Sigma>\n              \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>)))\n              w (Collect (ltl_prop_entails_abs (dom \\<pi>)))\n        else None) =\n       mojmir_def.smallest_accepting_rank \\<Sigma>\n        \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "by simp"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence 3: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> the (\\<pi>\\<^sub>\\<UU> \\<chi>) < semi_mojmir_def.max_rank \\<Sigma> af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) \""], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       the (\\<pi>\\<^sub>\\<UU> \\<chi>)\n       < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n          (Abs (Unf\\<^sub>G (theG \\<chi>)))", "using wellformed_mojmir_opt[OF \\<G>_elements[OF \\<open>dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\\<close>] finite_\\<Sigma> bounded_w, THEN mojmir.smallest_accepting_rank_properties(6)]"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs ?\\<phi>1) w {q. dom \\<pi>\\<^sub>\\<UU> \\<Turnstile>\\<^sub>P Rep q} =\n  Some ?i \\<Longrightarrow>\n  ?i < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs ?\\<phi>1)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       the (\\<pi>\\<^sub>\\<UU> \\<chi>)\n       < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n          (Abs (Unf\\<^sub>G (theG \\<chi>)))", "unfolding ltl_prop_entails_abs.rep_eq"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<Turnstile>\\<^sub>P Rep q}\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs ?\\<phi>1) w {q. dom \\<pi>\\<^sub>\\<UU> \\<Turnstile>\\<^sub>P Rep q} =\n  Some ?i \\<Longrightarrow>\n  ?i < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs ?\\<phi>1)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       the (\\<pi>\\<^sub>\\<UU> \\<chi>)\n       < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n          (Abs (Unf\\<^sub>G (theG \\<chi>)))", "by fastforce\n  \n    \\<comment> \\<open>Use correctness of the translation of individual accepting pairs\\<close>"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<UU> ?\\<chi>10)\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (Abs (Unf\\<^sub>G (theG ?\\<chi>10)))\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have Acc: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n        (\\<iota>\\<^sub>\\<UU> \\<phi>)\n        (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w", "using mojmir_accept_to_Acc[OF _ \\<open>dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\\<close>] \\<G>_elements[OF \\<open>dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\\<close>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>G ?\\<psi> \\<in> dom \\<pi>\\<^sub>\\<UU>;\n   mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n    ((Abs \\<circ> Unf\\<^sub>G) ?\\<psi>) w\n    {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q};\n   \\<pi>\\<^sub>\\<UU> (G ?\\<psi>) =\n   mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n    ((Abs \\<circ> Unf\\<^sub>G) ?\\<psi>) w\n    {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n                     (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU>\n                       (G ?\\<psi>))\n                     w\n  Only_G (dom \\<pi>\\<^sub>\\<UU>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n        (\\<iota>\\<^sub>\\<UU> \\<phi>)\n        (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w", "using 1 2[of \"G _\"] 3[of \"G _\"] \\<UU>_Accept[of \"G _\"] ltl.sel(8)"], ["proof (prove)\nusing this:\n  \\<lbrakk>G ?\\<psi> \\<in> dom \\<pi>\\<^sub>\\<UU>;\n   mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n    ((Abs \\<circ> Unf\\<^sub>G) ?\\<psi>) w\n    {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q};\n   \\<pi>\\<^sub>\\<UU> (G ?\\<psi>) =\n   mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n    ((Abs \\<circ> Unf\\<^sub>G) ?\\<psi>) w\n    {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n                     (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU>\n                       (G ?\\<psi>))\n                     w\n  Only_G (dom \\<pi>\\<^sub>\\<UU>)\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\n  G ?uu13 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> (G ?uu13) =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG (G ?uu13)))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n  G ?uu13 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<UU> (G ?uu13))\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (Abs (Unf\\<^sub>G (theG (G ?uu13))))\n  G ?uu13 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG (G ?uu13)))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n  theG (G ?x8.0) = ?x8.0\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n        (\\<iota>\\<^sub>\\<UU> \\<phi>)\n        (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w", "unfolding comp_apply"], ["proof (prove)\nusing this:\n  \\<lbrakk>G ?\\<psi> \\<in> dom \\<pi>\\<^sub>\\<UU>;\n   mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G ?\\<psi>))\n    w {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q};\n   \\<pi>\\<^sub>\\<UU> (G ?\\<psi>) =\n   mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n    (Abs (Unf\\<^sub>G ?\\<psi>)) w\n    {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n                       \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                       (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma>)\n                     (ltl_to_rabin_base_def.initial\n                       (\\<lambda>x. Abs (Unf x))\n                       (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n                     (ltl_to_rabin_base_def.Acc_fin\n                       \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                       (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma>\n                       \\<pi>\\<^sub>\\<UU> (G ?\\<psi>),\n                      ltl_to_rabin_base_def.Acc_inf\n                       \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                       (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<pi>\\<^sub>\\<UU>\n                       (G ?\\<psi>))\n                     w\n  Only_G (dom \\<pi>\\<^sub>\\<UU>)\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\n  G ?uu13 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> (G ?uu13) =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG (G ?uu13)))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n  G ?uu13 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<UU> (G ?uu13))\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (Abs (Unf\\<^sub>G (theG (G ?uu13))))\n  G ?uu13 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG (G ?uu13)))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n  theG (G ?x8.0) = ?x8.0\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n       accepting_pair\\<^sub>R\n        (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n          \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n          \\<Sigma>)\n        (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n          (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n        (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n          (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> \\<pi>\\<^sub>\\<UU>\n          \\<chi>,\n         ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n          (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<pi>\\<^sub>\\<UU> \\<chi>)\n        w", "by metis"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>)\n   (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> ?\\<chi>10) w\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have M: \"accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "using unfold_optimisation_correct_M[OF \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close> \\<open>dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\\<close> B 2] C"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<chi>.\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU>\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n                     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n                    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n                     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "using \\<open>dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<chi>.\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU>\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n                     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n                    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n                     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w", "by blast+"], ["proof (state)\nthis:\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV)\n   w\n\ngoal (2 subgoals):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n 2. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "show ?rhs"], ["proof (prove)\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w", "using Acc 3 \\<open>dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\\<close> combine_rabin_pairs_UNIV[OF M combine_rabin_pairs]"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>)\n   (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> ?\\<chi>10) w\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<UU> ?\\<chi>10)\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (Abs (Unf\\<^sub>G (theG ?\\<chi>10)))\n  dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\n  (\\<And>x.\n      x \\<in> ?I1 \\<Longrightarrow>\n      accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n       (\\<iota>\\<^sub>\\<UU> \\<phi>) (?f1 x, ?g1 x) w) \\<Longrightarrow>\n  accepting_pair\\<^sub>G\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>)\n   (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU> \\<union>\n    \\<Union> {?f1 x |x. x \\<in> ?I1},\n    {?g1 x |x. x \\<in> ?I1})\n   w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w", "by (simp only: accept\\<^sub>G\\<^sub>R_def fst_conv snd_conv ltl_to_generalized_rabin.simps rabin_pairs.simps max_rank_of_def comp_apply) blast"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "}"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n   w \\<Longrightarrow>\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "{"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>)\n   w \\<Longrightarrow>\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "assume ?rhs"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "then"], ["proof (chain)\npicking this:\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w", "obtain \\<pi> where I: \"dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\" \n      and II:  \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> the (\\<pi> \\<chi>) < max_rank_of \\<Sigma> \\<chi>\"\n      and III: \"accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w\"\n      and IV:  \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> \\<chi>) w\""], ["proof (prove)\nusing this:\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>.\n        \\<lbrakk>dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n            the (\\<pi> \\<chi>) < max_rank_of \\<Sigma> \\<chi>;\n         accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n          (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n            accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n             (\\<iota>\\<^sub>\\<UU> \\<phi>)\n             (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> \\<chi>) w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (blast intro: accept\\<^sub>G\\<^sub>R_I)\n  \n    \\<comment> \\<open>Normalize @{text \\<pi>} to the smallest accepting ranks\\<close>"], ["proof (state)\nthis:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> ?\\<chi>10) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "then"], ["proof (chain)\npicking this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> ?\\<chi>10) w", "obtain \\<pi>\\<^sub>\\<UU> where A: \"dom \\<pi> = dom \\<pi>\\<^sub>\\<UU>\"\n      and B: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> \\<pi>\\<^sub>\\<UU> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\"\n      and C: \"accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\" \n      and D: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow> accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>) (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w\""], ["proof (prove)\nusing this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> ?\\<chi>10) w\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>\\<^sub>\\<UU>.\n        \\<lbrakk>dom \\<pi> = dom \\<pi>\\<^sub>\\<UU>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n            \\<pi>\\<^sub>\\<UU> \\<chi> =\n            mojmir_def.smallest_accepting_rank \\<Sigma>\n             \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n             {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q};\n         accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n          (\\<iota>\\<^sub>\\<UU> \\<phi>)\n          (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n            accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n             (\\<iota>\\<^sub>\\<UU> \\<phi>)\n             (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using normalize_\\<pi>"], ["proof (prove)\nusing this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < max_rank_of \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> ?\\<chi>10) w\n  \\<lbrakk>dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom ?\\<pi> \\<Longrightarrow>\n      the (?\\<pi> \\<chi>) < max_rank_of \\<Sigma> \\<chi>;\n   accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n    (\\<iota>\\<^sub>\\<UU> ?\\<phi>) (M\\<^sub>\\<UU>_fin ?\\<pi>, UNIV) w;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom ?\\<pi> \\<Longrightarrow>\n      accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n       (\\<iota>\\<^sub>\\<UU> ?\\<phi>)\n       (Acc\\<^sub>\\<UU> \\<Sigma> ?\\<pi> \\<chi>) w;\n   \\<And>\\<pi>\\<^sub>\\<A>.\n      \\<lbrakk>dom ?\\<pi> = dom \\<pi>\\<^sub>\\<A>;\n       \\<And>\\<chi>.\n          \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n          \\<pi>\\<^sub>\\<A> \\<chi> =\n          mojmir_def.smallest_accepting_rank \\<Sigma>\n           \\<up>af\\<^sub>G\\<^sub>\\<UU>\n           ((Abs \\<circ> Unf\\<^sub>G) (theG \\<chi>)) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n       accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n        (\\<iota>\\<^sub>\\<UU> ?\\<phi>)\n        (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<A>, UNIV) w;\n       \\<And>\\<chi>.\n          \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n          accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n           (\\<iota>\\<^sub>\\<UU> ?\\<phi>)\n           (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>\\<^sub>\\<UU>.\n        \\<lbrakk>dom \\<pi> = dom \\<pi>\\<^sub>\\<UU>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n            \\<pi>\\<^sub>\\<UU> \\<chi> =\n            mojmir_def.smallest_accepting_rank \\<Sigma>\n             \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n             {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q};\n         accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n          (\\<iota>\\<^sub>\\<UU> \\<phi>)\n          (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n            accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n             (\\<iota>\\<^sub>\\<UU> \\<phi>)\n             (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> \\<chi>) w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding comp_apply"], ["proof (prove)\nusing this:\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10)\n  < ltl_to_rabin_base_def.max_rank_of \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> ?\\<chi>10\n  accepting_pair\\<^sub>R\n   (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma>)\n   (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n   (M\\<^sub>\\<UU>_fin \\<pi>, UNIV) w\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R\n   (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma>)\n   (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n   (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> \\<pi> ?\\<chi>10,\n    ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<pi> ?\\<chi>10)\n   w\n  \\<lbrakk>dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom ?\\<pi> \\<Longrightarrow>\n      the (?\\<pi> \\<chi>)\n      < ltl_to_rabin_base_def.max_rank_of \\<up>af\\<^sub>G\\<^sub>\\<UU>\n         (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> \\<chi>;\n   accepting_pair\\<^sub>R\n    (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n      \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n      \\<Sigma>)\n    (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n      (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<phi>)\n    (M\\<^sub>\\<UU>_fin ?\\<pi>, UNIV) w;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom ?\\<pi> \\<Longrightarrow>\n      accepting_pair\\<^sub>R\n       (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n         \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n         \\<Sigma>)\n       (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n         (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<phi>)\n       (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n         (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> ?\\<pi> \\<chi>,\n        ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n         (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<pi> \\<chi>)\n       w;\n   \\<And>\\<pi>\\<^sub>\\<A>.\n      \\<lbrakk>dom ?\\<pi> = dom \\<pi>\\<^sub>\\<A>;\n       \\<And>\\<chi>.\n          \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n          \\<pi>\\<^sub>\\<A> \\<chi> =\n          mojmir_def.smallest_accepting_rank \\<Sigma>\n           \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n           {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n       accepting_pair\\<^sub>R\n        (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n          \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n          \\<Sigma>)\n        (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n          (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<phi>)\n        (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<A>, UNIV) w;\n       \\<And>\\<chi>.\n          \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n          accepting_pair\\<^sub>R\n           (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n             \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n             \\<Sigma>)\n           (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n             (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<phi>)\n           (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n             (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> \\<pi>\\<^sub>\\<A>\n             \\<chi>,\n            ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n             (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<pi>\\<^sub>\\<A> \\<chi>)\n           w\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>\\<pi>\\<^sub>\\<UU>.\n        \\<lbrakk>dom \\<pi> = dom \\<pi>\\<^sub>\\<UU>;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n            \\<pi>\\<^sub>\\<UU> \\<chi> =\n            mojmir_def.smallest_accepting_rank \\<Sigma>\n             \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n             {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q};\n         accepting_pair\\<^sub>R\n          (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n            \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n            \\<Sigma>)\n          (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n            (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n          (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w;\n         \\<And>\\<chi>.\n            \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n            accepting_pair\\<^sub>R\n             (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n               \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n               \\<Sigma>)\n             (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n               (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n             (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n               (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> \\<pi>\\<^sub>\\<UU>\n               \\<chi>,\n              ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n               (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<pi>\\<^sub>\\<UU> \\<chi>)\n             w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast\n  \n    \\<comment> \\<open>Properties about the domain of @{text \\<pi>}\\<close>"], ["proof (state)\nthis:\n  dom \\<pi> = dom \\<pi>\\<^sub>\\<UU>\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<UU> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi>\\<^sub>\\<UU> \\<up>\\<Turnstile>\\<^sub>P q}\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV)\n   w\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>)\n   (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi>\\<^sub>\\<UU> ?\\<chi>10) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "note \\<G>_properties[OF \\<open>dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\\<close>]"], ["proof (state)\nthis:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \\<UU>_Accept: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> mojmir_def.accept af_G_letter_abs_opt (Abs (Unf\\<^sub>G (theG \\<chi>))) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\""], ["proof (prove)\nusing this:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "using I II IV Acc_to_mojmir_accept"], ["proof (prove)\nusing this:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10) < max_rank_of \\<Sigma> ?\\<chi>10\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (Acc\\<^sub>\\<UU> \\<Sigma> \\<pi> ?\\<chi>10) w\n  \\<lbrakk>G ?\\<psi> \\<in> dom ?\\<pi>;\n   dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n    (\\<iota>\\<^sub>\\<UU> ?\\<phi>)\n    (Acc\\<^sub>\\<UU> \\<Sigma> ?\\<pi> (G ?\\<psi>)) w;\n   the (?\\<pi> (G ?\\<psi>))\n   < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n      ((Abs \\<circ> Unf\\<^sub>G) ?\\<psi>)\\<rbrakk>\n  \\<Longrightarrow> mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                     ((Abs \\<circ> Unf\\<^sub>G) ?\\<psi>) w\n                     {q. dom ?\\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "unfolding max_rank_of_def comp_apply"], ["proof (prove)\nusing this:\n  finite (dom \\<pi>)\n  Only_G (dom \\<pi>)\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  the (\\<pi> ?\\<chi>10)\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (Abs (Unf\\<^sub>G (theG ?\\<chi>10)))\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  accepting_pair\\<^sub>R\n   (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma>)\n   (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<phi>)\n   (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> \\<pi> ?\\<chi>10,\n    ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n     (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<pi> ?\\<chi>10)\n   w\n  \\<lbrakk>G ?\\<psi> \\<in> dom ?\\<pi>;\n   dom ?\\<pi> \\<subseteq> \\<^bold>G ?\\<phi>;\n   accepting_pair\\<^sub>R\n    (ltl_to_rabin_base_def.delta \\<up>af\\<^sub>\\<UU>\n      \\<up>af\\<^sub>G\\<^sub>\\<UU> (\\<lambda>x. Abs (Unf\\<^sub>G x))\n      \\<Sigma>)\n    (ltl_to_rabin_base_def.initial (\\<lambda>x. Abs (Unf x))\n      (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<phi>)\n    (ltl_to_rabin_base_def.Acc_fin \\<up>af\\<^sub>G\\<^sub>\\<UU>\n      (\\<lambda>x. Abs (Unf\\<^sub>G x)) \\<Sigma> ?\\<pi> (G ?\\<psi>),\n     ltl_to_rabin_base_def.Acc_inf \\<up>af\\<^sub>G\\<^sub>\\<UU>\n      (\\<lambda>x. Abs (Unf\\<^sub>G x)) ?\\<pi> (G ?\\<psi>))\n    w;\n   the (?\\<pi> (G ?\\<psi>))\n   < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n      (Abs (Unf\\<^sub>G ?\\<psi>))\\<rbrakk>\n  \\<Longrightarrow> mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                     (Abs (Unf\\<^sub>G ?\\<psi>)) w\n                     {q. dom ?\\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n        (Abs (Unf\\<^sub>G (theG \\<chi>))) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "by (metis ltl.sel(8))"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \\<MM>_Accept: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi> \\<Longrightarrow> mojmir_def.accept af_G_letter_abs (Abs (theG \\<chi>)) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\""], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "using unfold_accept_eq[OF \\<open>Only_G (dom \\<pi>)\\<close> finite_\\<Sigma> bounded_w]"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<phi>) w\n   {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q} =\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G ?\\<phi>))\n   w {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "unfolding ltl_prop_entails_abs.rep_eq"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU>\n   (Abs (Unf\\<^sub>G (theG ?\\<chi>10))) w\n   {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<phi>) w\n   {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q} =\n  mojmir_def.accept \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs (Unf\\<^sub>G ?\\<phi>))\n   w {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w\n        {q. dom \\<pi> \\<Turnstile>\\<^sub>P Rep q}", "by blast\n  \n    \\<comment> \\<open>Define @{text \\<pi>} for the other automaton\\<close>"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "define \\<pi>\\<^sub>\\<A>\n      where \"\\<pi>\\<^sub>\\<A> \\<chi> = (if \\<chi> \\<in> dom \\<pi> then mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q} else None)\"\n      for \\<chi>"], ["proof (state)\nthis:\n  \\<pi>\\<^sub>\\<A> ?\\<chi> =\n  (if ?\\<chi> \\<in> dom \\<pi>\n   then mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n         (Abs (theG ?\\<chi>)) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n   else None)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have 1: \"dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<A> = dom \\<pi>", "using \\<MM>_Accept"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<A> = dom \\<pi>", "by (auto simp add: \\<pi>\\<^sub>\\<A>_def dom_def mojmir_def.smallest_accepting_rank_def)"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \"dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\" and \"dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\" and \"dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\""], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A> &&&\n    dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi> &&&\n    dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>", "using A \\<open>dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\\<close>"], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\n  dom \\<pi> = dom \\<pi>\\<^sub>\\<UU>\n  dom \\<pi> \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A> &&&\n    dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi> &&&\n    dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>", "by blast+"], ["proof (state)\nthis:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\n  dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence \"ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w\""], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\n  dom \\<pi>\\<^sub>\\<UU> \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w", "by (unfold_locales; insert \\<G>_elements[OF \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close>] finite_\\<Sigma> bounded_w)"], ["proof (state)\nthis:\n  ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have 2: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> \\<pi>\\<^sub>\\<A> \\<chi> = mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>)) w {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       \\<pi>\\<^sub>\\<A> \\<chi> =\n       mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n        (Abs (theG \\<chi>)) w\n        {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}", "using 1"], ["proof (prove)\nusing this:\n  dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       \\<pi>\\<^sub>\\<A> \\<chi> =\n       mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n        (Abs (theG \\<chi>)) w\n        {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}", "unfolding \\<open>dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\\<close> \\<pi>\\<^sub>\\<A>_def"], ["proof (prove)\nusing this:\n  dom \\<pi> = dom \\<pi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n       (if \\<chi> \\<in> dom \\<pi>\n        then mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n              (Abs (theG \\<chi>)) w\n              (Collect (ltl_prop_entails_abs (dom \\<pi>)))\n        else None) =\n       mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n        (Abs (theG \\<chi>)) w {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}", "by simp"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "hence 3: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> the (\\<pi>\\<^sub>\\<A> \\<chi>) < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG \\<chi>))\""], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       the (\\<pi>\\<^sub>\\<A> \\<chi>)\n       < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\n          (Abs (theG \\<chi>))", "using ltl_FG_to_rabin.smallest_accepting_rank_properties(6)[OF \\<open>ltl_FG_to_rabin \\<Sigma> (dom \\<pi>\\<^sub>\\<A>) w\\<close>]"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs ?\\<phi>)\n   w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} =\n  Some ?i \\<Longrightarrow>\n  ?i < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs ?\\<phi>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       the (\\<pi>\\<^sub>\\<A> \\<chi>)\n       < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\n          (Abs (theG \\<chi>))", "unfolding ltl_prop_entails_abs.rep_eq"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> ?\\<chi>10 =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG ?\\<chi>10)) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q}\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs ?\\<phi>)\n   w {q. dom \\<pi>\\<^sub>\\<A> \\<Turnstile>\\<^sub>P Rep q} =\n  Some ?i \\<Longrightarrow>\n  ?i < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs ?\\<phi>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       the (\\<pi>\\<^sub>\\<A> \\<chi>)\n       < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G\n          (Abs (theG \\<chi>))", "by fastforce\n  \n    \\<comment> \\<open>Use correctness of the translation of individual accepting pairs\\<close>"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<A> ?\\<chi>10)\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have Acc: \"\\<And>\\<chi>. \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow> accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>) (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (\\<A>.Acc \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n        (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n        (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w", "using \\<A>.mojmir_accept_to_Acc[OF _ \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close>] \\<G>_elements[OF \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>G ?\\<psi> \\<in> dom \\<pi>\\<^sub>\\<A>;\n   mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<psi>) w\n    {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n   \\<pi>\\<^sub>\\<A> (G ?\\<psi>) =\n   mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs ?\\<psi>)\n    w {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n                     (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A>\n                       (G ?\\<psi>))\n                     w\n  Only_G (dom \\<pi>\\<^sub>\\<A>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n        (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n        (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w", "using 1 2[of \"G _\"] 3[of \"G _\"] \\<MM>_Accept[of \"G _\"] ltl.sel(8)"], ["proof (prove)\nusing this:\n  \\<lbrakk>G ?\\<psi> \\<in> dom \\<pi>\\<^sub>\\<A>;\n   mojmir_def.accept \\<up>af\\<^sub>G (Abs ?\\<psi>) w\n    {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q};\n   \\<pi>\\<^sub>\\<A> (G ?\\<psi>) =\n   mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G (Abs ?\\<psi>)\n    w {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n                     (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A>\n                       (G ?\\<psi>))\n                     w\n  Only_G (dom \\<pi>\\<^sub>\\<A>)\n  dom \\<pi>\\<^sub>\\<A> = dom \\<pi>\n  G ?uu13 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  \\<pi>\\<^sub>\\<A> (G ?uu13) =\n  mojmir_def.smallest_accepting_rank \\<Sigma> \\<up>af\\<^sub>G\n   (Abs (theG (G ?uu13))) w\n   {q. dom \\<pi>\\<^sub>\\<A> \\<up>\\<Turnstile>\\<^sub>P q}\n  G ?uu13 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<A> (G ?uu13))\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG (G ?uu13)))\n  G ?uu13 \\<in> dom \\<pi> \\<Longrightarrow>\n  mojmir_def.accept \\<up>af\\<^sub>G (Abs (theG (G ?uu13))) w\n   {q. dom \\<pi> \\<up>\\<Turnstile>\\<^sub>P q}\n  theG (G ?x8.0) = ?x8.0\n\ngoal (1 subgoal):\n 1. \\<And>\\<chi>.\n       \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n       accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n        (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n        (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> \\<chi>) w", "by metis"], ["proof (state)\nthis:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> ?\\<chi>10) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "have M: \"accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>) (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w", "using unfold_optimisation_correct_M[OF \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close> \\<open>dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\\<close> 2 B] C"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<chi>.\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU>\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n                     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n                    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n                     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV)\n   w\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w", "using \\<open>dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<chi>.\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n              \\<chi> \\<in> dom \\<pi>\\<^sub>\\<A>;\n   \\<And>\\<chi>.\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU> \\<Longrightarrow>\n      \\<chi> \\<in> dom \\<pi>\\<^sub>\\<UU>\\<rbrakk>\n  \\<Longrightarrow> accepting_pair\\<^sub>R\n                     (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n                     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n                     (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w =\n                    accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n                     (\\<iota>\\<^sub>\\<UU> \\<phi>)\n                     (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV) w\n  accepting_pair\\<^sub>R (\\<delta>\\<^sub>\\<UU> \\<Sigma>)\n   (\\<iota>\\<^sub>\\<UU> \\<phi>) (M\\<^sub>\\<UU>_fin \\<pi>\\<^sub>\\<UU>, UNIV)\n   w\n  dom \\<pi>\\<^sub>\\<UU> = dom \\<pi>\\<^sub>\\<A>\n\ngoal (1 subgoal):\n 1. accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n     (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w", "by blast+"], ["proof (state)\nthis:\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (M_fin \\<pi>\\<^sub>\\<A>, UNIV) w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n     w \\<Longrightarrow>\n    accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "show ?lhs"], ["proof (prove)\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "using Acc 3 \\<open>dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\\<close> combine_rabin_pairs_UNIV[OF M combine_rabin_pairs]"], ["proof (prove)\nusing this:\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (\\<A>.Acc\\<^sub>\\<A> \\<Sigma> \\<pi>\\<^sub>\\<A> ?\\<chi>10) w\n  ?\\<chi>10 \\<in> dom \\<pi>\\<^sub>\\<A> \\<Longrightarrow>\n  the (\\<pi>\\<^sub>\\<A> ?\\<chi>10)\n  < semi_mojmir_def.max_rank \\<Sigma> \\<up>af\\<^sub>G (Abs (theG ?\\<chi>10))\n  dom \\<pi>\\<^sub>\\<A> \\<subseteq> \\<^bold>G \\<phi>\n  (\\<And>x.\n      x \\<in> ?I1 \\<Longrightarrow>\n      accepting_pair\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n       (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>) (?f1 x, ?g1 x) w) \\<Longrightarrow>\n  accepting_pair\\<^sub>G\\<^sub>R (\\<A>.\\<delta>\\<^sub>\\<A> \\<Sigma>)\n   (\\<A>.\\<iota>\\<^sub>\\<A> \\<phi>)\n   (M_fin \\<pi>\\<^sub>\\<A> \\<union> \\<Union> {?f1 x |x. x \\<in> ?I1},\n    {?g1 x |x. x \\<in> ?I1})\n   w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w", "by (simp only: accept\\<^sub>G\\<^sub>R_def fst_conv snd_conv \\<A>.ltl_to_generalized_rabin.simps \\<A>.rabin_pairs.simps\n                     ltl_to_generalized_rabin_af.simps  \\<A>.max_rank_of_def comp_apply) blast"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w\n\ngoal:\nNo subgoals!", "}"], ["proof (state)\nthis:\n  accept\\<^sub>G\\<^sub>R (\\<A>\\<^sub>\\<UU> \\<Sigma> \\<phi>)\n   w \\<Longrightarrow>\n  accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af \\<Sigma> \\<phi>) w\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "fun ltl_to_generalized_rabin_af\\<^sub>\\<UU>\nwhere\n  \"ltl_to_generalized_rabin_af\\<^sub>\\<UU> \\<Sigma> \\<phi> = ltl_to_rabin_base_def.ltl_to_generalized_rabin \\<up>af\\<^sub>\\<UU> \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<circ> Unf) (Abs \\<circ> Unf\\<^sub>G) M\\<^sub>\\<UU>_fin \\<Sigma> \\<phi>\""], ["", "lemma ltl_to_generalized_rabin_af\\<^sub>\\<UU>_wellformed:\n  \"finite \\<Sigma> \\<Longrightarrow> range w \\<subseteq> \\<Sigma> \\<Longrightarrow> ltl_to_rabin_af_unf \\<Sigma> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>\\<rbrakk>\n    \\<Longrightarrow> ltl_to_rabin_af_unf \\<Sigma> w", "apply (unfold_locales)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>\\<rbrakk>\n    \\<Longrightarrow> finite \\<Sigma>\n 2. \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>\\<rbrakk>\n    \\<Longrightarrow> range w \\<subseteq> \\<Sigma>\n 3. \\<And>\\<pi> \\<pi>'.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>;\n        dom \\<pi> = dom \\<pi>';\n        \\<And>\\<chi>.\n           \\<chi> \\<in> dom \\<pi> \\<Longrightarrow>\n           the (\\<pi> \\<chi>) \\<le> the (\\<pi>' \\<chi>)\\<rbrakk>\n       \\<Longrightarrow> M\\<^sub>\\<UU>_fin \\<pi>\n                         \\<subseteq> M\\<^sub>\\<UU>_fin \\<pi>'\n 4. \\<And>\\<phi>.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>\\<rbrakk>\n       \\<Longrightarrow> finite\n                          (reach \\<Sigma> \\<up>af\\<^sub>\\<UU>\n                            ((Abs \\<circ> Unf) \\<phi>))\n 5. \\<And>\\<G> \\<psi>.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>;\n        Only_G \\<G>\\<rbrakk>\n       \\<Longrightarrow> finite \\<Sigma>\n 6. \\<And>\\<G> \\<psi>.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>;\n        Only_G \\<G>\\<rbrakk>\n       \\<Longrightarrow> finite\n                          (reach \\<Sigma> \\<up>af\\<^sub>G\\<^sub>\\<UU>\n                            ((Abs \\<circ> Unf\\<^sub>G) \\<psi>))\n 7. \\<And>\\<G> \\<psi>.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>;\n        Only_G \\<G>\\<rbrakk>\n       \\<Longrightarrow> range w \\<subseteq> \\<Sigma>\n 8. \\<And>\\<G> \\<psi> q \\<nu>.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>; Only_G \\<G>;\n        q \\<in> {q. \\<G> \\<up>\\<Turnstile>\\<^sub>P q}\\<rbrakk>\n       \\<Longrightarrow> \\<up>af\\<^sub>G\\<^sub>\\<UU> q \\<nu>\n                         \\<in> {q. \\<G> \\<up>\\<Turnstile>\\<^sub>P q}", "apply (auto simp add: af_G_letter_opt_sat_core_lifted ltl_prop_entails_abs.rep_eq intro: finite_reach_af_opt finite_reach_af_G_opt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<pi> \\<pi>' a b aa S.\n       \\<lbrakk>finite \\<Sigma>; range w \\<subseteq> \\<Sigma>;\n        dom \\<pi> = dom \\<pi>';\n        \\<And>\\<chi>.\n           \\<chi> \\<in> dom \\<pi>' \\<Longrightarrow>\n           the (\\<pi> \\<chi>) \\<le> the (\\<pi>' \\<chi>);\n        \\<forall>\\<chi>\\<in>dom \\<pi>'.\n           S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n           S \\<Turnstile>\\<^sub>P\n           Rep (\\<up>eval\\<^sub>G (dom \\<pi>') (Abs (theG \\<chi>))) \\<and>\n           (\\<forall>q.\n               (\\<exists>j\\<ge>the (\\<pi> \\<chi>).\n                   the (b \\<chi>) q = Some j) \\<longrightarrow>\n               S \\<Turnstile>\\<^sub>P\n               Rep (\\<up>eval\\<^sub>G (dom \\<pi>') (\\<up>step q aa)));\n        \\<not> S \\<Turnstile>\\<^sub>P Rep (\\<up>step a aa)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S.\n                            (\\<forall>\\<chi>\\<in>dom \\<pi>'.\n                                S \\<Turnstile>\\<^sub>P \\<chi> \\<and>\n                                S \\<Turnstile>\\<^sub>P\n                                Rep (\\<up>eval\\<^sub>G (dom \\<pi>')\n(Abs (theG \\<chi>))) \\<and>\n                                (\\<forall>q.\n                                    (\\<exists>j\\<ge>the (\\<pi>' \\<chi>).\n  the (b \\<chi>) q = Some j) \\<longrightarrow>\n                                    S \\<Turnstile>\\<^sub>P\n                                    Rep (\\<up>eval\\<^sub>G (dom \\<pi>')\n    (\\<up>step q aa)))) \\<and>\n                            \\<not> S \\<Turnstile>\\<^sub>P\n                                   Rep (\\<up>step a aa)", "apply (meson le_trans ltl_semi_mojmir[unfolded semi_mojmir_def])+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "theorem ltl_to_generalized_rabin_af\\<^sub>\\<UU>_correct:\n  assumes \"finite \\<Sigma>\"\n  assumes \"range w \\<subseteq> \\<Sigma>\"\n  shows \"w \\<Turnstile> \\<phi> = accept\\<^sub>G\\<^sub>R (ltl_to_generalized_rabin_af\\<^sub>\\<UU> \\<Sigma> \\<phi>) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> =\n    accept\\<^sub>G\\<^sub>R\n     (ltl_to_generalized_rabin_af\\<^sub>\\<UU> \\<Sigma> \\<phi>) w", "using ltl_to_generalized_rabin_af\\<^sub>\\<UU>_wellformed[OF assms, THEN ltl_to_rabin_af_unf.ltl_to_generalized_rabin_correct]"], ["proof (prove)\nusing this:\n  w \\<Turnstile> ?\\<phi> =\n  accept\\<^sub>G\\<^sub>R\n   (ltl_to_rabin_base_def.ltl_to_generalized_rabin \\<up>af\\<^sub>\\<UU>\n     \\<up>af\\<^sub>G\\<^sub>\\<UU> (Abs \\<circ> Unf) (Abs \\<circ> Unf\\<^sub>G)\n     M\\<^sub>\\<UU>_fin \\<Sigma> ?\\<phi>)\n   w\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> =\n    accept\\<^sub>G\\<^sub>R\n     (ltl_to_generalized_rabin_af\\<^sub>\\<UU> \\<Sigma> \\<phi>) w", "by simp"], ["", "thm ltl_FG_to_generalized_rabin_correct ltl_to_generalized_rabin_af_correct ltl_to_generalized_rabin_af\\<^sub>\\<UU>_correct"], ["", "end"]]}