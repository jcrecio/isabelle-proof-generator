{"file_name": "/home/qj213/afp-2021-10-22/thys/LTL_to_DRA/Logical_Characterization.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/LTL_to_DRA", "problem_names": ["lemma \\<G>\\<^sub>F\\<^sub>G_alt_def:\n  \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w = {G \\<psi> | \\<psi>. G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F (G \\<psi>)}\"", "lemma \\<G>\\<^sub>F\\<^sub>G_Only_G:\n  \"Only_G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\"", "lemma \\<G>\\<^sub>F\\<^sub>G_suffix[simp]:\n  \"\\<G>\\<^sub>F\\<^sub>G \\<phi> (suffix i w) = \\<G>\\<^sub>F\\<^sub>G \\<phi> w\"", "lemma almost_all_eventually_provable_monotonI[intro]:\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w \\<Longrightarrow> \\<G> \\<subseteq> \\<G>' \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w\"", "lemma almost_all_eventually_provable_restrict_to_G:\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w \\<Longrightarrow> Only_G \\<G> \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G> \\<inter> \\<^bold>G \\<phi>) w\"", "lemma almost_all_eventually_provable_restrict_to_G_depth:\n  assumes \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\"\n  assumes \"Only_G \\<G>\"\n  shows \"\\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w\"", "lemma almost_all_eventually_provable_suffix:\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' (suffix i w)\"", "lemma threshold_properties:\n  \"threshold \\<phi> w \\<G> = Some i \\<Longrightarrow> 0 < i \\<Longrightarrow> \\<not> \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [(i - 1) \\<rightarrow> k])\"\n  \"threshold \\<phi> w \\<G> = Some i \\<Longrightarrow> j \\<ge> i \\<Longrightarrow> \\<exists>k. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [j \\<rightarrow> k])\"", "lemma threshold_suffix:\n  assumes \"threshold \\<phi> w \\<G> = Some k\"\n  assumes \"threshold \\<phi> (suffix i w) \\<G> = Some k'\"\n  shows \"k \\<le> k' + i\"", "lemma ltl_implies_provable:\n  \"w \\<Turnstile> \\<phi> \\<Longrightarrow> \\<PP> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w 0\"", "lemma ltl_implies_provable_almost_all:\n  \"w \\<Turnstile> \\<phi> \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> i])\"", "lemma closed_FG:\n  assumes \"closed \\<G> w\"\n  assumes \"G \\<psi> \\<in> \\<G>\"\n  shows \"w \\<Turnstile> F G \\<psi>\"", "lemma closed_\\<G>\\<^sub>F\\<^sub>G:\n  \"closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\"", "lemma almost_all_suffixes_model_\\<F>:\n  assumes \"closed \\<G> w\"\n  assumes \"G \\<phi> \\<in> \\<G>\"\n  shows \"\\<forall>\\<^sub>\\<infinity>j. suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)\"", "lemma almost_all_commutative'':\n  assumes \"finite S\"\n  assumes \"Only_G S\"\n  assumes \"\\<And>x. G x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P x (i::nat)\"\n  shows \"\\<forall>\\<^sub>\\<infinity>i. \\<forall>x. G x \\<in> S \\<longrightarrow> P x i\"", "lemma almost_all_suffixes_model_\\<F>_generalized:\n  assumes \"closed \\<G> w\"\n  shows \"\\<forall>\\<^sub>\\<infinity>j. \\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)\"", "lemma threshold_suffix_2:\n  assumes \"threshold \\<psi> w \\<G>' = Some k\"\n  assumes \"k \\<le> l\"\n  shows \"threshold \\<psi> (suffix l w) \\<G>' = Some 0\"", "lemma threshold_closed:\n  assumes \"closed \\<G> w\"\n  shows \"\\<exists>k. \\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> threshold \\<psi> (suffix k w) \\<G> = Some 0\"", "lemma \\<F>_drop:\n  assumes \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w\"\n  assumes \"S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\"\n  shows \"S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j\"", "lemma lemmaD:\n  assumes \"w \\<Turnstile> \\<phi>\"\n  assumes \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow> threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\"\n  shows \"accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\"", "theorem ltl_FG_logical_characterization:\n  \"w \\<Turnstile> F G \\<phi> \\<longleftrightarrow> (\\<exists>\\<G> \\<subseteq> \\<^bold>G (F G \\<phi>). G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w)\"\n  (is \"?lhs \\<longleftrightarrow> ?rhs\")", "theorem ltl_logical_characterization:\n  \"w \\<Turnstile> \\<phi> \\<longleftrightarrow> (\\<exists>\\<G> \\<subseteq> \\<^bold>G \\<phi>. accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w)\"\n  (is \"?lhs \\<longleftrightarrow> ?rhs\")"], "translations": [["", "lemma \\<G>\\<^sub>F\\<^sub>G_alt_def:\n  \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w = {G \\<psi> | \\<psi>. G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F (G \\<psi>)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w =\n    {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}", "by (induction \\<phi> arbitrary: w) (simp; blast)+"], ["", "lemma \\<G>\\<^sub>F\\<^sub>G_Only_G:\n  \"Only_G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Only_G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)", "by (induction \\<phi>) auto"], ["", "lemma \\<G>\\<^sub>F\\<^sub>G_suffix[simp]:\n  \"\\<G>\\<^sub>F\\<^sub>G \\<phi> (suffix i w) = \\<G>\\<^sub>F\\<^sub>G \\<phi> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> (suffix i w) = \\<G>\\<^sub>F\\<^sub>G \\<phi> w", "unfolding \\<G>\\<^sub>F\\<^sub>G_alt_def LTL_FG_suffix"], ["proof (prove)\ngoal (1 subgoal):\n 1. {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>} =\n    {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}", ".."], ["", "subsection \\<open>Eventually Provable and Almost All Eventually Provable\\<close>"], ["", "abbreviation \\<PP>\nwhere\n  \"\\<PP> \\<phi> \\<G> w i \\<equiv> \\<exists>j. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\""], ["", "definition almost_all_eventually_provable :: \"'a ltl \\<Rightarrow> 'a ltl set \\<Rightarrow> 'a set word \\<Rightarrow> bool\" (\"\\<PP>\\<^sub>\\<infinity>\") \nwhere\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w \\<equiv> \\<forall>\\<^sub>\\<infinity>i. \\<PP> \\<phi> \\<G> w i\""], ["", "subsubsection \\<open>Proof Rules\\<close>"], ["", "lemma almost_all_eventually_provable_monotonI[intro]:\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w \\<Longrightarrow> \\<G> \\<subseteq> \\<G>' \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w;\n     \\<G> \\<subseteq> \\<G>'\\<rbrakk>\n    \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w", "unfolding almost_all_eventually_provable_def MOST_nat_le"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<phi> \\<G> w n;\n     \\<G> \\<subseteq> \\<G>'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<phi> \\<G>' w n", "by blast"], ["", "lemma almost_all_eventually_provable_restrict_to_G:\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w \\<Longrightarrow> Only_G \\<G> \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G> \\<inter> \\<^bold>G \\<phi>) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w; Only_G \\<G>\\<rbrakk>\n    \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi>\n                       (\\<G> \\<inter> \\<^bold>G \\<phi>) w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w; Only_G \\<G>\\<rbrakk>\n    \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi>\n                       (\\<G> \\<inter> \\<^bold>G \\<phi>) w", "assume \"Only_G \\<G>\" and \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\""], ["proof (state)\nthis:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w; Only_G \\<G>\\<rbrakk>\n    \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi>\n                       (\\<G> \\<inter> \\<^bold>G \\<phi>) w", "moreover"], ["proof (state)\nthis:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w; Only_G \\<G>\\<rbrakk>\n    \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi>\n                       (\\<G> \\<inter> \\<^bold>G \\<phi>) w", "hence \"\\<And>\\<phi>. \\<G> \\<Turnstile>\\<^sub>P \\<phi> = (\\<G> \\<inter> \\<^bold>G \\<phi>) \\<Turnstile>\\<^sub>P \\<phi>\""], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi>.\n       \\<G> \\<Turnstile>\\<^sub>P \\<phi> =\n       (\\<G> \\<inter> \\<^bold>G \\<phi>) \\<Turnstile>\\<^sub>P \\<phi>", "using LTL_prop_entailment_restrict_to_propos propos_subset"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n  ?S \\<Turnstile>\\<^sub>P ?\\<phi> =\n  (?S \\<inter> propos ?\\<phi>) \\<Turnstile>\\<^sub>P ?\\<phi>\n  propos ?\\<phi> \\<subseteq> nested_propos ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi>.\n       \\<G> \\<Turnstile>\\<^sub>P \\<phi> =\n       (\\<G> \\<inter> \\<^bold>G \\<phi>) \\<Turnstile>\\<^sub>P \\<phi>", "unfolding G_nested_propos_alt_def"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n  ?S \\<Turnstile>\\<^sub>P ?\\<phi> =\n  (?S \\<inter> propos ?\\<phi>) \\<Turnstile>\\<^sub>P ?\\<phi>\n  propos ?\\<phi> \\<subseteq> nested_propos ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<phi>.\n       \\<G> \\<Turnstile>\\<^sub>P \\<phi> =\n       (\\<G> \\<inter>\n        (nested_propos \\<phi> \\<inter>\n         {\\<psi>. \\<exists>x. \\<psi> = G x})) \\<Turnstile>\\<^sub>P\n       \\<phi>", "by blast"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> =\n  (\\<G> \\<inter> \\<^bold>G ?\\<phi>) \\<Turnstile>\\<^sub>P ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w; Only_G \\<G>\\<rbrakk>\n    \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi>\n                       (\\<G> \\<inter> \\<^bold>G \\<phi>) w", "ultimately"], ["proof (chain)\npicking this:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> =\n  (\\<G> \\<inter> \\<^bold>G ?\\<phi>) \\<Turnstile>\\<^sub>P ?\\<phi>", "show ?thesis"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> =\n  (\\<G> \\<inter> \\<^bold>G ?\\<phi>) \\<Turnstile>\\<^sub>P ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G> \\<inter> \\<^bold>G \\<phi>) w", "unfolding almost_all_eventually_provable_def"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  \\<forall>\\<^sub>\\<infinity>i. \\<PP> \\<phi> \\<G> w i\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi> =\n  (\\<G> \\<inter> \\<^bold>G ?\\<phi>) \\<Turnstile>\\<^sub>P ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<PP> \\<phi> (\\<G> \\<inter> \\<^bold>G \\<phi>) w i", "by force"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G> \\<inter> \\<^bold>G \\<phi>) w\n\ngoal:\nNo subgoals!", "qed"], ["", "fun G_depth :: \"'a ltl \\<Rightarrow> nat\"\nwhere \n  \"G_depth (\\<phi> and \\<psi>) = max (G_depth \\<phi>) (G_depth \\<psi>)\"\n| \"G_depth (\\<phi> or \\<psi>) = max (G_depth \\<phi>) (G_depth \\<psi>)\"\n| \"G_depth (F \\<phi>) = G_depth \\<phi>\"\n| \"G_depth (G \\<phi>) = G_depth \\<phi> + 1\"\n| \"G_depth (X \\<phi>) = G_depth \\<phi>\"\n| \"G_depth (\\<phi> U \\<psi>) = max (G_depth \\<phi>) (G_depth \\<psi>)\"\n| \"G_depth \\<phi> = 0\""], ["", "lemma almost_all_eventually_provable_restrict_to_G_depth:\n  assumes \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\"\n  assumes \"Only_G \\<G>\"\n  shows \"\\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "fix \\<phi>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "have \"\\<G> \\<Turnstile>\\<^sub>P \\<phi> = (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) \\<Turnstile>\\<^sub>P \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P \\<phi> =\n    (\\<G> \\<inter>\n     {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) \\<Turnstile>\\<^sub>P\n    \\<phi>", "by (induction \\<phi>) (insert \\<open>Only_G \\<G>\\<close>, auto)"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P \\<phi> =\n  (\\<G> \\<inter>\n   {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) \\<Turnstile>\\<^sub>P\n  \\<phi>\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "}"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi>'2 =\n  (\\<G> \\<inter>\n   {\\<psi>. G_depth \\<psi> \\<le> G_depth ?\\<phi>'2}) \\<Turnstile>\\<^sub>P\n  ?\\<phi>'2\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "note Unfold1 = this"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi>'2 =\n  (\\<G> \\<inter>\n   {\\<psi>. G_depth \\<psi> \\<le> G_depth ?\\<phi>'2}) \\<Turnstile>\\<^sub>P\n  ?\\<phi>'2\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "{"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P ?\\<phi>'2 =\n  (\\<G> \\<inter>\n   {\\<psi>. G_depth \\<psi> \\<le> G_depth ?\\<phi>'2}) \\<Turnstile>\\<^sub>P\n  ?\\<phi>'2\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "fix w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "fix \\<phi> \\<nu>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "have \"{\\<psi>. G_depth \\<psi> \\<le> G_depth (af_G_letter \\<phi> \\<nu>)} = {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {\\<psi>. G_depth \\<psi> \\<le> G_depth (af_G_letter \\<phi> \\<nu>)} =\n    {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}", "by (induction \\<phi>) (unfold af_G_letter.simps G_depth.simps, simp_all, (metis le_max_iff_disj mem_Collect_eq)+)"], ["proof (state)\nthis:\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth (af_G_letter \\<phi> \\<nu>)} =\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "}"], ["proof (state)\nthis:\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth (af_G_letter ?\\<phi>'4 ?\\<nu>4)} =\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth ?\\<phi>'4}\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "hence \"{\\<psi>. G_depth \\<psi> \\<le> G_depth (af\\<^sub>G \\<phi> w)} = {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}\""], ["proof (prove)\nusing this:\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth (af_G_letter ?\\<phi>'4 ?\\<nu>4)} =\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth ?\\<phi>'4}\n\ngoal (1 subgoal):\n 1. {\\<psi>. G_depth \\<psi> \\<le> G_depth (af\\<^sub>G \\<phi> w)} =\n    {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}", "by (induction w arbitrary: \\<phi> rule: rev_induct) fastforce+"], ["proof (state)\nthis:\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth (af\\<^sub>G \\<phi> w)} =\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "}"], ["proof (state)\nthis:\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth (af\\<^sub>G \\<phi> ?wa4)} =\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "note Unfold2 = this"], ["proof (state)\nthis:\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth (af\\<^sub>G \\<phi> ?wa4)} =\n  {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "from assms(1)"], ["proof (chain)\npicking this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w", "unfolding almost_all_eventually_provable_def Unfold1 Unfold2"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<PP> \\<phi>\n      (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w i\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<PP> \\<phi>\n        (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w i", "."], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<phi>\n   (\\<G> \\<inter> {\\<psi>. G_depth \\<psi> \\<le> G_depth \\<phi>}) w\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma almost_all_eventually_provable_suffix:\n  \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' (suffix i w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w \\<Longrightarrow>\n    \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' (suffix i w)", "unfolding almost_all_eventually_provable_def MOST_nat_le"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<phi> \\<G>' w n \\<Longrightarrow>\n    \\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<phi> \\<G>' (suffix i w) n", "by (metis Nat.add_0_right subsequence_shift subsequence_prefix_suffix suffix_0 add.assoc diff_zero trans_le_add2)"], ["", "subsubsection \\<open>Threshold\\<close>"], ["", "text \\<open>The first index, such that the formula is eventually provable from this time on\\<close>"], ["", "fun threshold :: \"'a ltl \\<Rightarrow> 'a set  word \\<Rightarrow> 'a ltl set \\<Rightarrow> nat option\"\nwhere\n  \"threshold \\<phi> w \\<G> = index (\\<lambda>j. \\<PP> \\<phi> \\<G> w j)\""], ["", "lemma threshold_properties:\n  \"threshold \\<phi> w \\<G> = Some i \\<Longrightarrow> 0 < i \\<Longrightarrow> \\<not> \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [(i - 1) \\<rightarrow> k])\"\n  \"threshold \\<phi> w \\<G> = Some i \\<Longrightarrow> j \\<ge> i \\<Longrightarrow> \\<exists>k. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [j \\<rightarrow> k])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>threshold \\<phi> w \\<G> = Some i; 0 < i\\<rbrakk>\n     \\<Longrightarrow> \\<not> \\<G> \\<Turnstile>\\<^sub>P\n                              af\\<^sub>G \\<phi>\n                               (w [i - 1 \\<rightarrow> k])) &&&\n    (\\<lbrakk>threshold \\<phi> w \\<G> = Some i; i \\<le> j\\<rbrakk>\n     \\<Longrightarrow> \\<PP> \\<phi> \\<G> w j)", "using index_properties"], ["proof (prove)\nusing this:\n  \\<lbrakk>Preliminaries2.index ?P = Some ?i; 0 < ?i\\<rbrakk>\n  \\<Longrightarrow> \\<not> ?P (?i - 1)\n  \\<lbrakk>Preliminaries2.index ?P = Some ?i; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> ?P ?j\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>threshold \\<phi> w \\<G> = Some i; 0 < i\\<rbrakk>\n     \\<Longrightarrow> \\<not> \\<G> \\<Turnstile>\\<^sub>P\n                              af\\<^sub>G \\<phi>\n                               (w [i - 1 \\<rightarrow> k])) &&&\n    (\\<lbrakk>threshold \\<phi> w \\<G> = Some i; i \\<le> j\\<rbrakk>\n     \\<Longrightarrow> \\<PP> \\<phi> \\<G> w j)", "unfolding threshold.simps"], ["proof (prove)\nusing this:\n  \\<lbrakk>Preliminaries2.index ?P = Some ?i; 0 < ?i\\<rbrakk>\n  \\<Longrightarrow> \\<not> ?P (?i - 1)\n  \\<lbrakk>Preliminaries2.index ?P = Some ?i; ?i \\<le> ?j\\<rbrakk>\n  \\<Longrightarrow> ?P ?j\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>Preliminaries2.index (\\<PP> \\<phi> \\<G> w) = Some i;\n      0 < i\\<rbrakk>\n     \\<Longrightarrow> \\<not> \\<G> \\<Turnstile>\\<^sub>P\n                              af\\<^sub>G \\<phi>\n                               (w [i - 1 \\<rightarrow> k])) &&&\n    (\\<lbrakk>Preliminaries2.index (\\<PP> \\<phi> \\<G> w) = Some i;\n      i \\<le> j\\<rbrakk>\n     \\<Longrightarrow> \\<PP> \\<phi> \\<G> w j)", "by blast+"], ["", "lemma threshold_suffix:\n  assumes \"threshold \\<phi> w \\<G> = Some k\"\n  assumes \"threshold \\<phi> (suffix i w) \\<G> = Some k'\"\n  shows \"k \\<le> k' + i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> k' + i", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> k \\<le> k' + i \\<Longrightarrow> False", "assume \"\\<not>k \\<le> k' + i\""], ["proof (state)\nthis:\n  \\<not> k \\<le> k' + i\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> k' + i \\<Longrightarrow> False", "hence \"k > k' + i\""], ["proof (prove)\nusing this:\n  \\<not> k \\<le> k' + i\n\ngoal (1 subgoal):\n 1. k' + i < k", "by arith"], ["proof (state)\nthis:\n  k' + i < k\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> k' + i \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  k' + i < k", "obtain j where \"k = k' + i + Suc j\""], ["proof (prove)\nusing this:\n  k' + i < k\n\ngoal (1 subgoal):\n 1. (\\<And>j. k = k' + i + Suc j \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis Suc_diff_Suc le_Suc_eq le_add1 le_add_diff_inverse less_imp_Suc_add)"], ["proof (state)\nthis:\n  k = k' + i + Suc j\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> k' + i \\<Longrightarrow> False", "hence \"0 < k\" and \"k' + i + Suc j - 1 = i + (k' + j)\""], ["proof (prove)\nusing this:\n  k = k' + i + Suc j\n\ngoal (1 subgoal):\n 1. 0 < k &&& k' + i + Suc j - 1 = i + (k' + j)", "using \\<open>k > k' + i\\<close>"], ["proof (prove)\nusing this:\n  k = k' + i + Suc j\n  k' + i < k\n\ngoal (1 subgoal):\n 1. 0 < k &&& k' + i + Suc j - 1 = i + (k' + j)", "by arith+"], ["proof (state)\nthis:\n  0 < k\n  k' + i + Suc j - 1 = i + (k' + j)\n\ngoal (1 subgoal):\n 1. \\<not> k \\<le> k' + i \\<Longrightarrow> False", "show False"], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "using threshold_properties(1)[OF assms(1) \\<open>0 < k\\<close>] threshold_properties(2)[OF assms(2), of \"k' + j\", OF le_add1]"], ["proof (prove)\nusing this:\n  \\<not> \\<G> \\<Turnstile>\\<^sub>P\n         af\\<^sub>G \\<phi> (w [k - 1 \\<rightarrow> ?k])\n  \\<PP> \\<phi> \\<G> (suffix i w) (k' + j)\n\ngoal (1 subgoal):\n 1. False", "unfolding subsequence_shift \\<open>k = k' + i + Suc j\\<close> \\<open>k' + i + Suc j - 1 = i + (k' + j)\\<close>"], ["proof (prove)\nusing this:\n  \\<not> \\<G> \\<Turnstile>\\<^sub>P\n         af\\<^sub>G \\<phi> (w [i + (k' + j) \\<rightarrow> ?k])\n  \\<exists>k.\n     \\<G> \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (w [i + (k' + j) \\<rightarrow> i + k])\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Relation to LTL semantics\\<close>"], ["", "lemma ltl_implies_provable:\n  \"w \\<Turnstile> \\<phi> \\<Longrightarrow> \\<PP> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G \\<phi> (prefix j w)", "proof (induction \\<phi> arbitrary: w)"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> p(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G p(x) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G p(x) (prefix j w)\n 4. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 9. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 10. \\<And>\\<phi>1 \\<phi>2 w.\n        \\<lbrakk>\\<And>w.\n                    w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                    \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G \\<phi>1 (prefix j w);\n         \\<And>w.\n            w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n            \\<exists>j.\n               \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n               af\\<^sub>G \\<phi>2 (prefix j w);\n         w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n        \\<Longrightarrow> \\<exists>j.\n                             \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                              w \\<Turnstile>\\<^sub>P\n                             af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLProp a)"], ["proof (state)\nthis:\n  w \\<Turnstile> p(a)\n\ngoal (10 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> p(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G p(x) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G p(x) (prefix j w)\n 4. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 9. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 10. \\<And>\\<phi>1 \\<phi>2 w.\n        \\<lbrakk>\\<And>w.\n                    w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                    \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G \\<phi>1 (prefix j w);\n         \\<And>w.\n            w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n            \\<exists>j.\n               \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n               af\\<^sub>G \\<phi>2 (prefix j w);\n         w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n        \\<Longrightarrow> \\<exists>j.\n                             \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                              w \\<Turnstile>\\<^sub>P\n                             af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "hence \"{} \\<Turnstile>\\<^sub>P af\\<^sub>G (p(a)) (w [0 \\<rightarrow> 1])\""], ["proof (prove)\nusing this:\n  w \\<Turnstile> p(a)\n\ngoal (1 subgoal):\n 1. {} \\<Turnstile>\\<^sub>P af\\<^sub>G p(a) (prefix 1 w)", "by (simp add: subsequence_def)"], ["proof (state)\nthis:\n  {} \\<Turnstile>\\<^sub>P af\\<^sub>G p(a) (prefix 1 w)\n\ngoal (10 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> p(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G p(x) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G p(x) (prefix j w)\n 4. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 9. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 10. \\<And>\\<phi>1 \\<phi>2 w.\n        \\<lbrakk>\\<And>w.\n                    w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                    \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G \\<phi>1 (prefix j w);\n         \\<And>w.\n            w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n            \\<exists>j.\n               \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n               af\\<^sub>G \\<phi>2 (prefix j w);\n         w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n        \\<Longrightarrow> \\<exists>j.\n                             \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                              w \\<Turnstile>\\<^sub>P\n                             af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  {} \\<Turnstile>\\<^sub>P af\\<^sub>G p(a) (prefix 1 w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G p(a) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G p(a) (prefix j w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G p(a) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G p(a) (prefix j w)\n\ngoal (9 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 9. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "next"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 9. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLPropNeg a)"], ["proof (state)\nthis:\n  w \\<Turnstile> np(a)\n\ngoal (9 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 9. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "hence \"{} \\<Turnstile>\\<^sub>P af\\<^sub>G (np(a)) (w [0 \\<rightarrow> 1])\""], ["proof (prove)\nusing this:\n  w \\<Turnstile> np(a)\n\ngoal (1 subgoal):\n 1. {} \\<Turnstile>\\<^sub>P af\\<^sub>G (np(a)) (prefix 1 w)", "by (simp add: subsequence_def)"], ["proof (state)\nthis:\n  {} \\<Turnstile>\\<^sub>P af\\<^sub>G (np(a)) (prefix 1 w)\n\ngoal (9 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>x w.\n       w \\<Turnstile> np(x) \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G (np(x)) w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G (np(x)) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 8. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 9. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  {} \\<Turnstile>\\<^sub>P af\\<^sub>G (np(a)) (prefix 1 w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (np(a)) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (np(a)) (prefix j w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (np(a)) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (np(a)) (prefix j w)\n\ngoal (8 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 8. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 8. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLAnd \\<phi>\\<^sub>1 \\<phi>\\<^sub>2)"], ["proof (state)\nthis:\n  ?w \\<Turnstile> \\<phi>\\<^sub>1 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>1 (prefix j ?w)\n  ?w \\<Turnstile> \\<phi>\\<^sub>2 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>2 (prefix j ?w)\n  w \\<Turnstile> \\<phi>\\<^sub>1 and \\<phi>\\<^sub>2\n\ngoal (8 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 8. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "obtain i\\<^sub>1 i\\<^sub>2 where \"(\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi>\\<^sub>1 (w [0 \\<rightarrow> i\\<^sub>1])\" and \"(\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi>\\<^sub>2 (w [0 \\<rightarrow> i\\<^sub>2])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>1 i\\<^sub>2.\n        \\<lbrakk>\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n                 af\\<^sub>G \\<phi>\\<^sub>1 (prefix i\\<^sub>1 w);\n         \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n         af\\<^sub>G \\<phi>\\<^sub>2 (prefix i\\<^sub>2 w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using LTLAnd"], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> \\<phi>\\<^sub>1 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>1 (prefix j ?w)\n  ?w \\<Turnstile> \\<phi>\\<^sub>2 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>2 (prefix j ?w)\n  w \\<Turnstile> \\<phi>\\<^sub>1 and \\<phi>\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>1 i\\<^sub>2.\n        \\<lbrakk>\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n                 af\\<^sub>G \\<phi>\\<^sub>1 (prefix i\\<^sub>1 w);\n         \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n         af\\<^sub>G \\<phi>\\<^sub>2 (prefix i\\<^sub>2 w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding ltl_semantics.simps"], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> \\<phi>\\<^sub>1 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>1 (prefix j ?w)\n  ?w \\<Turnstile> \\<phi>\\<^sub>2 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>2 (prefix j ?w)\n  w \\<Turnstile> \\<phi>\\<^sub>1 \\<and> w \\<Turnstile> \\<phi>\\<^sub>2\n\ngoal (1 subgoal):\n 1. (\\<And>i\\<^sub>1 i\\<^sub>2.\n        \\<lbrakk>\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n                 af\\<^sub>G \\<phi>\\<^sub>1 (prefix i\\<^sub>1 w);\n         \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n         af\\<^sub>G \\<phi>\\<^sub>2 (prefix i\\<^sub>2 w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>1 (prefix i\\<^sub>1 w)\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>2 (prefix i\\<^sub>2 w)\n\ngoal (8 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 8. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "have \"(\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi>\\<^sub>1 (w [0 \\<rightarrow> i\\<^sub>1 + i\\<^sub>2])\" and \"(\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi>\\<^sub>2 (w [0 \\<rightarrow> i\\<^sub>2 + i\\<^sub>1])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi>\\<^sub>1 (prefix (i\\<^sub>1 + i\\<^sub>2) w) &&&\n    \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi>\\<^sub>2 (prefix (i\\<^sub>2 + i\\<^sub>1) w)", "using af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G _ \\<open>(\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi>\\<^sub>1 (w [0 \\<rightarrow> i\\<^sub>1])\\<close>]"], ["proof (prove)\nusing this:\n  i\\<^sub>1 \\<le> ?j \\<Longrightarrow>\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>1 (prefix ?j w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi>\\<^sub>1 (prefix (i\\<^sub>1 + i\\<^sub>2) w) &&&\n    \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi>\\<^sub>2 (prefix (i\\<^sub>2 + i\\<^sub>1) w)", "using af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G _ \\<open>(\\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi>\\<^sub>2 (w [0 \\<rightarrow> i\\<^sub>2])\\<close>]"], ["proof (prove)\nusing this:\n  i\\<^sub>1 \\<le> ?j \\<Longrightarrow>\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>1 (prefix ?j w)\n  i\\<^sub>2 \\<le> ?j \\<Longrightarrow>\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>2 (prefix ?j w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi>\\<^sub>1 (prefix (i\\<^sub>1 + i\\<^sub>2) w) &&&\n    \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi>\\<^sub>2 (prefix (i\\<^sub>2 + i\\<^sub>1) w)", "by simp+"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>1 (prefix (i\\<^sub>1 + i\\<^sub>2) w)\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>2 (prefix (i\\<^sub>2 + i\\<^sub>1) w)\n\ngoal (8 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 and \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 and \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 7. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 8. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>1 (prefix (i\\<^sub>1 + i\\<^sub>2) w)\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi>\\<^sub>2 (prefix (i\\<^sub>2 + i\\<^sub>1) w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi>\\<^sub>1 and \\<phi>\\<^sub>2)\n        w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (\\<phi>\\<^sub>1 and \\<phi>\\<^sub>2) (prefix j w)", "by (simp only: af\\<^sub>G_decompose add.commute) auto"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (\\<phi>\\<^sub>1 and \\<phi>\\<^sub>2)\n      w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (\\<phi>\\<^sub>1 and \\<phi>\\<^sub>2) (prefix j w)\n\ngoal (7 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 7. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 7. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLOr \\<phi>\\<^sub>1 \\<phi>\\<^sub>2)"], ["proof (state)\nthis:\n  ?w \\<Turnstile> \\<phi>\\<^sub>1 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>1 (prefix j ?w)\n  ?w \\<Turnstile> \\<phi>\\<^sub>2 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>2 (prefix j ?w)\n  w \\<Turnstile> \\<phi>\\<^sub>1 or \\<phi>\\<^sub>2\n\ngoal (7 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 or \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 or \\<phi>2) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 6. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 7. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> \\<phi>\\<^sub>1 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>1 (prefix j ?w)\n  ?w \\<Turnstile> \\<phi>\\<^sub>2 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>2 (prefix j ?w)\n  w \\<Turnstile> \\<phi>\\<^sub>1 or \\<phi>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi>\\<^sub>1 or \\<phi>\\<^sub>2)\n        w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (\\<phi>\\<^sub>1 or \\<phi>\\<^sub>2) (prefix j w)", "unfolding af\\<^sub>G_decompose"], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> \\<phi>\\<^sub>1 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>1 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>1 (prefix j ?w)\n  ?w \\<Turnstile> \\<phi>\\<^sub>2 \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi>\\<^sub>2 ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi>\\<^sub>2 (prefix j ?w)\n  w \\<Turnstile> \\<phi>\\<^sub>1 or \\<phi>\\<^sub>2\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi>\\<^sub>1 or \\<phi>\\<^sub>2)\n        w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G \\<phi>\\<^sub>1\n        (prefix j w) or af\\<^sub>G \\<phi>\\<^sub>2 (prefix j w)", "by (cases \"w \\<Turnstile> \\<phi>\\<^sub>1\") force+"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (\\<phi>\\<^sub>1 or \\<phi>\\<^sub>2)\n      w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (\\<phi>\\<^sub>1 or \\<phi>\\<^sub>2) (prefix j w)\n\ngoal (6 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLNext \\<phi>)"], ["proof (state)\nthis:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  w \\<Turnstile> X \\<phi>\n\ngoal (6 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "obtain i where \"(\\<G>\\<^sub>F\\<^sub>G \\<phi> w) \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (suffix 1 w [0 \\<rightarrow> i])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix i (suffix 1 w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using LTLNext(1)[OF LTLNext(2)[unfolded ltl_semantics.simps]]"], ["proof (prove)\nusing this:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> (suffix 1 w) \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j (suffix 1 w))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix i (suffix 1 w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding \\<G>\\<^sub>F\\<^sub>G_suffix"], ["proof (prove)\nusing this:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j (suffix 1 w))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix i (suffix 1 w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix i (suffix 1 w))\n\ngoal (6 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "hence \"(\\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w) \\<Turnstile>\\<^sub>P af\\<^sub>G (X \\<phi>) (w [0 \\<rightarrow> 1 + i])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix i (suffix 1 w))\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (X \\<phi>) (prefix (1 + i) w)", "unfolding subsequence_shift subsequence_append"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (w [1 + 0 \\<rightarrow> 1 + i])\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (X \\<phi>) (prefix 1 w @ w [1 \\<rightarrow> 1 + i])", "by (simp add: subsequence_def)"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (X \\<phi>) (prefix (1 + i) w)\n\ngoal (6 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> X \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (X \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (X \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 5. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 6. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (X \\<phi>) (prefix (1 + i) w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (X \\<phi>) (prefix j w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (X \\<phi>) (prefix j w)\n\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLFinal \\<phi>)"], ["proof (state)\nthis:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  w \\<Turnstile> F \\<phi>\n\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "then"], ["proof (chain)\npicking this:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  w \\<Turnstile> F \\<phi>", "obtain i where \"suffix i w \\<Turnstile> \\<phi>\""], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  w \\<Turnstile> F \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        suffix i w \\<Turnstile> \\<phi> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  suffix i w \\<Turnstile> \\<phi>\n\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "then"], ["proof (chain)\npicking this:\n  suffix i w \\<Turnstile> \\<phi>", "obtain j where \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (suffix i w [0 \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  suffix i w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix j (suffix i w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using LTLFinal \\<G>\\<^sub>F\\<^sub>G_suffix"], ["proof (prove)\nusing this:\n  suffix i w \\<Turnstile> \\<phi>\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  w \\<Turnstile> F \\<phi>\n  \\<G>\\<^sub>F\\<^sub>G ?\\<phi> (suffix ?i ?w) =\n  \\<G>\\<^sub>F\\<^sub>G ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix j (suffix i w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j (suffix i w))\n\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "hence A: \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (suffix i w [0 \\<rightarrow> Suc j])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j (suffix i w))\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix (Suc j) (suffix i w))", "using af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G, of j \"Suc j\", OF le_SucI]"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j (suffix i w))\n  \\<lbrakk>j \\<le> j;\n   \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n   af\\<^sub>G ?\\<phi> (prefix j ?w)\\<rbrakk>\n  \\<Longrightarrow> \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G ?\\<phi> (prefix (Suc j) ?w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix (Suc j) (suffix i w))", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix (Suc j) (suffix i w))\n\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "from af\\<^sub>G_keeps_F_and_S[OF _ A]"], ["proof (chain)\npicking this:\n  prefix (Suc j) (suffix i w) \\<noteq> [] \\<Longrightarrow>\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (F \\<phi>) (?xs @ prefix (Suc j) (suffix i w))", "have \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G (F \\<phi>) (w [0 \\<rightarrow> Suc (i + j)])\""], ["proof (prove)\nusing this:\n  prefix (Suc j) (suffix i w) \\<noteq> [] \\<Longrightarrow>\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (F \\<phi>) (?xs @ prefix (Suc j) (suffix i w))\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (F \\<phi>) (prefix (Suc (i + j)) w)", "unfolding subsequence_shift subsequence_append Suc_eq_plus1"], ["proof (prove)\nusing this:\n  w [i + 0 \\<rightarrow> i + j] @\n  w [i + j \\<rightarrow> i + (j + 1)] \\<noteq>\n  [] \\<Longrightarrow>\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (F \\<phi>)\n   (?xs @\n    w [i + 0 \\<rightarrow> i + j] @ w [i + j \\<rightarrow> i + (j + 1)])\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (F \\<phi>)\n     ((prefix i w @ w [i \\<rightarrow> i + j]) @\n      w [i + j \\<rightarrow> i + j + 1])", "by simp"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (F \\<phi>) (prefix (Suc (i + j)) w)\n\ngoal (5 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> F \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (F \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (F \\<phi>) (prefix j w)\n 5. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (F \\<phi>) (prefix (Suc (i + j)) w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (F \\<phi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (F \\<phi>) (prefix j w)", "using \\<G>\\<^sub>F\\<^sub>G.simps(7)"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (F \\<phi>) (prefix (Suc (i + j)) w)\n  \\<G>\\<^sub>F\\<^sub>G (F ?\\<phi>) ?w = \\<G>\\<^sub>F\\<^sub>G ?\\<phi> ?w\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (F \\<phi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (F \\<phi>) (prefix j w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (F \\<phi>) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (F \\<phi>) (prefix j w)\n\ngoal (4 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "case (LTLUntil \\<phi> \\<psi>)"], ["proof (state)\nthis:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  ?w \\<Turnstile> \\<psi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<psi> (prefix j ?w)\n  w \\<Turnstile> \\<phi> U \\<psi>\n\ngoal (4 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "then"], ["proof (chain)\npicking this:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  ?w \\<Turnstile> \\<psi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<psi> (prefix j ?w)\n  w \\<Turnstile> \\<phi> U \\<psi>", "obtain k where \"suffix k w \\<Turnstile> \\<psi>\" and \"\\<forall>j < k. suffix j w \\<Turnstile> \\<phi>\""], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  ?w \\<Turnstile> \\<psi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<psi> (prefix j ?w)\n  w \\<Turnstile> \\<phi> U \\<psi>\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n         \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  suffix k w \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\n\ngoal (4 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)\n 4. \\<And>\\<phi>1 \\<phi>2 w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi>1 \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi>1 w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi>1 (prefix j w);\n        \\<And>w.\n           w \\<Turnstile> \\<phi>2 \\<Longrightarrow>\n           \\<exists>j.\n              \\<G>\\<^sub>F\\<^sub>G \\<phi>2 w \\<Turnstile>\\<^sub>P\n              af\\<^sub>G \\<phi>2 (prefix j w);\n        w \\<Turnstile> \\<phi>1 U \\<phi>2\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi>1 U \\<phi>2) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  suffix k w \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "proof (induction k arbitrary: w)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>w.\n       \\<lbrakk>suffix 0 w \\<Turnstile> \\<psi>;\n        \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n 2. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "case 0"], ["proof (state)\nthis:\n  suffix 0 w \\<Turnstile> \\<psi>\n  \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<And>w.\n       \\<lbrakk>suffix 0 w \\<Turnstile> \\<psi>;\n        \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n 2. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "then"], ["proof (chain)\npicking this:\n  suffix 0 w \\<Turnstile> \\<psi>\n  \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>", "obtain i where \"\\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi> (w [0 \\<rightarrow> i])\""], ["proof (prove)\nusing this:\n  suffix 0 w \\<Turnstile> \\<psi>\n  \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<psi> (prefix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using LTLUntil"], ["proof (prove)\nusing this:\n  suffix 0 w \\<Turnstile> \\<psi>\n  \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\n  ?w \\<Turnstile> \\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j ?w)\n  ?w \\<Turnstile> \\<psi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<psi> (prefix j ?w)\n  wa__ \\<Turnstile> \\<phi> U \\<psi>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<psi> (prefix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis suffix_0)"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<psi> (prefix i w)\n\ngoal (2 subgoals):\n 1. \\<And>w.\n       \\<lbrakk>suffix 0 w \\<Turnstile> \\<psi>;\n        \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n 2. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "hence \"\\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi> (w [0 \\<rightarrow> Suc i])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<psi> (prefix i w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<psi> (prefix (Suc i) w)", "using af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G, of i \"Suc i\", OF  le_SucI]"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<psi> (prefix i w)\n  \\<lbrakk>i \\<le> i;\n   \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n   af\\<^sub>G ?\\<phi> (prefix i ?w)\\<rbrakk>\n  \\<Longrightarrow> \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G ?\\<phi> (prefix (Suc i) ?w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<psi> (prefix (Suc i) w)", "by auto"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<psi> (prefix (Suc i) w)\n\ngoal (2 subgoals):\n 1. \\<And>w.\n       \\<lbrakk>suffix 0 w \\<Turnstile> \\<psi>;\n        \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n 2. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "hence \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G (\\<phi> U \\<psi>) (w [0 \\<rightarrow> Suc i])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<psi> (prefix (Suc i) w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc i) w)", "unfolding af\\<^sub>G_subsequence_U ltl_prop_entailment.simps \\<G>\\<^sub>F\\<^sub>G.simps"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<psi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<psi> (prefix (Suc i) w)\n\ngoal (1 subgoal):\n 1. (\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<union>\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> w) \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> Suc i]) \\<and>\n    (\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<union>\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> w) \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix (Suc i) w) \\<or>\n    (\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<union>\n     \\<G>\\<^sub>F\\<^sub>G \\<psi> w) \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<psi> (prefix (Suc i) w)", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc i) w)\n\ngoal (2 subgoals):\n 1. \\<And>w.\n       \\<lbrakk>suffix 0 w \\<Turnstile> \\<psi>;\n        \\<forall>j<0. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n 2. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc i) w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "case (Suc k)"], ["proof (state)\nthis:\n  \\<lbrakk>suffix k ?w \\<Turnstile> \\<psi>;\n   \\<forall>j<k. suffix j ?w \\<Turnstile> \\<phi>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                        ?w \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j ?w)\n  suffix (Suc k) w \\<Turnstile> \\<psi>\n  \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "hence \"w \\<Turnstile> \\<phi>\" and \"suffix k (suffix 1 w) \\<Turnstile> \\<psi>\" and \"\\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>suffix k ?w \\<Turnstile> \\<psi>;\n   \\<forall>j<k. suffix j ?w \\<Turnstile> \\<phi>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                        ?w \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j ?w)\n  suffix (Suc k) w \\<Turnstile> \\<psi>\n  \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> &&&\n    suffix k (suffix 1 w) \\<Turnstile> \\<psi> &&&\n    \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>", "unfolding suffix_0 suffix_suffix"], ["proof (prove)\nusing this:\n  \\<lbrakk>suffix k ?w \\<Turnstile> \\<psi>;\n   \\<forall>j<k. suffix j ?w \\<Turnstile> \\<phi>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                        ?w \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j ?w)\n  suffix (Suc k) w \\<Turnstile> \\<psi>\n  \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> &&&\n    suffix (1 + k) w \\<Turnstile> \\<psi> &&&\n    \\<forall>j<k. suffix (1 + j) w \\<Turnstile> \\<phi>", "by (auto, metis Suc_less_eq)+"], ["proof (state)\nthis:\n  w \\<Turnstile> \\<phi>\n  suffix k (suffix 1 w) \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "then"], ["proof (chain)\npicking this:\n  w \\<Turnstile> \\<phi>\n  suffix k (suffix 1 w) \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>", "obtain i where i_def: \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G (\\<phi> U \\<psi>) (suffix 1 w [0 \\<rightarrow> i])\""], ["proof (prove)\nusing this:\n  w \\<Turnstile> \\<phi>\n  suffix k (suffix 1 w) \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G (\\<phi> U \\<psi>)\n         (prefix i (suffix 1 w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Suc(1)[of \"suffix 1 w\"]"], ["proof (prove)\nusing this:\n  w \\<Turnstile> \\<phi>\n  suffix k (suffix 1 w) \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\n  \\<lbrakk>suffix k (suffix 1 w) \\<Turnstile> \\<psi>;\n   \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>j.\n                       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                        (suffix 1 w) \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j (suffix 1 w))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G (\\<phi> U \\<psi>)\n         (prefix i (suffix 1 w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding LTL_FG_suffix \\<G>\\<^sub>F\\<^sub>G_alt_def"], ["proof (prove)\nusing this:\n  w \\<Turnstile> \\<phi>\n  suffix k (suffix 1 w) \\<Turnstile> \\<psi>\n  \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\n  \\<lbrakk>suffix k (suffix 1 w) \\<Turnstile> \\<psi>;\n   \\<forall>j<k. suffix j (suffix 1 w) \\<Turnstile> \\<phi>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>j.\n                       {G \\<psi>' |\\<psi>'.\n                        G \\<psi>' \\<in> \\<^bold>G (\\<phi> U \\<psi>) \\<and>\n                        w \\<Turnstile> F G \\<psi>'} \\<Turnstile>\\<^sub>P\n                       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j (suffix 1 w))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        {G \\<psi>' |\\<psi>'.\n         G \\<psi>' \\<in> \\<^bold>G (\\<phi> U \\<psi>) \\<and>\n         w \\<Turnstile> F G \\<psi>'} \\<Turnstile>\\<^sub>P\n        af\\<^sub>G (\\<phi> U \\<psi>)\n         (prefix i (suffix 1 w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix i (suffix 1 w))\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "obtain j where j_def: \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> j])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix j w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using LTLUntil(1)[OF \\<open>w \\<Turnstile> \\<phi>\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix j w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "hence \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix j w)", "by auto"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "hence \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> j + (i + 1)])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix (j + (i + 1)) w)", "by (blast intro: af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G le_add1])"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix (j + (i + 1)) w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "moreover"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix (j + (i + 1)) w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "have \"1 + (i + j) = j + (i + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + (i + j) = j + (i + 1)", "by arith"], ["proof (state)\nthis:\n  1 + (i + j) = j + (i + 1)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "have \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])", "using af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G le_add1 i_def, of j]"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix (i + j) (suffix 1 w))\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])", "unfolding subsequence_shift \\<G>\\<^sub>F\\<^sub>G_suffix \\<open>1 + (i + j) = j + (i + 1)\\<close>"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (w [1 + 0 \\<rightarrow> j + (i + 1)])\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])", "by simp"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "ultimately"], ["proof (chain)\npicking this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix (j + (i + 1)) w)\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])", "have \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> Suc (j + i)]) and af\\<^sub>G \\<phi> (w [0 \\<rightarrow> Suc (j + i)])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix (j + (i + 1)) w)\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> j + (i + 1)])\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>)\n     (w [1 \\<rightarrow> Suc (j +\n                              i)]) and af\\<^sub>G \\<phi>\n  (prefix (Suc (j + i)) w)", "by simp"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>)\n   (w [1 \\<rightarrow> Suc (j +\n                            i)]) and af\\<^sub>G \\<phi>\n(prefix (Suc (j + i)) w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "hence \"\\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P af\\<^sub>G (\\<phi> U \\<psi>) (w [0 \\<rightarrow> Suc (j + i)])\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>)\n   (w [1 \\<rightarrow> Suc (j +\n                            i)]) and af\\<^sub>G \\<phi>\n(prefix (Suc (j + i)) w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc (j + i)) w)", "unfolding af\\<^sub>G_subsequence_U ltl_prop_entailment.simps"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> Suc (j + i)]) \\<and>\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix (Suc (j + i)) w)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G (\\<phi> U \\<psi>) (w [1 \\<rightarrow> Suc (j + i)]) \\<and>\n    \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix (Suc (j + i)) w) \\<or>\n    \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<psi> (prefix (Suc (j + i)) w)", "by blast"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc (j + i)) w)\n\ngoal (1 subgoal):\n 1. \\<And>k w.\n       \\<lbrakk>\\<And>w.\n                   \\<lbrakk>suffix k w \\<Turnstile> \\<psi>;\n                    \\<forall>j<k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n                   \\<Longrightarrow> \\<exists>j.\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w);\n        suffix (Suc k) w \\<Turnstile> \\<psi>;\n        \\<forall>j<Suc k. suffix j w \\<Turnstile> \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc (j + i)) w)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "using af\\<^sub>G_subsequence_U ltl_prop_entailment.simps"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (\\<phi> U \\<psi>) (prefix (Suc (j + i)) w)\n  af\\<^sub>G (?\\<phi> U ?\\<psi>) (prefix (Suc ?n) ?w) =\n  af\\<^sub>G (?\\<phi> U ?\\<psi>)\n   (?w [1 \\<rightarrow> Suc ?n]) and af\\<^sub>G ?\\<phi>\n(prefix (Suc ?n) ?w) or af\\<^sub>G ?\\<psi> (prefix (Suc ?n) ?w)\n  ?\\<A> \\<Turnstile>\\<^sub>P true = True\n  ?\\<A> \\<Turnstile>\\<^sub>P false = False\n  ?\\<A> \\<Turnstile>\\<^sub>P ?\\<phi> and ?\\<psi> =\n  (?\\<A> \\<Turnstile>\\<^sub>P ?\\<phi> \\<and>\n   ?\\<A> \\<Turnstile>\\<^sub>P ?\\<psi>)\n  ?\\<A> \\<Turnstile>\\<^sub>P ?\\<phi> or ?\\<psi> =\n  (?\\<A> \\<Turnstile>\\<^sub>P ?\\<phi> \\<or>\n   ?\\<A> \\<Turnstile>\\<^sub>P ?\\<psi>)\n  ?\\<A> \\<Turnstile>\\<^sub>P p(?v) = (p(?v) \\<in> ?\\<A>)\n  ?\\<A> \\<Turnstile>\\<^sub>P np(?v) = (np(?v) \\<in> ?\\<A>)\n  ?\\<A> \\<Turnstile>\\<^sub>P X ?v = (X ?v \\<in> ?\\<A>)\n  ?\\<A> \\<Turnstile>\\<^sub>P G ?v = (G ?v \\<in> ?\\<A>)\n  ?\\<A> \\<Turnstile>\\<^sub>P F ?v = (F ?v \\<in> ?\\<A>)\n  ?\\<A> \\<Turnstile>\\<^sub>P ?v U ?va = (?v U ?va \\<in> ?\\<A>)\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G (\\<phi> U \\<psi>) w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G (\\<phi> U \\<psi>) (prefix j w)\n\ngoal (3 subgoals):\n 1. \\<And>w.\n       w \\<Turnstile> true \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G true w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G true (prefix j w)\n 2. \\<And>w.\n       w \\<Turnstile> false \\<Longrightarrow>\n       \\<exists>j.\n          \\<G>\\<^sub>F\\<^sub>G false w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G false (prefix j w)\n 3. \\<And>\\<phi> w.\n       \\<lbrakk>\\<And>w.\n                   w \\<Turnstile> \\<phi> \\<Longrightarrow>\n                   \\<exists>j.\n                      \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n                      af\\<^sub>G \\<phi> (prefix j w);\n        w \\<Turnstile> G \\<phi>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>j.\n                            \\<G>\\<^sub>F\\<^sub>G (G \\<phi>)\n                             w \\<Turnstile>\\<^sub>P\n                            af\\<^sub>G (G \\<phi>) (prefix j w)", "qed simp+"], ["", "lemma ltl_implies_provable_almost_all:\n  \"w \\<Turnstile> \\<phi> \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> i])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<forall>\\<^sub>\\<infinity>i.\n       \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G \\<phi> (prefix i w)", "using ltl_implies_provable af\\<^sub>G_sat_core_generalized[OF \\<G>\\<^sub>F\\<^sub>G_Only_G]"], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> ?\\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G ?\\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G ?\\<phi> (prefix j ?w)\n  \\<lbrakk>?i \\<le> ?j;\n   \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n   af\\<^sub>G ?\\<phi> (prefix ?i ?w)\\<rbrakk>\n  \\<Longrightarrow> \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G ?\\<phi> (prefix ?j ?w)\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<forall>\\<^sub>\\<infinity>i.\n       \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n       af\\<^sub>G \\<phi> (prefix i w)", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  ?w \\<Turnstile> ?\\<phi> \\<Longrightarrow>\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G ?\\<phi> ?w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G ?\\<phi> (prefix j ?w)\n  \\<lbrakk>?i \\<le> ?j;\n   \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n   af\\<^sub>G ?\\<phi> (prefix ?i ?w)\\<rbrakk>\n  \\<Longrightarrow> \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w1 \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G ?\\<phi> (prefix ?j ?w)\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>m.\n       \\<forall>n\\<ge>m.\n          \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n          af\\<^sub>G \\<phi> (prefix n w)", "by metis"], ["", "subsubsection \\<open>Closed Sets\\<close>"], ["", "abbreviation closed\nwhere\n  \"closed \\<G> w \\<equiv> finite \\<G> \\<and> Only_G \\<G> \\<and> (\\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w)\""], ["", "lemma closed_FG:\n  assumes \"closed \\<G> w\"\n  assumes \"G \\<psi> \\<in> \\<G>\"\n  shows \"w \\<Turnstile> F G \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "have \"finite \\<G>\" and \"Only_G \\<G>\" and \"(\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite \\<G> &&&\n    Only_G \\<G> &&&\n    (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w)", "using assms"], ["proof (prove)\nusing this:\n  closed \\<G> w\n  G \\<psi> \\<in> \\<G>\n\ngoal (1 subgoal):\n 1. finite \\<G> &&&\n    Only_G \\<G> &&&\n    (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w)", "by simp+"], ["proof (state)\nthis:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> \\<G> w\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "moreover"], ["proof (state)\nthis:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> \\<G> w\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "note \\<open>G \\<psi> \\<in> \\<G>\\<close>"], ["proof (state)\nthis:\n  G \\<psi> \\<in> \\<G>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "ultimately"], ["proof (chain)\npicking this:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> \\<G> w\n  G \\<psi> \\<in> \\<G>", "show \"w \\<Turnstile> F G \\<psi>\""], ["proof (prove)\nusing this:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> \\<G> w\n  G \\<psi> \\<in> \\<G>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "proof (induction arbitrary: \\<psi> rule: finite_ranking_induct[where f = G_depth])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "case (insert x \\<G>)"], ["proof (state)\nthis:\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "(* Split \\<psi>' out *)"], ["proof (state)\nthis:\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "then"], ["proof (chain)\npicking this:\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>", "obtain \\<psi>' where \"x = G \\<psi>'\""], ["proof (prove)\nusing this:\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<psi>'.\n        x = G \\<psi>' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x = G \\<psi>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "{"], ["proof (state)\nthis:\n  x = G \\<psi>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "fix \\<psi>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "assume \"G \\<psi> \\<in> insert x \\<G>\" (is \"_ \\<in> ?\\<G>'\")"], ["proof (state)\nthis:\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"\\<PP>\\<^sub>\\<infinity> \\<psi> (?\\<G>' \\<inter> {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>}) w\""], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi>\n     (insert x \\<G> \\<inter>\n      {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>})\n     w", "using insert(4-5)"], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> insert x \\<G>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi>\n     (insert x \\<G> \\<inter>\n      {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>})\n     w", "by (blast dest: almost_all_eventually_provable_restrict_to_G_depth)"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi>\n   (insert x \\<G> \\<inter> {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>})\n   w\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "moreover"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi>\n   (insert x \\<G> \\<inter> {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>})\n   w\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "have \"G_depth \\<psi> < G_depth x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. G_depth \\<psi> < G_depth x", "using insert(2) \\<open>G \\<psi> \\<in> insert x \\<G>\\<close> \\<open>x = G \\<psi>'\\<close>"], ["proof (prove)\nusing this:\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  G \\<psi> \\<in> insert x \\<G>\n  x = G \\<psi>'\n\ngoal (1 subgoal):\n 1. G_depth \\<psi> < G_depth x", "by force"], ["proof (state)\nthis:\n  G_depth \\<psi> < G_depth x\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "ultimately"], ["proof (chain)\npicking this:\n  \\<PP>\\<^sub>\\<infinity> \\<psi>\n   (insert x \\<G> \\<inter> {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>})\n   w\n  G_depth \\<psi> < G_depth x", "have \"\\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w\""], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<psi>\n   (insert x \\<G> \\<inter> {\\<psi>'. G_depth \\<psi>' \\<le> G_depth \\<psi>})\n   w\n  G_depth \\<psi> < G_depth x\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w", "by auto"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "}"], ["proof (state)\nthis:\n  G ?\\<psi>'''2 \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi>'''2 \\<G> w\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"\\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w\" and \"closed \\<G> w\""], ["proof (prove)\nusing this:\n  G ?\\<psi>'''2 \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi>'''2 \\<G> w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w &&& closed \\<G> w", "using insert \\<open>x = G \\<psi>'\\<close>"], ["proof (prove)\nusing this:\n  G ?\\<psi>'''2 \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi>'''2 \\<G> w\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n  x = G \\<psi>'\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w &&& closed \\<G> w", "by simp+"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w\n  closed \\<G> w\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "(* Wait until all G-subformulae are \"stable\" *)"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w\n  closed \\<G> w\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "have \"Only_G \\<G>\" and \"Only_G (\\<G> \\<union> \\<^bold>G \\<psi>')\" and \"finite (\\<G> \\<union> \\<^bold>G \\<psi>')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Only_G \\<G> &&&\n    Only_G (\\<G> \\<union> \\<^bold>G \\<psi>') &&&\n    finite (\\<G> \\<union> \\<^bold>G \\<psi>')", "using G_nested_finite G_nested_propos_Only_G insert"], ["proof (prove)\nusing this:\n  finite (\\<^bold>G ?\\<phi>)\n  Only_G (\\<^bold>G ?\\<phi>)\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (1 subgoal):\n 1. Only_G \\<G> &&&\n    Only_G (\\<G> \\<union> \\<^bold>G \\<psi>') &&&\n    finite (\\<G> \\<union> \\<^bold>G \\<psi>')", "by blast+"], ["proof (state)\nthis:\n  Only_G \\<G>\n  Only_G (\\<G> \\<union> \\<^bold>G \\<psi>')\n  finite (\\<G> \\<union> \\<^bold>G \\<psi>')\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "then"], ["proof (chain)\npicking this:\n  Only_G \\<G>\n  Only_G (\\<G> \\<union> \\<^bold>G \\<psi>')\n  finite (\\<G> \\<union> \\<^bold>G \\<psi>')", "obtain k\\<^sub>1 where k1_def: \"\\<And>\\<psi> i. \\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow> suffix k\\<^sub>1 w \\<Turnstile> \\<psi> = suffix (k\\<^sub>1 + i) w \\<Turnstile> \\<psi>\""], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  Only_G (\\<G> \\<union> \\<^bold>G \\<psi>')\n  finite (\\<G> \\<union> \\<^bold>G \\<psi>')\n\ngoal (1 subgoal):\n 1. (\\<And>k\\<^sub>1.\n        (\\<And>\\<psi> i.\n            \\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n            suffix k\\<^sub>1 w \\<Turnstile> \\<psi> =\n            suffix (k\\<^sub>1 + i) w \\<Turnstile> \\<psi>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (blast intro: ltl_G_stabilize)"], ["proof (state)\nthis:\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + ?i) w \\<Turnstile> ?\\<psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "(* Wait until the formula is provable for all suffixes *)"], ["proof (state)\nthis:\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + ?i) w \\<Turnstile> ?\\<psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F (G \\<psi>)\""], ["proof (prove)\nusing this:\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + ?i) w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "using insert \\<open>closed \\<G> w\\<close>"], ["proof (prove)\nusing this:\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + ?i) w \\<Turnstile> ?\\<psi>\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n  closed \\<G> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "by simp"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "then"], ["proof (chain)\npicking this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>", "obtain k\\<^sub>2 where k2_def: \"\\<forall>i \\<ge> k\\<^sub>2. \\<exists>j. \\<PP> \\<psi>' \\<G> w i\""], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n\ngoal (1 subgoal):\n 1. (\\<And>k\\<^sub>2.\n        \\<forall>i\\<ge>k\\<^sub>2.\n           \\<exists>j. \\<PP> \\<psi>' \\<G> w i \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>\\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w\\<close>"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  \\<PP>\\<^sub>\\<infinity> \\<psi>' \\<G> w\n\ngoal (1 subgoal):\n 1. (\\<And>k\\<^sub>2.\n        \\<forall>i\\<ge>k\\<^sub>2.\n           \\<exists>j. \\<PP> \\<psi>' \\<G> w i \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding almost_all_eventually_provable_def MOST_nat_le"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  \\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<psi>' \\<G> w n\n\ngoal (1 subgoal):\n 1. (\\<And>k\\<^sub>2.\n        \\<forall>i\\<ge>k\\<^sub>2.\n           \\<exists>j. \\<PP> \\<psi>' \\<G> w i \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<forall>i\\<ge>k\\<^sub>2. \\<exists>j. \\<PP> \\<psi>' \\<G> w i\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "{"], ["proof (state)\nthis:\n  \\<forall>i\\<ge>k\\<^sub>2. \\<exists>j. \\<PP> \\<psi>' \\<G> w i\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "assume \"i \\<ge> max k\\<^sub>1 k\\<^sub>2\""], ["proof (state)\nthis:\n  max k\\<^sub>1 k\\<^sub>2 \\<le> i\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"i \\<ge> k\\<^sub>1\" and \"i \\<ge> k\\<^sub>2\""], ["proof (prove)\nusing this:\n  max k\\<^sub>1 k\\<^sub>2 \\<le> i\n\ngoal (1 subgoal):\n 1. k\\<^sub>1 \\<le> i &&& k\\<^sub>2 \\<le> i", "by simp+"], ["proof (state)\nthis:\n  k\\<^sub>1 \\<le> i\n  k\\<^sub>2 \\<le> i\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "then"], ["proof (chain)\npicking this:\n  k\\<^sub>1 \\<le> i\n  k\\<^sub>2 \\<le> i", "obtain j' where \"\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> j'])\""], ["proof (prove)\nusing this:\n  k\\<^sub>1 \\<le> i\n  k\\<^sub>2 \\<le> i\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        \\<G> \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<psi>' (w [i \\<rightarrow> j']) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using k2_def"], ["proof (prove)\nusing this:\n  k\\<^sub>1 \\<le> i\n  k\\<^sub>2 \\<le> i\n  \\<forall>i\\<ge>k\\<^sub>2. \\<exists>j. \\<PP> \\<psi>' \\<G> w i\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        \\<G> \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<psi>' (w [i \\<rightarrow> j']) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> j'])\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "then"], ["proof (chain)\npicking this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> j'])", "obtain j where \"\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> j'])\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<G> \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j]) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (cases \"i \\<le> j'\") (blast dest: le_Suc_ex, metis subsequence_empty le_add_diff_inverse nat_le_linear)"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "moreover"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "have \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G>  \\<Longrightarrow> suffix k\\<^sub>1 w \\<Turnstile> G \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix k\\<^sub>1 w \\<Turnstile> G \\<psi>", "using ltl_G_stabilize_property[OF \\<open>finite (\\<G> \\<union> \\<^bold>G \\<psi>')\\<close> \\<open>Only_G (\\<G> \\<union> \\<^bold>G \\<psi>')\\<close> k1_def]"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<chi> j.\n              \\<chi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n              \\<chi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>';\n   G ?\\<psi>\n   \\<in> (\\<G> \\<union> \\<^bold>G \\<psi>') \\<inter>\n         {\\<chi>. w \\<Turnstile> F \\<chi>}\\<rbrakk>\n  \\<Longrightarrow> suffix k\\<^sub>1 w \\<Turnstile> G ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix k\\<^sub>1 w \\<Turnstile> G \\<psi>", "using \\<open>\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F (G \\<psi>)\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>\\<chi> j.\n              \\<chi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n              \\<chi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>';\n   G ?\\<psi>\n   \\<in> (\\<G> \\<union> \\<^bold>G \\<psi>') \\<inter>\n         {\\<chi>. w \\<Turnstile> F \\<chi>}\\<rbrakk>\n  \\<Longrightarrow> suffix k\\<^sub>1 w \\<Turnstile> G ?\\<psi>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix k\\<^sub>1 w \\<Turnstile> G \\<psi>", "by blast"], ["proof (state)\nthis:\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> G ?\\<psi>2\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> suffix (i + j) w \\<Turnstile> G \\<psi>\""], ["proof (prove)\nusing this:\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> G ?\\<psi>2\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix (i + j) w \\<Turnstile> G \\<psi>", "by (metis \\<open>i \\<ge> max k\\<^sub>1 k\\<^sub>2\\<close> LTL_suffix_G suffix_suffix le_Suc_ex max.cobounded1)"], ["proof (state)\nthis:\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> G ?\\<psi>2\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"\\<And>\\<psi>. \\<psi> \\<in> \\<G> \\<Longrightarrow> suffix (i + j) w \\<Turnstile> \\<psi>\""], ["proof (prove)\nusing this:\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> G ?\\<psi>2\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix (i + j) w \\<Turnstile> \\<psi>", "using \\<open>Only_G \\<G>\\<close>"], ["proof (prove)\nusing this:\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> G ?\\<psi>2\n  Only_G \\<G>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix (i + j) w \\<Turnstile> \\<psi>", "by fast"], ["proof (state)\nthis:\n  ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> ?\\<psi>2\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "ultimately"], ["proof (chain)\npicking this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n  ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> ?\\<psi>2", "have Suffix: \"suffix (i + j) w \\<Turnstile> af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n  ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> ?\\<psi>2\n\ngoal (1 subgoal):\n 1. suffix (i + j) w \\<Turnstile>\n    af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])", "using ltl_models_equiv_prop_entailment"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n  ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  suffix (i + j) w \\<Turnstile> ?\\<psi>2\n  ?w \\<Turnstile> ?\\<phi> =\n  {\\<chi>. ?w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P ?\\<phi>\n\ngoal (1 subgoal):\n 1. suffix (i + j) w \\<Turnstile>\n    af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])", "by blast"], ["proof (state)\nthis:\n  suffix (i + j) w \\<Turnstile>\n  af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "obtain c where \"i = k\\<^sub>1 + c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>c. i = k\\<^sub>1 + c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>i \\<ge> k\\<^sub>1\\<close>"], ["proof (prove)\nusing this:\n  k\\<^sub>1 \\<le> i\n\ngoal (1 subgoal):\n 1. (\\<And>c. i = k\\<^sub>1 + c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding le_iff_add"], ["proof (prove)\nusing this:\n  \\<exists>c. i = k\\<^sub>1 + c\n\ngoal (1 subgoal):\n 1. (\\<And>c. i = k\\<^sub>1 + c \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  i = k\\<^sub>1 + c\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence Stable: \"\\<forall>\\<psi> \\<in> \\<^bold>G \\<psi>'. suffix i w \\<Turnstile> \\<psi> = suffix j (suffix i w) \\<Turnstile> \\<psi>\""], ["proof (prove)\nusing this:\n  i = k\\<^sub>1 + c\n\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<^bold>G \\<psi>'.\n       suffix i w \\<Turnstile> \\<psi> =\n       suffix j (suffix i w) \\<Turnstile> \\<psi>", "using k1_def k1_def[of _ \"c + j\"]"], ["proof (prove)\nusing this:\n  i = k\\<^sub>1 + c\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + ?i) w \\<Turnstile> ?\\<psi>\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + (c + j)) w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<^bold>G \\<psi>'.\n       suffix i w \\<Turnstile> \\<psi> =\n       suffix j (suffix i w) \\<Turnstile> \\<psi>", "unfolding suffix_suffix add.assoc[symmetric]"], ["proof (prove)\nusing this:\n  i = k\\<^sub>1 + c\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + ?i) w \\<Turnstile> ?\\<psi>\n  ?\\<psi> \\<in> \\<G> \\<union> \\<^bold>G \\<psi>' \\<Longrightarrow>\n  suffix k\\<^sub>1 w \\<Turnstile> ?\\<psi> =\n  suffix (k\\<^sub>1 + c + j) w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<psi>\\<in>\\<^bold>G \\<psi>'.\n       suffix i w \\<Turnstile> \\<psi> = suffix (i + j) w \\<Turnstile> \\<psi>", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<psi>\\<in>\\<^bold>G \\<psi>'.\n     suffix i w \\<Turnstile> \\<psi> =\n     suffix j (suffix i w) \\<Turnstile> \\<psi>\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "from Suffix"], ["proof (chain)\npicking this:\n  suffix (i + j) w \\<Turnstile>\n  af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])", "have \"suffix i w \\<Turnstile> \\<psi>'\""], ["proof (prove)\nusing this:\n  suffix (i + j) w \\<Turnstile>\n  af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n\ngoal (1 subgoal):\n 1. suffix i w \\<Turnstile> \\<psi>'", "unfolding suffix_suffix subsequence_shift af\\<^sub>G_ltl_continuation_suffix[OF Stable]"], ["proof (prove)\nusing this:\n  suffix (i + j) w \\<Turnstile>\n  af\\<^sub>G \\<psi>' (w [i \\<rightarrow> i + j])\n\ngoal (1 subgoal):\n 1. suffix (i + j) w \\<Turnstile>\n    af\\<^sub>G \\<psi>' (w [i + 0 \\<rightarrow> i + j])", "by simp"], ["proof (state)\nthis:\n  suffix i w \\<Turnstile> \\<psi>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "}"], ["proof (state)\nthis:\n  max k\\<^sub>1 k\\<^sub>2 \\<le> ?i4 \\<Longrightarrow>\n  suffix ?i4 w \\<Turnstile> \\<psi>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "hence \"w \\<Turnstile> F G \\<psi>'\""], ["proof (prove)\nusing this:\n  max k\\<^sub>1 k\\<^sub>2 \\<le> ?i4 \\<Longrightarrow>\n  suffix ?i4 w \\<Turnstile> \\<psi>'\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>'", "unfolding MOST_nat_le LTL_FG_almost_all_suffixes"], ["proof (prove)\nusing this:\n  max k\\<^sub>1 k\\<^sub>2 \\<le> ?i4 \\<Longrightarrow>\n  suffix ?i4 w \\<Turnstile> \\<psi>'\n\ngoal (1 subgoal):\n 1. \\<exists>m. \\<forall>n\\<ge>m. suffix n w \\<Turnstile> \\<psi>'", "by blast"], ["proof (state)\nthis:\n  w \\<Turnstile> F G \\<psi>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\n 2. \\<And>x S \\<psi>.\n       \\<lbrakk>finite S;\n        \\<And>y. y \\<in> S \\<Longrightarrow> G_depth y \\<le> G_depth x;\n        \\<And>\\<psi>.\n           \\<lbrakk>Only_G S;\n            \\<And>\\<psi>.\n               G \\<psi> \\<in> S \\<Longrightarrow>\n               \\<PP>\\<^sub>\\<infinity> \\<psi> S w;\n            G \\<psi> \\<in> S\\<rbrakk>\n           \\<Longrightarrow> w \\<Turnstile> F G \\<psi>;\n        Only_G (insert x S);\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> insert x S \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> (insert x S) w;\n        G \\<psi> \\<in> insert x S\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "thus ?case"], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<psi>'\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "using insert"], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<psi>'\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "using \\<open>\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G \\<psi>\\<close> \\<open>x = G \\<psi>'\\<close>"], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<psi>'\n  finite \\<G>\n  ?y \\<in> \\<G> \\<Longrightarrow> G_depth ?y \\<le> G_depth x\n  \\<lbrakk>Only_G \\<G>;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w;\n   G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  Only_G (insert x \\<G>)\n  G ?\\<psi> \\<in> insert x \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> (insert x \\<G>) w\n  G \\<psi> \\<in> insert x \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  x = G \\<psi>'\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<psi>", "by auto"], ["proof (state)\nthis:\n  w \\<Turnstile> F G \\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<lbrakk>Only_G {};\n        \\<And>\\<psi>.\n           G \\<psi> \\<in> {} \\<Longrightarrow>\n           \\<PP>\\<^sub>\\<infinity> \\<psi> {} w;\n        G \\<psi> \\<in> {}\\<rbrakk>\n       \\<Longrightarrow> w \\<Turnstile> F G \\<psi>", "qed blast"], ["proof (state)\nthis:\n  w \\<Turnstile> F G \\<psi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closed_\\<G>\\<^sub>F\\<^sub>G:\n  \"closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "proof (induction \\<phi>)"], ["proof (state)\ngoal (10 subgoals):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G true w) w\n 2. closed (\\<G>\\<^sub>F\\<^sub>G false w) w\n 3. \\<And>x. closed (\\<G>\\<^sub>F\\<^sub>G p(x) w) w\n 4. \\<And>x. closed (\\<G>\\<^sub>F\\<^sub>G (np(x)) w) w\n 5. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed\n                          (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2) w) w\n 6. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed\n                          (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2) w) w\n 7. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w) w\n 8. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 9. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (F \\<phi>) w) w\n 10. \\<And>\\<phi>1 \\<phi>2.\n        \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n         closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n        \\<Longrightarrow> closed\n                           (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2) w) w", "case (LTLGlobal \\<phi>)"], ["proof (state)\nthis:\n  closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal (10 subgoals):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G true w) w\n 2. closed (\\<G>\\<^sub>F\\<^sub>G false w) w\n 3. \\<And>x. closed (\\<G>\\<^sub>F\\<^sub>G p(x) w) w\n 4. \\<And>x. closed (\\<G>\\<^sub>F\\<^sub>G (np(x)) w) w\n 5. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed\n                          (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2) w) w\n 6. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed\n                          (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2) w) w\n 7. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w) w\n 8. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 9. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (F \\<phi>) w) w\n 10. \\<And>\\<phi>1 \\<phi>2.\n        \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n         closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n        \\<Longrightarrow> closed\n                           (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2) w) w", "thus ?case"], ["proof (prove)\nusing this:\n  closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal (1 subgoal):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "proof (cases \"w \\<Turnstile> F G \\<phi>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "case True"], ["proof (state)\nthis:\n  w \\<Turnstile> F G \\<phi>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "hence \"\\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile> \\<phi>\""], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<phi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile> \\<phi>", "using LTL_FG_almost_all_suffixes"], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<phi>\n  ?w \\<Turnstile> F G ?\\<phi> =\n  (\\<forall>\\<^sub>\\<infinity>i. suffix i ?w \\<Turnstile> ?\\<phi>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile> \\<phi>", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile> \\<phi>", "obtain i where \"\\<forall>j \\<ge> i. suffix j w \\<Turnstile> \\<phi>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. suffix i w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<forall>j\\<ge>i. suffix j w \\<Turnstile> \\<phi> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m. \\<forall>n\\<ge>m. suffix n w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<forall>j\\<ge>i. suffix j w \\<Turnstile> \\<phi> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<forall>j\\<ge>i. suffix j w \\<Turnstile> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "{"], ["proof (state)\nthis:\n  \\<forall>j\\<ge>i. suffix j w \\<Turnstile> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "fix k"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "assume \"k \\<ge> i\""], ["proof (state)\nthis:\n  i \\<le> k\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "hence \"suffix k w \\<Turnstile> \\<phi>\""], ["proof (prove)\nusing this:\n  i \\<le> k\n\ngoal (1 subgoal):\n 1. suffix k w \\<Turnstile> \\<phi>", "using \\<open>\\<forall>j\\<ge>i. suffix j w \\<Turnstile> \\<phi>\\<close>"], ["proof (prove)\nusing this:\n  i \\<le> k\n  \\<forall>j\\<ge>i. suffix j w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. suffix k w \\<Turnstile> \\<phi>", "by blast"], ["proof (state)\nthis:\n  suffix k w \\<Turnstile> \\<phi>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "hence \"\\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} (suffix k w) 0\""], ["proof (prove)\nusing this:\n  suffix k w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} \\<Turnstile>\\<^sub>P\n       af\\<^sub>G \\<phi> (prefix j (suffix k w))", "using LTL_FG_suffix"], ["proof (prove)\nusing this:\n  suffix k w \\<Turnstile> \\<phi>\n  suffix ?i ?w \\<Turnstile> F G ?\\<phi> = ?w \\<Turnstile> F G ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<exists>j.\n       {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} \\<Turnstile>\\<^sub>P\n       af\\<^sub>G \\<phi> (prefix j (suffix k w))", "by (blast dest: ltl_implies_provable[unfolded \\<G>\\<^sub>F\\<^sub>G_alt_def])"], ["proof (state)\nthis:\n  \\<exists>j.\n     {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j (suffix k w))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "hence \"\\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w k\""], ["proof (prove)\nusing this:\n  \\<exists>j.\n     {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j (suffix k w))\n\ngoal (1 subgoal):\n 1. \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w k", "unfolding subsequence_shift"], ["proof (prove)\nusing this:\n  \\<exists>j.\n     {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (w [k + 0 \\<rightarrow> k + j])\n\ngoal (1 subgoal):\n 1. \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w k", "by auto"], ["proof (state)\nthis:\n  \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w k\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "}"], ["proof (state)\nthis:\n  i \\<le> ?k2 \\<Longrightarrow>\n  \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w ?k2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "hence \"\\<PP>\\<^sub>\\<infinity> \\<phi> {G \\<psi> | \\<psi>. w \\<Turnstile> F G \\<psi>} w\""], ["proof (prove)\nusing this:\n  i \\<le> ?k2 \\<Longrightarrow>\n  \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w ?k2\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w", "using almost_all_eventually_provable_def[of \\<phi> _ w]"], ["proof (prove)\nusing this:\n  i \\<le> ?k2 \\<Longrightarrow>\n  \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w ?k2\n  \\<PP>\\<^sub>\\<infinity> \\<phi> ?\\<G> w \\<equiv>\n  \\<forall>\\<^sub>\\<infinity>i. \\<PP> \\<phi> ?\\<G> w i\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  i \\<le> ?k2 \\<Longrightarrow>\n  \\<PP> \\<phi> {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w ?k2\n  \\<PP>\\<^sub>\\<infinity> \\<phi> ?\\<G> w \\<equiv>\n  \\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<phi> ?\\<G> w n\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w", "by auto"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<phi>\n   {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "hence \"\\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\""], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi>\n   {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "unfolding \\<G>\\<^sub>F\\<^sub>G_alt_def"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi>\n   {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     {G \\<psi> |\\<psi>.\n      G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}\n     w", "using almost_all_eventually_provable_restrict_to_G"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi>\n   {G \\<psi> |\\<psi>. w \\<Turnstile> F G \\<psi>} w\n  \\<lbrakk>\\<PP>\\<^sub>\\<infinity> ?\\<phi> ?\\<G> ?w; Only_G ?\\<G>\\<rbrakk>\n  \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> ?\\<phi>\n                     (?\\<G> \\<inter> \\<^bold>G ?\\<phi>) ?w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<phi>\n     {G \\<psi> |\\<psi>.\n      G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}\n     w", "by blast"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal (2 subgoals):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n 2. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal (1 subgoal):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "using LTLGlobal insert"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n  closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n  ListMem ?x ?xs \\<Longrightarrow> ListMem ?x (?y # ?xs)\n\ngoal (1 subgoal):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "by auto"], ["proof (state)\nthis:\n  closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n\ngoal (1 subgoal):\n 1. \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w;\n     \\<not> w \\<Turnstile> F G \\<phi>\\<rbrakk>\n    \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w", "qed auto"], ["proof (state)\nthis:\n  closed (\\<G>\\<^sub>F\\<^sub>G (G \\<phi>) w) w\n\ngoal (9 subgoals):\n 1. closed (\\<G>\\<^sub>F\\<^sub>G true w) w\n 2. closed (\\<G>\\<^sub>F\\<^sub>G false w) w\n 3. \\<And>x. closed (\\<G>\\<^sub>F\\<^sub>G p(x) w) w\n 4. \\<And>x. closed (\\<G>\\<^sub>F\\<^sub>G (np(x)) w) w\n 5. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed\n                          (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 and \\<phi>2) w) w\n 6. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed\n                          (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 or \\<phi>2) w) w\n 7. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (X \\<phi>) w) w\n 8. \\<And>\\<phi>.\n       closed (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w \\<Longrightarrow>\n       closed (\\<G>\\<^sub>F\\<^sub>G (F \\<phi>) w) w\n 9. \\<And>\\<phi>1 \\<phi>2.\n       \\<lbrakk>closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>1 w) w;\n        closed (\\<G>\\<^sub>F\\<^sub>G \\<phi>2 w) w\\<rbrakk>\n       \\<Longrightarrow> closed (\\<G>\\<^sub>F\\<^sub>G (\\<phi>1 U \\<phi>2) w)\n                          w", "qed auto"], ["", "subsubsection \\<open>Conjunction of Eventually Provable Formulas\\<close>"], ["", "definition \\<F> \nwhere \n  \"\\<F> \\<phi> w \\<G> j = And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])) [the (threshold \\<phi> w \\<G>) ..< Suc j])\""], ["", "lemma almost_all_suffixes_model_\\<F>:\n  assumes \"closed \\<G> w\"\n  assumes \"G \\<phi> \\<in> \\<G>\"\n  shows \"\\<forall>\\<^sub>\\<infinity>j. suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "have \"Only_G \\<G>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Only_G \\<G>", "using assms(1)"], ["proof (prove)\nusing this:\n  closed \\<G> w\n\ngoal (1 subgoal):\n 1. Only_G \\<G>", "by simp"], ["proof (state)\nthis:\n  Only_G \\<G>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "hence \"\\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>}\" and \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\""], ["proof (prove)\nusing this:\n  Only_G \\<G>\n\ngoal (1 subgoal):\n 1. \\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>} &&&\n    \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w", "using closed_FG[OF assms(1)] assms"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> w \\<Turnstile> F G ?\\<psi>\n  closed \\<G> w\n  G \\<phi> \\<in> \\<G>\n\ngoal (1 subgoal):\n 1. \\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>} &&&\n    \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w", "by auto"], ["proof (state)\nthis:\n  \\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>}\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "then"], ["proof (chain)\npicking this:\n  \\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>}\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w", "obtain k where \"threshold \\<phi> w \\<G> = Some k\""], ["proof (prove)\nusing this:\n  \\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>}\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        threshold \\<phi> w \\<G> = Some k \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (simp add: almost_all_eventually_provable_def)"], ["proof (state)\nthis:\n  threshold \\<phi> w \\<G> = Some k\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "hence k_def: \"k = the (threshold \\<phi> w \\<G>)\""], ["proof (prove)\nusing this:\n  threshold \\<phi> w \\<G> = Some k\n\ngoal (1 subgoal):\n 1. k = the (threshold \\<phi> w \\<G>)", "by simp"], ["proof (state)\nthis:\n  k = the (threshold \\<phi> w \\<G>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "moreover"], ["proof (state)\nthis:\n  k = the (threshold \\<phi> w \\<G>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "have \"finite (\\<^bold>G \\<phi> \\<union> \\<G>)\" and \"Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (\\<^bold>G \\<phi> \\<union> \\<G>) &&&\n    Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)", "using assms(1) G_nested_finite"], ["proof (prove)\nusing this:\n  closed \\<G> w\n  finite (\\<^bold>G ?\\<phi>)\n\ngoal (1 subgoal):\n 1. finite (\\<^bold>G \\<phi> \\<union> \\<G>) &&&\n    Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)", "unfolding G_nested_propos_alt_def"], ["proof (prove)\nusing this:\n  closed \\<G> w\n  finite (nested_propos ?\\<phi> \\<inter> {\\<psi>. \\<exists>x. \\<psi> = G x})\n\ngoal (1 subgoal):\n 1. finite\n     (nested_propos \\<phi> \\<inter>\n      {\\<psi>. \\<exists>x. \\<psi> = G x} \\<union>\n      \\<G>) &&&\n    Only_G\n     (nested_propos \\<phi> \\<inter>\n      {\\<psi>. \\<exists>x. \\<psi> = G x} \\<union>\n      \\<G>)", "by auto"], ["proof (state)\nthis:\n  finite (\\<^bold>G \\<phi> \\<union> \\<G>)\n  Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "then"], ["proof (chain)\npicking this:\n  finite (\\<^bold>G \\<phi> \\<union> \\<G>)\n  Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)", "obtain l where S: \"\\<And>j \\<psi>. \\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow> suffix l w \\<Turnstile> \\<psi> = suffix (l + j) w \\<Turnstile> \\<psi>\""], ["proof (prove)\nusing this:\n  finite (\\<^bold>G \\<phi> \\<union> \\<G>)\n  Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)\n\ngoal (1 subgoal):\n 1. (\\<And>l.\n        (\\<And>j \\<psi>.\n            \\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n            suffix l w \\<Turnstile> \\<psi> =\n            suffix (l + j) w \\<Turnstile> \\<psi>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ltl_G_stabilize"], ["proof (prove)\nusing this:\n  finite (\\<^bold>G \\<phi> \\<union> \\<G>)\n  Only_G (\\<^bold>G \\<phi> \\<union> \\<G>)\n  \\<lbrakk>finite ?\\<G>; Only_G ?\\<G>;\n   \\<And>i.\n      (\\<And>\\<chi> j.\n          \\<chi> \\<in> ?\\<G> \\<Longrightarrow>\n          suffix i ?w \\<Turnstile> \\<chi> =\n          suffix (i + j) ?w \\<Turnstile> \\<chi>) \\<Longrightarrow>\n      ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>l.\n        (\\<And>j \\<psi>.\n            \\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n            suffix l w \\<Turnstile> \\<psi> =\n            suffix (l + j) w \\<Turnstile> \\<psi>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix l w \\<Turnstile> ?\\<psi> = suffix (l + ?j) w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "hence \\<G>_sat:\"\\<And>j \\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> suffix (l + j) w \\<Turnstile> G \\<psi>\""], ["proof (prove)\nusing this:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix l w \\<Turnstile> ?\\<psi> = suffix (l + ?j) w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>j \\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix (l + j) w \\<Turnstile> G \\<psi>", "using ltl_G_stabilize_property \\<open>\\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>}\\<close>"], ["proof (prove)\nusing this:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix l w \\<Turnstile> ?\\<psi> = suffix (l + ?j) w \\<Turnstile> ?\\<psi>\n  \\<lbrakk>finite ?\\<G>; Only_G ?\\<G>;\n   \\<And>\\<chi> j.\n      \\<chi> \\<in> ?\\<G> \\<Longrightarrow>\n      suffix ?i ?w \\<Turnstile> \\<chi> =\n      suffix (?i + j) ?w \\<Turnstile> \\<chi>;\n   G ?\\<psi>\n   \\<in> ?\\<G> \\<inter> {\\<chi>. ?w \\<Turnstile> F \\<chi>}\\<rbrakk>\n  \\<Longrightarrow> suffix ?i ?w \\<Turnstile> G ?\\<psi>\n  \\<G> \\<subseteq> {\\<chi>. w \\<Turnstile> F \\<chi>}\n\ngoal (1 subgoal):\n 1. \\<And>j \\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix (l + j) w \\<Turnstile> G \\<psi>", "by blast"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  suffix (l + ?j) w \\<Turnstile> G ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "{"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  suffix (l + ?j) w \\<Turnstile> G ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "assume \"l \\<le> j\""], ["proof (state)\nthis:\n  l \\<le> j\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "{"], ["proof (state)\nthis:\n  l \\<le> j\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "assume \"k \\<le> i\" \"i \\<le> j\""], ["proof (state)\nthis:\n  k \\<le> i\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "then"], ["proof (chain)\npicking this:\n  k \\<le> i\n  i \\<le> j", "obtain j' where \"j = i + j'\""], ["proof (prove)\nusing this:\n  k \\<le> i\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. (\\<And>j'. j = i + j' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (blast dest: le_Suc_ex)"], ["proof (state)\nthis:\n  j = i + j'\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "hence \"\\<exists>j \\<ge> i. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  j = i + j'\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i.\n       \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "using \\<open>\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\\<close>"], ["proof (prove)\nusing this:\n  j = i + j'\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i.\n       \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "unfolding almost_all_eventually_provable_def MOST_nat_le"], ["proof (prove)\nusing this:\n  j = i + j'\n  \\<exists>m. \\<forall>n\\<ge>m. \\<PP> \\<phi> \\<G> w n\n\ngoal (1 subgoal):\n 1. \\<exists>j\\<ge>i.\n       \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "by (metis \\<open>k \\<le> i\\<close> \\<open>threshold \\<phi> w \\<G> = Some k\\<close> threshold_properties(2) linear subsequence_empty)"], ["proof (state)\nthis:\n  \\<exists>j\\<ge>i.\n     \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "then"], ["proof (chain)\npicking this:\n  \\<exists>j\\<ge>i.\n     \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "obtain j'' where \"\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j''])\" and \"i \\<le> j''\""], ["proof (prove)\nusing this:\n  \\<exists>j\\<ge>i.\n     \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. (\\<And>j''.\n        \\<lbrakk>\\<G> \\<Turnstile>\\<^sub>P\n                 af\\<^sub>G \\<phi> (w [i \\<rightarrow> j'']);\n         i \\<le> j''\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (blast )"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j''])\n  i \\<le> j''\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "have \"suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "proof (cases \"j'' \\<le> j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "case True"], ["proof (state)\nthis:\n  j'' \\<le> j\n\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "hence \"\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  j'' \\<le> j\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "using af\\<^sub>G_sat_core_generalized[OF \\<open>Only_G \\<G>\\<close>, of _ j' \\<phi> \"suffix i w\"] le_Suc_ex[OF \\<open>i \\<le> j''\\<close>] le_Suc_ex[OF \\<open>j'' \\<le> j\\<close>]"], ["proof (prove)\nusing this:\n  j'' \\<le> j\n  \\<lbrakk>?i \\<le> j';\n   \\<G> \\<Turnstile>\\<^sub>P\n   af\\<^sub>G \\<phi> (prefix ?i (suffix i w))\\<rbrakk>\n  \\<Longrightarrow> \\<G> \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G \\<phi> (prefix j' (suffix i w))\n  \\<exists>n. j'' = i + n\n  \\<exists>n. j = j'' + n\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "by (metis add.right_neutral subsequence_shift \\<open>j = i + j'\\<close> \\<open>\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j''])\\<close> nat_add_left_cancel_le )"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\n\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "hence \"\\<G> \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "unfolding eval\\<^sub>G_prop_entailment"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])", "."], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "moreover"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "have \"\\<G> \\<subseteq> {\\<chi>. suffix j w \\<Turnstile> \\<chi>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G> \\<subseteq> {\\<chi>. suffix j w \\<Turnstile> \\<chi>}", "using \\<G>_sat \\<open>l \\<le> j\\<close> \\<open>Only_G \\<G>\\<close>"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  suffix (l + ?j) w \\<Turnstile> G ?\\<psi>\n  l \\<le> j\n  Only_G \\<G>\n\ngoal (1 subgoal):\n 1. \\<G> \\<subseteq> {\\<chi>. suffix j w \\<Turnstile> \\<chi>}", "by (fast dest: le_Suc_ex)"], ["proof (state)\nthis:\n  \\<G> \\<subseteq> {\\<chi>. suffix j w \\<Turnstile> \\<chi>}\n\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "ultimately"], ["proof (chain)\npicking this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n  \\<G> \\<subseteq> {\\<chi>. suffix j w \\<Turnstile> \\<chi>}", "have \"{\\<chi>. suffix j w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n  \\<G> \\<subseteq> {\\<chi>. suffix j w \\<Turnstile> \\<chi>}\n\ngoal (1 subgoal):\n 1. {\\<chi>. suffix j w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "by blast"], ["proof (state)\nthis:\n  {\\<chi>. suffix j w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (2 subgoals):\n 1. j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n 2. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "thus ?thesis"], ["proof (prove)\nusing this:\n  {\\<chi>. suffix j w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "unfolding ltl_models_equiv_prop_entailment[symmetric]"], ["proof (prove)\nusing this:\n  suffix j w \\<Turnstile>\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "by simp"], ["proof (state)\nthis:\n  suffix j w \\<Turnstile>\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "case False"], ["proof (state)\nthis:\n  \\<not> j'' \\<le> j\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "hence \"\\<G> \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (af\\<^sub>G (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])) (w [j \\<rightarrow> j'']))\""], ["proof (prove)\nusing this:\n  \\<not> j'' \\<le> j\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G \\<G>\n     (af\\<^sub>G (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n       (w [j \\<rightarrow> j'']))", "unfolding foldl_append[symmetric] eval\\<^sub>G_prop_entailment"], ["proof (prove)\nusing this:\n  \\<not> j'' \\<le> j\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (w [i \\<rightarrow> j] @ w [j \\<rightarrow> j''])", "by (metis le_iff_add \\<open>i \\<le> j\\<close> map_append upt_add_eq_append nat_le_linear subsequence_def \\<open>\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [i \\<rightarrow> j''])\\<close>)"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G>\n   (af\\<^sub>G (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n     (w [j \\<rightarrow> j'']))\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "hence \"\\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) (w [j \\<rightarrow> j''])\" (is \"\\<G> \\<Turnstile>\\<^sub>P ?af\\<^sub>G\")"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G>\n   (af\\<^sub>G (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n     (w [j \\<rightarrow> j'']))\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P\n    af\\<^sub>G\n     (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n     (w [j \\<rightarrow> j''])", "using af\\<^sub>G_eval\\<^sub>G[OF \\<open>Only_G \\<G>\\<close>]"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G \\<G>\n   (af\\<^sub>G (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n     (w [j \\<rightarrow> j'']))\n  \\<G> \\<Turnstile>\\<^sub>P af\\<^sub>G (eval\\<^sub>G \\<G> ?\\<phi>) ?w =\n  \\<G> \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (af\\<^sub>G ?\\<phi> ?w)\n\ngoal (1 subgoal):\n 1. \\<G> \\<Turnstile>\\<^sub>P\n    af\\<^sub>G\n     (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n     (w [j \\<rightarrow> j''])", "by blast"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "moreover"], ["proof (state)\nthis:\n  \\<G> \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "have \"l \\<le> j''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<le> j''", "using False \\<open>l \\<le> j\\<close>"], ["proof (prove)\nusing this:\n  \\<not> j'' \\<le> j\n  l \\<le> j\n\ngoal (1 subgoal):\n 1. l \\<le> j''", "by linarith"], ["proof (state)\nthis:\n  l \\<le> j''\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "hence \"\\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}\""], ["proof (prove)\nusing this:\n  l \\<le> j''\n\ngoal (1 subgoal):\n 1. \\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}", "using \\<G>_sat \\<open>Only_G \\<G>\\<close>"], ["proof (prove)\nusing this:\n  l \\<le> j''\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  suffix (l + ?j) w \\<Turnstile> G ?\\<psi>\n  Only_G \\<G>\n\ngoal (1 subgoal):\n 1. \\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}", "by (fast dest: le_Suc_ex)"], ["proof (state)\nthis:\n  \\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "ultimately"], ["proof (chain)\npicking this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n  \\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}", "have \"suffix j'' w \\<Turnstile> ?af\\<^sub>G\""], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n  \\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}\n\ngoal (1 subgoal):\n 1. suffix j'' w \\<Turnstile>\n    af\\<^sub>G\n     (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n     (w [j \\<rightarrow> j''])", "using ltl_models_equiv_prop_entailment[symmetric]"], ["proof (prove)\nusing this:\n  \\<G> \\<Turnstile>\\<^sub>P\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n  \\<G> \\<subseteq> {\\<chi>. suffix j'' w \\<Turnstile> \\<chi>}\n  {\\<chi>. ?w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P ?\\<phi> =\n  ?w \\<Turnstile> ?\\<phi>\n\ngoal (1 subgoal):\n 1. suffix j'' w \\<Turnstile>\n    af\\<^sub>G\n     (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n     (w [j \\<rightarrow> j''])", "by blast"], ["proof (state)\nthis:\n  suffix j'' w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "moreover"], ["proof (state)\nthis:\n  suffix j'' w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "{"], ["proof (state)\nthis:\n  suffix j'' w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "have \"\\<And>\\<psi>. \\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow> suffix j w \\<Turnstile> \\<psi> = suffix j'' w \\<Turnstile> \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n       suffix j w \\<Turnstile> \\<psi> = suffix j'' w \\<Turnstile> \\<psi>", "using S \\<open>l \\<le> j\\<close> \\<open>l \\<le> j''\\<close>"], ["proof (prove)\nusing this:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix l w \\<Turnstile> ?\\<psi> = suffix (l + ?j) w \\<Turnstile> ?\\<psi>\n  l \\<le> j\n  l \\<le> j''\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n       suffix j w \\<Turnstile> \\<psi> = suffix j'' w \\<Turnstile> \\<psi>", "by (metis le_add_diff_inverse)"], ["proof (state)\nthis:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "moreover"], ["proof (state)\nthis:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "have \"\\<^bold>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) \\<subseteq> \\<^bold>G \\<phi>\" (is \"?G \\<subseteq> _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<^bold>G\n     (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n    \\<subseteq> \\<^bold>G \\<phi>", "using eval\\<^sub>G_G_nested"], ["proof (prove)\nusing this:\n  \\<^bold>G (eval\\<^sub>G ?\\<G> ?\\<phi>) \\<subseteq> \\<^bold>G ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<^bold>G\n     (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n    \\<subseteq> \\<^bold>G \\<phi>", "by force"], ["proof (state)\nthis:\n  \\<^bold>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n  \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "ultimately"], ["proof (chain)\npicking this:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n  \\<^bold>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n  \\<subseteq> \\<^bold>G \\<phi>", "have \"\\<And>\\<psi>. \\<psi> \\<in> ?G \\<Longrightarrow> suffix j w \\<Turnstile> \\<psi> = suffix j'' w \\<Turnstile> \\<psi>\""], ["proof (prove)\nusing this:\n  ?\\<psi> \\<in> \\<^bold>G \\<phi> \\<union> \\<G> \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n  \\<^bold>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n  \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       \\<psi>\n       \\<in> \\<^bold>G\n              (eval\\<^sub>G \\<G>\n                (af\\<^sub>G \\<phi>\n                  (w [i \\<rightarrow> j]))) \\<Longrightarrow>\n       suffix j w \\<Turnstile> \\<psi> = suffix j'' w \\<Turnstile> \\<psi>", "by auto"], ["proof (state)\nthis:\n  ?\\<psi>\n  \\<in> \\<^bold>G\n         (eval\\<^sub>G \\<G>\n           (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "}"], ["proof (state)\nthis:\n  ?\\<psi>\n  \\<in> \\<^bold>G\n         (eval\\<^sub>G \\<G>\n           (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<not> j'' \\<le> j \\<Longrightarrow>\n    suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "ultimately"], ["proof (chain)\npicking this:\n  suffix j'' w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n  ?\\<psi>\n  \\<in> \\<^bold>G\n         (eval\\<^sub>G \\<G>\n           (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>", "show ?thesis"], ["proof (prove)\nusing this:\n  suffix j'' w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n  ?\\<psi>\n  \\<in> \\<^bold>G\n         (eval\\<^sub>G \\<G>\n           (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "using af\\<^sub>G_ltl_continuation_suffix[of \"eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\" \"suffix j w\", unfolded suffix_suffix]"], ["proof (prove)\nusing this:\n  suffix j'' w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (w [j \\<rightarrow> j''])\n  ?\\<psi>\n  \\<in> \\<^bold>G\n         (eval\\<^sub>G \\<G>\n           (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) \\<Longrightarrow>\n  suffix j w \\<Turnstile> ?\\<psi> = suffix j'' w \\<Turnstile> ?\\<psi>\n  \\<forall>\\<psi>\n           \\<in>\\<^bold>G\n                 (eval\\<^sub>G \\<G>\n                   (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))).\n     suffix j w \\<Turnstile> \\<psi> =\n     suffix (j + ?i) w \\<Turnstile> \\<psi> \\<Longrightarrow>\n  suffix j w \\<Turnstile>\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])) =\n  suffix (j + ?i) w \\<Turnstile>\n  af\\<^sub>G (eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n   (prefix ?i (suffix j w))\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))", "by (metis False le_Suc_ex nat_le_linear add_diff_cancel_left' subsequence_prefix_suffix)"], ["proof (state)\nthis:\n  suffix j w \\<Turnstile>\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  suffix j w \\<Turnstile>\n  eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>k \\<le> ?i2; ?i2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> suffix j w \\<Turnstile>\n                    eval\\<^sub>G \\<G>\n                     (af\\<^sub>G \\<phi> (w [?i2 \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "hence \"suffix j w \\<Turnstile> And (map (\\<lambda>i. eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))) [k..<Suc j])\""], ["proof (prove)\nusing this:\n  \\<lbrakk>k \\<le> ?i2; ?i2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> suffix j w \\<Turnstile>\n                    eval\\<^sub>G \\<G>\n                     (af\\<^sub>G \\<phi> (w [?i2 \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    And (map (\\<lambda>i.\n                 eval\\<^sub>G \\<G>\n                  (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n          [k..<Suc j])", "unfolding And_semantics set_map set_upt image_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>k \\<le> ?i2; ?i2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> suffix j w \\<Turnstile>\n                    eval\\<^sub>G \\<G>\n                     (af\\<^sub>G \\<phi> (w [?i2 \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. Ball\n     {y. \\<exists>x\\<in>{k..<Suc j}.\n            y =\n            eval\\<^sub>G \\<G> (af\\<^sub>G \\<phi> (w [x \\<rightarrow> j]))}\n     ((\\<Turnstile>) (suffix j w))", "by force"], ["proof (state)\nthis:\n  suffix j w \\<Turnstile>\n  And (map (\\<lambda>i.\n               eval\\<^sub>G \\<G>\n                (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n        [k..<Suc j])\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "hence \"suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])) [k..<Suc j]))\""], ["proof (prove)\nusing this:\n  suffix j w \\<Turnstile>\n  And (map (\\<lambda>i.\n               eval\\<^sub>G \\<G>\n                (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n        [k..<Suc j])\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    eval\\<^sub>G \\<G>\n     (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n            [k..<Suc j]))", "unfolding eval\\<^sub>G_And_map map_map comp_def"], ["proof (prove)\nusing this:\n  suffix j w \\<Turnstile>\n  And (map (\\<lambda>i.\n               eval\\<^sub>G \\<G>\n                (af\\<^sub>G \\<phi> (w [i \\<rightarrow> j])))\n        [k..<Suc j])\n\ngoal (1 subgoal):\n 1. suffix j w \\<Turnstile>\n    And (map (\\<lambda>x.\n                 eval\\<^sub>G \\<G>\n                  (af\\<^sub>G \\<phi> (w [x \\<rightarrow> j])))\n          [k..<Suc j])", "."], ["proof (state)\nthis:\n  suffix j w \\<Turnstile>\n  eval\\<^sub>G \\<G>\n   (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> j]))\n          [k..<Suc j]))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "}"], ["proof (state)\nthis:\n  l \\<le> ?j2 \\<Longrightarrow>\n  suffix ?j2 w \\<Turnstile>\n  eval\\<^sub>G \\<G>\n   (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> ?j2]))\n          [k..<Suc ?j2]))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "thus ?thesis"], ["proof (prove)\nusing this:\n  l \\<le> ?j2 \\<Longrightarrow>\n  suffix ?j2 w \\<Turnstile>\n  eval\\<^sub>G \\<G>\n   (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> ?j2]))\n          [k..<Suc ?j2]))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)", "unfolding \\<F>_def And_semantics MOST_nat_le k_def[symmetric]"], ["proof (prove)\nusing this:\n  l \\<le> ?j2 \\<Longrightarrow>\n  suffix ?j2 w \\<Turnstile>\n  eval\\<^sub>G \\<G>\n   (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> ?j2]))\n          [k..<Suc ?j2]))\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       \\<forall>n\\<ge>m.\n          suffix n w \\<Turnstile>\n          eval\\<^sub>G \\<G>\n           (And (map (\\<lambda>i. af\\<^sub>G \\<phi> (w [i \\<rightarrow> n]))\n                  [k..<Suc n]))", "by meson"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>j.\n     suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<phi> w \\<G> j)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma almost_all_commutative'':\n  assumes \"finite S\"\n  assumes \"Only_G S\"\n  assumes \"\\<And>x. G x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P x (i::nat)\"\n  shows \"\\<forall>\\<^sub>\\<infinity>i. \\<forall>x. G x \\<in> S \\<longrightarrow> P x i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>x. G x \\<in> S \\<longrightarrow> P x i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>x. G x \\<in> S \\<longrightarrow> P x i", "from assms"], ["proof (chain)\npicking this:\n  finite S\n  Only_G S\n  G ?x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P ?x i", "have \"(\\<And>x. x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P (theG x) (i::nat))\""], ["proof (prove)\nusing this:\n  finite S\n  Only_G S\n  G ?x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P ?x i\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> S \\<Longrightarrow>\n       \\<forall>\\<^sub>\\<infinity>i. P (theG x) i", "by fastforce"], ["proof (state)\nthis:\n  ?x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P (theG ?x) i\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>x. G x \\<in> S \\<longrightarrow> P x i", "with assms(1)"], ["proof (chain)\npicking this:\n  finite S\n  ?x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P (theG ?x) i", "have \"\\<forall>\\<^sub>\\<infinity>i. \\<forall>x \\<in> S. P (theG x) i\""], ["proof (prove)\nusing this:\n  finite S\n  ?x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P (theG ?x) i\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>S. P (theG x) i", "using almost_all_commutative'"], ["proof (prove)\nusing this:\n  finite S\n  ?x \\<in> S \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. P (theG ?x) i\n  \\<lbrakk>finite ?S;\n   \\<And>x.\n      x \\<in> ?S \\<Longrightarrow>\n      \\<forall>\\<^sub>\\<infinity>i. ?P x i\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>?S. ?P x i\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>S. P (theG x) i", "by force"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>S. P (theG x) i\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>x. G x \\<in> S \\<longrightarrow> P x i", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>S. P (theG x) i\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>x. G x \\<in> S \\<longrightarrow> P x i", "using assms(2)"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. \\<forall>x\\<in>S. P (theG x) i\n  Only_G S\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i.\n       \\<forall>x. G x \\<in> S \\<longrightarrow> P x i", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m. \\<forall>n\\<ge>m. \\<forall>x\\<in>S. P (theG x) n\n  Only_G S\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       \\<forall>n\\<ge>m. \\<forall>x. G x \\<in> S \\<longrightarrow> P x n", "by force"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>\\<infinity>i.\n     \\<forall>x. G x \\<in> S \\<longrightarrow> P x i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma almost_all_suffixes_model_\\<F>_generalized:\n  assumes \"closed \\<G> w\"\n  shows \"\\<forall>\\<^sub>\\<infinity>j. \\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)", "using almost_all_suffixes_model_\\<F>[OF assms] almost_all_commutative''[of \\<G>] assms"], ["proof (prove)\nusing this:\n  G ?\\<phi> \\<in> \\<G> \\<Longrightarrow>\n  \\<forall>\\<^sub>\\<infinity>j.\n     suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> ?\\<phi> w \\<G> j)\n  \\<lbrakk>finite \\<G>; Only_G \\<G>;\n   \\<And>x.\n      G x \\<in> \\<G> \\<Longrightarrow>\n      \\<forall>\\<^sub>\\<infinity>i. ?P x i\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>\\<infinity>i.\n                       \\<forall>x. G x \\<in> \\<G> \\<longrightarrow> ?P x i\n  closed \\<G> w\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>j.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)", "by fast"], ["", "subsection \\<open>Technical Lemmas\\<close>"], ["", "lemma threshold_suffix_2:\n  assumes \"threshold \\<psi> w \\<G>' = Some k\"\n  assumes \"k \\<le> l\"\n  shows \"threshold \\<psi> (suffix l w) \\<G>' = Some 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "have \"\\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' w", "using \\<open>threshold \\<psi> w \\<G>' = Some k\\<close>  option.distinct(1)"], ["proof (prove)\nusing this:\n  threshold \\<psi> w \\<G>' = Some k\n  None \\<noteq> Some ?x2.0\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' w", "unfolding threshold.simps index.simps almost_all_eventually_provable_def"], ["proof (prove)\nusing this:\n  (if \\<forall>\\<^sub>\\<infinity>j. \\<PP> \\<psi> \\<G>' w j\n   then Some (LEAST i. \\<forall>j\\<ge>i. \\<PP> \\<psi> \\<G>' w j)\n   else None) =\n  Some k\n  None \\<noteq> Some ?x2.0\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>\\<infinity>i. \\<PP> \\<psi> \\<G>' w i", "by metis"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' w\n\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "hence \"\\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)\""], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)", "using almost_all_eventually_provable_suffix"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' w\n  \\<PP>\\<^sub>\\<infinity> ?\\<phi> ?\\<G>' ?w \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<phi> ?\\<G>' (suffix ?i ?w)\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)", "by blast"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)\n\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "moreover"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)\n\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "have \"\\<forall>i \\<ge> k. \\<exists>j. \\<G>' \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi> (w [i \\<rightarrow> j])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i", "using threshold_properties(2)[OF assms(1)]"], ["proof (prove)\nusing this:\n  k \\<le> ?j \\<Longrightarrow> \\<PP> \\<psi> \\<G>' w ?j\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i", "by blast"], ["proof (state)\nthis:\n  \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i\n\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "hence \"\\<forall>m. \\<exists>j. \\<G>' \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi> ((suffix l w) [m \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i\n\ngoal (1 subgoal):\n 1. \\<forall>m. \\<PP> \\<psi> \\<G>' (suffix l w) m", "unfolding subsequence_shift"], ["proof (prove)\nusing this:\n  \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i\n\ngoal (1 subgoal):\n 1. \\<forall>m.\n       \\<exists>j.\n          \\<G>' \\<Turnstile>\\<^sub>P\n          af\\<^sub>G \\<psi> (w [l + m \\<rightarrow> l + j])", "using \\<open>k \\<le> l\\<close> \\<open>\\<forall>i \\<ge> k. \\<exists>j. \\<G>' \\<Turnstile>\\<^sub>P af\\<^sub>G \\<psi> (w [i \\<rightarrow> j])\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i\n  k \\<le> l\n  \\<forall>i\\<ge>k. \\<PP> \\<psi> \\<G>' w i\n\ngoal (1 subgoal):\n 1. \\<forall>m.\n       \\<exists>j.\n          \\<G>' \\<Turnstile>\\<^sub>P\n          af\\<^sub>G \\<psi> (w [l + m \\<rightarrow> l + j])", "by (metis (mono_tags, hide_lams) leI less_imp_add_positive order_refl subsequence_empty trans_le_add1)"], ["proof (state)\nthis:\n  \\<forall>m. \\<PP> \\<psi> \\<G>' (suffix l w) m\n\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "ultimately"], ["proof (chain)\npicking this:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)\n  \\<forall>m. \\<PP> \\<psi> \\<G>' (suffix l w) m", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G>' (suffix l w)\n  \\<forall>m. \\<PP> \\<psi> \\<G>' (suffix l w) m\n\ngoal (1 subgoal):\n 1. threshold \\<psi> (suffix l w) \\<G>' = Some 0", "by simp"], ["proof (state)\nthis:\n  threshold \\<psi> (suffix l w) \\<G>' = Some 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma threshold_closed:\n  assumes \"closed \\<G> w\"\n  shows \"\\<exists>k. \\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> threshold \\<psi> (suffix k w) \\<G> = Some 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "define k where \"k = Max {the (threshold \\<psi> w \\<G>) | \\<psi>. G \\<psi> \\<in> \\<G>}\" (is \"_ = Max ?S\")"], ["proof (state)\nthis:\n  k = Max {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>}\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "have \"finite \\<G>\" and \"Only_G \\<G>\" and \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite \\<G> &&&\n    Only_G \\<G> &&&\n    (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w)", "using assms"], ["proof (prove)\nusing this:\n  closed \\<G> w\n\ngoal (1 subgoal):\n 1. finite \\<G> &&&\n    Only_G \\<G> &&&\n    (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        \\<PP>\\<^sub>\\<infinity> \\<psi> \\<G> w)", "by blast+"], ["proof (state)\nthis:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "hence \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> \\<exists>k. threshold \\<psi> w \\<G> = Some k\""], ["proof (prove)\nusing this:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<psi> \\<G> w\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       \\<exists>k. threshold \\<psi> w \\<G> = Some k", "unfolding almost_all_eventually_provable_def"], ["proof (prove)\nusing this:\n  finite \\<G>\n  Only_G \\<G>\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<forall>\\<^sub>\\<infinity>i. \\<PP> ?\\<psi> \\<G> w i\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       \\<exists>k. threshold \\<psi> w \\<G> = Some k", "by simp"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<exists>k. threshold ?\\<psi> w \\<G> = Some k\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "moreover"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<exists>k. threshold ?\\<psi> w \\<G> = Some k\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "have \"?S = (\\<lambda>x. the (threshold (theG x) w \\<G>)) ` \\<G>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>} =\n    (\\<lambda>x. the (threshold (theG x) w \\<G>)) ` \\<G>", "unfolding image_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>} =\n    {y. \\<exists>x\\<in>\\<G>. y = the (threshold (theG x) w \\<G>)}", "using \\<open>Only_G \\<G>\\<close> ltl.sel(8)"], ["proof (prove)\nusing this:\n  Only_G \\<G>\n  theG (G ?x8.0) = ?x8.0\n\ngoal (1 subgoal):\n 1. {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>} =\n    {y. \\<exists>x\\<in>\\<G>. y = the (threshold (theG x) w \\<G>)}", "by metis"], ["proof (state)\nthis:\n  {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>} =\n  (\\<lambda>x. the (threshold (theG x) w \\<G>)) ` \\<G>\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "hence \"finite ?S\""], ["proof (prove)\nusing this:\n  {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>} =\n  (\\<lambda>x. the (threshold (theG x) w \\<G>)) ` \\<G>\n\ngoal (1 subgoal):\n 1. finite {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>}", "using \\<open>finite \\<G>\\<close> finite_imageI"], ["proof (prove)\nusing this:\n  {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>} =\n  (\\<lambda>x. the (threshold (theG x) w \\<G>)) ` \\<G>\n  finite \\<G>\n  finite ?F \\<Longrightarrow> finite (?h ` ?F)\n\ngoal (1 subgoal):\n 1. finite {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>}", "by simp"], ["proof (state)\nthis:\n  finite {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>}\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "hence \"\\<And>\\<psi> k'. G \\<psi> \\<in> \\<G> \\<Longrightarrow> threshold \\<psi> w \\<G> = Some k' \\<Longrightarrow> k' \\<le> k\""], ["proof (prove)\nusing this:\n  finite {the (threshold \\<psi> w \\<G>) |\\<psi>. G \\<psi> \\<in> \\<G>}\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi> k'.\n       \\<lbrakk>G \\<psi> \\<in> \\<G>;\n        threshold \\<psi> w \\<G> = Some k'\\<rbrakk>\n       \\<Longrightarrow> k' \\<le> k", "by (metis (mono_tags, lifting) CollectI Max_ge k_def option.sel)"], ["proof (state)\nthis:\n  \\<lbrakk>G ?\\<psi> \\<in> \\<G>;\n   threshold ?\\<psi> w \\<G> = Some ?k'\\<rbrakk>\n  \\<Longrightarrow> ?k' \\<le> k\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "ultimately"], ["proof (chain)\npicking this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<exists>k. threshold ?\\<psi> w \\<G> = Some k\n  \\<lbrakk>G ?\\<psi> \\<in> \\<G>;\n   threshold ?\\<psi> w \\<G> = Some ?k'\\<rbrakk>\n  \\<Longrightarrow> ?k' \\<le> k", "have \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> threshold \\<psi> (suffix k w) \\<G> = Some 0\""], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<exists>k. threshold ?\\<psi> w \\<G> = Some k\n  \\<lbrakk>G ?\\<psi> \\<in> \\<G>;\n   threshold ?\\<psi> w \\<G> = Some ?k'\\<rbrakk>\n  \\<Longrightarrow> ?k' \\<le> k\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       threshold \\<psi> (suffix k w) \\<G> = Some 0", "using threshold_suffix[of _ w \\<G> _ k 0] threshold_suffix_2"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  \\<exists>k. threshold ?\\<psi> w \\<G> = Some k\n  \\<lbrakk>G ?\\<psi> \\<in> \\<G>;\n   threshold ?\\<psi> w \\<G> = Some ?k'\\<rbrakk>\n  \\<Longrightarrow> ?k' \\<le> k\n  \\<lbrakk>threshold ?\\<phi> w \\<G> = Some ?k;\n   threshold ?\\<phi> (suffix k w) \\<G> = Some 0\\<rbrakk>\n  \\<Longrightarrow> ?k \\<le> 0 + k\n  \\<lbrakk>threshold ?\\<psi> ?w ?\\<G>' = Some ?k; ?k \\<le> ?l\\<rbrakk>\n  \\<Longrightarrow> threshold ?\\<psi> (suffix ?l ?w) ?\\<G>' = Some 0\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       threshold \\<psi> (suffix k w) \\<G> = Some 0", "by blast"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  threshold ?\\<psi> (suffix k w) \\<G> = Some 0\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "thus ?thesis"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow>\n  threshold ?\\<psi> (suffix k w) \\<G> = Some 0\n\ngoal (1 subgoal):\n 1. \\<exists>k.\n       \\<forall>\\<psi>.\n          G \\<psi> \\<in> \\<G> \\<longrightarrow>\n          threshold \\<psi> (suffix k w) \\<G> = Some 0", "by blast"], ["proof (state)\nthis:\n  \\<exists>k.\n     \\<forall>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<longrightarrow>\n        threshold \\<psi> (suffix k w) \\<G> = Some 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma \\<F>_drop:\n  assumes \"\\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w\"\n  assumes \"S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\"\n  shows \"S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "obtain k k' where k_def: \"threshold \\<phi> w \\<G>' = Some k\" and k'_def: \"threshold \\<phi> (suffix i w) \\<G>' = Some k'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k k'.\n        \\<lbrakk>threshold \\<phi> w \\<G>' = Some k;\n         threshold \\<phi> (suffix i w) \\<G>' = Some k'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms almost_all_eventually_provable_suffix"], ["proof (prove)\nusing this:\n  \\<PP>\\<^sub>\\<infinity> \\<phi> \\<G>' w\n  S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\n  \\<PP>\\<^sub>\\<infinity> ?\\<phi> ?\\<G>' ?w \\<Longrightarrow>\n  \\<PP>\\<^sub>\\<infinity> ?\\<phi> ?\\<G>' (suffix ?i ?w)\n\ngoal (1 subgoal):\n 1. (\\<And>k k'.\n        \\<lbrakk>threshold \\<phi> w \\<G>' = Some k;\n         threshold \\<phi> (suffix i w) \\<G>' = Some k'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding threshold.simps index.simps almost_all_eventually_provable_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>i. \\<PP> \\<phi> \\<G>' w i\n  S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\n  \\<forall>\\<^sub>\\<infinity>i. \\<PP> ?\\<phi> ?\\<G>' ?w i \\<Longrightarrow>\n  \\<forall>\\<^sub>\\<infinity>i. \\<PP> ?\\<phi> ?\\<G>' (suffix ?i ?w) i\n\ngoal (1 subgoal):\n 1. (\\<And>k k'.\n        \\<lbrakk>(if \\<forall>\\<^sub>\\<infinity>j. \\<PP> \\<phi> \\<G>' w j\n                  then Some\n                        (LEAST i. \\<forall>j\\<ge>i. \\<PP> \\<phi> \\<G>' w j)\n                  else None) =\n                 Some k;\n         (if \\<forall>\\<^sub>\\<infinity>j. \\<PP> \\<phi> \\<G>' (suffix i w) j\n          then Some\n                (LEAST ia.\n                    \\<forall>j\\<ge>ia. \\<PP> \\<phi> \\<G>' (suffix i w) j)\n          else None) =\n         Some k'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  threshold \\<phi> w \\<G>' = Some k\n  threshold \\<phi> (suffix i w) \\<G>' = Some k'\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "hence k_def_2: \"the (threshold \\<phi> w \\<G>') = k\" and k'_def_2: \"the (threshold \\<phi> (suffix i w) \\<G>') = k'\""], ["proof (prove)\nusing this:\n  threshold \\<phi> w \\<G>' = Some k\n  threshold \\<phi> (suffix i w) \\<G>' = Some k'\n\ngoal (1 subgoal):\n 1. the (threshold \\<phi> w \\<G>') = k &&&\n    the (threshold \\<phi> (suffix i w) \\<G>') = k'", "by simp+"], ["proof (state)\nthis:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "moreover"], ["proof (state)\nthis:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "hence \"k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\""], ["proof (prove)\nusing this:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n\ngoal (1 subgoal):\n 1. k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>", "using \\<open>S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\\<close>"], ["proof (prove)\nusing this:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n  S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\n\ngoal (1 subgoal):\n 1. k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>", "unfolding \\<F>_def And_semantics And_prop_entailment"], ["proof (prove)\nusing this:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n  Ball\n   (set (map (\\<lambda>ia. af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n          [the (threshold \\<phi> w \\<G>')..<Suc (i + j)]))\n   ((\\<Turnstile>\\<^sub>P) S)\n\ngoal (1 subgoal):\n 1. k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>", "by (simp add: subsequence_def)"], ["proof (state)\nthis:\n  k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "moreover"], ["proof (state)\nthis:\n  k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "have \"k' \\<le> j \\<Longrightarrow> k \\<le> i + j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k' \\<le> j \\<Longrightarrow> k \\<le> i + j", "using k_def k'_def threshold_suffix"], ["proof (prove)\nusing this:\n  threshold \\<phi> w \\<G>' = Some k\n  threshold \\<phi> (suffix i w) \\<G>' = Some k'\n  \\<lbrakk>threshold ?\\<phi> ?w ?\\<G> = Some ?k;\n   threshold ?\\<phi> (suffix ?i ?w) ?\\<G> = Some ?k'\\<rbrakk>\n  \\<Longrightarrow> ?k \\<le> ?k' + ?i\n\ngoal (1 subgoal):\n 1. k' \\<le> j \\<Longrightarrow> k \\<le> i + j", "by fastforce"], ["proof (state)\nthis:\n  k' \\<le> j \\<Longrightarrow> k \\<le> i + j\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "ultimately"], ["proof (chain)\npicking this:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n  k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\n  k' \\<le> j \\<Longrightarrow> k \\<le> i + j", "have \"the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\""], ["proof (prove)\nusing this:\n  the (threshold \\<phi> w \\<G>') = k\n  the (threshold \\<phi> (suffix i w) \\<G>') = k'\n  k \\<le> i + j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\n  k' \\<le> j \\<Longrightarrow> k \\<le> i + j\n\ngoal (1 subgoal):\n 1. the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow>\n    S \\<Turnstile>\\<^sub>P \\<phi>", "by blast"], ["proof (state)\nthis:\n  the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "moreover"], ["proof (state)\nthis:\n  the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "{"], ["proof (state)\nthis:\n  the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "fix pos"], ["proof (state)\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "assume \"k' \\<le> pos\" and \"pos \\<le> j\""], ["proof (state)\nthis:\n  k' \\<le> pos\n  pos \\<le> j\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "have \"k \\<le> i + pos\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k \\<le> i + pos", "by (metis threshold_suffix k_def k'_def \\<open>k' \\<le> pos\\<close> add.commute add_le_cancel_right order.trans)"], ["proof (state)\nthis:\n  k \\<le> i + pos\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "hence \"(i + pos) \\<in> set [k..<Suc (i + j)]\""], ["proof (prove)\nusing this:\n  k \\<le> i + pos\n\ngoal (1 subgoal):\n 1. i + pos \\<in> set [k..<Suc (i + j)]", "using \\<open>pos \\<le> j\\<close>"], ["proof (prove)\nusing this:\n  k \\<le> i + pos\n  pos \\<le> j\n\ngoal (1 subgoal):\n 1. i + pos \\<in> set [k..<Suc (i + j)]", "by auto"], ["proof (state)\nthis:\n  i + pos \\<in> set [k..<Suc (i + j)]\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "hence \"af\\<^sub>G \\<phi> ((suffix i w) [pos \\<rightarrow> j]) \\<in> set (map (\\<lambda>ia. af\\<^sub>G \\<phi> (subsequence w ia (i + j))) [k..<Suc (i + j)])\""], ["proof (prove)\nusing this:\n  i + pos \\<in> set [k..<Suc (i + j)]\n\ngoal (1 subgoal):\n 1. af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])\n    \\<in> set (map (\\<lambda>ia.\n                       af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n                [k..<Suc (i + j)])", "unfolding subsequence_shift set_map"], ["proof (prove)\nusing this:\n  i + pos \\<in> set [k..<Suc (i + j)]\n\ngoal (1 subgoal):\n 1. af\\<^sub>G \\<phi> (w [i + pos \\<rightarrow> i + j])\n    \\<in> (\\<lambda>ia. af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j])) `\n          set [k..<Suc (i + j)]", "by blast"], ["proof (state)\nthis:\n  af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])\n  \\<in> set (map (\\<lambda>ia.\n                     af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n              [k..<Suc (i + j)])\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "hence \"S \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> ((suffix i w) [pos \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])\n  \\<in> set (map (\\<lambda>ia.\n                     af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n              [k..<Suc (i + j)])\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])", "using assms(2)"], ["proof (prove)\nusing this:\n  af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])\n  \\<in> set (map (\\<lambda>ia.\n                     af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n              [k..<Suc (i + j)])\n  S \\<Turnstile>\\<^sub>P \\<F> \\<phi> w \\<G>' (i + j)\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])", "unfolding \\<F>_def And_prop_entailment k_def_2"], ["proof (prove)\nusing this:\n  af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])\n  \\<in> set (map (\\<lambda>ia.\n                     af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n              [k..<Suc (i + j)])\n  Ball\n   (set (map (\\<lambda>ia. af\\<^sub>G \\<phi> (w [ia \\<rightarrow> i + j]))\n          [k..<Suc (i + j)]))\n   ((\\<Turnstile>\\<^sub>P) S)\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])", "by (cases \"k \\<le> i + j\") auto"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (suffix i w [pos \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "}"], ["proof (state)\nthis:\n  \\<lbrakk>k' \\<le> ?pos2; ?pos2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G \\<phi> (suffix i w [?pos2 \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "ultimately"], ["proof (chain)\npicking this:\n  the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>\n  \\<lbrakk>k' \\<le> ?pos2; ?pos2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G \\<phi> (suffix i w [?pos2 \\<rightarrow> j])", "show ?thesis"], ["proof (prove)\nusing this:\n  the (threshold \\<phi> (suffix i w) \\<G>') \\<le> j \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>\n  \\<lbrakk>k' \\<le> ?pos2; ?pos2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G \\<phi> (suffix i w [?pos2 \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j", "unfolding \\<F>_def And_prop_entailment k'_def_2"], ["proof (prove)\nusing this:\n  k' \\<le> j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>\n  \\<lbrakk>k' \\<le> ?pos2; ?pos2 \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    af\\<^sub>G \\<phi> (suffix i w [?pos2 \\<rightarrow> j])\n\ngoal (1 subgoal):\n 1. Ball\n     (set (map (\\<lambda>ia.\n                   af\\<^sub>G \\<phi> (suffix i w [ia \\<rightarrow> j]))\n            [k'..<Suc j]))\n     ((\\<Turnstile>\\<^sub>P) S)", "by auto"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P \\<F> \\<phi> (suffix i w) \\<G>' j\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Main Results\\<close>"], ["", "definition accept\\<^sub>M\nwhere\n  \"accept\\<^sub>M \\<phi> \\<G> w \\<equiv> (\\<forall>\\<^sub>\\<infinity>j. \\<forall>S. (\\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> S \\<Turnstile>\\<^sub>P G \\<psi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)) \\<longrightarrow> S \\<Turnstile>\\<^sub>P af \\<phi> (w [0 \\<rightarrow> j]))\""], ["", "lemma lemmaD:\n  assumes \"w \\<Turnstile> \\<phi>\"\n  assumes \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow> threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\"\n  shows \"accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "obtain i where \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> i])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ltl_implies_provable[OF \\<open>w \\<Turnstile> \\<phi>\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>j.\n     \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n     af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n        af\\<^sub>G \\<phi> (prefix i w) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix i w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "{"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix i w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "fix S j"], ["proof (state)\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "assume assm1: \"j \\<ge> i\""], ["proof (state)\nthis:\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "assume assm2: \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow> S \\<Turnstile>\\<^sub>P G \\<psi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\""], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "moreover"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "{"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "have \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> j])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix j w)", "using \\<open>\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P af\\<^sub>G \\<phi> (w [0 \\<rightarrow> i])\\<close> \\<open>j \\<ge> i\\<close>"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix i w)\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n    af\\<^sub>G \\<phi> (prefix j w)", "by (metis af\\<^sub>G_sat_core_generalized \\<G>\\<^sub>F\\<^sub>G_Only_G)"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "moreover"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "have \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S", "using assm2"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S", "unfolding \\<G>\\<^sub>F\\<^sub>G_alt_def"], ["proof (prove)\nusing this:\n  G ?\\<psi>\n  \\<in> {G \\<psi> |\\<psi>.\n         G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and>\n         w \\<Turnstile> F G \\<psi>} \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G\n   {G \\<psi> |\\<psi>.\n    G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}\n   (\\<F> ?\\<psi> w\n     {G \\<psi> |\\<psi>.\n      G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}\n     j)\n\ngoal (1 subgoal):\n 1. {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}\n    \\<subseteq> S", "by auto"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "ultimately"], ["proof (chain)\npicking this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S", "have \"S \\<Turnstile>\\<^sub>P eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) (af\\<^sub>G \\<phi> (w [0 \\<rightarrow> j]))\""], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n     (af\\<^sub>G \\<phi> (prefix j w))", "using eval\\<^sub>G_prop_entailment"], ["proof (prove)\nusing this:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Turnstile>\\<^sub>P\n  af\\<^sub>G \\<phi> (prefix j w)\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> S\n  ?S \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<phi> =\n  ?S \\<Turnstile>\\<^sub>P ?\\<phi>\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n     (af\\<^sub>G \\<phi> (prefix j w))", "by blast"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "}"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "moreover"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "{"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "fix \\<psi>"], ["proof (state)\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "assume \"G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w\""], ["proof (state)\nthis:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "hence \"the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)) = 0\" and \"S \\<Turnstile>\\<^sub>P eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\""], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w\n\ngoal (1 subgoal):\n 1. the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)) = 0 &&&\n    S \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n     (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)", "using assms assm2 option.sel"], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w\n  w \\<Turnstile> \\<phi>\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  threshold ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n  the (Some ?x2.0) = ?x2.0\n\ngoal (1 subgoal):\n 1. the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)) = 0 &&&\n    S \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n     (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)", "by metis+"], ["proof (state)\nthis:\n  the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)) = 0\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "hence \"\\<And>i. i \\<le> j \\<Longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) (af\\<^sub>G \\<psi> (w[i \\<rightarrow> j]))\""], ["proof (prove)\nusing this:\n  the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)) = 0\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<le> j \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n        (af\\<^sub>G \\<psi> (w [i \\<rightarrow> j]))", "unfolding \\<F>_def And_prop_entailment eval\\<^sub>G_And_map"], ["proof (prove)\nusing this:\n  the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)) = 0\n  Ball\n   (set (map (eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w))\n          (map (\\<lambda>i. af\\<^sub>G \\<psi> (w [i \\<rightarrow> j]))\n            [the (threshold \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w))..<\n             Suc j])))\n   ((\\<Turnstile>\\<^sub>P) S)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i \\<le> j \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n        (af\\<^sub>G \\<psi> (w [i \\<rightarrow> j]))", "by auto"], ["proof (state)\nthis:\n  ?i \\<le> j \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<psi> (w [?i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "}"], ["proof (state)\nthis:\n  \\<lbrakk>G ?\\<psi>3 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w;\n   ?i \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                     (af\\<^sub>G ?\\<psi>3 (w [?i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "ultimately"], ["proof (chain)\npicking this:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n  \\<lbrakk>G ?\\<psi>3 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w;\n   ?i \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                     (af\\<^sub>G ?\\<psi>3 (w [?i \\<rightarrow> j]))", "have \"S \\<Turnstile>\\<^sub>P af \\<phi> (w [0 \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n  \\<lbrakk>G ?\\<psi>3 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w;\n   ?i \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                     (af\\<^sub>G ?\\<psi>3 (w [?i \\<rightarrow> j]))\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P af \\<phi> (prefix j w)", "using af\\<^sub>G_implies_af_eval\\<^sub>G[of _ _ \\<phi>]"], ["proof (prove)\nusing this:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P G ?\\<psi> \\<and>\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (\\<F> ?\\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) j)\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n   (af\\<^sub>G \\<phi> (prefix j w))\n  \\<lbrakk>G ?\\<psi>3 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w;\n   ?i \\<le> j\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                     (af\\<^sub>G ?\\<psi>3 (w [?i \\<rightarrow> j]))\n  \\<lbrakk>?S \\<Turnstile>\\<^sub>P\n           eval\\<^sub>G ?\\<G> (af\\<^sub>G \\<phi> (prefix ?j ?w));\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> ?\\<G> \\<Longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi>;\n   \\<And>\\<psi> i.\n      \\<lbrakk>G \\<psi> \\<in> ?\\<G>; i \\<le> ?j\\<rbrakk>\n      \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P\n                        eval\\<^sub>G ?\\<G>\n                         (af\\<^sub>G \\<psi>\n                           (?w [i \\<rightarrow> ?j]))\\<rbrakk>\n  \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P af \\<phi> (prefix ?j ?w)\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P af \\<phi> (prefix j w)", "by presburger"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P af \\<phi> (prefix j w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "}"], ["proof (state)\nthis:\n  \\<lbrakk>i \\<le> ?j2;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n      ?S2 \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S2 \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n       (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) ?j2)\\<rbrakk>\n  \\<Longrightarrow> ?S2 \\<Turnstile>\\<^sub>P af \\<phi> (prefix ?j2 w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>i \\<le> ?j2;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n      ?S2 \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S2 \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n       (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) ?j2)\\<rbrakk>\n  \\<Longrightarrow> ?S2 \\<Turnstile>\\<^sub>P af \\<phi> (prefix ?j2 w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "unfolding accept\\<^sub>M_def MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<lbrakk>i \\<le> ?j2;\n   \\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n      ?S2 \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S2 \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n       (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) ?j2)\\<rbrakk>\n  \\<Longrightarrow> ?S2 \\<Turnstile>\\<^sub>P af \\<phi> (prefix ?j2 w)\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       \\<forall>n\\<ge>m.\n          \\<forall>S.\n             (\\<forall>\\<psi>.\n                 G \\<psi>\n                 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<longrightarrow>\n                 S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                 S \\<Turnstile>\\<^sub>P\n                 eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                  (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                    n)) \\<longrightarrow>\n             S \\<Turnstile>\\<^sub>P af \\<phi> (prefix n w)", "by meson"], ["proof (state)\nthis:\n  accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem ltl_FG_logical_characterization:\n  \"w \\<Turnstile> F G \\<phi> \\<longleftrightarrow> (\\<exists>\\<G> \\<subseteq> \\<^bold>G (F G \\<phi>). G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w)\"\n  (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> F G \\<phi> =\n    (\\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n        G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. w \\<Turnstile> F G \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> F G \\<phi>", "assume ?lhs"], ["proof (state)\nthis:\n  w \\<Turnstile> F G \\<phi>\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> F G \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> F G \\<phi>", "hence \"G \\<phi> \\<in> \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w\" and \"\\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w \\<subseteq> \\<^bold>G (F G \\<phi>)\""], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<phi>\n\ngoal (1 subgoal):\n 1. G \\<phi> \\<in> \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w &&&\n    \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w \\<subseteq> \\<^bold>G (F G \\<phi>)", "unfolding \\<G>\\<^sub>F\\<^sub>G_alt_def"], ["proof (prove)\nusing this:\n  w \\<Turnstile> F G \\<phi>\n\ngoal (1 subgoal):\n 1. G \\<phi>\n    \\<in> {G \\<psi> |\\<psi>.\n           G \\<psi> \\<in> \\<^bold>G (F G \\<phi>) \\<and>\n           w \\<Turnstile> F G \\<psi>} &&&\n    {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G (F G \\<phi>) \\<and> w \\<Turnstile> F G \\<psi>}\n    \\<subseteq> \\<^bold>G (F G \\<phi>)", "by auto"], ["proof (state)\nthis:\n  G \\<phi> \\<in> \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w\n  \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w \\<subseteq> \\<^bold>G (F G \\<phi>)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> F G \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> F G \\<phi>", "thus ?rhs"], ["proof (prove)\nusing this:\n  G \\<phi> \\<in> \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w\n  \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w \\<subseteq> \\<^bold>G (F G \\<phi>)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w", "using closed_\\<G>\\<^sub>F\\<^sub>G"], ["proof (prove)\nusing this:\n  G \\<phi> \\<in> \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w\n  \\<G>\\<^sub>F\\<^sub>G (F G \\<phi>) w \\<subseteq> \\<^bold>G (F G \\<phi>)\n  closed (\\<G>\\<^sub>F\\<^sub>G ?\\<phi> ?w) ?w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w", "by metis"], ["proof (state)\nthis:\n  \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n     G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G (F G \\<phi>).\n       G \\<phi> \\<in> \\<G> \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> F G \\<phi>", "qed (blast intro: closed_FG)"], ["", "theorem ltl_logical_characterization:\n  \"w \\<Turnstile> \\<phi> \\<longleftrightarrow> (\\<exists>\\<G> \\<subseteq> \\<^bold>G \\<phi>. accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w)\"\n  (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi> =\n    (\\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n        accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "assume ?lhs"], ["proof (state)\nthis:\n  w \\<Turnstile> \\<phi>\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "obtain k where k_def: \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow> threshold \\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k.\n        (\\<And>\\<psi>.\n            G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n            threshold \\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) =\n            Some 0) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using threshold_closed[OF closed_\\<G>\\<^sub>F\\<^sub>G]"], ["proof (prove)\nusing this:\n  \\<exists>k.\n     \\<forall>\\<psi>.\n        G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w \\<longrightarrow>\n        threshold \\<psi> (suffix k ?w) (\\<G>\\<^sub>F\\<^sub>G ?\\<phi>1 ?w) =\n        Some 0\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        (\\<And>\\<psi>.\n            G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n            threshold \\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) =\n            Some 0) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  threshold ?\\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "(* Define new constants *)"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  threshold ?\\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "define w' where \"w' = suffix k w\""], ["proof (state)\nthis:\n  w' = suffix k w\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "define \\<phi>' where \"\\<phi>' = af \\<phi> (w[0 \\<rightarrow> k])\""], ["proof (state)\nthis:\n  \\<phi>' = af \\<phi> (prefix k w)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "(* Facts about w' and \\<phi>' *)"], ["proof (state)\nthis:\n  \\<phi>' = af \\<phi> (prefix k w)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "from \\<open>?lhs\\<close>"], ["proof (chain)\npicking this:\n  w \\<Turnstile> \\<phi>", "have \"w' \\<Turnstile> \\<phi>'\""], ["proof (prove)\nusing this:\n  w \\<Turnstile> \\<phi>\n\ngoal (1 subgoal):\n 1. w' \\<Turnstile> \\<phi>'", "unfolding af_ltl_continuation_suffix[of w \\<phi> k] w'_def \\<phi>'_def"], ["proof (prove)\nusing this:\n  suffix k w \\<Turnstile> af \\<phi> (prefix k w)\n\ngoal (1 subgoal):\n 1. suffix k w \\<Turnstile> af \\<phi> (prefix k w)", "."], ["proof (state)\nthis:\n  w' \\<Turnstile> \\<phi>'\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have G_eq: \"\\<^bold>G \\<phi>' = \\<^bold>G \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<^bold>G \\<phi>' = \\<^bold>G \\<phi>", "unfolding \\<phi>'_def G_af_simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<^bold>G \\<phi> = \\<^bold>G \\<phi>", ".."], ["proof (state)\nthis:\n  \\<^bold>G \\<phi>' = \\<^bold>G \\<phi>\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \\<G>_eq: \"\\<G>\\<^sub>F\\<^sub>G \\<phi>' w' = \\<G>\\<^sub>F\\<^sub>G \\<phi> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' = \\<G>\\<^sub>F\\<^sub>G \\<phi> w", "unfolding \\<G>\\<^sub>F\\<^sub>G_alt_def w'_def \\<phi>'_def G_af_simp LTL_FG_suffix"], ["proof (prove)\ngoal (1 subgoal):\n 1. {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>} =\n    {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}", ".."], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' = \\<G>\\<^sub>F\\<^sub>G \\<phi> w\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \\<phi>'_eq: \"\\<And>j. af \\<phi>' (w' [0 \\<rightarrow>j]) = af \\<phi> (w [0 \\<rightarrow> k + j])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j. af \\<phi>' (prefix j w') = af \\<phi> (prefix (k + j) w)", "unfolding \\<phi>'_def w'_def foldl_append[symmetric] subsequence_shift"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j.\n       af \\<phi> (prefix k w @ w [k + 0 \\<rightarrow> k + j]) =\n       af \\<phi> (prefix (k + j) w)", "unfolding Nat.add_0_right"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j.\n       af \\<phi> (prefix k w @ w [k \\<rightarrow> k + j]) =\n       af \\<phi> (prefix (k + j) w)", "by (metis subsequence_append)"], ["proof (state)\nthis:\n  af \\<phi>' (prefix ?j w') = af \\<phi> (prefix (k + ?j) w)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "(* Apply helper lemma *)"], ["proof (state)\nthis:\n  af \\<phi>' (prefix ?j w') = af \\<phi> (prefix (k + ?j) w)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \"accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'", "using lemmaD[OF \\<open>w' \\<Turnstile> \\<phi>'\\<close>] k_def"], ["proof (prove)\nusing this:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<Longrightarrow>\n      threshold \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') =\n      Some 0) \\<Longrightarrow>\n  accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  threshold ?\\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'", "unfolding \\<G>_eq w'_def[symmetric]"], ["proof (prove)\nusing this:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n      threshold \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) =\n      Some 0) \\<Longrightarrow>\n  accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w'\n  G ?\\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<Longrightarrow>\n  threshold ?\\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) = Some 0\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w'", "by blast"], ["proof (state)\nthis:\n  accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "then"], ["proof (chain)\npicking this:\n  accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'", "obtain j' where j'_def: \"\\<And>j S. j \\<ge> j' \\<Longrightarrow> \n    (\\<forall>\\<psi>. G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow> S \\<Turnstile>\\<^sub>P G \\<psi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') j)) \\<Longrightarrow> S \\<Turnstile>\\<^sub>P af \\<phi>' (w' [0 \\<rightarrow> j])\""], ["proof (prove)\nusing this:\n  accept\\<^sub>M \\<phi>' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w'\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        (\\<And>j S.\n            \\<lbrakk>j' \\<le> j;\n             \\<forall>\\<psi>.\n                G \\<psi>\n                \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                 (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                   j)\\<rbrakk>\n            \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                              af \\<phi>' (prefix j w')) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding accept\\<^sub>M_def MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<forall>S.\n           (\\<forall>\\<psi>.\n               G \\<psi>\n               \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n               S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n               S \\<Turnstile>\\<^sub>P\n               eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                  n)) \\<longrightarrow>\n           S \\<Turnstile>\\<^sub>P af \\<phi>' (prefix n w')\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        (\\<And>j S.\n            \\<lbrakk>j' \\<le> j;\n             \\<forall>\\<psi>.\n                G \\<psi>\n                \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                 (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                   j)\\<rbrakk>\n            \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                              af \\<phi>' (prefix j w')) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>j' \\<le> ?j;\n   \\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n       (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') ?j)\\<rbrakk>\n  \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P af \\<phi>' (prefix ?j w')\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "(* Change formula, s.t. it matches ?lhs *)"], ["proof (state)\nthis:\n  \\<lbrakk>j' \\<le> ?j;\n   \\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n       (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') ?j)\\<rbrakk>\n  \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P af \\<phi>' (prefix ?j w')\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>j' \\<le> ?j;\n   \\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n       (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') ?j)\\<rbrakk>\n  \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P af \\<phi>' (prefix ?j w')\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "fix j S"], ["proof (state)\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "let ?af = \"af \\<phi> (w[0 \\<rightarrow> k + j' + j])\""], ["proof (state)\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "assume \"(\\<forall>\\<psi>. G \\<psi> \\<in> (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') \\<longrightarrow> S \\<Turnstile>\\<^sub>P G \\<psi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j)))\""], ["proof (state)\nthis:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "{"], ["proof (state)\nthis:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "fix \\<psi>"], ["proof (state)\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "assume \"G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w'\" (is \"_ \\<in> ?\\<G>\")"], ["proof (state)\nthis:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w'\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "hence \"\\<PP>\\<^sub>\\<infinity> \\<psi> ?\\<G> w\""], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w'\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w", "unfolding \\<G>_eq"], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "using closed_\\<G>\\<^sub>F\\<^sub>G"], ["proof (prove)\nusing this:\n  G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w\n  closed (\\<G>\\<^sub>F\\<^sub>G ?\\<phi> ?w) ?w\n\ngoal (1 subgoal):\n 1. \\<PP>\\<^sub>\\<infinity> \\<psi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "by blast"], ["proof (state)\nthis:\n  \\<PP>\\<^sub>\\<infinity> \\<psi> (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \"\\<And>S. S \\<Turnstile>\\<^sub>P eval\\<^sub>G ?\\<G> (\\<F> \\<psi> w ?\\<G> (k + j' + j)) \\<Longrightarrow> S \\<Turnstile>\\<^sub>P eval\\<^sub>G ?\\<G> (\\<F> \\<psi> w' ?\\<G> (j' + j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>S.\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n        (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n          (k + j' + j)) \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n        (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))", "using \\<F>_drop[OF \\<open>\\<PP>\\<^sub>\\<infinity> \\<psi> (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') w\\<close>, of _ k \"j' + j\"] eval\\<^sub>G_respectfulness(1)[unfolded ltl_prop_implies_def]"], ["proof (prove)\nusing this:\n  ?S \\<Turnstile>\\<^sub>P\n  \\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (k + (j' + j)) \\<Longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P\n  \\<F> \\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j)\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P ?\\<phi> \\<longrightarrow>\n     \\<A> \\<Turnstile>\\<^sub>P ?\\<psi> \\<Longrightarrow>\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<phi> \\<longrightarrow>\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>S.\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n        (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n          (k + j' + j)) \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n        (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))", "unfolding add.assoc w'_def"], ["proof (prove)\nusing this:\n  ?S \\<Turnstile>\\<^sub>P\n  \\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' (suffix k w))\n   (k + (j' + j)) \\<Longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P\n  \\<F> \\<psi> (suffix k w) (\\<G>\\<^sub>F\\<^sub>G \\<phi>' (suffix k w))\n   (j' + j)\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P ?\\<phi> \\<longrightarrow>\n     \\<A> \\<Turnstile>\\<^sub>P ?\\<psi> \\<Longrightarrow>\n  \\<forall>\\<A>.\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<phi> \\<longrightarrow>\n     \\<A> \\<Turnstile>\\<^sub>P eval\\<^sub>G ?S ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>S.\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' (suffix k w))\n        (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' (suffix k w))\n          (k + (j' + j))) \\<Longrightarrow>\n       S \\<Turnstile>\\<^sub>P\n       eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' (suffix k w))\n        (\\<F> \\<psi> (suffix k w)\n          (\\<G>\\<^sub>F\\<^sub>G \\<phi>' (suffix k w)) (j' + j))", "by metis"], ["proof (state)\nthis:\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n     (k + j' + j)) \\<Longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "moreover"], ["proof (state)\nthis:\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n     (k + j' + j)) \\<Longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "assume \"S \\<Turnstile>\\<^sub>P eval\\<^sub>G ?\\<G> (\\<F> \\<psi> w ?\\<G> (k + j' + j))\""], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "ultimately"], ["proof (chain)\npicking this:\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n     (k + j' + j)) \\<Longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))", "have \"S \\<Turnstile>\\<^sub>P eval\\<^sub>G ?\\<G> (\\<F> \\<psi> w' ?\\<G> (j' + j))\""], ["proof (prove)\nusing this:\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n     (k + j' + j)) \\<Longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P\n    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n     (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))", "by simp"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P\n  eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n   (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>G ?\\<psi>2 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w';\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n    (\\<F> ?\\<psi>2 w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (k + j' + j))\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                     (\\<F> ?\\<psi>2 w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                       (j' + j))\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n  \\<lbrakk>G ?\\<psi>2 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w';\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n    (\\<F> ?\\<psi>2 w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (k + j' + j))\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                     (\\<F> ?\\<psi>2 w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                       (j' + j))", "have \"S \\<Turnstile>\\<^sub>P ?af\""], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n  \\<lbrakk>G ?\\<psi>2 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w';\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n    (\\<F> ?\\<psi>2 w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (k + j' + j))\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                     (\\<F> ?\\<psi>2 w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                       (j' + j))\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + j' + j) w)", "using j'_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + j' + j))\n  \\<lbrakk>G ?\\<psi>2 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w';\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n    (\\<F> ?\\<psi>2 w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (k + j' + j))\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                     (\\<F> ?\\<psi>2 w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                       (j' + j))\n  \\<lbrakk>j' \\<le> ?j;\n   \\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n       (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') ?j)\\<rbrakk>\n  \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P af \\<phi>' (prefix ?j w')\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + j' + j) w)", "unfolding \\<phi>'_eq add.assoc"], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     S \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') (k + (j' + j)))\n  \\<lbrakk>G ?\\<psi>2 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w';\n   S \\<Turnstile>\\<^sub>P\n   eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n    (\\<F> ?\\<psi>2 w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (k + (j' + j)))\\<rbrakk>\n  \\<Longrightarrow> S \\<Turnstile>\\<^sub>P\n                    eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                     (\\<F> ?\\<psi>2 w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n                       (j' + j))\n  \\<lbrakk>j' \\<le> ?j;\n   \\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n       (\\<F> \\<psi> w' (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w') ?j)\\<rbrakk>\n  \\<Longrightarrow> ?S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + ?j) w)\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + (j' + j)) w)", "by simp"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + j' + j) w)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "}"], ["proof (state)\nthis:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     ?S2 \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     ?S2 \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n        (k + j' + ?j2)) \\<Longrightarrow>\n  ?S2 \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + j' + ?j2) w)\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "hence \"accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\""], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi>' w' \\<longrightarrow>\n     ?S2 \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     ?S2 \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi>' w')\n        (k + j' + ?j2)) \\<Longrightarrow>\n  ?S2 \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + j' + ?j2) w)\n\ngoal (1 subgoal):\n 1. accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w", "unfolding accept\\<^sub>M_def MOST_nat_le \\<G>_eq"], ["proof (prove)\nusing this:\n  \\<forall>\\<psi>.\n     G \\<psi> \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<longrightarrow>\n     ?S2 \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n     ?S2 \\<Turnstile>\\<^sub>P\n     eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n      (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n        (k + j' + ?j2)) \\<Longrightarrow>\n  ?S2 \\<Turnstile>\\<^sub>P af \\<phi> (prefix (k + j' + ?j2) w)\n\ngoal (1 subgoal):\n 1. \\<exists>m.\n       \\<forall>n\\<ge>m.\n          \\<forall>S.\n             (\\<forall>\\<psi>.\n                 G \\<psi>\n                 \\<in> \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<longrightarrow>\n                 S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                 S \\<Turnstile>\\<^sub>P\n                 eval\\<^sub>G (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                  (\\<F> \\<psi> w (\\<G>\\<^sub>F\\<^sub>G \\<phi> w)\n                    n)) \\<longrightarrow>\n             S \\<Turnstile>\\<^sub>P af \\<phi> (prefix n w)", "by (metis le_Suc_ex)"], ["proof (state)\nthis:\n  accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "moreover"], ["proof (state)\nthis:\n  accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \"\\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> \\<^bold>G \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> \\<^bold>G \\<phi>", "unfolding \\<G>\\<^sub>F\\<^sub>G_alt_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {G \\<psi> |\\<psi>.\n     G \\<psi> \\<in> \\<^bold>G \\<phi> \\<and> w \\<Turnstile> F G \\<psi>}\n    \\<subseteq> \\<^bold>G \\<phi>", "by auto"], ["proof (state)\nthis:\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (2 subgoals):\n 1. w \\<Turnstile> \\<phi> \\<Longrightarrow>\n    \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n 2. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "ultimately"], ["proof (chain)\npicking this:\n  accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> \\<^bold>G \\<phi>", "show ?rhs"], ["proof (prove)\nusing this:\n  accept\\<^sub>M \\<phi> (\\<G>\\<^sub>F\\<^sub>G \\<phi> w) w\n  \\<G>\\<^sub>F\\<^sub>G \\<phi> w \\<subseteq> \\<^bold>G \\<phi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w", "by (metis closed_\\<G>\\<^sub>F\\<^sub>G)"], ["proof (state)\nthis:\n  \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n     accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "assume ?rhs"], ["proof (state)\nthis:\n  \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n     accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "then"], ["proof (chain)\npicking this:\n  \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n     accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w", "obtain \\<G> where \\<G>_prop: \"\\<G> \\<subseteq> \\<^bold>G \\<phi>\" \"finite \\<G>\" \"Only_G \\<G>\" \"accept\\<^sub>M \\<phi> \\<G> w\" \"closed \\<G> w\""], ["proof (prove)\nusing this:\n  \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n     accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n\ngoal (1 subgoal):\n 1. (\\<And>\\<G>.\n        \\<lbrakk>\\<G> \\<subseteq> \\<^bold>G \\<phi>; finite \\<G>;\n         Only_G \\<G>; accept\\<^sub>M \\<phi> \\<G> w; closed \\<G> w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<G>_elements \\<G>_finite"], ["proof (prove)\nusing this:\n  \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n     accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w\n  ?\\<G> \\<subseteq> \\<^bold>G ?\\<phi> \\<Longrightarrow> Only_G ?\\<G>\n  ?\\<G> \\<subseteq> \\<^bold>G ?\\<phi> \\<Longrightarrow> finite ?\\<G>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<G>.\n        \\<lbrakk>\\<G> \\<subseteq> \\<^bold>G \\<phi>; finite \\<G>;\n         Only_G \\<G>; accept\\<^sub>M \\<phi> \\<G> w; closed \\<G> w\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<G> \\<subseteq> \\<^bold>G \\<phi>\n  finite \\<G>\n  Only_G \\<G>\n  accept\\<^sub>M \\<phi> \\<G> w\n  closed \\<G> w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "then"], ["proof (chain)\npicking this:\n  \\<G> \\<subseteq> \\<^bold>G \\<phi>\n  finite \\<G>\n  Only_G \\<G>\n  accept\\<^sub>M \\<phi> \\<G> w\n  closed \\<G> w", "obtain i where \"\\<And>\\<chi> j. \\<chi> \\<in> \\<G> \\<Longrightarrow> suffix i w \\<Turnstile> \\<chi> = suffix (i + j) w \\<Turnstile> \\<chi>\""], ["proof (prove)\nusing this:\n  \\<G> \\<subseteq> \\<^bold>G \\<phi>\n  finite \\<G>\n  Only_G \\<G>\n  accept\\<^sub>M \\<phi> \\<G> w\n  closed \\<G> w\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (\\<And>\\<chi> j.\n            \\<chi> \\<in> \\<G> \\<Longrightarrow>\n            suffix i w \\<Turnstile> \\<chi> =\n            suffix (i + j) w \\<Turnstile> \\<chi>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ltl_G_stabilize"], ["proof (prove)\nusing this:\n  \\<G> \\<subseteq> \\<^bold>G \\<phi>\n  finite \\<G>\n  Only_G \\<G>\n  accept\\<^sub>M \\<phi> \\<G> w\n  closed \\<G> w\n  \\<lbrakk>finite ?\\<G>; Only_G ?\\<G>;\n   \\<And>i.\n      (\\<And>\\<chi> j.\n          \\<chi> \\<in> ?\\<G> \\<Longrightarrow>\n          suffix i ?w \\<Turnstile> \\<chi> =\n          suffix (i + j) ?w \\<Turnstile> \\<chi>) \\<Longrightarrow>\n      ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        (\\<And>\\<chi> j.\n            \\<chi> \\<in> \\<G> \\<Longrightarrow>\n            suffix i w \\<Turnstile> \\<chi> =\n            suffix (i + j) w \\<Turnstile> \\<chi>) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  ?\\<chi> \\<in> \\<G> \\<Longrightarrow>\n  suffix i w \\<Turnstile> ?\\<chi> = suffix (i + ?j) w \\<Turnstile> ?\\<chi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "hence i_def: \"\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> suffix i w \\<Turnstile> G \\<psi>\""], ["proof (prove)\nusing this:\n  ?\\<chi> \\<in> \\<G> \\<Longrightarrow>\n  suffix i w \\<Turnstile> ?\\<chi> = suffix (i + ?j) w \\<Turnstile> ?\\<chi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix i w \\<Turnstile> G \\<psi>", "using ltl_G_stabilize_property[OF \\<open>finite \\<G>\\<close> \\<open>Only_G \\<G>\\<close>] \\<G>_prop closed_FG[of \\<G>]"], ["proof (prove)\nusing this:\n  ?\\<chi> \\<in> \\<G> \\<Longrightarrow>\n  suffix i w \\<Turnstile> ?\\<chi> = suffix (i + ?j) w \\<Turnstile> ?\\<chi>\n  \\<lbrakk>\\<And>\\<chi> j.\n              \\<chi> \\<in> \\<G> \\<Longrightarrow>\n              suffix ?i ?w \\<Turnstile> \\<chi> =\n              suffix (?i + j) ?w \\<Turnstile> \\<chi>;\n   G ?\\<psi> \\<in> \\<G> \\<inter> {\\<chi>. ?w \\<Turnstile> F \\<chi>}\\<rbrakk>\n  \\<Longrightarrow> suffix ?i ?w \\<Turnstile> G ?\\<psi>\n  \\<G> \\<subseteq> \\<^bold>G \\<phi>\n  finite \\<G>\n  Only_G \\<G>\n  accept\\<^sub>M \\<phi> \\<G> w\n  closed \\<G> w\n  \\<lbrakk>closed \\<G> ?w; G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> ?w \\<Turnstile> F G ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<And>\\<psi>.\n       G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n       suffix i w \\<Turnstile> G \\<psi>", "by blast"], ["proof (state)\nthis:\n  G ?\\<psi> \\<in> \\<G> \\<Longrightarrow> suffix i w \\<Turnstile> G ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "obtain j where j_def: \"\\<And>j' S. j' \\<ge> j \\<Longrightarrow> \n    (\\<forall>\\<psi>. G \\<psi> \\<in> \\<G> \\<longrightarrow> S \\<Turnstile>\\<^sub>P G \\<psi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j')) \\<longrightarrow> S \\<Turnstile>\\<^sub>P af \\<phi> (w [0 \\<rightarrow> j'])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j.\n        (\\<And>j' S.\n            j \\<le> j' \\<Longrightarrow>\n            (\\<forall>\\<psi>.\n                G \\<psi> \\<in> \\<G> \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j')) \\<longrightarrow>\n            S \\<Turnstile>\\<^sub>P\n            af \\<phi> (prefix j' w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>accept\\<^sub>M \\<phi> \\<G> w\\<close>"], ["proof (prove)\nusing this:\n  accept\\<^sub>M \\<phi> \\<G> w\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        (\\<And>j' S.\n            j \\<le> j' \\<Longrightarrow>\n            (\\<forall>\\<psi>.\n                G \\<psi> \\<in> \\<G> \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j')) \\<longrightarrow>\n            S \\<Turnstile>\\<^sub>P\n            af \\<phi> (prefix j' w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding accept\\<^sub>M_def MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<forall>S.\n           (\\<forall>\\<psi>.\n               G \\<psi> \\<in> \\<G> \\<longrightarrow>\n               S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n               S \\<Turnstile>\\<^sub>P\n               eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> n)) \\<longrightarrow>\n           S \\<Turnstile>\\<^sub>P af \\<phi> (prefix n w)\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        (\\<And>j' S.\n            j \\<le> j' \\<Longrightarrow>\n            (\\<forall>\\<psi>.\n                G \\<psi> \\<in> \\<G> \\<longrightarrow>\n                S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n                S \\<Turnstile>\\<^sub>P\n                eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j')) \\<longrightarrow>\n            S \\<Turnstile>\\<^sub>P\n            af \\<phi> (prefix j' w)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by presburger"], ["proof (state)\nthis:\n  j \\<le> ?j' \\<Longrightarrow>\n  (\\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<longrightarrow>\n      ?S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      ?S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> ?j')) \\<longrightarrow>\n  ?S \\<Turnstile>\\<^sub>P af \\<phi> (prefix ?j' w)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "obtain j' where lemma19: \"\\<And>j \\<psi>. j \\<ge> j' \\<Longrightarrow> G \\<psi> \\<in> \\<G> \\<Longrightarrow> suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        (\\<And>j \\<psi>.\n            \\<lbrakk>j' \\<le> j; G \\<psi> \\<in> \\<G>\\<rbrakk>\n            \\<Longrightarrow> suffix j w \\<Turnstile>\n                              eval\\<^sub>G \\<G>\n                               (\\<F> \\<psi> w \\<G> j)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using almost_all_suffixes_model_\\<F>_generalized[OF \\<open>closed \\<G> w\\<close>]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>\\<infinity>j.\n     \\<forall>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<longrightarrow>\n        suffix j w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> j)\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        (\\<And>j \\<psi>.\n            \\<lbrakk>j' \\<le> j; G \\<psi> \\<in> \\<G>\\<rbrakk>\n            \\<Longrightarrow> suffix j w \\<Turnstile>\n                              eval\\<^sub>G \\<G>\n                               (\\<F> \\<psi> w \\<G> j)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding MOST_nat_le"], ["proof (prove)\nusing this:\n  \\<exists>m.\n     \\<forall>n\\<ge>m.\n        \\<forall>\\<psi>.\n           G \\<psi> \\<in> \\<G> \\<longrightarrow>\n           suffix n w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> n)\n\ngoal (1 subgoal):\n 1. (\\<And>j'.\n        (\\<And>j \\<psi>.\n            \\<lbrakk>j' \\<le> j; G \\<psi> \\<in> \\<G>\\<rbrakk>\n            \\<Longrightarrow> suffix j w \\<Turnstile>\n                              eval\\<^sub>G \\<G>\n                               (\\<F> \\<psi> w \\<G> j)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>j' \\<le> ?j; G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> suffix ?j w \\<Turnstile>\n                    eval\\<^sub>G \\<G> (\\<F> ?\\<psi> w \\<G> ?j)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "(* Define new constants *)"], ["proof (state)\nthis:\n  \\<lbrakk>j' \\<le> ?j; G ?\\<psi> \\<in> \\<G>\\<rbrakk>\n  \\<Longrightarrow> suffix ?j w \\<Turnstile>\n                    eval\\<^sub>G \\<G> (\\<F> ?\\<psi> w \\<G> ?j)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "define k where \"k = max (max i j) j'\""], ["proof (state)\nthis:\n  k = max (max i j) j'\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "define w' where \"w' = suffix k w\""], ["proof (state)\nthis:\n  w' = suffix k w\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "define \\<phi>' where \"\\<phi>' = af \\<phi> (w[0 \\<rightarrow> k])\""], ["proof (state)\nthis:\n  \\<phi>' = af \\<phi> (prefix k w)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "define S where \"S = {\\<chi>. w' \\<Turnstile> \\<chi>}\""], ["proof (state)\nthis:\n  S = {\\<chi>. w' \\<Turnstile> \\<chi>}\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \"(\\<And>\\<psi>. G \\<psi> \\<in> \\<G> \\<Longrightarrow> S \\<Turnstile>\\<^sub>P G \\<psi> \\<and> S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow> S \\<Turnstile>\\<^sub>P \\<phi>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n    S \\<Turnstile>\\<^sub>P \\<phi>'", "using j_def[of k S]"], ["proof (prove)\nusing this:\n  j \\<le> k \\<Longrightarrow>\n  (\\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<longrightarrow>\n  S \\<Turnstile>\\<^sub>P af \\<phi> (prefix k w)\n\ngoal (1 subgoal):\n 1. (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n    S \\<Turnstile>\\<^sub>P \\<phi>'", "unfolding \\<phi>'_def k_def"], ["proof (prove)\nusing this:\n  j \\<le> max (max i j) j' \\<Longrightarrow>\n  (\\<forall>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G>\n       (\\<F> \\<psi> w \\<G> (max (max i j) j'))) \\<longrightarrow>\n  S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (max (max i j) j') w)\n\ngoal (1 subgoal):\n 1. (\\<And>\\<psi>.\n        G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n        S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n        S \\<Turnstile>\\<^sub>P\n        eval\\<^sub>G \\<G>\n         (\\<F> \\<psi> w \\<G> (max (max i j) j'))) \\<Longrightarrow>\n    S \\<Turnstile>\\<^sub>P af \\<phi> (prefix (max (max i j) j') w)", "by fastforce"], ["proof (state)\nthis:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "moreover"], ["proof (state)\nthis:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "{"], ["proof (state)\nthis:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "fix \\<psi>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "assume \"G \\<psi> \\<in> \\<G>\""], ["proof (state)\nthis:\n  G \\<psi> \\<in> \\<G>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \"\\<And>j. i \\<le> j \\<Longrightarrow> suffix i w \\<Turnstile> G \\<psi> \\<Longrightarrow> suffix j w \\<Turnstile> G \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j.\n       \\<lbrakk>i \\<le> j; suffix i w \\<Turnstile> G \\<psi>\\<rbrakk>\n       \\<Longrightarrow> suffix j w \\<Turnstile> G \\<psi>", "by (metis LTL_suffix_G le_Suc_ex suffix_suffix)"], ["proof (state)\nthis:\n  \\<lbrakk>i \\<le> ?j; suffix i w \\<Turnstile> G \\<psi>\\<rbrakk>\n  \\<Longrightarrow> suffix ?j w \\<Turnstile> G \\<psi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "hence \"w' \\<Turnstile> G \\<psi>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>i \\<le> ?j; suffix i w \\<Turnstile> G \\<psi>\\<rbrakk>\n  \\<Longrightarrow> suffix ?j w \\<Turnstile> G \\<psi>\n\ngoal (1 subgoal):\n 1. w' \\<Turnstile> G \\<psi>", "unfolding w'_def k_def max_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>i \\<le> ?j; suffix i w \\<Turnstile> G \\<psi>\\<rbrakk>\n  \\<Longrightarrow> suffix ?j w \\<Turnstile> G \\<psi>\n\ngoal (1 subgoal):\n 1. suffix\n     (if (if i \\<le> j then j else i) \\<le> j' then j'\n      else if i \\<le> j then j else i)\n     w \\<Turnstile>\n    G \\<psi>", "using i_def[OF \\<open>G \\<psi> \\<in> \\<G>\\<close>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>i \\<le> ?j; suffix i w \\<Turnstile> G \\<psi>\\<rbrakk>\n  \\<Longrightarrow> suffix ?j w \\<Turnstile> G \\<psi>\n  suffix i w \\<Turnstile> G \\<psi>\n\ngoal (1 subgoal):\n 1. suffix\n     (if (if i \\<le> j then j else i) \\<le> j' then j'\n      else if i \\<le> j then j else i)\n     w \\<Turnstile>\n    G \\<psi>", "by simp"], ["proof (state)\nthis:\n  w' \\<Turnstile> G \\<psi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "moreover"], ["proof (state)\nthis:\n  w' \\<Turnstile> G \\<psi>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "have \"w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)", "using lemma19[OF _ \\<open>G \\<psi> \\<in> \\<G>\\<close>, of k]"], ["proof (prove)\nusing this:\n  j' \\<le> k \\<Longrightarrow>\n  suffix k w \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\n\ngoal (1 subgoal):\n 1. w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)", "unfolding w'_def k_def"], ["proof (prove)\nusing this:\n  j' \\<le> max (max i j) j' \\<Longrightarrow>\n  suffix (max (max i j) j') w \\<Turnstile>\n  eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> (max (max i j) j'))\n\ngoal (1 subgoal):\n 1. suffix (max (max i j) j') w \\<Turnstile>\n    eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> (max (max i j) j'))", "by fastforce"], ["proof (state)\nthis:\n  w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "ultimately"], ["proof (chain)\npicking this:\n  w' \\<Turnstile> G \\<psi>\n  w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)", "have \"S \\<Turnstile>\\<^sub>P G \\<psi>\" and \"S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\""], ["proof (prove)\nusing this:\n  w' \\<Turnstile> G \\<psi>\n  w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P G \\<psi> &&&\n    S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)", "unfolding S_def ltl_models_equiv_prop_entailment[symmetric]"], ["proof (prove)\nusing this:\n  w' \\<Turnstile> G \\<psi>\n  w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\n\ngoal (1 subgoal):\n 1. w' \\<Turnstile> G \\<psi> &&&\n    w' \\<Turnstile> eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)", "by blast+"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P G \\<psi>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "}"], ["proof (state)\nthis:\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow> S \\<Turnstile>\\<^sub>P G ?\\<psi>2\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> ?\\<psi>2 w \\<G> k)\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "ultimately"], ["proof (chain)\npicking this:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow> S \\<Turnstile>\\<^sub>P G ?\\<psi>2\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> ?\\<psi>2 w \\<G> k)", "have \"S \\<Turnstile>\\<^sub>P \\<phi>'\""], ["proof (prove)\nusing this:\n  (\\<And>\\<psi>.\n      G \\<psi> \\<in> \\<G> \\<Longrightarrow>\n      S \\<Turnstile>\\<^sub>P G \\<psi> \\<and>\n      S \\<Turnstile>\\<^sub>P\n      eval\\<^sub>G \\<G> (\\<F> \\<psi> w \\<G> k)) \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow> S \\<Turnstile>\\<^sub>P G ?\\<psi>2\n  G ?\\<psi>2 \\<in> \\<G> \\<Longrightarrow>\n  S \\<Turnstile>\\<^sub>P eval\\<^sub>G \\<G> (\\<F> ?\\<psi>2 w \\<G> k)\n\ngoal (1 subgoal):\n 1. S \\<Turnstile>\\<^sub>P \\<phi>'", "by simp"], ["proof (state)\nthis:\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "hence \"w' \\<Turnstile> \\<phi>'\""], ["proof (prove)\nusing this:\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n\ngoal (1 subgoal):\n 1. w' \\<Turnstile> \\<phi>'", "using S_def ltl_models_equiv_prop_entailment"], ["proof (prove)\nusing this:\n  S \\<Turnstile>\\<^sub>P \\<phi>'\n  S = {\\<chi>. w' \\<Turnstile> \\<chi>}\n  ?w \\<Turnstile> ?\\<phi> =\n  {\\<chi>. ?w \\<Turnstile> \\<chi>} \\<Turnstile>\\<^sub>P ?\\<phi>\n\ngoal (1 subgoal):\n 1. w' \\<Turnstile> \\<phi>'", "by blast"], ["proof (state)\nthis:\n  w' \\<Turnstile> \\<phi>'\n\ngoal (1 subgoal):\n 1. \\<exists>\\<G>\\<subseteq>\\<^bold>G \\<phi>.\n       accept\\<^sub>M \\<phi> \\<G> w \\<and> closed \\<G> w \\<Longrightarrow>\n    w \\<Turnstile> \\<phi>", "thus ?lhs"], ["proof (prove)\nusing this:\n  w' \\<Turnstile> \\<phi>'\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi>", "using w'_def \\<phi>'_def af_ltl_continuation_suffix"], ["proof (prove)\nusing this:\n  w' \\<Turnstile> \\<phi>'\n  w' = suffix k w\n  \\<phi>' = af \\<phi> (prefix k w)\n  ?w \\<Turnstile> ?\\<phi> =\n  suffix ?i ?w \\<Turnstile> af ?\\<phi> (prefix ?i ?w)\n\ngoal (1 subgoal):\n 1. w \\<Turnstile> \\<phi>", "by blast"], ["proof (state)\nthis:\n  w \\<Turnstile> \\<phi>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}