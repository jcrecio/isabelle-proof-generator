{"file_name": "/home/qj213/afp-2021-10-22/thys/List_Update/Bit_Strings.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/List_Update", "problem_names": ["lemma bitstrings_finite: \"finite {xs::bool list. length xs = m}\"", "lemma fbool: \"finite {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> f (xs!e)}\"", "lemma witness_length: \"length (witness X n) = n\"", "lemma iswitness: \"r<n \\<Longrightarrow> ((witness X n)!r) = (r\\<in>X)\"", "lemma card1: \"finite S \\<Longrightarrow> finite X \\<Longrightarrow> finite Y \\<Longrightarrow> X \\<inter> Y = {} \\<Longrightarrow> S \\<inter> (X \\<union> Y) = {} \\<Longrightarrow> S\\<union>X\\<union>Y={0..<m} \\<Longrightarrow> \n    card {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i)  \\<and> length xs = m} = 2^(m - card X - card Y)\"", "lemma card2: assumes \"finite X\" and \"finite Y\" and \"X \\<inter> Y = {}\" and x: \"X \\<union> Y \\<subseteq> {0..<m}\"\n  shows \"card {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} = 2 ^ (m - card X - card Y)\"", "lemma Expactation2or1: \"finite S \\<Longrightarrow> finite Tr \\<Longrightarrow> finite Fa \\<Longrightarrow> card Tr + card Fa + card S \\<le> l \\<Longrightarrow>\n  S \\<inter> (Tr \\<union> Fa) = {} \\<Longrightarrow> Tr \\<inter> Fa = {} \\<Longrightarrow> S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l} \\<Longrightarrow>\n  (\\<Sum>x\\<in>{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}. \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n      = 3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa)\""], "translations": [["", "lemma bitstrings_finite: \"finite {xs::bool list. length xs = m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {xs. length xs = m}", "using finite_lists_length_eq[where A=\"UNIV\"]"], ["proof (prove)\nusing this:\n  finite UNIV \\<Longrightarrow>\n  finite {xs. set xs \\<subseteq> UNIV \\<and> length xs = ?n}\n\ngoal (1 subgoal):\n 1. finite {xs. length xs = m}", "by force"], ["", "subsection \"how to calculate the cardinality of the set of bitstrings with certain bits already set\""], ["", "lemma fbool: \"finite {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> f (xs!e)}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> f (xs ! e)}", "by(rule finite_subset[where B=\"{xs. length xs = m}\"])\n     (auto simp: bitstrings_finite)"], ["", "fun witness :: \"nat set \\<Rightarrow> nat \\<Rightarrow> bool list\" where\n \"witness X 0 = []\"\n|\"witness X (Suc n) = (witness X n) @ [n \\<in> X]\""], ["", "lemma witness_length: \"length (witness X n) = n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (witness X n) = n", "apply(induct n)"], ["proof (prove)\ngoal (2 subgoals):\n 1. length (witness X 0) = 0\n 2. \\<And>n.\n       length (witness X n) = n \\<Longrightarrow>\n       length (witness X (Suc n)) = Suc n", "by auto"], ["", "lemma iswitness: \"r<n \\<Longrightarrow> ((witness X n)!r) = (r\\<in>X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X)", "proof (induct n)"], ["proof (state)\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "case (Suc n)"], ["proof (state)\nthis:\n  r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X)\n  r < Suc n\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "have \"witness X (Suc n) ! r = ((witness X n) @ [n \\<in> X]) ! r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. witness X (Suc n) ! r = (witness X n @ [n \\<in> X]) ! r", "by simp"], ["proof (state)\nthis:\n  witness X (Suc n) ! r = (witness X n @ [n \\<in> X]) ! r\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "also"], ["proof (state)\nthis:\n  witness X (Suc n) ! r = (witness X n @ [n \\<in> X]) ! r\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "have \"\\<dots> = (if r < length (witness X n) then (witness X n) ! r else [n \\<in> X] ! (r - length (witness X n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (witness X n @ [n \\<in> X]) ! r =\n    (if r < length (witness X n) then witness X n ! r\n     else [n \\<in> X] ! (r - length (witness X n)))", "by(rule nth_append)"], ["proof (state)\nthis:\n  (witness X n @ [n \\<in> X]) ! r =\n  (if r < length (witness X n) then witness X n ! r\n   else [n \\<in> X] ! (r - length (witness X n)))\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "also"], ["proof (state)\nthis:\n  (witness X n @ [n \\<in> X]) ! r =\n  (if r < length (witness X n) then witness X n ! r\n   else [n \\<in> X] ! (r - length (witness X n)))\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "have \"\\<dots> = (if r < n then (witness X n) ! r else [n \\<in> X] ! (r - n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (if r < length (witness X n) then witness X n ! r\n     else [n \\<in> X] ! (r - length (witness X n))) =\n    (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))", "by (simp add: witness_length)"], ["proof (state)\nthis:\n  (if r < length (witness X n) then witness X n ! r\n   else [n \\<in> X] ! (r - length (witness X n))) =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "finally"], ["proof (chain)\npicking this:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))", "have 1: \"witness X (Suc n) ! r = (if r < n then (witness X n) ! r else [n \\<in> X] ! (r - n))\""], ["proof (prove)\nusing this:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n\ngoal (1 subgoal):\n 1. witness X (Suc n) ! r =\n    (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))", "."], ["proof (state)\nthis:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n\ngoal (2 subgoals):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)\n 2. \\<And>n.\n       \\<lbrakk>r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X);\n        r < Suc n\\<rbrakk>\n       \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. witness X (Suc n) ! r = (r \\<in> X)", "proof (cases \"r < n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)\n 2. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "case True"], ["proof (state)\nthis:\n  r < n\n\ngoal (2 subgoals):\n 1. r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)\n 2. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "with 1"], ["proof (chain)\npicking this:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n  r < n", "have a: \"witness X (Suc n) ! r = (witness X n) ! r\""], ["proof (prove)\nusing this:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n  r < n\n\ngoal (1 subgoal):\n 1. witness X (Suc n) ! r = witness X n ! r", "by auto"], ["proof (state)\nthis:\n  witness X (Suc n) ! r = witness X n ! r\n\ngoal (2 subgoals):\n 1. r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)\n 2. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "from Suc True"], ["proof (chain)\npicking this:\n  r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X)\n  r < Suc n\n  r < n", "have b: \"witness X n ! r = (r \\<in> X)\""], ["proof (prove)\nusing this:\n  r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X)\n  r < Suc n\n  r < n\n\ngoal (1 subgoal):\n 1. witness X n ! r = (r \\<in> X)", "by auto"], ["proof (state)\nthis:\n  witness X n ! r = (r \\<in> X)\n\ngoal (2 subgoals):\n 1. r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)\n 2. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "from a b"], ["proof (chain)\npicking this:\n  witness X (Suc n) ! r = witness X n ! r\n  witness X n ! r = (r \\<in> X)", "show ?thesis"], ["proof (prove)\nusing this:\n  witness X (Suc n) ! r = witness X n ! r\n  witness X n ! r = (r \\<in> X)\n\ngoal (1 subgoal):\n 1. witness X (Suc n) ! r = (r \\<in> X)", "by auto"], ["proof (state)\nthis:\n  witness X (Suc n) ! r = (r \\<in> X)\n\ngoal (1 subgoal):\n 1. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "case False"], ["proof (state)\nthis:\n  \\<not> r < n\n\ngoal (1 subgoal):\n 1. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "with Suc"], ["proof (chain)\npicking this:\n  r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X)\n  r < Suc n\n  \\<not> r < n", "have \"r = n\""], ["proof (prove)\nusing this:\n  r < n \\<Longrightarrow> witness X n ! r = (r \\<in> X)\n  r < Suc n\n  \\<not> r < n\n\ngoal (1 subgoal):\n 1. r = n", "by auto"], ["proof (state)\nthis:\n  r = n\n\ngoal (1 subgoal):\n 1. \\<not> r < n \\<Longrightarrow> witness X (Suc n) ! r = (r \\<in> X)", "with 1"], ["proof (chain)\npicking this:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n  r = n", "show \"witness X (Suc n) ! r = (r \\<in> X)\""], ["proof (prove)\nusing this:\n  witness X (Suc n) ! r =\n  (if r < n then witness X n ! r else [n \\<in> X] ! (r - n))\n  r = n\n\ngoal (1 subgoal):\n 1. witness X (Suc n) ! r = (r \\<in> X)", "by auto"], ["proof (state)\nthis:\n  witness X (Suc n) ! r = (r \\<in> X)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  witness X (Suc n) ! r = (r \\<in> X)\n\ngoal (1 subgoal):\n 1. r < 0 \\<Longrightarrow> witness X 0 ! r = (r \\<in> X)", "qed simp"], ["", "lemma card1: \"finite S \\<Longrightarrow> finite X \\<Longrightarrow> finite Y \\<Longrightarrow> X \\<inter> Y = {} \\<Longrightarrow> S \\<inter> (X \\<union> Y) = {} \\<Longrightarrow> S\\<union>X\\<union>Y={0..<m} \\<Longrightarrow> \n    card {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i)  \\<and> length xs = m} = 2^(m - card X - card Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite S; finite X; finite Y; X \\<inter> Y = {};\n     S \\<inter> (X \\<union> Y) = {};\n     S \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n    \\<Longrightarrow> card\n                       {xs.\n                        (\\<forall>i\\<in>X. xs ! i) \\<and>\n                        (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                        length xs = m} =\n                      2 ^ (m - card X - card Y)", "proof(induct arbitrary: X Y rule: finite_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "case empty"], ["proof (state)\nthis:\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  {} \\<inter> (X \\<union> Y) = {}\n  {} \\<union> X \\<union> Y = {0..<m}\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  {} \\<inter> (X \\<union> Y) = {}\n  {} \\<union> X \\<union> Y = {0..<m}", "have x: \"X \\<subseteq> {0..<m}\" and y: \"Y \\<subseteq> {0..<m}\" and xy: \"X\\<union> Y = {0..<m}\""], ["proof (prove)\nusing this:\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  {} \\<inter> (X \\<union> Y) = {}\n  {} \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. X \\<subseteq> {0..<m} &&&\n    Y \\<subseteq> {0..<m} &&& X \\<union> Y = {0..<m}", "by auto"], ["proof (state)\nthis:\n  X \\<subseteq> {0..<m}\n  Y \\<subseteq> {0..<m}\n  X \\<union> Y = {0..<m}\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  X \\<subseteq> {0..<m}\n  Y \\<subseteq> {0..<m}\n  X \\<union> Y = {0..<m}", "have \"card (X \\<union> Y) = m\""], ["proof (prove)\nusing this:\n  X \\<subseteq> {0..<m}\n  Y \\<subseteq> {0..<m}\n  X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. card (X \\<union> Y) = m", "by auto"], ["proof (state)\nthis:\n  card (X \\<union> Y) = m\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "with empty(3)"], ["proof (chain)\npicking this:\n  X \\<inter> Y = {}\n  card (X \\<union> Y) = m", "have cardXY: \"card X + card Y = m\""], ["proof (prove)\nusing this:\n  X \\<inter> Y = {}\n  card (X \\<union> Y) = m\n\ngoal (1 subgoal):\n 1. card X + card Y = m", "using card_Un_Int[OF empty(1) empty(2)]"], ["proof (prove)\nusing this:\n  X \\<inter> Y = {}\n  card (X \\<union> Y) = m\n  card X + card Y = card (X \\<union> Y) + card (X \\<inter> Y)\n\ngoal (1 subgoal):\n 1. card X + card Y = m", "by auto"], ["proof (state)\nthis:\n  card X + card Y = m\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "from empty"], ["proof (chain)\npicking this:\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  {} \\<inter> (X \\<union> Y) = {}\n  {} \\<union> X \\<union> Y = {0..<m}", "have ents: \"\\<forall>i<m. (i\\<in>Y) = (i\\<notin>X)\""], ["proof (prove)\nusing this:\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  {} \\<inter> (X \\<union> Y) = {}\n  {} \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)", "by auto"], ["proof (state)\nthis:\n  \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"(\\<exists>! w. (\\<forall>i\\<in>X. w ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>  length w = m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>!w.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m", "proof (rule ex1I, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<forall>i\\<in>X. ?a ! i) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> ?a ! i) \\<and> length ?a = m\n 2. \\<And>w.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       w = ?a", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. (\\<forall>i\\<in>X. ?a ! i) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> ?a ! i) \\<and> length ?a = m\n 2. \\<And>w.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       w = ?a", "show \"(\\<forall>i\\<in>X. (witness X m) ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> (witness X m) ! i) \\<and> length (witness X m) = m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>i\\<in>X. witness X m ! i) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> witness X m ! i) \\<and>\n    length (witness X m) = m", "proof (safe, goal_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. \\<And>i.\n       \\<lbrakk>i \\<in> Y; witness X m ! i\\<rbrakk> \\<Longrightarrow> False\n 3. length (witness X m) = m", "case (2 i)"], ["proof (state)\nthis:\n  i \\<in> Y\n  witness X m ! i\n\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. \\<And>i.\n       \\<lbrakk>i \\<in> Y; witness X m ! i\\<rbrakk> \\<Longrightarrow> False\n 3. length (witness X m) = m", "with y"], ["proof (chain)\npicking this:\n  Y \\<subseteq> {0..<m}\n  i \\<in> Y\n  witness X m ! i", "have a: \"i < m\""], ["proof (prove)\nusing this:\n  Y \\<subseteq> {0..<m}\n  i \\<in> Y\n  witness X m ! i\n\ngoal (1 subgoal):\n 1. i < m", "by auto"], ["proof (state)\nthis:\n  i < m\n\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. \\<And>i.\n       \\<lbrakk>i \\<in> Y; witness X m ! i\\<rbrakk> \\<Longrightarrow> False\n 3. length (witness X m) = m", "with iswitness"], ["proof (chain)\npicking this:\n  ?r < ?n \\<Longrightarrow> witness ?X ?n ! ?r = (?r \\<in> ?X)\n  i < m", "have \"witness X m ! i = (i \\<in> X)\""], ["proof (prove)\nusing this:\n  ?r < ?n \\<Longrightarrow> witness ?X ?n ! ?r = (?r \\<in> ?X)\n  i < m\n\ngoal (1 subgoal):\n 1. witness X m ! i = (i \\<in> X)", "by auto"], ["proof (state)\nthis:\n  witness X m ! i = (i \\<in> X)\n\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. \\<And>i.\n       \\<lbrakk>i \\<in> Y; witness X m ! i\\<rbrakk> \\<Longrightarrow> False\n 3. length (witness X m) = m", "with a ents 2"], ["proof (chain)\npicking this:\n  i < m\n  \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)\n  i \\<in> Y\n  witness X m ! i\n  witness X m ! i = (i \\<in> X)", "have \"~ witness X m ! i\""], ["proof (prove)\nusing this:\n  i < m\n  \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)\n  i \\<in> Y\n  witness X m ! i\n  witness X m ! i = (i \\<in> X)\n\ngoal (1 subgoal):\n 1. \\<not> witness X m ! i", "by auto"], ["proof (state)\nthis:\n  \\<not> witness X m ! i\n\ngoal (3 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. \\<And>i.\n       \\<lbrakk>i \\<in> Y; witness X m ! i\\<rbrakk> \\<Longrightarrow> False\n 3. length (witness X m) = m", "with 2(2)"], ["proof (chain)\npicking this:\n  witness X m ! i\n  \\<not> witness X m ! i", "show \"False\""], ["proof (prove)\nusing this:\n  witness X m ! i\n  \\<not> witness X m ! i\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. length (witness X m) = m", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. length (witness X m) = m", "case (1 i)"], ["proof (state)\nthis:\n  i \\<in> X\n\ngoal (2 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. length (witness X m) = m", "with x"], ["proof (chain)\npicking this:\n  X \\<subseteq> {0..<m}\n  i \\<in> X", "have a: \"i < m\""], ["proof (prove)\nusing this:\n  X \\<subseteq> {0..<m}\n  i \\<in> X\n\ngoal (1 subgoal):\n 1. i < m", "by auto"], ["proof (state)\nthis:\n  i < m\n\ngoal (2 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. length (witness X m) = m", "with iswitness"], ["proof (chain)\npicking this:\n  ?r < ?n \\<Longrightarrow> witness ?X ?n ! ?r = (?r \\<in> ?X)\n  i < m", "have \"witness X m ! i = (i \\<in> X)\""], ["proof (prove)\nusing this:\n  ?r < ?n \\<Longrightarrow> witness ?X ?n ! ?r = (?r \\<in> ?X)\n  i < m\n\ngoal (1 subgoal):\n 1. witness X m ! i = (i \\<in> X)", "by auto"], ["proof (state)\nthis:\n  witness X m ! i = (i \\<in> X)\n\ngoal (2 subgoals):\n 1. \\<And>i. i \\<in> X \\<Longrightarrow> witness X m ! i\n 2. length (witness X m) = m", "with a ents 1"], ["proof (chain)\npicking this:\n  i < m\n  \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)\n  i \\<in> X\n  witness X m ! i = (i \\<in> X)", "show \"witness X m ! i\""], ["proof (prove)\nusing this:\n  i < m\n  \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)\n  i \\<in> X\n  witness X m ! i = (i \\<in> X)\n\ngoal (1 subgoal):\n 1. witness X m ! i", "by auto"], ["proof (state)\nthis:\n  witness X m ! i\n\ngoal (1 subgoal):\n 1. length (witness X m) = m", "qed (rule witness_length)"], ["proof (state)\nthis:\n  (\\<forall>i\\<in>X. witness X m ! i) \\<and>\n  (\\<forall>i\\<in>Y. \\<not> witness X m ! i) \\<and> length (witness X m) = m\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       w = witness X m", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>w.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       w = witness X m", "case (2 w)"], ["proof (state)\nthis:\n  (\\<forall>i\\<in>X. w ! i) \\<and>\n  (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n\ngoal (1 subgoal):\n 1. \\<And>w.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       w = witness X m", "show \"w = witness X m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. w = witness X m", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. w = witness X m", "have \"(length w = length (witness X m) \\<and> (\\<forall>i<length w. w ! i = (witness X m) ! i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length w = length (witness X m) \\<and>\n    (\\<forall>i<length w. w ! i = witness X m ! i)", "using 2"], ["proof (prove)\nusing this:\n  (\\<forall>i\\<in>X. w ! i) \\<and>\n  (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n\ngoal (1 subgoal):\n 1. length w = length (witness X m) \\<and>\n    (\\<forall>i<length w. w ! i = witness X m ! i)", "apply(simp add: witness_length)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>i\\<in>X. w ! i) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m \\<Longrightarrow>\n    \\<forall>i<m. w ! i = witness X m ! i", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       i < m \\<longrightarrow> w ! i = witness X m ! i", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       i < m \\<longrightarrow> w ! i = witness X m ! i", "assume as: \"(\\<forall>i\\<in>X. w ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>  length w = m\""], ["proof (state)\nthis:\n  (\\<forall>i\\<in>X. w ! i) \\<and>\n  (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       i < m \\<longrightarrow> w ! i = witness X m ! i", "have \"i < m \\<longrightarrow> (witness X m) ! i = (i \\<in> X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < m \\<longrightarrow> witness X m ! i = (i \\<in> X)", "using iswitness"], ["proof (prove)\nusing this:\n  ?r < ?n \\<Longrightarrow> witness ?X ?n ! ?r = (?r \\<in> ?X)\n\ngoal (1 subgoal):\n 1. i < m \\<longrightarrow> witness X m ! i = (i \\<in> X)", "by auto"], ["proof (state)\nthis:\n  i < m \\<longrightarrow> witness X m ! i = (i \\<in> X)\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<forall>i\\<in>X. w ! i) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and>\n       length w = m \\<Longrightarrow>\n       i < m \\<longrightarrow> w ! i = witness X m ! i", "then"], ["proof (chain)\npicking this:\n  i < m \\<longrightarrow> witness X m ! i = (i \\<in> X)", "show \"i < m \\<longrightarrow> w ! i = (witness X m) ! i\""], ["proof (prove)\nusing this:\n  i < m \\<longrightarrow> witness X m ! i = (i \\<in> X)\n\ngoal (1 subgoal):\n 1. i < m \\<longrightarrow> w ! i = witness X m ! i", "using ents as"], ["proof (prove)\nusing this:\n  i < m \\<longrightarrow> witness X m ! i = (i \\<in> X)\n  \\<forall>i<m. (i \\<in> Y) = (i \\<notin> X)\n  (\\<forall>i\\<in>X. w ! i) \\<and>\n  (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n\ngoal (1 subgoal):\n 1. i < m \\<longrightarrow> w ! i = witness X m ! i", "by auto"], ["proof (state)\nthis:\n  i < m \\<longrightarrow> w ! i = witness X m ! i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  length w = length (witness X m) \\<and>\n  (\\<forall>i<length w. w ! i = witness X m ! i)\n\ngoal (1 subgoal):\n 1. w = witness X m", "then"], ["proof (chain)\npicking this:\n  length w = length (witness X m) \\<and>\n  (\\<forall>i<length w. w ! i = witness X m ! i)", "show ?thesis"], ["proof (prove)\nusing this:\n  length w = length (witness X m) \\<and>\n  (\\<forall>i<length w. w ! i = witness X m ! i)\n\ngoal (1 subgoal):\n 1. w = witness X m", "using list_eq_iff_nth_eq"], ["proof (prove)\nusing this:\n  length w = length (witness X m) \\<and>\n  (\\<forall>i<length w. w ! i = witness X m ! i)\n  (?xs = ?ys) =\n  (length ?xs = length ?ys \\<and>\n   (\\<forall>i<length ?xs. ?xs ! i = ?ys ! i))\n\ngoal (1 subgoal):\n 1. w = witness X m", "by auto"], ["proof (state)\nthis:\n  w = witness X m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  w = witness X m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>!w.\n     (\\<forall>i\\<in>X. w ! i) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  \\<exists>!w.\n     (\\<forall>i\\<in>X. w ! i) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m", "obtain w where \" {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i)  \\<and> length xs = m}\n         = { w }\""], ["proof (prove)\nusing this:\n  \\<exists>!w.\n     (\\<forall>i\\<in>X. w ! i) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        {xs.\n         Ball X ((!) xs) \\<and>\n         (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n        {w} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Nitpick.Ex1_unfold[where P=\"(\\<lambda>xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i)  \\<and> length xs = m)\"]"], ["proof (prove)\nusing this:\n  \\<exists>!w.\n     (\\<forall>i\\<in>X. w ! i) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> w ! i) \\<and> length w = m\n  \\<exists>!xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<equiv>\n  \\<exists>x.\n     {x. Ball X ((!) x) \\<and>\n         (\\<forall>i\\<in>Y. \\<not> x ! i) \\<and> length x = m} =\n     {x}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        {xs.\n         Ball X ((!) xs) \\<and>\n         (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n        {w} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  {w}\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  {w}", "have \"card {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i)  \\<and> length xs = m} = card { w }\""], ["proof (prove)\nusing this:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  {w}\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    card {w}", "by auto"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  card {w}\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  card {w}\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {w} = 1", "by auto"], ["proof (state)\nthis:\n  card {w} = 1\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  card {w} = 1\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 2^(m - card X - card Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 = 2 ^ (m - card X - card Y)", "using cardXY"], ["proof (prove)\nusing this:\n  card X + card Y = m\n\ngoal (1 subgoal):\n 1. 1 = 2 ^ (m - card X - card Y)", "by auto"], ["proof (state)\nthis:\n  1 = 2 ^ (m - card X - card Y)\n\ngoal (2 subgoals):\n 1. \\<And>X Y.\n       \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n        {} \\<inter> (X \\<union> Y) = {};\n        {} \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)\n 2. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "finally"], ["proof (chain)\npicking this:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)", "show ?case"], ["proof (prove)\nusing this:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>a\\<in>X. xs ! a) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "."], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>a\\<in>X. xs ! a) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "case (insert e S)"], ["proof (state)\nthis:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}", "have eX: \"e \\<notin> X\" and eY: \"e \\<notin> Y\""], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. e \\<notin> X &&& e \\<notin> Y", "by auto"], ["proof (state)\nthis:\n  e \\<notin> X\n  e \\<notin> Y\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "from insert(8)"], ["proof (chain)\npicking this:\n  insert e S \\<union> X \\<union> Y = {0..<m}", "have \"insert e S \\<subseteq> {0..<m}\""], ["proof (prove)\nusing this:\n  insert e S \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. insert e S \\<subseteq> {0..<m}", "by auto"], ["proof (state)\nthis:\n  insert e S \\<subseteq> {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  insert e S \\<subseteq> {0..<m}", "have ebetween0m: \"e\\<in>{0..<m}\""], ["proof (prove)\nusing this:\n  insert e S \\<subseteq> {0..<m}\n\ngoal (1 subgoal):\n 1. e \\<in> {0..<m}", "by auto"], ["proof (state)\nthis:\n  e \\<in> {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have fm: \"finite {0..<m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {0..<m}", "by auto"], ["proof (state)\nthis:\n  finite {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have cardm: \"card {0..<m} =   m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {0..<m} = m", "by auto"], ["proof (state)\nthis:\n  card {0..<m} = m\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "from insert(8) eX eY ebetween0m"], ["proof (chain)\npicking this:\n  insert e S \\<union> X \\<union> Y = {0..<m}\n  e \\<notin> X\n  e \\<notin> Y\n  e \\<in> {0..<m}", "have sub: \"X \\<union> Y \\<subset> {0..<m}\""], ["proof (prove)\nusing this:\n  insert e S \\<union> X \\<union> Y = {0..<m}\n  e \\<notin> X\n  e \\<notin> Y\n  e \\<in> {0..<m}\n\ngoal (1 subgoal):\n 1. X \\<union> Y \\<subset> {0..<m}", "by auto"], ["proof (state)\nthis:\n  X \\<union> Y \\<subset> {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "from insert"], ["proof (chain)\npicking this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}", "have \"card (X \\<inter> Y) = 0\""], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. card (X \\<inter> Y) = 0", "by auto"], ["proof (state)\nthis:\n  card (X \\<inter> Y) = 0\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  card (X \\<inter> Y) = 0", "have cardXY: \"card (X \\<union> Y) = card X + card Y\""], ["proof (prove)\nusing this:\n  card (X \\<inter> Y) = 0\n\ngoal (1 subgoal):\n 1. card (X \\<union> Y) = card X + card Y", "using card_Un_Int[OF insert(4) insert(5)]"], ["proof (prove)\nusing this:\n  card (X \\<inter> Y) = 0\n  card X + card Y = card (X \\<union> Y) + card (X \\<inter> Y)\n\ngoal (1 subgoal):\n 1. card (X \\<union> Y) = card X + card Y", "by auto"], ["proof (state)\nthis:\n  card (X \\<union> Y) = card X + card Y\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"  m > card X + card Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card X + card Y < m", "using psubset_card_mono[OF fm sub] cardm cardXY"], ["proof (prove)\nusing this:\n  card (X \\<union> Y) < card {0..<m}\n  card {0..<m} = m\n  card (X \\<union> Y) = card X + card Y\n\ngoal (1 subgoal):\n 1. card X + card Y < m", "by(auto)"], ["proof (state)\nthis:\n  card X + card Y < m\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "then"], ["proof (chain)\npicking this:\n  card X + card Y < m", "have carde: \"1 + (  m - card X - card Y - 1) =   m - card X - card Y\""], ["proof (prove)\nusing this:\n  card X + card Y < m\n\ngoal (1 subgoal):\n 1. 1 + (m - card X - card Y - 1) = m - card X - card Y", "by auto"], ["proof (state)\nthis:\n  1 + (m - card X - card Y - 1) = m - card X - card Y\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have is1: \"{xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m \\<and> xs!e}\n          = {xs. Ball (insert e X) ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e} =\n    {xs.\n     Ball (insert e X) ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e} =\n  {xs.\n   Ball (insert e X) ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have is2: \"{xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m \\<and> ~xs!e}\n          = {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>(insert e Y). \\<not> xs ! i) \\<and> length xs =   m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = m \\<and> \\<not> xs ! e} =\n    {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> \\<not> xs ! e} =\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have 2: \"{xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m \\<and> xs!e}\n        \\<union> {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m \\<and> ~xs!e}\n          = {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = m \\<and> xs ! e} \\<union>\n    {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = m \\<and> \\<not> xs ! e} =\n    {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> xs ! e} \\<union>\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> \\<not> xs ! e} =\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have 3: \"{xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m \\<and> xs!e}\n      \\<inter> {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m \\<and> ~xs!e} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = m \\<and> xs ! e} \\<inter>\n    {xs.\n     Ball X ((!) xs) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = m \\<and> \\<not> xs ! e} =\n    {}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> xs ! e} \\<inter>\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> \\<not> xs ! e} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have fX: \"finite (insert e X)\" \n    and disjeXY: \"insert e X \\<inter> Y = {}\" \n    and cutX: \"S \\<inter> (insert e X \\<union> Y) = {}\"\n    and uniX: \"S \\<union> insert e X \\<union> Y = {0..<m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (finite (insert e X) &&& insert e X \\<inter> Y = {}) &&&\n    S \\<inter> (insert e X \\<union> Y) = {} &&&\n    S \\<union> insert e X \\<union> Y = {0..<m}", "using insert"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. (finite (insert e X) &&& insert e X \\<inter> Y = {}) &&&\n    S \\<inter> (insert e X \\<union> Y) = {} &&&\n    S \\<union> insert e X \\<union> Y = {0..<m}", "by auto"], ["proof (state)\nthis:\n  finite (insert e X)\n  insert e X \\<inter> Y = {}\n  S \\<inter> (insert e X \\<union> Y) = {}\n  S \\<union> insert e X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have fY: \"finite (insert e Y)\"\n    and disjXeY: \"X \\<inter> (insert e Y) = {}\" \n    and cutY: \"S \\<inter> (X \\<union> insert e Y) = {}\"\n    and uniY: \"S \\<union>  X \\<union> insert e Y = {0..<m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (finite (insert e Y) &&& X \\<inter> insert e Y = {}) &&&\n    S \\<inter> (X \\<union> insert e Y) = {} &&&\n    S \\<union> X \\<union> insert e Y = {0..<m}", "using insert"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?X; finite ?Y; ?X \\<inter> ?Y = {};\n   S \\<inter> (?X \\<union> ?Y) = {};\n   S \\<union> ?X \\<union> ?Y = {0..<m}\\<rbrakk>\n  \\<Longrightarrow> card\n                     {xs.\n                      (\\<forall>a\\<in>?X. xs ! a) \\<and>\n                      (\\<forall>i\\<in>?Y. \\<not> xs ! i) \\<and>\n                      length xs = m} =\n                    2 ^ (m - card ?X - card ?Y)\n  finite X\n  finite Y\n  X \\<inter> Y = {}\n  insert e S \\<inter> (X \\<union> Y) = {}\n  insert e S \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. (finite (insert e Y) &&& X \\<inter> insert e Y = {}) &&&\n    S \\<inter> (X \\<union> insert e Y) = {} &&&\n    S \\<union> X \\<union> insert e Y = {0..<m}", "by auto"], ["proof (state)\nthis:\n  finite (insert e Y)\n  X \\<inter> insert e Y = {}\n  S \\<inter> (X \\<union> insert e Y) = {}\n  S \\<union> X \\<union> insert e Y = {0..<m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"card {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m}\n      = card {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs!e}\n        + card {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> ~xs!e}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> xs ! e} +\n    card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> \\<not> xs ! e}", "apply(subst card_Un_Int)"], ["proof (prove)\ngoal (3 subgoals):\n 1. finite\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e}\n 2. finite\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> \\<not> xs ! e}\n 3. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<union>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e}) +\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<inter>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e})", "apply(rule fbool)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> \\<not> xs ! e}\n 2. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<union>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e}) +\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<inter>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e})", "apply(rule fbool)"], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<union>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e}) +\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<inter>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e})", "using 2 3"], ["proof (prove)\nusing this:\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> xs ! e} \\<union>\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> \\<not> xs ! e} =\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m}\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> xs ! e} \\<inter>\n  {xs.\n   Ball X ((!) xs) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = m \\<and> \\<not> xs ! e} =\n  {}\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<union>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e}) +\n    card\n     ({xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> xs ! e} \\<inter>\n      {xs.\n       Ball X ((!) xs) \\<and>\n       (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n       length xs = m \\<and> \\<not> xs ! e})", "by auto"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n    length xs = m \\<and> \\<not> xs ! e}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n    length xs = m \\<and> \\<not> xs ! e}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = card {xs. Ball (insert e X) ((!) xs) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs =   m}\n        + card {xs. Ball X ((!) xs) \\<and> (\\<forall>i\\<in>(insert e Y). \\<not> xs ! i) \\<and> length xs =   m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> xs ! e} +\n    card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n      length xs = m \\<and> \\<not> xs ! e} =\n    card\n     {xs.\n      Ball (insert e X) ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} +\n    card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m}", "by (simp only: is1 is2)"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n    length xs = m \\<and> \\<not> xs ! e} =\n  card\n   {xs.\n    Ball (insert e X) ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m \\<and> xs ! e} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n    length xs = m \\<and> \\<not> xs ! e} =\n  card\n   {xs.\n    Ball (insert e X) ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m}\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 2 ^ (  m - card (insert e X) - card Y)\n        + 2 ^ (  m - card X - card (insert e Y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      Ball (insert e X) ((!) xs) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} +\n    card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card (insert e X) - card Y) +\n    2 ^ (m - card X - card (insert e Y))", "apply(simp only: insert(3)[of \"insert e X\" Y, OF fX insert(5) disjeXY cutX uniX])"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ (m - card (insert e X) - card Y) +\n    card\n     {xs.\n      Ball X ((!) xs) \\<and>\n      (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card (insert e X) - card Y) +\n    2 ^ (m - card X - card (insert e Y))", "by(simp only: insert(3)[of \"X\" \"insert e Y\", OF insert(4) fY disjXeY cutY uniY])"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball (insert e X) ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card (insert e X) - card Y) +\n  2 ^ (m - card X - card (insert e Y))\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  card\n   {xs.\n    Ball (insert e X) ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} +\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>insert e Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card (insert e X) - card Y) +\n  2 ^ (m - card X - card (insert e Y))\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 2 ^ (  m - card X - card Y - 1)\n        + 2 ^ (  m - card X - card Y - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ (m - card (insert e X) - card Y) +\n    2 ^ (m - card X - card (insert e Y)) =\n    2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1)", "using insert(4,5) eX eY"], ["proof (prove)\nusing this:\n  finite X\n  finite Y\n  e \\<notin> X\n  e \\<notin> Y\n\ngoal (1 subgoal):\n 1. 2 ^ (m - card (insert e X) - card Y) +\n    2 ^ (m - card X - card (insert e Y)) =\n    2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1)", "by auto"], ["proof (state)\nthis:\n  2 ^ (m - card (insert e X) - card Y) +\n  2 ^ (m - card X - card (insert e Y)) =\n  2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  2 ^ (m - card (insert e X) - card Y) +\n  2 ^ (m - card X - card (insert e Y)) =\n  2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 2 * 2 ^ (  m - card X - card Y - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1) =\n    2 * 2 ^ (m - card X - card Y - 1)", "by auto"], ["proof (state)\nthis:\n  2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1) =\n  2 * 2 ^ (m - card X - card Y - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  2 ^ (m - card X - card Y - 1) + 2 ^ (m - card X - card Y - 1) =\n  2 * 2 ^ (m - card X - card Y - 1)\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 2 ^ (1 + (  m - card X - card Y - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * 2 ^ (m - card X - card Y - 1) = 2 ^ (1 + (m - card X - card Y - 1))", "by auto"], ["proof (state)\nthis:\n  2 * 2 ^ (m - card X - card Y - 1) = 2 ^ (1 + (m - card X - card Y - 1))\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "also"], ["proof (state)\nthis:\n  2 * 2 ^ (m - card X - card Y - 1) = 2 ^ (1 + (m - card X - card Y - 1))\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "have \"\\<dots> = 2 ^ (  m - card X - card Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ (1 + (m - card X - card Y - 1)) = 2 ^ (m - card X - card Y)", "using carde"], ["proof (prove)\nusing this:\n  1 + (m - card X - card Y - 1) = m - card X - card Y\n\ngoal (1 subgoal):\n 1. 2 ^ (1 + (m - card X - card Y - 1)) = 2 ^ (m - card X - card Y)", "by auto"], ["proof (state)\nthis:\n  2 ^ (1 + (m - card X - card Y - 1)) = 2 ^ (m - card X - card Y)\n\ngoal (1 subgoal):\n 1. \\<And>x F X Y.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>X Y.\n           \\<lbrakk>finite X; finite Y; X \\<inter> Y = {};\n            F \\<inter> (X \\<union> Y) = {};\n            F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n           \\<Longrightarrow> card\n                              {xs.\n                               Ball X ((!) xs) \\<and>\n                               (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                               length xs = m} =\n                             2 ^ (m - card X - card Y);\n        finite X; finite Y; X \\<inter> Y = {};\n        insert x F \\<inter> (X \\<union> Y) = {};\n        insert x F \\<union> X \\<union> Y = {0..<m}\\<rbrakk>\n       \\<Longrightarrow> card\n                          {xs.\n                           Ball X ((!) xs) \\<and>\n                           (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n                           length xs = m} =\n                         2 ^ (m - card X - card Y)", "finally"], ["proof (chain)\npicking this:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)", "show ?case"], ["proof (prove)\nusing this:\n  card\n   {xs.\n    Ball X ((!) xs) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>a\\<in>X. xs ! a) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "."], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>a\\<in>X. xs ! a) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma card2: assumes \"finite X\" and \"finite Y\" and \"X \\<inter> Y = {}\" and x: \"X \\<union> Y \\<subseteq> {0..<m}\"\n  shows \"card {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} = 2 ^ (m - card X - card Y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "let ?S = \"{0..<m}-(X \\<union> Y)\""], ["proof (state)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "from x"], ["proof (chain)\npicking this:\n  X \\<union> Y \\<subseteq> {0..<m}", "have a: \"?S \\<union> X \\<union> Y = {0..<m}\""], ["proof (prove)\nusing this:\n  X \\<union> Y \\<subseteq> {0..<m}\n\ngoal (1 subgoal):\n 1. {0..<m} - (X \\<union> Y) \\<union> X \\<union> Y = {0..<m}", "by auto"], ["proof (state)\nthis:\n  {0..<m} - (X \\<union> Y) \\<union> X \\<union> Y = {0..<m}\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "have b: \"?S \\<inter> (X \\<union> Y) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ({0..<m} - (X \\<union> Y)) \\<inter> (X \\<union> Y) = {}", "by auto"], ["proof (state)\nthis:\n  ({0..<m} - (X \\<union> Y)) \\<inter> (X \\<union> Y) = {}\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>X. xs ! i) \\<and>\n      (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n    2 ^ (m - card X - card Y)", "apply(rule card1[where ?S=\"?S\"])"], ["proof (prove)\ngoal (6 subgoals):\n 1. finite ({0..<m} - (X \\<union> Y))\n 2. finite X\n 3. finite Y\n 4. X \\<inter> Y = {}\n 5. ({0..<m} - (X \\<union> Y)) \\<inter> (X \\<union> Y) = {}\n 6. {0..<m} - (X \\<union> Y) \\<union> X \\<union> Y = {0..<m}", "by(simp_all add: assms a b)"], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>i\\<in>X. xs ! i) \\<and>\n    (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = m} =\n  2 ^ (m - card X - card Y)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \"Average out the second sum for free-absch\""], ["", "lemma Expactation2or1: \"finite S \\<Longrightarrow> finite Tr \\<Longrightarrow> finite Fa \\<Longrightarrow> card Tr + card Fa + card S \\<le> l \\<Longrightarrow>\n  S \\<inter> (Tr \\<union> Fa) = {} \\<Longrightarrow> Tr \\<inter> Fa = {} \\<Longrightarrow> S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l} \\<Longrightarrow>\n  (\\<Sum>x\\<in>{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}. \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n      = 3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>finite S; finite Tr; finite Fa;\n     card Tr + card Fa + card S \\<le> l; S \\<inter> (Tr \\<union> Fa) = {};\n     Tr \\<inter> Fa = {};\n     S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n                                    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                                    (\\<forall>i\\<in>Fa.\n  \\<not> xs ! i) \\<and>\n                                    length xs = l}.\n                         \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n                      3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa)", "proof (induct arbitrary: Tr Fa rule: finite_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "case (insert e S)"], ["proof (state)\nthis:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?Tr; finite ?Fa; card ?Tr + card ?Fa + card S \\<le> l;\n   S \\<inter> (?Tr \\<union> ?Fa) = {}; ?Tr \\<inter> ?Fa = {};\n   S \\<union> ?Tr \\<union> ?Fa \\<subseteq> {0..<l}\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n                                  (\\<forall>a\\<in>?Tr. xs ! a) \\<and>\n                                  (\\<forall>i\\<in>?Fa. \\<not> xs ! i) \\<and>\n                                  length xs = l}.\n                       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n                    3 / 2 * real (card S) * 2 ^ (l - card ?Tr - card ?Fa)\n  finite Tr\n  finite Fa\n  card Tr + card Fa + card (insert e S) \\<le> l\n  insert e S \\<inter> (Tr \\<union> Fa) = {}\n  Tr \\<inter> Fa = {}\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "from insert(7)"], ["proof (chain)\npicking this:\n  insert e S \\<inter> (Tr \\<union> Fa) = {}", "have \"e \\<in> (insert e S)\" and eTr: \"e \\<notin> Tr\" and eFa: \"e \\<notin> Fa\""], ["proof (prove)\nusing this:\n  insert e S \\<inter> (Tr \\<union> Fa) = {}\n\ngoal (1 subgoal):\n 1. e \\<in> insert e S &&& e \\<notin> Tr &&& e \\<notin> Fa", "by auto"], ["proof (state)\nthis:\n  e \\<in> insert e S\n  e \\<notin> Tr\n  e \\<notin> Fa\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "from insert(9)"], ["proof (chain)\npicking this:\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}", "have  tra: \"Tr \\<subseteq> {0..<l}\" and trb: \"Fa \\<subseteq> {0..<l}\" and  trc: \"e < l\""], ["proof (prove)\nusing this:\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\n\ngoal (1 subgoal):\n 1. Tr \\<subseteq> {0..<l} &&& Fa \\<subseteq> {0..<l} &&& e < l", "by auto"], ["proof (state)\nthis:\n  Tr \\<subseteq> {0..<l}\n  Fa \\<subseteq> {0..<l}\n  e < l\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have ntrFa: \"l > (card Tr + card Fa)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card Tr + card Fa < l", "using insert(6) card_insert_if insert(1,2)"], ["proof (prove)\nusing this:\n  card Tr + card Fa + card (insert e S) \\<le> l\n  finite ?A \\<Longrightarrow>\n  card (insert ?x ?A) = (if ?x \\<in> ?A then card ?A else Suc (card ?A))\n  finite S\n  e \\<notin> S\n\ngoal (1 subgoal):\n 1. card Tr + card Fa < l", "by auto"], ["proof (state)\nthis:\n  card Tr + card Fa < l\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have myhelp2: \"1 + (l - card Tr - card Fa -1) = l - card Tr - card Fa\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 + (l - card Tr - card Fa - 1) = l - card Tr - card Fa", "using ntrFa"], ["proof (prove)\nusing this:\n  card Tr + card Fa < l\n\ngoal (1 subgoal):\n 1. 1 + (l - card Tr - card Fa - 1) = l - card Tr - card Fa", "by auto"], ["proof (state)\nthis:\n  1 + (l - card Tr - card Fa - 1) = l - card Tr - card Fa\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have juhuTr: \"{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> xs!e}  \n      = {xs. (\\<forall>i\\<in>(insert e Tr). xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n     length xs = l \\<and> xs ! e} =\n    {xs.\n     (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> xs ! e} =\n  {xs.\n   (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have juhuFa: \"{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> ~xs!e}  \n      = {xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>(insert e Fa). \\<not> xs ! i) \\<and> length xs = l}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n     length xs = l \\<and> \\<not> xs ! e} =\n    {xs.\n     (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> \\<not> xs ! e} =\n  {xs.\n   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "let ?Tre = \"{xs. (\\<forall>i\\<in>(insert e Tr). xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"card ?Tre = 2 ^ (l - card (insert e Tr) - card Fa)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    2 ^ (l - card (insert e Tr) - card Fa)", "apply(rule card2)"], ["proof (prove)\ngoal (4 subgoals):\n 1. finite (insert e Tr)\n 2. finite Fa\n 3. insert e Tr \\<inter> Fa = {}\n 4. insert e Tr \\<union> Fa \\<subseteq> {0..<l}", "using insert"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?Tr; finite ?Fa; card ?Tr + card ?Fa + card S \\<le> l;\n   S \\<inter> (?Tr \\<union> ?Fa) = {}; ?Tr \\<inter> ?Fa = {};\n   S \\<union> ?Tr \\<union> ?Fa \\<subseteq> {0..<l}\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n                                  (\\<forall>a\\<in>?Tr. xs ! a) \\<and>\n                                  (\\<forall>i\\<in>?Fa. \\<not> xs ! i) \\<and>\n                                  length xs = l}.\n                       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n                    3 / 2 * real (card S) * 2 ^ (l - card ?Tr - card ?Fa)\n  finite Tr\n  finite Fa\n  card Tr + card Fa + card (insert e S) \\<le> l\n  insert e S \\<inter> (Tr \\<union> Fa) = {}\n  Tr \\<inter> Fa = {}\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\n\ngoal (4 subgoals):\n 1. finite (insert e Tr)\n 2. finite Fa\n 3. insert e Tr \\<inter> Fa = {}\n 4. insert e Tr \\<union> Fa \\<subseteq> {0..<l}", "by simp_all"], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card (insert e Tr) - card Fa)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "then"], ["proof (chain)\npicking this:\n  card\n   {xs.\n    (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card (insert e Tr) - card Fa)", "have resi: \"card ?Tre = 2^(l - card Tr - card Fa - 1)\""], ["proof (prove)\nusing this:\n  card\n   {xs.\n    (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card (insert e Tr) - card Fa)\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    2 ^ (l - card Tr - card Fa - 1)", "using insert(4) eTr"], ["proof (prove)\nusing this:\n  card\n   {xs.\n    (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card (insert e Tr) - card Fa)\n  finite Tr\n  e \\<notin> Tr\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    2 ^ (l - card Tr - card Fa - 1)", "by auto"], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have yabaTr: \"(\\<Sum>x\\<in>?Tre. 2::real) = 2 * 2^(l - card Tr - card Fa - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2) =\n    2 * 2 ^ (l - card Tr - card Fa - 1)", "using resi"], ["proof (prove)\nusing this:\n  card\n   {xs.\n    (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card Fa - 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2) =\n    2 * 2 ^ (l - card Tr - card Fa - 1)", "by (simp add: power_commutes)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2) =\n  2 * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "let ?Fae = \"{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>(insert e Fa). \\<not> xs ! i) \\<and> length xs = l}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"card ?Fae = 2 ^ (l - card Tr - card (insert e Fa))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    2 ^ (l - card Tr - card (insert e Fa))", "apply(rule card2)"], ["proof (prove)\ngoal (4 subgoals):\n 1. finite Tr\n 2. finite (insert e Fa)\n 3. Tr \\<inter> insert e Fa = {}\n 4. Tr \\<union> insert e Fa \\<subseteq> {0..<l}", "using insert"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?Tr; finite ?Fa; card ?Tr + card ?Fa + card S \\<le> l;\n   S \\<inter> (?Tr \\<union> ?Fa) = {}; ?Tr \\<inter> ?Fa = {};\n   S \\<union> ?Tr \\<union> ?Fa \\<subseteq> {0..<l}\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n                                  (\\<forall>a\\<in>?Tr. xs ! a) \\<and>\n                                  (\\<forall>i\\<in>?Fa. \\<not> xs ! i) \\<and>\n                                  length xs = l}.\n                       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n                    3 / 2 * real (card S) * 2 ^ (l - card ?Tr - card ?Fa)\n  finite Tr\n  finite Fa\n  card Tr + card Fa + card (insert e S) \\<le> l\n  insert e S \\<inter> (Tr \\<union> Fa) = {}\n  Tr \\<inter> Fa = {}\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\n\ngoal (4 subgoals):\n 1. finite Tr\n 2. finite (insert e Fa)\n 3. Tr \\<inter> insert e Fa = {}\n 4. Tr \\<union> insert e Fa \\<subseteq> {0..<l}", "by simp_all"], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card (insert e Fa))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "then"], ["proof (chain)\npicking this:\n  card\n   {xs.\n    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card (insert e Fa))", "have resi2: \"card ?Fae = 2^(l - card Tr - card Fa - 1)\""], ["proof (prove)\nusing this:\n  card\n   {xs.\n    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card (insert e Fa))\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    2 ^ (l - card Tr - card Fa - 1)", "using insert(5) eFa"], ["proof (prove)\nusing this:\n  card\n   {xs.\n    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card (insert e Fa))\n  finite Fa\n  e \\<notin> Fa\n\ngoal (1 subgoal):\n 1. card\n     {xs.\n      (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    2 ^ (l - card Tr - card Fa - 1)", "by auto"], ["proof (state)\nthis:\n  card\n   {xs.\n    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have yabaFa: \"(\\<Sum>x\\<in>?Fae. 1::real) = 1 * 2 ^ (l - card Tr - card Fa - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       1) =\n    1 * 2 ^ (l - card Tr - card Fa - 1)", "using resi2"], ["proof (prove)\nusing this:\n  card\n   {xs.\n    (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n    (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l} =\n  2 ^ (l - card Tr - card Fa - 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       1) =\n    1 * 2 ^ (l - card Tr - card Fa - 1)", "by (simp add: power_commutes)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     1) =\n  1 * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "{"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     1) =\n  1 * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "fix X Y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"{xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = l \\<and> xs!e}\n          \\<inter> {xs. (\\<forall>i\\<in>X. xs ! i) \\<and> (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and> length xs = l \\<and> ~xs!e} = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {xs.\n     (\\<forall>i\\<in>X. xs ! i) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = l \\<and> xs ! e} \\<inter>\n    {xs.\n     (\\<forall>i\\<in>X. xs ! i) \\<and>\n     (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n     length xs = l \\<and> \\<not> xs ! e} =\n    {}", "by auto"], ["proof (state)\nthis:\n  {xs.\n   (\\<forall>i\\<in>X. xs ! i) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> xs ! e} \\<inter>\n  {xs.\n   (\\<forall>i\\<in>X. xs ! i) \\<and>\n   (\\<forall>i\\<in>Y. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> \\<not> xs ! e} =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "}"], ["proof (state)\nthis:\n  {xs.\n   (\\<forall>i\\<in>?X2. xs ! i) \\<and>\n   (\\<forall>i\\<in>?Y2. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> xs ! e} \\<inter>\n  {xs.\n   (\\<forall>i\\<in>?X2. xs ! i) \\<and>\n   (\\<forall>i\\<in>?Y2. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> \\<not> xs ! e} =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "note 3=this"], ["proof (state)\nthis:\n  {xs.\n   (\\<forall>i\\<in>?X2. xs ! i) \\<and>\n   (\\<forall>i\\<in>?Y2. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> xs ! e} \\<inter>\n  {xs.\n   (\\<forall>i\\<in>?X2. xs ! i) \\<and>\n   (\\<forall>i\\<in>?Y2. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> \\<not> xs ! e} =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "(* split it! *)"], ["proof (state)\nthis:\n  {xs.\n   (\\<forall>i\\<in>?X2. xs ! i) \\<and>\n   (\\<forall>i\\<in>?Y2. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> xs ! e} \\<inter>\n  {xs.\n   (\\<forall>i\\<in>?X2. xs ! i) \\<and>\n   (\\<forall>i\\<in>?Y2. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> \\<not> xs ! e} =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"(\\<Sum>x\\<in>{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}. \\<Sum>j\\<in>(insert e S). if x ! j then (2::real) else 1)\n      = (\\<Sum>x\\<in>{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> xs!e}. \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\n        + (\\<Sum>x\\<in>{xs. (\\<forall>i\\<in>Tr. xs ! i) \\<and> (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> ~xs!e}. \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\"\n        (is \"(\\<Sum>x\\<in>?all. ?f x) = (\\<Sum>x\\<in>?allT. ?f x) + (\\<Sum>x\\<in>?allF. ?f x)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "have \"(\\<Sum>x\\<in>?all. \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\n            = (\\<Sum>x\\<in>(?allT \\<union> ?allF). \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2::'a else (1::'a)) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e} \\<union>\n                 {xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2::'a else (1::'a))", "apply(rule sum.cong)"], ["proof (prove)\ngoal (2 subgoals):\n 1. {xs.\n     (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l} =\n    {xs.\n     (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n     length xs = l \\<and> xs ! e} \\<union>\n    {xs.\n     (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n     length xs = l \\<and> \\<not> xs ! e}\n 2. \\<And>x.\n       x \\<in> {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<union>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e} \\<Longrightarrow>\n       (\\<Sum>j\\<in>insert e S. if x ! j then 2::'a else (1::'a)) =\n       (\\<Sum>j\\<in>insert e S. if x ! j then 2::'a else (1::'a))", "by(auto)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2::?'a1 else (1::?'a1)) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<union>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2::?'a1 else (1::?'a1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2::?'a1 else (1::?'a1)) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<union>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2::?'a1 else (1::?'a1))\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "have\"\\<dots> = ((\\<Sum>x\\<in>(?allT). \\<Sum>j\\<in>(insert e S). if x ! j then (2::real) else 1) \n                      + (\\<Sum>x\\<in>(?allF). \\<Sum>j\\<in>(insert e S). if x ! j then (2::real) else 1))\n                      - (\\<Sum>x\\<in>(?allT \\<inter> ?allF). \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e} \\<union>\n                 {xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) -\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e} \\<inter>\n                 {xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "apply (rule sum_Un)"], ["proof (prove)\ngoal (2 subgoals):\n 1. finite\n     {xs.\n      (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> xs ! e}\n 2. finite\n     {xs.\n      (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n      (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n      length xs = l \\<and> \\<not> xs ! e}", "apply(rule fbool)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<union>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) -\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<inter>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<union>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) -\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<inter>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "have \"\\<dots> =  (\\<Sum>x\\<in>(?allT). \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\n                        + (\\<Sum>x\\<in>(?allF). \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) -\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e} \\<inter>\n                 {xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "by(simp add: 3)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) -\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e} \\<inter>\n               {xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "."], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> = (\\<Sum>x\\<in>?Tre. \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\n          + (\\<Sum>x\\<in>?Fae. \\<Sum>j\\<in>(insert e S). if x ! j then 2 else 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "using juhuTr juhuFa"], ["proof (prove)\nusing this:\n  {xs.\n   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l \\<and> xs ! e} =\n  {xs.\n   (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}\n  {xs.\n   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n   length xs = l \\<and> \\<not> xs ! e} =\n  {xs.\n   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and> length xs = l}\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                  length xs = l \\<and> \\<not> xs ! e}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and>\n                length xs = l \\<and> \\<not> xs ! e}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (\\<Sum>x\\<in>?Tre. (\\<lambda>x. 2) x + (\\<lambda>x. (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) x)\n        + (\\<Sum>x\\<in>?Fae. (\\<lambda>x. 1) x + (\\<lambda>x. (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1))", "using insert(1,2)"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1))", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (\\<Sum>x\\<in>?Tre. 2) + (\\<Sum>x\\<in>?Tre. (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\n          + ((\\<Sum>x\\<in>?Fae. 1) + (\\<Sum>x\\<in>?Fae. (\\<Sum>j\\<in>S. if x ! j then 2 else 1)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    ((\\<Sum>x\\<in>{xs.\n                   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                   length xs = l}.\n        1) +\n     (\\<Sum>x\\<in>{xs.\n                   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                   length xs = l}.\n        \\<Sum>j\\<in>S. if x ! j then 2 else 1))", "by (simp add: Groups_Big.comm_monoid_add_class.sum.distrib)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  ((\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     1 + (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  ((\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  2 * 2^(l - card Tr - card Fa - 1) + (\\<Sum>x\\<in>?Tre. (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\n        + (1 * 2^(l - card Tr - card Fa - 1) + (\\<Sum>x\\<in>?Fae. (\\<Sum>j\\<in>S. if x ! j then 2 else 1)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       2) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    ((\\<Sum>x\\<in>{xs.\n                   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                   length xs = l}.\n        1) +\n     (\\<Sum>x\\<in>{xs.\n                   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                   length xs = l}.\n        \\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n    2 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    (1 * 2 ^ (l - card Tr - card Fa - 1) +\n     (\\<Sum>x\\<in>{xs.\n                   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                   length xs = l}.\n        \\<Sum>j\\<in>S. if x ! j then 2 else 1))", "by(simp only: yabaTr yabaFa)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  ((\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (1 * 2 ^ (l - card Tr - card Fa - 1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     2) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  ((\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (1 * 2 ^ (l - card Tr - card Fa - 1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (2::real) * 2^(l - card Tr - card Fa - 1) + (\\<Sum>x\\<in>?Tre. (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\n        + (1::real) * 2^(l - card Tr - card Fa - 1) + (\\<Sum>x\\<in>?Fae. (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    (1 * 2 ^ (l - card Tr - card Fa - 1) +\n     (\\<Sum>x\\<in>{xs.\n                   (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                   (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                   length xs = l}.\n        \\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n    2 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    1 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1)", "by auto"], ["proof (state)\nthis:\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (1 * 2 ^ (l - card Tr - card Fa - 1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  1 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (1 * 2 ^ (l - card Tr - card Fa - 1) +\n   (\\<Sum>x\\<in>{xs.\n                 (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                 (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                 length xs = l}.\n      \\<Sum>j\\<in>S. if x ! j then 2 else 1)) =\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  1 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (3::real) * 2^(l - card Tr - card Fa - 1) +\n          (\\<Sum>x\\<in>?Tre. (\\<Sum>j\\<in>S. if x ! j then 2 else 1)) + (\\<Sum>x\\<in>?Fae. (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    1 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1)", "by simp"], ["proof (state)\nthis:\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  1 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  2 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  1 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  3 * 2^(l - card Tr - card Fa - 1) +\n          3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n          (\\<Sum>x\\<in>?Fae. (\\<Sum>j\\<in>S. if x ! j then 2 else 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1)", "apply(subst insert(3))"], ["proof (prove)\ngoal (7 subgoals):\n 1. finite (insert e Tr)\n 2. finite Fa\n 3. card (insert e Tr) + card Fa + card S \\<le> l\n 4. S \\<inter> (insert e Tr \\<union> Fa) = {}\n 5. insert e Tr \\<inter> Fa = {}\n 6. S \\<union> insert e Tr \\<union> Fa \\<subseteq> {0..<l}\n 7. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    (\\<Sum>x\\<in>{xs.\n                  Ball Tr ((!) xs) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    (\\<Sum>x\\<in>{xs.\n                  Ball Tr ((!) xs) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1)", "using insert"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?Tr; finite ?Fa; card ?Tr + card ?Fa + card S \\<le> l;\n   S \\<inter> (?Tr \\<union> ?Fa) = {}; ?Tr \\<inter> ?Fa = {};\n   S \\<union> ?Tr \\<union> ?Fa \\<subseteq> {0..<l}\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n                                  (\\<forall>a\\<in>?Tr. xs ! a) \\<and>\n                                  (\\<forall>i\\<in>?Fa. \\<not> xs ! i) \\<and>\n                                  length xs = l}.\n                       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n                    3 / 2 * real (card S) * 2 ^ (l - card ?Tr - card ?Fa)\n  finite Tr\n  finite Fa\n  card Tr + card Fa + card (insert e S) \\<le> l\n  insert e S \\<inter> (Tr \\<union> Fa) = {}\n  Tr \\<inter> Fa = {}\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\n\ngoal (7 subgoals):\n 1. finite (insert e Tr)\n 2. finite Fa\n 3. card (insert e Tr) + card Fa + card S \\<le> l\n 4. S \\<inter> (insert e Tr \\<union> Fa) = {}\n 5. insert e Tr \\<inter> Fa = {}\n 6. S \\<union> insert e Tr \\<union> Fa \\<subseteq> {0..<l}\n 7. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    (\\<Sum>x\\<in>{xs.\n                  Ball Tr ((!) xs) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    (\\<Sum>x\\<in>{xs.\n                  Ball Tr ((!) xs) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1)", "by simp_all"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>insert e Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  3 * 2^(l - card Tr - card Fa - 1) +\n          3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n           3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    (\\<Sum>x\\<in>{xs.\n                  (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                  (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                  length xs = l}.\n       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa))", "apply(subst insert(3))"], ["proof (prove)\ngoal (7 subgoals):\n 1. finite Tr\n 2. finite (insert e Fa)\n 3. card Tr + card (insert e Fa) + card S \\<le> l\n 4. S \\<inter> (Tr \\<union> insert e Fa) = {}\n 5. Tr \\<inter> insert e Fa = {}\n 6. S \\<union> Tr \\<union> insert e Fa \\<subseteq> {0..<l}\n 7. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa)) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa))", "using insert"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n  \\<lbrakk>finite ?Tr; finite ?Fa; card ?Tr + card ?Fa + card S \\<le> l;\n   S \\<inter> (?Tr \\<union> ?Fa) = {}; ?Tr \\<inter> ?Fa = {};\n   S \\<union> ?Tr \\<union> ?Fa \\<subseteq> {0..<l}\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n                                  (\\<forall>a\\<in>?Tr. xs ! a) \\<and>\n                                  (\\<forall>i\\<in>?Fa. \\<not> xs ! i) \\<and>\n                                  length xs = l}.\n                       \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n                    3 / 2 * real (card S) * 2 ^ (l - card ?Tr - card ?Fa)\n  finite Tr\n  finite Fa\n  card Tr + card Fa + card (insert e S) \\<le> l\n  insert e S \\<inter> (Tr \\<union> Fa) = {}\n  Tr \\<inter> Fa = {}\n  insert e S \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\n\ngoal (7 subgoals):\n 1. finite Tr\n 2. finite (insert e Fa)\n 3. card Tr + card (insert e Fa) + card S \\<le> l\n 4. S \\<inter> (Tr \\<union> insert e Fa) = {}\n 5. Tr \\<inter> insert e Fa = {}\n 6. S \\<union> Tr \\<union> insert e Fa \\<subseteq> {0..<l}\n 7. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa)) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa))", "by simp_all"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>insert e Fa. \\<not> xs ! i) \\<and>\n                length xs = l}.\n     \\<Sum>j\\<in>S. if x ! j then 2 else 1) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  3 * 2^(l - card Tr - card Fa - 1) +\n          3 / 2 * real (card S) * 2^ (l - (card Tr + 1) - card Fa) +\n           3 / 2 * real (card S) * 2^ (l - card Tr - (card Fa + 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa)) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1))", "using card_insert_if insert(4,5) eTr eFa"], ["proof (prove)\nusing this:\n  finite ?A \\<Longrightarrow>\n  card (insert ?x ?A) = (if ?x \\<in> ?A then card ?A else Suc (card ?A))\n  finite Tr\n  finite Fa\n  e \\<notin> Tr\n  e \\<notin> Fa\n\ngoal (1 subgoal):\n 1. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa)) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1))", "by auto"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa)) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card (insert e Tr) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card (insert e Fa)) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1))\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  3  * 2^(l - card Tr - card Fa - 1) +\n          3 / 2 * real (card S) * 2^ (l - card Tr - card Fa - 1) +\n           3 / 2 * real (card S) * 2^ (l - card Tr - card Fa - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1)) =\n    3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1)", "by auto"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1)) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - (card Tr + 1) - card Fa) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - (card Fa + 1)) =\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  ( 3/2 * 2  +  2 *  3 / 2 * real (card S)) * 2^ (l - card Tr - card Fa - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) +\n    3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) =\n    (3 / 2 * 2 + 2 * 3 / 2 * real (card S)) *\n    2 ^ (l - card Tr - card Fa - 1)", "by algebra"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) =\n  (3 / 2 * 2 + 2 * 3 / 2 * real (card S)) * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) +\n  3 / 2 * real (card S) * 2 ^ (l - card Tr - card Fa - 1) =\n  (3 / 2 * 2 + 2 * 3 / 2 * real (card S)) * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (   3 / 2 * (1 + real (card S))) * 2 * 2^ (l - card Tr - card Fa - 1 )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (3 / 2 * 2 + 2 * 3 / 2 * real (card S)) *\n    2 ^ (l - card Tr - card Fa - 1) =\n    3 / 2 * (1 + real (card S)) * 2 * 2 ^ (l - card Tr - card Fa - 1)", "by simp"], ["proof (state)\nthis:\n  (3 / 2 * 2 + 2 * 3 / 2 * real (card S)) *\n  2 ^ (l - card Tr - card Fa - 1) =\n  3 / 2 * (1 + real (card S)) * 2 * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  (3 / 2 * 2 + 2 * 3 / 2 * real (card S)) *\n  2 ^ (l - card Tr - card Fa - 1) =\n  3 / 2 * (1 + real (card S)) * 2 * 2 ^ (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (   3 / 2 * (1 + real (card S))) * 2^ (Suc (l - card Tr - card Fa -1 ))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 / 2 * (1 + real (card S)) * 2 * 2 ^ (l - card Tr - card Fa - 1) =\n    3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1)", "by simp"], ["proof (state)\nthis:\n  3 / 2 * (1 + real (card S)) * 2 * 2 ^ (l - card Tr - card Fa - 1) =\n  3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 / 2 * (1 + real (card S)) * 2 * 2 ^ (l - card Tr - card Fa - 1) =\n  3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (   3 / 2 * (1 + real (card S))) * 2^ (l - card Tr - card Fa )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1) =\n    3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa)", "using myhelp2"], ["proof (prove)\nusing this:\n  1 + (l - card Tr - card Fa - 1) = l - card Tr - card Fa\n\ngoal (1 subgoal):\n 1. 3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1) =\n    3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa)", "by auto"], ["proof (state)\nthis:\n  3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1) =\n  3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 / 2 * (1 + real (card S)) * 2 ^ Suc (l - card Tr - card Fa - 1) =\n  3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (   3 / 2 * (real (1 + card S))) * 2^ (l - card Tr - card Fa )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa) =\n    3 / 2 * real (1 + card S) * 2 ^ (l - card Tr - card Fa)", "by simp"], ["proof (state)\nthis:\n  3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa) =\n  3 / 2 * real (1 + card S) * 2 ^ (l - card Tr - card Fa)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "also"], ["proof (state)\nthis:\n  3 / 2 * (1 + real (card S)) * 2 ^ (l - card Tr - card Fa) =\n  3 / 2 * real (1 + card S) * 2 ^ (l - card Tr - card Fa)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "have \"\\<dots> =  (   3 / 2 * real (card (insert e S))) * 2^ (l - card Tr - card Fa)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 / 2 * real (1 + card S) * 2 ^ (l - card Tr - card Fa) =\n    3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)", "using insert(1,2)"], ["proof (prove)\nusing this:\n  finite S\n  e \\<notin> S\n\ngoal (1 subgoal):\n 1. 3 / 2 * real (1 + card S) * 2 ^ (l - card Tr - card Fa) =\n    3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)", "by auto"], ["proof (state)\nthis:\n  3 / 2 * real (1 + card S) * 2 ^ (l - card Tr - card Fa) =\n  3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)\n\ngoal (2 subgoals):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)\n 2. \\<And>x F Tr Fa.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Tr Fa.\n           \\<lbrakk>finite Tr; finite Fa;\n            card Tr + card Fa + card F \\<le> l;\n            F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n            F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n           \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n     Ball Tr ((!) xs) \\<and>\n     (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                                \\<Sum>j\\<in>F. if x ! j then 2 else 1) =\n                             3 / 2 * real (card F) *\n                             2 ^ (l - card Tr - card Fa);\n        finite Tr; finite Fa; card Tr + card Fa + card (insert x F) \\<le> l;\n        insert x F \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        insert x F \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>xa\\<in>{xs.\n  Ball Tr ((!) xs) \\<and>\n  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>insert x F.\n                              if xa ! j then 2 else 1) =\n                         3 / 2 * real (card (insert x F)) *\n                         2 ^ (l - card Tr - card Fa)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>i\\<in>Tr. xs ! i) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)\n\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>{xs.\n                  (\\<forall>a\\<in>Tr. xs ! a) \\<and>\n                  (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n       \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n    3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)", "."], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>{xs.\n                (\\<forall>a\\<in>Tr. xs ! a) \\<and>\n                (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n     \\<Sum>j\\<in>insert e S. if x ! j then 2 else 1) =\n  3 / 2 * real (card (insert e S)) * 2 ^ (l - card Tr - card Fa)\n\ngoal (1 subgoal):\n 1. \\<And>Tr Fa.\n       \\<lbrakk>finite Tr; finite Fa; card Tr + card Fa + card {} \\<le> l;\n        {} \\<inter> (Tr \\<union> Fa) = {}; Tr \\<inter> Fa = {};\n        {} \\<union> Tr \\<union> Fa \\<subseteq> {0..<l}\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>x\\<in>{xs.\n Ball Tr ((!) xs) \\<and>\n (\\<forall>i\\<in>Fa. \\<not> xs ! i) \\<and> length xs = l}.\n                            \\<Sum>j\\<in>{}. if x ! j then 2 else 1) =\n                         3 / 2 * real (card {}) *\n                         2 ^ (l - card Tr - card Fa)", "qed simp"], ["", "end"]]}