{"file_name": "/home/qj213/afp-2021-10-22/thys/Fermat3_4/Fermat4.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Fermat3_4", "problem_names": ["lemma nat_relprime_power_divisors: \n  assumes n0: \"0 < n\" and abc: \"(a::nat)*b = c^n\" and relprime: \"coprime a b\"\n  shows \"\\<exists> k. a = k^n\"", "lemma int_relprime_power_divisors:\n  assumes \"0 < n\" and \"0 \\<le> a\" and \"0 \\<le> b\" and \"(a::int) * b = c ^ n\" and \"coprime a b\"\n  shows \"\\<exists>k. a = k^n\"", "lemma nat_power2_diff: \"a \\<ge> (b::nat) \\<Longrightarrow> (a-b)^2 = a^2 + b^2 - 2*a*b\"", "lemma nat_power_le_imp_le_base: \"\\<lbrakk> n \\<noteq> 0; a^n \\<le> b^n \\<rbrakk> \\<Longrightarrow> (a::nat) \\<le> b\"", "lemma nat_power_inject_base: \"\\<lbrakk> n \\<noteq> 0; a^n = b^n \\<rbrakk> \\<Longrightarrow> (a::nat) = b\"", "theorem nat_euclid_pyth_triples:\n  assumes abc: \"(a::nat)^2 + b^2 = c^2\" and ab_relprime: \"coprime a b\" and aodd: \"odd a\"\n  shows \"\\<exists> p q. a = p^2 - q^2 \\<and> b = 2*p*q \\<and> c = p^2 + q^2 \\<and> coprime p q\"", "lemma smaller_fermat4:\n  assumes abc: \"(a::int)^4+b^4=c^2\" and abc0: \"a*b*c \\<noteq> 0\" and aodd: \"odd a\" \n    and ab_relprime: \"coprime a b\"\n  shows \n  \"\\<exists> p q r. (p^4+q^4=r^2 \\<and> p*q*r \\<noteq> 0 \\<and> odd p \\<and> coprime p q \\<and> r^2 < c^2)\"", "lemma no_rewritten_fermat4:\n  \"\\<not> (\\<exists> (a::int) b. (a^4 + b^4 = c^2 \\<and> a*b*c \\<noteq> 0 \\<and> odd a \\<and> coprime a b))\"", "theorem fermat_4:\n  assumes ass: \"(x::int)^4 + y^4 = z^4\"\n  shows \"x*y*z=0\""], "translations": [["", "lemma nat_relprime_power_divisors: \n  assumes n0: \"0 < n\" and abc: \"(a::nat)*b = c^n\" and relprime: \"coprime a b\"\n  shows \"\\<exists> k. a = k^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "using assms"], ["proof (prove)\nusing this:\n  0 < n\n  a * b = c ^ n\n  coprime a b\n\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "proof (induct c arbitrary: a b rule: nat_less_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na a b.\n       \\<lbrakk>\\<forall>m<na.\n                   0 < n \\<longrightarrow>\n                   (\\<forall>x xa.\n                       x * xa = m ^ n \\<longrightarrow>\n                       coprime x xa \\<longrightarrow>\n                       (\\<exists>k. x = k ^ n));\n        0 < n; a * b = na ^ n; coprime a b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k. a = k ^ n", "case (1 c)"], ["proof (state)\nthis:\n  \\<forall>m<c.\n     0 < n \\<longrightarrow>\n     (\\<forall>x xa.\n         x * xa = m ^ n \\<longrightarrow>\n         coprime x xa \\<longrightarrow> (\\<exists>k. x = k ^ n))\n  0 < n\n  a * b = c ^ n\n  coprime a b\n\ngoal (1 subgoal):\n 1. \\<And>na a b.\n       \\<lbrakk>\\<forall>m<na.\n                   0 < n \\<longrightarrow>\n                   (\\<forall>x xa.\n                       x * xa = m ^ n \\<longrightarrow>\n                       coprime x xa \\<longrightarrow>\n                       (\\<exists>k. x = k ^ n));\n        0 < n; a * b = na ^ n; coprime a b\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k. a = k ^ n", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "proof (cases \"a > 1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. \\<not> 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "case False"], ["proof (state)\nthis:\n  \\<not> 1 < a\n\ngoal (2 subgoals):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. \\<not> 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"a = 0 \\<or> a = 1\""], ["proof (prove)\nusing this:\n  \\<not> 1 < a\n\ngoal (1 subgoal):\n 1. a = 0 \\<or> a = 1", "by linarith"], ["proof (state)\nthis:\n  a = 0 \\<or> a = 1\n\ngoal (2 subgoals):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. \\<not> 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = 0 \\<or> a = 1\n\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "using n0 power_one zero_power"], ["proof (prove)\nusing this:\n  a = 0 \\<or> a = 1\n  0 < n\n  (1::?'a) ^ ?n = (1::?'a)\n  0 < ?n \\<Longrightarrow> (0::?'a) ^ ?n = (0::?'a)\n\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "by (simp only: eq_sym_conv) blast"], ["proof (state)\nthis:\n  \\<exists>k. a = k ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "case True"], ["proof (state)\nthis:\n  1 < a\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "then"], ["proof (chain)\npicking this:\n  1 < a", "obtain p where p: \"prime p\" \"p dvd a\""], ["proof (prove)\nusing this:\n  1 < a\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>prime p; p dvd a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using prime_factor_nat[of a]"], ["proof (prove)\nusing this:\n  1 < a\n  a \\<noteq> 1 \\<Longrightarrow> \\<exists>p. prime p \\<and> p dvd a\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        \\<lbrakk>prime p; p dvd a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  prime p\n  p dvd a\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence h1: \"p dvd (c^n)\""], ["proof (prove)\nusing this:\n  prime p\n  p dvd a\n\ngoal (1 subgoal):\n 1. p dvd c ^ n", "using 1(3) dvd_mult2[of p a b]"], ["proof (prove)\nusing this:\n  prime p\n  p dvd a\n  a * b = c ^ n\n  p dvd a \\<Longrightarrow> p dvd a * b\n\ngoal (1 subgoal):\n 1. p dvd c ^ n", "by presburger"], ["proof (state)\nthis:\n  p dvd c ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"(p^n) dvd (c^n)\""], ["proof (prove)\nusing this:\n  p dvd c ^ n\n\ngoal (1 subgoal):\n 1. p ^ n dvd c ^ n", "using p(1) prime_dvd_power_nat[of p c n] dvd_power_same[of p c n]"], ["proof (prove)\nusing this:\n  p dvd c ^ n\n  prime p\n  \\<lbrakk>prime p; p dvd c ^ n\\<rbrakk> \\<Longrightarrow> p dvd c\n  p dvd c \\<Longrightarrow> p ^ n dvd c ^ n\n\ngoal (1 subgoal):\n 1. p ^ n dvd c ^ n", "by blast"], ["proof (state)\nthis:\n  p ^ n dvd c ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "moreover"], ["proof (state)\nthis:\n  p ^ n dvd c ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "have h2: \"\\<not> p dvd b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> p dvd b", "using p \\<open>coprime a b\\<close> coprime_common_divisor_nat [of a b p]"], ["proof (prove)\nusing this:\n  prime p\n  p dvd a\n  coprime a b\n  \\<lbrakk>coprime a b; p dvd a; p dvd b\\<rbrakk> \\<Longrightarrow> p = 1\n\ngoal (1 subgoal):\n 1. \\<not> p dvd b", "by auto"], ["proof (state)\nthis:\n  \\<not> p dvd b\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"\\<not> (p^n) dvd b\""], ["proof (prove)\nusing this:\n  \\<not> p dvd b\n\ngoal (1 subgoal):\n 1. \\<not> p ^ n dvd b", "using n0 p(1)"], ["proof (prove)\nusing this:\n  \\<not> p dvd b\n  0 < n\n  prime p\n\ngoal (1 subgoal):\n 1. \\<not> p ^ n dvd b", "by (auto intro: dvd_trans dvd_power[of n p])"], ["proof (state)\nthis:\n  \\<not> p ^ n dvd b\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "ultimately"], ["proof (chain)\npicking this:\n  p ^ n dvd c ^ n\n  \\<not> p ^ n dvd b", "have \"(p^n) dvd a\""], ["proof (prove)\nusing this:\n  p ^ n dvd c ^ n\n  \\<not> p ^ n dvd b\n\ngoal (1 subgoal):\n 1. p ^ n dvd a", "using \"1.prems\" p(1) prime_elem_divprod_pow [of p a b n]"], ["proof (prove)\nusing this:\n  p ^ n dvd c ^ n\n  \\<not> p ^ n dvd b\n  0 < n\n  a * b = c ^ n\n  coprime a b\n  prime p\n  \\<lbrakk>prime_elem p; coprime a b; p ^ n dvd a * b\\<rbrakk>\n  \\<Longrightarrow> p ^ n dvd a \\<or> p ^ n dvd b\n\ngoal (1 subgoal):\n 1. p ^ n dvd a", "by simp"], ["proof (state)\nthis:\n  p ^ n dvd a\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "then"], ["proof (chain)\npicking this:\n  p ^ n dvd a", "obtain a' c' where ac: \"a = p^n * a'\" \"c = p * c'\""], ["proof (prove)\nusing this:\n  p ^ n dvd a\n\ngoal (1 subgoal):\n 1. (\\<And>a' c'.\n        \\<lbrakk>a = p ^ n * a'; c = p * c'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using h1 dvdE[of \"p^n\" a] dvdE[of p c] prime_dvd_power_nat[of p c n] p(1)"], ["proof (prove)\nusing this:\n  p ^ n dvd a\n  p dvd c ^ n\n  \\<lbrakk>p ^ n dvd a; \\<And>k. a = p ^ n * k \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  \\<lbrakk>p dvd c; \\<And>k. c = p * k \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  \\<lbrakk>prime p; p dvd c ^ n\\<rbrakk> \\<Longrightarrow> p dvd c\n  prime p\n\ngoal (1 subgoal):\n 1. (\\<And>a' c'.\n        \\<lbrakk>a = p ^ n * a'; c = p * c'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by meson"], ["proof (state)\nthis:\n  a = p ^ n * a'\n  c = p * c'\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"p^n * (a' * b) = p^n * c'^n\""], ["proof (prove)\nusing this:\n  a = p ^ n * a'\n  c = p * c'\n\ngoal (1 subgoal):\n 1. p ^ n * (a' * b) = p ^ n * c' ^ n", "using 1(3)"], ["proof (prove)\nusing this:\n  a = p ^ n * a'\n  c = p * c'\n  a * b = c ^ n\n\ngoal (1 subgoal):\n 1. p ^ n * (a' * b) = p ^ n * c' ^ n", "by (simp add: power_mult_distrib semiring_normalization_rules(18))"], ["proof (state)\nthis:\n  p ^ n * (a' * b) = p ^ n * c' ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"a' * b = c'^n\""], ["proof (prove)\nusing this:\n  p ^ n * (a' * b) = p ^ n * c' ^ n\n\ngoal (1 subgoal):\n 1. a' * b = c' ^ n", "using p(1)"], ["proof (prove)\nusing this:\n  p ^ n * (a' * b) = p ^ n * c' ^ n\n  prime p\n\ngoal (1 subgoal):\n 1. a' * b = c' ^ n", "by auto"], ["proof (state)\nthis:\n  a' * b = c' ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "moreover"], ["proof (state)\nthis:\n  a' * b = c' ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "have \"coprime a' b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime a' b", "using 1(4) ac(1)"], ["proof (prove)\nusing this:\n  coprime a b\n  a = p ^ n * a'\n\ngoal (1 subgoal):\n 1. coprime a' b", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  coprime a' b\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "moreover"], ["proof (state)\nthis:\n  coprime a' b\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "have \"0 < b\" \"0 < a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < b &&& 0 < a", "using h2 dvd_0_right gr0I True"], ["proof (prove)\nusing this:\n  \\<not> p dvd b\n  ?a dvd (0::?'a)\n  (?n = 0 \\<Longrightarrow> False) \\<Longrightarrow> 0 < ?n\n  1 < a\n\ngoal (1 subgoal):\n 1. 0 < b &&& 0 < a", "by fastforce+"], ["proof (state)\nthis:\n  0 < b\n  0 < a\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "then"], ["proof (chain)\npicking this:\n  0 < b\n  0 < a", "have \"0 < c\" \"1 < p\""], ["proof (prove)\nusing this:\n  0 < b\n  0 < a\n\ngoal (1 subgoal):\n 1. 0 < c &&& 1 < p", "using p \\<open>a * b = c ^ n\\<close> n0 nat_0_less_mult_iff [of a b] n0"], ["proof (prove)\nusing this:\n  0 < b\n  0 < a\n  prime p\n  p dvd a\n  a * b = c ^ n\n  0 < n\n  (0 < a * b) = (0 < a \\<and> 0 < b)\n  0 < n\n\ngoal (1 subgoal):\n 1. 0 < c &&& 1 < p", "by (auto simp add: prime_gt_Suc_0_nat)"], ["proof (state)\nthis:\n  0 < c\n  1 < p\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"c' < c\""], ["proof (prove)\nusing this:\n  0 < c\n  1 < p\n\ngoal (1 subgoal):\n 1. c' < c", "using ac(2)"], ["proof (prove)\nusing this:\n  0 < c\n  1 < p\n  c = p * c'\n\ngoal (1 subgoal):\n 1. c' < c", "by simp"], ["proof (state)\nthis:\n  c' < c\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "ultimately"], ["proof (chain)\npicking this:\n  a' * b = c' ^ n\n  coprime a' b\n  c' < c", "obtain k where \"a' = k^n\""], ["proof (prove)\nusing this:\n  a' * b = c' ^ n\n  coprime a' b\n  c' < c\n\ngoal (1 subgoal):\n 1. (\\<And>k. a' = k ^ n \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using 1(1) n0"], ["proof (prove)\nusing this:\n  a' * b = c' ^ n\n  coprime a' b\n  c' < c\n  \\<forall>m<c.\n     0 < n \\<longrightarrow>\n     (\\<forall>x xa.\n         x * xa = m ^ n \\<longrightarrow>\n         coprime x xa \\<longrightarrow> (\\<exists>k. x = k ^ n))\n  0 < n\n\ngoal (1 subgoal):\n 1. (\\<And>k. a' = k ^ n \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by presburger"], ["proof (state)\nthis:\n  a' = k ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"a = (p*k)^n\""], ["proof (prove)\nusing this:\n  a' = k ^ n\n\ngoal (1 subgoal):\n 1. a = (p * k) ^ n", "using ac(1)"], ["proof (prove)\nusing this:\n  a' = k ^ n\n  a = p ^ n * a'\n\ngoal (1 subgoal):\n 1. a = (p * k) ^ n", "by (simp add: power_mult_distrib)"], ["proof (state)\nthis:\n  a = (p * k) ^ n\n\ngoal (1 subgoal):\n 1. 1 < a \\<Longrightarrow> \\<exists>k. a = k ^ n", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = (p * k) ^ n\n\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "by blast"], ["proof (state)\nthis:\n  \\<exists>k. a = k ^ n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>k. a = k ^ n\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma int_relprime_power_divisors:\n  assumes \"0 < n\" and \"0 \\<le> a\" and \"0 \\<le> b\" and \"(a::int) * b = c ^ n\" and \"coprime a b\"\n  shows \"\\<exists>k. a = k^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "proof (cases \"a = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "case False"], ["proof (state)\nthis:\n  a \\<noteq> 0\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "from \\<open>0 \\<le> a\\<close> \\<open>0 \\<le> b\\<close> \\<open>a * b = c ^ n\\<close>[symmetric]"], ["proof (chain)\npicking this:\n  0 \\<le> a\n  0 \\<le> b\n  c ^ n = a * b", "have \"0 \\<le> c ^ n\""], ["proof (prove)\nusing this:\n  0 \\<le> a\n  0 \\<le> b\n  c ^ n = a * b\n\ngoal (1 subgoal):\n 1. 0 \\<le> c ^ n", "by simp"], ["proof (state)\nthis:\n  0 \\<le> c ^ n\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"c^n = \\<bar>c\\<bar>^n\""], ["proof (prove)\nusing this:\n  0 \\<le> c ^ n\n\ngoal (1 subgoal):\n 1. c ^ n = \\<bar>c\\<bar> ^ n", "using power_even_abs[of n c] zero_le_power_eq[of c n]"], ["proof (prove)\nusing this:\n  0 \\<le> c ^ n\n  even n \\<Longrightarrow> \\<bar>c\\<bar> ^ n = c ^ n\n  (0 \\<le> c ^ n) = (even n \\<or> odd n \\<and> 0 \\<le> c)\n\ngoal (1 subgoal):\n 1. c ^ n = \\<bar>c\\<bar> ^ n", "by linarith"], ["proof (state)\nthis:\n  c ^ n = \\<bar>c\\<bar> ^ n\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"a * b = \\<bar>c\\<bar>^n\""], ["proof (prove)\nusing this:\n  c ^ n = \\<bar>c\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. a * b = \\<bar>c\\<bar> ^ n", "using assms(4)"], ["proof (prove)\nusing this:\n  c ^ n = \\<bar>c\\<bar> ^ n\n  a * b = c ^ n\n\ngoal (1 subgoal):\n 1. a * b = \\<bar>c\\<bar> ^ n", "by presburger"], ["proof (state)\nthis:\n  a * b = \\<bar>c\\<bar> ^ n\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "hence \"nat a * nat b = (nat \\<bar>c\\<bar>)^n\""], ["proof (prove)\nusing this:\n  a * b = \\<bar>c\\<bar> ^ n\n\ngoal (1 subgoal):\n 1. nat a * nat b = nat \\<bar>c\\<bar> ^ n", "using nat_mult_distrib[of \"a\" \"b\"] assms(2)"], ["proof (prove)\nusing this:\n  a * b = \\<bar>c\\<bar> ^ n\n  0 \\<le> a \\<Longrightarrow> nat (a * b) = nat a * nat b\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. nat a * nat b = nat \\<bar>c\\<bar> ^ n", "by (simp add: nat_power_eq)"], ["proof (state)\nthis:\n  nat a * nat b = nat \\<bar>c\\<bar> ^ n\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "moreover"], ["proof (state)\nthis:\n  nat a * nat b = nat \\<bar>c\\<bar> ^ n\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "have \"0 \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> b", "using assms mult_less_0_iff[of a b] False"], ["proof (prove)\nusing this:\n  0 < n\n  0 \\<le> a\n  0 \\<le> b\n  a * b = c ^ n\n  coprime a b\n  (a * b < 0) = (0 < a \\<and> b < 0 \\<or> a < 0 \\<and> 0 < b)\n  a \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> b", "by auto"], ["proof (state)\nthis:\n  0 \\<le> b\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "with \\<open>0 \\<le> a\\<close> \\<open>coprime a b\\<close>"], ["proof (chain)\npicking this:\n  0 \\<le> a\n  coprime a b\n  0 \\<le> b", "have \"coprime (nat a) (nat b)\""], ["proof (prove)\nusing this:\n  0 \\<le> a\n  coprime a b\n  0 \\<le> b\n\ngoal (1 subgoal):\n 1. coprime (nat a) (nat b)", "using coprime_nat_abs_left_iff [of a \"nat b\"]"], ["proof (prove)\nusing this:\n  0 \\<le> a\n  coprime a b\n  0 \\<le> b\n  coprime (nat \\<bar>a\\<bar>) (nat b) = coprime a (int (nat b))\n\ngoal (1 subgoal):\n 1. coprime (nat a) (nat b)", "by simp"], ["proof (state)\nthis:\n  coprime (nat a) (nat b)\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "ultimately"], ["proof (chain)\npicking this:\n  nat a * nat b = nat \\<bar>c\\<bar> ^ n\n  coprime (nat a) (nat b)", "have \"\\<exists> k. nat a = k^n\""], ["proof (prove)\nusing this:\n  nat a * nat b = nat \\<bar>c\\<bar> ^ n\n  coprime (nat a) (nat b)\n\ngoal (1 subgoal):\n 1. \\<exists>k. nat a = k ^ n", "using nat_relprime_power_divisors[of n \"nat a\" \"nat b\" \"nat \\<bar>c\\<bar>\"] assms(1)"], ["proof (prove)\nusing this:\n  nat a * nat b = nat \\<bar>c\\<bar> ^ n\n  coprime (nat a) (nat b)\n  \\<lbrakk>0 < n; nat a * nat b = nat \\<bar>c\\<bar> ^ n;\n   coprime (nat a) (nat b)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k. nat a = k ^ n\n  0 < n\n\ngoal (1 subgoal):\n 1. \\<exists>k. nat a = k ^ n", "by blast"], ["proof (state)\nthis:\n  \\<exists>k. nat a = k ^ n\n\ngoal (2 subgoals):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n\n 2. a \\<noteq> 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>k. nat a = k ^ n\n\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "using assms(2) int_nat_eq[of \"a\"]"], ["proof (prove)\nusing this:\n  \\<exists>k. nat a = k ^ n\n  0 \\<le> a\n  int (nat a) = (if 0 \\<le> a then a else 0)\n\ngoal (1 subgoal):\n 1. \\<exists>k. a = k ^ n", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>k. a = k ^ n\n\ngoal (1 subgoal):\n 1. a = 0 \\<Longrightarrow> \\<exists>k. a = k ^ n", "qed (simp add: zero_power[of n] assms(1))"], ["", "text \\<open>Proof of Fermat's last theorem for the case $n=4$: $$\\forall x,y,z:~x^4 + y^4 = z^4 \\Longrightarrow xyz=0.$$\\<close>"], ["", "(* \nNB: this lemma is quite slow, maybe use more steps *)\nprivate"], ["", "lemma nat_power2_diff: \"a \\<ge> (b::nat) \\<Longrightarrow> (a-b)^2 = a^2 + b^2 - 2*a*b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "assume a_ge_b: \"a \\<ge> b\""], ["proof (state)\nthis:\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "hence a2_ge_b2: \"a^2 \\<ge> b^2\""], ["proof (prove)\nusing this:\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. b\\<^sup>2 \\<le> a\\<^sup>2", "by (simp only: power_mono)"], ["proof (state)\nthis:\n  b\\<^sup>2 \\<le> a\\<^sup>2\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "from a_ge_b"], ["proof (chain)\npicking this:\n  b \\<le> a", "have ab_ge_b2: \"a*b \\<ge> b^2\""], ["proof (prove)\nusing this:\n  b \\<le> a\n\ngoal (1 subgoal):\n 1. b\\<^sup>2 \\<le> a * b", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  b\\<^sup>2 \\<le> a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "have \"b*(a-b) + (a-b)^2 = a*(a-b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b * (a - b) + (a - b)\\<^sup>2 = a * (a - b)", "by (simp add: power2_eq_square diff_mult_distrib)"], ["proof (state)\nthis:\n  b * (a - b) + (a - b)\\<^sup>2 = a * (a - b)\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "also"], ["proof (state)\nthis:\n  b * (a - b) + (a - b)\\<^sup>2 = a * (a - b)\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "have \"\\<dots> = a*b + a^2 + (b^2 - b^2) - 2*a*b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * (a - b) = a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b", "by (simp add: diff_mult_distrib2 power2_eq_square)"], ["proof (state)\nthis:\n  a * (a - b) = a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "also"], ["proof (state)\nthis:\n  a * (a - b) = a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "with a2_ge_b2"], ["proof (chain)\npicking this:\n  b\\<^sup>2 \\<le> a\\<^sup>2\n  a * (a - b) = a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b", "have \"\\<dots> = a*b + (a^2 - b^2) + b^2 - 2*a*b\""], ["proof (prove)\nusing this:\n  b\\<^sup>2 \\<le> a\\<^sup>2\n  a * (a - b) = a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b\n\ngoal (1 subgoal):\n 1. a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b =\n    a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b =\n  a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "also"], ["proof (state)\nthis:\n  a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b =\n  a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "with ab_ge_b2"], ["proof (chain)\npicking this:\n  b\\<^sup>2 \\<le> a * b\n  a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b =\n  a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b", "have \"\\<dots> = (a*b - b^2) + a^2 + b^2 - 2*a*b\""], ["proof (prove)\nusing this:\n  b\\<^sup>2 \\<le> a * b\n  a * b + a\\<^sup>2 + (b\\<^sup>2 - b\\<^sup>2) - 2 * a * b =\n  a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b =\n    a * b - b\\<^sup>2 + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "by auto"], ["proof (state)\nthis:\n  a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b =\n  a * b - b\\<^sup>2 + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "also"], ["proof (state)\nthis:\n  a * b + (a\\<^sup>2 - b\\<^sup>2) + b\\<^sup>2 - 2 * a * b =\n  a * b - b\\<^sup>2 + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "have \"\\<dots> = b*(a-b) + a^2 + b^2 - 2*a*b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * b - b\\<^sup>2 + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b =\n    b * (a - b) + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "by (simp only: diff_mult_distrib2 power2_eq_square mult.commute)"], ["proof (state)\nthis:\n  a * b - b\\<^sup>2 + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b =\n  b * (a - b) + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. b \\<le> a \\<Longrightarrow>\n    (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "finally"], ["proof (chain)\npicking this:\n  b * (a - b) + (a - b)\\<^sup>2 =\n  b * (a - b) + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "show ?thesis"], ["proof (prove)\nusing this:\n  b * (a - b) + (a - b)\\<^sup>2 =\n  b * (a - b) + a\\<^sup>2 + b\\<^sup>2 - 2 * a * b\n\ngoal (1 subgoal):\n 1. (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b", "by arith"], ["proof (state)\nthis:\n  (a - b)\\<^sup>2 = a\\<^sup>2 + b\\<^sup>2 - 2 * a * b\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma nat_power_le_imp_le_base: \"\\<lbrakk> n \\<noteq> 0; a^n \\<le> b^n \\<rbrakk> \\<Longrightarrow> (a::nat) \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<noteq> 0; a ^ n \\<le> b ^ n\\<rbrakk>\n    \\<Longrightarrow> a \\<le> b", "by simp"], ["", "private"], ["", "lemma nat_power_inject_base: \"\\<lbrakk> n \\<noteq> 0; a^n = b^n \\<rbrakk> \\<Longrightarrow> (a::nat) = b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<noteq> 0; a ^ n = b ^ n\\<rbrakk> \\<Longrightarrow> a = b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<noteq> 0; a ^ n = b ^ n\\<rbrakk> \\<Longrightarrow> a = b", "assume \"n \\<noteq> 0\" and ab: \"a^n = b^n\""], ["proof (state)\nthis:\n  n \\<noteq> 0\n  a ^ n = b ^ n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<noteq> 0; a ^ n = b ^ n\\<rbrakk> \\<Longrightarrow> a = b", "then"], ["proof (chain)\npicking this:\n  n \\<noteq> 0\n  a ^ n = b ^ n", "obtain m where \"n = Suc m\""], ["proof (prove)\nusing this:\n  n \\<noteq> 0\n  a ^ n = b ^ n\n\ngoal (1 subgoal):\n 1. (\\<And>m. n = Suc m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (frule_tac n=\"n\" in not0_implies_Suc, auto)"], ["proof (state)\nthis:\n  n = Suc m\n\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<noteq> 0; a ^ n = b ^ n\\<rbrakk> \\<Longrightarrow> a = b", "with ab"], ["proof (chain)\npicking this:\n  a ^ n = b ^ n\n  n = Suc m", "have \"a^Suc m = b^Suc m\" and \"a \\<ge> 0\" and \"b \\<ge> 0\""], ["proof (prove)\nusing this:\n  a ^ n = b ^ n\n  n = Suc m\n\ngoal (1 subgoal):\n 1. a ^ Suc m = b ^ Suc m &&& 0 \\<le> a &&& 0 \\<le> b", "by auto"], ["proof (state)\nthis:\n  a ^ Suc m = b ^ Suc m\n  0 \\<le> a\n  0 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<noteq> 0; a ^ n = b ^ n\\<rbrakk> \\<Longrightarrow> a = b", "thus ?thesis"], ["proof (prove)\nusing this:\n  a ^ Suc m = b ^ Suc m\n  0 \\<le> a\n  0 \\<le> b\n\ngoal (1 subgoal):\n 1. a = b", "by (rule power_inject_base)"], ["proof (state)\nthis:\n  a = b\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Parametrisation of Pythagorean triples (over $\\mathbb{N}$ and $\\mathbb{Z}$)\\<close>"], ["", "private"], ["", "theorem nat_euclid_pyth_triples:\n  assumes abc: \"(a::nat)^2 + b^2 = c^2\" and ab_relprime: \"coprime a b\" and aodd: \"odd a\"\n  shows \"\\<exists> p q. a = p^2 - q^2 \\<and> b = 2*p*q \\<and> c = p^2 + q^2 \\<and> coprime p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have two0: \"(2::nat) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "from abc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2", "have a2cb: \"a^2 = c^2 - b^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2", "by arith\n  \\<comment> \\<open>factor $a^2$ in coprime factors $(c-b)$ and $(c+b)$; hence both are squares\\<close>"], ["proof (state)\nthis:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have a2factor: \"a^2 = (c-b)*(c+b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "have \"c*b - c*b = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * b - c * b = 0", "by simp"], ["proof (state)\nthis:\n  c * b - c * b = 0\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "with a2cb"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  c * b - c * b = 0", "have \"a^2 = c*c + c*b - c*b - b*b\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  c * b - c * b = 0\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = c * c + c * b - c * b - b * b", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  a\\<^sup>2 = c * c + c * b - c * b - b * b\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "also"], ["proof (state)\nthis:\n  a\\<^sup>2 = c * c + c * b - c * b - b * b\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "have \"\\<dots> = c*(c+b) - b*(c+b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * c + c * b - c * b - b * b = c * (c + b) - b * (c + b)", "by (simp add: add_mult_distrib2 add_mult_distrib mult.commute)"], ["proof (state)\nthis:\n  c * c + c * b - c * b - b * b = c * (c + b) - b * (c + b)\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "finally"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = c * (c + b) - b * (c + b)", "show ?thesis"], ["proof (prove)\nusing this:\n  a\\<^sup>2 = c * (c + b) - b * (c + b)\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (c - b) * (c + b)", "by (simp only: diff_mult_distrib)"], ["proof (state)\nthis:\n  a\\<^sup>2 = (c - b) * (c + b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a\\<^sup>2 = (c - b) * (c + b)\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have a_nonzero: \"a \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<noteq> 0", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> a \\<noteq> 0 \\<Longrightarrow> False", "assume \"\\<not> a \\<noteq> 0\""], ["proof (state)\nthis:\n  \\<not> a \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<not> a \\<noteq> 0 \\<Longrightarrow> False", "hence \"a = 0\""], ["proof (prove)\nusing this:\n  \\<not> a \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a = 0", "by simp"], ["proof (state)\nthis:\n  a = 0\n\ngoal (1 subgoal):\n 1. \\<not> a \\<noteq> 0 \\<Longrightarrow> False", "with aodd"], ["proof (chain)\npicking this:\n  odd a\n  a = 0", "have \"odd (0::nat)\""], ["proof (prove)\nusing this:\n  odd a\n  a = 0\n\ngoal (1 subgoal):\n 1. odd 0", "by simp"], ["proof (state)\nthis:\n  odd 0\n\ngoal (1 subgoal):\n 1. \\<not> a \\<noteq> 0 \\<Longrightarrow> False", "thus False"], ["proof (prove)\nusing this:\n  odd 0\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have b_less_c: \"b < c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b < c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b < c", "from abc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2", "have \"b^2 \\<le> c^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. b\\<^sup>2 \\<le> c\\<^sup>2", "by linarith"], ["proof (state)\nthis:\n  b\\<^sup>2 \\<le> c\\<^sup>2\n\ngoal (1 subgoal):\n 1. b < c", "with two0"], ["proof (chain)\npicking this:\n  2 \\<noteq> 0\n  b\\<^sup>2 \\<le> c\\<^sup>2", "have \"b \\<le> c\""], ["proof (prove)\nusing this:\n  2 \\<noteq> 0\n  b\\<^sup>2 \\<le> c\\<^sup>2\n\ngoal (1 subgoal):\n 1. b \\<le> c", "by (rule_tac n=\"2\" in nat_power_le_imp_le_base)"], ["proof (state)\nthis:\n  b \\<le> c\n\ngoal (1 subgoal):\n 1. b < c", "moreover"], ["proof (state)\nthis:\n  b \\<le> c\n\ngoal (1 subgoal):\n 1. b < c", "have\"b \\<noteq> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<noteq> c", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. b = c \\<Longrightarrow> False", "assume \"b=c\""], ["proof (state)\nthis:\n  b = c\n\ngoal (1 subgoal):\n 1. b = c \\<Longrightarrow> False", "with a2cb"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  b = c", "have \"a^2 = 0\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  b = c\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = 0", "by simp"], ["proof (state)\nthis:\n  a\\<^sup>2 = 0\n\ngoal (1 subgoal):\n 1. b = c \\<Longrightarrow> False", "with a_nonzero"], ["proof (chain)\npicking this:\n  a \\<noteq> 0\n  a\\<^sup>2 = 0", "show False"], ["proof (prove)\nusing this:\n  a \\<noteq> 0\n  a\\<^sup>2 = 0\n\ngoal (1 subgoal):\n 1. False", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b \\<noteq> c\n\ngoal (1 subgoal):\n 1. b < c", "ultimately"], ["proof (chain)\npicking this:\n  b \\<le> c\n  b \\<noteq> c", "show ?thesis"], ["proof (prove)\nusing this:\n  b \\<le> c\n  b \\<noteq> c\n\ngoal (1 subgoal):\n 1. b < c", "by auto"], ["proof (state)\nthis:\n  b < c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b < c\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "hence b2_le_c2: \"b^2 \\<le> c^2\""], ["proof (prove)\nusing this:\n  b < c\n\ngoal (1 subgoal):\n 1. b\\<^sup>2 \\<le> c\\<^sup>2", "by (simp add: power_mono)"], ["proof (state)\nthis:\n  b\\<^sup>2 \\<le> c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have bc_relprime: \"coprime b c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime b c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coprime b c", "from b2_le_c2"], ["proof (chain)\npicking this:\n  b\\<^sup>2 \\<le> c\\<^sup>2", "have cancelb2: \"c^2-b^2+b^2 = c^2\""], ["proof (prove)\nusing this:\n  b\\<^sup>2 \\<le> c\\<^sup>2\n\ngoal (1 subgoal):\n 1. c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. coprime b c", "let ?g = \"gcd b c\""], ["proof (state)\ngoal (1 subgoal):\n 1. coprime b c", "have \"?g^2 = gcd (b^2) (c^2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2)\n\ngoal (1 subgoal):\n 1. coprime b c", "with cancelb2"], ["proof (chain)\npicking this:\n  c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2)", "have \"?g^2 = gcd (b^2) (c^2-b^2+b^2)\""], ["proof (prove)\nusing this:\n  c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. coprime b c", "hence \"?g^2 = gcd (b^2) (c^2-b^2)\""], ["proof (prove)\nusing this:\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2)", "using gcd_add2[of \"b^2\" \"c^2 - b^2\"]"], ["proof (prove)\nusing this:\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2 + b\\<^sup>2)\n  gcd (b\\<^sup>2) (b\\<^sup>2 + (c\\<^sup>2 - b\\<^sup>2)) =\n  gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2)", "by (simp add: algebra_simps del: gcd_add1)"], ["proof (state)\nthis:\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. coprime b c", "with a2cb"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2)", "have \"?g^2 dvd a^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  (gcd b c)\\<^sup>2 = gcd (b\\<^sup>2) (c\\<^sup>2 - b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (gcd b c)\\<^sup>2 dvd a\\<^sup>2", "by (simp only: gcd_dvd2)"], ["proof (state)\nthis:\n  (gcd b c)\\<^sup>2 dvd a\\<^sup>2\n\ngoal (1 subgoal):\n 1. coprime b c", "hence \"?g dvd a \\<and> ?g dvd b\""], ["proof (prove)\nusing this:\n  (gcd b c)\\<^sup>2 dvd a\\<^sup>2\n\ngoal (1 subgoal):\n 1. gcd b c dvd a \\<and> gcd b c dvd b", "by simp"], ["proof (state)\nthis:\n  gcd b c dvd a \\<and> gcd b c dvd b\n\ngoal (1 subgoal):\n 1. coprime b c", "hence \"?g dvd gcd a b\""], ["proof (prove)\nusing this:\n  gcd b c dvd a \\<and> gcd b c dvd b\n\ngoal (1 subgoal):\n 1. gcd b c dvd gcd a b", "by (simp only: gcd_greatest)"], ["proof (state)\nthis:\n  gcd b c dvd gcd a b\n\ngoal (1 subgoal):\n 1. coprime b c", "with ab_relprime"], ["proof (chain)\npicking this:\n  coprime a b\n  gcd b c dvd gcd a b", "show ?thesis"], ["proof (prove)\nusing this:\n  coprime a b\n  gcd b c dvd gcd a b\n\ngoal (1 subgoal):\n 1. coprime b c", "by (simp add: ac_simps gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  coprime b c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coprime b c\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have p2: \"prime (2::nat)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prime 2", "by simp"], ["proof (state)\nthis:\n  prime 2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have factors_odd: \"odd (c-b) \\<and> odd (c+b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. odd (c - b) \\<and> odd (c + b)", "proof (auto simp only: ccontr)"], ["proof (state)\ngoal (2 subgoals):\n 1. even (c - b) \\<Longrightarrow> False\n 2. even (c + b) \\<Longrightarrow> False", "assume \"even (c-b)\""], ["proof (state)\nthis:\n  even (c - b)\n\ngoal (2 subgoals):\n 1. even (c - b) \\<Longrightarrow> False\n 2. even (c + b) \\<Longrightarrow> False", "with a2factor"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = (c - b) * (c + b)\n  even (c - b)", "have \"2 dvd a^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = (c - b) * (c + b)\n  even (c - b)\n\ngoal (1 subgoal):\n 1. even (a\\<^sup>2)", "by (simp only: dvd_mult2)"], ["proof (state)\nthis:\n  even (a\\<^sup>2)\n\ngoal (2 subgoals):\n 1. even (c - b) \\<Longrightarrow> False\n 2. even (c + b) \\<Longrightarrow> False", "with p2"], ["proof (chain)\npicking this:\n  prime 2\n  even (a\\<^sup>2)", "have \"2 dvd a\""], ["proof (prove)\nusing this:\n  prime 2\n  even (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. even a", "by auto"], ["proof (state)\nthis:\n  even a\n\ngoal (2 subgoals):\n 1. even (c - b) \\<Longrightarrow> False\n 2. even (c + b) \\<Longrightarrow> False", "with aodd"], ["proof (chain)\npicking this:\n  odd a\n  even a", "show False"], ["proof (prove)\nusing this:\n  odd a\n  even a\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. even (c + b) \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. even (c + b) \\<Longrightarrow> False", "assume \"even (c+b)\""], ["proof (state)\nthis:\n  even (c + b)\n\ngoal (1 subgoal):\n 1. even (c + b) \\<Longrightarrow> False", "with a2factor"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = (c - b) * (c + b)\n  even (c + b)", "have \"2 dvd a^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = (c - b) * (c + b)\n  even (c + b)\n\ngoal (1 subgoal):\n 1. even (a\\<^sup>2)", "by (simp only: dvd_mult)"], ["proof (state)\nthis:\n  even (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. even (c + b) \\<Longrightarrow> False", "with p2"], ["proof (chain)\npicking this:\n  prime 2\n  even (a\\<^sup>2)", "have \"2 dvd a\""], ["proof (prove)\nusing this:\n  prime 2\n  even (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. even a", "by auto"], ["proof (state)\nthis:\n  even a\n\ngoal (1 subgoal):\n 1. even (c + b) \\<Longrightarrow> False", "with aodd"], ["proof (chain)\npicking this:\n  odd a\n  even a", "show False"], ["proof (prove)\nusing this:\n  odd a\n  even a\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  odd (c - b) \\<and> odd (c + b)\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have cb1: \"c-b + (c+b) = 2*c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "have \"c-b + (c+b) = ((c-b)+b)+c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c - b + (c + b) = c - b + b + c", "by simp"], ["proof (state)\nthis:\n  c - b + (c + b) = c - b + b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "also"], ["proof (state)\nthis:\n  c - b + (c + b) = c - b + b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "with b_less_c"], ["proof (chain)\npicking this:\n  b < c\n  c - b + (c + b) = c - b + b + c", "have \"\\<dots> = (c+b-b)+c\""], ["proof (prove)\nusing this:\n  b < c\n  c - b + (c + b) = c - b + b + c\n\ngoal (1 subgoal):\n 1. c - b + b + c = c + b - b + c", "by (simp only: diff_add_assoc2)"], ["proof (state)\nthis:\n  c - b + b + c = c + b - b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "also"], ["proof (state)\nthis:\n  c - b + b + c = c + b - b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "have \"\\<dots> = c+c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c + b - b + c = c + c", "by simp"], ["proof (state)\nthis:\n  c + b - b + c = c + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "finally"], ["proof (chain)\npicking this:\n  c - b + (c + b) = c + c", "show ?thesis"], ["proof (prove)\nusing this:\n  c - b + (c + b) = c + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "by simp"], ["proof (state)\nthis:\n  c - b + (c + b) = 2 * c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c - b + (c + b) = 2 * c\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have cb2: \"2*b + (c-b) = c+b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "have \"2*b + (c-b) = b+b + (c - b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = b + b + (c - b)", "by auto"], ["proof (state)\nthis:\n  2 * b + (c - b) = b + b + (c - b)\n\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "also"], ["proof (state)\nthis:\n  2 * b + (c - b) = b + b + (c - b)\n\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "have \"\\<dots> = b + ((c-b)+b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b + b + (c - b) = b + (c - b + b)", "by simp"], ["proof (state)\nthis:\n  b + b + (c - b) = b + (c - b + b)\n\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "also"], ["proof (state)\nthis:\n  b + b + (c - b) = b + (c - b + b)\n\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "with b_less_c"], ["proof (chain)\npicking this:\n  b < c\n  b + b + (c - b) = b + (c - b + b)", "have \" \\<dots> = b + (c+b-b)\""], ["proof (prove)\nusing this:\n  b < c\n  b + b + (c - b) = b + (c - b + b)\n\ngoal (1 subgoal):\n 1. b + (c - b + b) = b + (c + b - b)", "by (simp only: diff_add_assoc2)"], ["proof (state)\nthis:\n  b + (c - b + b) = b + (c + b - b)\n\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "finally"], ["proof (chain)\npicking this:\n  2 * b + (c - b) = b + (c + b - b)", "show ?thesis"], ["proof (prove)\nusing this:\n  2 * b + (c - b) = b + (c + b - b)\n\ngoal (1 subgoal):\n 1. 2 * b + (c - b) = c + b", "by simp"], ["proof (state)\nthis:\n  2 * b + (c - b) = c + b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  2 * b + (c - b) = c + b\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have factors_relprime: \"coprime (c-b) (c+b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "let ?g = \"gcd (c-b) (c+b)\""], ["proof (state)\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "have cb1: \"c-b + (c+b) = 2*c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "have \"c-b + (c+b) = ((c-b)+b)+c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c - b + (c + b) = c - b + b + c", "by simp"], ["proof (state)\nthis:\n  c - b + (c + b) = c - b + b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "also"], ["proof (state)\nthis:\n  c - b + (c + b) = c - b + b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "with b_less_c"], ["proof (chain)\npicking this:\n  b < c\n  c - b + (c + b) = c - b + b + c", "have \"\\<dots> = (c+b-b)+c\""], ["proof (prove)\nusing this:\n  b < c\n  c - b + (c + b) = c - b + b + c\n\ngoal (1 subgoal):\n 1. c - b + b + c = c + b - b + c", "by (simp only: diff_add_assoc2)"], ["proof (state)\nthis:\n  c - b + b + c = c + b - b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "also"], ["proof (state)\nthis:\n  c - b + b + c = c + b - b + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "have \"\\<dots> = c+c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c + b - b + c = c + c", "by simp"], ["proof (state)\nthis:\n  c + b - b + c = c + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "finally"], ["proof (chain)\npicking this:\n  c - b + (c + b) = c + c", "show ?thesis"], ["proof (prove)\nusing this:\n  c - b + (c + b) = c + c\n\ngoal (1 subgoal):\n 1. c - b + (c + b) = 2 * c", "by simp"], ["proof (state)\nthis:\n  c - b + (c + b) = 2 * c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c - b + (c + b) = 2 * c\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "have \"?g = gcd (c-b + (c+b)) (c+b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = gcd (c - b + (c + b)) (c + b)", "by simp"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = gcd (c - b + (c + b)) (c + b)\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "with cb1"], ["proof (chain)\npicking this:\n  c - b + (c + b) = 2 * c\n  gcd (c - b) (c + b) = gcd (c - b + (c + b)) (c + b)", "have \"?g = gcd (2*c) (c+b)\""], ["proof (prove)\nusing this:\n  c - b + (c + b) = 2 * c\n  gcd (c - b) (c + b) = gcd (c - b + (c + b)) (c + b)\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = gcd (2 * c) (c + b)", "by (rule_tac a=\"c-b + (c+b)\" in back_subst)"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = gcd (2 * c) (c + b)\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "hence g2c: \"?g dvd 2*c\""], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) = gcd (2 * c) (c + b)\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) dvd 2 * c", "by (simp only: gcd_dvd1)"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) dvd 2 * c\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "have \"gcd (c-b) (2*b + (c-b)) = gcd (c-b) (2*b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd (c - b) (2 * b + (c - b)) = gcd (c - b) (2 * b)", "using gcd_add2[of \"c - b\" \"2*b + (c - b)\"]"], ["proof (prove)\nusing this:\n  gcd (c - b) (c - b + (2 * b + (c - b))) = gcd (c - b) (2 * b + (c - b))\n\ngoal (1 subgoal):\n 1. gcd (c - b) (2 * b + (c - b)) = gcd (c - b) (2 * b)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  gcd (c - b) (2 * b + (c - b)) = gcd (c - b) (2 * b)\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "with cb2"], ["proof (chain)\npicking this:\n  2 * b + (c - b) = c + b\n  gcd (c - b) (2 * b + (c - b)) = gcd (c - b) (2 * b)", "have \"?g = gcd (c-b) (2*b)\""], ["proof (prove)\nusing this:\n  2 * b + (c - b) = c + b\n  gcd (c - b) (2 * b + (c - b)) = gcd (c - b) (2 * b)\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = gcd (c - b) (2 * b)", "by (rule_tac a=\"2*b + (c-b)\" in back_subst)"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = gcd (c - b) (2 * b)\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "hence g2b: \"?g dvd 2*b\""], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) = gcd (c - b) (2 * b)\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) dvd 2 * b", "by (simp only: gcd_dvd2)"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) dvd 2 * b\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "with g2c"], ["proof (chain)\npicking this:\n  gcd (c - b) (c + b) dvd 2 * c\n  gcd (c - b) (c + b) dvd 2 * b", "have \"?g dvd 2 * gcd b c\""], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) dvd 2 * c\n  gcd (c - b) (c + b) dvd 2 * b\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) dvd 2 * gcd b c", "by (simp only: gcd_greatest gcd_mult_distrib_nat)"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) dvd 2 * gcd b c\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "with bc_relprime"], ["proof (chain)\npicking this:\n  coprime b c\n  gcd (c - b) (c + b) dvd 2 * gcd b c", "have \"?g dvd 2\""], ["proof (prove)\nusing this:\n  coprime b c\n  gcd (c - b) (c + b) dvd 2 * gcd b c\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) dvd 2", "by simp"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) dvd 2\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "moreover"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) dvd 2\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "have \"?g \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) \\<noteq> 0", "using b_less_c"], ["proof (prove)\nusing this:\n  b < c\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "ultimately"], ["proof (chain)\npicking this:\n  gcd (c - b) (c + b) dvd 2\n  gcd (c - b) (c + b) \\<noteq> 0", "have \"1 \\<le> ?g\" \"?g \\<le> 2\""], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) dvd 2\n  gcd (c - b) (c + b) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 \\<le> gcd (c - b) (c + b) &&& gcd (c - b) (c + b) \\<le> 2", "by (simp_all add: dvd_imp_le)"], ["proof (state)\nthis:\n  1 \\<le> gcd (c - b) (c + b)\n  gcd (c - b) (c + b) \\<le> 2\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "then"], ["proof (chain)\npicking this:\n  1 \\<le> gcd (c - b) (c + b)\n  gcd (c - b) (c + b) \\<le> 2", "have g1or2: \"?g = 2 \\<or> ?g = 1\""], ["proof (prove)\nusing this:\n  1 \\<le> gcd (c - b) (c + b)\n  gcd (c - b) (c + b) \\<le> 2\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = 2 \\<or> gcd (c - b) (c + b) = 1", "by arith"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = 2 \\<or> gcd (c - b) (c + b) = 1\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "moreover"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = 2 \\<or> gcd (c - b) (c + b) = 1\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "have \"?g \\<noteq> 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) \\<noteq> 2", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = 2 \\<Longrightarrow> False", "assume \"?g = 2\""], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = 2\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = 2 \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) = 2\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = 2 \\<Longrightarrow> False", "have \"?g dvd c - b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) dvd c - b", "by simp"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) dvd c - b\n\ngoal (1 subgoal):\n 1. gcd (c - b) (c + b) = 2 \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  gcd (c - b) (c + b) = 2\n  gcd (c - b) (c + b) dvd c - b", "show False"], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) = 2\n  gcd (c - b) (c + b) dvd c - b\n\ngoal (1 subgoal):\n 1. False", "using factors_odd"], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) = 2\n  gcd (c - b) (c + b) dvd c - b\n  odd (c - b) \\<and> odd (c + b)\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  gcd (c - b) (c + b) \\<noteq> 2\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "ultimately"], ["proof (chain)\npicking this:\n  gcd (c - b) (c + b) = 2 \\<or> gcd (c - b) (c + b) = 1\n  gcd (c - b) (c + b) \\<noteq> 2", "show ?thesis"], ["proof (prove)\nusing this:\n  gcd (c - b) (c + b) = 2 \\<or> gcd (c - b) (c + b) = 1\n  gcd (c - b) (c + b) \\<noteq> 2\n\ngoal (1 subgoal):\n 1. coprime (c - b) (c + b)", "by (auto intro: gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  coprime (c - b) (c + b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coprime (c - b) (c + b)\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "from a2factor"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = (c - b) * (c + b)", "have \"(c-b)*(c+b) = a^2\" and \"(2::nat) >1\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = (c - b) * (c + b)\n\ngoal (1 subgoal):\n 1. (c - b) * (c + b) = a\\<^sup>2 &&& 1 < 2", "by auto"], ["proof (state)\nthis:\n  (c - b) * (c + b) = a\\<^sup>2\n  1 < 2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "with factors_relprime"], ["proof (chain)\npicking this:\n  coprime (c - b) (c + b)\n  (c - b) * (c + b) = a\\<^sup>2\n  1 < 2", "have \"\\<exists> k. c-b = k^2\""], ["proof (prove)\nusing this:\n  coprime (c - b) (c + b)\n  (c - b) * (c + b) = a\\<^sup>2\n  1 < 2\n\ngoal (1 subgoal):\n 1. \\<exists>k. c - b = k\\<^sup>2", "by (simp only: nat_relprime_power_divisors)"], ["proof (state)\nthis:\n  \\<exists>k. c - b = k\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  \\<exists>k. c - b = k\\<^sup>2", "obtain r where r: \"c-b = r^2\""], ["proof (prove)\nusing this:\n  \\<exists>k. c - b = k\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>r. c - b = r\\<^sup>2 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  c - b = r\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "from a2factor"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = (c - b) * (c + b)", "have \"(c+b)*(c-b) = a^2\" and \"(2::nat) >1\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = (c - b) * (c + b)\n\ngoal (1 subgoal):\n 1. (c + b) * (c - b) = a\\<^sup>2 &&& 1 < 2", "by auto"], ["proof (state)\nthis:\n  (c + b) * (c - b) = a\\<^sup>2\n  1 < 2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "with factors_relprime"], ["proof (chain)\npicking this:\n  coprime (c - b) (c + b)\n  (c + b) * (c - b) = a\\<^sup>2\n  1 < 2", "have \"\\<exists> k. c+b = k^2\""], ["proof (prove)\nusing this:\n  coprime (c - b) (c + b)\n  (c + b) * (c - b) = a\\<^sup>2\n  1 < 2\n\ngoal (1 subgoal):\n 1. \\<exists>k. c + b = k\\<^sup>2", "by (simp only: nat_relprime_power_divisors ac_simps)"], ["proof (state)\nthis:\n  \\<exists>k. c + b = k\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  \\<exists>k. c + b = k\\<^sup>2", "obtain s where s: \"c+b = s^2\""], ["proof (prove)\nusing this:\n  \\<exists>k. c + b = k\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>s. c + b = s\\<^sup>2 \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto\n  \\<comment> \\<open>now $p := (s+r)/2$ and $q := (s-r)/2$ is our solution\\<close>"], ["proof (state)\nthis:\n  c + b = s\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have rs_odd: \"odd r \\<and> odd s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. odd r \\<and> odd s", "proof (auto dest: ccontr)"], ["proof (state)\ngoal (2 subgoals):\n 1. even r \\<Longrightarrow> False\n 2. even s \\<Longrightarrow> False", "assume \"even r\""], ["proof (state)\nthis:\n  even r\n\ngoal (2 subgoals):\n 1. even r \\<Longrightarrow> False\n 2. even s \\<Longrightarrow> False", "hence \"2 dvd r\""], ["proof (prove)\nusing this:\n  even r\n\ngoal (1 subgoal):\n 1. even r", "by presburger"], ["proof (state)\nthis:\n  even r\n\ngoal (2 subgoals):\n 1. even r \\<Longrightarrow> False\n 2. even s \\<Longrightarrow> False", "with r"], ["proof (chain)\npicking this:\n  c - b = r\\<^sup>2\n  even r", "have  \"2 dvd (c-b)\""], ["proof (prove)\nusing this:\n  c - b = r\\<^sup>2\n  even r\n\ngoal (1 subgoal):\n 1. even (c - b)", "by (simp only: power2_eq_square dvd_mult)"], ["proof (state)\nthis:\n  even (c - b)\n\ngoal (2 subgoals):\n 1. even r \\<Longrightarrow> False\n 2. even s \\<Longrightarrow> False", "with factors_odd"], ["proof (chain)\npicking this:\n  odd (c - b) \\<and> odd (c + b)\n  even (c - b)", "show False"], ["proof (prove)\nusing this:\n  odd (c - b) \\<and> odd (c + b)\n  even (c - b)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. even s \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. even s \\<Longrightarrow> False", "assume \"even s\""], ["proof (state)\nthis:\n  even s\n\ngoal (1 subgoal):\n 1. even s \\<Longrightarrow> False", "hence \"2 dvd s\""], ["proof (prove)\nusing this:\n  even s\n\ngoal (1 subgoal):\n 1. even s", "by presburger"], ["proof (state)\nthis:\n  even s\n\ngoal (1 subgoal):\n 1. even s \\<Longrightarrow> False", "with s"], ["proof (chain)\npicking this:\n  c + b = s\\<^sup>2\n  even s", "have \"2 dvd (c+b)\""], ["proof (prove)\nusing this:\n  c + b = s\\<^sup>2\n  even s\n\ngoal (1 subgoal):\n 1. even (c + b)", "by (simp only: power2_eq_square dvd_mult)"], ["proof (state)\nthis:\n  even (c + b)\n\ngoal (1 subgoal):\n 1. even s \\<Longrightarrow> False", "with factors_odd"], ["proof (chain)\npicking this:\n  odd (c - b) \\<and> odd (c + b)\n  even (c + b)", "show False"], ["proof (prove)\nusing this:\n  odd (c - b) \\<and> odd (c + b)\n  even (c + b)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  odd r \\<and> odd s\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "obtain m where m: \"m = s-r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>m. m = s - r \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  m = s - r\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "from r s"], ["proof (chain)\npicking this:\n  c - b = r\\<^sup>2\n  c + b = s\\<^sup>2", "have \"r^2 \\<le> s^2\""], ["proof (prove)\nusing this:\n  c - b = r\\<^sup>2\n  c + b = s\\<^sup>2\n\ngoal (1 subgoal):\n 1. r\\<^sup>2 \\<le> s\\<^sup>2", "by arith"], ["proof (state)\nthis:\n  r\\<^sup>2 \\<le> s\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "with two0"], ["proof (chain)\npicking this:\n  2 \\<noteq> 0\n  r\\<^sup>2 \\<le> s\\<^sup>2", "have \"r \\<le> s\""], ["proof (prove)\nusing this:\n  2 \\<noteq> 0\n  r\\<^sup>2 \\<le> s\\<^sup>2\n\ngoal (1 subgoal):\n 1. r \\<le> s", "by (rule_tac n=\"2\" in nat_power_le_imp_le_base)"], ["proof (state)\nthis:\n  r \\<le> s\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "with m"], ["proof (chain)\npicking this:\n  m = s - r\n  r \\<le> s", "have m2: \"s = r + m\""], ["proof (prove)\nusing this:\n  m = s - r\n  r \\<le> s\n\ngoal (1 subgoal):\n 1. s = r + m", "by simp"], ["proof (state)\nthis:\n  s = r + m\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have \"even m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. even m", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. odd m \\<Longrightarrow> False", "assume \"odd m\""], ["proof (state)\nthis:\n  odd m\n\ngoal (1 subgoal):\n 1. odd m \\<Longrightarrow> False", "with rs_odd and m2"], ["proof (chain)\npicking this:\n  odd r \\<and> odd s\n  s = r + m\n  odd m", "show False"], ["proof (prove)\nusing this:\n  odd r \\<and> odd s\n  s = r + m\n  odd m\n\ngoal (1 subgoal):\n 1. False", "by presburger"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  even m\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  even m", "obtain q where \"m = 2*q\""], ["proof (prove)\nusing this:\n  even m\n\ngoal (1 subgoal):\n 1. (\\<And>q. m = 2 * q \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", ".."], ["proof (state)\nthis:\n  m = 2 * q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "with m2"], ["proof (chain)\npicking this:\n  s = r + m\n  m = 2 * q", "have q: \"s = r + 2*q\""], ["proof (prove)\nusing this:\n  s = r + m\n  m = 2 * q\n\ngoal (1 subgoal):\n 1. s = r + 2 * q", "by simp"], ["proof (state)\nthis:\n  s = r + 2 * q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "obtain p where p: \"p = r+q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>p. p = r + q \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  p = r + q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have c: \"c = p^2 + q^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "from cb1 and r and s"], ["proof (chain)\npicking this:\n  c - b + (c + b) = 2 * c\n  c - b = r\\<^sup>2\n  c + b = s\\<^sup>2", "have \"2*c = r^2 + s^2\""], ["proof (prove)\nusing this:\n  c - b + (c + b) = 2 * c\n  c - b = r\\<^sup>2\n  c + b = s\\<^sup>2\n\ngoal (1 subgoal):\n 1. 2 * c = r\\<^sup>2 + s\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  2 * c = r\\<^sup>2 + s\\<^sup>2\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "also"], ["proof (state)\nthis:\n  2 * c = r\\<^sup>2 + s\\<^sup>2\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "with q"], ["proof (chain)\npicking this:\n  s = r + 2 * q\n  2 * c = r\\<^sup>2 + s\\<^sup>2", "have \"\\<dots> = 2*r^2+(2*q)^2+2*r*(2*q)\""], ["proof (prove)\nusing this:\n  s = r + 2 * q\n  2 * c = r\\<^sup>2 + s\\<^sup>2\n\ngoal (1 subgoal):\n 1. r\\<^sup>2 + s\\<^sup>2 =\n    2 * r\\<^sup>2 + (2 * q)\\<^sup>2 + 2 * r * (2 * q)", "by algebra"], ["proof (state)\nthis:\n  r\\<^sup>2 + s\\<^sup>2 = 2 * r\\<^sup>2 + (2 * q)\\<^sup>2 + 2 * r * (2 * q)\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "also"], ["proof (state)\nthis:\n  r\\<^sup>2 + s\\<^sup>2 = 2 * r\\<^sup>2 + (2 * q)\\<^sup>2 + 2 * r * (2 * q)\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "have \"\\<dots> = 2*r^2+2^2*q^2+2*2*q*r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * r\\<^sup>2 + (2 * q)\\<^sup>2 + 2 * r * (2 * q) =\n    2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r", "by (simp add: power_mult_distrib)"], ["proof (state)\nthis:\n  2 * r\\<^sup>2 + (2 * q)\\<^sup>2 + 2 * r * (2 * q) =\n  2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "also"], ["proof (state)\nthis:\n  2 * r\\<^sup>2 + (2 * q)\\<^sup>2 + 2 * r * (2 * q) =\n  2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "have \"\\<dots> = 2*(r^2+2*q*r+q^2)+2*q^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r =\n    2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r =\n  2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "also"], ["proof (state)\nthis:\n  2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r =\n  2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "with p"], ["proof (chain)\npicking this:\n  p = r + q\n  2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r =\n  2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2", "have \"\\<dots> = 2*p^2+2*q^2\""], ["proof (prove)\nusing this:\n  p = r + q\n  2 * r\\<^sup>2 + 2\\<^sup>2 * q\\<^sup>2 + 2 * 2 * q * r =\n  2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. 2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2 =\n    2 * p\\<^sup>2 + 2 * q\\<^sup>2", "by algebra"], ["proof (state)\nthis:\n  2 * (r\\<^sup>2 + 2 * q * r + q\\<^sup>2) + 2 * q\\<^sup>2 =\n  2 * p\\<^sup>2 + 2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  2 * c = 2 * p\\<^sup>2 + 2 * q\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  2 * c = 2 * p\\<^sup>2 + 2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. c = p\\<^sup>2 + q\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  c = p\\<^sup>2 + q\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c = p\\<^sup>2 + q\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  c = p\\<^sup>2 + q\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have b: \"b = 2*p*q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b = 2 * p * q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b = 2 * p * q", "from cb2 and r and s"], ["proof (chain)\npicking this:\n  2 * b + (c - b) = c + b\n  c - b = r\\<^sup>2\n  c + b = s\\<^sup>2", "have \"2*b = s^2 - r^2\""], ["proof (prove)\nusing this:\n  2 * b + (c - b) = c + b\n  c - b = r\\<^sup>2\n  c + b = s\\<^sup>2\n\ngoal (1 subgoal):\n 1. 2 * b = s\\<^sup>2 - r\\<^sup>2", "by arith"], ["proof (state)\nthis:\n  2 * b = s\\<^sup>2 - r\\<^sup>2\n\ngoal (1 subgoal):\n 1. b = 2 * p * q", "also"], ["proof (state)\nthis:\n  2 * b = s\\<^sup>2 - r\\<^sup>2\n\ngoal (1 subgoal):\n 1. b = 2 * p * q", "with q"], ["proof (chain)\npicking this:\n  s = r + 2 * q\n  2 * b = s\\<^sup>2 - r\\<^sup>2", "have \"\\<dots> = (2*q)^2 + 2*r*(2*q)\""], ["proof (prove)\nusing this:\n  s = r + 2 * q\n  2 * b = s\\<^sup>2 - r\\<^sup>2\n\ngoal (1 subgoal):\n 1. s\\<^sup>2 - r\\<^sup>2 = (2 * q)\\<^sup>2 + 2 * r * (2 * q)", "by (simp add: power2_sum)"], ["proof (state)\nthis:\n  s\\<^sup>2 - r\\<^sup>2 = (2 * q)\\<^sup>2 + 2 * r * (2 * q)\n\ngoal (1 subgoal):\n 1. b = 2 * p * q", "also"], ["proof (state)\nthis:\n  s\\<^sup>2 - r\\<^sup>2 = (2 * q)\\<^sup>2 + 2 * r * (2 * q)\n\ngoal (1 subgoal):\n 1. b = 2 * p * q", "with p"], ["proof (chain)\npicking this:\n  p = r + q\n  s\\<^sup>2 - r\\<^sup>2 = (2 * q)\\<^sup>2 + 2 * r * (2 * q)", "have \"\\<dots> = 4*q*p\""], ["proof (prove)\nusing this:\n  p = r + q\n  s\\<^sup>2 - r\\<^sup>2 = (2 * q)\\<^sup>2 + 2 * r * (2 * q)\n\ngoal (1 subgoal):\n 1. (2 * q)\\<^sup>2 + 2 * r * (2 * q) = 4 * q * p", "by (simp add: power2_eq_square add_mult_distrib2)"], ["proof (state)\nthis:\n  (2 * q)\\<^sup>2 + 2 * r * (2 * q) = 4 * q * p\n\ngoal (1 subgoal):\n 1. b = 2 * p * q", "finally"], ["proof (chain)\npicking this:\n  2 * b = 4 * q * p", "show ?thesis"], ["proof (prove)\nusing this:\n  2 * b = 4 * q * p\n\ngoal (1 subgoal):\n 1. b = 2 * p * q", "by auto"], ["proof (state)\nthis:\n  b = 2 * p * q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  b = 2 * p * q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  b = 2 * p * q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have a: \"a = p^2 - q^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "from p"], ["proof (chain)\npicking this:\n  p = r + q", "have \"p\\<ge>q\""], ["proof (prove)\nusing this:\n  p = r + q\n\ngoal (1 subgoal):\n 1. q \\<le> p", "by simp"], ["proof (state)\nthis:\n  q \\<le> p\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "hence p2_ge_q2: \"p^2 \\<ge> q^2\""], ["proof (prove)\nusing this:\n  q \\<le> p\n\ngoal (1 subgoal):\n 1. q\\<^sup>2 \\<le> p\\<^sup>2", "by (simp only: power_mono)"], ["proof (state)\nthis:\n  q\\<^sup>2 \\<le> p\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "from a2cb and b and c"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  b = 2 * p * q\n  c = p\\<^sup>2 + q\\<^sup>2", "have \"a^2 = (p^2 + q^2)^2 - (2*p*q)^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = c\\<^sup>2 - b\\<^sup>2\n  b = 2 * p * q\n  c = p\\<^sup>2 + q\\<^sup>2\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  a\\<^sup>2 = (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "also"], ["proof (state)\nthis:\n  a\\<^sup>2 = (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "have \"\\<dots> = (p^2)^2 + (q^2)^2 - 2*(p^2)*(q^2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2 =\n    (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2", "by (auto simp add: power2_sum power_mult_distrib ac_simps)"], ["proof (state)\nthis:\n  (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2 =\n  (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "also"], ["proof (state)\nthis:\n  (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2 =\n  (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "with p2_ge_q2"], ["proof (chain)\npicking this:\n  q\\<^sup>2 \\<le> p\\<^sup>2\n  (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2 =\n  (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2", "have \"\\<dots> = (p^2 - q^2)^2\""], ["proof (prove)\nusing this:\n  q\\<^sup>2 \\<le> p\\<^sup>2\n  (p\\<^sup>2 + q\\<^sup>2)\\<^sup>2 - (2 * p * q)\\<^sup>2 =\n  (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2\n\ngoal (1 subgoal):\n 1. (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2 =\n    (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2", "by (simp only: nat_power2_diff)"], ["proof (state)\nthis:\n  (p\\<^sup>2)\\<^sup>2 + (q\\<^sup>2)\\<^sup>2 - 2 * p\\<^sup>2 * q\\<^sup>2 =\n  (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2", "have \"a^2 = (p^2 - q^2)^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 = (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  a\\<^sup>2 = (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "with two0"], ["proof (chain)\npicking this:\n  2 \\<noteq> 0\n  a\\<^sup>2 = (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  2 \\<noteq> 0\n  a\\<^sup>2 = (p\\<^sup>2 - q\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2", "by (rule_tac n=\"2\" in nat_power_inject_base)"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "have \"coprime p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime p q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coprime p q", "let ?k = \"gcd p q\""], ["proof (state)\ngoal (1 subgoal):\n 1. coprime p q", "have \"?k dvd p \\<and> ?k dvd q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd p q dvd p \\<and> gcd p q dvd q", "by simp"], ["proof (state)\nthis:\n  gcd p q dvd p \\<and> gcd p q dvd q\n\ngoal (1 subgoal):\n 1. coprime p q", "with b and a"], ["proof (chain)\npicking this:\n  b = 2 * p * q\n  a = p\\<^sup>2 - q\\<^sup>2\n  gcd p q dvd p \\<and> gcd p q dvd q", "have \"?k dvd a \\<and> ?k dvd b\""], ["proof (prove)\nusing this:\n  b = 2 * p * q\n  a = p\\<^sup>2 - q\\<^sup>2\n  gcd p q dvd p \\<and> gcd p q dvd q\n\ngoal (1 subgoal):\n 1. gcd p q dvd a \\<and> gcd p q dvd b", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  gcd p q dvd a \\<and> gcd p q dvd b\n\ngoal (1 subgoal):\n 1. coprime p q", "hence \"?k dvd gcd a b\""], ["proof (prove)\nusing this:\n  gcd p q dvd a \\<and> gcd p q dvd b\n\ngoal (1 subgoal):\n 1. gcd p q dvd gcd a b", "by (simp only: gcd_greatest)"], ["proof (state)\nthis:\n  gcd p q dvd gcd a b\n\ngoal (1 subgoal):\n 1. coprime p q", "with ab_relprime"], ["proof (chain)\npicking this:\n  coprime a b\n  gcd p q dvd gcd a b", "show ?thesis"], ["proof (prove)\nusing this:\n  coprime a b\n  gcd p q dvd gcd a b\n\ngoal (1 subgoal):\n 1. coprime p q", "by (auto intro: gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  coprime p q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "ultimately"], ["proof (chain)\npicking this:\n  c = p\\<^sup>2 + q\\<^sup>2\n  b = 2 * p * q\n  a = p\\<^sup>2 - q\\<^sup>2\n  coprime p q", "show ?thesis"], ["proof (prove)\nusing this:\n  c = p\\<^sup>2 + q\\<^sup>2\n  b = 2 * p * q\n  a = p\\<^sup>2 - q\\<^sup>2\n  coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and> c = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Now for the case of integers. Based on \\textit{nat-euclid-pyth-triples}.\\<close>"], ["", "private"], ["", "corollary int_euclid_pyth_triples: \"\\<lbrakk> coprime (a::int) b; odd a; a^2 + b^2 = c^2 \\<rbrakk>\n  \\<Longrightarrow> \\<exists> p q. a = p^2 - q^2 \\<and> b = 2*p*q \\<and> \\<bar>c\\<bar> = p^2 + q^2 \\<and> coprime p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "assume ab_rel: \"coprime a b\" and aodd: \"odd a\" and abc: \"a^2 + b^2 = c^2\""], ["proof (state)\nthis:\n  coprime a b\n  odd a\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "let ?a = \"nat\\<bar>a\\<bar>\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "let ?b = \"nat\\<bar>b\\<bar>\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "let ?c = \"nat\\<bar>c\\<bar>\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "have ab2_pos: \"a^2 \\<ge> 0 \\<and> b^2 \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> a\\<^sup>2 \\<and> 0 \\<le> b\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  0 \\<le> a\\<^sup>2 \\<and> 0 \\<le> b\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "hence \"nat(a^2) + nat(b^2) = nat(a^2 + b^2)\""], ["proof (prove)\nusing this:\n  0 \\<le> a\\<^sup>2 \\<and> 0 \\<le> b\\<^sup>2\n\ngoal (1 subgoal):\n 1. nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (a\\<^sup>2 + b\\<^sup>2)", "by (simp only: nat_add_distrib)"], ["proof (state)\nthis:\n  nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (a\\<^sup>2 + b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "with abc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n  nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (a\\<^sup>2 + b\\<^sup>2)", "have \"nat(a^2) + nat(b^2) = nat(c^2)\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\n  nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (a\\<^sup>2 + b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (c\\<^sup>2)", "by presburger"], ["proof (state)\nthis:\n  nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (c\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "hence \"nat(\\<bar>a\\<bar>^2) + nat(\\<bar>b\\<bar>^2) = nat(\\<bar>c\\<bar>^2)\""], ["proof (prove)\nusing this:\n  nat (a\\<^sup>2) + nat (b\\<^sup>2) = nat (c\\<^sup>2)\n\ngoal (1 subgoal):\n 1. nat (\\<bar>a\\<bar>\\<^sup>2) + nat (\\<bar>b\\<bar>\\<^sup>2) =\n    nat (\\<bar>c\\<bar>\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  nat (\\<bar>a\\<bar>\\<^sup>2) + nat (\\<bar>b\\<bar>\\<^sup>2) =\n  nat (\\<bar>c\\<bar>\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "hence new_abc: \"?a^2 + ?b^2 = ?c^2\""], ["proof (prove)\nusing this:\n  nat (\\<bar>a\\<bar>\\<^sup>2) + nat (\\<bar>b\\<bar>\\<^sup>2) =\n  nat (\\<bar>c\\<bar>\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (nat \\<bar>a\\<bar>)\\<^sup>2 + (nat \\<bar>b\\<bar>)\\<^sup>2 =\n    (nat \\<bar>c\\<bar>)\\<^sup>2", "by (simp only: nat_mult_distrib power2_eq_square nat_add_distrib)"], ["proof (state)\nthis:\n  (nat \\<bar>a\\<bar>)\\<^sup>2 + (nat \\<bar>b\\<bar>)\\<^sup>2 =\n  (nat \\<bar>c\\<bar>)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "moreover"], ["proof (state)\nthis:\n  (nat \\<bar>a\\<bar>)\\<^sup>2 + (nat \\<bar>b\\<bar>)\\<^sup>2 =\n  (nat \\<bar>c\\<bar>)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "from ab_rel"], ["proof (chain)\npicking this:\n  coprime a b", "have new_ab_rel: \"coprime ?a ?b\""], ["proof (prove)\nusing this:\n  coprime a b\n\ngoal (1 subgoal):\n 1. coprime (nat \\<bar>a\\<bar>) (nat \\<bar>b\\<bar>)", "by (simp add: gcd_int_def)"], ["proof (state)\nthis:\n  coprime (nat \\<bar>a\\<bar>) (nat \\<bar>b\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "moreover"], ["proof (state)\nthis:\n  coprime (nat \\<bar>a\\<bar>) (nat \\<bar>b\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "have new_a_odd: \"odd ?a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. odd (nat \\<bar>a\\<bar>)", "using aodd"], ["proof (prove)\nusing this:\n  odd a\n\ngoal (1 subgoal):\n 1. odd (nat \\<bar>a\\<bar>)", "by simp"], ["proof (state)\nthis:\n  odd (nat \\<bar>a\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "ultimately"], ["proof (chain)\npicking this:\n  (nat \\<bar>a\\<bar>)\\<^sup>2 + (nat \\<bar>b\\<bar>)\\<^sup>2 =\n  (nat \\<bar>c\\<bar>)\\<^sup>2\n  coprime (nat \\<bar>a\\<bar>) (nat \\<bar>b\\<bar>)\n  odd (nat \\<bar>a\\<bar>)", "have \n    \"\\<exists> p q. ?a = p^2-q^2 \\<and> ?b = 2*p*q \\<and> ?c = p^2 + q^2 \\<and> coprime p q\""], ["proof (prove)\nusing this:\n  (nat \\<bar>a\\<bar>)\\<^sup>2 + (nat \\<bar>b\\<bar>)\\<^sup>2 =\n  (nat \\<bar>c\\<bar>)\\<^sup>2\n  coprime (nat \\<bar>a\\<bar>) (nat \\<bar>b\\<bar>)\n  odd (nat \\<bar>a\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       nat \\<bar>a\\<bar> = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       nat \\<bar>b\\<bar> = 2 * p * q \\<and>\n       nat \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (rule_tac a=\"?a\" and b = \"?b\" and c=\"?c\" in nat_euclid_pyth_triples)"], ["proof (state)\nthis:\n  \\<exists>p q.\n     nat \\<bar>a\\<bar> = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     nat \\<bar>b\\<bar> = 2 * p * q \\<and>\n     nat \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "then"], ["proof (chain)\npicking this:\n  \\<exists>p q.\n     nat \\<bar>a\\<bar> = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     nat \\<bar>b\\<bar> = 2 * p * q \\<and>\n     nat \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "obtain m and n where mn: \n    \"?a = m^2-n^2 \\<and> ?b = 2*m*n \\<and> ?c = m^2 + n^2 \\<and> coprime m n\""], ["proof (prove)\nusing this:\n  \\<exists>p q.\n     nat \\<bar>a\\<bar> = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     nat \\<bar>b\\<bar> = 2 * p * q \\<and>\n     nat \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. (\\<And>m n.\n        nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n        nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n        nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and>\n        coprime m n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "have \"n^2 \\<le> m^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n\\<^sup>2 \\<le> m\\<^sup>2", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> n\\<^sup>2 \\<le> m\\<^sup>2 \\<Longrightarrow> False", "assume \"\\<not> n^2 \\<le> m^2\""], ["proof (state)\nthis:\n  \\<not> n\\<^sup>2 \\<le> m\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<not> n\\<^sup>2 \\<le> m\\<^sup>2 \\<Longrightarrow> False", "with mn"], ["proof (chain)\npicking this:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n\n  \\<not> n\\<^sup>2 \\<le> m\\<^sup>2", "have \"?a = 0\""], ["proof (prove)\nusing this:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n\n  \\<not> n\\<^sup>2 \\<le> m\\<^sup>2\n\ngoal (1 subgoal):\n 1. nat \\<bar>a\\<bar> = 0", "by auto"], ["proof (state)\nthis:\n  nat \\<bar>a\\<bar> = 0\n\ngoal (1 subgoal):\n 1. \\<not> n\\<^sup>2 \\<le> m\\<^sup>2 \\<Longrightarrow> False", "with new_a_odd"], ["proof (chain)\npicking this:\n  odd (nat \\<bar>a\\<bar>)\n  nat \\<bar>a\\<bar> = 0", "show False"], ["proof (prove)\nusing this:\n  odd (nat \\<bar>a\\<bar>)\n  nat \\<bar>a\\<bar> = 0\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  n\\<^sup>2 \\<le> m\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "moreover"], ["proof (state)\nthis:\n  n\\<^sup>2 \\<le> m\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "from mn"], ["proof (chain)\npicking this:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n", "have \"int ?a = int(m^2 - n^2)\" and \"int ?b = int(2*m*n)\" \n    and \"int ?c = int(m^2 + n^2)\""], ["proof (prove)\nusing this:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n\n\ngoal (1 subgoal):\n 1. int (nat \\<bar>a\\<bar>) = int (m\\<^sup>2 - n\\<^sup>2) &&&\n    int (nat \\<bar>b\\<bar>) = int (2 * m * n) &&&\n    int (nat \\<bar>c\\<bar>) = int (m\\<^sup>2 + n\\<^sup>2)", "by auto"], ["proof (state)\nthis:\n  int (nat \\<bar>a\\<bar>) = int (m\\<^sup>2 - n\\<^sup>2)\n  int (nat \\<bar>b\\<bar>) = int (2 * m * n)\n  int (nat \\<bar>c\\<bar>) = int (m\\<^sup>2 + n\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "ultimately"], ["proof (chain)\npicking this:\n  n\\<^sup>2 \\<le> m\\<^sup>2\n  int (nat \\<bar>a\\<bar>) = int (m\\<^sup>2 - n\\<^sup>2)\n  int (nat \\<bar>b\\<bar>) = int (2 * m * n)\n  int (nat \\<bar>c\\<bar>) = int (m\\<^sup>2 + n\\<^sup>2)", "have \"\\<bar>a\\<bar> = int(m^2) - int(n^2)\" and \"\\<bar>b\\<bar> = int(2*m*n)\"\n    and \"\\<bar>c\\<bar> = int(m^2) + int(n^2)\""], ["proof (prove)\nusing this:\n  n\\<^sup>2 \\<le> m\\<^sup>2\n  int (nat \\<bar>a\\<bar>) = int (m\\<^sup>2 - n\\<^sup>2)\n  int (nat \\<bar>b\\<bar>) = int (2 * m * n)\n  int (nat \\<bar>c\\<bar>) = int (m\\<^sup>2 + n\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<bar>a\\<bar> = int (m\\<^sup>2) - int (n\\<^sup>2) &&&\n    \\<bar>b\\<bar> = int (2 * m * n) &&&\n    \\<bar>c\\<bar> = int (m\\<^sup>2) + int (n\\<^sup>2)", "by (simp add: of_nat_diff)+"], ["proof (state)\nthis:\n  \\<bar>a\\<bar> = int (m\\<^sup>2) - int (n\\<^sup>2)\n  \\<bar>b\\<bar> = int (2 * m * n)\n  \\<bar>c\\<bar> = int (m\\<^sup>2) + int (n\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "hence absabc: \"\\<bar>a\\<bar> = (int m)^2 - (int n)^2 \\<and> \\<bar>b\\<bar> = 2*(int m)*int n\n    \\<and> \\<bar>c\\<bar> = (int m)^2 + (int n)^2\""], ["proof (prove)\nusing this:\n  \\<bar>a\\<bar> = int (m\\<^sup>2) - int (n\\<^sup>2)\n  \\<bar>b\\<bar> = int (2 * m * n)\n  \\<bar>c\\<bar> = int (m\\<^sup>2) + int (n\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n    \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n    \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "from mn"], ["proof (chain)\npicking this:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n", "have mn_rel: \"coprime (int m) (int n)\""], ["proof (prove)\nusing this:\n  nat \\<bar>a\\<bar> = m\\<^sup>2 - n\\<^sup>2 \\<and>\n  nat \\<bar>b\\<bar> = 2 * m * n \\<and>\n  nat \\<bar>c\\<bar> = m\\<^sup>2 + n\\<^sup>2 \\<and> coprime m n\n\ngoal (1 subgoal):\n 1. coprime (int m) (int n)", "by (simp add: gcd_int_def)"], ["proof (state)\nthis:\n  coprime (int m) (int n)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>coprime a b; odd a; a\\<^sup>2 + b\\<^sup>2 = c\\<^sup>2\\<rbrakk>\n    \\<Longrightarrow> \\<exists>p q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "show \"\\<exists> p q. a = p^2 - q^2 \\<and> b = 2*p*q \\<and> \\<bar>c\\<bar> = p^2 + q^2 \\<and> coprime p q\" \n    (is \"\\<exists> p q. ?Q p q\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "proof (cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "assume apos: \"a \\<ge> 0\""], ["proof (state)\nthis:\n  0 \\<le> a\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  0 \\<le> a", "obtain p where p: \"p = int m\""], ["proof (prove)\nusing this:\n  0 \\<le> a\n\ngoal (1 subgoal):\n 1. (\\<And>p. p = int m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  p = int m\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "hence \"\\<exists> q. ?Q p q\""], ["proof (prove)\nusing this:\n  p = int m\n\ngoal (1 subgoal):\n 1. \\<exists>q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "proof (cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int m; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int m; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "assume bpos: \"b \\<ge> 0\""], ["proof (state)\nthis:\n  0 \\<le> b\n\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int m; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int m; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "then"], ["proof (chain)\npicking this:\n  0 \\<le> b", "obtain q where \"q = int n\""], ["proof (prove)\nusing this:\n  0 \\<le> b\n\ngoal (1 subgoal):\n 1. (\\<And>q. q = int n \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  q = int n\n\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int m; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int m; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "with p apos bpos absabc mn_rel"], ["proof (chain)\npicking this:\n  p = int m\n  0 \\<le> a\n  0 \\<le> b\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = int n", "have \"?Q p q\""], ["proof (prove)\nusing this:\n  p = int m\n  0 \\<le> a\n  0 \\<le> b\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = int n\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n    b = 2 * p * q \\<and>\n    \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by simp"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int m; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int m; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int m; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int m; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "assume \"\\<not> b\\<ge>0\""], ["proof (state)\nthis:\n  \\<not> 0 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int m; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "hence bneg: \"b<0\""], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> b\n\ngoal (1 subgoal):\n 1. b < 0", "by simp"], ["proof (state)\nthis:\n  b < 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int m; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "then"], ["proof (chain)\npicking this:\n  b < 0", "obtain q where \"q = - int n\""], ["proof (prove)\nusing this:\n  b < 0\n\ngoal (1 subgoal):\n 1. (\\<And>q. q = - int n \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  q = - int n\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int m; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "with p apos bneg absabc mn_rel"], ["proof (chain)\npicking this:\n  p = int m\n  0 \\<le> a\n  b < 0\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = - int n", "have \"?Q p q\""], ["proof (prove)\nusing this:\n  p = int m\n  0 \\<le> a\n  b < 0\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = - int n\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n    b = 2 * p * q \\<and>\n    \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by simp"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int m; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n 2. \\<not> ?P \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (simp only: exI)"], ["proof (state)\nthis:\n  \\<exists>p q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "assume \"\\<not> a\\<ge>0\""], ["proof (state)\nthis:\n  \\<not> 0 \\<le> a\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "hence aneg: \"a<0\""], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> a\n\ngoal (1 subgoal):\n 1. a < 0", "by simp"], ["proof (state)\nthis:\n  a < 0\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  a < 0", "obtain p where p: \"p = int n\""], ["proof (prove)\nusing this:\n  a < 0\n\ngoal (1 subgoal):\n 1. (\\<And>p. p = int n \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  p = int n\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "hence \"\\<exists> q. ?Q p q\""], ["proof (prove)\nusing this:\n  p = int n\n\ngoal (1 subgoal):\n 1. \\<exists>q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "proof (cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int n; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int n; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "assume bpos: \"b \\<ge> 0\""], ["proof (state)\nthis:\n  0 \\<le> b\n\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int n; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int n; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "then"], ["proof (chain)\npicking this:\n  0 \\<le> b", "obtain q where \"q = int m\""], ["proof (prove)\nusing this:\n  0 \\<le> b\n\ngoal (1 subgoal):\n 1. (\\<And>q. q = int m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  q = int m\n\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int n; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int n; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "with p aneg bpos absabc mn_rel"], ["proof (chain)\npicking this:\n  p = int n\n  a < 0\n  0 \\<le> b\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = int m", "have \"?Q p q\""], ["proof (prove)\nusing this:\n  p = int n\n  a < 0\n  0 \\<le> b\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = int m\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n    b = 2 * p * q \\<and>\n    \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (2 subgoals):\n 1. \\<lbrakk>p = int n; ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q\n 2. \\<lbrakk>p = int n; \\<not> ?P1\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int n; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int n; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "assume \"\\<not> b\\<ge>0\""], ["proof (state)\nthis:\n  \\<not> 0 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int n; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "hence bneg: \"b<0\""], ["proof (prove)\nusing this:\n  \\<not> 0 \\<le> b\n\ngoal (1 subgoal):\n 1. b < 0", "by simp"], ["proof (state)\nthis:\n  b < 0\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int n; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "then"], ["proof (chain)\npicking this:\n  b < 0", "obtain q where \"q = - int m\""], ["proof (prove)\nusing this:\n  b < 0\n\ngoal (1 subgoal):\n 1. (\\<And>q. q = - int m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by simp"], ["proof (state)\nthis:\n  q = - int m\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int n; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "with p aneg bneg absabc mn_rel"], ["proof (chain)\npicking this:\n  p = int n\n  a < 0\n  b < 0\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = - int m", "have \"?Q p q\""], ["proof (prove)\nusing this:\n  p = int n\n  a < 0\n  b < 0\n  \\<bar>a\\<bar> = (int m)\\<^sup>2 - (int n)\\<^sup>2 \\<and>\n  \\<bar>b\\<bar> = 2 * int m * int n \\<and>\n  \\<bar>c\\<bar> = (int m)\\<^sup>2 + (int n)\\<^sup>2\n  coprime (int m) (int n)\n  q = - int m\n\ngoal (1 subgoal):\n 1. a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n    b = 2 * p * q \\<and>\n    \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>p = int n; \\<not> 0 \\<le> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>q.\n                         a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n                         b = 2 * p * q \\<and>\n                         \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and>\n                         coprime p q", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n  b = 2 * p * q \\<and>\n  \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (rule exI)"], ["proof (state)\nthis:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n       b = 2 * p * q \\<and>\n       \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q", "by (simp only: exI)"], ["proof (state)\nthis:\n  \\<exists>p q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>p q.\n     a = p\\<^sup>2 - q\\<^sup>2 \\<and>\n     b = 2 * p * q \\<and>\n     \\<bar>c\\<bar> = p\\<^sup>2 + q\\<^sup>2 \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Fermat's last theorem, case $n=4$\\<close>"], ["", "text \\<open>Core of the proof. Constructs a smaller solution over $\\mathbb{Z}$ of $$a^4+b^4=c^2\\,\\land\\,coprime\\,a\\,b\\,\\land\\,abc\\ne 0\\,\\land\\,a~{\\rm odd}.$$\\<close>"], ["", "private"], ["", "lemma smaller_fermat4:\n  assumes abc: \"(a::int)^4+b^4=c^2\" and abc0: \"a*b*c \\<noteq> 0\" and aodd: \"odd a\" \n    and ab_relprime: \"coprime a b\"\n  shows \n  \"\\<exists> p q r. (p^4+q^4=r^2 \\<and> p*q*r \\<noteq> 0 \\<and> odd p \\<and> coprime p q \\<and> r^2 < c^2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "proof - \n  \\<comment> \\<open>put equation in shape of a pythagorean triple and obtain $u$ and $v$\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from ab_relprime"], ["proof (chain)\npicking this:\n  coprime a b", "have a2b2relprime: \"coprime (a^2) (b^2)\""], ["proof (prove)\nusing this:\n  coprime a b\n\ngoal (1 subgoal):\n 1. coprime (a\\<^sup>2) (b\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  coprime (a\\<^sup>2) (b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  coprime (a\\<^sup>2) (b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from aodd"], ["proof (chain)\npicking this:\n  odd a", "have \"odd (a^2)\""], ["proof (prove)\nusing this:\n  odd a\n\ngoal (1 subgoal):\n 1. odd (a\\<^sup>2)", "by presburger"], ["proof (state)\nthis:\n  odd (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  odd (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from abc"], ["proof (chain)\npicking this:\n  a ^ 4 + b ^ 4 = c\\<^sup>2", "have \"(a^2)^2 + (b^2)^2 = c^2\""], ["proof (prove)\nusing this:\n  a ^ 4 + b ^ 4 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. (a\\<^sup>2)\\<^sup>2 + (b\\<^sup>2)\\<^sup>2 = c\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  (a\\<^sup>2)\\<^sup>2 + (b\\<^sup>2)\\<^sup>2 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  coprime (a\\<^sup>2) (b\\<^sup>2)\n  odd (a\\<^sup>2)\n  (a\\<^sup>2)\\<^sup>2 + (b\\<^sup>2)\\<^sup>2 = c\\<^sup>2", "obtain u and v where uvabc: \n    \"a^2 = u^2-v^2 \\<and> b^2 = 2*u*v \\<and> \\<bar>c\\<bar> = u^2 + v^2 \\<and> coprime u v\""], ["proof (prove)\nusing this:\n  coprime (a\\<^sup>2) (b\\<^sup>2)\n  odd (a\\<^sup>2)\n  (a\\<^sup>2)\\<^sup>2 + (b\\<^sup>2)\\<^sup>2 = c\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>u v.\n        a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n        b\\<^sup>2 = 2 * u * v \\<and>\n        \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and>\n        coprime u v \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (frule_tac a=\"a^2\" in int_euclid_pyth_triples, auto)"], ["proof (state)\nthis:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "with abc0"], ["proof (chain)\npicking this:\n  a * b * c \\<noteq> 0\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v", "have uv0: \"u\\<noteq>0 \\<and> v\\<noteq>0\""], ["proof (prove)\nusing this:\n  a * b * c \\<noteq> 0\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n\ngoal (1 subgoal):\n 1. u \\<noteq> 0 \\<and> v \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  u \\<noteq> 0 \\<and> v \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have av_relprime: \"coprime a v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime a v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coprime a v", "have \"gcd a v dvd gcd (a^2) v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd a v dvd gcd (a\\<^sup>2) v", "by (simp add: power2_eq_square)"], ["proof (state)\nthis:\n  gcd a v dvd gcd (a\\<^sup>2) v\n\ngoal (1 subgoal):\n 1. coprime a v", "moreover"], ["proof (state)\nthis:\n  gcd a v dvd gcd (a\\<^sup>2) v\n\ngoal (1 subgoal):\n 1. coprime a v", "from uvabc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v", "have \"gcd v (a^2) dvd gcd (b^2) (a^2)\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n\ngoal (1 subgoal):\n 1. gcd v (a\\<^sup>2) dvd gcd (b\\<^sup>2) (a\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  gcd v (a\\<^sup>2) dvd gcd (b\\<^sup>2) (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. coprime a v", "with a2b2relprime"], ["proof (chain)\npicking this:\n  coprime (a\\<^sup>2) (b\\<^sup>2)\n  gcd v (a\\<^sup>2) dvd gcd (b\\<^sup>2) (a\\<^sup>2)", "have \"gcd (a^2) v dvd (1::int)\""], ["proof (prove)\nusing this:\n  coprime (a\\<^sup>2) (b\\<^sup>2)\n  gcd v (a\\<^sup>2) dvd gcd (b\\<^sup>2) (a\\<^sup>2)\n\ngoal (1 subgoal):\n 1. is_unit (gcd (a\\<^sup>2) v)", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  is_unit (gcd (a\\<^sup>2) v)\n\ngoal (1 subgoal):\n 1. coprime a v", "ultimately"], ["proof (chain)\npicking this:\n  gcd a v dvd gcd (a\\<^sup>2) v\n  is_unit (gcd (a\\<^sup>2) v)", "have \"gcd a v dvd 1\""], ["proof (prove)\nusing this:\n  gcd a v dvd gcd (a\\<^sup>2) v\n  is_unit (gcd (a\\<^sup>2) v)\n\ngoal (1 subgoal):\n 1. is_unit (gcd a v)", "by (rule dvd_trans)"], ["proof (state)\nthis:\n  is_unit (gcd a v)\n\ngoal (1 subgoal):\n 1. coprime a v", "then"], ["proof (chain)\npicking this:\n  is_unit (gcd a v)", "show ?thesis"], ["proof (prove)\nusing this:\n  is_unit (gcd a v)\n\ngoal (1 subgoal):\n 1. coprime a v", "by (simp add: gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  coprime a v\n\ngoal:\nNo subgoals!", "qed\n  \\<comment> \\<open>make again a pythagorean triple and obtain $k$ and $l$\\<close>"], ["proof (state)\nthis:\n  coprime a v\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from uvabc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v", "have \"a^2 + v^2 = u^2\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n\ngoal (1 subgoal):\n 1. a\\<^sup>2 + v\\<^sup>2 = u\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  a\\<^sup>2 + v\\<^sup>2 = u\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "with av_relprime and aodd"], ["proof (chain)\npicking this:\n  coprime a v\n  odd a\n  a\\<^sup>2 + v\\<^sup>2 = u\\<^sup>2", "obtain k l where \n    klavu: \"a = k^2-l^2 \\<and> v = 2*k*l \\<and> \\<bar>u\\<bar> = k^2+l^2\" and kl_rel: \"coprime k l\""], ["proof (prove)\nusing this:\n  coprime a v\n  odd a\n  a\\<^sup>2 + v\\<^sup>2 = u\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>k l.\n        \\<lbrakk>a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n                 v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2;\n         coprime k l\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (frule_tac a=\"a\" in int_euclid_pyth_triples, auto)\n  \\<comment> \\<open>prove $b=2m$ and $kl(k^2 + l^2) = m^2$, for coprime $k$, $l$ and $k^2+l^2$\\<close>"], ["proof (state)\nthis:\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2\n  coprime k l\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from uvabc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v", "have \"even (b^2)\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n\ngoal (1 subgoal):\n 1. even (b\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  even (b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "hence \"even b\""], ["proof (prove)\nusing this:\n  even (b\\<^sup>2)\n\ngoal (1 subgoal):\n 1. even b", "by simp"], ["proof (state)\nthis:\n  even b\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "then"], ["proof (chain)\npicking this:\n  even b", "obtain m where bm: \"b = 2*m\""], ["proof (prove)\nusing this:\n  even b\n\ngoal (1 subgoal):\n 1. (\\<And>m. b = 2 * m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using evenE"], ["proof (prove)\nusing this:\n  even b\n  \\<lbrakk>even ?a;\n   \\<And>b. ?a = (2::?'a) * b \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>m. b = 2 * m \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  b = 2 * m\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"\\<bar>k\\<bar>*\\<bar>l\\<bar>*\\<bar>k^2+l^2\\<bar> = m^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "from bm"], ["proof (chain)\npicking this:\n  b = 2 * m", "have \"4*m^2 = b^2\""], ["proof (prove)\nusing this:\n  b = 2 * m\n\ngoal (1 subgoal):\n 1. 4 * m\\<^sup>2 = b\\<^sup>2", "by (simp only: power2_eq_square ac_simps)"], ["proof (state)\nthis:\n  4 * m\\<^sup>2 = b\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "also"], ["proof (state)\nthis:\n  4 * m\\<^sup>2 = b\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "have \"\\<dots> = \\<bar>b^2\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b\\<^sup>2 = \\<bar>b\\<^sup>2\\<bar>", "by simp"], ["proof (state)\nthis:\n  b\\<^sup>2 = \\<bar>b\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "also"], ["proof (state)\nthis:\n  b\\<^sup>2 = \\<bar>b\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "with uvabc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n  b\\<^sup>2 = \\<bar>b\\<^sup>2\\<bar>", "have \"\\<dots> = 2*\\<bar>v\\<bar>*\\<bar>\\<bar>u\\<bar>\\<bar>\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n  b\\<^sup>2 = \\<bar>b\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>b\\<^sup>2\\<bar> = 2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar>", "by (simp add: abs_mult)"], ["proof (state)\nthis:\n  \\<bar>b\\<^sup>2\\<bar> = 2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "also"], ["proof (state)\nthis:\n  \\<bar>b\\<^sup>2\\<bar> = 2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "with klavu"], ["proof (chain)\npicking this:\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2\n  \\<bar>b\\<^sup>2\\<bar> = 2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar>", "have \"\\<dots> = 2*\\<bar>2*k*l\\<bar>*\\<bar>k^2+l^2\\<bar>\""], ["proof (prove)\nusing this:\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2\n  \\<bar>b\\<^sup>2\\<bar> = 2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar>\n\ngoal (1 subgoal):\n 1. 2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar> =\n    2 * \\<bar>2 * k * l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "by simp"], ["proof (state)\nthis:\n  2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar> =\n  2 * \\<bar>2 * k * l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "also"], ["proof (state)\nthis:\n  2 * \\<bar>v\\<bar> * \\<bar>\\<bar>u\\<bar>\\<bar> =\n  2 * \\<bar>2 * k * l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "have \"\\<dots> = 4*\\<bar>k\\<bar>*\\<bar>l\\<bar>*\\<bar>k^2+l^2\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * \\<bar>2 * k * l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    4 * \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "by (auto simp add: abs_mult)"], ["proof (state)\nthis:\n  2 * \\<bar>2 * k * l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  4 * \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  4 * m\\<^sup>2 =\n  4 * \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  4 * m\\<^sup>2 =\n  4 * \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n    m\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  m\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  m\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  m\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"(2::nat) > 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 < 2", "by auto"], ["proof (state)\nthis:\n  1 < 2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  1 < 2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from kl_rel"], ["proof (chain)\npicking this:\n  coprime k l", "have \"coprime \\<bar>k\\<bar> \\<bar>l\\<bar>\""], ["proof (prove)\nusing this:\n  coprime k l\n\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<bar> \\<bar>l\\<bar>", "by simp"], ["proof (state)\nthis:\n  coprime \\<bar>k\\<bar> \\<bar>l\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  coprime \\<bar>k\\<bar> \\<bar>l\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"coprime \\<bar>l\\<bar> (\\<bar>k^2+l^2\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "from kl_rel"], ["proof (chain)\npicking this:\n  coprime k l", "have \"coprime (k*k) l\""], ["proof (prove)\nusing this:\n  coprime k l\n\ngoal (1 subgoal):\n 1. coprime (k * k) l", "by simp"], ["proof (state)\nthis:\n  coprime (k * k) l\n\ngoal (1 subgoal):\n 1. coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "hence \"coprime (k*k+l*l) l\""], ["proof (prove)\nusing this:\n  coprime (k * k) l\n\ngoal (1 subgoal):\n 1. coprime (k * k + l * l) l", "using gcd_add_mult [of l l \"k*k\"]"], ["proof (prove)\nusing this:\n  coprime (k * k) l\n  gcd l (l * l + k * k) = gcd l (k * k)\n\ngoal (1 subgoal):\n 1. coprime (k * k + l * l) l", "by (simp add: ac_simps gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  coprime (k * k + l * l) l\n\ngoal (1 subgoal):\n 1. coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "hence \"coprime l (k^2+l^2)\""], ["proof (prove)\nusing this:\n  coprime (k * k + l * l) l\n\ngoal (1 subgoal):\n 1. coprime l (k\\<^sup>2 + l\\<^sup>2)", "by (simp add: power2_eq_square ac_simps)"], ["proof (state)\nthis:\n  coprime l (k\\<^sup>2 + l\\<^sup>2)\n\ngoal (1 subgoal):\n 1. coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "thus ?thesis"], ["proof (prove)\nusing this:\n  coprime l (k\\<^sup>2 + l\\<^sup>2)\n\ngoal (1 subgoal):\n 1. coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>", "by simp"], ["proof (state)\nthis:\n  coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"coprime \\<bar>k^2+l^2\\<bar> \\<bar>k\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "from kl_rel"], ["proof (chain)\npicking this:\n  coprime k l", "have \"coprime l k\""], ["proof (prove)\nusing this:\n  coprime k l\n\ngoal (1 subgoal):\n 1. coprime l k", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  coprime l k\n\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "hence \"coprime (l*l) k\""], ["proof (prove)\nusing this:\n  coprime l k\n\ngoal (1 subgoal):\n 1. coprime (l * l) k", "by simp"], ["proof (state)\nthis:\n  coprime (l * l) k\n\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "hence \"coprime (l*l+k*k) k\""], ["proof (prove)\nusing this:\n  coprime (l * l) k\n\ngoal (1 subgoal):\n 1. coprime (l * l + k * k) k", "using gcd_add_mult[of k k \"l*l\"]"], ["proof (prove)\nusing this:\n  coprime (l * l) k\n  gcd k (k * k + l * l) = gcd k (l * l)\n\ngoal (1 subgoal):\n 1. coprime (l * l + k * k) k", "by (simp add: ac_simps gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  coprime (l * l + k * k) k\n\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "hence \"coprime (k^2+l^2) k\""], ["proof (prove)\nusing this:\n  coprime (l * l + k * k) k\n\ngoal (1 subgoal):\n 1. coprime (k\\<^sup>2 + l\\<^sup>2) k", "by (simp add: power2_eq_square ac_simps)"], ["proof (state)\nthis:\n  coprime (k\\<^sup>2 + l\\<^sup>2) k\n\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "thus ?thesis"], ["proof (prove)\nusing this:\n  coprime (k\\<^sup>2 + l\\<^sup>2) k\n\ngoal (1 subgoal):\n 1. coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "by simp"], ["proof (state)\nthis:\n  coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  m\\<^sup>2\n  1 < 2\n  coprime \\<bar>k\\<bar> \\<bar>l\\<bar>\n  coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n  coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>", "have \"\\<exists> x y z. \\<bar>k\\<bar> = x^2 \\<and> \\<bar>l\\<bar> = y^2 \\<and> \\<bar>k^2+l^2\\<bar> = z^2\""], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  m\\<^sup>2\n  1 < 2\n  coprime \\<bar>k\\<bar> \\<bar>l\\<bar>\n  coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n  coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>x y z.\n       \\<bar>k\\<bar> = x\\<^sup>2 \\<and>\n       \\<bar>l\\<bar> = y\\<^sup>2 \\<and>\n       \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = z\\<^sup>2", "using int_relprime_power_divisors[of 2 \"\\<bar>k\\<bar>\" \"\\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\" m]\n      int_relprime_power_divisors[of 2 \"\\<bar>l\\<bar>\" \"\\<bar>k\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\" m]\n      int_relprime_power_divisors[of 2 \"\\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\" \"\\<bar>k\\<bar>*\\<bar>l\\<bar>\" m]"], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar> * \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n  m\\<^sup>2\n  1 < 2\n  coprime \\<bar>k\\<bar> \\<bar>l\\<bar>\n  coprime \\<bar>l\\<bar> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n  coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> \\<bar>k\\<bar>\n  \\<lbrakk>0 < 2; 0 \\<le> \\<bar>k\\<bar>;\n   0 \\<le> \\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>;\n   \\<bar>k\\<bar> * (\\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>) =\n   m\\<^sup>2;\n   coprime \\<bar>k\\<bar>\n    (\\<bar>l\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>ka. \\<bar>k\\<bar> = ka\\<^sup>2\n  \\<lbrakk>0 < 2; 0 \\<le> \\<bar>l\\<bar>;\n   0 \\<le> \\<bar>k\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>;\n   \\<bar>l\\<bar> * (\\<bar>k\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>) =\n   m\\<^sup>2;\n   coprime \\<bar>l\\<bar>\n    (\\<bar>k\\<bar> * \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>k. \\<bar>l\\<bar> = k\\<^sup>2\n  \\<lbrakk>0 < 2; 0 \\<le> \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>;\n   0 \\<le> \\<bar>k\\<bar> * \\<bar>l\\<bar>;\n   \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> * (\\<bar>k\\<bar> * \\<bar>l\\<bar>) =\n   m\\<^sup>2;\n   coprime \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar>\n    (\\<bar>k\\<bar> * \\<bar>l\\<bar>)\\<rbrakk>\n  \\<Longrightarrow> \\<exists>ka.\n                       \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = ka\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>x y z.\n       \\<bar>k\\<bar> = x\\<^sup>2 \\<and>\n       \\<bar>l\\<bar> = y\\<^sup>2 \\<and>\n       \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = z\\<^sup>2", "by (simp_all add: ac_simps)"], ["proof (state)\nthis:\n  \\<exists>x y z.\n     \\<bar>k\\<bar> = x\\<^sup>2 \\<and>\n     \\<bar>l\\<bar> = y\\<^sup>2 \\<and>\n     \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = z\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "then"], ["proof (chain)\npicking this:\n  \\<exists>x y z.\n     \\<bar>k\\<bar> = x\\<^sup>2 \\<and>\n     \\<bar>l\\<bar> = y\\<^sup>2 \\<and>\n     \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = z\\<^sup>2", "obtain \\<alpha> \\<beta> \\<gamma> where albega: \n    \"\\<bar>k\\<bar> = \\<alpha>^2 \\<and> \\<bar>l\\<bar> = \\<beta>^2 \\<and> \\<bar>k^2+l^2\\<bar> = \\<gamma>^2\""], ["proof (prove)\nusing this:\n  \\<exists>x y z.\n     \\<bar>k\\<bar> = x\\<^sup>2 \\<and>\n     \\<bar>l\\<bar> = y\\<^sup>2 \\<and>\n     \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = z\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>\\<alpha> \\<beta> \\<gamma>.\n        \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n        \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n        \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> =\n        \\<gamma>\\<^sup>2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto\n  \\<comment> \\<open>show this is a new solution\\<close>"], ["proof (state)\nthis:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"k^2 = \\<alpha>^4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k\\<^sup>2 = \\<alpha> ^ 4", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. k\\<^sup>2 = \\<alpha> ^ 4", "from albega"], ["proof (chain)\npicking this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2", "have \"\\<bar>k\\<bar>^2 = (\\<alpha>^2)^2\""], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<bar>k\\<bar>\\<^sup>2 = (\\<alpha>\\<^sup>2)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  \\<bar>k\\<bar>\\<^sup>2 = (\\<alpha>\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. k\\<^sup>2 = \\<alpha> ^ 4", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar>\\<^sup>2 = (\\<alpha>\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. k\\<^sup>2 = \\<alpha> ^ 4", "by simp"], ["proof (state)\nthis:\n  k\\<^sup>2 = \\<alpha> ^ 4\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  k\\<^sup>2 = \\<alpha> ^ 4\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  k\\<^sup>2 = \\<alpha> ^ 4\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"l^2 = \\<beta>^4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l\\<^sup>2 = \\<beta> ^ 4", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. l\\<^sup>2 = \\<beta> ^ 4", "from albega"], ["proof (chain)\npicking this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2", "have \"\\<bar>l\\<bar>^2 = (\\<beta>^2)^2\""], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<bar>l\\<bar>\\<^sup>2 = (\\<beta>\\<^sup>2)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  \\<bar>l\\<bar>\\<^sup>2 = (\\<beta>\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. l\\<^sup>2 = \\<beta> ^ 4", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>l\\<bar>\\<^sup>2 = (\\<beta>\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. l\\<^sup>2 = \\<beta> ^ 4", "by simp"], ["proof (state)\nthis:\n  l\\<^sup>2 = \\<beta> ^ 4\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l\\<^sup>2 = \\<beta> ^ 4\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  l\\<^sup>2 = \\<beta> ^ 4\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have gamma2: \"k^2 + l^2 = \\<gamma>^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2", "have \"k^2 \\<ge> 0 \\<and> l^2 \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> k\\<^sup>2 \\<and> 0 \\<le> l\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  0 \\<le> k\\<^sup>2 \\<and> 0 \\<le> l\\<^sup>2\n\ngoal (1 subgoal):\n 1. k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2", "with albega"], ["proof (chain)\npicking this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n  0 \\<le> k\\<^sup>2 \\<and> 0 \\<le> l\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n  0 \\<le> k\\<^sup>2 \\<and> 0 \\<le> l\\<^sup>2\n\ngoal (1 subgoal):\n 1. k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  k\\<^sup>2 = \\<alpha> ^ 4\n  l\\<^sup>2 = \\<beta> ^ 4\n  k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2", "have newabc: \"\\<alpha>^4 + \\<beta>^4 = \\<gamma>^2\""], ["proof (prove)\nusing this:\n  k\\<^sup>2 = \\<alpha> ^ 4\n  l\\<^sup>2 = \\<beta> ^ 4\n  k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<alpha> ^ 4 + \\<beta> ^ 4 = \\<gamma>\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  \\<alpha> ^ 4 + \\<beta> ^ 4 = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "from uv0 klavu albega"], ["proof (chain)\npicking this:\n  u \\<noteq> 0 \\<and> v \\<noteq> 0\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2", "have albega0: \"\\<alpha> * \\<beta> * \\<gamma>  \\<noteq> 0\""], ["proof (prove)\nusing this:\n  u \\<noteq> 0 \\<and> v \\<noteq> 0\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0", "by auto\n  \\<comment> \\<open>show the coprimality\\<close>"], ["proof (state)\nthis:\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have alphabeta_relprime: \"coprime \\<alpha> \\<beta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. coprime \\<alpha> \\<beta>", "proof (rule classical)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "let ?g = \"gcd \\<alpha> \\<beta>\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "assume \"\\<not> coprime \\<alpha> \\<beta>\""], ["proof (state)\nthis:\n  \\<not> coprime \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "then"], ["proof (chain)\npicking this:\n  \\<not> coprime \\<alpha> \\<beta>", "have gnot1: \"?g \\<noteq> 1\""], ["proof (prove)\nusing this:\n  \\<not> coprime \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> \\<noteq> 1", "by (auto intro: gcd_eq_1_imp_coprime)"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "have \"?g > 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 < gcd \\<alpha> \\<beta>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < gcd \\<alpha> \\<beta>", "have \"?g \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> \\<noteq> 0", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> = 0 \\<Longrightarrow> False", "assume \"?g=0\""], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> = 0\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> = 0 \\<Longrightarrow> False", "hence \"nat \\<bar>\\<alpha>\\<bar>=0\""], ["proof (prove)\nusing this:\n  gcd \\<alpha> \\<beta> = 0\n\ngoal (1 subgoal):\n 1. nat \\<bar>\\<alpha>\\<bar> = 0", "by simp"], ["proof (state)\nthis:\n  nat \\<bar>\\<alpha>\\<bar> = 0\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> = 0 \\<Longrightarrow> False", "hence \"\\<alpha>=0\""], ["proof (prove)\nusing this:\n  nat \\<bar>\\<alpha>\\<bar> = 0\n\ngoal (1 subgoal):\n 1. \\<alpha> = 0", "by arith"], ["proof (state)\nthis:\n  \\<alpha> = 0\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> = 0 \\<Longrightarrow> False", "with albega0"], ["proof (chain)\npicking this:\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n  \\<alpha> = 0", "show False"], ["proof (prove)\nusing this:\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n  \\<alpha> = 0\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 < gcd \\<alpha> \\<beta>", "hence \"?g>0\""], ["proof (prove)\nusing this:\n  gcd \\<alpha> \\<beta> \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < gcd \\<alpha> \\<beta>", "by auto"], ["proof (state)\nthis:\n  0 < gcd \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. 1 < gcd \\<alpha> \\<beta>", "with gnot1"], ["proof (chain)\npicking this:\n  gcd \\<alpha> \\<beta> \\<noteq> 1\n  0 < gcd \\<alpha> \\<beta>", "show ?thesis"], ["proof (prove)\nusing this:\n  gcd \\<alpha> \\<beta> \\<noteq> 1\n  0 < gcd \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. 1 < gcd \\<alpha> \\<beta>", "by linarith"], ["proof (state)\nthis:\n  1 < gcd \\<alpha> \\<beta>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 < gcd \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "moreover"], ["proof (state)\nthis:\n  1 < gcd \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "have \"?g dvd gcd k l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd gcd k l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd gcd k l", "have \"?g dvd \\<alpha> \\<and> ?g dvd \\<beta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd \\<alpha> \\<and>\n    gcd \\<alpha> \\<beta> dvd \\<beta>", "by auto"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> dvd \\<alpha> \\<and> gcd \\<alpha> \\<beta> dvd \\<beta>\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd gcd k l", "with albega"], ["proof (chain)\npicking this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n  gcd \\<alpha> \\<beta> dvd \\<alpha> \\<and> gcd \\<alpha> \\<beta> dvd \\<beta>", "have \"?g dvd \\<bar>k\\<bar> \\<and> ?g dvd \\<bar>l\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>k\\<bar> = \\<alpha>\\<^sup>2 \\<and>\n  \\<bar>l\\<bar> = \\<beta>\\<^sup>2 \\<and>\n  \\<bar>k\\<^sup>2 + l\\<^sup>2\\<bar> = \\<gamma>\\<^sup>2\n  gcd \\<alpha> \\<beta> dvd \\<alpha> \\<and> gcd \\<alpha> \\<beta> dvd \\<beta>\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd \\<bar>k\\<bar> \\<and>\n    gcd \\<alpha> \\<beta> dvd \\<bar>l\\<bar>", "by (simp add: power2_eq_square mult.commute)"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> dvd \\<bar>k\\<bar> \\<and>\n  gcd \\<alpha> \\<beta> dvd \\<bar>l\\<bar>\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd gcd k l", "hence \"?g dvd k \\<and> ?g dvd l\""], ["proof (prove)\nusing this:\n  gcd \\<alpha> \\<beta> dvd \\<bar>k\\<bar> \\<and>\n  gcd \\<alpha> \\<beta> dvd \\<bar>l\\<bar>\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd k \\<and> gcd \\<alpha> \\<beta> dvd l", "by simp"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> dvd k \\<and> gcd \\<alpha> \\<beta> dvd l\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd gcd k l", "thus ?thesis"], ["proof (prove)\nusing this:\n  gcd \\<alpha> \\<beta> dvd k \\<and> gcd \\<alpha> \\<beta> dvd l\n\ngoal (1 subgoal):\n 1. gcd \\<alpha> \\<beta> dvd gcd k l", "by simp"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> dvd gcd k l\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  gcd \\<alpha> \\<beta> dvd gcd k l\n\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "ultimately"], ["proof (chain)\npicking this:\n  1 < gcd \\<alpha> \\<beta>\n  gcd \\<alpha> \\<beta> dvd gcd k l", "have \"gcd k l \\<noteq> 1\""], ["proof (prove)\nusing this:\n  1 < gcd \\<alpha> \\<beta>\n  gcd \\<alpha> \\<beta> dvd gcd k l\n\ngoal (1 subgoal):\n 1. gcd k l \\<noteq> 1", "by fastforce"], ["proof (state)\nthis:\n  gcd k l \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<not> coprime \\<alpha> \\<beta> \\<Longrightarrow>\n    coprime \\<alpha> \\<beta>", "with kl_rel"], ["proof (chain)\npicking this:\n  coprime k l\n  gcd k l \\<noteq> 1", "show ?thesis"], ["proof (prove)\nusing this:\n  coprime k l\n  gcd k l \\<noteq> 1\n\ngoal (1 subgoal):\n 1. coprime \\<alpha> \\<beta>", "by auto"], ["proof (state)\nthis:\n  coprime \\<alpha> \\<beta>\n\ngoal:\nNo subgoals!", "qed\n  \\<comment> \\<open>choose $p$ and $q$ in the right way\\<close>"], ["proof (state)\nthis:\n  coprime \\<alpha> \\<beta>\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"\\<exists> p q. p^4 + q^4 = \\<gamma>^2 \\<and> p*q*\\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "have \"odd \\<alpha> \\<or> odd \\<beta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. odd \\<alpha> \\<or> odd \\<beta>", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (odd \\<alpha> \\<or> odd \\<beta>) \\<Longrightarrow> False", "assume \"\\<not> (odd \\<alpha> \\<or> odd \\<beta>)\""], ["proof (state)\nthis:\n  \\<not> (odd \\<alpha> \\<or> odd \\<beta>)\n\ngoal (1 subgoal):\n 1. \\<not> (odd \\<alpha> \\<or> odd \\<beta>) \\<Longrightarrow> False", "hence \"even \\<alpha> \\<and> even \\<beta>\""], ["proof (prove)\nusing this:\n  \\<not> (odd \\<alpha> \\<or> odd \\<beta>)\n\ngoal (1 subgoal):\n 1. even \\<alpha> \\<and> even \\<beta>", "by simp"], ["proof (state)\nthis:\n  even \\<alpha> \\<and> even \\<beta>\n\ngoal (1 subgoal):\n 1. \\<not> (odd \\<alpha> \\<or> odd \\<beta>) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  even \\<alpha> \\<and> even \\<beta>", "have \"2 dvd \\<alpha> \\<and> 2 dvd \\<beta>\""], ["proof (prove)\nusing this:\n  even \\<alpha> \\<and> even \\<beta>\n\ngoal (1 subgoal):\n 1. even \\<alpha> \\<and> even \\<beta>", "by simp"], ["proof (state)\nthis:\n  even \\<alpha> \\<and> even \\<beta>\n\ngoal (1 subgoal):\n 1. \\<not> (odd \\<alpha> \\<or> odd \\<beta>) \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  even \\<alpha> \\<and> even \\<beta>", "have \"2 dvd gcd \\<alpha> \\<beta>\""], ["proof (prove)\nusing this:\n  even \\<alpha> \\<and> even \\<beta>\n\ngoal (1 subgoal):\n 1. even (gcd \\<alpha> \\<beta>)", "by simp"], ["proof (state)\nthis:\n  even (gcd \\<alpha> \\<beta>)\n\ngoal (1 subgoal):\n 1. \\<not> (odd \\<alpha> \\<or> odd \\<beta>) \\<Longrightarrow> False", "with alphabeta_relprime"], ["proof (chain)\npicking this:\n  coprime \\<alpha> \\<beta>\n  even (gcd \\<alpha> \\<beta>)", "show False"], ["proof (prove)\nusing this:\n  coprime \\<alpha> \\<beta>\n  even (gcd \\<alpha> \\<beta>)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  odd \\<alpha> \\<or> odd \\<beta>\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  odd \\<alpha> \\<or> odd \\<beta>\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "{"], ["proof (state)\nthis:\n  odd \\<alpha> \\<or> odd \\<beta>\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "assume \"odd \\<alpha>\""], ["proof (state)\nthis:\n  odd \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "with newabc albega0 alphabeta_relprime"], ["proof (chain)\npicking this:\n  \\<alpha> ^ 4 + \\<beta> ^ 4 = \\<gamma>\\<^sup>2\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n  coprime \\<alpha> \\<beta>\n  odd \\<alpha>", "obtain p q where \n        \"p=\\<alpha> \\<and> q=\\<beta> \\<and> p^4 + q^4 = \\<gamma>^2 \\<and> p*q*\\<gamma>  \\<noteq> 0 \\<and> odd p \\<and> coprime p q\""], ["proof (prove)\nusing this:\n  \\<alpha> ^ 4 + \\<beta> ^ 4 = \\<gamma>\\<^sup>2\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n  coprime \\<alpha> \\<beta>\n  odd \\<alpha>\n\ngoal (1 subgoal):\n 1. (\\<And>p q.\n        p = \\<alpha> \\<and>\n        q = \\<beta> \\<and>\n        p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n        p * q * \\<gamma> \\<noteq> 0 \\<and>\n        odd p \\<and> coprime p q \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  p = \\<alpha> \\<and>\n  q = \\<beta> \\<and>\n  p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n  p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "hence ?thesis"], ["proof (prove)\nusing this:\n  p = \\<alpha> \\<and>\n  q = \\<beta> \\<and>\n  p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n  p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "}"], ["proof (state)\nthis:\n  odd \\<alpha> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  odd \\<alpha> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "{"], ["proof (state)\nthis:\n  odd \\<alpha> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "assume \"odd \\<beta>\""], ["proof (state)\nthis:\n  odd \\<beta>\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "with newabc albega0 alphabeta_relprime"], ["proof (chain)\npicking this:\n  \\<alpha> ^ 4 + \\<beta> ^ 4 = \\<gamma>\\<^sup>2\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n  coprime \\<alpha> \\<beta>\n  odd \\<beta>", "obtain p q where \n        \"q=\\<alpha> \\<and> p=\\<beta> \\<and> p^4 + q^4 = \\<gamma>^2 \\<and> p*q*\\<gamma>  \\<noteq> 0 \\<and> odd p \\<and> coprime p q\""], ["proof (prove)\nusing this:\n  \\<alpha> ^ 4 + \\<beta> ^ 4 = \\<gamma>\\<^sup>2\n  \\<alpha> * \\<beta> * \\<gamma> \\<noteq> 0\n  coprime \\<alpha> \\<beta>\n  odd \\<beta>\n\ngoal (1 subgoal):\n 1. (\\<And>q p.\n        q = \\<alpha> \\<and>\n        p = \\<beta> \\<and>\n        p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n        p * q * \\<gamma> \\<noteq> 0 \\<and>\n        odd p \\<and> coprime p q \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: ac_simps)"], ["proof (state)\nthis:\n  q = \\<alpha> \\<and>\n  p = \\<beta> \\<and>\n  p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n  p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "hence ?thesis"], ["proof (prove)\nusing this:\n  q = \\<alpha> \\<and>\n  p = \\<beta> \\<and>\n  p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n  p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "}"], ["proof (state)\nthis:\n  odd \\<beta> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "ultimately"], ["proof (chain)\npicking this:\n  odd \\<alpha> \\<or> odd \\<beta>\n  odd \\<alpha> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n  odd \\<beta> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "show ?thesis"], ["proof (prove)\nusing this:\n  odd \\<alpha> \\<or> odd \\<beta>\n  odd \\<alpha> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n  odd \\<beta> \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n       p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed\n  \\<comment> \\<open>show the solution is smaller\\<close>"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "moreover"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "have \"\\<gamma>^2 < c^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "from gamma2 klavu"], ["proof (chain)\npicking this:\n  k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2", "have \"\\<gamma>^2 \\<le> \\<bar>u\\<bar>\""], ["proof (prove)\nusing this:\n  k\\<^sup>2 + l\\<^sup>2 = \\<gamma>\\<^sup>2\n  a = k\\<^sup>2 - l\\<^sup>2 \\<and>\n  v = 2 * k * l \\<and> \\<bar>u\\<bar> = k\\<^sup>2 + l\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 \\<le> \\<bar>u\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<gamma>\\<^sup>2 \\<le> \\<bar>u\\<bar>\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "also"], ["proof (state)\nthis:\n  \\<gamma>\\<^sup>2 \\<le> \\<bar>u\\<bar>\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "have h1: \"\\<dots> \\<le> \\<bar>u\\<bar>^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>u\\<bar> \\<le> \\<bar>u\\<bar>\\<^sup>2", "using self_le_power[of \"\\<bar>u\\<bar>\" 2] uv0"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 \\<le> \\<bar>u\\<bar>; 0 < 2\\<rbrakk>\n  \\<Longrightarrow> \\<bar>u\\<bar> \\<le> \\<bar>u\\<bar>\\<^sup>2\n  u \\<noteq> 0 \\<and> v \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<bar>u\\<bar> \\<le> \\<bar>u\\<bar>\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  \\<bar>u\\<bar> \\<le> \\<bar>u\\<bar>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "also"], ["proof (state)\nthis:\n  \\<bar>u\\<bar> \\<le> \\<bar>u\\<bar>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "have h2: \"\\<dots> \\<le> u^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>u\\<bar>\\<^sup>2 \\<le> u\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  \\<bar>u\\<bar>\\<^sup>2 \\<le> u\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "also"], ["proof (state)\nthis:\n  \\<bar>u\\<bar>\\<^sup>2 \\<le> u\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "have h3: \"\\<dots> < u^2 + v^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "from uv0"], ["proof (chain)\npicking this:\n  u \\<noteq> 0 \\<and> v \\<noteq> 0", "have v2non0: \"0 \\<noteq> v^2\""], ["proof (prove)\nusing this:\n  u \\<noteq> 0 \\<and> v \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 \\<noteq> v\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  0 \\<noteq> v\\<^sup>2\n\ngoal (1 subgoal):\n 1. u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "have \"0 \\<le> v^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> v\\<^sup>2", "by (rule zero_le_power2)"], ["proof (state)\nthis:\n  0 \\<le> v\\<^sup>2\n\ngoal (1 subgoal):\n 1. u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "with v2non0"], ["proof (chain)\npicking this:\n  0 \\<noteq> v\\<^sup>2\n  0 \\<le> v\\<^sup>2", "have \"0 < v^2\""], ["proof (prove)\nusing this:\n  0 \\<noteq> v\\<^sup>2\n  0 \\<le> v\\<^sup>2\n\ngoal (1 subgoal):\n 1. 0 < v\\<^sup>2", "by (auto simp add: less_le)"], ["proof (state)\nthis:\n  0 < v\\<^sup>2\n\ngoal (1 subgoal):\n 1. u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "thus ?thesis"], ["proof (prove)\nusing this:\n  0 < v\\<^sup>2\n\ngoal (1 subgoal):\n 1. u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "also"], ["proof (state)\nthis:\n  u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "with uvabc"], ["proof (chain)\npicking this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n  u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2", "have \"\\<dots> \\<le> \\<bar>c\\<bar>\""], ["proof (prove)\nusing this:\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n  u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2\n\ngoal (1 subgoal):\n 1. u\\<^sup>2 + v\\<^sup>2 \\<le> \\<bar>c\\<bar>", "by auto"], ["proof (state)\nthis:\n  u\\<^sup>2 + v\\<^sup>2 \\<le> \\<bar>c\\<bar>\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "also"], ["proof (state)\nthis:\n  u\\<^sup>2 + v\\<^sup>2 \\<le> \\<bar>c\\<bar>\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "have \"\\<dots> \\<le> \\<bar>c\\<bar>^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>c\\<bar> \\<le> \\<bar>c\\<bar>\\<^sup>2", "using self_le_power[of \"\\<bar>c\\<bar>\" 2] h1 h2 h3 uvabc"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 \\<le> \\<bar>c\\<bar>; 0 < 2\\<rbrakk>\n  \\<Longrightarrow> \\<bar>c\\<bar> \\<le> \\<bar>c\\<bar>\\<^sup>2\n  \\<bar>u\\<bar> \\<le> \\<bar>u\\<bar>\\<^sup>2\n  \\<bar>u\\<bar>\\<^sup>2 \\<le> u\\<^sup>2\n  u\\<^sup>2 < u\\<^sup>2 + v\\<^sup>2\n  a\\<^sup>2 = u\\<^sup>2 - v\\<^sup>2 \\<and>\n  b\\<^sup>2 = 2 * u * v \\<and>\n  \\<bar>c\\<bar> = u\\<^sup>2 + v\\<^sup>2 \\<and> coprime u v\n\ngoal (1 subgoal):\n 1. \\<bar>c\\<bar> \\<le> \\<bar>c\\<bar>\\<^sup>2", "by linarith"], ["proof (state)\nthis:\n  \\<bar>c\\<bar> \\<le> \\<bar>c\\<bar>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "also"], ["proof (state)\nthis:\n  \\<bar>c\\<bar> \\<le> \\<bar>c\\<bar>\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "have \"\\<dots> \\<le> c^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>c\\<bar>\\<^sup>2 \\<le> c\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  \\<bar>c\\<bar>\\<^sup>2 \\<le> c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  \\<gamma>\\<^sup>2 < c\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<gamma>\\<^sup>2 < c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<gamma>\\<^sup>2 < c\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  \\<gamma>\\<^sup>2 < c\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<gamma>\\<^sup>2 < c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n  \\<gamma>\\<^sup>2 < c\\<^sup>2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = \\<gamma>\\<^sup>2 \\<and>\n     p * q * \\<gamma> \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n  \\<gamma>\\<^sup>2 < c\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q r.\n     p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n     p * q * r \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q \\<and> r\\<^sup>2 < c\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Show that no solution exists, by infinite descent of $c^2$.\\<close>"], ["", "private"], ["", "lemma no_rewritten_fermat4:\n  \"\\<not> (\\<exists> (a::int) b. (a^4 + b^4 = c^2 \\<and> a*b*c \\<noteq> 0 \\<and> odd a \\<and> coprime a b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>a b.\n       a ^ 4 + b ^ 4 = c\\<^sup>2 \\<and>\n       a * b * c \\<noteq> 0 \\<and> odd a \\<and> coprime a b", "proof (induct c rule: infinite_descent0_measure[where V=\"\\<lambda>c. nat(c^2)\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       nat (x\\<^sup>2) = 0 \\<Longrightarrow>\n       \\<nexists>a b.\n          a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n          a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b\n 2. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "case (0 x)"], ["proof (state)\nthis:\n  nat (x\\<^sup>2) = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       nat (x\\<^sup>2) = 0 \\<Longrightarrow>\n       \\<nexists>a b.\n          a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n          a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b\n 2. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "have \"x^2 \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> x\\<^sup>2", "by (rule zero_le_power2)"], ["proof (state)\nthis:\n  0 \\<le> x\\<^sup>2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       nat (x\\<^sup>2) = 0 \\<Longrightarrow>\n       \\<nexists>a b.\n          a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n          a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b\n 2. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "with 0"], ["proof (chain)\npicking this:\n  nat (x\\<^sup>2) = 0\n  0 \\<le> x\\<^sup>2", "have \"int(nat(x^2)) = 0\""], ["proof (prove)\nusing this:\n  nat (x\\<^sup>2) = 0\n  0 \\<le> x\\<^sup>2\n\ngoal (1 subgoal):\n 1. int (nat (x\\<^sup>2)) = 0", "by auto"], ["proof (state)\nthis:\n  int (nat (x\\<^sup>2)) = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       nat (x\\<^sup>2) = 0 \\<Longrightarrow>\n       \\<nexists>a b.\n          a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n          a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b\n 2. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "hence \"x = 0\""], ["proof (prove)\nusing this:\n  int (nat (x\\<^sup>2)) = 0\n\ngoal (1 subgoal):\n 1. x = 0", "by auto"], ["proof (state)\nthis:\n  x = 0\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       nat (x\\<^sup>2) = 0 \\<Longrightarrow>\n       \\<nexists>a b.\n          a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n          a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b\n 2. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "thus ?case"], ["proof (prove)\nusing this:\n  x = 0\n\ngoal (1 subgoal):\n 1. \\<nexists>a b.\n       a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n       a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b", "by auto"], ["proof (state)\nthis:\n  \\<nexists>a b.\n     a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n     a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "case (smaller x)"], ["proof (state)\nthis:\n  0 < nat (x\\<^sup>2)\n  \\<not> (\\<nexists>a b.\n             a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n             a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "then"], ["proof (chain)\npicking this:\n  0 < nat (x\\<^sup>2)\n  \\<not> (\\<nexists>a b.\n             a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n             a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "obtain a b where \"a^4 + b^4 = x^2\" and \"a*b*x \\<noteq> 0\" \n    and \"odd a\" and \"coprime a b\""], ["proof (prove)\nusing this:\n  0 < nat (x\\<^sup>2)\n  \\<not> (\\<nexists>a b.\n             a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n             a * b * x \\<noteq> 0 \\<and> odd a \\<and> coprime a b)\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        \\<lbrakk>a ^ 4 + b ^ 4 = x\\<^sup>2; a * b * x \\<noteq> 0; odd a;\n         coprime a b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  a ^ 4 + b ^ 4 = x\\<^sup>2\n  a * b * x \\<noteq> 0\n  odd a\n  coprime a b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "hence \"\\<exists> p q r. (p^4+q^4=r^2 \\<and> p*q*r \\<noteq> 0 \\<and> odd p\n    \\<and> coprime p q \\<and> r^2 < x^2)\""], ["proof (prove)\nusing this:\n  a ^ 4 + b ^ 4 = x\\<^sup>2\n  a * b * x \\<noteq> 0\n  odd a\n  coprime a b\n\ngoal (1 subgoal):\n 1. \\<exists>p q r.\n       p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n       p * q * r \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2", "by (rule smaller_fermat4)"], ["proof (state)\nthis:\n  \\<exists>p q r.\n     p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n     p * q * r \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "then"], ["proof (chain)\npicking this:\n  \\<exists>p q r.\n     p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n     p * q * r \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2", "obtain p q r where pqr: \"p^4 + q^4 = r^2 \\<and> p*q*r \\<noteq> 0 \\<and> odd p\n    \\<and> coprime p q \\<and> r^2 < x^2\""], ["proof (prove)\nusing this:\n  \\<exists>p q r.\n     p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n     p * q * r \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>p q r.\n        p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n        p * q * r \\<noteq> 0 \\<and>\n        odd p \\<and>\n        coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n  p * q * r \\<noteq> 0 \\<and>\n  odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "have \"r^2 \\<ge> 0\" and \"x^2 \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> r\\<^sup>2 &&& 0 \\<le> x\\<^sup>2", "by (auto simp only: zero_le_power2)"], ["proof (state)\nthis:\n  0 \\<le> r\\<^sup>2\n  0 \\<le> x\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "hence \"int(nat(r^2)) = r^2 \\<and> int(nat(x^2)) = x^2\""], ["proof (prove)\nusing this:\n  0 \\<le> r\\<^sup>2\n  0 \\<le> x\\<^sup>2\n\ngoal (1 subgoal):\n 1. int (nat (r\\<^sup>2)) = r\\<^sup>2 \\<and>\n    int (nat (x\\<^sup>2)) = x\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  int (nat (r\\<^sup>2)) = r\\<^sup>2 \\<and> int (nat (x\\<^sup>2)) = x\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "with pqr"], ["proof (chain)\npicking this:\n  p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n  p * q * r \\<noteq> 0 \\<and>\n  odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n  int (nat (r\\<^sup>2)) = r\\<^sup>2 \\<and> int (nat (x\\<^sup>2)) = x\\<^sup>2", "have \"int(nat(r^2)) < int(nat(x^2))\""], ["proof (prove)\nusing this:\n  p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n  p * q * r \\<noteq> 0 \\<and>\n  odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n  int (nat (r\\<^sup>2)) = r\\<^sup>2 \\<and> int (nat (x\\<^sup>2)) = x\\<^sup>2\n\ngoal (1 subgoal):\n 1. int (nat (r\\<^sup>2)) < int (nat (x\\<^sup>2))", "by auto"], ["proof (state)\nthis:\n  int (nat (r\\<^sup>2)) < int (nat (x\\<^sup>2))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "hence \"nat(r^2) < nat(x^2)\""], ["proof (prove)\nusing this:\n  int (nat (r\\<^sup>2)) < int (nat (x\\<^sup>2))\n\ngoal (1 subgoal):\n 1. nat (r\\<^sup>2) < nat (x\\<^sup>2)", "by presburger"], ["proof (state)\nthis:\n  nat (r\\<^sup>2) < nat (x\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>0 < nat (x\\<^sup>2);\n        \\<not> (\\<nexists>a b.\n                   a ^ 4 + b ^ 4 = x\\<^sup>2 \\<and>\n                   a * b * x \\<noteq> 0 \\<and>\n                   odd a \\<and> coprime a b)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n                            \\<not> (\\<nexists>a b.\n a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "with pqr"], ["proof (chain)\npicking this:\n  p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n  p * q * r \\<noteq> 0 \\<and>\n  odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n  nat (r\\<^sup>2) < nat (x\\<^sup>2)", "show ?case"], ["proof (prove)\nusing this:\n  p ^ 4 + q ^ 4 = r\\<^sup>2 \\<and>\n  p * q * r \\<noteq> 0 \\<and>\n  odd p \\<and> coprime p q \\<and> r\\<^sup>2 < x\\<^sup>2\n  nat (r\\<^sup>2) < nat (x\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<exists>y.\n       nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n       \\<not> (\\<nexists>a b.\n                  a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n                  a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)", "by auto"], ["proof (state)\nthis:\n  \\<exists>y.\n     nat (y\\<^sup>2) < nat (x\\<^sup>2) \\<and>\n     \\<not> (\\<nexists>a b.\n                a ^ 4 + b ^ 4 = y\\<^sup>2 \\<and>\n                a * b * y \\<noteq> 0 \\<and> odd a \\<and> coprime a b)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The theorem. Puts equation in requested shape.\\<close>"], ["", "theorem fermat_4:\n  assumes ass: \"(x::int)^4 + y^4 = z^4\"\n  shows \"x*y*z=0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x * y * z = 0", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "let ?g = \"gcd x y\""], ["proof (state)\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "let ?c = \"(z div ?g)^2\""], ["proof (state)\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "assume xyz0: \"x*y*z \\<noteq> 0\"\n  \\<comment> \\<open>divide out the g.c.d.\\<close>"], ["proof (state)\nthis:\n  x * y * z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "hence \"x \\<noteq> 0 \\<or> y \\<noteq> 0\""], ["proof (prove)\nusing this:\n  x * y * z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. x \\<noteq> 0 \\<or> y \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  x \\<noteq> 0 \\<or> y \\<noteq> 0\n\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  x \\<noteq> 0 \\<or> y \\<noteq> 0", "obtain a b where ab: \"x = ?g*a \\<and> y = ?g*b \\<and> coprime a b\""], ["proof (prove)\nusing this:\n  x \\<noteq> 0 \\<or> y \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        x = gcd x y * a \\<and>\n        y = gcd x y * b \\<and> coprime a b \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using gcd_coprime_exists[of x y]"], ["proof (prove)\nusing this:\n  x \\<noteq> 0 \\<or> y \\<noteq> 0\n  gcd x y \\<noteq> 0 \\<Longrightarrow>\n  \\<exists>a' b'.\n     x = a' * gcd x y \\<and> y = b' * gcd x y \\<and> coprime a' b'\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        x = gcd x y * a \\<and>\n        y = gcd x y * b \\<and> coprime a b \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: mult.commute)"], ["proof (state)\nthis:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "have abc: \"a^4 + b^4 = ?c^2 \\<and> a*b*?c \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "have zgab: \"z^4 = ?g^4 * (a^4+b^4)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "from ab ass"], ["proof (chain)\npicking this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  x ^ 4 + y ^ 4 = z ^ 4", "have \"z^4 = (?g*a)^4+(?g*b)^4\""], ["proof (prove)\nusing this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  x ^ 4 + y ^ 4 = z ^ 4\n\ngoal (1 subgoal):\n 1. z ^ 4 = (gcd x y * a) ^ 4 + (gcd x y * b) ^ 4", "by simp"], ["proof (state)\nthis:\n  z ^ 4 = (gcd x y * a) ^ 4 + (gcd x y * b) ^ 4\n\ngoal (1 subgoal):\n 1. z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "thus ?thesis"], ["proof (prove)\nusing this:\n  z ^ 4 = (gcd x y * a) ^ 4 + (gcd x y * b) ^ 4\n\ngoal (1 subgoal):\n 1. z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "by (simp only: power_mult_distrib distrib_left)"], ["proof (state)\nthis:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "have cgz: \"z^2 = ?c * ?g^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "from zgab"], ["proof (chain)\npicking this:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "have \"?g^4 dvd z^4\""], ["proof (prove)\nusing this:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n\ngoal (1 subgoal):\n 1. gcd x y ^ 4 dvd z ^ 4", "by simp"], ["proof (state)\nthis:\n  gcd x y ^ 4 dvd z ^ 4\n\ngoal (1 subgoal):\n 1. z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "hence \"?g dvd z\""], ["proof (prove)\nusing this:\n  gcd x y ^ 4 dvd z ^ 4\n\ngoal (1 subgoal):\n 1. gcd x y dvd z", "by simp"], ["proof (state)\nthis:\n  gcd x y dvd z\n\ngoal (1 subgoal):\n 1. z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "hence \"(z div ?g)*?g = z\""], ["proof (prove)\nusing this:\n  gcd x y dvd z\n\ngoal (1 subgoal):\n 1. z div gcd x y * gcd x y = z", "by (simp only: ac_simps dvd_mult_div_cancel)"], ["proof (state)\nthis:\n  z div gcd x y * gcd x y = z\n\ngoal (1 subgoal):\n 1. z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "with ab"], ["proof (chain)\npicking this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  z div gcd x y * gcd x y = z", "show ?thesis"], ["proof (prove)\nusing this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  z div gcd x y * gcd x y = z\n\ngoal (1 subgoal):\n 1. z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "by (auto simp only: power2_eq_square ac_simps)"], ["proof (state)\nthis:\n  z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "with xyz0"], ["proof (chain)\npicking this:\n  x * y * z \\<noteq> 0\n  z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2", "have c0: \"?c\\<noteq>0\""], ["proof (prove)\nusing this:\n  x * y * z \\<noteq> 0\n  z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2\n\ngoal (1 subgoal):\n 1. (z div gcd x y)\\<^sup>2 \\<noteq> 0", "by (auto simp add: power2_eq_square)"], ["proof (state)\nthis:\n  (z div gcd x y)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "from xyz0"], ["proof (chain)\npicking this:\n  x * y * z \\<noteq> 0", "have g0: \"?g\\<noteq>0\""], ["proof (prove)\nusing this:\n  x * y * z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. gcd x y \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  gcd x y \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "have \"a^4 + b^4 = ?c^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2", "have \"?c^2 * ?g^4 = (a^4+b^4)*?g^4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "have \"?c^2 * ?g^4 = (?c*?g^2)^2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2", "by algebra"], ["proof (state)\nthis:\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "also"], ["proof (state)\nthis:\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "with cgz"], ["proof (chain)\npicking this:\n  z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2", "have \"\\<dots> = (z^2)^2\""], ["proof (prove)\nusing this:\n  z\\<^sup>2 = (z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2 =\n    (z\\<^sup>2)\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2 =\n  (z\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "also"], ["proof (state)\nthis:\n  ((z div gcd x y)\\<^sup>2 * (gcd x y)\\<^sup>2)\\<^sup>2 =\n  (z\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "have \"\\<dots> = z^4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z\\<^sup>2)\\<^sup>2 = z ^ 4", "by algebra"], ["proof (state)\nthis:\n  (z\\<^sup>2)\\<^sup>2 = z ^ 4\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "also"], ["proof (state)\nthis:\n  (z\\<^sup>2)\\<^sup>2 = z ^ 4\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "with zgab"], ["proof (chain)\npicking this:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n  (z\\<^sup>2)\\<^sup>2 = z ^ 4", "have \"\\<dots> = ?g^4*(a^4+b^4)\""], ["proof (prove)\nusing this:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n  (z\\<^sup>2)\\<^sup>2 = z ^ 4\n\ngoal (1 subgoal):\n 1. z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "by simp"], ["proof (state)\nthis:\n  z ^ 4 = gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "finally"], ["proof (chain)\npicking this:\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  gcd x y ^ 4 * (a ^ 4 + b ^ 4)", "show ?thesis"], ["proof (prove)\nusing this:\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  gcd x y ^ 4 * (a ^ 4 + b ^ 4)\n\ngoal (1 subgoal):\n 1. ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n    (a ^ 4 + b ^ 4) * gcd x y ^ 4", "by simp"], ["proof (state)\nthis:\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  (a ^ 4 + b ^ 4) * gcd x y ^ 4\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  (a ^ 4 + b ^ 4) * gcd x y ^ 4\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2", "with g0"], ["proof (chain)\npicking this:\n  gcd x y \\<noteq> 0\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  (a ^ 4 + b ^ 4) * gcd x y ^ 4", "show ?thesis"], ["proof (prove)\nusing this:\n  gcd x y \\<noteq> 0\n  ((z div gcd x y)\\<^sup>2)\\<^sup>2 * gcd x y ^ 4 =\n  (a ^ 4 + b ^ 4) * gcd x y ^ 4\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "moreover"], ["proof (state)\nthis:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "from ab xyz0 c0"], ["proof (chain)\npicking this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  x * y * z \\<noteq> 0\n  (z div gcd x y)\\<^sup>2 \\<noteq> 0", "have \"a*b*?c\\<noteq>0\""], ["proof (prove)\nusing this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  x * y * z \\<noteq> 0\n  (z div gcd x y)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "ultimately"], ["proof (chain)\npicking this:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n\ngoal:\nNo subgoals!", "qed\n  \\<comment> \\<open>choose the parity right\\<close>"], ["proof (state)\nthis:\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "have \"\\<exists> p q. p^4 + q^4 = ?c^2 \\<and> p*q*?c\\<noteq>0 \\<and> odd p \\<and> coprime p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "have \"odd a \\<or> odd b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. odd a \\<or> odd b", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (odd a \\<or> odd b) \\<Longrightarrow> False", "assume \"\\<not>(odd a \\<or> odd b)\""], ["proof (state)\nthis:\n  \\<not> (odd a \\<or> odd b)\n\ngoal (1 subgoal):\n 1. \\<not> (odd a \\<or> odd b) \\<Longrightarrow> False", "hence \"2 dvd a \\<and> 2 dvd b\""], ["proof (prove)\nusing this:\n  \\<not> (odd a \\<or> odd b)\n\ngoal (1 subgoal):\n 1. even a \\<and> even b", "by simp"], ["proof (state)\nthis:\n  even a \\<and> even b\n\ngoal (1 subgoal):\n 1. \\<not> (odd a \\<or> odd b) \\<Longrightarrow> False", "hence \"2 dvd gcd a b\""], ["proof (prove)\nusing this:\n  even a \\<and> even b\n\ngoal (1 subgoal):\n 1. even (gcd a b)", "by simp"], ["proof (state)\nthis:\n  even (gcd a b)\n\ngoal (1 subgoal):\n 1. \\<not> (odd a \\<or> odd b) \\<Longrightarrow> False", "with ab"], ["proof (chain)\npicking this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  even (gcd a b)", "show False"], ["proof (prove)\nusing this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  even (gcd a b)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  odd a \\<or> odd b\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  odd a \\<or> odd b\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "{"], ["proof (state)\nthis:\n  odd a \\<or> odd b\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "assume \"odd a\""], ["proof (state)\nthis:\n  odd a\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  odd a", "obtain p q where \"p = a\" and \"q = b\" and \"odd p\""], ["proof (prove)\nusing this:\n  odd a\n\ngoal (1 subgoal):\n 1. (\\<And>p q.\n        \\<lbrakk>p = a; q = b; odd p\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  p = a\n  q = b\n  odd p\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "with ab abc"], ["proof (chain)\npicking this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n  p = a\n  q = b\n  odd p", "have ?thesis"], ["proof (prove)\nusing this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n  p = a\n  q = b\n  odd p\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "}"], ["proof (state)\nthis:\n  odd a \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "moreover"], ["proof (state)\nthis:\n  odd a \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "{"], ["proof (state)\nthis:\n  odd a \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "assume \"odd b\""], ["proof (state)\nthis:\n  odd b\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "then"], ["proof (chain)\npicking this:\n  odd b", "obtain p q where \"p = b\" and \"q = a\" and \"odd p\""], ["proof (prove)\nusing this:\n  odd b\n\ngoal (1 subgoal):\n 1. (\\<And>p q.\n        \\<lbrakk>p = b; q = a; odd p\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  p = b\n  q = a\n  odd p\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "with ab abc"], ["proof (chain)\npicking this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n  p = b\n  q = a\n  odd p", "have \n        \"p^4 + q^4 = ?c^2 \\<and> p*q*?c\\<noteq>0 \\<and> odd p \\<and> coprime p q\""], ["proof (prove)\nusing this:\n  x = gcd x y * a \\<and> y = gcd x y * b \\<and> coprime a b\n  a ^ 4 + b ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  a * b * (z div gcd x y)\\<^sup>2 \\<noteq> 0\n  p = b\n  q = a\n  odd p\n\ngoal (1 subgoal):\n 1. p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n    p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n    odd p \\<and> coprime p q", "by (simp add: ac_simps)"], ["proof (state)\nthis:\n  p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "hence ?thesis"], ["proof (prove)\nusing this:\n  p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n  p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and> odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "}"], ["proof (state)\nthis:\n  odd b \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "ultimately"], ["proof (chain)\npicking this:\n  odd a \\<or> odd b\n  odd a \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n  odd b \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q", "show ?thesis"], ["proof (prove)\nusing this:\n  odd a \\<or> odd b\n  odd a \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n  odd b \\<Longrightarrow>\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n       p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n       odd p \\<and> coprime p q", "by auto"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal:\nNo subgoals!", "qed\n  \\<comment> \\<open>show contradiction using the earlier result\\<close>"], ["proof (state)\nthis:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. x * y * z \\<noteq> 0 \\<Longrightarrow> False", "thus False"], ["proof (prove)\nusing this:\n  \\<exists>p q.\n     p ^ 4 + q ^ 4 = ((z div gcd x y)\\<^sup>2)\\<^sup>2 \\<and>\n     p * q * (z div gcd x y)\\<^sup>2 \\<noteq> 0 \\<and>\n     odd p \\<and> coprime p q\n\ngoal (1 subgoal):\n 1. False", "by (auto simp only: no_rewritten_fermat4)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary fermat_mult4:\n  assumes xyz: \"(x::int)^n + y^n = z^n\" and n: \"4 dvd n\"\n  shows \"x*y*z=0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x * y * z = 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x * y * z = 0", "from n"], ["proof (chain)\npicking this:\n  4 dvd n", "obtain m where \"n = m*4\""], ["proof (prove)\nusing this:\n  4 dvd n\n\ngoal (1 subgoal):\n 1. (\\<And>m. n = m * 4 \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (auto simp only: ac_simps dvd_def)"], ["proof (state)\nthis:\n  n = m * 4\n\ngoal (1 subgoal):\n 1. x * y * z = 0", "with xyz"], ["proof (chain)\npicking this:\n  x ^ n + y ^ n = z ^ n\n  n = m * 4", "have \"(x^m)^4 + (y^m)^4 = (z^m)^4\""], ["proof (prove)\nusing this:\n  x ^ n + y ^ n = z ^ n\n  n = m * 4\n\ngoal (1 subgoal):\n 1. (x ^ m) ^ 4 + (y ^ m) ^ 4 = (z ^ m) ^ 4", "by (simp only: power_mult)"], ["proof (state)\nthis:\n  (x ^ m) ^ 4 + (y ^ m) ^ 4 = (z ^ m) ^ 4\n\ngoal (1 subgoal):\n 1. x * y * z = 0", "hence \"(x^m)*(y^m)*(z^m) = 0\""], ["proof (prove)\nusing this:\n  (x ^ m) ^ 4 + (y ^ m) ^ 4 = (z ^ m) ^ 4\n\ngoal (1 subgoal):\n 1. x ^ m * y ^ m * z ^ m = 0", "by (rule fermat_4)"], ["proof (state)\nthis:\n  x ^ m * y ^ m * z ^ m = 0\n\ngoal (1 subgoal):\n 1. x * y * z = 0", "thus ?thesis"], ["proof (prove)\nusing this:\n  x ^ m * y ^ m * z ^ m = 0\n\ngoal (1 subgoal):\n 1. x * y * z = 0", "by auto"], ["proof (state)\nthis:\n  x * y * z = 0\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}