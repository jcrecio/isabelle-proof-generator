{"file_name": "/home/qj213/afp-2021-10-22/thys/Stateful_Protocol_Composition_and_Typing/Lazy_Intruder.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Stateful_Protocol_Composition_and_Typing", "problem_names": ["lemma LI_compose_measure_lt: \"((S@(map Send T)@S',\\<theta>\\<^sub>1), (S@Send (Fun f T)#S',\\<theta>\\<^sub>2)) \\<in> measure\\<^sub>s\\<^sub>t\"", "lemma LI_unify_measure_lt:\n  assumes \"Some \\<delta> = mgu (Fun f T) t\" \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"(((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta>\\<^sub>1), (S@Send (Fun f T)#S',\\<theta>\\<^sub>2)) \\<in> measure\\<^sub>s\\<^sub>t\"", "lemma LI_equality_measure_lt:\n  assumes \"Some \\<delta> = mgu t t'\"\n  shows \"(((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta>\\<^sub>1), (S@Equality a t t'#S',\\<theta>\\<^sub>2)) \\<in> measure\\<^sub>s\\<^sub>t\"", "lemma LI_in_measure: \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2) \\<Longrightarrow> ((S\\<^sub>2,\\<theta>\\<^sub>2),(S\\<^sub>1,\\<theta>\\<^sub>1)) \\<in> measure\\<^sub>s\\<^sub>t\"", "lemma LI_in_measure_trans: \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S\\<^sub>2,\\<theta>\\<^sub>2) \\<Longrightarrow> ((S\\<^sub>2,\\<theta>\\<^sub>2),(S\\<^sub>1,\\<theta>\\<^sub>1)) \\<in> measure\\<^sub>s\\<^sub>t\"", "lemma LI_converse_wellfounded_trans: \"wf ((LI_rel\\<^sup>+)\\<inverse>)\"", "lemma LI_acyclic_trans: \"acyclic (LI_rel\\<^sup>+)\"", "lemma LI_acyclic: \"acyclic LI_rel\"", "lemma LI_no_infinite_chain: \"\\<not>(\\<exists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i))\"", "lemma LI_unify_finite:\n  assumes \"finite M\"\n  shows \"finite {((S@Send (Fun f T)#S',\\<theta>), ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>)) | \\<delta> T'. \n                   simple S \\<and> Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\"", "lemma LI_preserves_subst_wf_single:\n  assumes \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\"\n  and \"subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\"\n  shows \"fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2\"\n  and \"subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\"", "lemma LI_preserves_subst_wf:\n  assumes \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\"\n  and \"subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\"\n  shows \"fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2\"\n  and \"subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\"", "lemma LI_preserves_wellformedness:\n  assumes \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\"\n  shows \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2 \\<theta>\\<^sub>2\"", "lemma LI_preserves_trm_wf:\n  assumes \"(S,\\<theta>) \\<leadsto>\\<^sup>* (S',\\<theta>')\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')\"", "lemma LI_soundness_single:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\"\n  shows \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\"", "theorem LI_soundness:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>\"\n  shows \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\"", "lemma LI_completeness_single:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\" \"\\<not>simple S\\<^sub>1\"\n  shows \"\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. (S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2) \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>)\"", "theorem LI_completeness:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\"\n  shows \"\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. (S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2) \\<and> simple S\\<^sub>2 \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>)\""], "translations": [["", "lemma LI_compose_measure_lt: \"((S@(map Send T)@S',\\<theta>\\<^sub>1), (S@Send (Fun f T)#S',\\<theta>\\<^sub>2)) \\<in> measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((S @ map Send T @ S', \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "using strand_fv_card_map_fun_eq[of S f T S'] strand_size_map_fun_lt(2)[of T f]"], ["proof (prove)\nusing this:\n  card\n   (fv\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')) =\n  card (fv\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n  size\\<^sub>s\\<^sub>t (map Send T)\n  < size\\<^sub>s\\<^sub>t [send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t]\n\ngoal (1 subgoal):\n 1. ((S @ map Send T @ S', \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by (simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["", "private"], ["", "lemma LI_unify_measure_lt:\n  assumes \"Some \\<delta> = mgu (Fun f T) t\" \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"(((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta>\\<^sub>1), (S@Send (Fun f T)#S',\\<theta>\\<^sub>2)) \\<in> measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "proof (cases \"\\<delta> = Var\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<delta> = Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "assume \"\\<delta> = Var\""], ["proof (state)\nthis:\n  \\<delta> = Var\n\ngoal (2 subgoals):\n 1. \\<delta> = Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S@S'\""], ["proof (prove)\nusing this:\n  \\<delta> = Var\n\ngoal (1 subgoal):\n 1. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'", "by blast"], ["proof (state)\nthis:\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'\n\ngoal (2 subgoals):\n 1. \\<delta> = Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "thus ?thesis"], ["proof (prove)\nusing this:\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "using strand_fv_card_rm_fun_le[of S S' f T]"], ["proof (prove)\nusing this:\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'\n  card (fv\\<^sub>s\\<^sub>t (S @ S'))\n  \\<le> card\n         (fv\\<^sub>s\\<^sub>t\n           (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by (auto simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["proof (state)\nthis:\n  ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n   S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>\\<^sub>2)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "assume \"\\<delta> \\<noteq> Var\""], ["proof (state)\nthis:\n  \\<delta> \\<noteq> Var\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "then"], ["proof (chain)\npicking this:\n  \\<delta> \\<noteq> Var", "obtain v where \"v \\<in> fv (Fun f T) \\<union> fv t\" \"subst_elim \\<delta> v\""], ["proof (prove)\nusing this:\n  \\<delta> \\<noteq> Var\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv (Fun f T) \\<union> fv t;\n         subst_elim \\<delta> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mgu_eliminates[OF assms(1)[symmetric]]"], ["proof (prove)\nusing this:\n  \\<delta> \\<noteq> Var\n  (\\<exists>v\\<in>fv (Fun f T) \\<union> fv t. subst_elim \\<delta> v) \\<or>\n  \\<delta> = Var\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv (Fun f T) \\<union> fv t;\n         subst_elim \\<delta> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  v \\<in> fv (Fun f T) \\<union> fv t\n  subst_elim \\<delta> v\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence v_in: \"v \\<in> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  v \\<in> fv (Fun f T) \\<union> fv t\n  subst_elim \\<delta> v\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using assms(2)"], ["proof (prove)\nusing this:\n  v \\<in> fv (Fun f T) \\<union> fv t\n  subst_elim \\<delta> v\n  fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (auto simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t\n           (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have \"range_vars \\<delta> \\<subseteq> fv (Fun f T) \\<union> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv (Fun f T) \\<union> fv\\<^sub>s\\<^sub>t S", "using assms(2) mgu_vars_bounded[OF assms(1)[symmetric]]"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv t\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv (Fun f T) \\<union> fv\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  range_vars \\<delta> \\<subseteq> fv (Fun f T) \\<union> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence img_bound: \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<subseteq> fv (Fun f T) \\<union> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have finite_fv: \"finite (fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))", "by auto"], ["proof (state)\nthis:\n  finite\n   (fv\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have \"v \\<notin> fv\\<^sub>s\\<^sub>t ((S@Send (Fun f T)#S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\n                (S @\n                 send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                 S' \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta>)", "using strand_fv_subst_subset_if_subst_elim[OF \\<open>subst_elim \\<delta> v\\<close>] v_in"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t ?S \\<or>\n  bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  v \\<notin> fv\\<^sub>s\\<^sub>t (?S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  v \\<in> fv\\<^sub>s\\<^sub>t\n           (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\n                (S @\n                 send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                 S' \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta>)", "by metis"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\n              (S @\n               send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n               S' \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence v_not_in: \"v \\<notin> fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\n              (S @\n               send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n               S' \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have \"fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using strand_subst_fv_bounded_if_img_bounded[OF img_bound]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @\n    send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n    S' \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by simp"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence \"fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subset> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subset> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using v_in v_not_in"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  v \\<in> fv\\<^sub>s\\<^sub>t\n           (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subset> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subset> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence \"card (fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)) < card (fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S'))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subset> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n    < card\n       (fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))", "using psubset_card_mono[OF finite_fv]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subset> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  ?A \\<subset> fv\\<^sub>s\\<^sub>t\n                (S @\n                 send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                 S') \\<Longrightarrow>\n  card ?A\n  < card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n    < card\n       (fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))", "by simp"], ["proof (state)\nthis:\n  card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  < card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "thus ?thesis"], ["proof (prove)\nusing this:\n  card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  < card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by (auto simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["proof (state)\nthis:\n  ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n   S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>\\<^sub>2)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma LI_equality_measure_lt:\n  assumes \"Some \\<delta> = mgu t t'\"\n  shows \"(((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta>\\<^sub>1), (S@Equality a t t'#S',\\<theta>\\<^sub>2)) \\<in> measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "proof (cases \"\\<delta> = Var\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<delta> = Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "assume \"\\<delta> = Var\""], ["proof (state)\nthis:\n  \\<delta> = Var\n\ngoal (2 subgoals):\n 1. \\<delta> = Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S@S'\""], ["proof (prove)\nusing this:\n  \\<delta> = Var\n\ngoal (1 subgoal):\n 1. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'", "by blast"], ["proof (state)\nthis:\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'\n\ngoal (2 subgoals):\n 1. \\<delta> = Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "thus ?thesis"], ["proof (prove)\nusing this:\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "using strand_fv_card_rm_eq_le[of S S' a t t']"], ["proof (prove)\nusing this:\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = S @ S'\n  card (fv\\<^sub>s\\<^sub>t (S @ S'))\n  \\<le> card\n         (fv\\<^sub>s\\<^sub>t\n           (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by (auto simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["proof (state)\nthis:\n  ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n   S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>2)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "assume \"\\<delta> \\<noteq> Var\""], ["proof (state)\nthis:\n  \\<delta> \\<noteq> Var\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "then"], ["proof (chain)\npicking this:\n  \\<delta> \\<noteq> Var", "obtain v where \"v \\<in> fv t \\<union> fv t'\" \"subst_elim \\<delta> v\""], ["proof (prove)\nusing this:\n  \\<delta> \\<noteq> Var\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv t \\<union> fv t'; subst_elim \\<delta> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mgu_eliminates[OF assms(1)[symmetric]]"], ["proof (prove)\nusing this:\n  \\<delta> \\<noteq> Var\n  (\\<exists>v\\<in>fv t \\<union> fv t'. subst_elim \\<delta> v) \\<or>\n  \\<delta> = Var\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv t \\<union> fv t'; subst_elim \\<delta> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  v \\<in> fv t \\<union> fv t'\n  subst_elim \\<delta> v\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence v_in: \"v \\<in> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  v \\<in> fv t \\<union> fv t'\n  subst_elim \\<delta> v\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using assms"], ["proof (prove)\nusing this:\n  v \\<in> fv t \\<union> fv t'\n  subst_elim \\<delta> v\n  Some \\<delta> = mgu t t'\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t\n           (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have \"range_vars \\<delta> \\<subseteq> fv t \\<union> fv t' \\<union> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv t \\<union> fv t' \\<union> fv\\<^sub>s\\<^sub>t S", "using assms mgu_vars_bounded[OF assms(1)[symmetric]]"], ["proof (prove)\nusing this:\n  Some \\<delta> = mgu t t'\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv t \\<union> fv t' \\<union> fv\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t' \\<union> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence img_bound: \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t' \\<union> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have finite_fv: \"finite (fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (fv\\<^sub>s\\<^sub>t\n       (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))", "by auto"], ["proof (state)\nthis:\n  finite\n   (fv\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have \"v \\<notin> fv\\<^sub>s\\<^sub>t ((S@Equality a t t'#S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\n                (S @\n                 \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                 S' \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta>)", "using strand_fv_subst_subset_if_subst_elim[OF \\<open>subst_elim \\<delta> v\\<close>] v_in"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t ?S \\<or>\n  bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  v \\<notin> fv\\<^sub>s\\<^sub>t (?S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  v \\<in> fv\\<^sub>s\\<^sub>t\n           (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\n                (S @\n                 \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                 S' \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta>)", "by metis"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\n              (S @\n               \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n               S' \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence v_not_in: \"v \\<notin> fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\n              (S @\n               \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n               S' \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "have \"fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using strand_subst_fv_bounded_if_img_bounded[OF img_bound]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n    S' \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by simp"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence \"fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subset> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subset> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using v_in v_not_in"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  v \\<in> fv\\<^sub>s\\<^sub>t\n           (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subset> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subset> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "hence \"card (fv\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)) < card (fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S'))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subset> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n    < card\n       (fv\\<^sub>s\\<^sub>t\n         (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))", "using psubset_card_mono[OF finite_fv]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subset> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  ?A \\<subset> fv\\<^sub>s\\<^sub>t\n                (S @\n                 \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                 S') \\<Longrightarrow>\n  card ?A\n  < card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n    < card\n       (fv\\<^sub>s\\<^sub>t\n         (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))", "by simp"], ["proof (state)\nthis:\n  card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  < card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<delta> \\<noteq> Var \\<Longrightarrow>\n    ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "thus ?thesis"], ["proof (prove)\nusing this:\n  card (fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  < card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n     S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>2)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by (auto simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["proof (state)\nthis:\n  ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1),\n   S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>2)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma LI_in_measure: \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2) \\<Longrightarrow> ((S\\<^sub>2,\\<theta>\\<^sub>2),(S\\<^sub>1,\\<theta>\\<^sub>1)) \\<in> measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n    (S\\<^sub>2, \\<theta>\\<^sub>2) \\<Longrightarrow>\n    ((S\\<^sub>2, \\<theta>\\<^sub>2), S\\<^sub>1, \\<theta>\\<^sub>1)\n    \\<in> measure\\<^sub>s\\<^sub>t", "proof (induction rule: LI_rel.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f\\<rbrakk>\n       \\<Longrightarrow> ((S @ map Send T @ S', \\<theta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T')\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "case (Compose S T f S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  length T = arity f\n  public f\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f\\<rbrakk>\n       \\<Longrightarrow> ((S @ map Send T @ S', \\<theta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T')\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "thus ?case"], ["proof (prove)\nusing this:\n  simple S\n  length T = arity f\n  public f\n\ngoal (1 subgoal):\n 1. ((S @ map Send T @ S', \\<theta>),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>)\n    \\<in> measure\\<^sub>s\\<^sub>t", "using LI_compose_measure_lt[of S T S']"], ["proof (prove)\nusing this:\n  simple S\n  length T = arity f\n  public f\n  ((S @ map Send T @ S', ?\\<theta>\\<^sub>1),\n   S @ send\\<langle>Fun ?f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   ?\\<theta>\\<^sub>2)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((S @ map Send T @ S', \\<theta>),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by metis"], ["proof (state)\nthis:\n  ((S @ map Send T @ S', \\<theta>),\n   S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T')\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T')\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "case (Unify S f U \\<delta> T S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T')\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "hence \"fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n\ngoal (1 subgoal):\n 1. fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using fv_snd_rcv_strand_subset(2)[of S]"], ["proof (prove)\nusing this:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by force"], ["proof (state)\nthis:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T')\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "thus ?case"], ["proof (prove)\nusing this:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>)\n    \\<in> measure\\<^sub>s\\<^sub>t", "using LI_unify_measure_lt[OF Unify.hyps(3), of S S']"], ["proof (prove)\nusing this:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, ?\\<theta>\\<^sub>1),\n   S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   ?\\<theta>\\<^sub>2)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>),\n     S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by metis"], ["proof (state)\nthis:\n  ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>),\n   S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t'\\<rbrakk>\n       \\<Longrightarrow> ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                           \\<theta> \\<circ>\\<^sub>s \\<delta>),\n                          S @\n                          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                          S',\n                          \\<theta>)\n                         \\<in> measure\\<^sub>s\\<^sub>t", "qed (metis LI_equality_measure_lt)"], ["", "private"], ["", "lemma LI_in_measure_trans: \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S\\<^sub>2,\\<theta>\\<^sub>2) \\<Longrightarrow> ((S\\<^sub>2,\\<theta>\\<^sub>2),(S\\<^sub>1,\\<theta>\\<^sub>1)) \\<in> measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n    (S\\<^sub>2, \\<theta>\\<^sub>2) \\<Longrightarrow>\n    ((S\\<^sub>2, \\<theta>\\<^sub>2), S\\<^sub>1, \\<theta>\\<^sub>1)\n    \\<in> measure\\<^sub>s\\<^sub>t", "by (induction rule: trancl.induct, metis surjective_pairing LI_in_measure)\n   (metis (no_types, lifting) surjective_pairing LI_in_measure measure\\<^sub>s\\<^sub>t_trans trans_def)"], ["", "private"], ["", "lemma LI_converse_wellfounded_trans: \"wf ((LI_rel\\<^sup>+)\\<inverse>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf ((LI_rel\\<^sup>+)\\<inverse>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. wf ((LI_rel\\<^sup>+)\\<inverse>)", "have \"(LI_rel\\<^sup>+)\\<inverse> \\<subseteq> measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LI_rel\\<^sup>+)\\<inverse> \\<subseteq> measure\\<^sub>s\\<^sub>t", "using LI_in_measure_trans"], ["proof (prove)\nusing this:\n  (?S\\<^sub>1, ?\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n  (?S\\<^sub>2, ?\\<theta>\\<^sub>2) \\<Longrightarrow>\n  ((?S\\<^sub>2, ?\\<theta>\\<^sub>2), ?S\\<^sub>1, ?\\<theta>\\<^sub>1)\n  \\<in> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. (LI_rel\\<^sup>+)\\<inverse> \\<subseteq> measure\\<^sub>s\\<^sub>t", "by auto"], ["proof (state)\nthis:\n  (LI_rel\\<^sup>+)\\<inverse> \\<subseteq> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf ((LI_rel\\<^sup>+)\\<inverse>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (LI_rel\\<^sup>+)\\<inverse> \\<subseteq> measure\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf ((LI_rel\\<^sup>+)\\<inverse>)", "using measure\\<^sub>s\\<^sub>t_wellfounded wf_subset"], ["proof (prove)\nusing this:\n  (LI_rel\\<^sup>+)\\<inverse> \\<subseteq> measure\\<^sub>s\\<^sub>t\n  wf measure\\<^sub>s\\<^sub>t\n  \\<lbrakk>wf ?r; ?p \\<subseteq> ?r\\<rbrakk> \\<Longrightarrow> wf ?p\n\ngoal (1 subgoal):\n 1. wf ((LI_rel\\<^sup>+)\\<inverse>)", "by metis"], ["proof (state)\nthis:\n  wf ((LI_rel\\<^sup>+)\\<inverse>)\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma LI_acyclic_trans: \"acyclic (LI_rel\\<^sup>+)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. acyclic (LI_rel\\<^sup>+)", "using wf_acyclic[OF LI_converse_wellfounded_trans] acyclic_converse"], ["proof (prove)\nusing this:\n  acyclic ((LI_rel\\<^sup>+)\\<inverse>)\n  acyclic (?r\\<inverse>) = acyclic ?r\n\ngoal (1 subgoal):\n 1. acyclic (LI_rel\\<^sup>+)", "by metis"], ["", "private"], ["", "lemma LI_acyclic: \"acyclic LI_rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. acyclic LI_rel", "using LI_acyclic_trans acyclic_subset"], ["proof (prove)\nusing this:\n  acyclic (LI_rel\\<^sup>+)\n  \\<lbrakk>acyclic ?s; ?r \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> acyclic ?r\n\ngoal (1 subgoal):\n 1. acyclic LI_rel", "by (simp add: acyclic_def)"], ["", "lemma LI_no_infinite_chain: \"\\<not>(\\<exists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i)", "have \"\\<not>(\\<exists>f. \\<forall>i. (f (Suc i), f i) \\<in> (LI_rel\\<^sup>+)\\<inverse>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       \\<forall>i. (f (Suc i), f i) \\<in> (LI_rel\\<^sup>+)\\<inverse>", "using wf_iff_no_infinite_down_chain LI_converse_wellfounded_trans"], ["proof (prove)\nusing this:\n  wf ?r = (\\<nexists>f. \\<forall>i. (f (Suc i), f i) \\<in> ?r)\n  wf ((LI_rel\\<^sup>+)\\<inverse>)\n\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       \\<forall>i. (f (Suc i), f i) \\<in> (LI_rel\\<^sup>+)\\<inverse>", "by metis"], ["proof (state)\nthis:\n  \\<nexists>f. \\<forall>i. (f (Suc i), f i) \\<in> (LI_rel\\<^sup>+)\\<inverse>\n\ngoal (1 subgoal):\n 1. \\<nexists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<nexists>f. \\<forall>i. (f (Suc i), f i) \\<in> (LI_rel\\<^sup>+)\\<inverse>\n\ngoal (1 subgoal):\n 1. \\<nexists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i)", "by simp"], ["proof (state)\nthis:\n  \\<nexists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i)\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma LI_unify_finite:\n  assumes \"finite M\"\n  shows \"finite {((S@Send (Fun f T)#S',\\<theta>), ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>)) | \\<delta> T'. \n                   simple S \\<and> Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "using assms"], ["proof (prove)\nusing this:\n  finite M\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "proof (induction M rule: finite_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> F \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')}\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert x F \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "case (insert m M)"], ["proof (state)\nthis:\n  finite M\n  m \\<notin> M\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (2 subgoals):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> F \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')}\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert x F \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "thus ?case"], ["proof (prove)\nusing this:\n  finite M\n  m \\<notin> M\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> insert m M \\<and>\n         Some \\<delta> = mgu (Fun f T) (Fun f T')}", "proof (cases m)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "case (Fun g U)"], ["proof (state)\nthis:\n  m = Fun g U\n\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "let ?a = \"\\<lambda>\\<delta>. ((S@Send (Fun f T)#S',\\<theta>), ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>))\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "let ?A = \"\\<lambda>B. {?a \\<delta> | \\<delta> T'. simple S \\<and> Fun f T' \\<in> B \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "have \"?A (insert m M) = (?A M) \\<union> (?A {m})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> insert m M \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> M \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<union>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "by auto"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> insert m M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<union>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "moreover"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> insert m M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<union>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "have \"finite (?A {m})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "proof (cases \"\\<exists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "case True"], ["proof (state)\nthis:\n  \\<exists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)\n\ngoal (2 subgoals):\n 1. \\<exists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "then"], ["proof (chain)\npicking this:\n  \\<exists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)", "obtain \\<delta> where \\<delta>: \"Some \\<delta> = mgu (Fun f T) (Fun g U)\""], ["proof (prove)\nusing this:\n  \\<exists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>.\n        Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  Some \\<delta> = mgu (Fun f T) (Fun g U)\n\ngoal (2 subgoals):\n 1. \\<exists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "have A_m_eq: \"\\<And>\\<delta>'. ?a \\<delta>' \\<in> ?A {m} \\<Longrightarrow> ?a \\<delta> = ?a \\<delta>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<delta>'.\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')\n       \\<in> {uu_.\n              \\<exists>\\<delta> T'.\n                 uu_ =\n                 ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                   \\<theta>),\n                  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                  \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                 simple S \\<and>\n                 Fun f T' \\<in> {m} \\<and>\n                 Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<Longrightarrow>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<delta>'.\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')\n       \\<in> {uu_.\n              \\<exists>\\<delta> T'.\n                 uu_ =\n                 ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                   \\<theta>),\n                  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                  \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                 simple S \\<and>\n                 Fun f T' \\<in> {m} \\<and>\n                 Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<Longrightarrow>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "fix \\<delta>'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<delta>'.\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')\n       \\<in> {uu_.\n              \\<exists>\\<delta> T'.\n                 uu_ =\n                 ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                   \\<theta>),\n                  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                  \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                 simple S \\<and>\n                 Fun f T' \\<in> {m} \\<and>\n                 Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<Longrightarrow>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "assume \"?a \\<delta>' \\<in> ?A {m}\""], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. \\<And>\\<delta>'.\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')\n       \\<in> {uu_.\n              \\<exists>\\<delta> T'.\n                 uu_ =\n                 ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                   \\<theta>),\n                  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                  \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                 simple S \\<and>\n                 Fun f T' \\<in> {m} \\<and>\n                 Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<Longrightarrow>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "hence \"\\<exists>\\<sigma>. Some \\<sigma> = mgu (Fun f T) (Fun g U) \\<and> ?a \\<sigma> = ?a \\<delta>'\""], ["proof (prove)\nusing this:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. \\<exists>\\<sigma>.\n       Some \\<sigma> = mgu (Fun f T) (Fun g U) \\<and>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<sigma>,\n        \\<theta> \\<circ>\\<^sub>s \\<sigma>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "using \\<open>m = Fun g U\\<close>"], ["proof (prove)\nusing this:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n  m = Fun g U\n\ngoal (1 subgoal):\n 1. \\<exists>\\<sigma>.\n       Some \\<sigma> = mgu (Fun f T) (Fun g U) \\<and>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<sigma>,\n        \\<theta> \\<circ>\\<^sub>s \\<sigma>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "by auto"], ["proof (state)\nthis:\n  \\<exists>\\<sigma>.\n     Some \\<sigma> = mgu (Fun f T) (Fun g U) \\<and>\n     ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<sigma>,\n      \\<theta> \\<circ>\\<^sub>s \\<sigma>) =\n     ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n      \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. \\<And>\\<delta>'.\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')\n       \\<in> {uu_.\n              \\<exists>\\<delta> T'.\n                 uu_ =\n                 ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                   \\<theta>),\n                  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                  \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                 simple S \\<and>\n                 Fun f T' \\<in> {m} \\<and>\n                 Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<Longrightarrow>\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n        \\<theta> \\<circ>\\<^sub>s \\<delta>')", "thus \"?a \\<delta> = ?a \\<delta>'\""], ["proof (prove)\nusing this:\n  \\<exists>\\<sigma>.\n     Some \\<sigma> = mgu (Fun f T) (Fun g U) \\<and>\n     ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<sigma>,\n      \\<theta> \\<circ>\\<^sub>s \\<sigma>) =\n     ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n      \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n    ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n     \\<theta> \\<circ>\\<^sub>s \\<delta>')", "by (metis \\<delta> option.inject)"], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>'2,\n   \\<theta> \\<circ>\\<^sub>s ?\\<delta>'2)\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<Longrightarrow>\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>'2,\n   \\<theta> \\<circ>\\<^sub>s ?\\<delta>'2)\n\ngoal (2 subgoals):\n 1. \\<exists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "have \"?A {m} = {} \\<or> ?A {m} = {?a \\<delta>}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "proof (cases \"simple S \\<and> ?A {m} \\<noteq> {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. simple S \\<and>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n    {} \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n 2. \\<not> (simple S \\<and>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n            {}) \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "case True"], ["proof (state)\nthis:\n  simple S \\<and>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. simple S \\<and>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n    {} \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n 2. \\<not> (simple S \\<and>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n            {}) \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "hence \"simple S\" \"?A {m} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  simple S \\<and>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. simple S &&&\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n    {}", "by meson+"], ["proof (state)\nthis:\n  simple S\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n  {}\n\ngoal (2 subgoals):\n 1. simple S \\<and>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n    {} \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n 2. \\<not> (simple S \\<and>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n            {}) \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "hence \"?A {m} = {?a \\<delta> | \\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)}\""], ["proof (prove)\nusing this:\n  simple S\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n  {}\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>) |\n     \\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)}", "using \\<open>m = Fun g U\\<close>"], ["proof (prove)\nusing this:\n  simple S\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n  {}\n  m = Fun g U\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>) |\n     \\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)}", "by auto"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>) |\n   \\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)}\n\ngoal (2 subgoals):\n 1. simple S \\<and>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n    {} \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n 2. \\<not> (simple S \\<and>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n            {}) \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "hence \"?a \\<delta> \\<in> ?A {m}\""], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>) |\n   \\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)}\n\ngoal (1 subgoal):\n 1. ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta> \\<circ>\\<^sub>s \\<delta>)\n    \\<in> {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "using \\<delta>"], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>) |\n   \\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)}\n  Some \\<delta> = mgu (Fun f T) (Fun g U)\n\ngoal (1 subgoal):\n 1. ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta> \\<circ>\\<^sub>s \\<delta>)\n    \\<in> {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "by auto"], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (2 subgoals):\n 1. simple S \\<and>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n    {} \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n 2. \\<not> (simple S \\<and>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n            {}) \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "assume \"\\<not>(?A {m} = {} \\<or> ?A {m} = {?a \\<delta>})\""], ["proof (state)\nthis:\n  \\<not> ({uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {} \\<or>\n          {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n             \\<theta>),\n            S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n            \\<theta> \\<circ>\\<^sub>s \\<delta>)})\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  \\<not> ({uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {} \\<or>\n          {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n             \\<theta>),\n            S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n            \\<theta> \\<circ>\\<^sub>s \\<delta>)})", "obtain B where B: \"?A {m} = insert (?a \\<delta>) B\" \"?a \\<delta> \\<notin> B\" \"B \\<noteq> {}\""], ["proof (prove)\nusing this:\n  \\<not> ({uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {} \\<or>\n          {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n             \\<theta>),\n            S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n            \\<theta> \\<circ>\\<^sub>s \\<delta>)})\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>{uu_.\n                  \\<exists>\\<delta> T'.\n                     uu_ =\n                     ((S @\n                       send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                       \\<theta>),\n                      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                      \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                     simple S \\<and>\n                     Fun f T' \\<in> {m} \\<and>\n                     Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n                 insert\n                  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                    \\<theta>),\n                   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n                  B;\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>)\n         \\<notin> B;\n         B \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?A {m} \\<noteq> {}\\<close> \\<open>?a \\<delta> \\<in> ?A {m}\\<close>"], ["proof (prove)\nusing this:\n  \\<not> ({uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {} \\<or>\n          {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n          {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n             \\<theta>),\n            S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n            \\<theta> \\<circ>\\<^sub>s \\<delta>)})\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n  {}\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>{uu_.\n                  \\<exists>\\<delta> T'.\n                     uu_ =\n                     ((S @\n                       send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                       \\<theta>),\n                      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                      \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                     simple S \\<and>\n                     Fun f T' \\<in> {m} \\<and>\n                     Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n                 insert\n                  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                    \\<theta>),\n                   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n                  B;\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>)\n         \\<notin> B;\n         B \\<noteq> {}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types, lifting) Set.set_insert)"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  insert\n   ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)\n   B\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<notin> B\n  B \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  insert\n   ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)\n   B\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<notin> B\n  B \\<noteq> {}", "obtain b where b: \"?a \\<delta> \\<noteq> b\" \"b \\<in> B\""], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  insert\n   ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)\n   B\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<notin> B\n  B \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                   \\<theta>),\n                  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                  \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<noteq>\n                 b;\n         b \\<in> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types, lifting) ex_in_conv)"], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<noteq>\n  b\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "then"], ["proof (chain)\npicking this:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<noteq>\n  b\n  b \\<in> B", "obtain \\<delta>' where \\<delta>': \"b = ?a \\<delta>'\""], ["proof (prove)\nusing this:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<noteq>\n  b\n  b \\<in> B\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>'.\n        b =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n         \\<theta> \\<circ>\\<^sub>s \\<delta>') \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using B(1)"], ["proof (prove)\nusing this:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<noteq>\n  b\n  b \\<in> B\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  insert\n   ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)\n   B\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>'.\n        b =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n         \\<theta> \\<circ>\\<^sub>s \\<delta>') \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  b =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  b =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "have \"?a \\<delta>' \\<in> ?A {m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n     \\<theta> \\<circ>\\<^sub>s \\<delta>')\n    \\<in> {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "using B(1) b(2) \\<delta>'"], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  insert\n   ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)\n   B\n  b \\<in> B\n  b =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n     \\<theta> \\<circ>\\<^sub>s \\<delta>')\n    \\<in> {uu_.\n           \\<exists>\\<delta> T'.\n              uu_ =\n              ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                \\<theta>),\n               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n              simple S \\<and>\n              Fun f T' \\<in> {m} \\<and>\n              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "by auto"], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "hence \"?a \\<delta> = ?a \\<delta>'\""], ["proof (prove)\nusing this:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  \\<in> {uu_.\n         \\<exists>\\<delta> T'.\n            uu_ =\n            ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n              \\<theta>),\n             S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n             \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n            simple S \\<and>\n            Fun f T' \\<in> {m} \\<and>\n            Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n    ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n     S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n     \\<theta> \\<circ>\\<^sub>s \\<delta>')", "by (blast dest!: A_m_eq)"], ["proof (state)\nthis:\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. \\<not> ({uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {} \\<or>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n            {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>)}) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  b =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')", "show False"], ["proof (prove)\nusing this:\n  b =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n\ngoal (1 subgoal):\n 1. False", "using b(1)"], ["proof (prove)\nusing this:\n  b =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) =\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>',\n   \\<theta> \\<circ>\\<^sub>s \\<delta>')\n  ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n   S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<noteq>\n  b\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {} \\<or>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n\ngoal (1 subgoal):\n 1. \\<not> (simple S \\<and>\n            {uu_.\n             \\<exists>\\<delta> T'.\n                uu_ =\n                ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n                  \\<theta>),\n                 S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                 \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                simple S \\<and>\n                Fun f T' \\<in> {m} \\<and>\n                Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<noteq>\n            {}) \\<Longrightarrow>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {} \\<or>\n    {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n      S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n      \\<theta> \\<circ>\\<^sub>s \\<delta>)}", "qed auto"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {} \\<or>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n\ngoal (2 subgoals):\n 1. \\<exists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "thus ?thesis"], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {} \\<or>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n    \\<theta> \\<circ>\\<^sub>s \\<delta>)}\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "by (metis (no_types, lifting) finite.emptyI finite_insert)"], ["proof (state)\nthis:\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "case False"], ["proof (state)\nthis:\n  \\<nexists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)\n\ngoal (1 subgoal):\n 1. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "hence \"?A {m} = {}\""], ["proof (prove)\nusing this:\n  \\<nexists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {}", "using \\<open>m = Fun g U\\<close>"], ["proof (prove)\nusing this:\n  \\<nexists>\\<delta>. Some \\<delta> = mgu (Fun f T) (Fun g U)\n  m = Fun g U\n\ngoal (1 subgoal):\n 1. {uu_.\n     \\<exists>\\<delta> T'.\n        uu_ =\n        ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n         S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n         \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n        simple S \\<and>\n        Fun f T' \\<in> {m} \\<and>\n        Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n    {}", "by blast"], ["proof (state)\nthis:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {}\n\ngoal (1 subgoal):\n 1. \\<nexists>\\<delta>.\n       Some \\<delta> = mgu (Fun f T) (Fun g U) \\<Longrightarrow>\n    finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "thus ?thesis"], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {}\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "by (metis finite.emptyI)"], ["proof (state)\nthis:\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (2 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}\n 2. \\<And>x21 x22.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Fun x21 x22\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "ultimately"], ["proof (chain)\npicking this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> insert m M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<union>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "show ?thesis"], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> insert m M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<union>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> insert m M \\<and>\n         Some \\<delta> = mgu (Fun f T) (Fun f T')}", "using insert.IH"], ["proof (prove)\nusing this:\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> insert m M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} =\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> M \\<and>\n      Some \\<delta> = mgu (Fun f T) (Fun f T')} \\<union>\n  {uu_.\n   \\<exists>\\<delta> T'.\n      uu_ =\n      ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n       S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n       \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n      simple S \\<and>\n      Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> {m} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> M \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> insert m M \\<and>\n         Some \\<delta> = mgu (Fun f T) (Fun f T')}", "by auto"], ["proof (state)\nthis:\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> insert m M \\<and>\n       Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. \\<And>x1.\n       \\<lbrakk>finite M; m \\<notin> M;\n        finite\n         {uu_.\n          \\<exists>\\<delta> T'.\n             uu_ =\n             ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n               \\<theta>),\n              S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n              \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n             simple S \\<and>\n             Fun f T' \\<in> M \\<and>\n             Some \\<delta> = mgu (Fun f T) (Fun f T')};\n        m = Var x1\\<rbrakk>\n       \\<Longrightarrow> finite\n                          {uu_.\n                           \\<exists>\\<delta> T'.\n                              uu_ =\n                              ((S @\n                                send\\<langle>Fun f\n        T\\<rangle>\\<^sub>s\\<^sub>t #\n                                S',\n                                \\<theta>),\n                               S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n                               \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n                              simple S \\<and>\n                              Fun f T' \\<in> insert m M \\<and>\n                              Some \\<delta> = mgu (Fun f T) (Fun f T')}", "qed simp"], ["proof (state)\nthis:\n  finite\n   {uu_.\n    \\<exists>\\<delta> T'.\n       uu_ =\n       ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S', \\<theta>),\n        S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n        \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n       simple S \\<and>\n       Fun f T' \\<in> insert m M \\<and>\n       Some \\<delta> = mgu (Fun f T) (Fun f T')}\n\ngoal (1 subgoal):\n 1. finite\n     {uu_.\n      \\<exists>\\<delta> T'.\n         uu_ =\n         ((S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n           \\<theta>),\n          S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n          \\<theta> \\<circ>\\<^sub>s \\<delta>) \\<and>\n         simple S \\<and>\n         Fun f T' \\<in> {} \\<and> Some \\<delta> = mgu (Fun f T) (Fun f T')}", "qed fastforce"], ["", "end"], ["", "subsection \\<open>Lemma: The Lazy Intruder Preserves Well-formedness\\<close>"], ["", "context\nbegin"], ["", "private"], ["", "lemma LI_preserves_subst_wf_single:\n  assumes \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\"\n  and \"subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\"\n  shows \"fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2\"\n  and \"subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n     {} &&&\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2) &&&\n    subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {} &&&\n    range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {}", "using assms"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2, \\<theta>\\<^sub>2)\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (1 subgoal):\n 1. (fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n     {} &&&\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2) &&&\n    subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {} &&&\n    range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {}", "proof (induction rule: LI_rel.induct)"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t (S @ map Send T @ S') \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>)\nA total of 12 subgoals...", "case (Compose S X f S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  length X = arity f\n  public f\n\ngoal (12 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t (S @ map Send T @ S') \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>)\nA total of 12 subgoals...", "{"], ["proof (state)\nthis:\n  simple S\n  length X = arity f\n  public f\n\ngoal (12 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t (S @ map Send T @ S') \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>)\nA total of 12 subgoals...", "case 1"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (12 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t (S @ map Send T @ S') \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>)\nA total of 12 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ map Send X @ S') \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n    {}", "using vars_st_snd_map"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  vars\\<^sub>s\\<^sub>t (map Send ?X) = fv (Fun ?f ?X)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ map Send X @ S') \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ map Send X @ S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n  {}\n\ngoal (11 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          vars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}\nA total of 11 subgoals...", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t (S @ map Send X @ S') \\<inter>\n                    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n                    {}\n\ngoal (11 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          vars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}\nA total of 11 subgoals...", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t (S @ map Send X @ S') \\<inter>\n                    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n                    {}\n\ngoal (11 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          vars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}\nA total of 11 subgoals...", "case 2"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (11 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          vars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}\nA total of 11 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>", "using vars_st_snd_map"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  vars\\<^sub>s\\<^sub>t (map Send ?X) = fv (Fun ?f ?X)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (10 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          bvars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (10 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          bvars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (10 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          bvars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}", "case 3"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (10 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                         vars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 10. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n        \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n         fv\\<^sub>s\\<^sub>t\n          (S @\n           \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n           S') \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n         subst_domain \\<theta> \\<inter>\n         vars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {};\n         range_vars \\<theta> \\<inter>\n         bvars\\<^sub>s\\<^sub>t\n          (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars\n                           (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                          bvars\\<^sub>s\\<^sub>t\n                           (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                          {}", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n    {}", "using vars_st_snd_map"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  vars\\<^sub>s\\<^sub>t (map Send ?X) = fv (Fun ?f ?X)\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n    {}", "by force"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n  {}\n\ngoal (9 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                    vars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n                    {}\n\ngoal (9 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta> \\<inter>\n                    vars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n                    {}\n\ngoal (9 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 4"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (9 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                         bvars\\<^sub>s\\<^sub>t (S @ map Send T @ S') =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 9. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. range_vars \\<theta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n    {}", "using vars_st_snd_map"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  vars\\<^sub>s\\<^sub>t (map Send ?X) = fv (Fun ?f ?X)\n\ngoal (1 subgoal):\n 1. range_vars \\<theta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n    {}", "by auto"], ["proof (state)\nthis:\n  range_vars \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n  {}\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta> \\<inter>\n                    bvars\\<^sub>s\\<^sub>t (S @ map Send X @ S') =\n                    {}\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case (Unify S f U \\<delta> T S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n\ngoal (1 subgoal):\n 1. fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using fv_subset_if_in_strand_ik'"], ["proof (prove)\nusing this:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n  ?t \\<in> ik\\<^sub>s\\<^sub>t ?S \\<Longrightarrow>\n  fv ?t \\<subseteq> fv\\<^sub>s\\<^sub>t ?S\n\ngoal (1 subgoal):\n 1. fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by blast"], ["proof (state)\nthis:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence *: \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using mgu_vars_bounded[OF Unify.hyps(3)[symmetric]]"], ["proof (prove)\nusing this:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f U)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f U)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (fastforce simp del: subst_range.simps)"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"fv\\<^sub>s\\<^sub>t (S@S') \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\" \"vars\\<^sub>s\\<^sub>t (S@S') \\<subseteq> vars\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S')\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    vars\\<^sub>s\\<^sub>t (S @ S')\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence **: \"fv\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\"\n            \"vars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> vars\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using subst_sends_strand_fv_to_img[of \"S@S'\" \\<delta>]\n          strand_subst_vars_union_bound[of \"S@S'\" \\<delta>] *"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (S @ S') \\<union> range_vars \\<delta>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t (S @ S') \\<union> range_vars \\<delta>\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast+"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>", "by (fact mgu_gives_wellformed_subst[OF Unify.hyps(3)[symmetric]])"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 1"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = bvars\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using bvars_subst_ident[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (8 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 8. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using 1 **"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (7 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (7 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (7 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 2"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (7 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\" \"subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}", "using *"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}", "by blast+"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n\ngoal (7 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 7. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n     (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "by (metis wf_subst_compose[OF \\<open>wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<close> \\<open>wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\\<close>])"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n   (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 3"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using **"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "moreover"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"v \\<in> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\" when \"v \\<in> subst_domain \\<delta>\" for v"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using * that"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  v \\<in> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<delta> \\<inter> fv\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using mgu_eliminates_dom[OF Unify.hyps(3)[symmetric],\n                THEN strand_fv_subst_subset_if_subst_elim, of _ \"S@Send (Fun f T)#S'\"]"], ["proof (prove)\nusing this:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<lbrakk>?v \\<in> subst_domain \\<delta>;\n   ?v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<or>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?v \\<notin> fv\\<^sub>s\\<^sub>t\n                                 (S @\n                                  send\\<langle>Fun f\n          T\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "unfolding subst_elim_def"], ["proof (prove)\nusing this:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<lbrakk>?v \\<in> subst_domain \\<delta>;\n   ?v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<or>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?v \\<notin> fv\\<^sub>s\\<^sub>t\n                                 (S @\n                                  send\\<langle>Fun f\n          T\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "moreover"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = bvars\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using bvars_subst_ident[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using 3(1) *"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (6 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 6. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "ultimately"], ["proof (chain)\npicking this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}", "show ?case"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using ** * subst_domain_compose[of \\<theta> \\<delta>] vars\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>t_bvars\\<^sub>s\\<^sub>t[of \"S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\"]"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<subseteq> subst_domain \\<theta> \\<union> subst_domain \\<delta>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                    vars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (5 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                    vars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (5 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 4"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have ***: \"bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = bvars\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using bvars_subst_ident[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (5 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using 4(1) *"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  range_vars \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        fv\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 5. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using subst_img_comp_subset[of \\<theta> \\<delta>] 4(4) ***"], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<subseteq> range_vars \\<theta> \\<union> range_vars \\<delta>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case (Equality S \\<delta> t t' a S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Some \\<delta> = mgu t t'\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence *: \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  simple S\n  Some \\<delta> = mgu t t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using mgu_vars_bounded[OF Equality.hyps(2)[symmetric]]"], ["proof (prove)\nusing this:\n  simple S\n  Some \\<delta> = mgu t t'\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  simple S\n  Some \\<delta> = mgu t t'\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by fastforce"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"fv\\<^sub>s\\<^sub>t (S@S') \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\" \"vars\\<^sub>s\\<^sub>t (S@S') \\<subseteq> vars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S')\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                  S') &&&\n    vars\\<^sub>s\\<^sub>t (S @ S')\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence **: \"fv\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\"\n            \"vars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> vars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                  S') &&&\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using subst_sends_strand_fv_to_img[of \"S@S'\" \\<delta>]\n          strand_subst_vars_union_bound[of \"S@S'\" \\<delta>] *"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S')\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (S @ S') \\<union> range_vars \\<delta>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t (S @ S') \\<union> range_vars \\<delta>\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                  S') &&&\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast+"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>", "by (fact mgu_gives_wellformed_subst[OF Equality.hyps(2)[symmetric]])"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 1"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = bvars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using bvars_subst_ident[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (4 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 4. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using 1 **"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (3 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (3 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 2"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\" \"subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}", "using *"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}", "by blast+"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n\ngoal (3 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n     (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "by (metis wf_subst_compose[OF \\<open>wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<close> \\<open>wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<delta>\\<close>])"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n   (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 3"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using **"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "moreover"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"v \\<in> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\" when \"v \\<in> subst_domain \\<delta>\" for v"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using * that"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  v \\<in> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<delta> \\<inter> fv\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using mgu_eliminates_dom[OF Equality.hyps(2)[symmetric],\n                THEN strand_fv_subst_subset_if_subst_elim, of _ \"S@Equality a t t'#S'\"]"], ["proof (prove)\nusing this:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<lbrakk>?v \\<in> subst_domain \\<delta>;\n   ?v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @\n              \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<or>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?v \\<notin> fv\\<^sub>s\\<^sub>t\n                                 (S @\n                                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "unfolding subst_elim_def"], ["proof (prove)\nusing this:\n  ?v2 \\<in> subst_domain \\<delta> \\<Longrightarrow>\n  ?v2\n  \\<in> fv\\<^sub>s\\<^sub>t\n         (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<lbrakk>?v \\<in> subst_domain \\<delta>;\n   ?v \\<in> fv\\<^sub>s\\<^sub>t\n             (S @\n              \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<or>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> ?v \\<notin> fv\\<^sub>s\\<^sub>t\n                                 (S @\n                                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "moreover"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have \"bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = bvars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using bvars_subst_ident[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"subst_domain \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using 3(1) *"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         vars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "ultimately"], ["proof (chain)\npicking this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}", "show ?case"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using ** * subst_domain_compose[of \\<theta> \\<delta>] vars\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>t_bvars\\<^sub>s\\<^sub>t[of \"S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\"]"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<subseteq> subst_domain \\<theta> \\<union> subst_domain \\<delta>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                    vars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain\n                     (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                    vars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "case 4"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "have ***: \"bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = bvars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using bvars_subst_ident[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "hence \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using 4(1) *"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  range_vars \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        fv\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S') \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n        subst_domain \\<theta> \\<inter>\n        vars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {};\n        range_vars \\<theta> \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars\n                          (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                         bvars\\<^sub>s\\<^sub>t\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using subst_img_comp_subset[of \\<theta> \\<delta>] 4(4) ***"], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n  \\<subseteq> range_vars \\<theta> \\<union> range_vars \\<delta>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal:\nNo subgoals!", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\n            (S @\n             \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S') \\<inter>\n           bvars\\<^sub>s\\<^sub>t\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>;\n   subst_domain \\<theta> \\<inter>\n   vars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {};\n   range_vars \\<theta> \\<inter>\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars (\\<theta> \\<circ>\\<^sub>s \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n                    {}\n\ngoal:\nNo subgoals!", "qed"], ["", "private"], ["", "lemma LI_preserves_subst_wf:\n  assumes \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\"\n  and \"subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\" \"range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\"\n  shows \"fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2\"\n  and \"subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\" \"range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n     {} &&&\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2) &&&\n    subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {} &&&\n    range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {}", "using assms"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>2, \\<theta>\\<^sub>2)\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (1 subgoal):\n 1. (fv\\<^sub>s\\<^sub>t S\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n     {} &&&\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>2) &&&\n    subst_domain \\<theta>\\<^sub>2 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {} &&&\n    range_vars \\<theta>\\<^sub>2 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>2 =\n    {}", "proof (induction S\\<^sub>2 \\<theta>\\<^sub>2 rule: rtrancl_induct2)"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t aa \\<inter>\n                         bvars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 8. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "case (step S\\<^sub>i \\<theta>\\<^sub>i S\\<^sub>j \\<theta>\\<^sub>j)"], ["proof (state)\nthis:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>i\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>i \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n\ngoal (8 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t aa \\<inter>\n                         bvars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 8. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "{"], ["proof (state)\nthis:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>i\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>i \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n\ngoal (8 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t aa \\<inter>\n                         bvars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 8. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "case 1"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (8 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t aa \\<inter>\n                         bvars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 8. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n    {}", "using LI_preserves_subst_wf_single[OF \\<open>(S\\<^sub>i,\\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j,\\<theta>\\<^sub>j)\\<close>] step.IH"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>i\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>i \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n    {}", "by metis"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>j = {}\n\ngoal (7 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n\ngoal (7 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n\ngoal (7 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "case 2"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (7 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t ba\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 7. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>j", "using LI_preserves_subst_wf_single[OF \\<open>(S\\<^sub>i,\\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j,\\<theta>\\<^sub>j)\\<close>] step.IH"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>i\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>i \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>j", "by metis"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>j\n\ngoal (6 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n\ngoal (6 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n\ngoal (6 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "case 3"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (6 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> subst_domain ba \\<inter> vars\\<^sub>s\\<^sub>t aa =\n                         {}\n 6. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta>\\<^sub>j \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n    {}", "using LI_preserves_subst_wf_single[OF \\<open>(S\\<^sub>i,\\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j,\\<theta>\\<^sub>j)\\<close>] step.IH"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>i\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>i \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta>\\<^sub>j \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n    {}", "by metis"], ["proof (state)\nthis:\n  subst_domain \\<theta>\\<^sub>j \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>j = {}\n\ngoal (5 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n\ngoal (5 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n\ngoal (5 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "case 4"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (5 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 5. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> fv\\<^sub>s\\<^sub>t a \\<inter>\n                          bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t b;\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> subst_domain b \\<inter> vars\\<^sub>s\\<^sub>t a =\n                          {};\n        \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                 bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                 {};\n         wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n         subst_domain \\<theta>\\<^sub>1 \\<inter>\n         vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {};\n         range_vars \\<theta>\\<^sub>1 \\<inter>\n         bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n         {}\\<rbrakk>\n        \\<Longrightarrow> range_vars b \\<inter> bvars\\<^sub>s\\<^sub>t a =\n                          {};\n        fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n        subst_domain \\<theta>\\<^sub>1 \\<inter>\n        vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {};\n        range_vars \\<theta>\\<^sub>1 \\<inter>\n        bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n        {}\\<rbrakk>\n       \\<Longrightarrow> range_vars ba \\<inter> bvars\\<^sub>s\\<^sub>t aa =\n                         {}", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n\ngoal (1 subgoal):\n 1. range_vars \\<theta>\\<^sub>j \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n    {}", "using LI_preserves_subst_wf_single[OF \\<open>(S\\<^sub>i,\\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j,\\<theta>\\<^sub>j)\\<close>] step.IH"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1\n  subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 = {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>i\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>i \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>i \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n                    {}\n\ngoal (1 subgoal):\n 1. range_vars \\<theta>\\<^sub>j \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n    {}", "by metis"], ["proof (state)\nthis:\n  range_vars \\<theta>\\<^sub>j \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>j = {}\n\ngoal (4 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n   subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {};\n   range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n\ngoal (4 subgoals):\n 1. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 2. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                       \\<theta>\\<^sub>1\n 3. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta>\\<^sub>1 \\<inter>\n                      vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}\n 4. \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<inter>\n             bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n             {};\n     wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>1;\n     subst_domain \\<theta>\\<^sub>1 \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {};\n     range_vars \\<theta>\\<^sub>1 \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n     {}\\<rbrakk>\n    \\<Longrightarrow> range_vars \\<theta>\\<^sub>1 \\<inter>\n                      bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n                      {}", "qed metis"], ["", "lemma LI_preserves_wellformedness:\n  assumes \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\"\n  shows \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2 \\<theta>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2\n     \\<theta>\\<^sub>2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2\n     \\<theta>\\<^sub>2", "have *: \"wf\\<^sub>s\\<^sub>t {} S\\<^sub>j\"\n    when \"(S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\" \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i \\<theta>\\<^sub>i\" for S\\<^sub>i \\<theta>\\<^sub>i S\\<^sub>j \\<theta>\\<^sub>j"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} S\\<^sub>j", "using that"], ["proof (prove)\nusing this:\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} S\\<^sub>j", "proof (induction rule: LI_rel.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Unify S f U \\<delta> T S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"fv (Fun f T) \\<union> fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Fun f T) \\<union> fv (Fun f U)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using Unify.hyps(2)"], ["proof (prove)\nusing this:\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv (Fun f T) \\<union> fv (Fun f U)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by force"], ["proof (state)\nthis:\n  fv (Fun f T) \\<union> fv (Fun f U)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  fv (Fun f T) \\<union> fv (Fun f U)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using mgu_vars_bounded[OF Unify.hyps(3)[symmetric]]"], ["proof (prove)\nusing this:\n  fv (Fun f T) \\<union> fv (Fun f U)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f U)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (metis subset_trans)"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S') = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "using Unify.prems"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "by blast"], ["proof (state)\nthis:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_unify[OF _ Unify.hyps(2) MGU_is_Unifier[OF mgu_gives_MGU], of \"{}\",\n                     OF _ Unify.hyps(3)[symmetric], of S'] Unify.prems(1)"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t {}\n            (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S');\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` {}))\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (auto simp add: wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Equality S \\<delta> t t' a S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Some \\<delta> = mgu t t'\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"fv t \\<union> fv t' \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t \\<union> fv t'\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using Equality.hyps(2)"], ["proof (prove)\nusing this:\n  Some \\<delta> = mgu t t'\n\ngoal (1 subgoal):\n 1. fv t \\<union> fv t'\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by force"], ["proof (state)\nthis:\n  fv t \\<union> fv t'\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  fv t \\<union> fv t'\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using mgu_vars_bounded[OF Equality.hyps(2)[symmetric]]"], ["proof (prove)\nusing this:\n  fv t \\<union> fv t'\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (metis subset_trans)"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@Equality a t t'#S') = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "using Equality.prems"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "by blast"], ["proof (state)\nthis:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {}\n                          (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_equality[OF _ Equality.hyps(2)[symmetric], of \"{}\" S a S'] Equality.prems(1)"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t {}\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` {}))\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (auto simp add: wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} (S @ map Send T @ S')", "qed (metis wf_send_compose wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)"], ["proof (state)\nthis:\n  \\<lbrakk>(?S\\<^sub>i2, ?\\<theta>\\<^sub>i2) \\<leadsto>\n           (?S\\<^sub>j2, ?\\<theta>\\<^sub>j2);\n   wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r ?S\\<^sub>i2\n    ?\\<theta>\\<^sub>i2\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t {} ?S\\<^sub>j2\n\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2\n     \\<theta>\\<^sub>2", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2\n     \\<theta>\\<^sub>2", "using assms"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>2, \\<theta>\\<^sub>2)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2\n     \\<theta>\\<^sub>2", "proof (induction rule: rtrancl_induct2)"], ["proof (state)\ngoal (2 subgoals):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n     \\<theta>\\<^sub>1 \\<Longrightarrow>\n    wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n     \\<theta>\\<^sub>1\n 2. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n         \\<theta>\\<^sub>1 \\<Longrightarrow>\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r a b;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n         \\<theta>\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n                          aa ba", "case (step S\\<^sub>i \\<theta>\\<^sub>i S\\<^sub>j \\<theta>\\<^sub>j)"], ["proof (state)\nthis:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1 \\<Longrightarrow>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n\ngoal (2 subgoals):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n     \\<theta>\\<^sub>1 \\<Longrightarrow>\n    wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n     \\<theta>\\<^sub>1\n 2. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n         \\<theta>\\<^sub>1 \\<Longrightarrow>\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r a b;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n         \\<theta>\\<^sub>1\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n                          aa ba", "thus ?case"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1 \\<Longrightarrow>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>j\n     \\<theta>\\<^sub>j", "using LI_preserves_subst_wf_single[OF \\<open>(S\\<^sub>i,\\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j,\\<theta>\\<^sub>j)\\<close>] *[OF \\<open>(S\\<^sub>i,\\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j,\\<theta>\\<^sub>j)\\<close>]"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1 \\<Longrightarrow>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t S\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t\n                     \\<theta>\\<^sub>j\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> subst_domain \\<theta>\\<^sub>j \\<inter>\n                    vars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t S\\<^sub>i \\<inter>\n           bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n           {};\n   wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta>\\<^sub>i;\n   subst_domain \\<theta>\\<^sub>i \\<inter> vars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {};\n   range_vars \\<theta>\\<^sub>i \\<inter> bvars\\<^sub>s\\<^sub>t S\\<^sub>i =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars \\<theta>\\<^sub>j \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S\\<^sub>j =\n                    {}\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t {} S\\<^sub>j\n\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>j\n     \\<theta>\\<^sub>j", "by (metis wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)"], ["proof (state)\nthis:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>j\n   \\<theta>\\<^sub>j\n\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n     \\<theta>\\<^sub>1 \\<Longrightarrow>\n    wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n     \\<theta>\\<^sub>1", "qed simp"], ["proof (state)\nthis:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>2\n   \\<theta>\\<^sub>2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma LI_preserves_trm_wf:\n  assumes \"(S,\\<theta>) \\<leadsto>\\<^sup>* (S',\\<theta>')\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "fix S \\<theta> S' \\<theta>'"], ["proof (state)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "assume \"(S,\\<theta>) \\<leadsto> (S',\\<theta>')\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\""], ["proof (state)\nthis:\n  (S, \\<theta>) \\<leadsto> (S', \\<theta>')\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')\""], ["proof (prove)\nusing this:\n  (S, \\<theta>) \\<leadsto> (S', \\<theta>')\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "proof (induction rule: LI_rel.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "case (Compose S T f S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  length T = arity f\n  public f\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\"\n        and *: \"t \\<in> set S \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p t)\" \"t \\<in> set S' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p t)\" for t"], ["proof (prove)\nusing this:\n  simple S\n  length T = arity f\n  public f\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) &&&\n    (t \\<in> set S \\<Longrightarrow>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n      (trms\\<^sub>s\\<^sub>t\\<^sub>p t)) &&&\n    (t \\<in> set S' \\<Longrightarrow>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p t))", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  ?t2 \\<in> set S \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n  ?t2 \\<in> set S' \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" when \"t \\<in> set T\" for t"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  ?t2 \\<in> set S \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n  ?t2 \\<in> set S' \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "using that"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  ?t2 \\<in> set S \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n  ?t2 \\<in> set S' \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n  t \\<in> set T\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  \\<forall>fa Ta.\n     Fun fa Ta \\<sqsubseteq> Fun f T \\<longrightarrow> length Ta = arity fa\n  ?t2 \\<in> set S \\<Longrightarrow>\n  \\<forall>t\\<in>trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2.\n     \\<forall>f T.\n        Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f\n  ?t2 \\<in> set S' \\<Longrightarrow>\n  \\<forall>t\\<in>trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2.\n     \\<forall>f T.\n        Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f\n  t \\<in> set T\n\ngoal (1 subgoal):\n 1. \\<forall>f T.\n       Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p t)\" when \"t \\<in> set (map Send T)\" for t"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p t)", "using that"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  t \\<in> set (map Send T)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p t)", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<forall>f T.\n     Fun f T \\<sqsubseteq> ?t2 \\<longrightarrow> length T = arity f\n  t \\<in> set (map Send T)\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>trms\\<^sub>s\\<^sub>t\\<^sub>p t.\n       \\<forall>f T.\n          Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set (map Send T) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "thus ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set (map Send T) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))", "using *"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set (map Send T) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n  ?t2 \\<in> set S \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n  ?t2 \\<in> set S' \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?t2)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))", "by force"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t (S @ map Send T @ S'))\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "case (Unify S f U \\<delta> T S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "have \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)", "using Unify.prems(1) Unify.hyps(2) wf_trm_subterm[of _ \"Fun f U\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m ?t; Fun f U \\<sqsubset> ?t\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)", "by (simp, force)"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence range_wf: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "using mgu_wf_trm[OF Unify.hyps(3)[symmetric]]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T);\n   wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f U)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> ?v)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "{"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "fix s"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "assume \"s \\<in> set (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (state)\nthis:\n  s \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"\\<exists>s' \\<in> set (S@S'). s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\""], ["proof (prove)\nusing this:\n  s \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<exists>s'\\<in>set (S @ S').\n       s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')", "using Unify.prems(1)"], ["proof (prove)\nusing this:\n  s \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<exists>s'\\<in>set (S @ S').\n       s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')", "by (auto simp add: subst_apply_strand_def)"], ["proof (state)\nthis:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "moreover"], ["proof (state)\nthis:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "{"], ["proof (state)\nthis:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "fix s'"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "assume s': \"s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\" \"s' \\<in> set (S@S')\""], ["proof (state)\nthis:\n  s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  s' \\<in> set (S @ S')\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "from s'(2)"], ["proof (chain)\npicking this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')", "have \"trms\\<^sub>s\\<^sub>t\\<^sub>p (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t (rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>", "proof (induction s')"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 2. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 3. \\<And>x1a x2a x3.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>\n 4. \\<And>x1a x2a.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>", "case (Inequality X F)"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t)\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 2. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 3. \\<And>x1a x2a x3.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>\n 4. \\<And>x1a x2a.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t)\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    rm_vars\n     (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n            \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n     \\<delta>", "by (induct F) (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 2. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 3. \\<And>x1a x2a x3.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>", "qed auto"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\""], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "using wf_trm_subst[OF wf_trms_subst_rm_vars'[OF range_wf]] \\<open>wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\\<close> s'(1)"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> rm_vars ?X1 \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>s = ?s'4 \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s'4);\n   ?s'4 \\<in> set (S @ S')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  \\<lbrakk>s = ?s'4 \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s'4);\n   ?s'4 \\<in> set (S @ S')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "have \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\""], ["proof (prove)\nusing this:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  \\<lbrakk>s = ?s'4 \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s'4);\n   ?s'4 \\<in> set (S @ S')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "}"], ["proof (state)\nthis:\n  ?s4 \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s4)\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "thus ?case"], ["proof (prove)\nusing this:\n  ?s4 \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s4)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (trms\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "case (Equality S \\<delta> t t' a S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Some \\<delta> = mgu t t'\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t'\""], ["proof (prove)\nusing this:\n  simple S\n  Some \\<delta> = mgu t t'\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t &&& wf\\<^sub>t\\<^sub>r\\<^sub>m t'", "by simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t'\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence range_wf: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "using mgu_wf_trm[OF Equality.hyps(2)[symmetric]]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t'\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m t'\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> ?v)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "{"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "assume \"s \\<in> set (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (state)\nthis:\n  s \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"\\<exists>s' \\<in> set (S@S'). s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\""], ["proof (prove)\nusing this:\n  s \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<exists>s'\\<in>set (S @ S').\n       s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')", "using Equality.prems(1)"], ["proof (prove)\nusing this:\n  s \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n\ngoal (1 subgoal):\n 1. \\<exists>s'\\<in>set (S @ S').\n       s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')", "by (auto simp add: subst_apply_strand_def)"], ["proof (state)\nthis:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "moreover"], ["proof (state)\nthis:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "{"], ["proof (state)\nthis:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "fix s'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "assume s': \"s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\" \"s' \\<in> set (S@S')\""], ["proof (state)\nthis:\n  s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  s' \\<in> set (S @ S')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "from s'(2)"], ["proof (chain)\npicking this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')", "have \"trms\\<^sub>s\\<^sub>t\\<^sub>p (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t (rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>", "proof (induction s')"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 2. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 3. \\<And>x1a x2a x3.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>\n 4. \\<And>x1a x2a.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>", "case (Inequality X F)"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t)\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 2. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 3. \\<And>x1a x2a x3.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>\n 4. \\<And>x1a x2a.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t)\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    rm_vars\n     (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n            \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n     \\<delta>", "by (induct F) (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 2. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n        \\<delta>\n 3. \\<And>x1a x2a x3.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n        (trms\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n         \\<delta>) =\n       trms\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       rm_vars\n        (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n        \\<delta>", "qed auto"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\""], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "using wf_trm_subst[OF wf_trms_subst_rm_vars'[OF range_wf]] \\<open>wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\\<close> s'(1)"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p s' \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s')) \\<delta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> rm_vars ?X1 \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>s = ?s'4 \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s'4);\n   ?s'4 \\<in> set (S @ S')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  \\<lbrakk>s = ?s'4 \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s'4);\n   ?s'4 \\<in> set (S @ S')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "have \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\""], ["proof (prove)\nusing this:\n  \\<exists>s'\\<in>set (S @ S').\n     s = s' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<and>\n     wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s')\n  \\<lbrakk>s = ?s'4 \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s'4);\n   ?s'4 \\<in> set (S @ S')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p s)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "}"], ["proof (state)\nthis:\n  ?s4 \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s4)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n         (trms\\<^sub>s\\<^sub>t\n           (S @\n            \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S'))\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                          (trms\\<^sub>s\\<^sub>t\n                            (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "thus ?case"], ["proof (prove)\nusing this:\n  ?s4 \\<in> set (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t\\<^sub>p ?s4)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (trms\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (trms\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?Sa4, ?\\<theta>''4) \\<leadsto> (?S'a4, ?\\<theta>'''4);\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t ?Sa4)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t ?S'a4)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "with assms"], ["proof (chain)\npicking this:\n  (S, \\<theta>) \\<leadsto>\\<^sup>* (S', \\<theta>')\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\n  \\<lbrakk>(?Sa4, ?\\<theta>''4) \\<leadsto> (?S'a4, ?\\<theta>'''4);\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t ?Sa4)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t ?S'a4)", "show ?thesis"], ["proof (prove)\nusing this:\n  (S, \\<theta>) \\<leadsto>\\<^sup>* (S', \\<theta>')\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S)\n  \\<lbrakk>(?Sa4, ?\\<theta>''4) \\<leadsto> (?S'a4, ?\\<theta>'''4);\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t ?Sa4)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (trms\\<^sub>s\\<^sub>t ?S'a4)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')", "by (induction rule: rtrancl_induct2) metis+"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (trms\\<^sub>s\\<^sub>t S')\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "subsection \\<open>Theorem: Soundness of the Lazy Intruder\\<close>"], ["", "context\nbegin"], ["", "private"], ["", "lemma LI_soundness_single:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\"\n  shows \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "using assms(2,1,3)"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2, \\<theta>\\<^sub>2)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "proof (induction rule: LI_rel.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n     map Send T @ S',\\<theta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "case (Compose S T f S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  length T = arity f\n  public f\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ map Send T @ S',\\<theta>\\<rangle>\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n     map Send T @ S',\\<theta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence *: \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; map Send T\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  simple S\n  length T = arity f\n  public f\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ map Send T @ S',\\<theta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; map Send T\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "unfolding constr_sem_c_def"], ["proof (prove)\nusing this:\n  simple S\n  length T = arity f\n  public f\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  \\<theta> supports \\<I> \\<and>\n  \\<lbrakk>{}; S @ map Send T @ S'\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; map Send T\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "by force+"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n     map Send T @ S',\\<theta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c Fun f T \\<cdot> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    Fun f T \\<cdot> \\<I>", "using *(2) Compose.hyps(2) ComposeC[OF _ Compose.hyps(3), of \"map (\\<lambda>x. x \\<cdot> \\<I>) T\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n  length T = arity f\n  \\<lbrakk>length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<I>) =\n           arity f;\n   \\<And>t.\n      t \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                   \\<I>) \\<Longrightarrow>\n      ?M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c\n                    Fun f (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<I>)\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    Fun f T \\<cdot> \\<I>", "unfolding subst_compose_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n  length T = arity f\n  \\<lbrakk>length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<I>) =\n           arity f;\n   \\<And>t.\n      t \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                   \\<I>) \\<Longrightarrow>\n      ?M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c\n                    Fun f (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<I>)\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    Fun f T \\<cdot> \\<I>", "by force"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n\ngoal (3 subgoals):\n 1. \\<And>S T f S' \\<theta>.\n       \\<lbrakk>simple S; length T = arity f; public f;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n     map Send T @ S',\\<theta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 3. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "thus \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@Send (Fun f T)#S',\\<theta>\\<rangle>\""], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\\<theta>\\<rangle>", "using *(1,3) \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@map Send T@S',\\<theta>\\<rangle>\\<close>"], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ map Send T @ S',\\<theta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\\<theta>\\<rangle>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     send\\<langle>Fun f\n             T\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S',\\<theta>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "case (Unify S f U \\<delta> T S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  Some \\<delta> = mgu (Fun f T) (Fun f U)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>,\\<theta> \\<circ>\\<^sub>s\n        \\<delta>\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"(\\<theta> \\<circ>\\<^sub>s \\<delta>) supports \\<I>\" \"\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> &&&\n    \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "using Unify.prems(2)"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>,\\<theta> \\<circ>\\<^sub>s\n        \\<delta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> &&&\n    \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "unfolding constr_sem_c_def"], ["proof (prove)\nusing this:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> \\<and>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> &&&\n    \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "by metis+"], ["proof (state)\nthis:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>", "obtain \\<sigma> where \\<sigma>: \"\\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\""], ["proof (prove)\nusing this:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<sigma>.\n        \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> =\n        \\<I> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding subst_compose_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<theta> x \\<cdot> \\<delta>) supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<sigma>.\n        (\\<lambda>x. \\<theta> x \\<cdot> \\<delta> \\<cdot> \\<sigma>) =\n        \\<I> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \\<theta>fun_id: \"Fun f U \\<cdot> \\<theta> = Fun f U\" \"Fun f T \\<cdot> \\<theta> = Fun f T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f U \\<cdot> \\<theta> = Fun f U &&&\n    Fun f T \\<cdot> \\<theta> = Fun f T", "using Unify.prems(1) trm_subst_ident[of \"Fun f U\" \\<theta>]\n          fv_subset_if_in_strand_ik[of \"Fun f U\" S] Unify.hyps(2)\n          fv_snd_rcv_strand_subset(2)[of S]\n          strand_vars_split(1)[of S \"Send (Fun f T)#S'\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  fv (Fun f U) \\<inter> subst_domain \\<theta> = {} \\<Longrightarrow>\n  Fun f U \\<cdot> \\<theta> = Fun f U\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  fv (Fun f U) \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  vars\\<^sub>s\\<^sub>t S \\<union>\n  vars\\<^sub>s\\<^sub>t (send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. Fun f U \\<cdot> \\<theta> = Fun f U &&&\n    Fun f T \\<cdot> \\<theta> = Fun f T", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv (Fun f U) \\<inter> subst_domain \\<theta> = {} \\<Longrightarrow>\n  Fun f U \\<cdot> \\<theta> = Fun f U\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  fv (Fun f U) \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  vars\\<^sub>s\\<^sub>t S \\<union>\n  vars\\<^sub>s\\<^sub>t (send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. Fun f U \\<cdot> \\<theta> = Fun f U &&&\n    Fun f T \\<cdot> \\<theta> = Fun f T", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f T \\<cdot> \\<theta> = Fun f T", "using Unify.prems(1) trm_subst_ident[of \"Fun f T\" \\<theta>]"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  fv (Fun f T) \\<inter> subst_domain \\<theta> = {} \\<Longrightarrow>\n  Fun f T \\<cdot> \\<theta> = Fun f T\n\ngoal (1 subgoal):\n 1. Fun f T \\<cdot> \\<theta> = Fun f T", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv (Fun f T) \\<inter> subst_domain \\<theta> = {} \\<Longrightarrow>\n  Fun f T \\<cdot> \\<theta> = Fun f T\n\ngoal (1 subgoal):\n 1. Fun f T \\<cdot> \\<theta> = Fun f T", "by fastforce"], ["proof (state)\nthis:\n  Fun f U \\<cdot> \\<theta> = Fun f U\n  Fun f T \\<cdot> \\<theta> = Fun f T\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence \\<theta>\\<delta>_disj:\n      \"subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\"\n      \"subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\"\n      \"subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}\""], ["proof (prove)\nusing this:\n  Fun f U \\<cdot> \\<theta> = Fun f U\n  Fun f T \\<cdot> \\<theta> = Fun f T\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "using trm_subst_disj mgu_vars_bounded[OF Unify.hyps(3)[symmetric]]"], ["proof (prove)\nusing this:\n  Fun f U \\<cdot> \\<theta> = Fun f U\n  Fun f T \\<cdot> \\<theta> = Fun f T\n  ?t \\<cdot> ?\\<theta> = ?t \\<Longrightarrow>\n  fv ?t \\<inter> subst_domain ?\\<theta> = {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f U)\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "apply (blast,blast)"], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "using Unify.prems(1)"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  (subst_domain \\<theta> \\<inter> range_vars \\<theta> = {} \\<and>\n   finite (subst_domain \\<theta>)) \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence \\<theta>\\<delta>_support: \"\\<theta> supports \\<I>\" \"\\<delta> supports \\<I>\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}\n\ngoal (1 subgoal):\n 1. \\<theta> supports \\<I> &&& \\<delta> supports \\<I>", "by (simp_all add: subst_support_comp_split[OF \\<open>(\\<theta> \\<circ>\\<^sub>s \\<delta>) supports \\<I>\\<close>])"], ["proof (state)\nthis:\n  \\<theta> supports \\<I>\n  \\<delta> supports \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"fv (Fun f T) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\" \"fv (Fun f U) \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Fun f T)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    fv (Fun f U)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using Unify.hyps(2)"], ["proof (prove)\nusing this:\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv (Fun f T)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    fv (Fun f U)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by force+"], ["proof (state)\nthis:\n  fv (Fun f T)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv (Fun f U)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence \\<delta>_vars_bound: \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Send (Fun f T)#S')\""], ["proof (prove)\nusing this:\n  fv (Fun f T)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv (Fun f U)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "using mgu_vars_bounded[OF Unify.hyps(3)[symmetric]]"], ["proof (prove)\nusing this:\n  fv (Fun f T)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv (Fun f U)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f U)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; [Send (Fun f T)]\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "from Unify.hyps(2)"], ["proof (chain)\npicking this:\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S", "have \"Fun f U \\<cdot> \\<I> \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\nusing this:\n  Fun f U \\<in> ik\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. Fun f U \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>", "by blast"], ["proof (state)\nthis:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "hence \"Fun f U \\<cdot> \\<I> \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\nusing this:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. Fun f U \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>", "by blast"], ["proof (state)\nthis:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "moreover"], ["proof (state)\nthis:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"Unifier \\<delta> (Fun f T) (Fun f U)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Unifier \\<delta> (Fun f T) (Fun f U)", "by (fact MGU_is_Unifier[OF mgu_gives_MGU[OF Unify.hyps(3)[symmetric]]])"], ["proof (state)\nthis:\n  Unifier \\<delta> (Fun f T) (Fun f U)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "ultimately"], ["proof (chain)\npicking this:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  Unifier \\<delta> (Fun f T) (Fun f U)", "have \"Fun f T \\<cdot> \\<I> \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\nusing this:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  Unifier \\<delta> (Fun f T) (Fun f U)\n\ngoal (1 subgoal):\n 1. Fun f T \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>", "using \\<sigma>"], ["proof (prove)\nusing this:\n  Fun f U \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  Unifier \\<delta> (Fun f T) (Fun f U)\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n\ngoal (1 subgoal):\n 1. Fun f T \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>", "by (metis \\<theta>fun_id subst_subst_compose)"], ["proof (state)\nthis:\n  Fun f T \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "thus ?thesis"], ["proof (prove)\nusing this:\n  Fun f T \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [send\\<langle>Fun f\n                                  T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [send\\<langle>Fun f\n                                T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [send\\<langle>Fun f\n                                T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"(S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\" \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "have \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S') = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}", "using Unify.prems(1)"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}", "by (auto simp add: wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "hence \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using \\<theta>\\<delta>_disj(2) strand_subst_vars_union_bound[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t (S @ S') \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "thus \"(S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\" \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S'\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "using strand_subst_comp \\<open>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S') = {}\\<close>"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  range_vars ?\\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t ?S =\n  {} \\<Longrightarrow>\n  ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta> \\<circ>\\<^sub>s ?\\<theta> =\n  (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>) \\<cdot>\\<^sub>s\\<^sub>t ?\\<theta>\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (1 subgoal):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "by (blast,blast)"], ["proof (state)\nthis:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "moreover"], ["proof (state)\nthis:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"subst_idem \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_idem \\<delta>", "by (fact mgu_gives_subst_idem[OF Unify.hyps(3)[symmetric]])"], ["proof (state)\nthis:\n  subst_idem \\<delta>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "moreover"], ["proof (state)\nthis:\n  subst_idem \\<delta>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "have\n        \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@S') = {}\"\n        \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\"\n        \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@S') = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {} &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {}", "using wf_constr_bvars_disj[OF Unify.prems(1)]\n            wf_constr_bvars_disj'[OF Unify.prems(1) \\<delta>_vars_bound]"], ["proof (prove)\nusing this:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @\n    send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n    S' \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {} &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {}", "by auto"], ["proof (state)\nthis:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "ultimately"], ["proof (chain)\npicking this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  subst_idem \\<delta>\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}", "have \"\\<lbrakk>{}; S@S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  subst_idem \\<delta>\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>", "using \\<open>\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\\<close> \\<sigma>\n            strand_sem_subst(1)[of \\<theta> \"S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\" \"{}\" \"\\<delta> \\<circ>\\<^sub>s \\<sigma>\"]\n            strand_sem_subst(2)[of \\<theta> \"S@S'\" \"{}\" \"\\<delta> \\<circ>\\<^sub>s \\<sigma>\"] \n            strand_sem_subst_subst_idem[of \\<delta> \"S@S'\" \"{}\" \\<sigma>]"], ["proof (prove)\nusing this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  subst_idem \\<delta>\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<theta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; (S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                                 \\<theta>\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<theta> \\<circ>\\<^sub>s\n                      (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\n  \\<lbrakk>(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>);\n   subst_idem \\<delta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>", "unfolding constr_sem_c_def"], ["proof (prove)\nusing this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  subst_idem \\<delta>\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<theta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; (S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                                 \\<theta>\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<theta> \\<circ>\\<^sub>s\n                      (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\n  \\<lbrakk>(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>);\n   subst_idem \\<delta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>", "by (metis subst_compose_assoc)"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "thus \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>S f T' \\<delta> T S' \\<theta>.\n       \\<lbrakk>simple S; Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n        Some \\<delta> = mgu (Fun f T) (Fun f T');\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>\n 2. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "show \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@Send (Fun f T)#S',\\<theta>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\\<theta>\\<rangle>", "using \\<theta>\\<delta>_support(1) \\<open>\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; [Send (Fun f T)]\\<rbrakk>\\<^sub>c \\<I>\\<close> \\<open>\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<close> \\<open>\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<theta> supports \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [send\\<langle>Fun f\n                                T\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\\<theta>\\<rangle>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     send\\<langle>Fun f\n             T\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S',\\<theta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "case (Equality S \\<delta> t t' a S' \\<theta>)"], ["proof (state)\nthis:\n  simple S\n  Some \\<delta> = mgu t t'\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>,\\<theta> \\<circ>\\<^sub>s\n        \\<delta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"(\\<theta> \\<circ>\\<^sub>s \\<delta>) supports \\<I>\" \"\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> &&&\n    \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "using Equality.prems(2)"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>,\\<theta> \\<circ>\\<^sub>s\n        \\<delta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> &&&\n    \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "unfolding constr_sem_c_def"], ["proof (prove)\nusing this:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> \\<and>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I> &&&\n    \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "by metis+"], ["proof (state)\nthis:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>", "obtain \\<sigma> where \\<sigma>: \"\\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\""], ["proof (prove)\nusing this:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<sigma>.\n        \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> =\n        \\<I> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding subst_compose_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<theta> x \\<cdot> \\<delta>) supports \\<I>\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<sigma>.\n        (\\<lambda>x. \\<theta> x \\<cdot> \\<delta> \\<cdot> \\<sigma>) =\n        \\<I> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"fv t \\<subseteq> vars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\" \"fv t' \\<subseteq> vars\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                  S') &&&\n    fv t'\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv t\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "moreover"], ["proof (state)\nthis:\n  fv t\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@Equality a t t'#S') = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "using Equality.prems(1)"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    vars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    {}", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  fv t\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}", "have \\<theta>fun_id: \"t \\<cdot> \\<theta> = t\" \"t' \\<cdot> \\<theta> = t'\""], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<theta> = t &&& t' \\<cdot> \\<theta> = t'", "using trm_subst_ident[of t \\<theta>] trm_subst_ident[of t' \\<theta>]"], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  fv t \\<inter> subst_domain \\<theta> = {} \\<Longrightarrow>\n  t \\<cdot> \\<theta> = t\n  fv t' \\<inter> subst_domain \\<theta> = {} \\<Longrightarrow>\n  t' \\<cdot> \\<theta> = t'\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<theta> = t &&& t' \\<cdot> \\<theta> = t'", "by auto"], ["proof (state)\nthis:\n  t \\<cdot> \\<theta> = t\n  t' \\<cdot> \\<theta> = t'\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence \\<theta>\\<delta>_disj:\n      \"subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\"\n      \"subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\"\n      \"subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}\""], ["proof (prove)\nusing this:\n  t \\<cdot> \\<theta> = t\n  t' \\<cdot> \\<theta> = t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "using trm_subst_disj mgu_vars_bounded[OF Equality.hyps(2)[symmetric]]"], ["proof (prove)\nusing this:\n  t \\<cdot> \\<theta> = t\n  t' \\<cdot> \\<theta> = t'\n  ?t \\<cdot> ?\\<theta> = ?t \\<Longrightarrow>\n  fv ?t \\<inter> subst_domain ?\\<theta> = {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<delta> = {} &&&\n    subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "apply (blast,blast)"], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "using Equality.prems(1)"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  (subst_domain \\<theta> \\<inter> range_vars \\<theta> = {} \\<and>\n   finite (subst_domain \\<theta>)) \\<and>\n  wf\\<^sub>s\\<^sub>t {}\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<and>\n  subst_domain \\<theta> \\<inter>\n  vars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  range_vars \\<theta> \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence \\<theta>\\<delta>_support: \"\\<theta> supports \\<I>\" \"\\<delta> supports \\<I>\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> subst_domain \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<theta> = {}\n\ngoal (1 subgoal):\n 1. \\<theta> supports \\<I> &&& \\<delta> supports \\<I>", "by (simp_all add: subst_support_comp_split[OF \\<open>(\\<theta> \\<circ>\\<^sub>s \\<delta>) supports \\<I>\\<close>])"], ["proof (state)\nthis:\n  \\<theta> supports \\<I>\n  \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\" \"fv t' \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                  S') &&&\n    fv t'\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv t\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "hence \\<delta>_vars_bound: \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S')\""], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using mgu_vars_bounded[OF Equality.hyps(2)[symmetric]]"], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t'\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\n               (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; [Equality a t t']\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"t \\<cdot> \\<delta> = t' \\<cdot> \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Unifier \\<delta> t t'", "using MGU_is_Unifier[OF mgu_gives_MGU[OF Equality.hyps(2)[symmetric]]]"], ["proof (prove)\nusing this:\n  Unifier \\<delta> t t'\n\ngoal (1 subgoal):\n 1. Unifier \\<delta> t t'", "by metis"], ["proof (state)\nthis:\n  Unifier \\<delta> t t'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "hence \"t \\<cdot> (\\<theta> \\<circ>\\<^sub>s \\<delta>) = t' \\<cdot> (\\<theta> \\<circ>\\<^sub>s \\<delta>)\""], ["proof (prove)\nusing this:\n  Unifier \\<delta> t t'\n\ngoal (1 subgoal):\n 1. Unifier (\\<theta> \\<circ>\\<^sub>s \\<delta>) t t'", "by (metis \\<theta>fun_id subst_subst_compose)"], ["proof (state)\nthis:\n  Unifier (\\<theta> \\<circ>\\<^sub>s \\<delta>) t t'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "hence \"t \\<cdot> \\<I> = t' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  Unifier (\\<theta> \\<circ>\\<^sub>s \\<delta>) t t'\n\ngoal (1 subgoal):\n 1. Unifier \\<I> t t'", "by (metis \\<sigma> subst_subst_compose)"], ["proof (state)\nthis:\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "thus ?thesis"], ["proof (prove)\nusing this:\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "have \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"(S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\" \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "have \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S') = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}", "using Equality.prems(1)"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<theta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}", "by (fastforce simp add: wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def simp del: subst_range.simps)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "hence \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (S@S') = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (S @ S') = {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "hence \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using \\<theta>\\<delta>_disj(2) subst_sends_strand_fv_to_img[of \"S@S'\" \\<delta>]"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (S @ S') = {}\n  subst_domain \\<theta> \\<inter> range_vars \\<delta> = {}\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (S @ S') \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter>\n    fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "thus \"(S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\" \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S@S'\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "using strand_subst_comp \\<open>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S@S') = {}\\<close>"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  fv\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  range_vars ?\\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t ?S =\n  {} \\<Longrightarrow>\n  ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta> \\<circ>\\<^sub>s ?\\<theta> =\n  (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>) \\<cdot>\\<^sub>s\\<^sub>t ?\\<theta>\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (S @ S') = {}\n\ngoal (1 subgoal):\n 1. (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> =\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'", "by (blast,blast)"], ["proof (state)\nthis:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "moreover"], ["proof (state)\nthis:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "have\n        \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@S') = {}\"\n        \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\"\n        \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S@S') = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {} &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {}", "using wf_constr_bvars_disj[OF Equality.prems(1)]\n            wf_constr_bvars_disj'[OF Equality.prems(1) \\<delta>_vars_bound]"], ["proof (prove)\nusing this:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (S @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n    S' \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {} &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S @ S') =\n    {}", "by auto"], ["proof (state)\nthis:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "ultimately"], ["proof (chain)\npicking this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}", "have \"\\<lbrakk>{}; S@S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>", "using \\<open>\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\\<close> \\<sigma>\n            strand_sem_subst(1)[of \\<theta> \"S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\" \"{}\" \"\\<delta> \\<circ>\\<^sub>s \\<sigma>\"]\n            strand_sem_subst(2)[of \\<theta> \"S@S'\" \"{}\" \"\\<delta> \\<circ>\\<^sub>s \\<sigma>\"] \n            strand_sem_subst_subst_idem[of \\<delta> \"S@S'\" \"{}\" \\<sigma>]\n            mgu_gives_subst_idem[OF Equality.hyps(2)[symmetric]]"], ["proof (prove)\nusing this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<theta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; (S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                                 \\<theta>\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<theta> \\<circ>\\<^sub>s\n                      (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\n  \\<lbrakk>(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>);\n   subst_idem \\<delta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n  subst_idem \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>", "unfolding constr_sem_c_def"], ["proof (prove)\nusing this:\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> =\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n  S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S @ S'\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S @ S') =\n  {}\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  \\<theta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<sigma> = \\<I>\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<theta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; (S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                                 \\<theta>\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n  \\<lbrakk>(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<theta> \\<circ>\\<^sub>s\n                      (\\<delta> \\<circ>\\<^sub>s \\<sigma>))\n  \\<lbrakk>(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t (S @ S') =\n           {};\n   \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n    (\\<delta> \\<circ>\\<^sub>s \\<sigma>);\n   subst_idem \\<delta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c\n                     (\\<delta> \\<circ>\\<^sub>s \\<sigma>)\n  subst_idem \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>", "by (metis subst_compose_assoc)"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n 2. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "thus \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @ S'\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<delta> t t' uu_ S' \\<theta>.\n       \\<lbrakk>simple S; Some \\<delta> = mgu t t';\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n         (S @ \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n         \\<theta>;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @ S' \\<cdot>\\<^sub>s\\<^sub>t\n     \\<delta>,\\<theta> \\<circ>\\<^sub>s \\<delta>\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                      \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S',\\<theta>\\<rangle>", "show \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@Equality a t t'#S',\\<theta>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\\<theta>\\<rangle>", "using \\<theta>\\<delta>_support(1) \\<open>\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; [Equality a t t']\\<rbrakk>\\<^sub>c \\<I>\\<close> \\<open>\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<close> \\<open>\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<theta> supports \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\\<theta>\\<rangle>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S',\\<theta>\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem LI_soundness:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2)\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>\"\n  shows \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "using assms(2,1,3)"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>2, \\<theta>\\<^sub>2)\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "proof (induction S\\<^sub>2 \\<theta>\\<^sub>2 rule: rtrancl_induct2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n              \\<theta>\\<^sub>1;\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n 2. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n                  S\\<^sub>1 \\<theta>\\<^sub>1;\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>a,b\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n         \\<theta>\\<^sub>1;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>aa,ba\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "case (step S\\<^sub>i \\<theta>\\<^sub>i S\\<^sub>j \\<theta>\\<^sub>j)"], ["proof (state)\nthis:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n            \\<theta>\\<^sub>1;\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>i,\\<theta>\\<^sub>i\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>j,\\<theta>\\<^sub>j\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n              \\<theta>\\<^sub>1;\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n 2. \\<And>a b aa ba.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (a, b);\n        (a, b) \\<leadsto> (aa, ba);\n        \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n                  S\\<^sub>1 \\<theta>\\<^sub>1;\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>a,b\\<rangle>\\<rbrakk>\n        \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>;\n        wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n         \\<theta>\\<^sub>1;\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>aa,ba\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "thus ?case"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n            \\<theta>\\<^sub>1;\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>i,\\<theta>\\<^sub>i\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>j,\\<theta>\\<^sub>j\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "using LI_preserves_wellformedness[OF \\<open>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>i, \\<theta>\\<^sub>i)\\<close> \\<open>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\\<close>]\n          LI_soundness_single[OF _ \\<open>(S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\\<close> \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>j, \\<theta>\\<^sub>j\\<rangle>\\<close>]\n          step.IH[OF \\<open>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\\<close>]"], ["proof (prove)\nusing this:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n  (S\\<^sub>i, \\<theta>\\<^sub>i)\n  (S\\<^sub>i, \\<theta>\\<^sub>i) \\<leadsto> (S\\<^sub>j, \\<theta>\\<^sub>j)\n  \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n            \\<theta>\\<^sub>1;\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>i,\\<theta>\\<^sub>i\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>j,\\<theta>\\<^sub>j\\<rangle>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>i\n   \\<theta>\\<^sub>i \\<Longrightarrow>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>i,\\<theta>\\<^sub>i\\<rangle>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>i,\\<theta>\\<^sub>i\\<rangle> \\<Longrightarrow>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "by metis"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n              \\<theta>\\<^sub>1;\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\\<rbrakk>\n    \\<Longrightarrow> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "qed metis"], ["", "end"], ["", "subsection \\<open>Theorem: Completeness of the Lazy Intruder\\<close>"], ["", "context\nbegin"], ["", "private"], ["", "lemma LI_completeness_single:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\" \"\\<not>simple S\\<^sub>1\"\n  shows \"\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. (S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto> (S\\<^sub>2,\\<theta>\\<^sub>2) \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "using not_simple_elim[OF \\<open>\\<not>simple S\\<^sub>1\\<close>]"], ["proof (prove)\nusing this:\n  (\\<exists>A B f T.\n      S\\<^sub>1 =\n      A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n      simple A) \\<or>\n  (\\<exists>A B a t t'.\n      S\\<^sub>1 =\n      A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n      simple A) \\<or>\n  (\\<exists>A B X F.\n      S\\<^sub>1 =\n      A @\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n      B \\<and>\n      (\\<nexists>\\<I>. ineq_model \\<I> X F))\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "{ \\<comment> \\<open>In this case \\<open>S\\<^sub>1\\<close> isn't simple because it contains an equality constraint,\n        so we can simply proceed with the reduction by computing the MGU for the equation\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "assume \"\\<exists>S' S'' a t t'. S\\<^sub>1 = S'@Equality a t t'#S'' \\<and> simple S'\""], ["proof (state)\nthis:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S'\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S'", "obtain S a t t' S' where S\\<^sub>1: \"S\\<^sub>1 = S@Equality a t t'#S'\" \"simple S\""], ["proof (prove)\nusing this:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S'\n\ngoal (1 subgoal):\n 1. (\\<And>S a t t' S'.\n        \\<lbrakk>S\\<^sub>1 =\n                 S @\n                 \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S';\n         simple S\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence *: \"wf\\<^sub>s\\<^sub>t {} S\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S, \\<theta>\\<^sub>1\\<rangle>\" \"\\<theta>\\<^sub>1 supports \\<I>\" \"t \\<cdot> \\<I> = t' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. (wf\\<^sub>s\\<^sub>t {} S &&&\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>) &&&\n    \\<theta>\\<^sub>1 supports \\<I> &&& Unifier \\<I> t t'", "using \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close> \\<open>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\\<close> wf_eq_fv[of \"{}\" S t t' S']\n            fv_snd_rcv_strand_subset(5)[of S]"], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  wf\\<^sub>s\\<^sub>t {}\n   (S @\n    \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n    S') \\<Longrightarrow>\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> {}\n  wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. (wf\\<^sub>s\\<^sub>t {} S &&&\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>) &&&\n    \\<theta>\\<^sub>1 supports \\<I> &&& Unifier \\<I> t t'", "by (auto simp add: constr_sem_c_def wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>\n  \\<theta>\\<^sub>1 supports \\<I>\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "from *"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>\n  \\<theta>\\<^sub>1 supports \\<I>\n  Unifier \\<I> t t'", "have \"Unifier \\<I> t t'\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>\n  \\<theta>\\<^sub>1 supports \\<I>\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. Unifier \\<I> t t'", "by simp"], ["proof (state)\nthis:\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "then"], ["proof (chain)\npicking this:\n  Unifier \\<I> t t'", "obtain \\<delta> where \\<delta>:\n        \"Some \\<delta> = mgu t t'\" \"subst_idem \\<delta>\" \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv t \\<union> fv t'\""], ["proof (prove)\nusing this:\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>.\n        \\<lbrakk>Some \\<delta> = mgu t t'; subst_idem \\<delta>;\n         subst_domain \\<delta> \\<union> range_vars \\<delta>\n         \\<subseteq> fv t \\<union> fv t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mgu_always_unifies mgu_gives_subst_idem mgu_vars_bounded"], ["proof (prove)\nusing this:\n  Unifier \\<I> t t'\n  Unifier ?\\<theta> ?M ?N \\<Longrightarrow>\n  \\<exists>\\<delta>. mgu ?M ?N = Some \\<delta>\n  mgu ?s ?t = Some ?\\<theta> \\<Longrightarrow> subst_idem ?\\<theta>\n  mgu ?M ?N = Some ?\\<sigma> \\<Longrightarrow>\n  subst_domain ?\\<sigma> \\<union> range_vars ?\\<sigma>\n  \\<subseteq> fv ?M \\<union> fv ?N\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>.\n        \\<lbrakk>Some \\<delta> = mgu t t'; subst_idem \\<delta>;\n         subst_domain \\<delta> \\<union> range_vars \\<delta>\n         \\<subseteq> fv t \\<union> fv t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis+"], ["proof (state)\nthis:\n  Some \\<delta> = mgu t t'\n  subst_idem \\<delta>\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>", "using mgu_gives_MGU[OF \\<delta>(1)[symmetric]]"], ["proof (prove)\nusing this:\n  MGU \\<delta> t t'\n\ngoal (1 subgoal):\n 1. \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>", "by (metis \\<open>Unifier \\<I> t t'\\<close>)"], ["proof (state)\nthis:\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<delta> supports \\<I>\""], ["proof (prove)\nusing this:\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n\ngoal (1 subgoal):\n 1. \\<delta> supports \\<I>", "using subst_support_if_mgt_subst_idem[OF _ \\<delta>(2)]"], ["proof (prove)\nusing this:\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n  \\<delta> \\<preceq>\\<^sub>\\<circ> ?\\<delta> \\<Longrightarrow>\n  \\<delta> supports ?\\<delta>\n\ngoal (1 subgoal):\n 1. \\<delta> supports \\<I>", "by metis"], ["proof (state)\nthis:\n  \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"(\\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>) supports \\<I>\""], ["proof (prove)\nusing this:\n  \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>", "using subst_support_comp \\<open>\\<theta>\\<^sub>1 supports \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<delta> supports \\<I>\n  \\<lbrakk>?\\<theta> supports ?\\<I>; ?\\<delta> supports ?\\<I>\\<rbrakk>\n  \\<Longrightarrow> ?\\<theta> \\<circ>\\<^sub>s ?\\<delta> supports ?\\<I>\n  \\<theta>\\<^sub>1 supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>", "by metis"], ["proof (state)\nthis:\n  \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "using \\<delta>(3) S\\<^sub>1(1)"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv t \\<union> fv t'\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "hence \"\\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "using \\<open>subst_idem \\<delta>\\<close> \\<open>\\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\\<close> \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close> strand_sem_subst\n              wf_constr_bvars_disj'(1)[OF assms(1)]"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n  subst_idem \\<delta>\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>c\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>c\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>d\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>d\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<Longrightarrow>\n  (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "unfolding subst_idem_def constr_sem_c_def"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n  \\<delta> \\<circ>\\<^sub>s \\<delta> = \\<delta>\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n  \\<theta>\\<^sub>1 supports \\<I> \\<and>\n  \\<lbrakk>{}; S\\<^sub>1\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>c\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>c\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>d\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>d\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<Longrightarrow>\n  (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "by (metis (no_types) subst_compose_assoc)"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "thus \"\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "using S\\<^sub>1(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<I>\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "by force"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"(S@Equality a t t'#S', \\<theta>\\<^sub>1) \\<leadsto> (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)", "using LI_rel.Equality[OF \\<open>simple S\\<close> \\<delta>(1)] S\\<^sub>1"], ["proof (prove)\nusing this:\n  (S @ \\<langle>?uu: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # ?S',\n   ?\\<theta>) \\<leadsto>\n  (S @ ?S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   ?\\<theta> \\<circ>\\<^sub>s \\<delta>)\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)", "by metis"], ["proof (state)\nthis:\n  (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)", "have ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "using S\\<^sub>1(1) \\<open>(\\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>) supports \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\n  S\\<^sub>1 = S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'\n  \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "}"], ["proof (state)\nthis:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "{\n    \\<comment> \\<open>In this case \\<open>S\\<^sub>1\\<close> isn't simple because it contains a deduction constraint for a composed\n        term, so we must look at how this composed term is derived under the interpretation \\<open>\\<I>\\<close>\\<close>"], ["proof (state)\nthis:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "assume \"\\<exists>S' S'' f T. S\\<^sub>1 = S'@Send (Fun f T)#S'' \\<and> simple S'\""], ["proof (state)\nthis:\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S'\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "with assms"], ["proof (chain)\npicking this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  \\<not> simple S\\<^sub>1\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S'", "obtain S f T S' where S\\<^sub>1: \"S\\<^sub>1 = S@Send (Fun f T)#S'\" \"simple S\""], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  \\<not> simple S\\<^sub>1\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S'\n\ngoal (1 subgoal):\n 1. (\\<And>S f T S'.\n        \\<lbrakk>S\\<^sub>1 =\n                 S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S';\n         simple S\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"wf\\<^sub>s\\<^sub>t {} S\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S, \\<theta>\\<^sub>1\\<rangle>\" \"\\<theta>\\<^sub>1 supports \\<I>\""], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} S &&&\n    \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle> &&&\n    \\<theta>\\<^sub>1 supports \\<I>", "using \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close> \\<open>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\\<close>"], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} S &&&\n    \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle> &&&\n    \\<theta>\\<^sub>1 supports \\<I>", "by (auto simp add: constr_sem_c_def wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def)\n  \n    \\<comment> \\<open>Lemma for a common subcase\\<close>"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>\n  \\<theta>\\<^sub>1 supports \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have fun_sat: \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@(map Send T)@S', \\<theta>\\<^sub>1\\<rangle>\" when T: \"\\<And>t. t \\<in> set T \\<Longrightarrow> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "have \"\\<And>t. t \\<in> set T \\<Longrightarrow> \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; [Send t]\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<I>; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n        \\<I>", "using T"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<I>; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n        \\<I>", "by simp"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [send\\<langle>?t2\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "hence \"\\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; map Send T\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [send\\<langle>?t2\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; map Send T\\<rbrakk>\\<^sub>c\n     \\<I>", "using \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close> strand_sem_Send_map"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; [send\\<langle>?t2\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  (\\<And>t.\n      t \\<in> set ?T \\<Longrightarrow>\n      \\<lbrakk>?M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n       ?\\<I>) \\<Longrightarrow>\n  \\<lbrakk>?M; map Send ?T\\<rbrakk>\\<^sub>c ?\\<I>\n  (\\<And>t.\n      t \\<in> set ?T \\<Longrightarrow>\n      \\<lbrakk>?M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n       ?\\<I>) \\<Longrightarrow>\n  \\<lbrakk>?M; map Send ?T\\<rbrakk>\\<^sub>d ?\\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; map Send T\\<rbrakk>\\<^sub>c\n     \\<I>", "by metis"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "have \"\\<lbrakk>ik\\<^sub>s\\<^sub>t (S@(map Send T)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; S'\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t\n              (S @ map Send T) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "using \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close> S\\<^sub>1"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. \\<lbrakk>ik\\<^sub>s\\<^sub>t\n              (S @ map Send T) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>; S'\\<rbrakk>\\<^sub>c\n     \\<I>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t\n            (S @ map Send T) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t\n            (S @ map Send T) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t\n            (S @ map Send T) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "using \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S, \\<theta>\\<^sub>1\\<rangle>\\<close> \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; map Send T\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>ik\\<^sub>s\\<^sub>t\n            (S @ map Send T) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>; S'\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<^sub>1\\<rangle>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "by (force simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<And>t.\n      t \\<in> set T \\<Longrightarrow>\n      ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I> \\<turnstile>\\<^sub>c\n      t \\<cdot> \\<I>) \\<Longrightarrow>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "from S\\<^sub>1 \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close>"], ["proof (chain)\npicking this:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>", "have \"ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c Fun f T \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    Fun f T \\<cdot> \\<I>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence ?thesis"], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "proof cases\n      \\<comment> \\<open>Case 1: \\<open>\\<I>(f(T))\\<close> has been derived using the \\<open>AxiomC\\<close> rule.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. Fun f T \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n          \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "case AxiomC"], ["proof (state)\nthis:\n  Fun f T \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (2 subgoals):\n 1. Fun f T \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n          \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence ex_t: \"\\<exists>t. t \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = t \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  Fun f T \\<cdot> \\<I>\n  \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>t. t \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Unifier \\<I> (Fun f T) t", "by auto"], ["proof (state)\nthis:\n  \\<exists>t. t \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Unifier \\<I> (Fun f T) t\n\ngoal (2 subgoals):\n 1. Fun f T \\<cdot> \\<I>\n    \\<in> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n          \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "proof (cases \"\\<forall>T'. Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow> Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\")\n        \\<comment> \\<open>Case 1.1: \\<open>f(T)\\<close> is equal to a variable in the intruder knowledge under \\<open>\\<I>\\<close>.\n            Hence there must exists a deduction constraint in the simple prefix of the constraint\n            in which this variable occurs/\"is sent\" for the first time. Since this variable itself\n            cannot have been derived from the \\<open>AxiomC\\<close> rule (because it must be equal under the\n            interpretation to \\<open>f(T)\\<close>, which is by assumption not in the intruder knowledge under\n            \\<open>\\<I>\\<close>) it must be the case that we can derive it using the \\<open>ComposeC\\<close> rule. Hence we can\n            apply the \\<open>Compose\\<close> rule of the lazy intruder to \\<open>f(T)\\<close>.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "case True"], ["proof (state)\nthis:\n  \\<forall>T'.\n     Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n     Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<exists>v. Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>v.\n       Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>v.\n       Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v", "obtain t where \"t \\<in> ik\\<^sub>s\\<^sub>t S\" \"Fun f T \\<cdot> \\<I> = t \\<cdot> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>t \\<in> ik\\<^sub>s\\<^sub>t S;\n         Unifier \\<I> (Fun f T) t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ex_t"], ["proof (prove)\nusing this:\n  \\<exists>t. t \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Unifier \\<I> (Fun f T) t\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>t \\<in> ik\\<^sub>s\\<^sub>t S;\n         Unifier \\<I> (Fun f T) t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) t\n\ngoal (1 subgoal):\n 1. \\<exists>v.\n       Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) t\n\ngoal (1 subgoal):\n 1. \\<exists>v.\n       Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v", "using \\<open>\\<forall>T'. Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow> Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\\<close>"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) t\n  \\<forall>T'.\n     Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n     Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>v.\n       Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v", "by (cases t) auto"], ["proof (state)\nthis:\n  \\<exists>v.\n     Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>v.\n     Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. Fun f T \\<cdot> \\<I> = \\<I> v\""], ["proof (prove)\nusing this:\n  \\<exists>v.\n     Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       Fun f T \\<cdot> \\<I> = \\<I> v", "using vars_subset_if_in_strand_ik2[of _ S]"], ["proof (prove)\nusing this:\n  \\<exists>v.\n     Var v \\<in> ik\\<^sub>s\\<^sub>t S \\<and> Fun f T \\<cdot> \\<I> = \\<I> v\n  ?t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  fv ?t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       Fun f T \\<cdot> \\<I> = \\<I> v", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     Fun f T \\<cdot> \\<I> = \\<I> v", "obtain v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\n          where S: \"S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send (Var v)#S\\<^sub>s\\<^sub>u\\<^sub>f\" \"Fun f T \\<cdot> \\<I> = \\<I> v\"\n                   \"\\<not>(\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e. Fun f T \\<cdot> \\<I> = \\<I> w)\""], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e v S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>S =\n                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                 send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<^sub>s\\<^sub>u\\<^sub>f;\n         Fun f T \\<cdot> \\<I> = \\<I> v;\n         \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e.\n                    Fun f T \\<cdot> \\<I> = \\<I> w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>wf\\<^sub>s\\<^sub>t {} S\\<close> wf_simple_strand_first_Send_var_split[OF _ \\<open>simple S\\<close>, of \"Fun f T\" \\<I>]"], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     Fun f T \\<cdot> \\<I> = \\<I> v\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n   \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n      Fun f T \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n  \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                       S\\<^sub>s\\<^sub>u\\<^sub>f.\n                       S =\n                       S\\<^sub>p\\<^sub>r\\<^sub>e @\n                       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                       Fun f T \\<cdot> \\<I> = \\<I> v \\<and>\n                       \\<not> (\\<exists>w\n  \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n                                  Fun f T \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e v S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>S =\n                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                 send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<^sub>s\\<^sub>u\\<^sub>f;\n         Fun f T \\<cdot> \\<I> = \\<I> v;\n         \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e.\n                    Fun f T \\<cdot> \\<I> = \\<I> w)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S =\n  S\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t # S\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<cdot> \\<I> = \\<I> v\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<cdot> \\<I> = \\<I> w)\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<forall>w. Var w \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow> \\<I> v \\<noteq> Var w \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  S =\n  S\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t # S\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<cdot> \\<I> = \\<I> v\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<forall>w.\n       Var w\n       \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n       \\<I> v \\<noteq> Var w \\<cdot> \\<I>", "by auto"], ["proof (state)\nthis:\n  \\<forall>w.\n     Var w\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Var w \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<forall>w.\n     Var w\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Var w \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<forall>T'. Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow> Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>T'.\n       Fun f T'\n       \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>", "using \\<open>\\<forall>T'. Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow> Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\\<close> S(1)"], ["proof (prove)\nusing this:\n  \\<forall>T'.\n     Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n     Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\n  S =\n  S\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t # S\\<^sub>s\\<^sub>u\\<^sub>f\n\ngoal (1 subgoal):\n 1. \\<forall>T'.\n       Fun f T'\n       \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>", "by (meson contra_subsetD ik_append_subset(1))"], ["proof (state)\nthis:\n  \\<forall>T'.\n     Fun f T'\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<forall>g T'. Fun g T' \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow> \\<I> v \\<noteq> Fun g T' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  \\<forall>T'.\n     Fun f T'\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<forall>g T'.\n       Fun g T'\n       \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n       \\<I> v \\<noteq> Fun g T' \\<cdot> \\<I>", "using S(2)"], ["proof (prove)\nusing this:\n  \\<forall>T'.\n     Fun f T'\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>\n  Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. \\<forall>g T'.\n       Fun g T'\n       \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n       \\<I> v \\<noteq> Fun g T' \\<cdot> \\<I>", "by simp"], ["proof (state)\nthis:\n  \\<forall>g T'.\n     Fun g T'\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Fun g T' \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>w.\n     Var w\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Var w \\<cdot> \\<I>\n  \\<forall>g T'.\n     Fun g T'\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Fun g T' \\<cdot> \\<I>", "have \"\\<forall>t \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e. \\<I> v \\<noteq> t \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  \\<forall>w.\n     Var w\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Var w \\<cdot> \\<I>\n  \\<forall>g T'.\n     Fun g T'\n     \\<in> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<longrightarrow>\n     \\<I> v \\<noteq> Fun g T' \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n       \\<I> v \\<noteq> t \\<cdot> \\<I>", "by (metis term.exhaust)"], ["proof (state)\nthis:\n  \\<forall>t\\<in>ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n     \\<I> v \\<noteq> t \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<I> v \\<notin> (ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n     \\<I> v \\<noteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> v\n    \\<notin> ik\\<^sub>s\\<^sub>t\n              S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<I>", "by auto"], ["proof (state)\nthis:\n  \\<I> v\n  \\<notin> ik\\<^sub>s\\<^sub>t\n            S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c \\<I> v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t\n     S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    \\<I> v", "using S\\<^sub>1(1) S(1) \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close>"], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  S =\n  S\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t # S\\<^sub>s\\<^sub>u\\<^sub>f\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t\n     S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    \\<I> v", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  \\<I> v\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c Fun f T \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  \\<I> v\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t\n     S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    Fun f T \\<cdot> \\<I>", "using \\<open>Fun f T \\<cdot> \\<I> = \\<I> v\\<close>"], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  \\<I> v\n  Fun f T \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t\n     S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    Fun f T \\<cdot> \\<I>", "by metis"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"length T = arity f\" \"public f\" \"\\<And>t. t \\<in> set T \\<Longrightarrow> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. length T = arity f &&&\n    public f &&&\n    (\\<And>t.\n        t \\<in> set T \\<Longrightarrow>\n        ik\\<^sub>s\\<^sub>t\n         S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<I> \\<turnstile>\\<^sub>c\n        t \\<cdot> \\<I>)", "using \\<open>Fun f T \\<cdot> \\<I> = \\<I> v\\<close> \\<open>\\<I> v \\<notin> ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\\<close>\n                intruder_synth.simps[of \"ik\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\" \"\\<I> v\"]"], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  Fun f T \\<cdot> \\<I>\n  Fun f T \\<cdot> \\<I> = \\<I> v\n  \\<I> v\n  \\<notin> ik\\<^sub>s\\<^sub>t\n            S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I>\n  (ik\\<^sub>s\\<^sub>t\n    S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n   \\<I> \\<turnstile>\\<^sub>c\n   \\<I> v) =\n  ((\\<exists>t M.\n       ik\\<^sub>s\\<^sub>t\n        S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       \\<I> =\n       M \\<and>\n       \\<I> v = t \\<and> t \\<in> M) \\<or>\n   (\\<exists>T f M.\n       ik\\<^sub>s\\<^sub>t\n        S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       \\<I> =\n       M \\<and>\n       \\<I> v = Fun f T \\<and>\n       length T = arity f \\<and>\n       public f \\<and>\n       (\\<forall>x.\n           x \\<in> set T \\<longrightarrow> M \\<turnstile>\\<^sub>c x)))\n\ngoal (1 subgoal):\n 1. length T = arity f &&&\n    public f &&&\n    (\\<And>t.\n        t \\<in> set T \\<Longrightarrow>\n        ik\\<^sub>s\\<^sub>t\n         S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<I> \\<turnstile>\\<^sub>c\n        t \\<cdot> \\<I>)", "by auto"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence *: \"\\<And>t. t \\<in> set T \\<Longrightarrow> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       \\<I> \\<turnstile>\\<^sub>c\n       t \\<cdot> \\<I>", "using S(1)"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<I>\n  S =\n  S\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t # S\\<^sub>s\\<^sub>u\\<^sub>f\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       \\<I> \\<turnstile>\\<^sub>c\n       t \\<cdot> \\<I>", "by (auto intro: ideduct_synth_mono)"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@(map Send T)@S', \\<theta>\\<^sub>1\\<rangle>\""], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "by (metis fun_sat)"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"(S@Send (Fun f T)#S', \\<theta>\\<^sub>1) \\<leadsto> (S@map Send T@S', \\<theta>\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ map Send T @ S', \\<theta>\\<^sub>1)", "by (metis LI_rel.Compose[OF \\<open>simple S\\<close> \\<open>length T = arity f\\<close> \\<open>public f\\<close>])"], ["proof (state)\nthis:\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)\n\ngoal (2 subgoals):\n 1. \\<forall>T'.\n       Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n       Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I> \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "using S\\<^sub>1"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by auto"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "next\n        \\<comment> \\<open>Case 1.2: \\<open>\\<I>(f(T))\\<close> can be derived from an interpreted composed term in the intruder\n            knowledge. Use the \\<open>Unify\\<close> rule on this composed term to further reduce the constraint.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<forall>T'.\n             Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n             Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>T'.\n             Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n             Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>)", "obtain T' where t: \"Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\" \"Fun f T \\<cdot> \\<I> = Fun f T' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>T'.\n             Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n             Fun f T \\<cdot> \\<I> \\<noteq> Fun f T' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. (\\<And>T'.\n        \\<lbrakk>Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S;\n         Unifier \\<I> (Fun f T) (Fun f T')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) (Fun f T')\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\""], ["proof (prove)\nusing this:\n  Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) (Fun f T')\n\ngoal (1 subgoal):\n 1. fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "using S\\<^sub>1(1) fv_subset_if_in_strand_ik'[OF t(1)]\n                fv_snd_rcv_strand_subset(2)[of S]"], ["proof (prove)\nusing this:\n  Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) (Fun f T')\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "from t"], ["proof (chain)\npicking this:\n  Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) (Fun f T')", "have \"Unifier \\<I> (Fun f T) (Fun f T')\""], ["proof (prove)\nusing this:\n  Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<I> (Fun f T) (Fun f T')\n\ngoal (1 subgoal):\n 1. Unifier \\<I> (Fun f T) (Fun f T')", "by simp"], ["proof (state)\nthis:\n  Unifier \\<I> (Fun f T) (Fun f T')\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "then"], ["proof (chain)\npicking this:\n  Unifier \\<I> (Fun f T) (Fun f T')", "obtain \\<delta> where \\<delta>:\n            \"Some \\<delta> = mgu (Fun f T) (Fun f T')\" \"subst_idem \\<delta>\"\n            \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv (Fun f T) \\<union> fv (Fun f T')\""], ["proof (prove)\nusing this:\n  Unifier \\<I> (Fun f T) (Fun f T')\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>.\n        \\<lbrakk>Some \\<delta> = mgu (Fun f T) (Fun f T');\n         subst_idem \\<delta>;\n         subst_domain \\<delta> \\<union> range_vars \\<delta>\n         \\<subseteq> fv (Fun f T) \\<union> fv (Fun f T')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using mgu_always_unifies mgu_gives_subst_idem mgu_vars_bounded"], ["proof (prove)\nusing this:\n  Unifier \\<I> (Fun f T) (Fun f T')\n  Unifier ?\\<theta> ?M ?N \\<Longrightarrow>\n  \\<exists>\\<delta>. mgu ?M ?N = Some \\<delta>\n  mgu ?s ?t = Some ?\\<theta> \\<Longrightarrow> subst_idem ?\\<theta>\n  mgu ?M ?N = Some ?\\<sigma> \\<Longrightarrow>\n  subst_domain ?\\<sigma> \\<union> range_vars ?\\<sigma>\n  \\<subseteq> fv ?M \\<union> fv ?N\n\ngoal (1 subgoal):\n 1. (\\<And>\\<delta>.\n        \\<lbrakk>Some \\<delta> = mgu (Fun f T) (Fun f T');\n         subst_idem \\<delta>;\n         subst_domain \\<delta> \\<union> range_vars \\<delta>\n         \\<subseteq> fv (Fun f T) \\<union> fv (Fun f T')\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis+"], ["proof (state)\nthis:\n  Some \\<delta> = mgu (Fun f T) (Fun f T')\n  subst_idem \\<delta>\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f T')\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>", "using mgu_gives_MGU[OF \\<delta>(1)[symmetric]]"], ["proof (prove)\nusing this:\n  MGU \\<delta> (Fun f T) (Fun f T')\n\ngoal (1 subgoal):\n 1. \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>", "by (metis \\<open>Unifier \\<I> (Fun f T) (Fun f T')\\<close>)"], ["proof (state)\nthis:\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<delta> supports \\<I>\""], ["proof (prove)\nusing this:\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n\ngoal (1 subgoal):\n 1. \\<delta> supports \\<I>", "using subst_support_if_mgt_subst_idem[OF _ \\<delta>(2)]"], ["proof (prove)\nusing this:\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n  \\<delta> \\<preceq>\\<^sub>\\<circ> ?\\<delta> \\<Longrightarrow>\n  \\<delta> supports ?\\<delta>\n\ngoal (1 subgoal):\n 1. \\<delta> supports \\<I>", "by metis"], ["proof (state)\nthis:\n  \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"(\\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>) supports \\<I>\""], ["proof (prove)\nusing this:\n  \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>", "using subst_support_comp \\<open>\\<theta>\\<^sub>1 supports \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<delta> supports \\<I>\n  \\<lbrakk>?\\<theta> supports ?\\<I>; ?\\<delta> supports ?\\<I>\\<rbrakk>\n  \\<Longrightarrow> ?\\<theta> \\<circ>\\<^sub>s ?\\<delta> supports ?\\<I>\n  \\<theta>\\<^sub>1 supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>", "by metis"], ["proof (state)\nthis:\n  \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "have \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "using \\<delta>(3) S\\<^sub>1(1) \\<open>fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\\<close>"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f T')\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union> range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n  \\<subseteq> fv (Fun f T) \\<union> fv (Fun f T')\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  fv (Fun f T') \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1", "by (fastforce simp del: subst_range.simps)"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "hence \"\\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "using \\<open>subst_idem \\<delta>\\<close> \\<open>\\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\\<close> \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close> strand_sem_subst\n                  wf_constr_bvars_disj'(1)[OF assms(1)]"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n  subst_idem \\<delta>\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>c\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>c\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>d\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>d\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<Longrightarrow>\n  (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "unfolding subst_idem_def constr_sem_c_def"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1\n  \\<delta> \\<circ>\\<^sub>s \\<delta> = \\<delta>\n  \\<delta> \\<preceq>\\<^sub>\\<circ> \\<I>\n  \\<theta>\\<^sub>1 supports \\<I> \\<and>\n  \\<lbrakk>{}; S\\<^sub>1\\<rbrakk>\\<^sub>c \\<I>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>c\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>c\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n    (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t\n                                 ?\\<delta>\\<rbrakk>\\<^sub>d\n                     ?\\<theta>\n  \\<lbrakk>(subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n           bvars\\<^sub>s\\<^sub>t ?S =\n           {};\n   \\<lbrakk>?M; ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>\\<rbrakk>\\<^sub>d\n    ?\\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d\n                     (?\\<delta> \\<circ>\\<^sub>s ?\\<theta>)\n  subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\\<^sub>1 \\<Longrightarrow>\n  (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S\\<^sub>1 =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "by (metis (no_types) subst_compose_assoc)"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "thus \"\\<lbrakk>{}; S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "using S\\<^sub>1(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S\\<^sub>1 \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<I>\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<I>", "by force"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"(S@Send (Fun f T)#S', \\<theta>\\<^sub>1) \\<leadsto> (S@S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>, \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)", "using LI_rel.Unify[OF \\<open>simple S\\<close> t(1) \\<delta>(1)] S\\<^sub>1"], ["proof (prove)\nusing this:\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # ?S',\n   ?\\<theta>) \\<leadsto>\n  (S @ ?S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   ?\\<theta> \\<circ>\\<^sub>s \\<delta>)\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n\ngoal (1 subgoal):\n 1. (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n     \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n     \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)", "by metis"], ["proof (state)\nthis:\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>T'.\n               Fun f T' \\<in> ik\\<^sub>s\\<^sub>t S \\<longrightarrow>\n               Fun f T \\<cdot> \\<I> \\<noteq>\n               Fun f T' \\<cdot> \\<I>) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "using S\\<^sub>1(1) \\<open>(\\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>) supports \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<I>\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S',\n   \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>,\n   \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta>)\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  \\<theta>\\<^sub>1 \\<circ>\\<^sub>s \\<delta> supports \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "next\n      \\<comment> \\<open>Case 2: \\<open>\\<I>(f(T))\\<close> has been derived using the \\<open>ComposeC\\<close> rule.\n          Simply use the \\<open>Compose\\<close> rule of the lazy intruder to proceed with the reduction.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "case (ComposeC T' g)"], ["proof (state)\nthis:\n  Fun f T \\<cdot> \\<I> = Fun g T'\n  length T' = arity g\n  public g\n  ?t2 \\<in> set T' \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2\n\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"f = g\" \"length T = arity f\" \"public f\"\n        and \"\\<And>x. x \\<in> set T \\<Longrightarrow> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c x \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  Fun f T \\<cdot> \\<I> = Fun g T'\n  length T' = arity g\n  public g\n  ?t2 \\<in> set T' \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t2\n\ngoal (1 subgoal):\n 1. (f = g &&& length T = arity f &&& public f) &&&\n    (\\<And>x.\n        x \\<in> set T \\<Longrightarrow>\n        ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<I> \\<turnstile>\\<^sub>c\n        x \\<cdot> \\<I>)", "by auto"], ["proof (state)\nthis:\n  f = g\n  length T = arity f\n  public f\n  ?x2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?x2 \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S@(map Send T)@S', \\<theta>\\<^sub>1\\<rangle>\""], ["proof (prove)\nusing this:\n  f = g\n  length T = arity f\n  public f\n  ?x2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?x2 \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "using fun_sat"], ["proof (prove)\nusing this:\n  f = g\n  length T = arity f\n  public f\n  ?x2 \\<in> set T \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?x2 \\<cdot> \\<I>\n  (\\<And>t.\n      t \\<in> set T \\<Longrightarrow>\n      ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I> \\<turnstile>\\<^sub>c\n      t \\<cdot> \\<I>) \\<Longrightarrow>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n map Send T @ S',\\<theta>\\<^sub>1\\<rangle>", "by metis"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto> (S@(map Send T)@S', \\<theta>\\<^sub>1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ map Send T @ S', \\<theta>\\<^sub>1)", "using S\\<^sub>1 LI_rel.Compose[OF \\<open>simple S\\<close> \\<open>length T = arity f\\<close> \\<open>public f\\<close>]"], ["proof (prove)\nusing this:\n  S\\<^sub>1 = S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  (S @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # ?S',\n   ?\\<theta>) \\<leadsto>\n  (S @ map Send T @ ?S', ?\\<theta>)\n\ngoal (1 subgoal):\n 1. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n    (S @ map Send T @ S', \\<theta>\\<^sub>1)", "by metis"], ["proof (state)\nthis:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<And>Ta fa.\n       \\<lbrakk>Fun f T \\<cdot> \\<I> = Fun fa Ta; length Ta = arity fa;\n        public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                            (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n                            (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S @\n                                     map Send T @\n                                     S',\\<theta>\\<^sub>1\\<rangle>\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n  (S @ map Send T @ S', \\<theta>\\<^sub>1)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by metis"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "}"], ["proof (state)\nthis:\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "moreover"], ["proof (state)\nthis:\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<And>A B X F. S\\<^sub>1 = A@Inequality X F#B \\<Longrightarrow> ineq_model \\<I> X F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>A B X F.\n       S\\<^sub>1 =\n       A @\n       \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n       B \\<Longrightarrow>\n       ineq_model \\<I> X F", "using assms(2)"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>A B X F.\n       S\\<^sub>1 =\n       A @\n       \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n       B \\<Longrightarrow>\n       ineq_model \\<I> X F", "by (auto simp add: constr_sem_c_def)"], ["proof (state)\nthis:\n  S\\<^sub>1 =\n  ?A2 @\n  \\<forall>?X2\\<langle>\\<or>\\<noteq>: ?F2\\<rangle>\\<^sub>s\\<^sub>t #\n  ?B2 \\<Longrightarrow>\n  ineq_model \\<I> ?X2 ?F2\n\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S\\<^sub>1 =\n        A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S\\<^sub>1 =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S\\<^sub>1 =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F)) \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  S\\<^sub>1 =\n  ?A2 @\n  \\<forall>?X2\\<langle>\\<or>\\<noteq>: ?F2\\<rangle>\\<^sub>s\\<^sub>t #\n  ?B2 \\<Longrightarrow>\n  ineq_model \\<I> ?X2 ?F2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  S\\<^sub>1 =\n  ?A2 @\n  \\<forall>?X2\\<langle>\\<or>\\<noteq>: ?F2\\<rangle>\\<^sub>s\\<^sub>t #\n  ?B2 \\<Longrightarrow>\n  ineq_model \\<I> ?X2 ?F2\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "using not_simple_elim[OF \\<open>\\<not>simple S\\<^sub>1\\<close>]"], ["proof (prove)\nusing this:\n  \\<exists>S' S'' a t t'.\n     S\\<^sub>1 =\n     S' @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  \\<exists>S' S'' f T.\n     S\\<^sub>1 =\n     S' @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<and>\n     simple S' \\<Longrightarrow>\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  S\\<^sub>1 =\n  ?A2 @\n  \\<forall>?X2\\<langle>\\<or>\\<noteq>: ?F2\\<rangle>\\<^sub>s\\<^sub>t #\n  ?B2 \\<Longrightarrow>\n  ineq_model \\<I> ?X2 ?F2\n  (\\<exists>A B f T.\n      S\\<^sub>1 =\n      A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n      simple A) \\<or>\n  (\\<exists>A B a t t'.\n      S\\<^sub>1 =\n      A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n      simple A) \\<or>\n  (\\<exists>A B X F.\n      S\\<^sub>1 =\n      A @\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n      B \\<and>\n      (\\<nexists>\\<I>. ineq_model \\<I> X F))\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by metis"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem LI_completeness:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\" \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\"\n  shows \"\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. (S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2) \\<and> simple S\\<^sub>2 \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "proof (cases \"simple S\\<^sub>1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "case False"], ["proof (state)\nthis:\n  \\<not> simple S\\<^sub>1\n\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "let ?Stuck = \"\\<lambda>S\\<^sub>2 \\<theta>\\<^sub>2. \\<not>(\\<exists>S\\<^sub>3 \\<theta>\\<^sub>3. (S\\<^sub>2,\\<theta>\\<^sub>2) \\<leadsto> (S\\<^sub>3,\\<theta>\\<^sub>3) \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3, \\<theta>\\<^sub>3\\<rangle>))\""], ["proof (state)\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "let ?Sats = \"{((S,\\<theta>),(S',\\<theta>')). (S,\\<theta>) \\<leadsto> (S',\\<theta>') \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S, \\<theta>\\<rangle>) \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S', \\<theta>'\\<rangle>)}\""], ["proof (state)\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have simple_if_stuck:\n      \"\\<And>S\\<^sub>2 \\<theta>\\<^sub>2. \\<lbrakk>(S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S\\<^sub>2,\\<theta>\\<^sub>2); \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>; ?Stuck S\\<^sub>2 \\<theta>\\<^sub>2\\<rbrakk> \\<Longrightarrow> simple S\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>S\\<^sub>2 \\<theta>\\<^sub>2.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n                (S\\<^sub>2, \\<theta>\\<^sub>2);\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>;\n        \\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> simple S\\<^sub>2", "using LI_completeness_single\n          LI_preserves_wellformedness\n          \\<open>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\\<close>\n          trancl_into_rtrancl"], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r ?S\\<^sub>1\n            ?\\<theta>\\<^sub>1;\n   ?\\<I> \\<Turnstile>\\<^sub>c \\<langle>?S\\<^sub>1,?\\<theta>\\<^sub>1\\<rangle>;\n   \\<not> simple ?S\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n                       (?S\\<^sub>1, ?\\<theta>\\<^sub>1) \\<leadsto>\n                       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n                       ?\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  \\<lbrakk>(?S\\<^sub>1, ?\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n           (?S\\<^sub>2, ?\\<theta>\\<^sub>2);\n   wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r ?S\\<^sub>1\n    ?\\<theta>\\<^sub>1\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r\n                     ?S\\<^sub>2 ?\\<theta>\\<^sub>2\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1\n   \\<theta>\\<^sub>1\n  (?a, ?b) \\<in> ?r\\<^sup>+ \\<Longrightarrow> (?a, ?b) \\<in> ?r\\<^sup>*\n\ngoal (1 subgoal):\n 1. \\<And>S\\<^sub>2 \\<theta>\\<^sub>2.\n       \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n                (S\\<^sub>2, \\<theta>\\<^sub>2);\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>;\n        \\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>\\<rbrakk>\n       \\<Longrightarrow> simple S\\<^sub>2", "by metis"], ["proof (state)\nthis:\n  \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n           (?S\\<^sub>22, ?\\<theta>\\<^sub>22);\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S\\<^sub>22,?\\<theta>\\<^sub>22\\<rangle>;\n   \\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n      (?S\\<^sub>22, ?\\<theta>\\<^sub>22) \\<leadsto>\n      (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n      \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> simple ?S\\<^sub>22\n\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have base: \"\\<exists>b. ((S\\<^sub>1,\\<theta>\\<^sub>1),b) \\<in> ?Sats\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "using LI_completeness_single[OF assms False] assms(2)"], ["proof (prove)\nusing this:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "by auto"], ["proof (state)\nthis:\n  \\<exists>b.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have *: \"\\<And>S \\<theta> S' \\<theta>'. ((S,\\<theta>),(S',\\<theta>')) \\<in> ?Sats\\<^sup>+ \\<Longrightarrow> (S,\\<theta>) \\<leadsto>\\<^sup>+ (S',\\<theta>') \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S', \\<theta>'\\<rangle>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>S \\<theta> S' \\<theta>'.\n       ((S, \\<theta>), S', \\<theta>')\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       (S, \\<theta>) \\<leadsto>\\<^sup>+ (S', \\<theta>') \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<theta> S' \\<theta>'.\n       ((S, \\<theta>), S', \\<theta>')\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       (S, \\<theta>) \\<leadsto>\\<^sup>+ (S', \\<theta>') \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "fix S \\<theta> S' \\<theta>'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<theta> S' \\<theta>'.\n       ((S, \\<theta>), S', \\<theta>')\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       (S, \\<theta>) \\<leadsto>\\<^sup>+ (S', \\<theta>') \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "assume \"((S,\\<theta>),(S',\\<theta>')) \\<in> ?Sats\\<^sup>+\""], ["proof (state)\nthis:\n  ((S, \\<theta>), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta> S' \\<theta>'.\n       ((S, \\<theta>), S', \\<theta>')\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       (S, \\<theta>) \\<leadsto>\\<^sup>+ (S', \\<theta>') \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "thus \"(S,\\<theta>) \\<leadsto>\\<^sup>+ (S',\\<theta>') \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S', \\<theta>'\\<rangle>)\""], ["proof (prove)\nusing this:\n  ((S, \\<theta>), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. (S, \\<theta>) \\<leadsto>\\<^sup>+ (S', \\<theta>') \\<and>\n    \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "by (induct rule: trancl_induct2) auto"], ["proof (state)\nthis:\n  (S, \\<theta>) \\<leadsto>\\<^sup>+ (S', \\<theta>') \\<and>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((?S2, ?\\<theta>2), ?S'2, ?\\<theta>'2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  (?S2, ?\\<theta>2) \\<leadsto>\\<^sup>+ (?S'2, ?\\<theta>'2) \\<and>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S'2,?\\<theta>'2\\<rangle>\n\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "have \"\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. ((S\\<^sub>1,\\<theta>\\<^sub>1),(S\\<^sub>2,\\<theta>\\<^sub>2)) \\<in> ?Sats\\<^sup>+ \\<and> ?Stuck S\\<^sub>2 \\<theta>\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "assume \"\\<not>(\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. ((S\\<^sub>1,\\<theta>\\<^sub>1),(S\\<^sub>2,\\<theta>\\<^sub>2)) \\<in> ?Sats\\<^sup>+ \\<and> ?Stuck S\\<^sub>2 \\<theta>\\<^sub>2)\""], ["proof (state)\nthis:\n  \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n     (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n         (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n         (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "hence sat_not_stuck: \"\\<And>S\\<^sub>2 \\<theta>\\<^sub>2. ((S\\<^sub>1,\\<theta>\\<^sub>1),(S\\<^sub>2,\\<theta>\\<^sub>2)) \\<in> ?Sats\\<^sup>+ \\<Longrightarrow> \\<not>?Stuck S\\<^sub>2 \\<theta>\\<^sub>2\""], ["proof (prove)\nusing this:\n  \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n     (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n         (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n         (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<And>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<not> (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n                  (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n                  (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n                  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)", "by blast"], ["proof (state)\nthis:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), ?S\\<^sub>22, ?\\<theta>\\<^sub>22)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  \\<not> (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n             (?S\\<^sub>22, ?\\<theta>\\<^sub>22) \\<leadsto>\n             (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n             \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "have \"\\<forall>S \\<theta>. ((S\\<^sub>1,\\<theta>\\<^sub>1),(S,\\<theta>)) \\<in> ?Sats\\<^sup>+ \\<longrightarrow> (\\<exists>b. ((S,\\<theta>),b) \\<in> ?Sats)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<longrightarrow>\n       (\\<exists>b.\n           ((S, \\<theta>), b)\n           \\<in> {((S, \\<theta>), S', \\<theta>').\n                  (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>})", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "fix S \\<theta>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "assume a: \"((S\\<^sub>1,\\<theta>\\<^sub>1),(S,\\<theta>)) \\<in> ?Sats\\<^sup>+\""], ["proof (state)\nthis:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "have \"\\<And>b. ((S\\<^sub>1,\\<theta>\\<^sub>1),b) \\<in> ?Sats\\<^sup>+ \\<Longrightarrow> \\<exists>c. b \\<leadsto> c \\<and> ((S\\<^sub>1,\\<theta>\\<^sub>1),c) \\<in> ?Sats\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>c.\n          b \\<leadsto> c \\<and>\n          ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>c.\n          b \\<leadsto> c \\<and>\n          ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>c.\n          b \\<leadsto> c \\<and>\n          ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "assume in_sat: \"((S\\<^sub>1,\\<theta>\\<^sub>1),b) \\<in> ?Sats\\<^sup>+\""], ["proof (state)\nthis:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>c.\n          b \\<leadsto> c \\<and>\n          ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "hence \"\\<exists>c. (b,c) \\<in> ?Sats\""], ["proof (prove)\nusing this:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<exists>c.\n       (b, c)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "using * sat_not_stuck"], ["proof (prove)\nusing this:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n  ((?S2, ?\\<theta>2), ?S'2, ?\\<theta>'2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  (?S2, ?\\<theta>2) \\<leadsto>\\<^sup>+ (?S'2, ?\\<theta>'2) \\<and>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S'2,?\\<theta>'2\\<rangle>\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), ?S\\<^sub>22, ?\\<theta>\\<^sub>22)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  \\<not> (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n             (?S\\<^sub>22, ?\\<theta>\\<^sub>22) \\<leadsto>\n             (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n             \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<exists>c.\n       (b, c)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "by (cases b) blast"], ["proof (state)\nthis:\n  \\<exists>c.\n     (b, c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>c.\n          b \\<leadsto> c \\<and>\n          ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "thus \"\\<exists>c. b \\<leadsto> c \\<and> ((S\\<^sub>1,\\<theta>\\<^sub>1),c) \\<in> ?Sats\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<exists>c.\n     (b, c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<exists>c.\n       b \\<leadsto> c \\<and>\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "using trancl_into_trancl[OF in_sat]"], ["proof (prove)\nusing this:\n  \\<exists>c.\n     (b, c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  (b, ?c)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>} \\<Longrightarrow>\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), ?c)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<exists>c.\n       b \\<leadsto> c \\<and>\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "by blast"], ["proof (state)\nthis:\n  \\<exists>c.\n     b \\<leadsto> c \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), ?b2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  \\<exists>c.\n     ?b2 \\<leadsto> c \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "hence \"\\<exists>S' \\<theta>'. (S,\\<theta>) \\<leadsto> (S',\\<theta>') \\<and> ((S\\<^sub>1,\\<theta>\\<^sub>1),(S',\\<theta>')) \\<in> ?Sats\\<^sup>+\""], ["proof (prove)\nusing this:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), ?b2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  \\<exists>c.\n     ?b2 \\<leadsto> c \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<exists>S' \\<theta>'.\n       (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "using a"], ["proof (prove)\nusing this:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), ?b2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  \\<exists>c.\n     ?b2 \\<leadsto> c \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), c)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<exists>S' \\<theta>'.\n       (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  \\<exists>S' \\<theta>'.\n     (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "then"], ["proof (chain)\npicking this:\n  \\<exists>S' \\<theta>'.\n     (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+", "obtain S' \\<theta>' where S'\\<theta>': \"(S,\\<theta>) \\<leadsto> (S',\\<theta>')\" \"((S\\<^sub>1,\\<theta>\\<^sub>1),(S',\\<theta>')) \\<in> ?Sats\\<^sup>+\""], ["proof (prove)\nusing this:\n  \\<exists>S' \\<theta>'.\n     (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. (\\<And>S' \\<theta>'.\n        \\<lbrakk>(S, \\<theta>) \\<leadsto> (S', \\<theta>');\n         ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n         \\<in> {((S, \\<theta>), S', \\<theta>').\n                (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (S, \\<theta>) \\<leadsto> (S', \\<theta>')\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "hence \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S', \\<theta>'\\<rangle>\""], ["proof (prove)\nusing this:\n  (S, \\<theta>) \\<leadsto> (S', \\<theta>')\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "using *"], ["proof (prove)\nusing this:\n  (S, \\<theta>) \\<leadsto> (S', \\<theta>')\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n  ((?S2, ?\\<theta>2), ?S'2, ?\\<theta>'2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  (?S2, ?\\<theta>2) \\<leadsto>\\<^sup>+ (?S'2, ?\\<theta>'2) \\<and>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S'2,?\\<theta>'2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "moreover"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "have \"(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S,\\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S, \\<theta>)", "using a trancl_mono"], ["proof (prove)\nusing this:\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n  \\<lbrakk>?p \\<in> ?r\\<^sup>+; ?r \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> ?p \\<in> ?s\\<^sup>+\n\ngoal (1 subgoal):\n 1. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S, \\<theta>)", "by blast"], ["proof (state)\nthis:\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S, \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "ultimately"], ["proof (chain)\npicking this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S, \\<theta>)", "have \"((S,\\<theta>),(S',\\<theta>')) \\<in> ?Sats\""], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S, \\<theta>)\n\ngoal (1 subgoal):\n 1. ((S, \\<theta>), S', \\<theta>')\n    \\<in> {((S, \\<theta>), S', \\<theta>').\n           (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "using S'\\<theta>'(1) * a"], ["proof (prove)\nusing this:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>\n  (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S, \\<theta>)\n  (S, \\<theta>) \\<leadsto> (S', \\<theta>')\n  ((?S2, ?\\<theta>2), ?S'2, ?\\<theta>'2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  (?S2, ?\\<theta>2) \\<leadsto>\\<^sup>+ (?S'2, ?\\<theta>'2) \\<and>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S'2,?\\<theta>'2\\<rangle>\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. ((S, \\<theta>), S', \\<theta>')\n    \\<in> {((S, \\<theta>), S', \\<theta>').\n           (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "by blast"], ["proof (state)\nthis:\n  ((S, \\<theta>), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<And>S \\<theta>.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n       \\<exists>b.\n          ((S, \\<theta>), b)\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "thus \"\\<exists>b. ((S,\\<theta>),b) \\<in> ?Sats\""], ["proof (prove)\nusing this:\n  ((S, \\<theta>), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       ((S, \\<theta>), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "using S'\\<theta>'(2)"], ["proof (prove)\nusing this:\n  ((S, \\<theta>), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  ((S\\<^sub>1, \\<theta>\\<^sub>1), S', \\<theta>')\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<exists>b.\n       ((S, \\<theta>), b)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "by blast"], ["proof (state)\nthis:\n  \\<exists>b.\n     ((S, \\<theta>), b)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>S \\<theta>.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<longrightarrow>\n     (\\<exists>b.\n         ((S, \\<theta>), b)\n         \\<in> {((S, \\<theta>), S', \\<theta>').\n                (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>})\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "hence \"\\<exists>f. \\<forall>i::nat. (f i, f (Suc i)) \\<in> ?Sats\""], ["proof (prove)\nusing this:\n  \\<forall>S \\<theta>.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<longrightarrow>\n     (\\<exists>b.\n         ((S, \\<theta>), b)\n         \\<in> {((S, \\<theta>), S', \\<theta>').\n                (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>})\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       \\<forall>i.\n          (f i, f (Suc i))\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "using infinite_chain_intro'[OF base]"], ["proof (prove)\nusing this:\n  \\<forall>S \\<theta>.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S, \\<theta>)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<longrightarrow>\n     (\\<exists>b.\n         ((S, \\<theta>), b)\n         \\<in> {((S, \\<theta>), S', \\<theta>').\n                (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>})\n  \\<forall>b.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), b)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<longrightarrow>\n     (\\<exists>c.\n         (b, c)\n         \\<in> {((S, \\<theta>), S', \\<theta>').\n                (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}) \\<Longrightarrow>\n  \\<exists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       \\<forall>i.\n          (f i, f (Suc i))\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "by blast"], ["proof (state)\nthis:\n  \\<exists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "moreover"], ["proof (state)\nthis:\n  \\<exists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "have \"?Sats \\<subseteq> LI_rel\\<^sup>+\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {((S, \\<theta>), S', \\<theta>').\n     (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n    \\<subseteq> LI_rel\\<^sup>+", "by auto"], ["proof (state)\nthis:\n  {((S, \\<theta>), S', \\<theta>').\n   (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  \\<subseteq> LI_rel\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "hence \"\\<not>(\\<exists>f. \\<forall>i::nat. (f i, f (Suc i)) \\<in> ?Sats)\""], ["proof (prove)\nusing this:\n  {((S, \\<theta>), S', \\<theta>').\n   (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  \\<subseteq> LI_rel\\<^sup>+\n\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       \\<forall>i.\n          (f i, f (Suc i))\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "using LI_no_infinite_chain infinite_chain_mono"], ["proof (prove)\nusing this:\n  {((S, \\<theta>), S', \\<theta>').\n   (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  \\<subseteq> LI_rel\\<^sup>+\n  \\<nexists>f. \\<forall>i. f i \\<leadsto>\\<^sup>+ f (Suc i)\n  \\<lbrakk>?S \\<subseteq> ?T;\n   \\<exists>f. \\<forall>i. (f i, f (Suc i)) \\<in> ?S\\<rbrakk>\n  \\<Longrightarrow> \\<exists>f. \\<forall>i. (f i, f (Suc i)) \\<in> ?T\n\ngoal (1 subgoal):\n 1. \\<nexists>f.\n       \\<forall>i.\n          (f i, f (Suc i))\n          \\<in> {((S, \\<theta>), S', \\<theta>').\n                 (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n                 \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "by blast"], ["proof (state)\nthis:\n  \\<nexists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. \\<nexists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n       \\<in> {((S, \\<theta>), S', \\<theta>').\n              (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n              \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n       (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n           (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n           (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n           \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>) \\<Longrightarrow>\n    False", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  \\<nexists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}", "show False"], ["proof (prove)\nusing this:\n  \\<exists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n  \\<nexists>f.\n     \\<forall>i.\n        (f i, f (Suc i))\n        \\<in> {((S, \\<theta>), S', \\<theta>').\n               (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n               \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n     (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n         (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n         (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "hence \"\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+ (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and> simple S\\<^sub>2 \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>)\""], ["proof (prove)\nusing this:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n     (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n         (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n         (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "using simple_if_stuck *"], ["proof (prove)\nusing this:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     ((S\\<^sub>1, \\<theta>\\<^sub>1), S\\<^sub>2, \\<theta>\\<^sub>2)\n     \\<in> {((S, \\<theta>), S', \\<theta>').\n            (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n            \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<and>\n     (\\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n         (S\\<^sub>2, \\<theta>\\<^sub>2) \\<leadsto>\n         (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>)\n  \\<lbrakk>(S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n           (?S\\<^sub>22, ?\\<theta>\\<^sub>22);\n   \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S\\<^sub>22,?\\<theta>\\<^sub>22\\<rangle>;\n   \\<nexists>S\\<^sub>3 \\<theta>\\<^sub>3.\n      (?S\\<^sub>22, ?\\<theta>\\<^sub>22) \\<leadsto>\n      (S\\<^sub>3, \\<theta>\\<^sub>3) \\<and>\n      \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>3,\\<theta>\\<^sub>3\\<rangle>\\<rbrakk>\n  \\<Longrightarrow> simple ?S\\<^sub>22\n  ((?S2, ?\\<theta>2), ?S'2, ?\\<theta>'2)\n  \\<in> {((S, \\<theta>), S', \\<theta>').\n         (S, \\<theta>) \\<leadsto> (S', \\<theta>') \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<and>\n         \\<I> \\<Turnstile>\\<^sub>c \\<langle>S',\\<theta>'\\<rangle>}\\<^sup>+ \\<Longrightarrow>\n  (?S2, ?\\<theta>2) \\<leadsto>\\<^sup>+ (?S'2, ?\\<theta>'2) \\<and>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>?S'2,?\\<theta>'2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by blast"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     simple S\\<^sub>2 \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (2 subgoals):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n 2. \\<not> simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>+\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     simple S\\<^sub>2 \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "by (meson trancl_into_rtrancl)"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n     (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n     (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n     simple S\\<^sub>2 \\<and>\n     \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>\n\ngoal (1 subgoal):\n 1. simple S\\<^sub>1 \\<Longrightarrow>\n    \\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n       (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n       (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n       simple S\\<^sub>2 \\<and>\n       \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>", "qed (blast intro: \\<open>\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle>\\<close>)"], ["", "end"], ["", "subsection \\<open>Corollary: Soundness and Completeness as a Single Theorem\\<close>"], ["", "corollary LI_soundness_and_completeness:\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\\<^sub>1 \\<theta>\\<^sub>1\"\n  shows \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1, \\<theta>\\<^sub>1\\<rangle> \\<longleftrightarrow> (\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2. (S\\<^sub>1,\\<theta>\\<^sub>1) \\<leadsto>\\<^sup>* (S\\<^sub>2,\\<theta>\\<^sub>2) \\<and> simple S\\<^sub>2 \\<and> (\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2, \\<theta>\\<^sub>2\\<rangle>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>1,\\<theta>\\<^sub>1\\<rangle> =\n    (\\<exists>S\\<^sub>2 \\<theta>\\<^sub>2.\n        (S\\<^sub>1, \\<theta>\\<^sub>1) \\<leadsto>\\<^sup>*\n        (S\\<^sub>2, \\<theta>\\<^sub>2) \\<and>\n        simple S\\<^sub>2 \\<and>\n        \\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<^sub>2,\\<theta>\\<^sub>2\\<rangle>)", "by (metis LI_soundness[OF assms] LI_completeness[OF assms])"], ["", "end"], ["", "end"]]}