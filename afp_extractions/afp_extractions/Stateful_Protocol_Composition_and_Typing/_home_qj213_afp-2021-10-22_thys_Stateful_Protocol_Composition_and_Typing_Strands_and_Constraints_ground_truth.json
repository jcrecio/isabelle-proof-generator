{"file_name": "/home/qj213/afp-2021-10-22/thys/Stateful_Protocol_Composition_and_Typing/Strands_and_Constraints.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Stateful_Protocol_Composition_and_Typing", "problem_names": ["lemma vars\\<^sub>s\\<^sub>t\\<^sub>p_unfold[simp]: \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p x) \\<union> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemmas wf\\<^sub>s\\<^sub>t_induct = wf\\<^sub>s\\<^sub>t.induct[case_names Nil ConsRcv ConsSnd ConsEq ConsEq2 ConsIneq]", "lemmas ik\\<^sub>s\\<^sub>t_induct = ik\\<^sub>s\\<^sub>t.induct[case_names Nil ConsRcv ConsSnd ConsEq ConsIneq]", "lemmas assignment_rhs\\<^sub>s\\<^sub>t_induct = assignment_rhs\\<^sub>s\\<^sub>t.induct[case_names Nil ConsEq2 ConsSnd ConsRcv ConsEq ConsIneq]", "lemma measure\\<^sub>s\\<^sub>t_alt_def:\n  \"((s,x),(t,y)) \\<in> measure\\<^sub>s\\<^sub>t =\n      (card (fv\\<^sub>s\\<^sub>t s) < card (fv\\<^sub>s\\<^sub>t t) \\<or> (card (fv\\<^sub>s\\<^sub>t s) = card (fv\\<^sub>s\\<^sub>t t) \\<and> size\\<^sub>s\\<^sub>t s < size\\<^sub>s\\<^sub>t t))\"", "lemma measure\\<^sub>s\\<^sub>t_trans: \"trans measure\\<^sub>s\\<^sub>t\"", "lemma trms_list\\<^sub>s\\<^sub>t_is_trms\\<^sub>s\\<^sub>t: \"trms\\<^sub>s\\<^sub>t S = set (trms_list\\<^sub>s\\<^sub>t S)\"", "lemma subst_apply_strand_step_def:\n  \"s \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = (case s of\n    Send t \\<Rightarrow> Send (t \\<cdot> \\<theta>)\n  | Receive t \\<Rightarrow> Receive (t \\<cdot> \\<theta>)\n  | Equality a t t' \\<Rightarrow> Equality a (t \\<cdot> \\<theta>) (t' \\<cdot> \\<theta>)\n  | Inequality X F \\<Rightarrow> Inequality X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s rm_vars (set X) \\<theta>))\"", "lemma subst_apply_strand_nil[simp]: \"[] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = []\"", "lemma finite_funs\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (funs\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma finite_funs\\<^sub>s\\<^sub>t[simp]: \"finite (funs\\<^sub>s\\<^sub>t S)\"", "lemma finite_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s[simp]: \"finite (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s x)\"", "lemma finite_trms\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (trms\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma finite_vars\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (vars\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma finite_bvars\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x))\"", "lemma finite_fv\\<^sub>s\\<^sub>n\\<^sub>d[simp]: \"finite (fv\\<^sub>s\\<^sub>n\\<^sub>d x)\"", "lemma finite_fv\\<^sub>r\\<^sub>c\\<^sub>v[simp]: \"finite (fv\\<^sub>r\\<^sub>c\\<^sub>v x)\"", "lemma finite_fv\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (fv\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma finite_vars\\<^sub>s\\<^sub>t[simp]: \"finite (vars\\<^sub>s\\<^sub>t S)\"", "lemma finite_bvars\\<^sub>s\\<^sub>t[simp]: \"finite (bvars\\<^sub>s\\<^sub>t S)\"", "lemma finite_fv\\<^sub>s\\<^sub>t[simp]: \"finite (fv\\<^sub>s\\<^sub>t S)\"", "lemma finite_wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma finite_wfrestrictedvars\\<^sub>s\\<^sub>t[simp]: \"finite (wfrestrictedvars\\<^sub>s\\<^sub>t S)\"", "lemma finite_wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma finite_wfvarsoccs\\<^sub>s\\<^sub>t[simp]: \"finite (wfvarsoccs\\<^sub>s\\<^sub>t S)\"", "lemma finite_ik\\<^sub>s\\<^sub>t[simp]: \"finite (ik\\<^sub>s\\<^sub>t S)\"", "lemma finite_assignment_rhs\\<^sub>s\\<^sub>t[simp]: \"finite (assignment_rhs\\<^sub>s\\<^sub>t S)\"", "lemma ik\\<^sub>s\\<^sub>t_is_rcv_set: \"ik\\<^sub>s\\<^sub>t A = {t. Receive t \\<in> set A}\"", "lemma ik\\<^sub>s\\<^sub>tD[dest]: \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> Receive t \\<in> set S\"", "lemma ik\\<^sub>s\\<^sub>tD'[dest]: \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> t \\<in> trms\\<^sub>s\\<^sub>t S\"", "lemma ik\\<^sub>s\\<^sub>tD''[dest]: \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) \\<Longrightarrow> t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t S)\"", "lemma ik\\<^sub>s\\<^sub>t_subterm_exD:\n  assumes \"t \\<in> ik\\<^sub>s\\<^sub>t S\"\n  shows \"\\<exists>x \\<in> set S. t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma assignment_rhs\\<^sub>s\\<^sub>tD[dest]: \"t \\<in> assignment_rhs\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>t'. Equality Assign t' t \\<in> set S\"", "lemma assignment_rhs\\<^sub>s\\<^sub>tD'[dest]: \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S) \\<Longrightarrow> t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t S)\"", "lemma bvars\\<^sub>s\\<^sub>t_split: \"bvars\\<^sub>s\\<^sub>t (S@S') = bvars\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S'\"", "lemma bvars\\<^sub>s\\<^sub>t_singleton: \"bvars\\<^sub>s\\<^sub>t [x] = set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma strand_fv_bvars_disjointD:\n  assumes \"fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"Inequality X F \\<in> set S\"\n  shows \"set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\" \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> fv\\<^sub>s\\<^sub>t S\"", "lemma strand_fv_bvars_disjoint_unfold:\n  assumes \"fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"Inequality X F \\<in> set S\" \"Inequality Y G \\<in> set S\"\n  shows \"set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) = {}\"", "lemma strand_subst_hom[iff]:\n  \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)@(S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\" \"(x#S) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)#(S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\"", "lemma strand_subst_comp: \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> = ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\"", "lemma strand_substI[intro]:\n  \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\"\n  \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\"", "lemma strand_substI':\n  \"fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\"\n  \"vars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\"", "lemma strand_subst_set: \"(set (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)) = ((\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) ` (set S))\"", "lemma strand_map_inv_set_snd_rcv_subst:\n  assumes \"finite (M::('a,'b) terms)\"\n  shows \"set ((map Send (inv set M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\" (is ?A)\n        \"set ((map Receive (inv set M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\" (is ?B)", "lemma strand_ground_subst_vars_subset:\n  assumes \"ground (subst_range \\<theta>)\" shows \"vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) \\<subseteq> vars\\<^sub>s\\<^sub>t S\"", "lemma ik_union_subset: \"\\<Union>(P ` ik\\<^sub>s\\<^sub>t S) \\<subseteq> (\\<Union>x \\<in> (set S). \\<Union>(P ` trms\\<^sub>s\\<^sub>t\\<^sub>p x))\"", "lemma ik_snd_empty[simp]: \"ik\\<^sub>s\\<^sub>t (map Send X) = {}\"", "lemma ik_snd_empty'[simp]: \"ik\\<^sub>s\\<^sub>t [Send t] = {}\"", "lemma ik_append[iff]: \"ik\\<^sub>s\\<^sub>t (S@S') = ik\\<^sub>s\\<^sub>t S \\<union> ik\\<^sub>s\\<^sub>t S'\"", "lemma ik_cons: \"ik\\<^sub>s\\<^sub>t (x#S) = ik\\<^sub>s\\<^sub>t [x] \\<union> ik\\<^sub>s\\<^sub>t S\"", "lemma assignment_rhs_append[iff]: \"assignment_rhs\\<^sub>s\\<^sub>t (S@S') = assignment_rhs\\<^sub>s\\<^sub>t S \\<union> assignment_rhs\\<^sub>s\\<^sub>t S'\"", "lemma eqs_rcv_map_empty: \"assignment_rhs\\<^sub>s\\<^sub>t (map Receive M) = {}\"", "lemma ik_rcv_map: assumes \"t \\<in> set L\" shows \"t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)\"", "lemma ik_subst: \"ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\"", "lemma ik_rcv_map': assumes \"t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)\" shows \"t \\<in> set L\"", "lemma ik_append_subset[simp]: \"ik\\<^sub>s\\<^sub>t S \\<subseteq> ik\\<^sub>s\\<^sub>t (S@S')\" \"ik\\<^sub>s\\<^sub>t S' \\<subseteq> ik\\<^sub>s\\<^sub>t (S@S')\"", "lemma assignment_rhs_append_subset[simp]:\n  \"assignment_rhs\\<^sub>s\\<^sub>t S \\<subseteq> assignment_rhs\\<^sub>s\\<^sub>t (S@S')\"\n  \"assignment_rhs\\<^sub>s\\<^sub>t S' \\<subseteq> assignment_rhs\\<^sub>s\\<^sub>t (S@S')\"", "lemma trms\\<^sub>s\\<^sub>t_cons: \"trms\\<^sub>s\\<^sub>t (x#S) = trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> trms\\<^sub>s\\<^sub>t S\"", "lemma trm_strand_subst_cong:\n  \"t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow> t \\<cdot> \\<delta> \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<or> (\\<exists>X F. Inequality X F \\<in> set S \\<and> t \\<cdot> rm_vars (set X) \\<delta> \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\"\n    (is \"t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow> ?P t \\<delta> S\")\n  \"t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow> (\\<exists>t'. t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S)\n    \\<or> (\\<exists>X F. Inequality X F \\<in> set S \\<and> (\\<exists>t' \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F. t = t' \\<cdot> rm_vars (set X) \\<delta>))\"\n    (is \"t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow> ?Q t \\<delta> S\")", "lemma fv_trm_snd_rcv[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p (Send t)) = fv t\" \"fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p (Receive t)) = fv t\"", "lemma in_strand_fv_subset: \"x \\<in> set S \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> vars\\<^sub>s\\<^sub>t S\"", "lemma in_strand_fv_subset_snd: \"Send t \\<in> set S \\<Longrightarrow> fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\"", "lemma in_strand_fv_subset_rcv: \"Receive t \\<in> set S \\<Longrightarrow> fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\"", "lemma fv\\<^sub>s\\<^sub>n\\<^sub>dE:\n  assumes \"v \\<in> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\"\n  obtains t where \"send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\" \"v \\<in> fv t\"", "lemma fv\\<^sub>r\\<^sub>c\\<^sub>vE:\n  assumes \"v \\<in> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\"\n  obtains t where \"receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\" \"v \\<in> fv t\"", "lemma vars\\<^sub>s\\<^sub>t\\<^sub>pI[intro]: \"x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p s \\<Longrightarrow> x \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p s\"", "lemma vars\\<^sub>s\\<^sub>tI[intro]: \"x \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow> x \\<in> vars\\<^sub>s\\<^sub>t S\"", "lemma fv\\<^sub>s\\<^sub>t_subset_vars\\<^sub>s\\<^sub>t[simp]: \"fv\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S\"", "lemma vars\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>t_bvars\\<^sub>s\\<^sub>t: \"vars\\<^sub>s\\<^sub>t S = fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S\"", "lemma fv\\<^sub>s\\<^sub>t\\<^sub>p_is_subterm_trms\\<^sub>s\\<^sub>t\\<^sub>p: \"x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p a \\<Longrightarrow> Var x \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p a)\"", "lemma fv\\<^sub>s\\<^sub>t_is_subterm_trms\\<^sub>s\\<^sub>t: \"x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow> Var x \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t A)\"", "lemma vars_st_snd_map: \"vars\\<^sub>s\\<^sub>t (map Send X) = fv (Fun f X)\"", "lemma vars_st_rcv_map: \"vars\\<^sub>s\\<^sub>t (map Receive X) = fv (Fun f X)\"", "lemma vars_snd_rcv_union:\n  \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union> fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union> fv\\<^sub>e\\<^sub>q assign x \\<union> fv\\<^sub>e\\<^sub>q check x \\<union> fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\"", "lemma fv_snd_rcv_union:\n  \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union> fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union> fv\\<^sub>e\\<^sub>q assign x \\<union> fv\\<^sub>e\\<^sub>q check x \\<union> fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\"", "lemma fv_snd_rcv_empty[simp]: \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} \\<or> fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\"", "lemma vars_snd_rcv_strand[iff]:\n  \"vars\\<^sub>s\\<^sub>t (S::('a,'b) strand) =\n    (\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))) \\<union> (\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))) \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)))\n    \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q check) S))) \\<union> (\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))) \\<union> bvars\\<^sub>s\\<^sub>t S\"", "lemma fv_snd_rcv_strand[iff]:\n  \"fv\\<^sub>s\\<^sub>t (S::('a,'b) strand) =\n    (\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))) \\<union> (\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))) \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)))\n    \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q check) S))) \\<union> (\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)))\"", "lemma vars_snd_rcv_strand2[iff]:\n  \"wfrestrictedvars\\<^sub>s\\<^sub>t (S::('a,'b) strand) =\n    (\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))) \\<union> (\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))) \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)))\"", "lemma fv_snd_rcv_strand_subset[simp]:\n  \"\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  \"\\<Union>(set (map (fv\\<^sub>e\\<^sub>q ac) S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  \"wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S\"", "lemma vars_snd_rcv_strand_subset2[simp]:\n  \"\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\"\n  \"\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\" \"wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\"", "lemma wfrestrictedvars\\<^sub>s\\<^sub>t_subset_vars\\<^sub>s\\<^sub>t: \"wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S\"", "lemma subst_sends_strand_step_fv_to_img: \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\"", "lemma subst_sends_strand_fv_to_img: \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\"", "lemma ineq_apply_subst:\n  assumes \"subst_domain \\<delta> \\<inter> set X = {}\"\n  shows \"(Inequality X F) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> = Inequality X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\"", "lemma fv_strand_step_subst:\n  assumes \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (P x)) = P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\"", "lemma fv_strand_subst:\n  assumes \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (\\<Union>(set (map P S)))) = \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\"", "lemma fv_strand_subst2:\n  assumes \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (wfrestrictedvars\\<^sub>s\\<^sub>t S)) = wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma fv_strand_subst':\n  assumes \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (fv\\<^sub>s\\<^sub>t S)) = fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma fv_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_is_fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s:\n  \"fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\"", "lemma fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_in_fv_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s: \"x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow> x \\<in> fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)\"", "lemma trms\\<^sub>s\\<^sub>t_append: \"trms\\<^sub>s\\<^sub>t (A@B) = trms\\<^sub>s\\<^sub>t A \\<union> trms\\<^sub>s\\<^sub>t B\"", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_subst: \"trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>) = trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\"", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_fv_subst_subset:\n  \"t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow> fv (t \\<cdot> \\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\"", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_fv_subst_subset':\n  fixes t::\"('a,'b) term\" and \\<theta>::\"('a,'b) subst\"\n  assumes \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)\"\n  shows \"fv (t \\<cdot> \\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\"", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_funs_term_cases:\n  assumes \"t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\" \"f \\<in> funs_term t\"\n  shows \"(\\<exists>u \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F. f \\<in> funs_term u) \\<or> (\\<exists>x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F. f \\<in> funs_term (\\<theta> x))\"", "lemma trm\\<^sub>s\\<^sub>t\\<^sub>p_subst: \n  assumes \"subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\"\n  shows \"trms\\<^sub>s\\<^sub>t\\<^sub>p (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) = trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\"", "lemma trms\\<^sub>s\\<^sub>t_subst:\n  assumes \"subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\"\n  shows \"trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\"", "lemma strand_map_set_subst:\n  assumes \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"\\<Union>(set (map trms\\<^sub>s\\<^sub>t\\<^sub>p (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) = (\\<Union>(set (map trms\\<^sub>s\\<^sub>t\\<^sub>p S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\"", "lemma subst_apply_fv_subset_strand_trm:\n  assumes P: \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and fv_sub: \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"", "lemma subst_apply_fv_subset_strand_trm2:\n  assumes fv_sub: \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"", "lemma subst_apply_fv_subset_strand:\n  assumes P: \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and P_subset: \"P x \\<subseteq> \\<Union>(set (map P S)) \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n         \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"", "lemma subst_apply_fv_subset_strand2:\n  assumes P: \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\"\n  and P_subset: \"P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n         \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"", "lemma strand_subst_fv_bounded_if_img_bounded:\n  assumes \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"", "lemma strand_fv_subst_subset_if_subst_elim:\n  assumes \"subst_elim \\<delta> v\" and \"v \\<in> fv\\<^sub>s\\<^sub>t S \\<or> bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_fv_subst_subset_if_subst_elim':\n  assumes \"subst_elim \\<delta> v\" \"v \\<in> fv\\<^sub>s\\<^sub>t S\" \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subset> fv\\<^sub>s\\<^sub>t S\"", "lemma fv_ik_is_fv_rcv: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) = \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\"", "lemma fv_ik_subset_fv_st[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\"", "lemma fv_assignment_rhs_subset_fv_st[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\"", "lemma fv_ik_subset_fv_st'[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"", "lemma ik\\<^sub>s\\<^sub>t_var_is_fv: \"Var x \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A) \\<Longrightarrow> x \\<in> fv\\<^sub>s\\<^sub>t A\"", "lemma fv_assignment_rhs_subset_fv_st'[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"", "lemma ik\\<^sub>s\\<^sub>t_assignment_rhs\\<^sub>s\\<^sub>t_wfrestrictedvars_subset:\n  \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A \\<union> assignment_rhs\\<^sub>s\\<^sub>t A) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\"", "lemma strand_step_id_subst[iff]: \"x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p Var = x\"", "lemma strand_id_subst[iff]: \"S \\<cdot>\\<^sub>s\\<^sub>t Var = S\"", "lemma strand_subst_vars_union_bound[simp]: \"vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\"", "lemma strand_vars_split:\n  \"vars\\<^sub>s\\<^sub>t (S@S') = vars\\<^sub>s\\<^sub>t S \\<union> vars\\<^sub>s\\<^sub>t S'\"\n  \"wfrestrictedvars\\<^sub>s\\<^sub>t (S@S') = wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S'\"\n  \"fv\\<^sub>s\\<^sub>t (S@S') = fv\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>t S'\"", "lemma bvars_subst_ident: \"bvars\\<^sub>s\\<^sub>t S = bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_subst_subst_idem:\n  assumes \"subst_idem \\<delta>\" \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {}\"\n          \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"range_vars \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"\n  and   \"(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t (\\<theta> \\<circ>\\<^sub>s \\<delta>) = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_subst_img_bound:\n  assumes \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n    and \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_subst_img_bound':\n  assumes \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> vars\\<^sub>s\\<^sub>t S\"\n    and \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"range_vars \\<delta> \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_subst_all_fv_subset:\n  assumes \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"fv (t \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_subst_not_dom_fixed:\n  assumes \"v \\<in> fv\\<^sub>s\\<^sub>t S\" and \"v \\<notin> subst_domain \\<delta>\"\n  shows \"v \\<in> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma strand_vars_unfold: \"v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>S' x S''. S = S'@x#S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\"", "lemma strand_fv_unfold: \"v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>S' x S''. S = S'@x#S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\"", "lemma subterm_if_in_strand_ik:\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>t'. Receive t' \\<in> set S \\<and> t \\<sqsubseteq> t'\"", "lemma fv_subset_if_in_strand_ik:\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\"", "lemma fv_subset_if_in_strand_ik':\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\"", "lemma vars_subset_if_in_strand_ik2:\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\"", "lemma simple_Cons[dest]: \"simple (s#S) \\<Longrightarrow> simple S\"", "lemma simple_split[dest]:\n  assumes \"simple (S@S')\"\n  shows \"simple S\" \"simple S'\"", "lemma simple_append[intro]: \"\\<lbrakk>simple S; simple S'\\<rbrakk> \\<Longrightarrow> simple (S@S')\"", "lemma simple_append_sym[sym]: \"simple (S@S') \\<Longrightarrow> simple (S'@S)\"", "lemma not_simple_if_snd_fun: \"(\\<exists>S' S'' f X. S = S'@Send (Fun f X)#S'') \\<Longrightarrow> \\<not>simple S\"", "lemma not_list_all_elim: \"\\<not>list_all P A \\<Longrightarrow> \\<exists>B x C. A = B@x#C \\<and> \\<not>P x \\<and> list_all P B\"", "lemma not_simple\\<^sub>s\\<^sub>t\\<^sub>p_elim:\n  assumes \"\\<not>simple\\<^sub>s\\<^sub>t\\<^sub>p x\"\n  shows \"(\\<exists>f T. x = Send (Fun f T)) \\<or> \n         (\\<exists>a t t'. x = Equality a t t') \\<or>\n         (\\<exists>X F. x = Inequality X F \\<and> \\<not>(\\<exists>\\<I>. ineq_model \\<I> X F))\"", "lemma not_simple_elim:\n  assumes \"\\<not>simple S\"\n  shows \"(\\<exists>A B f T. S = A@Send (Fun f T)#B \\<and> simple A) \\<or> \n         (\\<exists>A B a t t'. S = A@Equality a t t'#B \\<and> simple A) \\<or>\n         (\\<exists>A B X F. S = A@Inequality X F#B \\<and> \\<not>(\\<exists>\\<I>. ineq_model \\<I> X F))\"", "lemma simple_fun_prefix_unique:\n  assumes \"A = S@Send (Fun f X)#S'\" \"simple S\"\n  shows \"\\<forall>T g Y T'. A = T@Send (Fun g Y)#T' \\<and> simple T \\<longrightarrow> S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'\"", "lemma simple_snd_is_var: \"\\<lbrakk>Send t \\<in> set S; simple S\\<rbrakk> \\<Longrightarrow> \\<exists>v. t = Var v\"", "lemma measure\\<^sub>s\\<^sub>t_wellfounded: \"wf measure\\<^sub>s\\<^sub>t\"", "lemma strand_size_append[iff]: \"size\\<^sub>s\\<^sub>t (S@S') = size\\<^sub>s\\<^sub>t S + size\\<^sub>s\\<^sub>t S'\"", "lemma strand_size_map_fun_lt[simp]:\n  \"size\\<^sub>s\\<^sub>t (map Send X) < size (Fun f X)\"\n  \"size\\<^sub>s\\<^sub>t (map Send X) < size\\<^sub>s\\<^sub>t [Send (Fun f X)]\"\n  \"size\\<^sub>s\\<^sub>t (map Send X) < size\\<^sub>s\\<^sub>t [Receive (Fun f X)]\"", "lemma strand_size_rm_fun_lt[simp]:\n  \"size\\<^sub>s\\<^sub>t (S@S') < size\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')\"\n  \"size\\<^sub>s\\<^sub>t (S@S') < size\\<^sub>s\\<^sub>t (S@Receive (Fun f X)#S')\"", "lemma strand_fv_card_map_fun_eq:\n  \"card (fv\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')) = card (fv\\<^sub>s\\<^sub>t (S@(map Send X)@S'))\"", "lemma strand_fv_card_rm_fun_le[simp]: \"card (fv\\<^sub>s\\<^sub>t (S@S')) \\<le> card (fv\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S'))\"", "lemma strand_fv_card_rm_eq_le[simp]: \"card (fv\\<^sub>s\\<^sub>t (S@S')) \\<le> card (fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S'))\"", "lemma wf_prefix[dest]: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S\"", "lemma wf_vars_mono[simp]: \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) S\"", "lemma wf\\<^sub>s\\<^sub>tI[intro]: \"wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S\"", "lemma wf\\<^sub>s\\<^sub>tI'[intro]: \"\\<Union>(fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union> \\<Union>(fv_r\\<^sub>e\\<^sub>q assign ` set S) \\<subseteq> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S\"", "lemma wf_append_exec: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\"", "lemma wf_append_suffix:\n  \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wfrestrictedvars\\<^sub>s\\<^sub>t S' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\"", "lemma wf_append_suffix':\n  assumes \"wf\\<^sub>s\\<^sub>t V S\"\n    and \"\\<Union>(fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union> \\<Union>(fv_r\\<^sub>e\\<^sub>q assign ` set S') \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\"\n  shows \"wf\\<^sub>s\\<^sub>t V (S@S')\"", "lemma wf_send_compose: \"wf\\<^sub>s\\<^sub>t V (S@(map Send X)@S') = wf\\<^sub>s\\<^sub>t V (S@Send (Fun f X)#S')\"", "lemma wf_snd_append[iff]: \"wf\\<^sub>s\\<^sub>t V (S@[Send t]) = wf\\<^sub>s\\<^sub>t V S\"", "lemma wf_snd_append': \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (Send t#S)\"", "lemma wf_rcv_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Receive t#S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\"", "lemma wf_rcv_append'[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S@S'); fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Receive t#S')\"", "lemma wf_rcv_append''[intro]: \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V S; fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Receive t])\"", "lemma wf_rcv_append'''[intro]: \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V S; fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Receive t])\"", "lemma wf_eq_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Equality a t t'#S') \\<Longrightarrow> fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\"", "lemma wf_eq_append'[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S@S'); fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Equality a t t'#S')\"", "lemma wf_eq_append''[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S@S'); fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Equality a t t']@S')\"", "lemma wf_eq_append'''[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V S; fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Equality a t t'])\"", "lemma wf_eq_check_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Equality Check t t'#S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\"", "lemma wf_eq_check_append'[intro]: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Equality Check t t'#S')\"", "lemma wf_eq_check_append''[intro]: \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Equality Check t t'])\"", "lemma wf_ineq_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Inequality X F#S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\"", "lemma wf_ineq_append'[intro]: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Inequality X F#S')\"", "lemma wf_ineq_append''[intro]: \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Inequality X F])\"", "lemma wf_rcv_fv_single[elim]: \"wf\\<^sub>s\\<^sub>t V (Receive t#S') \\<Longrightarrow> fv t \\<subseteq> V\"", "lemma wf_rcv_fv: \"wf\\<^sub>s\\<^sub>t V (S@Receive t#S') \\<Longrightarrow> fv t \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\"", "lemma wf_eq_fv: \"wf\\<^sub>s\\<^sub>t V (S@Equality Assign t t'#S') \\<Longrightarrow> fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\"", "lemma wf_simple_fv_occurrence:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"simple S\" \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\"\n  shows \"\\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send (Var v)#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\"", "lemma Unifier_strand_fv_subset:\n  assumes g_in_ik: \"t \\<in> ik\\<^sub>s\\<^sub>t S\"\n  and \\<delta>: \"Unifier \\<delta> (Fun f X) t\"\n  and disj: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv (Fun f X \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\"", "lemma wf\\<^sub>s\\<^sub>t_induct'[consumes 1, case_names Nil ConsSnd ConsRcv ConsEq ConsEq2 ConsIneq]:\n  fixes S::\"('a,'b) strand\"\n  assumes \"wf\\<^sub>s\\<^sub>t V S\"\n          \"P []\"\n          \"\\<And>t S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Send t])\"\n          \"\\<And>t S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S; fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk> \\<Longrightarrow> P (S@[Receive t])\"\n          \"\\<And>t t' S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S; fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk> \\<Longrightarrow> P (S@[Equality Assign t t'])\"\n          \"\\<And>t t' S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Equality Check t t'])\"\n          \"\\<And>X F S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Inequality X F])\"\n  shows \"P S\"", "lemma wf_subst_apply:\n  \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma wf_unify:\n  assumes wf: \"wf\\<^sub>s\\<^sub>t V (S@Send (Fun f X)#S')\"\n  and g_in_ik: \"t \\<in> ik\\<^sub>s\\<^sub>t S\"\n  and \\<delta>: \"Unifier \\<delta> (Fun f X) t\"\n  and disj: \"bvars\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma wf_equality:\n  assumes wf: \"wf\\<^sub>s\\<^sub>t V (S@Equality ac t t'#S')\"\n  and \\<delta>: \"mgu t t' = Some \\<delta>\"\n  and disj: \"bvars\\<^sub>s\\<^sub>t (S@Equality ac t t'#S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"", "lemma wf_rcv_prefix_ground:\n  \"wf\\<^sub>s\\<^sub>t {} ((map Receive M)@S) \\<Longrightarrow> vars\\<^sub>s\\<^sub>t (map Receive M) = {}\"", "lemma simple_wfvarsoccs\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>n\\<^sub>d:\n  assumes \"simple S\"\n  shows \"wfvarsoccs\\<^sub>s\\<^sub>t S = \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\"", "lemma wf\\<^sub>s\\<^sub>t_simple_induct[consumes 2, case_names Nil ConsSnd ConsRcv ConsIneq]:\n  fixes S::\"('a,'b) strand\"\n  assumes \"wf\\<^sub>s\\<^sub>t V S\" \"simple S\"\n          \"P []\"\n          \"\\<And>v S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Send (Var v)])\"\n          \"\\<And>t S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S; fv t \\<subseteq> V \\<union> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk> \\<Longrightarrow> P (S@[Receive t])\"\n          \"\\<And>X F S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Inequality X F])\"\n  shows \"P S\"", "lemma wf_trm_stp_dom_fv_disjoint:\n  \"\\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta>; t \\<in> trms\\<^sub>s\\<^sub>t S\\<rbrakk> \\<Longrightarrow> subst_domain \\<theta> \\<inter> fv t = {}\"", "lemma wf_constr_bvars_disj: \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta> \\<Longrightarrow> (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"", "lemma wf_constr_bvars_disj':\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta>\" \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" (is ?A)\n  and \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\" (is ?B)", "lemma (in intruder_model) wf_simple_strand_first_Send_var_split:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"simple S\" \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> v\"\n  shows \"\\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send (Var v)#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> t \\<cdot> \\<I> = \\<I> v\n                      \\<and> \\<not>(\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e. t \\<cdot> \\<I> = \\<I> w)\"\n    (is \"?P S\")", "lemma (in intruder_model) wf_strand_first_Send_var_split:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\"\n  shows \"\\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. \\<not>(\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n            \\<and> ((\\<exists>t'. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send t'#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n               \\<or> (\\<exists>t' t''. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Equality Assign t' t''#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\"\n    (is \"\\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. ?P S\\<^sub>p\\<^sub>r\\<^sub>e \\<and> ?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\")", "lemmas strand_sem_induct = strand_sem_c.induct[case_names Nil ConsSnd ConsRcv ConsEq ConsIneq]", "lemma strand_sem_d_if_c: \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow> \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>\"", "lemma strand_sem_mono_ik:\n  \"\\<lbrakk>M \\<subseteq> M'; \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\" (is \"\\<lbrakk>?A'; ?A''\\<rbrakk> \\<Longrightarrow> ?A\")\n  \"\\<lbrakk>M \\<subseteq> M'; \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\" (is \"\\<lbrakk>?B'; ?B''\\<rbrakk> \\<Longrightarrow> ?B\")", "lemma strand_sem_split_left:\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\"", "lemma strand_sem_split_right:\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>c \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>d \\<theta>\"", "lemmas strand_sem_split[dest] =\n  strand_sem_split_left(1) strand_sem_split_right(1)\n  strand_sem_split_left(2) strand_sem_split_right(2)", "lemma strand_sem_Send_split[dest]:\n  \"\\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>c \\<theta>\" (is \"\\<lbrakk>?A'; ?A''\\<rbrakk> \\<Longrightarrow> ?A\")\n  \"\\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>d \\<theta>\" (is \"\\<lbrakk>?B'; ?B''\\<rbrakk> \\<Longrightarrow> ?B\")\n  \"\\<lbrakk>\\<lbrakk>M; map Send T@S\\<rbrakk>\\<^sub>c \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>c \\<theta>\" (is \"\\<lbrakk>?C'; ?C''\\<rbrakk> \\<Longrightarrow> ?C\")\n  \"\\<lbrakk>\\<lbrakk>M; map Send T@S\\<rbrakk>\\<^sub>d \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>d \\<theta>\" (is \"\\<lbrakk>?D'; ?D''\\<rbrakk> \\<Longrightarrow> ?D\")", "lemma strand_sem_Send_map:\n  \"(\\<And>t. t \\<in> set T \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>c \\<I>) \\<Longrightarrow> \\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<I>\"\n  \"(\\<And>t. t \\<in> set T \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>d \\<I>) \\<Longrightarrow> \\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<I>\"", "lemma strand_sem_Receive_map: \"\\<lbrakk>M; map Receive T\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>M; map Receive T\\<rbrakk>\\<^sub>d \\<I>\"", "lemma strand_sem_append[intro]:\n  \"\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>; \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c \\<theta>\"\n  \"\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>; \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d \\<theta>\"", "lemma ineq_model_subst:\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\"\n    and \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\"\n  shows \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\"", "lemma ineq_model_subst':\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\"\n    and \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\"\n  shows \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\"", "lemma ineq_model_ground_subst:\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  assumes \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> subst_domain \\<delta>\"\n    and \"ground (subst_range \\<delta>)\"\n    and \"ineq_model \\<delta> X F\"\n  shows \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\"", "lemma strand_sem_subst_c:\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\"", "lemma strand_sem_subst_c':\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\"", "lemma strand_sem_subst_d:\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\"", "lemma strand_sem_subst_d':\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\"", "lemmas strand_sem_subst =\n  strand_sem_subst_c strand_sem_subst_c' strand_sem_subst_d strand_sem_subst_d'", "lemma strand_sem_subst_subst_idem:\n  assumes \\<delta>: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>); subst_idem \\<delta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\"", "lemma strand_sem_subst_comp:\n  assumes \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n    and \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<delta>\" \"subst_domain \\<theta> \\<inter> (vars\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t M) = {}\"\n  shows \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)\"", "lemma strand_sem_c_imp_ineqs_neq:\n  assumes \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>\" \"Inequality X [(t,t')] \\<in> set S\"\n  shows \"t \\<noteq> t' \\<and> (\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>)\n                        \\<longrightarrow> t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and> t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<delta> \\<cdot> \\<I>)\"", "lemma strand_sem_c_imp_ineq_model:\n  assumes \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>\" \"Inequality X F \\<in> set S\"\n  shows \"ineq_model \\<I> X F\"", "lemma strand_sem_wf_simple_fv_sat:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"simple S\" \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\"\n  shows \"\\<And>v. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c \\<I> v\"", "lemma strand_sem_wf_ik_or_assignment_rhs_fun_subterm:\n  assumes \"wf\\<^sub>s\\<^sub>t {} A\" \"\\<lbrakk>{}; A\\<rbrakk>\\<^sub>c \\<I>\" \"Var x \\<in> ik\\<^sub>s\\<^sub>t A\" \"\\<I> x = Fun f T\"\n          \"t\\<^sub>i \\<in> set T\" \"\\<not>ik\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t\\<^sub>i\" \"interpretation\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<I>\"\n  obtains S where\n    \"Fun f S \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A) \\<or> Fun f S \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t A)\"\n    \"Fun f T = Fun f S \\<cdot> \\<I>\"", "lemma strand_sem_not_unif_is_sat_ineq:\n  assumes \"\\<nexists>\\<theta>. Unifier \\<theta> t t'\"\n  shows \"\\<lbrakk>M; [Inequality X [(t,t')]]\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>M; [Inequality X [(t,t')]]\\<rbrakk>\\<^sub>d \\<I>\"", "lemma ineq_model_singleI[intro]:\n  assumes \"\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>) \\<longrightarrow> t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<delta> \\<cdot> \\<I>\"\n  shows \"ineq_model \\<I> X [(t,t')]\"", "lemma ineq_model_singleE:\n  assumes \"ineq_model \\<I> X [(t,t')]\"\n  shows \"\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>) \\<longrightarrow> t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<delta> \\<cdot> \\<I>\"", "lemma ineq_model_single_iff:\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  shows \"ineq_model \\<I> X F \\<longleftrightarrow>\n         ineq_model \\<I> X [(Fun f (Fun c []#map fst F),Fun f (Fun c []#map snd F))]\"\n    (is \"?A \\<longleftrightarrow> ?B\")", "lemma strand_sem_eq_defs:\n  \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> = \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c \\<I>\"\n  \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> = \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d \\<I>\"", "lemma strand_sem_split'[dest]:\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta>\" \n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c' \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d' \\<theta>\"", "lemma strand_sem_append'[intro]:\n  \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c' \\<theta>\"\n  \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d' \\<theta>\"", "lemma dual\\<^sub>s\\<^sub>t_append: \"dual\\<^sub>s\\<^sub>t (A@B) = (dual\\<^sub>s\\<^sub>t A)@(dual\\<^sub>s\\<^sub>t B)\"", "lemma dual\\<^sub>s\\<^sub>t_self_inverse: \"dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S\"", "lemma dual\\<^sub>s\\<^sub>t_trms_eq: \"trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = trms\\<^sub>s\\<^sub>t S\"", "lemma dual\\<^sub>s\\<^sub>t_fv: \"fv\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t A) = fv\\<^sub>s\\<^sub>t A\"", "lemma dual\\<^sub>s\\<^sub>t_bvars: \"bvars\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t A) = bvars\\<^sub>s\\<^sub>t A\""], "translations": [["", "lemma vars\\<^sub>s\\<^sub>t\\<^sub>p_unfold[simp]: \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p x) \\<union> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p x) \\<union>\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases x) auto"], ["", "text \\<open>The set of terms occurring in a strand\\<close>"], ["", "definition trms\\<^sub>s\\<^sub>t where \"trms\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(trms\\<^sub>s\\<^sub>t\\<^sub>p ` set S)\""], ["", "fun trms_list\\<^sub>s\\<^sub>t\\<^sub>p::\"('a,'b) strand_step \\<Rightarrow> ('a,'b) term list\" where\n  \"trms_list\\<^sub>s\\<^sub>t\\<^sub>p (Send t) = [t]\"\n| \"trms_list\\<^sub>s\\<^sub>t\\<^sub>p (Receive t) = [t]\"\n| \"trms_list\\<^sub>s\\<^sub>t\\<^sub>p (Equality _ t t') = [t,t']\"\n| \"trms_list\\<^sub>s\\<^sub>t\\<^sub>p (Inequality _ F) = concat (map (\\<lambda>(t,t'). [t,t']) F)\""], ["", "text \\<open>The set of terms occurring in a strand (list variant)\\<close>"], ["", "definition trms_list\\<^sub>s\\<^sub>t where \"trms_list\\<^sub>s\\<^sub>t S \\<equiv> remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["", "text \\<open>The set of variables occurring in a sent message\\<close>"], ["", "definition fv\\<^sub>s\\<^sub>n\\<^sub>d::\"('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<equiv> case x of Send t \\<Rightarrow> fv t | _ \\<Rightarrow> {}\""], ["", "text \\<open>The set of variables occurring in a received message\\<close>"], ["", "definition fv\\<^sub>r\\<^sub>c\\<^sub>v::\"('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<equiv> case x of Receive t \\<Rightarrow> fv t | _ \\<Rightarrow> {}\""], ["", "text \\<open>The set of variables occurring in an equality constraint\\<close>"], ["", "definition fv\\<^sub>e\\<^sub>q::\"poscheckvariant \\<Rightarrow> ('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv\\<^sub>e\\<^sub>q ac x \\<equiv> case x of Equality ac' s t \\<Rightarrow> if ac = ac' then fv s \\<union> fv t else {} | _ \\<Rightarrow> {}\""], ["", "text \\<open>The set of variables occurring at the left-hand side of an equality constraint\\<close>"], ["", "definition fv_l\\<^sub>e\\<^sub>q::\"poscheckvariant \\<Rightarrow> ('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv_l\\<^sub>e\\<^sub>q ac x \\<equiv> case x of Equality ac' s t \\<Rightarrow> if ac = ac' then fv s else {} | _ \\<Rightarrow> {}\""], ["", "text \\<open>The set of variables occurring at the right-hand side of an equality constraint\\<close>"], ["", "definition fv_r\\<^sub>e\\<^sub>q::\"poscheckvariant \\<Rightarrow> ('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv_r\\<^sub>e\\<^sub>q ac x \\<equiv> case x of Equality ac' s t \\<Rightarrow> if ac = ac' then fv t else {} | _ \\<Rightarrow> {}\""], ["", "text \\<open>The free variables of inequality constraints\\<close>"], ["", "definition fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q::\"('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<equiv> case x of Inequality X F \\<Rightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X | _ \\<Rightarrow> {}\""], ["", "fun fv\\<^sub>s\\<^sub>t\\<^sub>p::\"('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"fv\\<^sub>s\\<^sub>t\\<^sub>p (Send t) = fv t\"\n| \"fv\\<^sub>s\\<^sub>t\\<^sub>p (Receive t) = fv t\"\n| \"fv\\<^sub>s\\<^sub>t\\<^sub>p (Equality _ t t') = fv t \\<union> fv t'\"\n| \"fv\\<^sub>s\\<^sub>t\\<^sub>p (Inequality X F) = (\\<Union>(t,t') \\<in> set F. fv t \\<union> fv t') - set X\""], ["", "text \\<open>The set of free variables of a strand\\<close>"], ["", "definition fv\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> 'b set\" where\n  \"fv\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(set (map fv\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["", "text \\<open>The set of bound variables of a strand\\<close>"], ["", "definition bvars\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> 'b set\" where\n  \"bvars\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S))\""], ["", "text \\<open>The set of all variables occurring in a strand\\<close>"], ["", "definition vars\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> 'b set\" where\n  \"vars\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(set (map vars\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["", "abbreviation wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p::\"('a,'b) strand_step \\<Rightarrow> 'b set\" where\n  \"wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p x \\<equiv>\n    case x of Inequality _ _ \\<Rightarrow> {} | Equality Check _ _ \\<Rightarrow> {} | _ \\<Rightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["", "text \\<open>The variables of a strand whose occurrences might be restricted by well-formedness constraints\\<close>"], ["", "definition wfrestrictedvars\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> 'b set\" where\n  \"wfrestrictedvars\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(set (map wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["", "abbreviation wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p where\n  \"wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p x \\<equiv> case x of Send t \\<Rightarrow> fv t | Equality Assign s t \\<Rightarrow> fv s | _ \\<Rightarrow> {}\""], ["", "text \\<open>The variables of a strand that occur in sent messages or as variables in assignments\\<close>"], ["", "definition wfvarsoccs\\<^sub>s\\<^sub>t where\n  \"wfvarsoccs\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["", "text \\<open>The variables occurring at the right-hand side of assignment steps\\<close>"], ["", "fun assignment_rhs\\<^sub>s\\<^sub>t where\n  \"assignment_rhs\\<^sub>s\\<^sub>t [] = {}\"\n| \"assignment_rhs\\<^sub>s\\<^sub>t (Equality Assign t t'#S) = insert t' (assignment_rhs\\<^sub>s\\<^sub>t S)\"\n| \"assignment_rhs\\<^sub>s\\<^sub>t (x#S) = assignment_rhs\\<^sub>s\\<^sub>t S\""], ["", "text \\<open>The set function symbols occurring in a strand\\<close>"], ["", "definition funs\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> 'a set\" where\n  \"funs\\<^sub>s\\<^sub>t S \\<equiv> \\<Union>(set (map funs\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["", "fun subst_apply_strand_step::\"('a,'b) strand_step \\<Rightarrow> ('a,'b) subst \\<Rightarrow> ('a,'b) strand_step\"\n  (infix \"\\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\" 51) where\n  \"Send t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = Send (t \\<cdot> \\<theta>)\"\n| \"Receive t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = Receive (t \\<cdot> \\<theta>)\"\n| \"Equality a t t' \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = Equality a (t \\<cdot> \\<theta>) (t' \\<cdot> \\<theta>)\"\n| \"Inequality X F \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = Inequality X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s rm_vars (set X) \\<theta>)\""], ["", "text \\<open>Substitution application for strands\\<close>"], ["", "definition subst_apply_strand::\"('a,'b) strand \\<Rightarrow> ('a,'b) subst \\<Rightarrow> ('a,'b) strand\"\n  (infix \"\\<cdot>\\<^sub>s\\<^sub>t\" 51) where\n  \"S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> \\<equiv> map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) S\""], ["", "text \\<open>The semantics of inequality constraints\\<close>"], ["", "definition\n  \"ineq_model (\\<I>::('a,'b) subst) X F \\<equiv>\n      (\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>) \\<longrightarrow> \n              list_ex (\\<lambda>f. fst f \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>) \\<noteq> snd f \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>)) F)\""], ["", "fun simple\\<^sub>s\\<^sub>t\\<^sub>p where\n  \"simple\\<^sub>s\\<^sub>t\\<^sub>p (Receive t) = True\"\n| \"simple\\<^sub>s\\<^sub>t\\<^sub>p (Send (Var v)) = True\"\n| \"simple\\<^sub>s\\<^sub>t\\<^sub>p (Inequality X F) = (\\<exists>\\<I>. ineq_model \\<I> X F)\"\n| \"simple\\<^sub>s\\<^sub>t\\<^sub>p _ = False\""], ["", "text \\<open>Simple constraints\\<close>"], ["", "definition simple where \"simple S \\<equiv> list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S\""], ["", "text \\<open>The intruder knowledge of a constraint\\<close>"], ["", "fun ik\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> ('a,'b) terms\" where\n  \"ik\\<^sub>s\\<^sub>t [] = {}\"\n| \"ik\\<^sub>s\\<^sub>t (Receive t#S) = insert t (ik\\<^sub>s\\<^sub>t S)\"\n| \"ik\\<^sub>s\\<^sub>t (_#S) = ik\\<^sub>s\\<^sub>t S\""], ["", "text \\<open>Strand well-formedness\\<close>"], ["", "fun wf\\<^sub>s\\<^sub>t::\"'b set \\<Rightarrow> ('a,'b) strand \\<Rightarrow> bool\" where\n  \"wf\\<^sub>s\\<^sub>t V [] = True\"\n| \"wf\\<^sub>s\\<^sub>t V (Receive t#S) = (fv t \\<subseteq> V \\<and> wf\\<^sub>s\\<^sub>t V S)\"\n| \"wf\\<^sub>s\\<^sub>t V (Send t#S) = wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\"\n| \"wf\\<^sub>s\\<^sub>t V (Equality Assign s t#S) = (fv t \\<subseteq> V \\<and> wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S)\"\n| \"wf\\<^sub>s\\<^sub>t V (Equality Check s t#S) = wf\\<^sub>s\\<^sub>t V S\"\n| \"wf\\<^sub>s\\<^sub>t V (Inequality _ _#S) = wf\\<^sub>s\\<^sub>t V S\""], ["", "text \\<open>Well-formedness of constraint states\\<close>"], ["", "definition wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r::\"('a,'b) strand \\<Rightarrow> ('a,'b) subst \\<Rightarrow> bool\" where\n  \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta> \\<equiv> (wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and> wf\\<^sub>s\\<^sub>t {} S \\<and> subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} \\<and>\n                  range_vars \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {} \\<and> fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {})\""], ["", "declare trms\\<^sub>s\\<^sub>t_def[simp]"], ["", "declare fv\\<^sub>s\\<^sub>n\\<^sub>d_def[simp]"], ["", "declare fv\\<^sub>r\\<^sub>c\\<^sub>v_def[simp]"], ["", "declare fv\\<^sub>e\\<^sub>q_def[simp]"], ["", "declare fv_l\\<^sub>e\\<^sub>q_def[simp]"], ["", "declare fv_r\\<^sub>e\\<^sub>q_def[simp]"], ["", "declare fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q_def[simp]"], ["", "declare fv\\<^sub>s\\<^sub>t_def[simp]"], ["", "declare vars\\<^sub>s\\<^sub>t_def[simp]"], ["", "declare bvars\\<^sub>s\\<^sub>t_def[simp]"], ["", "declare wfrestrictedvars\\<^sub>s\\<^sub>t_def[simp]"], ["", "declare wfvarsoccs\\<^sub>s\\<^sub>t_def[simp]"], ["", "lemmas wf\\<^sub>s\\<^sub>t_induct = wf\\<^sub>s\\<^sub>t.induct[case_names Nil ConsRcv ConsSnd ConsEq ConsEq2 ConsIneq]"], ["", "lemmas ik\\<^sub>s\\<^sub>t_induct = ik\\<^sub>s\\<^sub>t.induct[case_names Nil ConsRcv ConsSnd ConsEq ConsIneq]"], ["", "lemmas assignment_rhs\\<^sub>s\\<^sub>t_induct = assignment_rhs\\<^sub>s\\<^sub>t.induct[case_names Nil ConsEq2 ConsSnd ConsRcv ConsEq ConsIneq]"], ["", "subsubsection \\<open>Lexicographical measure on strands\\<close>"], ["", "definition size\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> nat\" where\n  \"size\\<^sub>s\\<^sub>t S \\<equiv> size_list (\\<lambda>x. Max (insert 0 (size ` trms\\<^sub>s\\<^sub>t\\<^sub>p x))) S\""], ["", "definition measure\\<^sub>s\\<^sub>t::\"((('a, 'b) strand \\<times> ('a,'b) subst) \\<times> ('a, 'b) strand \\<times> ('a,'b) subst) set\"\nwhere\n  \"measure\\<^sub>s\\<^sub>t \\<equiv> measures [\\<lambda>(S,\\<theta>). card (fv\\<^sub>s\\<^sub>t S), \\<lambda>(S,\\<theta>). size\\<^sub>s\\<^sub>t S]\""], ["", "lemma measure\\<^sub>s\\<^sub>t_alt_def:\n  \"((s,x),(t,y)) \\<in> measure\\<^sub>s\\<^sub>t =\n      (card (fv\\<^sub>s\\<^sub>t s) < card (fv\\<^sub>s\\<^sub>t t) \\<or> (card (fv\\<^sub>s\\<^sub>t s) = card (fv\\<^sub>s\\<^sub>t t) \\<and> size\\<^sub>s\\<^sub>t s < size\\<^sub>s\\<^sub>t t))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (((s, x), t, y) \\<in> measure\\<^sub>s\\<^sub>t) =\n    (card (fv\\<^sub>s\\<^sub>t s) < card (fv\\<^sub>s\\<^sub>t t) \\<or>\n     card (fv\\<^sub>s\\<^sub>t s) = card (fv\\<^sub>s\\<^sub>t t) \\<and>\n     size\\<^sub>s\\<^sub>t s < size\\<^sub>s\\<^sub>t t)", "by (simp add: measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["", "lemma measure\\<^sub>s\\<^sub>t_trans: \"trans measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans measure\\<^sub>s\\<^sub>t", "by (simp add: trans_def measure\\<^sub>s\\<^sub>t_def size\\<^sub>s\\<^sub>t_def)"], ["", "subsubsection \\<open>Some lemmata\\<close>"], ["", "lemma trms_list\\<^sub>s\\<^sub>t_is_trms\\<^sub>s\\<^sub>t: \"trms\\<^sub>s\\<^sub>t S = set (trms_list\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t S = set (trms_list\\<^sub>s\\<^sub>t S)", "unfolding trms\\<^sub>s\\<^sub>t_def trms_list\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set S) =\n    set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p S)))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set []) =\n    set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p [])))\n 2. \\<And>a S.\n       \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set S) =\n       set (remdups\n             (concat\n               (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p S))) \\<Longrightarrow>\n       \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set (a # S)) =\n       set (remdups\n             (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p (a # S))))", "case (Cons x S)"], ["proof (state)\nthis:\n  \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set S) =\n  set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p S)))\n\ngoal (2 subgoals):\n 1. \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set []) =\n    set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p [])))\n 2. \\<And>a S.\n       \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set S) =\n       set (remdups\n             (concat\n               (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p S))) \\<Longrightarrow>\n       \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set (a # S)) =\n       set (remdups\n             (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p (a # S))))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set S) =\n  set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p S)))\n\ngoal (1 subgoal):\n 1. \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set (x # S)) =\n    set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p (x # S))))", "by (cases x) auto"], ["proof (state)\nthis:\n  \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set (x # S)) =\n  set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p (x # S))))\n\ngoal (1 subgoal):\n 1. \\<Union> (trms\\<^sub>s\\<^sub>t\\<^sub>p ` set []) =\n    set (remdups (concat (map trms_list\\<^sub>s\\<^sub>t\\<^sub>p [])))", "qed simp"], ["", "lemma subst_apply_strand_step_def:\n  \"s \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = (case s of\n    Send t \\<Rightarrow> Send (t \\<cdot> \\<theta>)\n  | Receive t \\<Rightarrow> Receive (t \\<cdot> \\<theta>)\n  | Equality a t t' \\<Rightarrow> Equality a (t \\<cdot> \\<theta>) (t' \\<cdot> \\<theta>)\n  | Inequality X F \\<Rightarrow> Inequality X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s rm_vars (set X) \\<theta>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> =\n    (case s of\n     send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<Rightarrow>\n       send\\<langle>t \\<cdot> \\<theta>\\<rangle>\\<^sub>s\\<^sub>t\n     | receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<Rightarrow>\n         receive\\<langle>t \\<cdot> \\<theta>\\<rangle>\\<^sub>s\\<^sub>t\n     | \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t \\<Rightarrow>\n         \\<langle>a: (t \\<cdot>\n                      \\<theta>) \\<doteq> t' \\<cdot>\n   \\<theta>\\<rangle>\\<^sub>s\\<^sub>t\n     | \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<Rightarrow>\n         \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\\<rangle>\\<^sub>s\\<^sub>t)", "by (cases s) simp_all"], ["", "lemma subst_apply_strand_nil[simp]: \"[] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> = []", "unfolding subst_apply_strand_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) [] = []", "by simp"], ["", "lemma finite_funs\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (funs\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (funs\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases x) auto"], ["", "lemma finite_funs\\<^sub>s\\<^sub>t[simp]: \"finite (funs\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (funs\\<^sub>s\\<^sub>t S)", "unfolding funs\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (\\<Union> (set (map funs\\<^sub>s\\<^sub>t\\<^sub>p S)))", "by simp"], ["", "lemma finite_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s[simp]: \"finite (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s x)", "by (induct x) auto"], ["", "lemma finite_trms\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (trms\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (trms\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases x) auto"], ["", "lemma finite_vars\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (vars\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (vars\\<^sub>s\\<^sub>t\\<^sub>p x)", "by auto"], ["", "lemma finite_bvars\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x))", "by rule"], ["", "lemma finite_fv\\<^sub>s\\<^sub>n\\<^sub>d[simp]: \"finite (fv\\<^sub>s\\<^sub>n\\<^sub>d x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (fv\\<^sub>s\\<^sub>n\\<^sub>d x)", "by (cases x) auto"], ["", "lemma finite_fv\\<^sub>r\\<^sub>c\\<^sub>v[simp]: \"finite (fv\\<^sub>r\\<^sub>c\\<^sub>v x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (fv\\<^sub>r\\<^sub>c\\<^sub>v x)", "by (cases x) auto"], ["", "lemma finite_fv\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (fv\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (fv\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases x) auto"], ["", "lemma finite_vars\\<^sub>s\\<^sub>t[simp]: \"finite (vars\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (vars\\<^sub>s\\<^sub>t S)", "by simp"], ["", "lemma finite_bvars\\<^sub>s\\<^sub>t[simp]: \"finite (bvars\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (bvars\\<^sub>s\\<^sub>t S)", "by simp"], ["", "lemma finite_fv\\<^sub>s\\<^sub>t[simp]: \"finite (fv\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (fv\\<^sub>s\\<^sub>t S)", "by simp"], ["", "lemma finite_wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases x) (auto split: poscheckvariant.splits)"], ["", "lemma finite_wfrestrictedvars\\<^sub>s\\<^sub>t[simp]: \"finite (wfrestrictedvars\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (wfrestrictedvars\\<^sub>s\\<^sub>t S)", "using finite_wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p"], ["proof (prove)\nusing this:\n  finite (wfrestrictedvars\\<^sub>s\\<^sub>t\\<^sub>p ?x)\n\ngoal (1 subgoal):\n 1. finite (wfrestrictedvars\\<^sub>s\\<^sub>t S)", "by auto"], ["", "lemma finite_wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p[simp]: \"finite (wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases x) (auto split: poscheckvariant.splits)"], ["", "lemma finite_wfvarsoccs\\<^sub>s\\<^sub>t[simp]: \"finite (wfvarsoccs\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (wfvarsoccs\\<^sub>s\\<^sub>t S)", "using finite_wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p"], ["proof (prove)\nusing this:\n  finite (wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p ?x)\n\ngoal (1 subgoal):\n 1. finite (wfvarsoccs\\<^sub>s\\<^sub>t S)", "by auto"], ["", "lemma finite_ik\\<^sub>s\\<^sub>t[simp]: \"finite (ik\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (ik\\<^sub>s\\<^sub>t S)", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) simp_all"], ["", "lemma finite_assignment_rhs\\<^sub>s\\<^sub>t[simp]: \"finite (assignment_rhs\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (assignment_rhs\\<^sub>s\\<^sub>t S)", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) simp_all"], ["", "lemma ik\\<^sub>s\\<^sub>t_is_rcv_set: \"ik\\<^sub>s\\<^sub>t A = {t. Receive t \\<in> set A}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t A =\n    {t. receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set A}", "by (induct A rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik\\<^sub>s\\<^sub>tD[dest]: \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> Receive t \\<in> set S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik\\<^sub>s\\<^sub>tD'[dest]: \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> t \\<in> trms\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<in> trms\\<^sub>s\\<^sub>t S", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik\\<^sub>s\\<^sub>tD''[dest]: \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) \\<Longrightarrow> t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n    ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t S", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik\\<^sub>s\\<^sub>t_subterm_exD:\n  assumes \"t \\<in> ik\\<^sub>s\\<^sub>t S\"\n  shows \"\\<exists>x \\<in> set S. t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>set S.\n       t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n       trms\\<^sub>s\\<^sub>t\\<^sub>p x", "using assms ik\\<^sub>s\\<^sub>tD"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n  ?t \\<in> ik\\<^sub>s\\<^sub>t ?S \\<Longrightarrow>\n  receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set ?S\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>set S.\n       t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n       trms\\<^sub>s\\<^sub>t\\<^sub>p x", "by force"], ["", "lemma assignment_rhs\\<^sub>s\\<^sub>tD[dest]: \"t \\<in> assignment_rhs\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>t'. Equality Assign t' t \\<in> set S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> assignment_rhs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>t'.\n       \\<langle>assign: t' \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma assignment_rhs\\<^sub>s\\<^sub>tD'[dest]: \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S) \\<Longrightarrow> t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n    assignment_rhs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t S", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma bvars\\<^sub>s\\<^sub>t_split: \"bvars\\<^sub>s\\<^sub>t (S@S') = bvars\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S') =\n    bvars\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S'", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (S @ S'))) =\n    \\<Union>\n     (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S'))", "by auto"], ["", "lemma bvars\\<^sub>s\\<^sub>t_singleton: \"bvars\\<^sub>s\\<^sub>t [x] = set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t [x] = set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) [x])) =\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "by auto"], ["", "lemma strand_fv_bvars_disjointD:\n  assumes \"fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"Inequality X F \\<in> set S\"\n  shows \"set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\" \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using assms"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\n\ngoal (1 subgoal):\n 1. set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by (induct S) fastforce+"], ["", "lemma strand_fv_bvars_disjoint_unfold:\n  assumes \"fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"Inequality X F \\<in> set S\" \"Inequality Y G \\<in> set S\"\n  shows \"set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) =\n    {}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) =\n    {}", "have \"set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\" \"set Y \\<subseteq> bvars\\<^sub>s\\<^sub>t S\"\n       \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set Y \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S &&&\n     set Y \\<subseteq> bvars\\<^sub>s\\<^sub>t S) &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set Y\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using strand_fv_bvars_disjointD[OF assms(1)] assms(2,3)"], ["proof (prove)\nusing this:\n  \\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set S \\<Longrightarrow>\n  set ?X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  \\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set S \\<Longrightarrow>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?F - set ?X\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\n  \\<forall>Y\\<langle>\\<or>\\<noteq>: G\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\n\ngoal (1 subgoal):\n 1. (set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S &&&\n     set Y \\<subseteq> bvars\\<^sub>s\\<^sub>t S) &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set Y\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  set Y \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set Y\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) =\n    {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  set Y \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set Y\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) =\n    {}", "using assms(1)"], ["proof (prove)\nusing this:\n  set X \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  set Y \\<subseteq> bvars\\<^sub>s\\<^sub>t S\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set Y\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n\ngoal (1 subgoal):\n 1. set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) =\n    {}", "by fastforce"], ["proof (state)\nthis:\n  set Y \\<inter> (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) = {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_subst_hom[iff]:\n  \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)@(S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\" \"(x#S) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)#(S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) @\n    (S' \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) &&&\n    x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n    (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) #\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "unfolding subst_apply_strand_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) (S @ S') =\n    map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) S @\n    map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) S' &&&\n    map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) (x # S) =\n    (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) #\n    map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) S", "by auto"], ["", "lemma strand_subst_comp: \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> = ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "case (Cons x S)"], ["proof (state)\nthis:\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n  {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "have *: \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"range_vars \\<delta> \\<inter> (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {} &&&\n    range_vars \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}", "using Cons bvars\\<^sub>s\\<^sub>t_split[of \"[x]\" S] append_Cons inf_sup_absorb"], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n  {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (x # S) = {}\n  bvars\\<^sub>s\\<^sub>t ([x] @ S) =\n  bvars\\<^sub>s\\<^sub>t [x] \\<union> bvars\\<^sub>s\\<^sub>t S\n  (?x # ?xs) @ ?ys = ?x # ?xs @ ?ys\n  inf ?x (sup ?x ?y) = ?x\n\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {} &&&\n    range_vars \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}", "by (metis (no_types, lifting) Int_iff Un_commute disjoint_iff_not_equal self_append_conv2,\n        metis append_self_conv2 bvars\\<^sub>s\\<^sub>t_singleton inf_bot_right inf_left_commute)"], ["proof (state)\nthis:\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n  range_vars \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "hence IH: \"S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\""], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n  range_vars \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>", "using Cons.IH"], ["proof (prove)\nusing this:\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n  range_vars \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n  range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n  {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>", "by auto"], ["proof (state)\nthis:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "have \"(x#S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) = (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>)#(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>)", "by (metis strand_subst_hom(2))"], ["proof (state)\nthis:\n  x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "hence \"... = (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>)#((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\nusing this:\n  x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n    (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "by (metis IH)"], ["proof (state)\nthis:\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "hence \"... = ((x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)#((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\nusing this:\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n     \\<theta>) =\n    ((x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "using rm_vars_comp[OF *(2)]"], ["proof (prove)\nusing this:\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  ?t \\<cdot>\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x))\n   (\\<delta> \\<circ>\\<^sub>s ?\\<theta>) =\n  ?t \\<cdot>\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)) \\<delta> \\<circ>\\<^sub>s\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)) ?\\<theta>\n\ngoal (1 subgoal):\n 1. (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n     \\<theta>) =\n    ((x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "proof (induction x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>(send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 2. \\<And>x.\n       \\<lbrakk>(receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 3. \\<And>x1a x2a x3.\n       \\<lbrakk>(\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 4. \\<And>x1a x2a.\n       \\<lbrakk>(\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)", "case (Inequality X F)"], ["proof (state)\nthis:\n  (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  ?t \\<cdot>\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   (\\<delta> \\<circ>\\<^sub>s ?\\<theta>) =\n  ?t \\<cdot>\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   \\<delta> \\<circ>\\<^sub>s\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   ?\\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>(send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 2. \\<And>x.\n       \\<lbrakk>(receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 3. \\<And>x1a x2a x3.\n       \\<lbrakk>(\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 4. \\<And>x1a x2a.\n       \\<lbrakk>(\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  ?t \\<cdot>\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   (\\<delta> \\<circ>\\<^sub>s ?\\<theta>) =\n  ?t \\<cdot>\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   \\<delta> \\<circ>\\<^sub>s\n  rm_vars\n   (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t))\n   ?\\<theta>\n\ngoal (1 subgoal):\n 1. (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n     \\<theta>) =\n    ((\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<theta>) #\n    ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "by (induct F) (auto simp add: subst_apply_pairs_def subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  ((\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>(send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 2. \\<And>x.\n       \\<lbrakk>(receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t)))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)\n 3. \\<And>x1a x2a x3.\n       \\<lbrakk>(\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                (S \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) =\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                ((S \\<cdot>\\<^sub>s\\<^sub>t\n                  \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                 \\<theta>);\n        \\<And>t \\<theta>.\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n           t \\<cdot>\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<delta> \\<circ>\\<^sub>s\n           rm_vars\n            (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p\n                   \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t))\n            \\<theta>\\<rbrakk>\n       \\<Longrightarrow> (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>) =\n                         ((\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                          \\<theta>) #\n                         ((S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<theta>)", "qed (simp_all add: subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  ((x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n 2. \\<And>a S.\n       \\<lbrakk>range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                \\<theta>;\n        range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<delta> \\<circ>\\<^sub>s \\<theta> =\n                         (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n                         \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  ((x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta>", "using IH"], ["proof (prove)\nusing this:\n  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> \\<circ>\\<^sub>s \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  ((x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<theta>) #\n  ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (1 subgoal):\n 1. x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta>", "by auto"], ["proof (state)\nthis:\n  x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>\n\ngoal (1 subgoal):\n 1. range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n    ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>", "qed (simp add: subst_apply_strand_def)"], ["", "lemma strand_substI[intro]:\n  \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\"\n  \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n     {} \\<Longrightarrow>\n     S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S) &&&\n    (subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n     {} \\<Longrightarrow>\n     S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n 2. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S", "show \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "case (Cons x S)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n  {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "hence \"S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n  {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S", "by auto"], ["proof (state)\nthis:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "moreover"], ["proof (state)\nthis:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "have \"vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}", "using Cons.prems"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "hence \"x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x\""], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}\n\ngoal (1 subgoal):\n 1. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x", "proof (induction x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 2. \\<And>x.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 3. \\<And>x1a x2a x3.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t\n 4. \\<And>x1a x2a.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t", "case (Inequality X F)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n  subst_domain \\<theta> =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 2. \\<And>x.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 3. \\<And>x1a x2a x3.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t\n 4. \\<And>x1a x2a.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t", "thus ?case"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n  subst_domain \\<theta> =\n  {}\n\ngoal (1 subgoal):\n 1. \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<theta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t", "by (induct F) (force simp add: subst_apply_pairs_def)+"], ["proof (state)\nthis:\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n  \\<theta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 2. \\<And>x.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 3. \\<And>x1a x2a x3.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t", "qed auto"], ["proof (state)\nthis:\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "ultimately"], ["proof (chain)\npicking this:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x", "show ?case"], ["proof (prove)\nusing this:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x\n\ngoal (1 subgoal):\n 1. x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = x # S", "by simp"], ["proof (state)\nthis:\n  x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = x # S\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []", "qed (simp add: subst_apply_strand_def)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n  {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S", "show \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "case (Cons x S)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "hence \"S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S", "by auto"], ["proof (state)\nthis:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "moreover"], ["proof (state)\nthis:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "have \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}", "using Cons.prems"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (x # S) = {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "hence \"x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<inter> subst_domain \\<theta> = {}\n\ngoal (1 subgoal):\n 1. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x", "proof (induction x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 2. \\<And>x.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 3. \\<And>x1a x2a x3.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t\n 4. \\<And>x1a x2a.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t", "case (Inequality X F)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n  subst_domain \\<theta> =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 2. \\<And>x.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 3. \\<And>x1a x2a x3.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t\n 4. \\<And>x1a x2a.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n  subst_domain \\<theta> =\n  {}\n\ngoal (1 subgoal):\n 1. \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<theta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t", "by (induct F) (force simp add: subst_apply_pairs_def)+"], ["proof (state)\nthis:\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n  \\<theta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 2. \\<And>x.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t\n 3. \\<And>x1a x2a x3.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p\n        \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<inter>\n       subst_domain \\<theta> =\n       {} \\<Longrightarrow>\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n       \\<theta> =\n       \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t", "qed auto"], ["proof (state)\nthis:\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []\n 2. \\<And>a S.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S =\n                {} \\<Longrightarrow>\n                S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S;\n        subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t (a # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = a # S", "ultimately"], ["proof (chain)\npicking this:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x", "show ?case"], ["proof (prove)\nusing this:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta> = x\n\ngoal (1 subgoal):\n 1. x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = x # S", "by simp"], ["proof (state)\nthis:\n  x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = x # S\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    [] \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = []", "qed (simp add: subst_apply_strand_def)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow>\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_substI':\n  \"fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\"\n  \"vars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow> S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (fv\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow>\n     S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S) &&&\n    (vars\\<^sub>s\\<^sub>t S = {} \\<Longrightarrow>\n     S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S)", "by (metis inf_bot_right strand_substI(1),\n    metis inf_bot_right strand_substI(2))"], ["", "lemma strand_subst_set: \"(set (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)) = ((\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) ` (set S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) ` set S", "by (auto simp add: subst_apply_strand_def)"], ["", "lemma strand_map_inv_set_snd_rcv_subst:\n  assumes \"finite (M::('a,'b) terms)\"\n  shows \"set ((map Send (inv set M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\" (is ?A)\n        \"set ((map Receive (inv set M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\" (is ?B)"], ["proof (prove)\ngoal (1 subgoal):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>) &&&\n    set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "fix f::\"('a,'b) term \\<Rightarrow> ('a,'b) strand_step\""], ["proof (state)\ngoal (2 subgoals):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "assume f: \"f = Send \\<or> f = Receive\""], ["proof (state)\nthis:\n  f = Send \\<or> f = Receive\n\ngoal (2 subgoals):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "from assms"], ["proof (chain)\npicking this:\n  finite M", "have \"set ((map f (inv set M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = f ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\""], ["proof (prove)\nusing this:\n  finite M\n\ngoal (1 subgoal):\n 1. set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "proof (induction rule: finite_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. set (map f (inv set {}) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` ({} \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        set (map f (inv set F) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n        f ` (F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> set (map f\n                               (inv set\n                                 (insert x F)) \\<cdot>\\<^sub>s\\<^sub>t\n                              \\<theta>) =\n                         f `\n                         (insert x F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                          \\<theta>)", "case empty"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. set (map f (inv set {}) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` ({} \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        set (map f (inv set F) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n        f ` (F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> set (map f\n                               (inv set\n                                 (insert x F)) \\<cdot>\\<^sub>s\\<^sub>t\n                              \\<theta>) =\n                         f `\n                         (insert x F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                          \\<theta>)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. set (map f (inv set {}) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` ({} \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "unfolding inv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. set (map f (SOME x. set x = {}) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` ({} \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "by auto"], ["proof (state)\nthis:\n  set (map f (inv set {}) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  f ` ({} \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        set (map f (inv set F) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n        f ` (F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> set (map f\n                               (inv set\n                                 (insert x F)) \\<cdot>\\<^sub>s\\<^sub>t\n                              \\<theta>) =\n                         f `\n                         (insert x F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                          \\<theta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        set (map f (inv set F) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n        f ` (F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> set (map f\n                               (inv set\n                                 (insert x F)) \\<cdot>\\<^sub>s\\<^sub>t\n                              \\<theta>) =\n                         f `\n                         (insert x F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                          \\<theta>)", "case (insert m M)"], ["proof (state)\nthis:\n  finite M\n  m \\<notin> M\n  set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  f ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        set (map f (inv set F) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n        f ` (F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> set (map f\n                               (inv set\n                                 (insert x F)) \\<cdot>\\<^sub>s\\<^sub>t\n                              \\<theta>) =\n                         f `\n                         (insert x F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                          \\<theta>)", "have \"set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n            insert (f m \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) (set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    insert (f m \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n     (set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>))", "by (simp add: insert.hyps(1) inv_set_fset subst_apply_strand_def)"], ["proof (state)\nthis:\n  set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  insert (f m \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n   (set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>))\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        set (map f (inv set F) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n        f ` (F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> set (map f\n                               (inv set\n                                 (insert x F)) \\<cdot>\\<^sub>s\\<^sub>t\n                              \\<theta>) =\n                         f `\n                         (insert x F \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                          \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  insert (f m \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n   (set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>))\n\ngoal (1 subgoal):\n 1. set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` (insert m M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "using f insert.IH"], ["proof (prove)\nusing this:\n  set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  insert (f m \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n   (set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>))\n  f = Send \\<or> f = Receive\n  set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  f ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    f ` (insert m M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "by auto"], ["proof (state)\nthis:\n  set (map f (inv set (insert m M)) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  f ` (insert m M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  set (map f (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  f ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "}"], ["proof (state)\nthis:\n  ?f2 = Send \\<or> ?f2 = Receive \\<Longrightarrow>\n  set (map ?f2 (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  ?f2 ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n 2. set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "thus \"?A\" \"?B\""], ["proof (prove)\nusing this:\n  ?f2 = Send \\<or> ?f2 = Receive \\<Longrightarrow>\n  set (map ?f2 (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  ?f2 ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>) &&&\n    set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "by auto"], ["proof (state)\nthis:\n  set (map Send (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  Send ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n  set (map Receive (inv set M) \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  Receive ` (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_ground_subst_vars_subset:\n  assumes \"ground (subst_range \\<theta>)\" shows \"vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) \\<subseteq> vars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S)", "case (Cons x S)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S)", "have \"vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "using ground_subst_fv_subset[OF assms]"], ["proof (prove)\nusing this:\n  fv (?t \\<cdot> \\<theta>) \\<subseteq> fv ?t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "let ?\\<theta> = \"rm_vars (set X) \\<theta>\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "have \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?\\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F", "proof (induction F)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s []\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    F \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F)", "case (Cons f F)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s []\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    F \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F)", "obtain t t' where f: \"f = (t,t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t t'. f = (t, t') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis surj_pair)"], ["proof (state)\nthis:\n  f = (t, t')\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s []\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    F \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F)", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f#F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?\\<theta>) = fv (t \\<cdot> ?\\<theta>) \\<union> fv (t' \\<cdot> ?\\<theta>) \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?\\<theta>)\"\n            \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f#F) = fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\""], ["proof (prove)\nusing this:\n  f = (t, t')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>) =\n    fv (t \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n    fv (t' \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>) &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) =\n    fv t \\<union> fv t' \\<union>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>) =\n  fv (t \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n  fv (t' \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s []\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    F \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<theta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F)", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>) =\n  fv (t \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n  fv (t' \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F)", "using ground_subst_fv_subset[OF ground_subset[OF rm_vars_img_subset assms, of \"set X\"]]\n              Cons.IH"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>) =\n  fv (t \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n  fv (t' \\<cdot> rm_vars (set X) \\<theta>) \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  fv (?t \\<cdot> rm_vars (set X) \\<theta>) \\<subseteq> fv ?t\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F)", "by (metis (no_types, lifting) Un_mono)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s []", "qed (simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "moreover"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "have\n        \"vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s rm_vars (set X) \\<theta>) \\<union> set X\"\n        \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>) \\<union>\n    set X &&&\n    vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X", "using Inequality"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<theta>) \\<union>\n    set X &&&\n    vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>) \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "ultimately"], ["proof (chain)\npicking this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>) \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X", "show ?thesis"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<theta>) \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. fv (t \\<cdot> \\<theta>) \\<subseteq> fv t;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "qed auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S)", "thus ?case"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (x # S)", "using Cons.IH"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n  vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (x # S)", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t []", "qed (simp add: subst_apply_strand_def)"], ["", "lemma ik_union_subset: \"\\<Union>(P ` ik\\<^sub>s\\<^sub>t S) \\<subseteq> (\\<Union>x \\<in> (set S). \\<Union>(P ` trms\\<^sub>s\\<^sub>t\\<^sub>p x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (P ` ik\\<^sub>s\\<^sub>t S)\n    \\<subseteq> (\\<Union>x\\<in>set S.\n                    \\<Union> (P ` trms\\<^sub>s\\<^sub>t\\<^sub>p x))", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik_snd_empty[simp]: \"ik\\<^sub>s\\<^sub>t (map Send X) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t (map Send X) = {}", "by (induct \"map Send X\" arbitrary: X rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik_snd_empty'[simp]: \"ik\\<^sub>s\\<^sub>t [Send t] = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] = {}", "by simp"], ["", "lemma ik_append[iff]: \"ik\\<^sub>s\\<^sub>t (S@S') = ik\\<^sub>s\\<^sub>t S \\<union> ik\\<^sub>s\\<^sub>t S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t (S @ S') =\n    ik\\<^sub>s\\<^sub>t S \\<union> ik\\<^sub>s\\<^sub>t S'", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik_cons: \"ik\\<^sub>s\\<^sub>t (x#S) = ik\\<^sub>s\\<^sub>t [x] \\<union> ik\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t (x # S) =\n    ik\\<^sub>s\\<^sub>t [x] \\<union> ik\\<^sub>s\\<^sub>t S", "using ik_append[of \"[x]\" S]"], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t ([x] @ S) =\n  ik\\<^sub>s\\<^sub>t [x] \\<union> ik\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t (x # S) =\n    ik\\<^sub>s\\<^sub>t [x] \\<union> ik\\<^sub>s\\<^sub>t S", "by simp"], ["", "lemma assignment_rhs_append[iff]: \"assignment_rhs\\<^sub>s\\<^sub>t (S@S') = assignment_rhs\\<^sub>s\\<^sub>t S \\<union> assignment_rhs\\<^sub>s\\<^sub>t S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. assignment_rhs\\<^sub>s\\<^sub>t (S @ S') =\n    assignment_rhs\\<^sub>s\\<^sub>t S \\<union>\n    assignment_rhs\\<^sub>s\\<^sub>t S'", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma eqs_rcv_map_empty: \"assignment_rhs\\<^sub>s\\<^sub>t (map Receive M) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. assignment_rhs\\<^sub>s\\<^sub>t (map Receive M) = {}", "by auto"], ["", "lemma ik_rcv_map: assumes \"t \\<in> set L\" shows \"t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "fix L L'"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "have \"t \\<in> ik\\<^sub>s\\<^sub>t [Receive t]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]", "by auto"], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "hence \"t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L@Receive t#map Receive L')\""], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t\n             (map Receive L @\n              receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # map Receive L')", "using ik_append"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\n  ik\\<^sub>s\\<^sub>t (?S @ ?S') =\n  ik\\<^sub>s\\<^sub>t ?S \\<union> ik\\<^sub>s\\<^sub>t ?S'\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t\n             (map Receive L @\n              receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # map Receive L')", "by auto"], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t\n           (map Receive L @\n            receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # map Receive L')\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "hence \"t \\<in> ik\\<^sub>s\\<^sub>t (map Receive (L@t#L'))\""], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t\n           (map Receive L @\n            receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # map Receive L')\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive (L @ t # L'))", "by auto"], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t (map Receive (L @ t # L'))\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "}"], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t (map Receive (?La2 @ t # ?L'2))\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t (map Receive (?La2 @ t # ?L'2))\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "using assms split_list_last"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t (map Receive (?La2 @ t # ?L'2))\n  t \\<in> set L\n  ?x \\<in> set ?xs \\<Longrightarrow>\n  \\<exists>ys zs. ?xs = ys @ ?x # zs \\<and> ?x \\<notin> set zs\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)", "by force"], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ik_subst: \"ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>", "by (induct rule: ik\\<^sub>s\\<^sub>t_induct) auto"], ["", "lemma ik_rcv_map': assumes \"t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)\" shows \"t \\<in> set L\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> set L", "using assms"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t (map Receive L)\n\ngoal (1 subgoal):\n 1. t \\<in> set L", "by force"], ["", "lemma ik_append_subset[simp]: \"ik\\<^sub>s\\<^sub>t S \\<subseteq> ik\\<^sub>s\\<^sub>t (S@S')\" \"ik\\<^sub>s\\<^sub>t S' \\<subseteq> ik\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<subseteq> ik\\<^sub>s\\<^sub>t (S @ S') &&&\n    ik\\<^sub>s\\<^sub>t S' \\<subseteq> ik\\<^sub>s\\<^sub>t (S @ S')", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma assignment_rhs_append_subset[simp]:\n  \"assignment_rhs\\<^sub>s\\<^sub>t S \\<subseteq> assignment_rhs\\<^sub>s\\<^sub>t (S@S')\"\n  \"assignment_rhs\\<^sub>s\\<^sub>t S' \\<subseteq> assignment_rhs\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. assignment_rhs\\<^sub>s\\<^sub>t S\n    \\<subseteq> assignment_rhs\\<^sub>s\\<^sub>t (S @ S') &&&\n    assignment_rhs\\<^sub>s\\<^sub>t S'\n    \\<subseteq> assignment_rhs\\<^sub>s\\<^sub>t (S @ S')", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma trms\\<^sub>s\\<^sub>t_cons: \"trms\\<^sub>s\\<^sub>t (x#S) = trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> trms\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (x # S) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> trms\\<^sub>s\\<^sub>t S", "by simp"], ["", "lemma trm_strand_subst_cong:\n  \"t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow> t \\<cdot> \\<delta> \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<or> (\\<exists>X F. Inequality X F \\<in> set S \\<and> t \\<cdot> rm_vars (set X) \\<delta> \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\"\n    (is \"t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow> ?P t \\<delta> S\")\n  \"t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow> (\\<exists>t'. t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S)\n    \\<or> (\\<exists>X F. Inequality X F \\<in> set S \\<and> (\\<exists>t' \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F. t = t' \\<cdot> rm_vars (set X) \\<delta>))\"\n    (is \"t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow> ?Q t \\<delta> S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n     t \\<cdot> \\<delta>\n     \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n     (\\<exists>X F.\n         \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n         \\<in> set S \\<and>\n         t \\<cdot> rm_vars (set X) \\<delta>\n         \\<in> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) &&&\n    (t \\<in> trms\\<^sub>s\\<^sub>t\n              (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n     (\\<exists>t'.\n         t = t' \\<cdot> \\<delta> \\<and>\n         t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n     (\\<exists>X F.\n         \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n         \\<in> set S \\<and>\n         (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n             t = t' \\<cdot> rm_vars (set X) \\<delta>)))", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. t \\<in> trms\\<^sub>s\\<^sub>t\n             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "show \"t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow> ?P t \\<delta> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set [] \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>a S.\n       \\<lbrakk>t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                t \\<cdot> \\<delta>\n                \\<in> trms\\<^sub>s\\<^sub>t\n                       (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n                (\\<exists>X F.\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S \\<and>\n                    t \\<cdot> rm_vars (set X) \\<delta>\n                    \\<in> trms\\<^sub>s\\<^sub>t\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>));\n        t \\<in> trms\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<cdot> \\<delta>\n                         \\<in> trms\\<^sub>s\\<^sub>t\n                                (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                 \\<delta>) \\<or>\n                         (\\<exists>X F.\n                             \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                             \\<in> set (a # S) \\<and>\n                             t \\<cdot> rm_vars (set X) \\<delta>\n                             \\<in> trms\\<^sub>s\\<^sub>t\n                                    (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))", "case (Cons x S)"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  t \\<in> trms\\<^sub>s\\<^sub>t (x # S)\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set [] \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. \\<And>a S.\n       \\<lbrakk>t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                t \\<cdot> \\<delta>\n                \\<in> trms\\<^sub>s\\<^sub>t\n                       (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n                (\\<exists>X F.\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S \\<and>\n                    t \\<cdot> rm_vars (set X) \\<delta>\n                    \\<in> trms\\<^sub>s\\<^sub>t\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>));\n        t \\<in> trms\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<cdot> \\<delta>\n                         \\<in> trms\\<^sub>s\\<^sub>t\n                                (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                 \\<delta>) \\<or>\n                         (\\<exists>X F.\n                             \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                             \\<in> set (a # S) \\<and>\n                             t \\<cdot> rm_vars (set X) \\<delta>\n                             \\<in> trms\\<^sub>s\\<^sub>t\n                                    (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "proof (cases \"t \\<in> trms\\<^sub>s\\<^sub>t S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "case True"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"?P t \\<delta> S\""], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "using Cons"], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t S\n  t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  t \\<in> trms\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "by simp"], ["proof (state)\nthis:\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n 2. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "by (cases x)\n           (metis (no_types, lifting) Un_iff list.set_intros(2) strand_subst_hom(2) trms\\<^sub>s\\<^sub>t_cons)+"], ["proof (state)\nthis:\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (x # S) \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "case False"], ["proof (state)\nthis:\n  t \\<notin> trms\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "hence \"t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\nusing this:\n  t \\<notin> trms\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p x", "using Cons.prems"], ["proof (prove)\nusing this:\n  t \\<notin> trms\\<^sub>s\\<^sub>t S\n  t \\<in> trms\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p x", "by auto"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "proof (induction x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 4. \\<And>x1a x2a.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))", "case (Inequality X F)"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 4. \\<And>x1a x2a.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))", "hence \"t \\<cdot> rm_vars (set X) \\<delta> \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p (Inequality X F \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. t \\<cdot> rm_vars (set X) \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n            \\<delta>)", "by (induct F) (auto simp add: subst_apply_pairs_def subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  t \\<cdot> rm_vars (set X) \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 4. \\<And>x1a x2a.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<cdot> rm_vars (set X) \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n          \\<delta>)\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t\n           (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n            S \\<cdot>\\<^sub>s\\<^sub>t\n            \\<delta>) \\<or>\n    (\\<exists>Xa Fa.\n        \\<forall>Xa\\<langle>\\<or>\\<noteq>: Fa\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                   S) \\<and>\n        t \\<cdot> rm_vars (set Xa) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t\n               (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>))", "by fastforce"], ["proof (state)\nthis:\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S \\<cdot>\\<^sub>s\\<^sub>t\n          \\<delta>) \\<or>\n  (\\<exists>Xa Fa.\n      \\<forall>Xa\\<langle>\\<or>\\<noteq>: Fa\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S) \\<and>\n      t \\<cdot> rm_vars (set Xa) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t\n             (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>))\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t) \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                \\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       t \\<cdot> \\<delta>\n       \\<in> trms\\<^sub>s\\<^sub>t\n              (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n               S \\<cdot>\\<^sub>s\\<^sub>t\n               \\<delta>) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           t \\<cdot> rm_vars (set X) \\<delta>\n           \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                   S \\<cdot>\\<^sub>s\\<^sub>t\n                   \\<delta>))", "qed (auto simp add: subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (x # S) \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (x # S) \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    t \\<cdot> \\<delta>\n    \\<in> trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set [] \\<and>\n        t \\<cdot> rm_vars (set X) \\<delta>\n        \\<in> trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "qed simp"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  t \\<cdot> \\<delta>\n  \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      t \\<cdot> rm_vars (set X) \\<delta>\n      \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "show \"t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow> ?Q t \\<delta> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t []) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set [] \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. \\<And>a S.\n       \\<lbrakk>t \\<in> trms\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<Longrightarrow>\n                (\\<exists>t'.\n                    t = t' \\<cdot> \\<delta> \\<and>\n                    t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n                (\\<exists>X F.\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S \\<and>\n                    (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\nF.\n                        t = t' \\<cdot> rm_vars (set X) \\<delta>));\n        t \\<in> trms\\<^sub>s\\<^sub>t\n                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>t'.\n                             t = t' \\<cdot> \\<delta> \\<and>\n                             t' \\<in> trms\\<^sub>s\\<^sub>t (a # S)) \\<or>\n                         (\\<exists>X F.\n                             \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                             \\<in> set (a # S) \\<and>\n                             (\\<exists>t'\n \\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n                                 t = t' \\<cdot> rm_vars (set X) \\<delta>))", "case (Cons x S)"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\n           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n  t \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t []) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set [] \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. \\<And>a S.\n       \\<lbrakk>t \\<in> trms\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t\n                          \\<delta>) \\<Longrightarrow>\n                (\\<exists>t'.\n                    t = t' \\<cdot> \\<delta> \\<and>\n                    t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n                (\\<exists>X F.\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S \\<and>\n                    (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\nF.\n                        t = t' \\<cdot> rm_vars (set X) \\<delta>));\n        t \\<in> trms\\<^sub>s\\<^sub>t\n                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>t'.\n                             t = t' \\<cdot> \\<delta> \\<and>\n                             t' \\<in> trms\\<^sub>s\\<^sub>t (a # S)) \\<or>\n                         (\\<exists>X F.\n                             \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n                             \\<in> set (a # S) \\<and>\n                             (\\<exists>t'\n \\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n                                 t = t' \\<cdot> rm_vars (set X) \\<delta>))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "proof (cases \"t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "case True"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "hence \"?Q t \\<delta> S\""], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "using Cons"], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  t \\<in> trms\\<^sub>s\\<^sub>t\n           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n  t \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set S \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "by simp"], ["proof (state)\nthis:\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n\ngoal (1 subgoal):\n 1. (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "by (cases x) force+"], ["proof (state)\nthis:\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and>\n      t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (x # S) \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "case False"], ["proof (state)\nthis:\n  t \\<notin> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "hence \"t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\nusing this:\n  t \\<notin> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n             (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using Cons.prems"], ["proof (prove)\nusing this:\n  t \\<notin> trms\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  t \\<in> trms\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n             (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. t \\<notin> trms\\<^sub>s\\<^sub>t\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (x # S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "proof (induction x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 4. \\<And>x1a x2a.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))", "case (Inequality X F)"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n            \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 4. \\<And>x1a x2a.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))", "hence \"t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p (Inequality X F) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t rm_vars (set X) \\<delta>\""], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n            \\<delta>)\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n             \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            rm_vars (set X) \\<delta>", "by (induct F) (force simp add: subst_apply_pairs_def)+"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n          rm_vars (set X) \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 4. \\<And>x1a x2a.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n          rm_vars (set X) \\<delta>\n\ngoal (1 subgoal):\n 1. (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t\n                  (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                   S)) \\<or>\n    (\\<exists>Xa Fa.\n        \\<forall>Xa\\<langle>\\<or>\\<noteq>: Fa\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                   S) \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s Fa.\n            t = t' \\<cdot> rm_vars (set Xa) \\<delta>))", "by fastforce"], ["proof (state)\nthis:\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and>\n      t' \\<in> trms\\<^sub>s\\<^sub>t\n                (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S)) \\<or>\n  (\\<exists>Xa Fa.\n      \\<forall>Xa\\<langle>\\<or>\\<noteq>: Fa\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S) \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s Fa.\n          t = t' \\<cdot> rm_vars (set Xa) \\<delta>))\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 2. \\<And>x.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))\n 3. \\<And>x1a x2a x3.\n       t \\<in> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>) \\<Longrightarrow>\n       (\\<exists>t'.\n           t = t' \\<cdot> \\<delta> \\<and>\n           t' \\<in> trms\\<^sub>s\\<^sub>t\n                     (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S)) \\<or>\n       (\\<exists>X F.\n           \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n           \\<in> set (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<and>\n           (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n               t = t' \\<cdot> rm_vars (set X) \\<delta>))", "qed (auto simp add: subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and>\n      t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (x # S) \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and>\n      t' \\<in> trms\\<^sub>s\\<^sub>t (x # S)) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set (x # S) \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>s\\<^sub>t\n             ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n    (\\<exists>t'.\n        t = t' \\<cdot> \\<delta> \\<and>\n        t' \\<in> trms\\<^sub>s\\<^sub>t []) \\<or>\n    (\\<exists>X F.\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set [] \\<and>\n        (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n            t = t' \\<cdot> rm_vars (set X) \\<delta>))", "qed simp"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>s\\<^sub>t\n           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow>\n  (\\<exists>t'.\n      t = t' \\<cdot> \\<delta> \\<and> t' \\<in> trms\\<^sub>s\\<^sub>t S) \\<or>\n  (\\<exists>X F.\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n      \\<in> set S \\<and>\n      (\\<exists>t'\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n          t = t' \\<cdot> rm_vars (set X) \\<delta>))\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Lemmata: Free Variables of Strands\\<close>"], ["", "lemma fv_trm_snd_rcv[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p (Send t)) = fv t\" \"fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p (Receive t)) = fv t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (trms\\<^sub>s\\<^sub>t\\<^sub>p\n       (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t)) =\n    fv t &&&\n    fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (trms\\<^sub>s\\<^sub>t\\<^sub>p\n       (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t)) =\n    fv t", "by simp_all"], ["", "lemma in_strand_fv_subset: \"x \\<in> set S \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> vars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> set S \\<Longrightarrow>\n    vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> vars\\<^sub>s\\<^sub>t S", "by fastforce"], ["", "lemma in_strand_fv_subset_snd: \"Send t \\<in> set S \\<Longrightarrow> fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))", "by auto"], ["", "lemma in_strand_fv_subset_rcv: \"Receive t \\<in> set S \\<Longrightarrow> fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "by auto"], ["", "lemma fv\\<^sub>s\\<^sub>n\\<^sub>dE:\n  assumes \"v \\<in> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\"\n  obtains t where \"send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\" \"v \\<in> fv t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         v \\<in> fv t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         v \\<in> fv t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"\\<exists>t. send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and> v \\<in> fv t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t.\n       send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and>\n       v \\<in> fv t", "by (metis (no_types, lifting) assms UN_E empty_iff set_map strand_step.case_eq_if\n              fv\\<^sub>s\\<^sub>n\\<^sub>d_def strand_step.collapse(1))"], ["proof (state)\nthis:\n  \\<exists>t.\n     send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and> v \\<in> fv t\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         v \\<in> fv t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>t.\n     send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and> v \\<in> fv t\n\ngoal (1 subgoal):\n 1. thesis", "by (metis that)"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fv\\<^sub>r\\<^sub>c\\<^sub>vE:\n  assumes \"v \\<in> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\"\n  obtains t where \"receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\" \"v \\<in> fv t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         v \\<in> fv t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         v \\<in> fv t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"\\<exists>t. receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and> v \\<in> fv t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>t.\n       receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and>\n       v \\<in> fv t", "by (metis (no_types, lifting) assms UN_E empty_iff set_map strand_step.case_eq_if\n              fv\\<^sub>r\\<^sub>c\\<^sub>v_def strand_step.collapse(2))"], ["proof (state)\nthis:\n  \\<exists>t.\n     receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and>\n     v \\<in> fv t\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         v \\<in> fv t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>t.\n     receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and>\n     v \\<in> fv t\n\ngoal (1 subgoal):\n 1. thesis", "by (metis that)"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vars\\<^sub>s\\<^sub>t\\<^sub>pI[intro]: \"x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p s \\<Longrightarrow> x \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p s \\<Longrightarrow>\n    x \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p s", "by (induct s rule: fv\\<^sub>s\\<^sub>t\\<^sub>p.induct) auto"], ["", "lemma vars\\<^sub>s\\<^sub>tI[intro]: \"x \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow> x \\<in> vars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    x \\<in> vars\\<^sub>s\\<^sub>t S", "using vars\\<^sub>s\\<^sub>t\\<^sub>pI"], ["proof (prove)\nusing this:\n  ?x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<Longrightarrow>\n  ?x \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p ?s\n\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    x \\<in> vars\\<^sub>s\\<^sub>t S", "by fastforce"], ["", "lemma fv\\<^sub>s\\<^sub>t_subset_vars\\<^sub>s\\<^sub>t[simp]: \"fv\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S", "using vars\\<^sub>s\\<^sub>tI"], ["proof (prove)\nusing this:\n  ?x \\<in> fv\\<^sub>s\\<^sub>t ?S \\<Longrightarrow>\n  ?x \\<in> vars\\<^sub>s\\<^sub>t ?S\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S", "by force"], ["", "lemma vars\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>t_bvars\\<^sub>s\\<^sub>t: \"vars\\<^sub>s\\<^sub>t S = fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t S =\n    fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    fv\\<^sub>s\\<^sub>t [] \\<union> bvars\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S) =\n       fv\\<^sub>s\\<^sub>t (a # S) \\<union> bvars\\<^sub>s\\<^sub>t (a # S)", "case (Cons x S)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t S =\n  fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    fv\\<^sub>s\\<^sub>t [] \\<union> bvars\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S) =\n       fv\\<^sub>s\\<^sub>t (a # S) \\<union> bvars\\<^sub>s\\<^sub>t (a # S)", "thus ?case"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t S =\n  fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (x # S) =\n    fv\\<^sub>s\\<^sub>t (x # S) \\<union> bvars\\<^sub>s\\<^sub>t (x # S)", "proof (induction x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n       bvars\\<^sub>s\\<^sub>t (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)\n 2. \\<And>x.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)\n 3. \\<And>x1a x2a x3.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n         S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t # S)\n 4. \\<And>x1a x2a.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n         S) =\n       fv\\<^sub>s\\<^sub>t\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n         S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n         S)", "case (Inequality X F)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t S =\n  fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n       bvars\\<^sub>s\\<^sub>t (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)\n 2. \\<And>x.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)\n 3. \\<And>x1a x2a x3.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n         S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t # S)\n 4. \\<And>x1a x2a.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n         S) =\n       fv\\<^sub>s\\<^sub>t\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n         S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (\\<forall>x1a\\<langle>\\<or>\\<noteq>: x2a\\<rangle>\\<^sub>s\\<^sub>t #\n         S)", "thus ?case"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t S =\n  fv\\<^sub>s\\<^sub>t S \\<union> bvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    fv\\<^sub>s\\<^sub>t\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n      S) \\<union>\n    bvars\\<^sub>s\\<^sub>t\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S)", "by (induct F) auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n    S) \\<union>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n       bvars\\<^sub>s\\<^sub>t (send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)\n 2. \\<And>x.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t # S)\n 3. \\<And>x1a x2a x3.\n       vars\\<^sub>s\\<^sub>t S =\n       fv\\<^sub>s\\<^sub>t S \\<union>\n       bvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t # S) =\n       fv\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t #\n         S) \\<union>\n       bvars\\<^sub>s\\<^sub>t\n        (\\<langle>x1a: x2a \\<doteq> x3\\<rangle>\\<^sub>s\\<^sub>t # S)", "qed auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (x # S) =\n  fv\\<^sub>s\\<^sub>t (x # S) \\<union> bvars\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    fv\\<^sub>s\\<^sub>t [] \\<union> bvars\\<^sub>s\\<^sub>t []", "qed simp"], ["", "lemma fv\\<^sub>s\\<^sub>t\\<^sub>p_is_subterm_trms\\<^sub>s\\<^sub>t\\<^sub>p: \"x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p a \\<Longrightarrow> Var x \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t\\<^sub>p a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p a \\<Longrightarrow>\n    Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a", "using var_is_subterm"], ["proof (prove)\nusing this:\n  ?x \\<in> fv ?t \\<Longrightarrow> Var ?x \\<sqsubseteq> ?t\n\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p a \\<Longrightarrow>\n    Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a", "by (cases a) force+"], ["", "lemma fv\\<^sub>s\\<^sub>t_is_subterm_trms\\<^sub>s\\<^sub>t: \"x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow> Var x \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>s\\<^sub>t A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n    Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t A", "proof (induction A)"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t []\n 2. \\<And>a A.\n       \\<lbrakk>x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n                Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                trms\\<^sub>s\\<^sub>t A;\n        x \\<in> fv\\<^sub>s\\<^sub>t (a # A)\\<rbrakk>\n       \\<Longrightarrow> Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                         trms\\<^sub>s\\<^sub>t (a # A)", "case (Cons a A)"], ["proof (state)\nthis:\n  x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n  Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t A\n  x \\<in> fv\\<^sub>s\\<^sub>t (a # A)\n\ngoal (2 subgoals):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t []\n 2. \\<And>a A.\n       \\<lbrakk>x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n                Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                trms\\<^sub>s\\<^sub>t A;\n        x \\<in> fv\\<^sub>s\\<^sub>t (a # A)\\<rbrakk>\n       \\<Longrightarrow> Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                         trms\\<^sub>s\\<^sub>t (a # A)", "thus ?case"], ["proof (prove)\nusing this:\n  x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n  Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t A\n  x \\<in> fv\\<^sub>s\\<^sub>t (a # A)\n\ngoal (1 subgoal):\n 1. Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t (a # A)", "using fv\\<^sub>s\\<^sub>t\\<^sub>p_is_subterm_trms\\<^sub>s\\<^sub>t\\<^sub>p"], ["proof (prove)\nusing this:\n  x \\<in> fv\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n  Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t A\n  x \\<in> fv\\<^sub>s\\<^sub>t (a # A)\n  ?x \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p ?a \\<Longrightarrow>\n  Var ?x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n  trms\\<^sub>s\\<^sub>t\\<^sub>p ?a\n\ngoal (1 subgoal):\n 1. Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t (a # A)", "by (cases \"x \\<in> fv\\<^sub>s\\<^sub>t A\") auto"], ["proof (state)\nthis:\n  Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t (a # A)\n\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t trms\\<^sub>s\\<^sub>t []", "qed simp"], ["", "lemma vars_st_snd_map: \"vars\\<^sub>s\\<^sub>t (map Send X) = fv (Fun f X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (map Send X) = fv (Fun f X)", "by auto"], ["", "lemma vars_st_rcv_map: \"vars\\<^sub>s\\<^sub>t (map Receive X) = fv (Fun f X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (map Receive X) = fv (Fun f X)", "by auto"], ["", "lemma vars_snd_rcv_union:\n  \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union> fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union> fv\\<^sub>e\\<^sub>q assign x \\<union> fv\\<^sub>e\\<^sub>q check x \\<union> fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n    fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n    fv\\<^sub>e\\<^sub>q assign x \\<union>\n    fv\\<^sub>e\\<^sub>q check x \\<union>\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "case (Equality ac t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n    fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n    fv\\<^sub>e\\<^sub>q assign x \\<union>\n    fv\\<^sub>e\\<^sub>q check x \\<union>\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "by (cases ac) auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n  fv\\<^sub>e\\<^sub>q assign x \\<union>\n  fv\\<^sub>e\\<^sub>q check x \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)", "qed auto"], ["", "lemma fv_snd_rcv_union:\n  \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union> fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union> fv\\<^sub>e\\<^sub>q assign x \\<union> fv\\<^sub>e\\<^sub>q check x \\<union> fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n    fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n    fv\\<^sub>e\\<^sub>q assign x \\<union>\n    fv\\<^sub>e\\<^sub>q check x \\<union>\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x", "case (Equality ac t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n    fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n    fv\\<^sub>e\\<^sub>q assign x \\<union>\n    fv\\<^sub>e\\<^sub>q check x \\<union>\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x", "by (cases ac) auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n  fv\\<^sub>e\\<^sub>q assign x \\<union>\n  fv\\<^sub>e\\<^sub>q check x \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d x \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v x \\<union>\n       fv\\<^sub>e\\<^sub>q assign x \\<union>\n       fv\\<^sub>e\\<^sub>q check x \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x", "qed auto"], ["", "lemma fv_snd_rcv_empty[simp]: \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} \\<or> fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} \\<or>\n    fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}", "by (cases x) simp_all"], ["", "lemma vars_snd_rcv_strand[iff]:\n  \"vars\\<^sub>s\\<^sub>t (S::('a,'b) strand) =\n    (\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))) \\<union> (\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))) \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)))\n    \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q check) S))) \\<union> (\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))) \\<union> bvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n    bvars\\<^sub>s\\<^sub>t S", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q [])) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) []))\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t S =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n       \\<Union>\n        (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n               S)) \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S) =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (a # S))) \\<union>\n       \\<Union>\n        (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (a # S))) \\<union>\n       \\<Union>\n        (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (a # S)))", "case (Cons x S)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n  \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S))\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q [])) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) []))\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t S =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n       \\<Union>\n        (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n               S)) \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S) =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (a # S))) \\<union>\n       \\<Union>\n        (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (a # S))) \\<union>\n       \\<Union>\n        (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (a # S)))", "have \"\\<And>s V. vars\\<^sub>s\\<^sub>t\\<^sub>p (s::('a,'b) strand_step) \\<union> V = \n                fv\\<^sub>s\\<^sub>n\\<^sub>d s \\<union> fv\\<^sub>r\\<^sub>c\\<^sub>v s \\<union> fv\\<^sub>e\\<^sub>q assign s \\<union> fv\\<^sub>e\\<^sub>q check s \\<union> fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q s \\<union> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s) \\<union> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s V.\n       vars\\<^sub>s\\<^sub>t\\<^sub>p s \\<union> V =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d s \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v s \\<union>\n       fv\\<^sub>e\\<^sub>q assign s \\<union>\n       fv\\<^sub>e\\<^sub>q check s \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q s \\<union>\n       set (bvars\\<^sub>s\\<^sub>t\\<^sub>p s) \\<union>\n       V", "by (metis vars_snd_rcv_union)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<union> ?V =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d ?s \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v ?s \\<union>\n  fv\\<^sub>e\\<^sub>q assign ?s \\<union>\n  fv\\<^sub>e\\<^sub>q check ?s \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?s \\<union>\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p ?s) \\<union>\n  ?V\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q [])) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) []))\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t S =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n       \\<Union>\n        (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n               S)) \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S) =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (a # S))) \\<union>\n       \\<Union>\n        (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (a # S))) \\<union>\n       \\<Union>\n        (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (a # S)))", "thus ?case"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<union> ?V =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d ?s \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v ?s \\<union>\n  fv\\<^sub>e\\<^sub>q assign ?s \\<union>\n  fv\\<^sub>e\\<^sub>q check ?s \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?s \\<union>\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p ?s) \\<union>\n  ?V\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (x # S) =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x # S))) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (x # S)))", "using Cons.IH"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<union> ?V =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d ?s \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v ?s \\<union>\n  fv\\<^sub>e\\<^sub>q assign ?s \\<union>\n  fv\\<^sub>e\\<^sub>q check ?s \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?s \\<union>\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p ?s) \\<union>\n  ?V\n  vars\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<union>\n  \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S))\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (x # S) =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x # S))) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (x # S)))", "by (auto simp add: sup_assoc sup_left_commute)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (x # S) =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S))) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (x # S))) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (x # S))) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (x # S))) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x # S))) \\<union>\n  \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (x # S)))\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q [])) \\<union>\n    \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) []))", "qed simp"], ["", "lemma fv_snd_rcv_strand[iff]:\n  \"fv\\<^sub>s\\<^sub>t (S::('a,'b) strand) =\n    (\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))) \\<union> (\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))) \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)))\n    \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q check) S))) \\<union> (\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q []))\n 2. \\<And>a S.\n       fv\\<^sub>s\\<^sub>t S =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n       \\<Union>\n        (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t (a # S) =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (a # S)))", "case (Cons x S)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n\ngoal (2 subgoals):\n 1. fv\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q []))\n 2. \\<And>a S.\n       fv\\<^sub>s\\<^sub>t S =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n       \\<Union>\n        (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t (a # S) =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (a # S)))", "have \"\\<And>s V. fv\\<^sub>s\\<^sub>t\\<^sub>p (s::('a,'b) strand_step) \\<union> V = \n                fv\\<^sub>s\\<^sub>n\\<^sub>d s \\<union> fv\\<^sub>r\\<^sub>c\\<^sub>v s \\<union> fv\\<^sub>e\\<^sub>q assign s \\<union> fv\\<^sub>e\\<^sub>q check s \\<union> fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q s \\<union> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s V.\n       fv\\<^sub>s\\<^sub>t\\<^sub>p s \\<union> V =\n       fv\\<^sub>s\\<^sub>n\\<^sub>d s \\<union>\n       fv\\<^sub>r\\<^sub>c\\<^sub>v s \\<union>\n       fv\\<^sub>e\\<^sub>q assign s \\<union>\n       fv\\<^sub>e\\<^sub>q check s \\<union>\n       fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q s \\<union>\n       V", "by (metis fv_snd_rcv_union)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<union> ?V =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d ?s \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v ?s \\<union>\n  fv\\<^sub>e\\<^sub>q assign ?s \\<union>\n  fv\\<^sub>e\\<^sub>q check ?s \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?s \\<union>\n  ?V\n\ngoal (2 subgoals):\n 1. fv\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q []))\n 2. \\<And>a S.\n       fv\\<^sub>s\\<^sub>t S =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n       \\<Union>\n        (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t (a # S) =\n       \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (a # S))) \\<union>\n       \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (a # S))) \\<union>\n       \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (a # S)))", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<union> ?V =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d ?s \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v ?s \\<union>\n  fv\\<^sub>e\\<^sub>q assign ?s \\<union>\n  fv\\<^sub>e\\<^sub>q check ?s \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?s \\<union>\n  ?V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (x # S) =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x # S)))", "using Cons.IH"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p ?s \\<union> ?V =\n  fv\\<^sub>s\\<^sub>n\\<^sub>d ?s \\<union>\n  fv\\<^sub>r\\<^sub>c\\<^sub>v ?s \\<union>\n  fv\\<^sub>e\\<^sub>q assign ?s \\<union>\n  fv\\<^sub>e\\<^sub>q check ?s \\<union>\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?s \\<union>\n  ?V\n  fv\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (x # S) =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (x # S))) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (x # S))) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x # S)))", "by (auto simp add: sup_assoc sup_left_commute)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (x # S) =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S))) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (x # S))) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) (x # S))) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) (x # S))) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x # S)))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) [])) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) [])) \\<union>\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q []))", "qed simp"], ["", "lemma vars_snd_rcv_strand2[iff]:\n  \"wfrestrictedvars\\<^sub>s\\<^sub>t (S::('a,'b) strand) =\n    (\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))) \\<union> (\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))) \\<union> (\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S))", "by (induct S) (auto simp add: split: strand_step.split poscheckvariant.split)"], ["", "lemma fv_snd_rcv_strand_subset[simp]:\n  \"\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  \"\\<Union>(set (map (fv\\<^sub>e\\<^sub>q ac) S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  \"wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n     \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n     \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n     \\<subseteq> fv\\<^sub>s\\<^sub>t S) &&&\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q ac) S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S", "proof -"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\n 2. \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\n 3. \\<Union> (set (map (fv\\<^sub>e\\<^sub>q ac) S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\n 4. \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\n 5. wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S", "show \"\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using fv_snd_rcv_strand[of S]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n\ngoal (1 subgoal):\n 1. \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S &&&\n    \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. \\<Union> (set (map (fv\\<^sub>e\\<^sub>q ac) S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S\n 2. wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S", "show \"\\<Union>(set (map (fv\\<^sub>e\\<^sub>q ac) S)) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (set (map (fv\\<^sub>e\\<^sub>q ac) S))\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by (induct S) (auto split: strand_step.split poscheckvariant.split)"], ["proof (state)\nthis:\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q ac) S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S", "show \"wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by (induct S) (auto split: strand_step.split poscheckvariant.split)"], ["proof (state)\nthis:\n  wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vars_snd_rcv_strand_subset2[simp]:\n  \"\\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S)) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\" \"\\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S)) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\"\n  \"\\<Union>(set (map (fv\\<^sub>e\\<^sub>q assign) S)) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\" \"wfvarsoccs\\<^sub>s\\<^sub>t S \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n     \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S &&&\n     \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n     \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S) &&&\n    \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) S))\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S &&&\n    wfvarsoccs\\<^sub>s\\<^sub>t S\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by (induction S) (auto split: strand_step.split poscheckvariant.split)"], ["", "lemma wfrestrictedvars\\<^sub>s\\<^sub>t_subset_vars\\<^sub>s\\<^sub>t: \"wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> vars\\<^sub>s\\<^sub>t S", "by (induction S) (auto split: strand_step.split poscheckvariant.split)"], ["", "lemma subst_sends_strand_step_fv_to_img: \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "using subst_sends_fv_to_img[of _ \\<delta>]"], ["proof (prove)\nusing this:\n  fv (?t \\<cdot> \\<delta>) \\<subseteq> fv ?t \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "let ?\\<theta> = \"rm_vars (set X) \\<delta>\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "have \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?\\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> range_vars ?\\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                range_vars (rm_vars (set X) \\<delta>)", "proof (induction F)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars (rm_vars (set X) \\<delta>)\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<delta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                   range_vars (rm_vars (set X) \\<delta>) \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<delta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    (a # F) \\<union>\n                   range_vars (rm_vars (set X) \\<delta>)", "case (Cons f F)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars (rm_vars (set X) \\<delta>)\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<delta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                   range_vars (rm_vars (set X) \\<delta>) \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n         rm_vars (set X) \\<delta>)\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    (a # F) \\<union>\n                   range_vars (rm_vars (set X) \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) \\<union>\n                range_vars (rm_vars (set X) \\<delta>)", "using subst_sends_fv_to_img[of _ ?\\<theta>]"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n  fv (?t \\<cdot> rm_vars (set X) \\<delta>)\n  \\<subseteq> fv ?t \\<union> range_vars (rm_vars (set X) \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) \\<union>\n                range_vars (rm_vars (set X) \\<delta>)", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # F) \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars (rm_vars (set X) \\<delta>)", "qed (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?\\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> range_vars \\<delta>\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                range_vars \\<delta>", "using rm_vars_img_subset[of \"set X\" \\<delta>] fv_set_mono"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars (rm_vars (set X) \\<delta>)\n  subst_range (rm_vars (set X) \\<delta>) \\<subseteq> subst_range \\<delta>\n  ?M \\<subseteq> ?N \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t ?M \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t ?N\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                range_vars \\<delta>", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (subst_range (rm_vars (set X) \\<delta>))\n  subst_range (rm_vars (set X) \\<delta>) \\<subseteq> subst_range \\<delta>\n  ?M \\<subseteq> ?N \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t ?M \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t ?N\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)", "by blast+"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "thus ?thesis"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "using Inequality"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars \\<delta>\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "by (auto simp add: subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "qed (auto simp add: subst_apply_strand_step_def)"], ["", "lemma subst_sends_strand_fv_to_img: \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> fv\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "case (Cons x S)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> fv\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "have *: \"fv\\<^sub>s\\<^sub>t (x#S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"\n          \"fv\\<^sub>s\\<^sub>t (x#S) \\<union> range_vars \\<delta> = fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    fv\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n    fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) &&&\n    fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta> =\n    fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> fv\\<^sub>s\\<^sub>t S \\<union>\n    range_vars \\<delta>", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta> =\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> fv\\<^sub>s\\<^sub>t S \\<union>\n  range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> fv\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta> =\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> fv\\<^sub>s\\<^sub>t S \\<union>\n  range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta>", "using Cons.IH subst_sends_strand_step_fv_to_img[of x \\<delta>]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta> =\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> fv\\<^sub>s\\<^sub>t S \\<union>\n  range_vars \\<delta>\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta>", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>", "qed simp"], ["", "lemma ineq_apply_subst:\n  assumes \"subst_domain \\<delta> \\<inter> set X = {}\"\n  shows \"(Inequality X F) \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> = Inequality X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t", "using rm_vars_apply'[OF assms]"], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t", "by (simp add: subst_apply_strand_step_def)"], ["", "lemma fv_strand_step_subst:\n  assumes \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (P x)) = P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t &&&\n    fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using assms Send subst_apply_fv_unfold[of _ \\<delta>]"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  fv (?t \\<cdot> \\<delta>) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv ?t)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "case (Receive t)"], ["proof (state)\nthis:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\""], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t &&&\n    fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using assms Receive subst_apply_fv_unfold[of _ \\<delta>]"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  fv (?t \\<cdot> \\<delta>) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv ?t)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "case (Equality ac' t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "proof (cases \"ac = ac'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. ac = ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "case True"], ["proof (state)\nthis:\n  ac = ac'\n\ngoal (2 subgoals):\n 1. ac = ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\" \"fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\""], ["proof (prove)\nusing this:\n  ac = ac'\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n    fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'", "using Equality"], ["proof (prove)\nusing this:\n  ac = ac'\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n    fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n\ngoal (2 subgoals):\n 1. ac = ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n 2. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using assms Equality subst_apply_fv_unfold[of _ \\<delta>] True"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  fv (?t \\<cdot> \\<delta>) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv ?t)\n  ac = ac'\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "case False"], ["proof (state)\nthis:\n  ac \\<noteq> ac'\n\ngoal (1 subgoal):\n 1. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\" \"fv\\<^sub>e\\<^sub>q ac x = {}\""], ["proof (prove)\nusing this:\n  ac \\<noteq> ac'\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n    fv\\<^sub>e\\<^sub>q ac x = {}", "using Equality"], ["proof (prove)\nusing this:\n  ac \\<noteq> ac'\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n    fv\\<^sub>e\\<^sub>q ac x = {}", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac x = {}\n\ngoal (1 subgoal):\n 1. ac \\<noteq> ac' \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac x = {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using assms Equality subst_apply_fv_unfold[of _ \\<delta>] False"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  fv (?t \\<cdot> \\<delta>) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv ?t)\n  ac \\<noteq> ac'\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence 1: \"set X \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n           \"x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> = Inequality X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\"\n           \"rm_vars (set X) \\<delta> = \\<delta>\""], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. set X \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t &&&\n    rm_vars (set X) \\<delta> = \\<delta>", "using assms ineq_apply_subst[of \\<delta> X F] rm_vars_apply'[of \\<delta> \"set X\"]"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n  \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. set X \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t &&&\n    rm_vars (set X) \\<delta> = \\<delta>", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) =\n  {}\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n  \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. set X \\<inter>\n    (subst_domain \\<delta> \\<union>\n     fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) =\n    {} &&&\n    x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n    \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t &&&\n    rm_vars (set X) \\<delta> = \\<delta>", "by force+"], ["proof (state)\nthis:\n  set X \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "have 2: \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X", "using Inequality"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) - set X\""], ["proof (prove)\nusing this:\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n    fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (\\<delta> ` fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) -\n    set X", "using fv\\<^sub>s\\<^sub>e\\<^sub>t_subst_img_eq[OF 1(1), of \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\"]"], ["proof (prove)\nusing this:\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` (fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X)) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) -\n  set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n    fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (\\<delta> ` fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) -\n    set X", "by simp"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) -\n  set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "hence 3: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) -\n  set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X", "by (metis fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_step_subst)"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "have 4: \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X", "using 1(2)"], ["proof (prove)\nusing this:\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using assms(1) Inequality subst_apply_fv_unfold[of _ \\<delta>] 1(2) 2 3 4"], ["proof (prove)\nusing this:\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  fv (?t \\<cdot> \\<delta>) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv ?t)\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "unfolding fv\\<^sub>e\\<^sub>q_def fv\\<^sub>r\\<^sub>c\\<^sub>v_def fv\\<^sub>s\\<^sub>n\\<^sub>d_def"], ["proof (prove)\nusing this:\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P =\n  (\\<lambda>x.\n      case x of\n      receive\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<Rightarrow> fv x\n      | _ \\<Rightarrow> {}) \\<or>\n  P =\n  (\\<lambda>x.\n      case x of send\\<langle>x\\<rangle>\\<^sub>s\\<^sub>t \\<Rightarrow> fv x\n      | _ \\<Rightarrow> {}) \\<or>\n  P =\n  case_strand_step (\\<lambda>term. {}) (\\<lambda>term. {})\n   (\\<lambda>ac' s t. if ac = ac' then fv s \\<union> fv t else {})\n   (\\<lambda>list1 list2. {}) \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  fv (?t \\<cdot> \\<delta>) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv ?t)\n  x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by (metis (no_types) Sup_empty image_empty fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s.simps fv\\<^sub>s\\<^sub>e\\<^sub>t.simps\n              fv\\<^sub>s\\<^sub>t\\<^sub>p.simps(4) strand_step.simps(20))"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fv_strand_subst:\n  assumes \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (\\<Union>(set (map P S)))) = \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n    \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "using assms(2)"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n    \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` \\<Union> (set (map P S))) =\n                \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)));\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                          (\\<delta> ` \\<Union> (set (map P (a # S)))) =\n                         \\<Union>\n                          (set (map P\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "case (Cons x S)"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  bvars\\<^sub>s\\<^sub>t (x # S) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` \\<Union> (set (map P S))) =\n                \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)));\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                          (\\<delta> ` \\<Union> (set (map P (a # S)))) =\n                         \\<Union>\n                          (set (map P\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "hence *: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n           \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  bvars\\<^sub>s\\<^sub>t (x # S) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t S \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (x # S))) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "by force+"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` \\<Union> (set (map P S))) =\n                \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)));\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                          (\\<delta> ` \\<Union> (set (map P (a # S)))) =\n                         \\<Union>\n                          (set (map P\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "hence **: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) = P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using fv_strand_step_subst[OF assms(1), of x \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` \\<Union> (set (map P S))) =\n                \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)));\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                          (\\<delta> ` \\<Union> (set (map P (a # S)))) =\n                         \\<Union>\n                          (set (map P\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "have \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (\\<Union>(set (map P (x#S))))) = fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union> (\\<Union>(set (map P ((S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union>\n    \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "using Cons"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  bvars\\<^sub>s\\<^sub>t (x # S) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union>\n    \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "unfolding range_vars_alt_def bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) \\<inter>\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (x # S))) \\<inter>\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) =\n  {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union>\n    \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "by force"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union>\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` \\<Union> (set (map P S))) =\n                \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)));\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                          (\\<delta> ` \\<Union> (set (map P (a # S)))) =\n                         \\<Union>\n                          (set (map P\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "hence \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (\\<Union>(set (map P (x#S))))) = P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (\\<Union>(set (map P S))))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union>\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S)))", "using **"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) \\<union>\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` P x) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S)))", "by simp"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S)))\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` \\<Union> (set (map P S))) =\n                \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)));\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                          (\\<delta> ` \\<Union> (set (map P (a # S)))) =\n                         \\<Union>\n                          (set (map P\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S)))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    \\<Union> (set (map P (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "using Cons.IH[OF *(1)]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S)))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    \\<Union> (set (map P (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S)))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n    \\<Union> (set (map P (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "by simp"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P (x # S)))) =\n  \\<Union> (set (map P (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P []))) =\n    \\<Union> (set (map P ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "qed simp"], ["", "lemma fv_strand_subst2:\n  assumes \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (wfrestrictedvars\\<^sub>s\\<^sub>t S)) = wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (\\<delta> ` wfrestrictedvars\\<^sub>s\\<^sub>t S) =\n    wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis (no_types, lifting) assms fv\\<^sub>s\\<^sub>e\\<^sub>t.simps vars_snd_rcv_strand2 fv_strand_subst UN_Un image_Un)"], ["", "lemma fv_strand_subst':\n  assumes \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (fv\\<^sub>s\\<^sub>t S)) = fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` fv\\<^sub>s\\<^sub>t S) =\n    fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis assms fv_strand_subst fv\\<^sub>s\\<^sub>t_def)"], ["", "lemma fv_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_is_fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s:\n  \"fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F", "by auto"], ["", "lemma fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_in_fv_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s: \"x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow> x \\<in> fv\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow>\n    x \\<in> fv\\<^sub>s\\<^sub>e\\<^sub>t\n             (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)", "using fv_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_is_fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s[of F]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow>\n    x \\<in> fv\\<^sub>s\\<^sub>e\\<^sub>t\n             (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)", "by blast"], ["", "lemma trms\\<^sub>s\\<^sub>t_append: \"trms\\<^sub>s\\<^sub>t (A@B) = trms\\<^sub>s\\<^sub>t A \\<union> trms\\<^sub>s\\<^sub>t B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (A @ B) =\n    trms\\<^sub>s\\<^sub>t A \\<union> trms\\<^sub>s\\<^sub>t B", "by auto"], ["", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_subst: \"trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>) = trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (a \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>) =\n    trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<theta>", "by (auto simp add: subst_apply_pairs_def)"], ["", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_fv_subst_subset:\n  \"t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow> fv (t \\<cdot> \\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<Longrightarrow>\n    fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "by (force simp add: subst_apply_pairs_def)"], ["", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_fv_subst_subset':\n  fixes t::\"('a,'b) term\" and \\<theta>::\"('a,'b) subst\"\n  assumes \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)\"\n  shows \"fv (t \\<cdot> \\<theta>) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "assume \"x \\<in> fv t\""], ["proof (state)\nthis:\n  x \\<in> fv t\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "hence \"x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\""], ["proof (prove)\nusing this:\n  x \\<in> fv t\n\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F", "using fv_subset[OF assms] fv_subterms_set[of \"trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\"] fv_trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_is_fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s[of F]"], ["proof (prove)\nusing this:\n  x \\<in> fv t\n  fv t\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (subterms\\<^sub>s\\<^sub>e\\<^sub>t\n                 (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (subterms\\<^sub>s\\<^sub>e\\<^sub>t\n     (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F)\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F", "by blast"], ["proof (state)\nthis:\n  x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "hence \"fv (\\<theta> x) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. fv (\\<theta> x)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "using fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_subst_fv_subset"], ["proof (prove)\nusing this:\n  x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  ?x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ?F \\<Longrightarrow>\n  fv (?\\<theta> ?x)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n               (?F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                ?\\<theta>)\n\ngoal (1 subgoal):\n 1. fv (\\<theta> x)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "by fast"], ["proof (state)\nthis:\n  fv (\\<theta> x)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n               (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> fv t \\<Longrightarrow>\n  fv (\\<theta> ?x2)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n               (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> fv t \\<Longrightarrow>\n  fv (\\<theta> ?x2)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n               (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<theta>)\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)", "by (meson fv_subst_obtain_var subset_iff)"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<theta>)\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n               (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s_funs_term_cases:\n  assumes \"t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\" \"f \\<in> funs_term t\"\n  shows \"(\\<exists>u \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F. f \\<in> funs_term u) \\<or> (\\<exists>x \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F. f \\<in> funs_term (\\<theta> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n        f \\<in> funs_term (\\<theta> x))", "using assms(1)"], ["proof (prove)\nusing this:\n  t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n        f \\<in> funs_term (\\<theta> x))", "proof (induction F)"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term (\\<theta> x))\n 2. \\<And>a F.\n       \\<lbrakk>t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                         (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          \\<theta>) \\<Longrightarrow>\n                (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                 F.\n                    f \\<in> funs_term u) \\<or>\n                (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                 F.\n                    f \\<in> funs_term (\\<theta> x));\n        t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (a # F).\n                             f \\<in> funs_term u) \\<or>\n                         (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (a # F).\n                             f \\<in> funs_term (\\<theta> x))", "case (Cons g F)"], ["proof (state)\nthis:\n  t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n            \\<theta>) \\<Longrightarrow>\n  (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n      f \\<in> funs_term u) \\<or>\n  (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F.\n      f \\<in> funs_term (\\<theta> x))\n  t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (g # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term (\\<theta> x))\n 2. \\<And>a F.\n       \\<lbrakk>t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                         (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          \\<theta>) \\<Longrightarrow>\n                (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                 F.\n                    f \\<in> funs_term u) \\<or>\n                (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                 F.\n                    f \\<in> funs_term (\\<theta> x));\n        t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (a # F).\n                             f \\<in> funs_term u) \\<or>\n                         (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (a # F).\n                             f \\<in> funs_term (\\<theta> x))", "obtain s u where g: \"g = (s,u)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>s u. g = (s, u) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis surj_pair)"], ["proof (state)\nthis:\n  g = (s, u)\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term (\\<theta> x))\n 2. \\<And>a F.\n       \\<lbrakk>t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                         (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          \\<theta>) \\<Longrightarrow>\n                (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                 F.\n                    f \\<in> funs_term u) \\<or>\n                (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                 F.\n                    f \\<in> funs_term (\\<theta> x));\n        t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<theta>)\\<rbrakk>\n       \\<Longrightarrow> (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (a # F).\n                             f \\<in> funs_term u) \\<or>\n                         (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (a # F).\n                             f \\<in> funs_term (\\<theta> x))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))", "proof (cases \"t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))\n 2. t \\<notin> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))", "case False"], ["proof (state)\nthis:\n  t \\<notin> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (2 subgoals):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))\n 2. t \\<notin> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<notin> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))", "using assms(2) Cons.prems g funs_term_subst[of _ \\<theta>]"], ["proof (prove)\nusing this:\n  t \\<notin> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n  f \\<in> funs_term t\n  t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (g # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<theta>)\n  g = (s, u)\n  funs_term (?t \\<cdot> \\<theta>) =\n  funs_term ?t \\<union> (\\<Union>x\\<in>fv ?t. funs_term (\\<theta> x))\n\ngoal (1 subgoal):\n 1. (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n      f \\<in> funs_term u) \\<or>\n  (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n      f \\<in> funs_term (\\<theta> x))\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n        f \\<in> funs_term (\\<theta> x))", "qed (use Cons.IH in fastforce)"], ["proof (state)\nthis:\n  (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n      f \\<in> funs_term u) \\<or>\n  (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (g # F).\n      f \\<in> funs_term (\\<theta> x))\n\ngoal (1 subgoal):\n 1. t \\<in> trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              \\<theta>) \\<Longrightarrow>\n    (\\<exists>u\\<in>trms\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term u) \\<or>\n    (\\<exists>x\\<in>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [].\n        f \\<in> funs_term (\\<theta> x))", "qed simp"], ["", "lemma trm\\<^sub>s\\<^sub>t\\<^sub>p_subst: \n  assumes \"subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\"\n  shows \"trms\\<^sub>s\\<^sub>t\\<^sub>p (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) = trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "have \"rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a)) \\<theta> = \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a)) \\<theta> = \\<theta>", "using assms"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\n\ngoal (1 subgoal):\n 1. rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a)) \\<theta> = \\<theta>", "by force"], ["proof (state)\nthis:\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a)) \\<theta> = \\<theta>\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "thus ?thesis"], ["proof (prove)\nusing this:\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a)) \\<theta> = \\<theta>\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "using assms"], ["proof (prove)\nusing this:\n  rm_vars (set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a)) \\<theta> = \\<theta>\n  subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "by (auto simp add: subst_apply_pairs_def subst_apply_strand_step_def\n             split: strand_step.splits)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma trms\\<^sub>s\\<^sub>t_subst:\n  assumes \"subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\"\n  shows \"trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "using assms"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "proof (induction A)"], ["proof (state)\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "case (Cons a A)"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n  {} \\<Longrightarrow>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) = {}\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "have 1: \"subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\" \"subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {} &&&\n    subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) =\n    {}", "using Cons.prems"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) = {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {} &&&\n    subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) =\n    {}", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\n  subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "hence IH: \"trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\n  subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n    trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "using Cons.IH"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A = {}\n  subst_domain \\<theta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p a) = {}\n  subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n  {} \\<Longrightarrow>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n    trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "by simp"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "have \"trms\\<^sub>s\\<^sub>t (a#A) = trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<union> trms\\<^sub>s\\<^sub>t A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<union> trms\\<^sub>s\\<^sub>t A", "by auto"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (a # A) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<union> trms\\<^sub>s\\<^sub>t A\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "hence 2: \"trms\\<^sub>s\\<^sub>t (a#A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>) \\<union> (trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\""], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t (a # A) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<union> trms\\<^sub>s\\<^sub>t A\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n    (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n     \\<theta>) \\<union>\n    (trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)", "by (metis image_Un)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n  (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n   \\<theta>) \\<union>\n  (trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "have \"trms\\<^sub>s\\<^sub>t (a#A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = (trms\\<^sub>s\\<^sub>t\\<^sub>p (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>)) \\<union> trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) \\<union>\n    trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "by (auto simp add: subst_apply_strand_def)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) \\<union>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "hence 3: \"trms\\<^sub>s\\<^sub>t (a#A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) = (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>) \\<union> trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\""], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) \\<union>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n     \\<theta>) \\<union>\n    trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "using trm\\<^sub>s\\<^sub>t\\<^sub>p_subst[OF 1(2)]"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) \\<union>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (a \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<theta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n     \\<theta>) \\<union>\n    trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)", "by auto"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n   \\<theta>) \\<union>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (2 subgoals):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n 2. \\<And>a A.\n       \\<lbrakk>subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t A =\n                {} \\<Longrightarrow>\n                trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>;\n        subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t (a # A) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\n                          (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n                         trms\\<^sub>s\\<^sub>t\n                          (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<theta>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "using IH 2 3"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n  trms\\<^sub>s\\<^sub>t (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> =\n  (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n   \\<theta>) \\<union>\n  (trms\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>)\n  trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  (trms\\<^sub>s\\<^sub>t\\<^sub>p a \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n   \\<theta>) \\<union>\n  trms\\<^sub>s\\<^sub>t (A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>)\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "by metis"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (a # A \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n  trms\\<^sub>s\\<^sub>t (a # A) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t [] =\n    {} \\<Longrightarrow>\n    trms\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<theta>) =\n    trms\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>", "qed (simp add: subst_apply_strand_def)"], ["", "lemma strand_map_set_subst:\n  assumes \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"\\<Union>(set (map trms\\<^sub>s\\<^sub>t\\<^sub>p (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) = (\\<Union>(set (map trms\\<^sub>s\\<^sub>t\\<^sub>p S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "using assms"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            [])) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<delta>;\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>))) =\n                         \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "case (Cons x S)"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n  bvars\\<^sub>s\\<^sub>t (x # S) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            [])) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<delta>;\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>))) =\n                         \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "hence \"bvars\\<^sub>s\\<^sub>t [x] \\<inter> subst_domain \\<delta> = {}\" \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n  bvars\\<^sub>s\\<^sub>t (x # S) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t [x] \\<inter> subst_domain \\<delta> = {} &&&\n    bvars\\<^sub>s\\<^sub>t S \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) (x # S))) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) [x])) \\<inter>\n    subst_domain \\<delta> =\n    {} &&&\n    \\<Union>\n     (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "by force+"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t [x] \\<inter> subst_domain \\<delta> = {}\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            [])) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<delta>;\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>))) =\n                         \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "hence *: \"subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\"\n           \"\\<Union>(set (map trms\\<^sub>s\\<^sub>t\\<^sub>p (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) = \\<Union>(set (map trms\\<^sub>s\\<^sub>t\\<^sub>p S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t [x] \\<inter> subst_domain \\<delta> = {}\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n    {} &&&\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "using Cons.IH(1) bvars\\<^sub>s\\<^sub>t_singleton[of x]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t [x] \\<inter> subst_domain \\<delta> = {}\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n  bvars\\<^sub>s\\<^sub>t [x] = set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x)\n\ngoal (1 subgoal):\n 1. subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n    {} &&&\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            [])) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<delta>;\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>))) =\n                         \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "hence \"trms\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = (trms\\<^sub>s\\<^sub>t\\<^sub>p x) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\""], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>", "using rm_vars_apply'[of \\<delta> \"set X\"] *"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  rm_vars (set X) \\<delta> = \\<delta>\n  subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>", "by (metis (no_types, lifting) image_cong trm\\<^sub>s\\<^sub>t\\<^sub>p_subst)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_domain \\<delta> \\<inter>\n                set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) =\n                {};\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n        \\<Union>\n         (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n        \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n                         trms\\<^sub>s\\<^sub>t\\<^sub>p\n                          x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "qed simp_all"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\n\ngoal (2 subgoals):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            [])) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>\n 2. \\<And>a S.\n       \\<lbrakk>bvars\\<^sub>s\\<^sub>t S \\<inter>\n                (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                {} \\<Longrightarrow>\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n                \\<Union>\n                 (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                        S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<delta>;\n        bvars\\<^sub>s\\<^sub>t (a # S) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>))) =\n                         \\<Union>\n                          (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n                                 (a # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<delta>", "thus ?case"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\n\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (x # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "using * subst_all_insert"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  trms\\<^sub>s\\<^sub>t\\<^sub>p x \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>\n  subst_domain \\<delta> \\<inter> set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) = {}\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          S)) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n  insert ?t ?M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t ?\\<delta> =\n  insert (?t \\<cdot> ?\\<delta>)\n   (?M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t ?\\<delta>)\n\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            (x # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "by auto"], ["proof (state)\nthis:\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n  \\<Union>\n   (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n          (x # S))) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<delta>\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t [] \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} \\<Longrightarrow>\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) =\n    \\<Union>\n     (set (map trms\\<^sub>s\\<^sub>t\\<^sub>p\n            [])) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<delta>", "qed simp"], ["", "lemma subst_apply_fv_subset_strand_trm:\n  assumes P: \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and fv_sub: \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using fv_strand_subst[OF P \\<delta>] subst_apply_fv_subset[OF fv_sub, of \\<delta>]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` \\<Union> (set (map P S))) =\n  \\<Union> (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (\\<delta> ` (\\<Union> (set (map P S)) \\<union> V))\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by force"], ["", "lemma subst_apply_fv_subset_strand_trm2:\n  assumes fv_sub: \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using fv_strand_subst2[OF \\<delta>] subst_apply_fv_subset[OF fv_sub, of \\<delta>]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (\\<delta> ` wfrestrictedvars\\<^sub>s\\<^sub>t S) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (\\<delta> ` (wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V))\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by force"], ["", "lemma subst_apply_fv_subset_strand:\n  assumes P: \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\"\n  and P_subset: \"P x \\<subseteq> \\<Union>(set (map P S)) \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n         \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>)) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     fv (t \\<cdot> \\<delta>) &&&\n     fv\\<^sub>e\\<^sub>q ac x = {}) &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)) \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "unfolding vars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  \\<lbrakk>?P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           ?P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           ?P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           ?P = fv\\<^sub>e\\<^sub>q ?ac \\<or>\n           ?P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q;\n   fv ?t \\<subseteq> \\<Union> (set (map ?P ?S)) \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map ?P\n  (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by force"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Receive t)"], ["proof (state)\nthis:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>)) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     fv (t \\<cdot> \\<delta>) &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = {}) &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)) \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "unfolding vars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  \\<lbrakk>?P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           ?P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           ?P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           ?P = fv\\<^sub>e\\<^sub>q ?ac \\<or>\n           ?P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q;\n   fv ?t \\<subseteq> \\<Union> (set (map ?P ?S)) \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map ?P\n  (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Equality ac' t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "proof (cases \"ac' = ac\")"], ["proof (state)\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case True"], ["proof (state)\nthis:\n  ac' = ac\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\"\n             \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\"\n             \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  ac' = ac\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t') &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "using Equality"], ["proof (prove)\nusing this:\n  ac' = ac\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t') &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<union> fv t' \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>))\n              \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<union> fv t' \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t \\<union> fv t'\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> V\" \"fv t' \\<subseteq> \\<Union>(set (map P S)) \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V &&&\n    fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V &&&\n    fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"\n            \"fv (t' \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "unfolding vars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  \\<lbrakk>?P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           ?P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           ?P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           ?P = fv\\<^sub>e\\<^sub>q ?ac \\<or>\n           ?P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q;\n   fv ?t \\<subseteq> \\<Union> (set (map ?P ?S)) \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map ?P\n  (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis+"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case False"], ["proof (state)\nthis:\n  ac' \\<noteq> ac\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\"\n             \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  ac' \\<noteq> ac\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = {}) &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "using Equality"], ["proof (prove)\nusing this:\n  ac' \\<noteq> ac\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = {}) &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<union> fv t' \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>))\n              \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<union> fv t' \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t \\<union> fv t'\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> V\" \"fv t' \\<subseteq> \\<Union>(set (map P S)) \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V &&&\n    fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V &&&\n    fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"\n            \"fv (t' \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "unfolding vars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  \\<lbrakk>?P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           ?P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           ?P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           ?P = fv\\<^sub>e\\<^sub>q ?ac \\<or>\n           ?P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q;\n   fv ?t \\<subseteq> \\<Union> (set (map ?P ?S)) \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map ?P\n  (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis+"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\"\n           \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\""], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n       (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n      set X) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = {}) &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X", "using \\<delta>(2) ineq_apply_subst[of \\<delta> X F]"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n  \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n       (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n      set X) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v x = {} &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}) &&&\n    (fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>e\\<^sub>q ac x = {}) &&&\n    fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X", "by force+"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X)\n            \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\""], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> \\<Union>(set (map P S)) \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  P x \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "proof (induction F)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> \\<Union> (set (map P S)) \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> \\<Union>\n                             (set (map P\n                                    (S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> \\<Union> (set (map P S)) \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> \\<Union>\n(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "case (Cons f G)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> \\<Union> (set (map P S)) \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> \\<Union>\n                             (set (map P\n                                    (S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> \\<Union> (set (map P S)) \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> \\<Union>\n(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "hence IH: \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "by (metis (no_types, lifting) Diff_subset_conv UN_insert le_sup_iff\n                  list.simps(15) fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s.simps)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> \\<Union> (set (map P S)) \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> \\<Union>\n                             (set (map P\n                                    (S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> \\<Union> (set (map P S)) \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> \\<Union>\n(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "obtain t t' where f: \"f = (t,t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t t'. f = (t, t') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis surj_pair)"], ["proof (state)\nthis:\n  f = (t, t')\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> \\<Union> (set (map P S)) \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> \\<Union>\n                             (set (map P\n                                    (S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> \\<Union> (set (map P S)) \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> \\<Union>\n(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "hence \"fv t \\<subseteq> \\<Union>(set (map P S)) \\<union> (V \\<union> set X)\" \"fv t' \\<subseteq> \\<Union>(set (map P S)) \\<union> (V \\<union> set X)\""], ["proof (prove)\nusing this:\n  f = (t, t')\n\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X) &&&\n    fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)", "using Cons.prems"], ["proof (prove)\nusing this:\n  f = (t, t')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) - set X\n  \\<subseteq> \\<Union> (set (map P S)) \\<union> V\n\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X) &&&\n    fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> \\<Union> (set (map P S)) \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> \\<Union>\n                             (set (map P\n                                    (S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> \\<Union> (set (map P S)) \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> \\<Union>\n(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\"\n            \"fv (t' \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` (V \\<union> set X)) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "using subst_apply_fv_subset_strand_trm[OF P _ assms(3)]"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)\n  fv t' \\<subseteq> \\<Union> (set (map P S)) \\<union> (V \\<union> set X)\n  fv ?t \\<subseteq> \\<Union> (set (map P S)) \\<union> ?V \\<Longrightarrow>\n  fv (?t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` (V \\<union> set X)) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "by blast+"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> \\<Union> (set (map P S)) \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> \\<Union>\n                             (set (map P\n                                    (S \\<cdot>\\<^sub>s\\<^sub>t\n                                     \\<delta>))) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> \\<Union> (set (map P S)) \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> \\<Union>\n(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "thus ?case"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "using f IH"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  f = (t, t')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> \\<Union> (set (map P S)) \\<union> V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "qed (simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "have \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X", "using assms(4) Inequality"], ["proof (prove)\nusing this:\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X", "by force"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X", "have \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X \\<subseteq> \\<Union>(set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\\<close>"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n   set X\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> \\<Union>\n                    (set (map P\n                           (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n   set X\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n   set X\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> \\<Union>\n                                 (set (map P\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map P (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_apply_fv_subset_strand2:\n  assumes P: \"P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or> P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or> P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or> P = fv\\<^sub>e\\<^sub>q ac \\<or> P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\"\n  and P_subset: \"P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\"\n  and \\<delta>: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n         \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv_r\\<^sub>e\\<^sub>q ac x = {}\" \"fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     fv (t \\<cdot> \\<delta>)) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = {} &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)) \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = fv t\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm2 assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  \\<lbrakk>fv ?t\n           \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Receive t)"], ["proof (state)\nthis:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\"\n           \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv_r\\<^sub>e\\<^sub>q ac x = {}\" \"fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     fv (t \\<cdot> \\<delta>) &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = {} &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)) \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = fv t\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>)\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm2 assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  \\<lbrakk>fv ?t\n           \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Equality ac' t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "proof (cases \"ac' = ac\")"], ["proof (state)\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case True"], ["proof (state)\nthis:\n  ac' = ac\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\"\n             \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\"\n             \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv_r\\<^sub>e\\<^sub>q ac x = fv t'\" \"fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\""], ["proof (prove)\nusing this:\n  ac' = ac\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t' &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = fv t' &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t' \\<cdot> \\<delta>)", "using Equality"], ["proof (prove)\nusing this:\n  ac' = ac\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t' &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = fv t' &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t' \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = fv t'\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<union> fv t' \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>))\n              \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\n              \\<or> (P x = fv t' \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = fv t \\<union> fv t'\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = fv t'\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P x = fv t \\<union> fv t' \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n    P x = fv t' \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t' \\<cdot> \\<delta>)", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t \\<union> fv t'\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\" \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V &&&\n    fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V &&&\n    fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"\n            \"fv (t' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm2 assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  \\<lbrakk>fv ?t\n           \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast+"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t'\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm2 assms"], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  \\<lbrakk>fv ?t\n           \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast+"], ["proof (state)\nthis:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n 2. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case False"], ["proof (state)\nthis:\n  ac' \\<noteq> ac\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\"\n             \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n             \"fv_r\\<^sub>e\\<^sub>q ac x = {}\" \"fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  ac' \\<noteq> ac\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = {} &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "using Equality"], ["proof (prove)\nusing this:\n  ac' \\<noteq> ac\n  x = \\<langle>ac': t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t' &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = {} &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv t \\<union> fv t' \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>))\n              \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\n              \\<or> (P x = fv t' \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv t \\<union> fv t'\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P x = fv t \\<union> fv t' \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n    P x = {} \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n    P x = fv t' \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv (t' \\<cdot> \\<delta>)", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t \\<union> fv t'\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\" \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V &&&\n    fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V &&&\n    fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\"\n            \"fv (t' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm2 assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  \\<lbrakk>fv ?t\n           \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast+"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv t'\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\""], ["proof (state)\nthis:\n  P x = fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv t'\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv (t' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using P subst_apply_fv_subset_strand_trm2 assms"], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  \\<lbrakk>fv ?t\n           \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv (?t \\<cdot> ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast+"], ["proof (state)\nthis:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\\<close>"], ["proof (prove)\nusing this:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. ac' \\<noteq> ac \\<Longrightarrow>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv t \\<union> fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {} \\<or>\n  P x = fv t' \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv (t' \\<cdot> \\<delta>)\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t \\<union> fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv t';\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv (t' \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence *: \"fv\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\" \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\"\n           \"fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\" \"fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\" \"fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>e\\<^sub>q ac x = {}\" \"fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\"\n           \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\" \"fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\"\n           \"fv_r\\<^sub>e\\<^sub>q ac x = {}\" \"fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n       (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n      set X &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = {} &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n     fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "using \\<delta>(2) ineq_apply_subst[of \\<delta> X F]"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  subst_domain \\<delta> \\<inter> set X = {} \\<Longrightarrow>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n  \\<delta> =\n  \\<forall>X\\<langle>\\<or>\\<noteq>: (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                                     \\<delta>)\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. ((fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X &&&\n      fv\\<^sub>s\\<^sub>t\\<^sub>p\n       (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n      fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n       (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n      set X &&&\n      fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}) &&&\n     fv\\<^sub>r\\<^sub>c\\<^sub>v\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d x = {} &&&\n     fv\\<^sub>s\\<^sub>n\\<^sub>d\n      (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {}) &&&\n    (fv\\<^sub>e\\<^sub>q ac x = {} &&&\n     fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n     {} &&&\n     fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n     fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X) &&&\n    fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X &&&\n    fv_r\\<^sub>e\\<^sub>q ac x = {} &&&\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    {}", "by force+"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence **: \"(P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X)\n            \\<or> (P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {})\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv\\<^sub>r\\<^sub>c\\<^sub>v x = {}\n  fv\\<^sub>r\\<^sub>c\\<^sub>v (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d x = {}\n  fv\\<^sub>s\\<^sub>n\\<^sub>d (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  {}\n  fv\\<^sub>e\\<^sub>q ac x = {}\n  fv\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  fv_r\\<^sub>e\\<^sub>q ac x = {}\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n    P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X \\<or>\n    P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}", "by (metis P)"], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = {}\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\""], ["proof (state)\nthis:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  P x = {}\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "{"], ["proof (state)\nthis:\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "assume \"P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\" \"P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\""], ["proof (state)\nthis:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using P_subset"], ["proof (prove)\nusing this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  P x \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "proof (induction F)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "case (Cons f G)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n              V \\<Longrightarrow>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "hence IH: \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) \\<subseteq>wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n              V \\<Longrightarrow>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "by (metis (no_types, lifting) Diff_subset_conv UN_insert le_sup_iff\n                  list.simps(15) fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s.simps)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "obtain t t' where f: \"f = (t,t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t t'. f = (t, t') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis surj_pair)"], ["proof (state)\nthis:\n  f = (t, t')\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "hence \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\" \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\""], ["proof (prove)\nusing this:\n  f = (t, t')\n\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> set X) &&&\n    fv t'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> set X)", "using Cons.prems"], ["proof (prove)\nusing this:\n  f = (t, t')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) - set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> set X) &&&\n    fv t'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> set X)", "by auto"], ["proof (state)\nthis:\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\"\n            \"fv (t' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\""], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` (V \\<union> set X)) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "using subst_apply_fv_subset_strand_trm2[OF _ assms(3)] P"], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> set X)\n  fv ?t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n              ?V \\<Longrightarrow>\n  fv (?t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V)\n  P = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n  P = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n  P = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n  P = fv\\<^sub>e\\<^sub>q ac \\<or>\n  P = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or> P = fv_r\\<^sub>e\\<^sub>q ac\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (\\<delta> ` (V \\<union> set X)) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "by blast+"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n 2. \\<And>a F.\n       \\<lbrakk>fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                            V \\<Longrightarrow>\n                fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                  \\<delta>)\n                \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                             (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                            fv\\<^sub>s\\<^sub>e\\<^sub>t\n                             (\\<delta> ` (V \\<union> set X));\n        fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (a # F) - set X\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n       \\<Longrightarrow> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                          (a #\n                           F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                           \\<delta>)\n                         \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                                     fv\\<^sub>s\\<^sub>e\\<^sub>t\n(\\<delta> ` (V \\<union> set X))", "thus ?case"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "using f IH"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  f = (t, t')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] - set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                V \\<Longrightarrow>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))", "qed (simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "moreover"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "have \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X", "using assms(4) Inequality"], ["proof (prove)\nusing this:\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X", "by force"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X", "have \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> set X))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` set X) = set X\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n    set X\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by fastforce"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "hence ?thesis"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) - set X\\<close>"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by blast"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n   set X\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n       \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "ultimately"], ["proof (chain)\npicking this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n   set X\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "show ?thesis"], ["proof (prove)\nusing this:\n  P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<and>\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n  set X \\<or>\n  P x = {} \\<and> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\n  \\<lbrakk>P x = {};\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = {}\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>P x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X;\n   P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n   fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>) -\n   set X\\<rbrakk>\n  \\<Longrightarrow> P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (S \\<cdot>\\<^sub>s\\<^sub>t\n                                  \\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by metis"], ["proof (state)\nthis:\n  P (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_subst_fv_bounded_if_img_bounded:\n  assumes \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using subst_sends_strand_fv_to_img[of S \\<delta>] assms"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n  range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by blast"], ["", "lemma strand_fv_subst_subset_if_subst_elim:\n  assumes \"subst_elim \\<delta> v\" and \"v \\<in> fv\\<^sub>s\\<^sub>t S \\<or> bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases \"v \\<in> fv\\<^sub>s\\<^sub>t S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. v \\<notin> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case True"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. v \\<notin> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                v \\<notin> fv\\<^sub>s\\<^sub>t\n                            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                     (a # S \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>)", "case (Cons x S)"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S)\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                v \\<notin> fv\\<^sub>s\\<^sub>t\n                            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                     (a # S \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>)", "have *: \"v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using assms(1)"], ["proof (prove)\nusing this:\n  subst_elim \\<delta> v\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "hence \"subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X\""], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X", "using assms(1)"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  subst_elim \\<delta> v\n\ngoal (1 subgoal):\n 1. subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X", "by blast"], ["proof (state)\nthis:\n  subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "moreover"], ["proof (state)\nthis:\n  subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "have \"fv\\<^sub>s\\<^sub>t\\<^sub>p (Inequality X F \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s rm_vars (set X) \\<delta>) - set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>) -\n    set X", "using Inequality"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p\n     (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n      \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n      rm_vars (set X) \\<delta>) -\n    set X", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>) -\n  set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>) -\n  set X", "have \"v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p (Inequality X F \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\nusing this:\n  subst_elim (rm_vars (set X) \\<delta>) v \\<or> v \\<in> set X\n  fv\\<^sub>s\\<^sub>t\\<^sub>p\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n    \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n    rm_vars (set X) \\<delta>) -\n  set X\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                 \\<delta>)", "by (induct F) (auto simp add: subst_elim_def subst_apply_pairs_def)"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using Inequality"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n               \\<delta>)\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by simp"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>subst_elim \\<delta> v;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n\\<delta>)", "qed (simp_all add: subst_elim_def)"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                v \\<notin> fv\\<^sub>s\\<^sub>t\n                            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                     (a # S \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>)", "moreover"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                v \\<notin> fv\\<^sub>s\\<^sub>t\n                            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                     (a # S \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>)", "have \"v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using Cons.IH"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases \"v \\<in> fv\\<^sub>s\\<^sub>t S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<in> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<notin> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case False"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<in> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<notin> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "moreover"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<in> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<notin> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"v \\<notin> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> range_vars \\<delta>", "by (simp add: subst_elimD''[OF assms(1)] range_vars_alt_def)"], ["proof (state)\nthis:\n  v \\<notin> range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<in> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<notin> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n  v \\<notin> range_vars \\<delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n  v \\<notin> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (meson UnE subsetCE subst_sends_strand_fv_to_img)"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             v \\<notin> fv\\<^sub>s\\<^sub>t\n                         (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n     v \\<in> fv\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "qed simp"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                v \\<notin> fv\\<^sub>s\\<^sub>t\n                            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> v \\<notin> fv\\<^sub>s\\<^sub>t\n                                     (a # S \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?case"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p\n              (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "qed simp"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case False"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using assms fv_strand_subst'"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n  subst_elim \\<delta> v\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<or>\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n  (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` fv\\<^sub>s\\<^sub>t ?S) =\n  fv\\<^sub>s\\<^sub>t (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "unfolding subst_elim_def"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S\n  \\<forall>t. v \\<notin> fv (t \\<cdot> \\<delta>)\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<or>\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n  (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n  {} \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` fv\\<^sub>s\\<^sub>t ?S) =\n  fv\\<^sub>s\\<^sub>t (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis (mono_tags, hide_lams) fv\\<^sub>s\\<^sub>e\\<^sub>t.simps imageE mem_simps(8) subst_apply_term.simps(1))"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_fv_subst_subset_if_subst_elim':\n  assumes \"subst_elim \\<delta> v\" \"v \\<in> fv\\<^sub>s\\<^sub>t S\" \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subset> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subset> fv\\<^sub>s\\<^sub>t S", "using strand_fv_subst_subset_if_subst_elim[OF assms(1)] assms(2)\n      strand_subst_fv_bounded_if_img_bounded[OF assms(3)]"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t ?S \\<or>\n  bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  v \\<notin> fv\\<^sub>s\\<^sub>t (?S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subset> fv\\<^sub>s\\<^sub>t S", "by blast"], ["", "lemma fv_ik_is_fv_rcv: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) = \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) =\n    \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma fv_ik_subset_fv_st[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma fv_assignment_rhs_subset_fv_st[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) force+"], ["", "lemma fv_ik_subset_fv_st'[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t S)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by (induct S rule: ik\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik\\<^sub>s\\<^sub>t_var_is_fv: \"Var x \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A) \\<Longrightarrow> x \\<in> fv\\<^sub>s\\<^sub>t A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Var x \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n    ik\\<^sub>s\\<^sub>t A \\<Longrightarrow>\n    x \\<in> fv\\<^sub>s\\<^sub>t A", "by (meson fv_ik_subset_fv_st'[of A] fv_subset_subterms subsetCE term.set_intros(3))"], ["", "lemma fv_assignment_rhs_subset_fv_st'[simp]: \"fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S) \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t S)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by (induct S rule: assignment_rhs\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma ik\\<^sub>s\\<^sub>t_assignment_rhs\\<^sub>s\\<^sub>t_wfrestrictedvars_subset:\n  \"fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A \\<union> assignment_rhs\\<^sub>s\\<^sub>t A) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (ik\\<^sub>s\\<^sub>t A \\<union> assignment_rhs\\<^sub>s\\<^sub>t A)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A", "using fv_ik_subset_fv_st[of A] fv_assignment_rhs_subset_fv_st[of A]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t A)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t\n     (ik\\<^sub>s\\<^sub>t A \\<union> assignment_rhs\\<^sub>s\\<^sub>t A)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A", "by simp+"], ["", "lemma strand_step_id_subst[iff]: \"x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p Var = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p Var = x", "by (cases x) auto"], ["", "lemma strand_id_subst[iff]: \"S \\<cdot>\\<^sub>s\\<^sub>t Var = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t Var = S", "using strand_step_id_subst"], ["proof (prove)\nusing this:\n  ?x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p Var = ?x\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t Var = S", "by (induct S) auto"], ["", "lemma strand_subst_vars_union_bound[simp]: \"vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "case (Cons x S)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "moreover"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "have \"vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "using subst_sends_fv_to_img[of _ \\<delta>]"], ["proof (prove)\nusing this:\n  fv (?t \\<cdot> \\<delta>) \\<subseteq> fv ?t \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "define \\<delta>' where \"\\<delta>' \\<equiv> rm_vars (set X) \\<delta>\""], ["proof (state)\nthis:\n  \\<delta>' \\<equiv> rm_vars (set X) \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "have 0: \"range_vars \\<delta>' \\<subseteq> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta>' \\<subseteq> range_vars \\<delta>", "using rm_vars_img[of \"set X\" \\<delta>]"], ["proof (prove)\nusing this:\n  subst_range (rm_vars (set X) \\<delta>) =\n  \\<delta> ` subst_domain (rm_vars (set X) \\<delta>)\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>' \\<subseteq> range_vars \\<delta>", "by (auto simp add: \\<delta>'_def subst_domain_def range_vars_alt_def)"], ["proof (state)\nthis:\n  range_vars \\<delta>' \\<subseteq> range_vars \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "have \"vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union> set X\" \"vars\\<^sub>s\\<^sub>t\\<^sub>p x = fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union>\n    set X &&&\n    vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X", "using Inequality"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union>\n    set X &&&\n    vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X", "by (auto simp add: \\<delta>'_def)"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "moreover"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "have \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> range_vars \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                range_vars \\<delta>", "proof (induction F)"], ["proof (state)\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars \\<delta>\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    (a # F) \\<union>\n                   range_vars \\<delta>", "case (Cons f G)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G \\<union>\n              range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars \\<delta>\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    (a # F) \\<union>\n                   range_vars \\<delta>", "obtain t t' where f: \"f = (t,t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t t'. f = (t, t') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  f = (t, t')\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars \\<delta>\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    (a # F) \\<union>\n                   range_vars \\<delta>", "hence \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f#G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') = fv (t \\<cdot> \\<delta>') \\<union> fv (t' \\<cdot> \\<delta>') \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\"\n            \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f#G) = fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G\""], ["proof (prove)\nusing this:\n  f = (t, t')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') =\n    fv (t \\<cdot> \\<delta>') \\<union> fv (t' \\<cdot> \\<delta>') \\<union>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') &&&\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) =\n    fv t \\<union> fv t' \\<union>\n    fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') =\n  fv (t \\<cdot> \\<delta>') \\<union> fv (t' \\<cdot> \\<delta>') \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G\n\ngoal (2 subgoals):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars \\<delta>\n 2. \\<And>a F.\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n        (a # F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n       \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                    (a # F) \\<union>\n                   range_vars \\<delta>", "thus ?case"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') =\n  fv (t \\<cdot> \\<delta>') \\<union> fv (t' \\<cdot> \\<delta>') \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) \\<union>\n                range_vars \\<delta>", "using 0 Cons.IH subst_sends_fv_to_img[of t \\<delta>'] subst_sends_fv_to_img[of t' \\<delta>']"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') =\n  fv (t \\<cdot> \\<delta>') \\<union> fv (t' \\<cdot> \\<delta>') \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G\n  range_vars \\<delta>' \\<subseteq> range_vars \\<delta>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G \\<union>\n              range_vars \\<delta>\n  fv (t \\<cdot> \\<delta>') \\<subseteq> fv t \\<union> range_vars \\<delta>'\n  fv (t' \\<cdot> \\<delta>') \\<subseteq> fv t' \\<union> range_vars \\<delta>'\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) \\<union>\n                range_vars \\<delta>", "unfolding f"], ["proof (prove)\nusing this:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   ((t, t') # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') =\n  fv (t \\<cdot> \\<delta>') \\<union> fv (t' \\<cdot> \\<delta>') \\<union>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s ((t, t') # G) =\n  fv t \\<union> fv t' \\<union> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G\n  range_vars \\<delta>' \\<subseteq> range_vars \\<delta>\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s G \\<union>\n              range_vars \\<delta>\n  fv (t \\<cdot> \\<delta>') \\<subseteq> fv t \\<union> range_vars \\<delta>'\n  fv (t' \\<cdot> \\<delta>') \\<subseteq> fv t' \\<union> range_vars \\<delta>'\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ((t, t') # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                 ((t, t') # G) \\<union>\n                range_vars \\<delta>", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (f # G \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (f # G) \\<union>\n              range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n     ([] \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n    \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s [] \\<union>\n                range_vars \\<delta>", "qed (simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars \\<delta>\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "ultimately"], ["proof (chain)\npicking this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars \\<delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>') \\<union>\n  set X\n  vars\\<^sub>s\\<^sub>t\\<^sub>p x =\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union> set X\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>')\n  \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F \\<union>\n              range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t.\n                   fv (t \\<cdot> \\<delta>)\n                   \\<subseteq> fv t \\<union> range_vars \\<delta>;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> vars\\<^sub>s\\<^sub>t\\<^sub>p\n                          (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                         \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union>\n                                     range_vars \\<delta>", "qed auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\n\ngoal (2 subgoals):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>\n 2. \\<And>a S.\n       vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union>\n                   range_vars \\<delta> \\<Longrightarrow>\n       vars\\<^sub>s\\<^sub>t (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n       \\<subseteq> vars\\<^sub>s\\<^sub>t (a # S) \\<union> range_vars \\<delta>", "ultimately"], ["proof (chain)\npicking this:\n  vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>", "show ?case"], ["proof (prove)\nusing this:\n  vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n  vars\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t\\<^sub>p x \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta>", "by auto"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t (x # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> vars\\<^sub>s\\<^sub>t (x # S) \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n    \\<subseteq> vars\\<^sub>s\\<^sub>t [] \\<union> range_vars \\<delta>", "qed simp"], ["", "lemma strand_vars_split:\n  \"vars\\<^sub>s\\<^sub>t (S@S') = vars\\<^sub>s\\<^sub>t S \\<union> vars\\<^sub>s\\<^sub>t S'\"\n  \"wfrestrictedvars\\<^sub>s\\<^sub>t (S@S') = wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S'\"\n  \"fv\\<^sub>s\\<^sub>t (S@S') = fv\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>t S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t (S @ S') =\n    vars\\<^sub>s\\<^sub>t S \\<union> vars\\<^sub>s\\<^sub>t S' &&&\n    wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S') =\n    wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n    wfrestrictedvars\\<^sub>s\\<^sub>t S' &&&\n    fv\\<^sub>s\\<^sub>t (S @ S') =\n    fv\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>t S'", "by auto"], ["", "lemma bvars_subst_ident: \"bvars\\<^sub>s\\<^sub>t S = bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t S =\n    bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) =\n    \\<Union>\n     (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n            (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "by (induct S) (simp_all add: subst_apply_strand_step_def split: strand_step.splits)"], ["", "lemma strand_subst_subst_idem:\n  assumes \"subst_idem \\<delta>\" \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {}\"\n          \"range_vars \\<delta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"range_vars \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"\n  and   \"(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t (\\<theta> \\<circ>\\<^sub>s \\<delta>) = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta> &&&\n    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> \\<circ>\\<^sub>s \\<delta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> \\<circ>\\<^sub>s \\<delta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>", "from assms(2,3)"], ["proof (chain)\npicking this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {}", "have \"fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter> subst_domain \\<theta> = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {}\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n    subst_domain \\<theta> =\n    {}", "using subst_sends_strand_fv_to_img[of S \\<delta>]"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>t S = {}\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S \\<union> range_vars \\<delta>\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n    subst_domain \\<theta> =\n    {}", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n  subst_domain \\<theta> =\n  {}\n\ngoal (2 subgoals):\n 1. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n 2. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> \\<circ>\\<^sub>s \\<delta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>", "thus \"(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<inter>\n  subst_domain \\<theta> =\n  {}\n\ngoal (1 subgoal):\n 1. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>", "by blast"], ["proof (state)\nthis:\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n\ngoal (1 subgoal):\n 1. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> \\<circ>\\<^sub>s \\<delta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>", "thus \"(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t (\\<theta> \\<circ>\\<^sub>s \\<delta>) = (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t \\<theta> =\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n\ngoal (1 subgoal):\n 1. (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n    \\<theta> \\<circ>\\<^sub>s \\<delta> =\n    S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>", "by (metis assms(1,4,5) bvars_subst_ident strand_subst_comp subst_idem_def)"], ["proof (state)\nthis:\n  (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<cdot>\\<^sub>s\\<^sub>t\n  \\<theta> \\<circ>\\<^sub>s \\<delta> =\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_subst_img_bound:\n  assumes \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n    and \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"subst_domain \\<delta> \\<subseteq> \\<Union>(set (map fv\\<^sub>s\\<^sub>t\\<^sub>p S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_domain \\<delta>\n    \\<subseteq> \\<Union> (set (map fv\\<^sub>s\\<^sub>t\\<^sub>p S))", "by (metis (no_types) fv\\<^sub>s\\<^sub>t_def Un_subset_iff assms(1))"], ["proof (state)\nthis:\n  subst_domain \\<delta>\n  \\<subseteq> \\<Union> (set (map fv\\<^sub>s\\<^sub>t\\<^sub>p S))\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  subst_domain \\<delta>\n  \\<subseteq> \\<Union> (set (map fv\\<^sub>s\\<^sub>t\\<^sub>p S))\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "unfolding range_vars_alt_def fv\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  subst_domain \\<delta>\n  \\<subseteq> \\<Union> (set (map fv\\<^sub>s\\<^sub>t\\<^sub>p S))\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map fv\\<^sub>s\\<^sub>t\\<^sub>p\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "by (metis subst_range.simps fv_set_mono fv_strand_subst Int_commute assms(2) image_Un\n              le_iff_sup)"], ["proof (state)\nthis:\n  range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_subst_img_bound':\n  assumes \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> vars\\<^sub>s\\<^sub>t S\"\n    and \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"range_vars \\<delta> \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"(subst_domain \\<delta> \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter> vars\\<^sub>s\\<^sub>t S =\n        subst_domain \\<delta> \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union>\n     fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter>\n    vars\\<^sub>s\\<^sub>t S =\n    subst_domain \\<delta> \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)", "using assms(1)"], ["proof (prove)\nusing this:\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> vars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union>\n     fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter>\n    vars\\<^sub>s\\<^sub>t S =\n    subst_domain \\<delta> \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)", "by (metis inf.absorb_iff1 range_vars_alt_def subst_range.simps)"], ["proof (state)\nthis:\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter>\n  vars\\<^sub>s\\<^sub>t S =\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter>\n  vars\\<^sub>s\\<^sub>t S =\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using vars_snd_rcv_strand fv_snd_rcv_strand assms(2) strand_subst_img_bound"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter>\n  vars\\<^sub>s\\<^sub>t S =\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)\n  vars\\<^sub>s\\<^sub>t ?S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?S)) \\<union>\n  bvars\\<^sub>s\\<^sub>t ?S\n  fv\\<^sub>s\\<^sub>t ?S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?S))\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n  \\<lbrakk>subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>\n           \\<subseteq> fv\\<^sub>s\\<^sub>t ?S;\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) \\<inter>\n   bvars\\<^sub>s\\<^sub>t ?S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> range_vars ?\\<delta>\n                    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>)\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)) \\<inter>\n  vars\\<^sub>s\\<^sub>t S =\n  subst_domain \\<delta> \\<union>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` subst_domain \\<delta>)\n  vars\\<^sub>s\\<^sub>t ?S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?S)) \\<union>\n  bvars\\<^sub>s\\<^sub>t ?S\n  fv\\<^sub>s\\<^sub>t ?S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q check) ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q ?S))\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n  \\<lbrakk>subst_domain ?\\<delta> \\<union>\n           fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range ?\\<delta>)\n           \\<subseteq> fv\\<^sub>s\\<^sub>t ?S;\n   (subst_domain ?\\<delta> \\<union>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range ?\\<delta>)) \\<inter>\n   bvars\\<^sub>s\\<^sub>t ?S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range ?\\<delta>)\n                    \\<subseteq> fv\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis (no_types) inf_le2 inf_sup_distrib1 subst_range.simps sup_bot.right_neutral)"], ["proof (state)\nthis:\n  range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus \"range_vars \\<delta> \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. range_vars \\<delta>\n    \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis fv_snd_rcv_strand le_supI1 vars_snd_rcv_strand)"], ["proof (state)\nthis:\n  range_vars \\<delta>\n  \\<subseteq> vars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_subst_all_fv_subset:\n  assumes \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\" \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"fv (t \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis fv_strand_subst' Int_commute subst_apply_fv_subset)"], ["", "lemma strand_subst_not_dom_fixed:\n  assumes \"v \\<in> fv\\<^sub>s\\<^sub>t S\" and \"v \\<notin> subst_domain \\<delta>\"\n  shows \"v \\<in> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n  v \\<notin> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t [];\n     v \\<notin> subst_domain \\<delta>\\<rbrakk>\n    \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                               ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>\\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S;\n                 v \\<notin> subst_domain \\<delta>\\<rbrakk>\n                \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S);\n        v \\<notin> subst_domain \\<delta>\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                                  (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Cons x S')"], ["proof (state)\nthis:\n  \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S';\n   v \\<notin> subst_domain \\<delta>\\<rbrakk>\n  \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                             (S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S')\n  v \\<notin> subst_domain \\<delta>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t [];\n     v \\<notin> subst_domain \\<delta>\\<rbrakk>\n    \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                               ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>\\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S;\n                 v \\<notin> subst_domain \\<delta>\\<rbrakk>\n                \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S);\n        v \\<notin> subst_domain \\<delta>\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                                  (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have 1: \"\\<And>X. v \\<notin> subst_domain (rm_vars (set X) \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>X. v \\<notin> subst_domain (rm_vars (set X) \\<delta>)", "using Cons.prems(2) rm_vars_dom_subset"], ["proof (prove)\nusing this:\n  v \\<notin> subst_domain \\<delta>\n  subst_domain (rm_vars ?V ?s) \\<subseteq> subst_domain ?s\n\ngoal (1 subgoal):\n 1. \\<And>X. v \\<notin> subst_domain (rm_vars (set X) \\<delta>)", "by force"], ["proof (state)\nthis:\n  v \\<notin> subst_domain (rm_vars (set ?X) \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t [];\n     v \\<notin> subst_domain \\<delta>\\<rbrakk>\n    \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                               ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>a S.\n       \\<lbrakk>\\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S;\n                 v \\<notin> subst_domain \\<delta>\\<rbrakk>\n                \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S);\n        v \\<notin> subst_domain \\<delta>\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                                  (a # S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases \"v \\<in> fv\\<^sub>s\\<^sub>t S'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case True"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t S'\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S'\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using Cons.IH[OF _ Cons.prems(2)]"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S'\n  v \\<in> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n  v \\<in> fv\\<^sub>s\\<^sub>t (S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case False"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S'\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence 2: \"v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S'\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x", "using Cons.prems(1)"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t S'\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S')\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x", "by simp"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n             (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using Cons.prems(2) subst_not_dom_fixed"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<notin> subst_domain \\<delta>\n  \\<lbrakk>?v \\<in> fv ?t; ?v \\<notin> subst_domain ?s\\<rbrakk>\n  \\<Longrightarrow> ?v \\<in> fv (?t \\<cdot> ?s)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n             (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)", "case (Inequality X F)"], ["proof (state)\nthis:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)", "hence \"v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\""], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X", "using 2"], ["proof (prove)\nusing this:\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X", "by simp"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)", "hence \"v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s rm_vars (set X) \\<delta>)\""], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              rm_vars (set X) \\<delta>)", "using subst_not_dom_fixed[OF _ 1]"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  v \\<in> fv ?t \\<Longrightarrow>\n  v \\<in> fv (?t \\<cdot> rm_vars (set ?X1) \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n             (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n              rm_vars (set X) \\<delta>)", "by (induct F) (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n            rm_vars (set X) \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 4. \\<And>x41 x42.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n            rm_vars (set X) \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n             (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using Inequality 2"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n           (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n            rm_vars (set X) \\<delta>)\n  x = \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n             (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n           (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 2. \\<And>x2.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<notin> subst_domain \\<delta>;\n        \\<And>v t s.\n           \\<lbrakk>v \\<in> fv t; v \\<notin> subst_domain s\\<rbrakk>\n           \\<Longrightarrow> v \\<in> fv (t \\<cdot> s);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                                  (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p\n                                   \\<delta>)", "qed (force simp add: subst_domain_def)+"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n           (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<notin> fv\\<^sub>s\\<^sub>t S' \\<Longrightarrow>\n    v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p\n           (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t [];\n     v \\<notin> subst_domain \\<delta>\\<rbrakk>\n    \\<Longrightarrow> v \\<in> fv\\<^sub>s\\<^sub>t\n                               ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "qed simp"], ["", "lemma strand_vars_unfold: \"v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>S' x S''. S = S'@x#S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S' x S''.\n       S = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    \\<exists>S' x S''.\n       [] = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                \\<exists>S' x S''.\n                   S = S' @ x # S'' \\<and>\n                   v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<in> vars\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S' x S''.\n                            a # S = S' @ x # S'' \\<and>\n                            v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "case (Cons x S)"], ["proof (state)\nthis:\n  v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S' x S''.\n     S = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<in> vars\\<^sub>s\\<^sub>t (x # S)\n\ngoal (2 subgoals):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    \\<exists>S' x S''.\n       [] = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                \\<exists>S' x S''.\n                   S = S' @ x # S'' \\<and>\n                   v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<in> vars\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S' x S''.\n                            a # S = S' @ x # S'' \\<and>\n                            v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "thus ?case"], ["proof (prove)\nusing this:\n  v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S' x S''.\n     S = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<in> vars\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "proof (cases \"v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa\n 2. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "case True"], ["proof (state)\nthis:\n  v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa\n 2. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "by blast"], ["proof (state)\nthis:\n  \\<exists>S' xa S''.\n     x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "case False"], ["proof (state)\nthis:\n  v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "hence \"v \\<in> vars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t S", "using Cons.prems"], ["proof (prove)\nusing this:\n  v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<in> vars\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  v \\<in> vars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> vars\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> vars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "using Cons.IH"], ["proof (prove)\nusing this:\n  v \\<in> vars\\<^sub>s\\<^sub>t S\n  v \\<in> vars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S' x S''.\n     S = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa", "by (metis append_Cons)"], ["proof (state)\nthis:\n  \\<exists>S' xa S''.\n     x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S' xa S''.\n     x # S = S' @ xa # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p xa\n\ngoal (1 subgoal):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    \\<exists>S' x S''.\n       [] = S' @ x # S'' \\<and> v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "qed simp"], ["", "lemma strand_fv_unfold: \"v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>S' x S''. S = S'@x#S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S' x S''.\n       S = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    \\<exists>S' x S''.\n       [] = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                \\<exists>S' x S''.\n                   S = S' @ x # S'' \\<and>\n                   v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S' x S''.\n                            a # S = S' @ x # S'' \\<and>\n                            v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x", "case (Cons x S)"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S' x S''.\n     S = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S)\n\ngoal (2 subgoals):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    \\<exists>S' x S''.\n       [] = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n 2. \\<And>a S.\n       \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n                \\<exists>S' x S''.\n                   S = S' @ x # S'' \\<and>\n                   v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n        v \\<in> fv\\<^sub>s\\<^sub>t (a # S)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S' x S''.\n                            a # S = S' @ x # S'' \\<and>\n                            v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x", "thus ?case"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S' x S''.\n     S = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "proof (cases \"v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa\n 2. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "case True"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa\n 2. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "by blast"], ["proof (state)\nthis:\n  \\<exists>S' xa S''.\n     x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "case False"], ["proof (state)\nthis:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "hence \"v \\<in> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S", "using Cons.prems"], ["proof (prove)\nusing this:\n  v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  v \\<in> fv\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<lbrakk>v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n             \\<exists>S' x S''.\n                S = S' @ x # S'' \\<and>\n                v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x;\n     v \\<in> fv\\<^sub>s\\<^sub>t (x # S);\n     v \\<notin> fv\\<^sub>s\\<^sub>t\\<^sub>p x\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S' xa S''.\n                         x # S = S' @ xa # S'' \\<and>\n                         v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "using Cons.IH"], ["proof (prove)\nusing this:\n  v \\<in> fv\\<^sub>s\\<^sub>t S\n  v \\<in> fv\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S' x S''.\n     S = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. \\<exists>S' xa S''.\n       x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa", "by (metis append_Cons)"], ["proof (state)\nthis:\n  \\<exists>S' xa S''.\n     x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S' xa S''.\n     x # S = S' @ xa # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p xa\n\ngoal (1 subgoal):\n 1. v \\<in> fv\\<^sub>s\\<^sub>t [] \\<Longrightarrow>\n    \\<exists>S' x S''.\n       [] = S' @ x # S'' \\<and> v \\<in> fv\\<^sub>s\\<^sub>t\\<^sub>p x", "qed simp"], ["", "lemma subterm_if_in_strand_ik:\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> \\<exists>t'. Receive t' \\<in> set S \\<and> t \\<sqsubseteq> t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>t'.\n       receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S \\<and>\n       t \\<sqsubseteq> t'", "by (induct S rule: ik\\<^sub>s\\<^sub>t_induct) auto"], ["", "lemma fv_subset_if_in_strand_ik:\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "assume \"t \\<in> ik\\<^sub>s\\<^sub>t S\""], ["proof (state)\nthis:\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "then"], ["proof (chain)\npicking this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S", "obtain t' where \"Receive t' \\<in> set S\" \"t \\<sqsubseteq> t'\""], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. (\\<And>t'.\n        \\<lbrakk>receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n         t \\<sqsubseteq> t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis subterm_if_in_strand_ik)"], ["proof (state)\nthis:\n  receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\n  t \\<sqsubseteq> t'\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "hence \"fv t \\<subseteq> fv t'\""], ["proof (prove)\nusing this:\n  receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\n  t \\<sqsubseteq> t'\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> fv t'", "by (simp add: subtermeq_vars_subset)"], ["proof (state)\nthis:\n  fv t \\<subseteq> fv t'\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "thus ?thesis"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> fv t'\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "using in_strand_fv_subset_rcv[OF \\<open>Receive t' \\<in> set S\\<close>]"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> fv t'\n  fv t' \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))", "by auto"], ["proof (state)\nthis:\n  fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fv_subset_if_in_strand_ik':\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S", "using fv_subset_if_in_strand_ik[of t S] fv_snd_rcv_strand_subset(2)[of S]"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> fv\\<^sub>s\\<^sub>t S", "by blast"], ["", "lemma vars_subset_if_in_strand_ik2:\n  \"t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow> fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using fv_subset_if_in_strand_ik[of t S] vars_snd_rcv_strand_subset2(2)[of S]"], ["proof (prove)\nusing this:\n  t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  fv t \\<subseteq> \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v S))\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. t \\<in> ik\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by blast"], ["", "subsection \\<open>Lemmata: Simple Strands\\<close>"], ["", "lemma simple_Cons[dest]: \"simple (s#S) \\<Longrightarrow> simple S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. simple (s # S) \\<Longrightarrow> simple S", "unfolding simple_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (s # S) \\<Longrightarrow>\n    list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S", "by auto"], ["", "lemma simple_split[dest]:\n  assumes \"simple (S@S')\"\n  shows \"simple S\" \"simple S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. simple S &&& simple S'", "using assms"], ["proof (prove)\nusing this:\n  simple (S @ S')\n\ngoal (1 subgoal):\n 1. simple S &&& simple S'", "unfolding simple_def"], ["proof (prove)\nusing this:\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (S @ S')\n\ngoal (1 subgoal):\n 1. list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S &&&\n    list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S'", "by auto"], ["", "lemma simple_append[intro]: \"\\<lbrakk>simple S; simple S'\\<rbrakk> \\<Longrightarrow> simple (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>simple S; simple S'\\<rbrakk> \\<Longrightarrow> simple (S @ S')", "unfolding simple_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S;\n     list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S'\\<rbrakk>\n    \\<Longrightarrow> list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (S @ S')", "by auto"], ["", "lemma simple_append_sym[sym]: \"simple (S@S') \\<Longrightarrow> simple (S'@S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. simple (S @ S') \\<Longrightarrow> simple (S' @ S)", "by auto"], ["", "lemma not_simple_if_snd_fun: \"(\\<exists>S' S'' f X. S = S'@Send (Fun f X)#S'') \\<Longrightarrow> \\<not>simple S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S' S'' f X.\n       S =\n       S' @\n       send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<Longrightarrow>\n    \\<not> simple S", "unfolding simple_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S' S'' f X.\n       S =\n       S' @\n       send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'' \\<Longrightarrow>\n    \\<not> list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S", "by auto"], ["", "lemma not_list_all_elim: \"\\<not>list_all P A \\<Longrightarrow> \\<exists>B x C. A = B@x#C \\<and> \\<not>P x \\<and> list_all P B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C. A = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "proof (induction A rule: List.rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<not> list_all P [] \\<Longrightarrow>\n    \\<exists>B x C. [] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n 2. \\<And>x xs.\n       \\<lbrakk>\\<not> list_all P xs \\<Longrightarrow>\n                \\<exists>B x C.\n                   xs = B @ x # C \\<and> \\<not> P x \\<and> list_all P B;\n        \\<not> list_all P (xs @ [x])\\<rbrakk>\n       \\<Longrightarrow> \\<exists>B xa C.\n                            xs @ [x] = B @ xa # C \\<and>\n                            \\<not> P xa \\<and> list_all P B", "case (snoc a A)"], ["proof (state)\nthis:\n  \\<not> list_all P A \\<Longrightarrow>\n  \\<exists>B x C. A = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n  \\<not> list_all P (A @ [a])\n\ngoal (2 subgoals):\n 1. \\<not> list_all P [] \\<Longrightarrow>\n    \\<exists>B x C. [] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n 2. \\<And>x xs.\n       \\<lbrakk>\\<not> list_all P xs \\<Longrightarrow>\n                \\<exists>B x C.\n                   xs = B @ x # C \\<and> \\<not> P x \\<and> list_all P B;\n        \\<not> list_all P (xs @ [x])\\<rbrakk>\n       \\<Longrightarrow> \\<exists>B xa C.\n                            xs @ [x] = B @ xa # C \\<and>\n                            \\<not> P xa \\<and> list_all P B", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "proof (cases \"list_all P A\")"], ["proof (state)\ngoal (2 subgoals):\n 1. list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n 2. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "case True"], ["proof (state)\nthis:\n  list_all P A\n\ngoal (2 subgoals):\n 1. list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n 2. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "thus ?thesis"], ["proof (prove)\nusing this:\n  list_all P A\n\ngoal (1 subgoal):\n 1. \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "using snoc.prems"], ["proof (prove)\nusing this:\n  list_all P A\n  \\<not> list_all P (A @ [a])\n\ngoal (1 subgoal):\n 1. \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "by auto"], ["proof (state)\nthis:\n  \\<exists>B x C. A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n\ngoal (1 subgoal):\n 1. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "case False"], ["proof (state)\nthis:\n  \\<not> list_all P A\n\ngoal (1 subgoal):\n 1. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "then"], ["proof (chain)\npicking this:\n  \\<not> list_all P A", "obtain B x C where \"A = B@x#C\" \"\\<not>P x\" \"list_all P B\""], ["proof (prove)\nusing this:\n  \\<not> list_all P A\n\ngoal (1 subgoal):\n 1. (\\<And>B x C.\n        \\<lbrakk>A = B @ x # C; \\<not> P x; list_all P B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using snoc.IH[OF False]"], ["proof (prove)\nusing this:\n  \\<not> list_all P A\n  \\<exists>B x C. A = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n\ngoal (1 subgoal):\n 1. (\\<And>B x C.\n        \\<lbrakk>A = B @ x # C; \\<not> P x; list_all P B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A = B @ x # C\n  \\<not> P x\n  list_all P B\n\ngoal (1 subgoal):\n 1. \\<not> list_all P A \\<Longrightarrow>\n    \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "thus ?thesis"], ["proof (prove)\nusing this:\n  A = B @ x # C\n  \\<not> P x\n  list_all P B\n\ngoal (1 subgoal):\n 1. \\<exists>B x C.\n       A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "by auto"], ["proof (state)\nthis:\n  \\<exists>B x C. A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>B x C. A @ [a] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B\n\ngoal (1 subgoal):\n 1. \\<not> list_all P [] \\<Longrightarrow>\n    \\<exists>B x C. [] = B @ x # C \\<and> \\<not> P x \\<and> list_all P B", "qed simp"], ["", "lemma not_simple\\<^sub>s\\<^sub>t\\<^sub>p_elim:\n  assumes \"\\<not>simple\\<^sub>s\\<^sub>t\\<^sub>p x\"\n  shows \"(\\<exists>f T. x = Send (Fun f T)) \\<or> \n         (\\<exists>a t t'. x = Equality a t t') \\<or>\n         (\\<exists>X F. x = Inequality X F \\<and> \\<not>(\\<exists>\\<I>. ineq_model \\<I> X F))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>f T. x = send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t) \\<or>\n    (\\<exists>a t t'.\n        x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t) \\<or>\n    (\\<exists>X F.\n        x =\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F))", "using assms"], ["proof (prove)\nusing this:\n  \\<not> simple\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. (\\<exists>f T. x = send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t) \\<or>\n    (\\<exists>a t t'.\n        x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t) \\<or>\n    (\\<exists>X F.\n        x =\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F))", "by (cases x) (fastforce elim: simple\\<^sub>s\\<^sub>t\\<^sub>p.elims)+"], ["", "lemma not_simple_elim:\n  assumes \"\\<not>simple S\"\n  shows \"(\\<exists>A B f T. S = A@Send (Fun f T)#B \\<and> simple A) \\<or> \n         (\\<exists>A B a t t'. S = A@Equality a t t'#B \\<and> simple A) \\<or>\n         (\\<exists>A B X F. S = A@Inequality X F#B \\<and> \\<not>(\\<exists>\\<I>. ineq_model \\<I> X F))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>A B f T.\n        S = A @ send\\<langle>Fun f T\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B a t t'.\n        S =\n        A @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # B \\<and>\n        simple A) \\<or>\n    (\\<exists>A B X F.\n        S =\n        A @\n        \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n        B \\<and>\n        (\\<nexists>\\<I>. ineq_model \\<I> X F))", "by (metis assms not_list_all_elim not_simple\\<^sub>s\\<^sub>t\\<^sub>p_elim simple_def)"], ["", "lemma simple_fun_prefix_unique:\n  assumes \"A = S@Send (Fun f X)#S'\" \"simple S\"\n  shows \"\\<forall>T g Y T'. A = T@Send (Fun g Y)#T' \\<and> simple T \\<longrightarrow> S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "fix T g Y T'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "assume *: \"A = T@Send (Fun g Y)#T'\" \"simple T\""], ["proof (state)\nthis:\n  A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T'\n  simple T\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "{"], ["proof (state)\nthis:\n  A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T'\n  simple T\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "assume \"length S < length T\""], ["proof (state)\nthis:\n  length S < length T\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "hence False"], ["proof (prove)\nusing this:\n  length S < length T\n\ngoal (1 subgoal):\n 1. False", "using assms *"], ["proof (prove)\nusing this:\n  length S < length T\n  A = S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T'\n  simple T\n\ngoal (1 subgoal):\n 1. False", "by (metis id_take_nth_drop not_simple_if_snd_fun nth_append nth_append_length)"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "}"], ["proof (state)\nthis:\n  length S < length T \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "moreover"], ["proof (state)\nthis:\n  length S < length T \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "{"], ["proof (state)\nthis:\n  length S < length T \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "assume \"length S > length T\""], ["proof (state)\nthis:\n  length T < length S\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "hence False"], ["proof (prove)\nusing this:\n  length T < length S\n\ngoal (1 subgoal):\n 1. False", "using assms *"], ["proof (prove)\nusing this:\n  length T < length S\n  A = S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T'\n  simple T\n\ngoal (1 subgoal):\n 1. False", "by (metis id_take_nth_drop not_simple_if_snd_fun nth_append nth_append_length)"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "}"], ["proof (state)\nthis:\n  length T < length S \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "ultimately"], ["proof (chain)\npicking this:\n  length S < length T \\<Longrightarrow> False\n  length T < length S \\<Longrightarrow> False", "have \"S = T\""], ["proof (prove)\nusing this:\n  length S < length T \\<Longrightarrow> False\n  length T < length S \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. S = T", "using assms *"], ["proof (prove)\nusing this:\n  length S < length T \\<Longrightarrow> False\n  length T < length S \\<Longrightarrow> False\n  A = S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'\n  simple S\n  A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T'\n  simple T\n\ngoal (1 subgoal):\n 1. S = T", "by (meson List.append_eq_append_conv linorder_neqE_nat)"], ["proof (state)\nthis:\n  S = T\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>A =\n           ?T2 @ send\\<langle>Fun ?g2 ?Y2\\<rangle>\\<^sub>s\\<^sub>t # ?T'2;\n   simple ?T2\\<rbrakk>\n  \\<Longrightarrow> S = ?T2\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>A =\n           ?T2 @ send\\<langle>Fun ?g2 ?Y2\\<rangle>\\<^sub>s\\<^sub>t # ?T'2;\n   simple ?T2\\<rbrakk>\n  \\<Longrightarrow> S = ?T2\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "using assms(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>A =\n           ?T2 @ send\\<langle>Fun ?g2 ?Y2\\<rangle>\\<^sub>s\\<^sub>t # ?T'2;\n   simple ?T2\\<rbrakk>\n  \\<Longrightarrow> S = ?T2\n  A = S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'\n\ngoal (1 subgoal):\n 1. \\<forall>T g Y T'.\n       A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n       simple T \\<longrightarrow>\n       S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'", "by blast"], ["proof (state)\nthis:\n  \\<forall>T g Y T'.\n     A = T @ send\\<langle>Fun g Y\\<rangle>\\<^sub>s\\<^sub>t # T' \\<and>\n     simple T \\<longrightarrow>\n     S = T \\<and> f = g \\<and> X = Y \\<and> S' = T'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma simple_snd_is_var: \"\\<lbrakk>Send t \\<in> set S; simple S\\<rbrakk> \\<Longrightarrow> \\<exists>v. t = Var v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n     simple S\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v. t = Var v", "unfolding simple_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S;\n     list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S\\<rbrakk>\n    \\<Longrightarrow> \\<exists>v. t = Var v", "by (metis list_all_append list_all_simps(1) simple\\<^sub>s\\<^sub>t\\<^sub>p.elims(2) split_list_first\n          strand_step.distinct(1) strand_step.distinct(5) strand_step.inject(1))"], ["", "subsection \\<open>Lemmata: Strand Measure\\<close>"], ["", "lemma measure\\<^sub>s\\<^sub>t_wellfounded: \"wf measure\\<^sub>s\\<^sub>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf measure\\<^sub>s\\<^sub>t", "unfolding measure\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf (measures\n         [\\<lambda>(S, \\<theta>). card (fv\\<^sub>s\\<^sub>t S),\n          \\<lambda>(S, \\<theta>). size\\<^sub>s\\<^sub>t S])", "by simp"], ["", "lemma strand_size_append[iff]: \"size\\<^sub>s\\<^sub>t (S@S') = size\\<^sub>s\\<^sub>t S + size\\<^sub>s\\<^sub>t S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size\\<^sub>s\\<^sub>t (S @ S') =\n    size\\<^sub>s\\<^sub>t S + size\\<^sub>s\\<^sub>t S'", "by (induct S) (auto simp add: size\\<^sub>s\\<^sub>t_def)"], ["", "lemma strand_size_map_fun_lt[simp]:\n  \"size\\<^sub>s\\<^sub>t (map Send X) < size (Fun f X)\"\n  \"size\\<^sub>s\\<^sub>t (map Send X) < size\\<^sub>s\\<^sub>t [Send (Fun f X)]\"\n  \"size\\<^sub>s\\<^sub>t (map Send X) < size\\<^sub>s\\<^sub>t [Receive (Fun f X)]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size\\<^sub>s\\<^sub>t (map Send X) < size (Fun f X) &&&\n    size\\<^sub>s\\<^sub>t (map Send X)\n    < size\\<^sub>s\\<^sub>t\n       [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t] &&&\n    size\\<^sub>s\\<^sub>t (map Send X)\n    < size\\<^sub>s\\<^sub>t\n       [receive\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]", "by (induct X) (auto simp add: size\\<^sub>s\\<^sub>t_def)"], ["", "lemma strand_size_rm_fun_lt[simp]:\n  \"size\\<^sub>s\\<^sub>t (S@S') < size\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')\"\n  \"size\\<^sub>s\\<^sub>t (S@S') < size\\<^sub>s\\<^sub>t (S@Receive (Fun f X)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size\\<^sub>s\\<^sub>t (S @ S')\n    < size\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    size\\<^sub>s\\<^sub>t (S @ S')\n    < size\\<^sub>s\\<^sub>t\n       (S @ receive\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (induct S) (auto simp add: size\\<^sub>s\\<^sub>t_def)"], ["", "lemma strand_fv_card_map_fun_eq:\n  \"card (fv\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')) = card (fv\\<^sub>s\\<^sub>t (S@(map Send X)@S'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')) =\n    card (fv\\<^sub>s\\<^sub>t (S @ map Send X @ S'))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')) =\n    card (fv\\<^sub>s\\<^sub>t (S @ map Send X @ S'))", "have \"fv\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S') = fv\\<^sub>s\\<^sub>t (S@(map Send X)@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n    fv\\<^sub>s\\<^sub>t (S @ map Send X @ S')", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  fv\\<^sub>s\\<^sub>t (S @ map Send X @ S')\n\ngoal (1 subgoal):\n 1. card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')) =\n    card (fv\\<^sub>s\\<^sub>t (S @ map Send X @ S'))", "thus ?thesis"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') =\n  fv\\<^sub>s\\<^sub>t (S @ map Send X @ S')\n\ngoal (1 subgoal):\n 1. card\n     (fv\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')) =\n    card (fv\\<^sub>s\\<^sub>t (S @ map Send X @ S'))", "by simp"], ["proof (state)\nthis:\n  card\n   (fv\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')) =\n  card (fv\\<^sub>s\\<^sub>t (S @ map Send X @ S'))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_fv_card_rm_fun_le[simp]: \"card (fv\\<^sub>s\\<^sub>t (S@S')) \\<le> card (fv\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (fv\\<^sub>s\\<^sub>t (S @ S'))\n    \\<le> card\n           (fv\\<^sub>s\\<^sub>t\n             (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))", "by (force intro: card_mono)"], ["", "lemma strand_fv_card_rm_eq_le[simp]: \"card (fv\\<^sub>s\\<^sub>t (S@S')) \\<le> card (fv\\<^sub>s\\<^sub>t (S@Equality a t t'#S'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card (fv\\<^sub>s\\<^sub>t (S @ S'))\n    \\<le> card\n           (fv\\<^sub>s\\<^sub>t\n             (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))", "by (force intro: card_mono)"], ["", "subsection \\<open>Lemmata: Well-formed Strands\\<close>"], ["", "lemma wf_prefix[dest]: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma wf_vars_mono[simp]: \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> W) S", "proof (induction S arbitrary: V)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (V \\<union> W) []\n 2. \\<And>a S V.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (a # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (a # S)", "case (Cons x S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> W) S\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (V \\<union> W) []\n 2. \\<And>a S V.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (a # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (a # S)", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> W) S\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S", "using Cons.prems(1) Cons.IH"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t V (x # S)\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> W) S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "using Send"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "by (simp add: sup_commute sup_left_commute)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "case (Equality a t t')"], ["proof (state)\nthis:\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "proof (cases a)"], ["proof (state)\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "case Assign"], ["proof (state)\nthis:\n  a = assign\n\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\" \"fv t' \\<subseteq> V \\<union> W\""], ["proof (prove)\nusing this:\n  a = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S &&&\n    fv t' \\<subseteq> V \\<union> W", "using Equality Cons.prems(1) Cons.IH"], ["proof (prove)\nusing this:\n  a = assign\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t V (x # S)\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> W) S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S &&&\n    fv t' \\<subseteq> V \\<union> W", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\n  fv t' \\<subseteq> V \\<union> W\n\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\n  fv t' \\<subseteq> V \\<union> W\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "using Equality Assign"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> W) S\n  fv t' \\<subseteq> V \\<union> W\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  a = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "by (simp add: sup_commute sup_left_commute)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "case Check"], ["proof (state)\nthis:\n  a = check\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = check\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "using Equality Cons"], ["proof (prove)\nusing this:\n  a = check\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> W) S\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n 2. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t (V \\<union> W) S;\n        wf\\<^sub>s\\<^sub>t V (x # S);\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)", "qed auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> W) (x # S)\n\ngoal (1 subgoal):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (V \\<union> W) []", "qed simp"], ["", "lemma wf\\<^sub>s\\<^sub>tI[intro]: \"wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V []\n 2. \\<And>a S.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (a # S) \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (a # S)", "case (Cons x S)"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V\n\ngoal (2 subgoals):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V []\n 2. \\<And>a S.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (a # S) \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (a # S)", "thus ?case"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "hence \"wf\\<^sub>s\\<^sub>t V S\" \"V \\<union> fv t = V\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S &&& V \\<union> fv t = V", "using Cons"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S &&& V \\<union> fv t = V", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V S\n  V \\<union> fv t = V\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  V \\<union> fv t = V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "using Send"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  V \\<union> fv t = V\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "case (Equality a t t')"], ["proof (state)\nthis:\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "proof (cases a)"], ["proof (state)\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "case Assign"], ["proof (state)\nthis:\n  a = assign\n\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "hence \"wf\\<^sub>s\\<^sub>t V S\" \"fv t' \\<subseteq> V\""], ["proof (prove)\nusing this:\n  a = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S &&& fv t' \\<subseteq> V", "using Equality Cons"], ["proof (prove)\nusing this:\n  a = assign\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S &&& fv t' \\<subseteq> V", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t' \\<subseteq> V\n\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t' \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "using wf_vars_mono Equality Assign"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t ?V ?S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> ?W) ?S\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  a = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "case Check"], ["proof (state)\nthis:\n  a = check\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = check\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "using Equality Cons"], ["proof (prove)\nusing this:\n  a = check\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wfrestrictedvars\\<^sub>s\\<^sub>t S \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x41 x42.\n       \\<lbrakk>wfrestrictedvars\\<^sub>s\\<^sub>t S\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        wfrestrictedvars\\<^sub>s\\<^sub>t (x # S) \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "qed simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V []", "qed simp"], ["", "lemma wf\\<^sub>s\\<^sub>tI'[intro]: \"\\<Union>(fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union> \\<Union>(fv_r\\<^sub>e\\<^sub>q assign ` set S) \\<subseteq> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n    \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set []) \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set [])\n    \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V []\n 2. \\<And>a S.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (a # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (a # S))\n        \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (a # S)", "case (Cons x S)"], ["proof (state)\nthis:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n  \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n  \\<subseteq> V\n\ngoal (2 subgoals):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set []) \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set [])\n    \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V []\n 2. \\<And>a S.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (a # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (a # S))\n        \\<subseteq> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (a # S)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n  \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n  \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "case (Equality a t t')"], ["proof (state)\nthis:\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "using Cons"], ["proof (prove)\nusing this:\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n  \\<subseteq> V \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n  \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (x # S)", "by (cases a) auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 2. \\<And>x2.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S) \\<union>\n                \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S)\n                \\<subseteq> V \\<Longrightarrow>\n                wf\\<^sub>s\\<^sub>t V S;\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set (x # S)) \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set (x # S))\n        \\<subseteq> V;\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (x # S)", "qed simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (x # S)\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set []) \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set [])\n    \\<subseteq> V \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V []", "qed simp"], ["", "lemma wf_append_exec: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "proof (induction S arbitrary: V)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ S') \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t []) S'\n 2. \\<And>a S V.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((a # S) @ S')\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (a # S)) S'", "case (Cons x S V)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V (S @ S') \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n  wf\\<^sub>s\\<^sub>t V ((x # S) @ S')\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ S') \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t []) S'\n 2. \\<And>a S V.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((a # S) @ S')\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (a # S)) S'", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V (S @ S') \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n  wf\\<^sub>s\\<^sub>t V ((x # S) @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "using Cons.prems Cons.IH"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t V ((x # S) @ S')\n  wf\\<^sub>s\\<^sub>t ?V (S @ S') \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S)\n   S'\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S)\n   S'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "using Send"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S)\n   S'\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "by (auto simp add: sup_assoc)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "case (Equality a t t')"], ["proof (state)\nthis:\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "proof (cases a)"], ["proof (state)\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "case Assign"], ["proof (state)\nthis:\n  a = assign\n\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\""], ["proof (prove)\nusing this:\n  a = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "using Equality Cons.prems Cons.IH"], ["proof (prove)\nusing this:\n  a = assign\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t V ((x # S) @ S')\n  wf\\<^sub>s\\<^sub>t ?V (S @ S') \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S)\n   S'\n\ngoal (2 subgoals):\n 1. a = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S)\n   S'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "using Equality Assign"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S)\n   S'\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  a = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "by (auto simp add: sup_assoc)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "case Check"], ["proof (state)\nthis:\n  a = check\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\""], ["proof (prove)\nusing this:\n  a = check\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "using Equality Cons.prems Cons.IH"], ["proof (prove)\nusing this:\n  a = check\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t V ((x # S) @ S')\n  wf\\<^sub>s\\<^sub>t ?V (S @ S') \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (?V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n\ngoal (1 subgoal):\n 1. a = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "using Equality Check"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S'\n  x = \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  a = check\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "by (auto simp add: sup_assoc)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n\ngoal (2 subgoals):\n 1. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n 2. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) S';\n        wf\\<^sub>s\\<^sub>t V ((x # S) @ S');\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'", "qed auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (x # S)) S'\n\ngoal (1 subgoal):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ S') \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t []) S'", "qed simp"], ["", "lemma wf_append_suffix:\n  \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wfrestrictedvars\\<^sub>s\\<^sub>t S' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n     wfrestrictedvars\\<^sub>s\\<^sub>t S'\n     \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')", "proof (induction V S rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsSnd V t S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence *: \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S", "by simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wfrestrictedvars\\<^sub>s\\<^sub>t S' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv t)", "using ConsSnd.prems(2)"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv t)", "by fastforce"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using ConsSnd.IH *"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsRcv V t S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')\n  wf\\<^sub>s\\<^sub>t V (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence *: \"fv t \\<subseteq> V\" \"wf\\<^sub>s\\<^sub>t V S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')\n  wf\\<^sub>s\\<^sub>t V (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> V &&& wf\\<^sub>s\\<^sub>t V S", "by simp_all"], ["proof (state)\nthis:\n  fv t \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t V S\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wfrestrictedvars\\<^sub>s\\<^sub>t S' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t V S\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "using ConsRcv.prems(2)"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t V S\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by fastforce"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using ConsRcv.IH *"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t V S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsEq V t t' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S)\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence *: \"fv t' \\<subseteq> V\" \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S)\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V &&& wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S", "by simp_all"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "moreover"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "have \"vars\\<^sub>s\\<^sub>t\\<^sub>p (Equality Assign t t') = fv t \\<union> fv t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars\\<^sub>s\\<^sub>t\\<^sub>p\n     \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t =\n    fv t \\<union> fv t'", "by simp"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t =\n  fv t \\<union> fv t'\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "moreover"], ["proof (state)\nthis:\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t =\n  fv t \\<union> fv t'\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "have \"wfrestrictedvars\\<^sub>s\\<^sub>t (Equality Assign t t'#S) = fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t\n     (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "ultimately"], ["proof (chain)\npicking this:\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t =\n  fv t \\<union> fv t'\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S", "have \"wfrestrictedvars\\<^sub>s\\<^sub>t S' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t =\n  fv t \\<union> fv t'\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv t)", "using ConsEq.prems(2)"], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  vars\\<^sub>s\\<^sub>t\\<^sub>p\n   \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t =\n  fv t \\<union> fv t'\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t S'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv t)", "by blast"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using ConsEq.IH *"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t S'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   wfrestrictedvars\\<^sub>s\\<^sub>t S'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (3 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 wfrestrictedvars\\<^sub>s\\<^sub>t S'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        wfrestrictedvars\\<^sub>s\\<^sub>t S'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "qed (simp_all add: wf\\<^sub>s\\<^sub>tI)"], ["", "lemma wf_append_suffix':\n  assumes \"wf\\<^sub>s\\<^sub>t V S\"\n    and \"\\<Union>(fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union> \\<Union>(fv_r\\<^sub>e\\<^sub>q assign ` set S') \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\"\n  shows \"wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S')", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S')", "proof (induction V S rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsSnd V t S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n   \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence *: \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n   \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S", "by simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "have \"wfvarsoccs\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t#S) = fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t\n     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S", "unfolding wfvarsoccs\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p\n            (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S))) =\n    fv t \\<union> \\<Union> (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S))", "by simp"], ["proof (state)\nthis:\n  wfvarsoccs\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"(\\<Union>a\\<in>set S'. fv\\<^sub>r\\<^sub>c\\<^sub>v a) \\<union> (\\<Union>a\\<in>set S'. fv_r\\<^sub>e\\<^sub>q assign a) \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\""], ["proof (prove)\nusing this:\n  wfvarsoccs\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n    \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)", "using ConsSnd.prems(2)"], ["proof (prove)\nusing this:\n  wfvarsoccs\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n    \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)", "unfolding wfvarsoccs\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<Union>\n   (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p\n          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S))) =\n  fv t \\<union> \\<Union> (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S))\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> \\<Union>\n               (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p\n                      (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                       S))) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n    \\<subseteq> \\<Union>\n                 (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S)) \\<union>\n                (V \\<union> fv t)", "by auto"], ["proof (state)\nthis:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv t)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using ConsSnd.IH[OF *]"], ["proof (prove)\nusing this:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n              (V \\<union> fv t) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsEq V t t' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n   \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S)\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence *: \"fv t' \\<subseteq> V\" \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S;\n   \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n   \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S)\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V &&& wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S", "by simp_all"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "have \"wfvarsoccs\\<^sub>s\\<^sub>t (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t#S) = fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t\n     (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S", "unfolding wfvarsoccs\\<^sub>s\\<^sub>t_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union>\n     (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p\n            (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S))) =\n    fv t \\<union> \\<Union> (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S))", "by simp"], ["proof (state)\nthis:\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"(\\<Union>a\\<in>set S'. fv\\<^sub>r\\<^sub>c\\<^sub>v a) \\<union> (\\<Union>a\\<in>set S'. fv_r\\<^sub>e\\<^sub>q assign a) \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\""], ["proof (prove)\nusing this:\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n    \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)", "using ConsEq.prems(2)"], ["proof (prove)\nusing this:\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n    \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)", "unfolding wfvarsoccs\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<Union>\n   (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p\n          (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S))) =\n  fv t \\<union> \\<Union> (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S))\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> \\<Union>\n               (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p\n                      (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                       S))) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n    \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n    \\<subseteq> \\<Union>\n                 (set (map wfvarsoccs\\<^sub>s\\<^sub>t\\<^sub>p S)) \\<union>\n                (V \\<union> fv t)", "by auto"], ["proof (state)\nthis:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using ConsEq.IH[OF *(2)] *(1)"], ["proof (prove)\nusing this:\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t)\n  \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n  \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n              (V \\<union> fv t) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) (S @ S')\n  fv t' \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V [];\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s t S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t # S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n                 \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n                 \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S);\n        \\<Union> (fv\\<^sub>r\\<^sub>c\\<^sub>v ` set S') \\<union>\n        \\<Union> (fv_r\\<^sub>e\\<^sub>q assign ` set S')\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "qed (auto simp add: wf\\<^sub>s\\<^sub>tI')"], ["", "lemma wf_send_compose: \"wf\\<^sub>s\\<^sub>t V (S@(map Send X)@S') = wf\\<^sub>s\\<^sub>t V (S@Send (Fun f X)#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n    wf\\<^sub>s\\<^sub>t V\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "proof (induction S arbitrary: V)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>a S V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ((a # S) @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ((a # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "case Nil"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>a S V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ((a # S) @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ((a # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V ([] @ map Send X @ S') =\n    wf\\<^sub>s\\<^sub>t V\n     ([] @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "proof (induction X arbitrary: V)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send [] @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f []\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>a X V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V ([] @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            ([] @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send (a # X) @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f (a # X)\\<rangle>\\<^sub>s\\<^sub>t # S')", "case (Cons y Y)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V ([] @ map Send Y @ S') =\n  wf\\<^sub>s\\<^sub>t ?V\n   ([] @ send\\<langle>Fun f Y\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send [] @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f []\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>a X V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V ([] @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            ([] @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send (a # X) @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f (a # X)\\<rangle>\\<^sub>s\\<^sub>t # S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V ([] @ map Send Y @ S') =\n  wf\\<^sub>s\\<^sub>t ?V\n   ([] @ send\\<langle>Fun f Y\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V ([] @ map Send (y # Y) @ S') =\n    wf\\<^sub>s\\<^sub>t V\n     ([] @ send\\<langle>Fun f (y # Y)\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (simp add: sup_assoc)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ([] @ map Send (y # Y) @ S') =\n  wf\\<^sub>s\\<^sub>t V\n   ([] @ send\\<langle>Fun f (y # Y)\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>V.\n       wf\\<^sub>s\\<^sub>t V ([] @ map Send [] @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ([] @ send\\<langle>Fun f []\\<rangle>\\<^sub>s\\<^sub>t # S')", "qed simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ([] @ map Send X @ S') =\n  wf\\<^sub>s\\<^sub>t V\n   ([] @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>a S V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ((a # S) @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ((a # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a S V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ((a # S) @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ((a # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "case (Cons s S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V (S @ map Send X @ S') =\n  wf\\<^sub>s\\<^sub>t ?V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>a S V.\n       (\\<And>V.\n           wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n           wf\\<^sub>s\\<^sub>t V\n            (S @\n             send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n             S')) \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t V ((a # S) @ map Send X @ S') =\n       wf\\<^sub>s\\<^sub>t V\n        ((a # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V (S @ map Send X @ S') =\n  wf\\<^sub>s\\<^sub>t ?V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n    wf\\<^sub>s\\<^sub>t V\n     ((s # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "proof (cases s)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "case (Equality ac t t')"], ["proof (state)\nthis:\n  s = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "thus ?thesis"], ["proof (prove)\nusing this:\n  s = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n    wf\\<^sub>s\\<^sub>t V\n     ((s # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "using Cons"], ["proof (prove)\nusing this:\n  s = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t ?V (S @ map Send X @ S') =\n  wf\\<^sub>s\\<^sub>t ?V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n    wf\\<^sub>s\\<^sub>t V\n     ((s # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (cases ac) auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n  wf\\<^sub>s\\<^sub>t V\n   ((s # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V (S @ map Send X @ S') =\n                   wf\\<^sub>s\\<^sub>t V\n                    (S @\n                     send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n        s =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n                         wf\\<^sub>s\\<^sub>t V\n                          ((s # S) @\n                           send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "qed auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ((s # S) @ map Send X @ S') =\n  wf\\<^sub>s\\<^sub>t V\n   ((s # S) @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wf_snd_append[iff]: \"wf\\<^sub>s\\<^sub>t V (S@[Send t]) = wf\\<^sub>s\\<^sub>t V S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) =\n    wf\\<^sub>s\\<^sub>t V S", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) simp_all"], ["", "lemma wf_snd_append': \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (Send t#S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)", "by simp"], ["", "lemma wf_rcv_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Receive t#S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S') \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V (S @ S')", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) simp_all"], ["", "lemma wf_rcv_append'[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S@S'); fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Receive t#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n     fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                       (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "case (ConsRcv V t' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "hence \"wf\\<^sub>s\\<^sub>t V (S@S')\" \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') &&&\n    fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by auto+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ConsRcv"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "case (ConsEq V t' t'' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t') (S @ S');\n   fv t\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t')\n                     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "hence \"fv t'' \\<subseteq> V\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t') (S @ S');\n   fv t\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t')\n                     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. fv t'' \\<subseteq> V", "by simp"], ["proof (state)\nthis:\n  fv t'' \\<subseteq> V\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "moreover"], ["proof (state)\nthis:\n  fv t'' \\<subseteq> V\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "have\n      \"wfrestrictedvars\\<^sub>s\\<^sub>t (Equality Assign t' t''#S) = fv t' \\<union> fv t'' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t\n     (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    fv t' \\<union> fv t'' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t' \\<union> fv t'' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "ultimately"], ["proof (chain)\npicking this:\n  fv t'' \\<subseteq> V\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t' \\<union> fv t'' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S", "have \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t')\""], ["proof (prove)\nusing this:\n  fv t'' \\<subseteq> V\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t' \\<union> fv t'' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv t')", "using ConsEq.prems(2)"], ["proof (prove)\nusing this:\n  fv t'' \\<subseteq> V\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  fv t' \\<union> fv t'' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. fv t\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv t')", "by blast"], ["proof (state)\nthis:\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t')\n\ngoal (5 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "thus ?case"], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ConsEq"], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv t')\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv t') (S @ S');\n   fv t\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv t')\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv t')\n                     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (4 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S')", "qed auto"], ["", "lemma wf_rcv_append''[intro]: \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V S; fv t \\<subseteq> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Receive t])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n     fv t\n     \\<subseteq> \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                       (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])", "by (induct S)\n   (simp, metis vars_snd_rcv_strand_subset2(1) append_Nil2 le_supI1 order_trans wf_rcv_append')"], ["", "lemma wf_rcv_append'''[intro]: \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V S; fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Receive t])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n     fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                       (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])", "by (simp add: wf_rcv_append'[of _ _ \"[]\"])"], ["", "lemma wf_eq_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Equality a t t'#S') \\<Longrightarrow> fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n              (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n     fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 ([] @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (Nil V)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ([] @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 ([] @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S'\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   ([] @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S'", "by (cases a) auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S'\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 ([] @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "moreover"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S'\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 ([] @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "have \"V \\<union> fv t = V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. V \\<union> fv t = V", "using Nil"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   ([] @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\n\ngoal (1 subgoal):\n 1. V \\<union> fv t = V", "by auto"], ["proof (state)\nthis:\n  V \\<union> fv t = V\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 ([] @\n                  \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V ([] @ S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "ultimately"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S'\n  V \\<union> fv t = V", "show ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S'\n  V \\<union> fv t = V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V ([] @ S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V ([] @ S')\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsRcv V u S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t V (S @ Equality a t t' # S')\" \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\" \"fv u \\<subseteq> V\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V &&&\n    fv u \\<subseteq> V", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv u \\<subseteq> V\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv u \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S')", "using ConsRcv.IH"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  fv u \\<subseteq> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using \\<open>fv u \\<subseteq> V\\<close>"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv u \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 2. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 2. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "case (ConsEq V u u' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   fv t\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 2. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@Equality a t t'#S')\" \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\" \"fv u' \\<subseteq> V\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   fv t\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n     (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') &&&\n    fv t\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv u) &&&\n    fv u' \\<subseteq> V", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n  fv u' \\<subseteq> V\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 2. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@S')\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n  fv u' \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')", "using ConsEq.IH"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n   (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  fv t\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n  fv u' \\<subseteq> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n            (S @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   fv t\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 2. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "using \\<open>fv u' \\<subseteq> V\\<close>"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv u' \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           S')\n 2. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                          (S @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S');\n                 fv t\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S @ S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n        fv t\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           S')", "qed auto"], ["", "lemma wf_eq_append'[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S@S'); fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Equality a t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n     fv t'\n     \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                       (S @\n                        \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                        S')", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "case Nil"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V_ ([] @ S')\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V_\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V_ ([] @ S')\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t [] \\<union> V_\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V_\n     ([] @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (cases a) auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V_\n   ([] @ \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "case (ConsEq V u u' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@S')\" \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S') &&&\n    fv t'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ConsEq"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "case (ConsEq2 V u u' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ConsEq2"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "case (ConsRcv V u S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t V (S@S')\" \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') &&&\n    fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ConsRcv"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "case (ConsSnd V u S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@S')\" \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S') &&&\n    fv t'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                (V \\<union> fv u)", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ConsSnd"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      S')\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           \\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                           S')", "qed auto"], ["", "lemma wf_eq_append''[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S@S'); fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Equality a t t']@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n     fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                       (S @\n                        [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                        S')", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "case Nil"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V_ ([] @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V_\n\ngoal (6 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V ([] @ S');\n        fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ([] @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 5. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 6. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V_ ([] @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t [] \\<union> V_\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V_\n     ([] @ [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "by (cases a) auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V_\n   ([] @ [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "case (ConsEq V u u' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@S')\" \"fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S') &&&\n    fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n\ngoal (5 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv s) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv s)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv s)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>assign: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 5. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "using ConsEq"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>assign: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "case (ConsEq2 V u u' S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@S')\" \"fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S') &&&\n    fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n\ngoal (4 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V s ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<langle>check: s \\<doteq> ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 4. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "using ConsEq2"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V \\<union> fv u\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((\\<langle>check: u \\<doteq> u'\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "case (ConsRcv V u S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t V (S@S')\" \"fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') &&&\n    fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V", "by fastforce+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (3 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 3. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "using ConsRcv"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n   fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((receive\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')\n\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "case (ConsSnd V u S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S@S')\" \"fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S') &&&\n    fv t'\n    \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n\ngoal (2 subgoals):\n 1. \\<And>V ta S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv ta) (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             (V \\<union> fv ta)\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv ta)\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @ S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')\n 2. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "using ConsSnd"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S')\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> (V \\<union> fv u)\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t (V \\<union> fv u) (S @ S');\n   fv t'\n   \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n               (V \\<union> fv u)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (V \\<union> fv u)\n                     (S @\n                      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                      S')\n  wf\\<^sub>s\\<^sub>t V ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @ S')\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n               (send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) \\<union>\n              V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n      [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   ((send\\<langle>u\\<rangle>\\<^sub>s\\<^sub>t # S) @\n    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @ S')\n\ngoal (1 subgoal):\n 1. \\<And>V uu_ uv_ S.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V (S @ S');\n                 fv t'\n                 \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n                             V\\<rbrakk>\n                \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                                   (S @\n                                    [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                                    S');\n        wf\\<^sub>s\\<^sub>t V\n         ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n           S) @\n          S');\n        fv t'\n        \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t\n                     (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) \\<union>\n                    V\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                          ((\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                            S) @\n                           [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] @\n                           S')", "qed auto"], ["", "lemma wf_eq_append'''[intro]:\n  \"\\<lbrakk>wf\\<^sub>s\\<^sub>t V S; fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk> \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Equality a t t'])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n     fv t'\n     \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<union> V\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V\n                       (S @\n                        [\\<langle>a: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])", "by (simp add: wf_eq_append'[of _ _ \"[]\"])"], ["", "lemma wf_eq_check_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Equality Check t t'#S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @\n      \\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S') \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V (S @ S')", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) simp_all"], ["", "lemma wf_eq_check_append'[intro]: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Equality Check t t'#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V\n     (S @ \\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma wf_eq_check_append''[intro]: \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Equality Check t t'])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V\n     (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma wf_ineq_append[dest]: \"wf\\<^sub>s\\<^sub>t V (S@Inequality X F#S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @\n      \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n      S') \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V (S @ S')", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) simp_all"], ["", "lemma wf_ineq_append'[intro]: \"wf\\<^sub>s\\<^sub>t V (S@S') \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@Inequality X F#S')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V (S @ S') \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V\n     (S @ \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S')", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma wf_ineq_append''[intro]: \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t V (S@[Inequality X F])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t V\n     (S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "by (induct S rule: wf\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma wf_rcv_fv_single[elim]: \"wf\\<^sub>s\\<^sub>t V (Receive t#S') \\<Longrightarrow> fv t \\<subseteq> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S') \\<Longrightarrow>\n    fv t \\<subseteq> V", "by simp"], ["", "lemma wf_rcv_fv: \"wf\\<^sub>s\\<^sub>t V (S@Receive t#S') \\<Longrightarrow> fv t \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S') \\<Longrightarrow>\n    fv t \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V", "by (induct S arbitrary: V) (auto split!: strand_step.split poscheckvariant.split)"], ["", "lemma wf_eq_fv: \"wf\\<^sub>s\\<^sub>t V (S@Equality Assign t t'#S') \\<Longrightarrow> fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @\n      \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S') \\<Longrightarrow>\n    fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V", "by (induct S arbitrary: V) (auto split!: strand_step.split poscheckvariant.split)"], ["", "lemma wf_simple_fv_occurrence:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"simple S\" \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\"\n  shows \"\\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send (Var v)#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "proof (induction S rule: List.rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t {} []; simple [];\n     v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t []\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                         S\\<^sub>s\\<^sub>u\\<^sub>f.\n                         [] =\n                         S\\<^sub>p\\<^sub>r\\<^sub>e @\n                         send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                         S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                         v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t {} xs; simple xs;\n                 v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t xs\\<rbrakk>\n                \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f.\n                                     xs =\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                     send\\<langle>Var\n             v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n           S\\<^sub>p\\<^sub>r\\<^sub>e;\n        wf\\<^sub>s\\<^sub>t {} (xs @ [x]); simple (xs @ [x]);\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (xs @ [x])\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            xs @ [x] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n  S\\<^sub>p\\<^sub>r\\<^sub>e", "case (snoc x S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n   v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<rbrakk>\n  \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                       S\\<^sub>s\\<^sub>u\\<^sub>f.\n                       S =\n                       S\\<^sub>p\\<^sub>r\\<^sub>e @\n                       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e\n  wf\\<^sub>s\\<^sub>t {} (S @ [x])\n  simple (S @ [x])\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ [x])\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t {} []; simple [];\n     v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t []\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                         S\\<^sub>s\\<^sub>u\\<^sub>f.\n                         [] =\n                         S\\<^sub>p\\<^sub>r\\<^sub>e @\n                         send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                         S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                         v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t {} xs; simple xs;\n                 v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t xs\\<rbrakk>\n                \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f.\n                                     xs =\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                     send\\<langle>Var\n             v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n           S\\<^sub>p\\<^sub>r\\<^sub>e;\n        wf\\<^sub>s\\<^sub>t {} (xs @ [x]); simple (xs @ [x]);\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (xs @ [x])\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            xs @ [x] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n  S\\<^sub>p\\<^sub>r\\<^sub>e", "from \\<open>wf\\<^sub>s\\<^sub>t {} (S@[x])\\<close>"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t {} (S @ [x])", "have \"wf\\<^sub>s\\<^sub>t {} S\" \"wf\\<^sub>s\\<^sub>t (wfrestrictedvars\\<^sub>s\\<^sub>t S) [x]\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} (S @ [x])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} S &&&\n    wf\\<^sub>s\\<^sub>t (wfrestrictedvars\\<^sub>s\\<^sub>t S) [x]", "using wf_append_exec[THEN wf_vars_mono, of \"{}\" S \"[x]\" \"wfrestrictedvars\\<^sub>s\\<^sub>t S - wfvarsoccs\\<^sub>s\\<^sub>t S\"]\n          vars_snd_rcv_strand_subset2(4)[of S]\n          Diff_partition[of \"wfvarsoccs\\<^sub>s\\<^sub>t S\" \"wfrestrictedvars\\<^sub>s\\<^sub>t S\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} (S @ [x])\n  wf\\<^sub>s\\<^sub>t {} (S @ [x]) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t\n   ({} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n    (wfrestrictedvars\\<^sub>s\\<^sub>t S - wfvarsoccs\\<^sub>s\\<^sub>t S))\n   [x]\n  wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  wfvarsoccs\\<^sub>s\\<^sub>t S \\<union>\n  (wfrestrictedvars\\<^sub>s\\<^sub>t S - wfvarsoccs\\<^sub>s\\<^sub>t S) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} S &&&\n    wf\\<^sub>s\\<^sub>t (wfrestrictedvars\\<^sub>s\\<^sub>t S) [x]", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  wf\\<^sub>s\\<^sub>t (wfrestrictedvars\\<^sub>s\\<^sub>t S) [x]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t {} []; simple [];\n     v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t []\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                         S\\<^sub>s\\<^sub>u\\<^sub>f.\n                         [] =\n                         S\\<^sub>p\\<^sub>r\\<^sub>e @\n                         send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                         S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                         v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t {} xs; simple xs;\n                 v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t xs\\<rbrakk>\n                \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f.\n                                     xs =\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                     send\\<langle>Var\n             v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n           S\\<^sub>p\\<^sub>r\\<^sub>e;\n        wf\\<^sub>s\\<^sub>t {} (xs @ [x]); simple (xs @ [x]);\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (xs @ [x])\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            xs @ [x] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n  S\\<^sub>p\\<^sub>r\\<^sub>e", "from \\<open>simple (S@[x])\\<close>"], ["proof (chain)\npicking this:\n  simple (S @ [x])", "have \"simple S\" \"simple\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\nusing this:\n  simple (S @ [x])\n\ngoal (1 subgoal):\n 1. simple S &&& simple\\<^sub>s\\<^sub>t\\<^sub>p x", "unfolding simple_def"], ["proof (prove)\nusing this:\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (S @ [x])\n\ngoal (1 subgoal):\n 1. list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S &&&\n    simple\\<^sub>s\\<^sub>t\\<^sub>p x", "by auto"], ["proof (state)\nthis:\n  simple S\n  simple\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t {} []; simple [];\n     v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t []\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                         S\\<^sub>s\\<^sub>u\\<^sub>f.\n                         [] =\n                         S\\<^sub>p\\<^sub>r\\<^sub>e @\n                         send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                         S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                         v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t {} xs; simple xs;\n                 v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t xs\\<rbrakk>\n                \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f.\n                                     xs =\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                     send\\<langle>Var\n             v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n           S\\<^sub>p\\<^sub>r\\<^sub>e;\n        wf\\<^sub>s\\<^sub>t {} (xs @ [x]); simple (xs @ [x]);\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (xs @ [x])\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            xs @ [x] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n  S\\<^sub>p\\<^sub>r\\<^sub>e", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "proof (cases \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "case False"], ["proof (state)\nthis:\n  v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "case (Receive t)"], ["proof (state)\nthis:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "hence \"fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using \\<open>wf\\<^sub>s\\<^sub>t (wfrestrictedvars\\<^sub>s\\<^sub>t S) [x]\\<close>"], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t (wfrestrictedvars\\<^sub>s\\<^sub>t S) [x]\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by simp"], ["proof (state)\nthis:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "hence \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using \\<open>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (S@[x])\\<close> \\<open>x = Receive t\\<close>"], ["proof (prove)\nusing this:\n  fv t \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ [x])\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "using \\<open>x = Receive t\\<close> snoc.IH[OF \\<open>wf\\<^sub>s\\<^sub>t {} S\\<close> \\<open>simple S\\<close>]"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [x] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "hence \"v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "using \\<open>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (S@[x])\\<close> False"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ [x])\n  v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x", "by auto"], ["proof (state)\nthis:\n  v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "from Send"], ["proof (chain)\npicking this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t", "obtain w where \"t = Var w\""], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. (\\<And>w. t = Var w \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using \\<open>simple\\<^sub>s\\<^sub>t\\<^sub>p x\\<close>"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  simple\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. (\\<And>w. t = Var w \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by (cases t) simp_all"], ["proof (state)\nthis:\n  t = Var w\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "hence \"v = w\""], ["proof (prove)\nusing this:\n  t = Var w\n\ngoal (1 subgoal):\n 1. v = w", "using \\<open>x = Send t\\<close> \\<open>v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\\<close>"], ["proof (prove)\nusing this:\n  t = Var w\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<in> vars\\<^sub>s\\<^sub>t\\<^sub>p x\n\ngoal (1 subgoal):\n 1. v = w", "by simp"], ["proof (state)\nthis:\n  v = w\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = w\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "using \\<open>x = Send t\\<close> \\<open>v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<close> \\<open>t = Var w\\<close>"], ["proof (prove)\nusing this:\n  v = w\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  t = Var w\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "by auto"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [x] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "case (Equality ac t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "using snoc.prems(2)"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  simple (S @ [x])\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "unfolding simple_def"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (S @ [x])\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "by auto"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [x] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "case (Inequality t t')"], ["proof (state)\nthis:\n  x = \\<forall>t\\<langle>\\<or>\\<noteq>: t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n          S @ [x] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                      S\\<^sub>p\\<^sub>r\\<^sub>e", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<forall>t\\<langle>\\<or>\\<noteq>: t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "using False snoc.prems(3)"], ["proof (prove)\nusing this:\n  x = \\<forall>t\\<langle>\\<or>\\<noteq>: t'\\<rangle>\\<^sub>s\\<^sub>t\n  v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ [x])\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "by auto"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [x] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [x] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [x] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e", "qed (use snoc.IH[OF \\<open>wf\\<^sub>s\\<^sub>t {} S\\<close> \\<open>simple S\\<close>] in fastforce)"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [x] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t {} []; simple [];\n     v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t []\\<rbrakk>\n    \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                         S\\<^sub>s\\<^sub>u\\<^sub>f.\n                         [] =\n                         S\\<^sub>p\\<^sub>r\\<^sub>e @\n                         send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                         S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                         v \\<notin> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                     S\\<^sub>p\\<^sub>r\\<^sub>e", "qed simp"], ["", "lemma Unifier_strand_fv_subset:\n  assumes g_in_ik: \"t \\<in> ik\\<^sub>s\\<^sub>t S\"\n  and \\<delta>: \"Unifier \\<delta> (Fun f X) t\"\n  and disj: \"bvars\\<^sub>s\\<^sub>t S \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"fv (Fun f X \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "by (metis (no_types) fv_subset_if_in_strand_ik[OF g_in_ik]\n          disj \\<delta> fv_strand_subst subst_apply_fv_subset)"], ["", "lemma wf\\<^sub>s\\<^sub>t_induct'[consumes 1, case_names Nil ConsSnd ConsRcv ConsEq ConsEq2 ConsIneq]:\n  fixes S::\"('a,'b) strand\"\n  assumes \"wf\\<^sub>s\\<^sub>t V S\"\n          \"P []\"\n          \"\\<And>t S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Send t])\"\n          \"\\<And>t S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S; fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk> \\<Longrightarrow> P (S@[Receive t])\"\n          \"\\<And>t t' S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S; fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk> \\<Longrightarrow> P (S@[Equality Assign t t'])\"\n          \"\\<And>t t' S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Equality Check t t'])\"\n          \"\\<And>X F S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Inequality X F])\"\n  shows \"P S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P S", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>assign: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. P S", "proof (induction S rule: List.rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V []; P [];\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t' t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t t'.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V xs; P [];\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t' t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t'\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t t'.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S X F.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @\n  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n                \\<Longrightarrow> P xs;\n        wf\\<^sub>s\\<^sub>t V (xs @ [x]); P [];\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t' t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t'\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t t'.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (xs @ [x])", "case (snoc x S)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P [];\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n       fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t' t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n       fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t t'.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  wf\\<^sub>s\\<^sub>t V (S @ [x])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>assign: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V []; P [];\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t' t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t t'.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V xs; P [];\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t' t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t'\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t t'.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S X F.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @\n  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n                \\<Longrightarrow> P xs;\n        wf\\<^sub>s\\<^sub>t V (xs @ [x]); P [];\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t' t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t'\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t t'.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (xs @ [x])", "hence *: \"wf\\<^sub>s\\<^sub>t V S\" \"wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x]\""], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P [];\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n       fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t' t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n       fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t t'.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  wf\\<^sub>s\\<^sub>t V (S @ [x])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>assign: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S &&&\n    wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x]", "by (metis wf_prefix, metis wf_append_exec)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V S\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V []; P [];\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t' t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t t'.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V xs; P [];\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t' t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t'\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t t'.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S X F.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @\n  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n                \\<Longrightarrow> P xs;\n        wf\\<^sub>s\\<^sub>t V (xs @ [x]); P [];\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t' t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t'\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t t'.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (xs @ [x])", "have IH: \"P S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P S", "using snoc.IH[OF *(1)] snoc.prems"], ["proof (prove)\nusing this:\n  \\<lbrakk>P [];\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n       fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t' t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n       fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t t'.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  wf\\<^sub>s\\<^sub>t V (S @ [x])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S;\n   fv ?t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>assign: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. P S", "by auto"], ["proof (state)\nthis:\n  P S\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V []; P [];\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t' t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t t'.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V xs; P [];\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t' t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t'\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t t'.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S X F.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @\n  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n                \\<Longrightarrow> P xs;\n        wf\\<^sub>s\\<^sub>t V (xs @ [x]); P [];\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t' t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t'\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t t'.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (xs @ [x])", "note ** = snoc.prems(3,4,5,6,7)[OF *(1) IH] *(2)"], ["proof (state)\nthis:\n  P (S @ [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  fv ?t\n  \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  P (S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  fv ?t'\n  \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  P (S @ [\\<langle>assign: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  P (S @ [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  P (S @ [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V []; P [];\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t' t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t t'.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>x xs.\n       \\<lbrakk>\\<lbrakk>wf\\<^sub>s\\<^sub>t V xs; P [];\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t' t.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n                     fv t'\n                     \\<subseteq> V \\<union>\n                                 wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S t t'.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n                 \\<And>S X F.\n                    \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n                    \\<Longrightarrow> P\n (S @\n  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n                \\<Longrightarrow> P xs;\n        wf\\<^sub>s\\<^sub>t V (xs @ [x]); P [];\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t' t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n            fv t'\n            \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t t'.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (xs @ [x])", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. P (S @ [x])", "using **(1,2,4,5,6)"], ["proof (prove)\nusing this:\n  P (S @ [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  fv ?t\n  \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  P (S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  P (S @ [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  P (S @ [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x]\n\ngoal (1 subgoal):\n 1. P (S @ [x])", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])", "case (Equality ac t t')"], ["proof (state)\nthis:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 3. \\<And>x31 x32 x33.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])", "then"], ["proof (chain)\npicking this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t", "show ?thesis"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. P (S @ [x])", "using **(3,4,6)"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t\n  fv ?t'\n  \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  P (S @ [\\<langle>assign: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  P (S @ [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x]\n\ngoal (1 subgoal):\n 1. P (S @ [x])", "by (cases ac) auto"], ["proof (state)\nthis:\n  P (S @ [x])\n\ngoal (3 subgoals):\n 1. \\<And>x1.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 2. \\<And>x2.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t.\n           fv t\n           \\<subseteq> V \\<union>\n                       wfvarsoccs\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n           P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>t t'.\n           P (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>X F.\n           P (S @\n              [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S) [x];\n        x =\n        \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t\\<rbrakk>\n       \\<Longrightarrow> P (S @ [x])", "qed auto"], ["proof (state)\nthis:\n  P (S @ [x])\n\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>t V []; P [];\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t' t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S;\n         fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t t'.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []", "qed simp"], ["", "lemma wf_subst_apply:\n  \"wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow> wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (induction S arbitrary: V rule: wf\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 6. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "case (ConsRcv V t S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (6 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 6. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t V S\" \"fv t \\<subseteq> V\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V S &&& fv t \\<subseteq> V", "by simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t \\<subseteq> V\n\ngoal (6 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 6. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\" \"fv (t \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) &&&\n    fv (t \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using ConsRcv.IH subst_apply_fv_subset"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv ?t \\<subseteq> ?V \\<Longrightarrow>\n  fv (?t \\<cdot> ?\\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) &&&\n    fv (t \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by simp_all"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (6 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 6. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S \\<cdot>\\<^sub>s\\<^sub>t\n      \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>)\n\ngoal (5 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "case (ConsSnd V t S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (5 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (5 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t))) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using ConsSnd.IH"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by metis"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (5 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> fv (t \\<cdot> \\<delta>)) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n      fv (t \\<cdot> \\<delta>))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using subst_apply_fv_union"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V) \\<union>\n  fv (?t \\<cdot> ?\\<delta>) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` (?V \\<union> fv ?t))\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n      fv (t \\<cdot> \\<delta>))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by metis"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n    fv (t \\<cdot> \\<delta>))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (5 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 5. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n    fv (t \\<cdot> \\<delta>))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S \\<cdot>\\<^sub>s\\<^sub>t\n      \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "case (ConsEq V t t' S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (4 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\" \"fv t' \\<subseteq> V\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S &&& fv t' \\<subseteq> V", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  fv t' \\<subseteq> V\n\ngoal (4 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t))) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\" and *: \"fv (t' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  fv t' \\<subseteq> V\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using ConsEq.IH subst_apply_fv_subset"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (V \\<union> fv t) S\n  fv t' \\<subseteq> V\n  wf\\<^sub>s\\<^sub>t ?V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv ?t \\<subseteq> ?V \\<Longrightarrow>\n  fv (?t \\<cdot> ?\\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) &&&\n    fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by force+"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (4 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> fv (t \\<cdot> \\<delta>)) (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n      fv (t \\<cdot> \\<delta>))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using subst_apply_fv_union"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` (V \\<union> fv t)))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V) \\<union>\n  fv (?t \\<cdot> ?\\<delta>) =\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` (?V \\<union> fv ?t))\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n      fv (t \\<cdot> \\<delta>))\n     (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by metis"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n    fv (t \\<cdot> \\<delta>))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (4 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>assign: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 4. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n    fv (t \\<cdot> \\<delta>))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S \\<cdot>\\<^sub>s\\<^sub>t\n      \\<delta>)", "using *"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t\n   (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n    fv (t \\<cdot> \\<delta>))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S \\<cdot>\\<^sub>s\\<^sub>t\n      \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n    S \\<cdot>\\<^sub>s\\<^sub>t\n    \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>V Va.\n       wf\\<^sub>s\\<^sub>t Va [] \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n        ([] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>V s t S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<langle>check: s \\<doteq> t\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)\n 3. \\<And>V uu_ uv_ S Va.\n       \\<lbrakk>\\<And>V.\n                   wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n                   wf\\<^sub>s\\<^sub>t\n                    (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                    (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t Va\n         (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n          S)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` Va))\n                          (\\<forall>uu_\\<langle>\\<or>\\<noteq>: uv_\\<rangle>\\<^sub>s\\<^sub>t #\n                           S \\<cdot>\\<^sub>s\\<^sub>t\n                           \\<delta>)", "qed simp_all"], ["", "lemma wf_unify:\n  assumes wf: \"wf\\<^sub>s\\<^sub>t V (S@Send (Fun f X)#S')\"\n  and g_in_ik: \"t \\<in> ik\\<^sub>s\\<^sub>t S\"\n  and \\<delta>: \"Unifier \\<delta> (Fun f X) t\"\n  and disj: \"bvars\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<delta> (Fun f X) t\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (induction S' arbitrary: V rule: List.rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (snoc x S' V)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t ?V\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n   t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  t \\<in> ik\\<^sub>s\\<^sub>t S\n  Unifier \\<delta> (Fun f X) t\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have fun_fv_bound: \"fv (Fun f X \\<cdot> \\<delta>) \\<subseteq> \\<Union>(set (map fv\\<^sub>r\\<^sub>c\\<^sub>v (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "using snoc.prems(4) bvars\\<^sub>s\\<^sub>t_split Unifier_strand_fv_subset[OF g_in_ik \\<delta>]"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t (?S @ ?S') =\n  bvars\\<^sub>s\\<^sub>t ?S \\<union> bvars\\<^sub>s\\<^sub>t ?S'\n  bvars\\<^sub>s\\<^sub>t S \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {} \\<Longrightarrow>\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                      (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> \\<Union>\n                 (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                        (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))", "by auto"], ["proof (state)\nthis:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                      (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (Fun f X \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\""], ["proof (prove)\nusing this:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                      (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "using fv_ik_is_fv_rcv"], ["proof (prove)\nusing this:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> \\<Union>\n               (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v\n                      (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t ?S) =\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v ?S))\n\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n                 (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))", "by metis"], ["proof (state)\nthis:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (Fun f X \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using fv_ik_subset_fv_st[of \"S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\"]"], ["proof (prove)\nusing this:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t\n               (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  fv\\<^sub>s\\<^sub>e\\<^sub>t\n   (ik\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>))\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by blast"], ["proof (state)\nthis:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence *: \"fv ((Fun f X) \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (Fun f X \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by fastforce"], ["proof (state)\nthis:\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "from snoc.prems(1)"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])", "have \"wf\\<^sub>s\\<^sub>t V (S@Send (Fun f X)#S')\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "using wf_prefix[of V \"S@Send (Fun f X)#S'\" \"[x]\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  wf\\<^sub>s\\<^sub>t V\n   ((S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') @\n    [x]) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence **: \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using snoc.IH[OF _ snoc.prems(2,3)] snoc.prems(4)"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t ?V\n            (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S');\n   bvars\\<^sub>s\\<^sub>t\n    (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "from snoc.prems(1)"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])", "have ***: \"wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')) [x]\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union>\n      wfvarsoccs\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))\n     [x]", "using wf_append_exec[of V \"(S@Send (Fun f X)#S')\" \"[x]\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  wf\\<^sub>s\\<^sub>t V\n   ((S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S') @\n    [x]) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union>\n      wfvarsoccs\\<^sub>s\\<^sub>t\n       (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))\n     [x]", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "from snoc.prems(4)"], ["proof (chain)\npicking this:\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}", "have disj':\n      \"bvars\\<^sub>s\\<^sub>t (S@S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n      \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              send\\<langle>Fun f\n      X\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    t \\<in> ik\\<^sub>s\\<^sub>t S;\n                    Unifier \\<delta> (Fun f X) t;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_snd_append[of \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\" \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\"] **"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Receive t)"], ["proof (state)\nthis:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')\""], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ***"], ["proof (prove)\nusing this:\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "using vars_snd_rcv_strand_subset2(4)[of \"S@Send (Fun f X)#S'\"]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> V \\<union> fv (Fun f X) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> fv ((Fun f X) \\<cdot> \\<delta>) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (Fun f X \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis (no_types) inf_sup_aci(5) subst_apply_fv_subset_strand2 subst_apply_fv_union disj')"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (Fun f X \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (Fun f X \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using *"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (Fun f X \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (t \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>x = Receive t\\<close>"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by auto"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) (((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)@[Receive (t \\<cdot> \\<delta>)])\""], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n      [receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])", "using wf_rcv_append'''[OF **, of \"t \\<cdot> \\<delta>\"]"], ["proof (prove)\nusing this:\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (t \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n      [receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])", "by metis"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using \\<open>x = Receive t\\<close>"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n  x = receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Equality ac s s')"], ["proof (state)\nthis:\n  x = \\<langle>ac: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases ac)"], ["proof (state)\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case Assign"], ["proof (state)\nthis:\n  ac = assign\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv s' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')\""], ["proof (prove)\nusing this:\n  ac = assign\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "using Equality ***"], ["proof (prove)\nusing this:\n  ac = assign\n  x = \\<langle>ac: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv s' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@Send (Fun f X)#S')\""], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "using vars_snd_rcv_strand_subset2(4)[of \"S@Send (Fun f X)#S'\"]"], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv s' \\<subseteq> V \\<union> fv (Fun f X) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')", "by auto"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "moreover"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"fv s' = fv_r\\<^sub>e\\<^sub>q ac x\" \"fv (s' \\<cdot> \\<delta>) = fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv s' = fv_r\\<^sub>e\\<^sub>q ac x &&&\n    fv (s' \\<cdot> \\<delta>) =\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using Equality"], ["proof (prove)\nusing this:\n  x = \\<langle>ac: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv s' = fv_r\\<^sub>e\\<^sub>q ac x &&&\n    fv (s' \\<cdot> \\<delta>) =\n    fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by simp_all"], ["proof (state)\nthis:\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  fv s'\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "have \"fv (s' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> fv (Fun f X \\<cdot> \\<delta>) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (Fun f X \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using subst_apply_fv_subset_strand2[of \"fv\\<^sub>e\\<^sub>q ac\" ac x]"], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union> fv (Fun f X) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<lbrakk>fv\\<^sub>e\\<^sub>q ac = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           fv\\<^sub>e\\<^sub>q ac = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           fv\\<^sub>e\\<^sub>q ac = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           fv\\<^sub>e\\<^sub>q ac = fv\\<^sub>e\\<^sub>q ac \\<or>\n           fv\\<^sub>e\\<^sub>q ac = fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or>\n           fv\\<^sub>e\\<^sub>q ac = fv_r\\<^sub>e\\<^sub>q ac;\n   fv\\<^sub>e\\<^sub>q ac x\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {};\n   set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>e\\<^sub>q ac\n                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (Fun f X \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis disj'(1) subst_apply_fv_subset_strand_trm2 subst_apply_fv_union sup_commute)"], ["proof (state)\nthis:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (Fun f X \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (s' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (Fun f X \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using *"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (Fun f X \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (Fun f X \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by blast"], ["proof (state)\nthis:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (s' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>x = Equality ac s s'\\<close>"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  x = \\<langle>ac: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by auto"], ["proof (state)\nthis:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) (((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)@[Equality ac (s \\<cdot> \\<delta>) (s' \\<cdot> \\<delta>)])\""], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n      [\\<langle>ac: (s \\<cdot>\n                     \\<delta>) \\<doteq> s' \\<cdot>\n  \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])", "using wf_eq_append'''[OF **]"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv ?t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<langle>?a: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n      [\\<langle>ac: (s \\<cdot>\n                     \\<delta>) \\<doteq> s' \\<cdot>\n  \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])", "by metis"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<langle>ac: (s \\<cdot>\n                   \\<delta>) \\<doteq> s' \\<cdot>\n\\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<langle>ac: (s \\<cdot>\n                   \\<delta>) \\<doteq> s' \\<cdot>\n\\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using \\<open>x = Equality ac s s'\\<close>"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<langle>ac: (s \\<cdot>\n                   \\<delta>) \\<doteq> s' \\<cdot>\n\\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n  x = \\<langle>ac: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case Check"], ["proof (state)\nthis:\n  ac = check\n\ngoal (1 subgoal):\n 1. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  ac = check\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_eq_check_append''[OF **] Equality"], ["proof (prove)\nusing this:\n  ac = check\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  x = \\<langle>ac: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Inequality t t')"], ["proof (state)\nthis:\n  x = \\<forall>t\\<langle>\\<or>\\<noteq>: t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<forall>t\\<langle>\\<or>\\<noteq>: t'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_ineq_append''[OF **]"], ["proof (prove)\nusing this:\n  x = \\<forall>t\\<langle>\\<or>\\<noteq>: t'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]);\n        t \\<in> ik\\<^sub>s\\<^sub>t S; Unifier \\<delta> (Fun f X) t;\n        bvars\\<^sub>s\\<^sub>t\n         (S @ [send\\<langle>Fun f X\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "qed (auto dest: wf_subst_apply)"], ["", "lemma wf_equality:\n  assumes wf: \"wf\\<^sub>s\\<^sub>t V (S@Equality ac t t'#S')\"\n  and \\<delta>: \"mgu t t' = Some \\<delta>\"\n  and disj: \"bvars\\<^sub>s\\<^sub>t (S@Equality ac t t'#S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n  shows \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  mgu t t' = Some \\<delta>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (induction S' arbitrary: V rule: List.rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @\n                  [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    mgu t t' = Some \\<delta>;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case Nil"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n  mgu t t' = Some \\<delta>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>V.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                 (S @\n                  [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    mgu t t' = Some \\<delta>;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n  mgu t t' = Some \\<delta>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_prefix[of V S \"[Equality ac t t']\"] wf_subst_apply[of V S \\<delta>]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n  mgu t t' = Some \\<delta>\n  bvars\\<^sub>s\\<^sub>t\n   (S @ [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  wf\\<^sub>s\\<^sub>t V\n   (S @\n    [\\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V S\n  wf\\<^sub>s\\<^sub>t V S \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ [] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    mgu t t' = Some \\<delta>;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    mgu t t' = Some \\<delta>;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (snoc x S' V)"], ["proof (state)\nthis:\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t ?V\n            (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   mgu t t' = Some \\<delta>;\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  mgu t t' = Some \\<delta>\n  bvars\\<^sub>s\\<^sub>t\n   (S @\n    \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<And>x xs V.\n       \\<lbrakk>\\<And>V.\n                   \\<lbrakk>wf\\<^sub>s\\<^sub>t V\n                             (S @\n                              \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                              xs);\n                    mgu t t' = Some \\<delta>;\n                    bvars\\<^sub>s\\<^sub>t\n                     (S @\n                      \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      xs) \\<inter>\n                    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n(fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n(S @ xs \\<cdot>\\<^sub>s\\<^sub>t \\<delta>);\n        wf\\<^sub>s\\<^sub>t V\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # xs @ [x]);\n        mgu t t' = Some \\<delta>;\n        bvars\\<^sub>s\\<^sub>t\n         (S @\n          \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n          xs @ [x]) \\<inter>\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                          (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n                          (S @ xs @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases ac)"], ["proof (state)\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case Assign"], ["proof (state)\nthis:\n  ac = assign\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  ac = assign\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S", "using wf_eq_fv[of V, of S t t' \"S'@[x]\"] snoc"], ["proof (prove)\nusing this:\n  ac = assign\n  wf\\<^sub>s\\<^sub>t V\n   (S @\n    \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n    S' @ [x]) \\<Longrightarrow>\n  fv t' \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t S \\<union> V\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t ?V\n            (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S');\n   mgu t t' = Some \\<delta>;\n   bvars\\<^sub>s\\<^sub>t\n    (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n   (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t\n                     (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` ?V))\n                     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  mgu t t' = Some \\<delta>\n  bvars\\<^sub>s\\<^sub>t\n   (S @\n    \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using vars_snd_rcv_strand_subset2(4)[of S]"], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by blast"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')", "by force"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "moreover"], ["proof (state)\nthis:\n  fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have disj':\n        \"bvars\\<^sub>s\\<^sub>t (S@S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n        \"set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\"\n        \"bvars\\<^sub>s\\<^sub>t (S@Equality ac t t'#S') \\<inter> (subst_domain \\<delta> \\<union> range_vars \\<delta>) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "using snoc.prems(3)"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t\n   (S @\n    \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x]) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {} &&&\n    bvars\\<^sub>s\\<^sub>t\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n    {}", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}", "have\n        \"fv (t' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  bvars\\<^sub>s\\<^sub>t (S @ S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n  bvars\\<^sub>s\\<^sub>t\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') \\<inter>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) =\n  {}\n\ngoal (1 subgoal):\n 1. fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis inf_sup_aci(5) subst_apply_fv_subset_strand_trm2)"], ["proof (state)\nthis:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "moreover"], ["proof (state)\nthis:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"fv (t \\<cdot> \\<delta>) = fv (t' \\<cdot> \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>) = fv (t' \\<cdot> \\<delta>)", "by (metis MGU_is_Unifier[OF mgu_gives_MGU[OF \\<delta>]])"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>) = fv (t' \\<cdot> \\<delta>)", "have *:\n        \"fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>) = fv (t' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by simp"], ["proof (state)\nthis:\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "from snoc.prems(1)"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])", "have \"wf\\<^sub>s\\<^sub>t V (S@Equality ac t t'#S')\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using wf_prefix[of V \"S@Equality ac t t'#S'\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  wf\\<^sub>s\\<^sub>t V\n   ((S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') @\n    ?S') \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t V\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence **: \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis snoc.IH \\<delta> disj'(3))"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "from snoc.prems(1)"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])", "have ***: \"wf\\<^sub>s\\<^sub>t (V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (S@Equality ac t t'#S')) [x]\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union>\n      wfvarsoccs\\<^sub>s\\<^sub>t\n       (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n     [x]", "using wf_append_exec[of V \"(S@Equality ac t t'#S')\" \"[x]\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S' @ [x])\n  wf\\<^sub>s\\<^sub>t V\n   ((S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S') @\n    [x]) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t\n     (V \\<union>\n      wfvarsoccs\\<^sub>s\\<^sub>t\n       (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n     [x]", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (2 subgoals):\n 1. ac = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases x)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Send t)"], ["proof (state)\nthis:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (4 subgoals):\n 1. \\<And>x1.\n       x = send\\<langle>x1\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 4. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_snd_append[of \"fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\" \"(S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\"] **"], ["proof (prove)\nusing this:\n  x = send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Receive s)"], ["proof (state)\nthis:\n  x = receive\\<langle>s\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (S@Equality ac t t'#S')\""], ["proof (prove)\nusing this:\n  x = receive\\<langle>s\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using ***"], ["proof (prove)\nusing this:\n  x = receive\\<langle>s\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@Equality ac t t'#S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using vars_snd_rcv_strand_subset2(4)[of \"S@Equality ac t t'#S'\"]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p x \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p x\n    \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')", "by (cases ac) auto"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (t \\<cdot> \\<delta>) \\<union>\n                fv (t' \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using subst_apply_fv_subset_strand2[of fv\\<^sub>s\\<^sub>t\\<^sub>p]"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p x\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  \\<lbrakk>fv\\<^sub>s\\<^sub>t\\<^sub>p = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           fv\\<^sub>s\\<^sub>t\\<^sub>p = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           fv\\<^sub>s\\<^sub>t\\<^sub>p = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           fv\\<^sub>s\\<^sub>t\\<^sub>p = fv\\<^sub>e\\<^sub>q ?ac \\<or>\n           fv\\<^sub>s\\<^sub>t\\<^sub>p =\n           fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or>\n           fv\\<^sub>s\\<^sub>t\\<^sub>p = fv_r\\<^sub>e\\<^sub>q ?ac;\n   fv\\<^sub>s\\<^sub>t\\<^sub>p ?x\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {};\n   set (bvars\\<^sub>s\\<^sub>t\\<^sub>p ?x) \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv\\<^sub>s\\<^sub>t\\<^sub>p\n                     (?x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (t \\<cdot> \\<delta>) \\<union>\n                fv (t' \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis (no_types) inf_sup_aci(5) subst_apply_fv_union disj'(1,2))"], ["proof (state)\nthis:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (t \\<cdot> \\<delta>) \\<union>\n              fv (t' \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\"\n        when \"ac = Assign\""], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (t \\<cdot> \\<delta>) \\<union>\n              fv (t' \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using * that"], ["proof (prove)\nusing this:\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (t \\<cdot> \\<delta>) \\<union>\n              fv (t' \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  ac = assign\n\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by blast"], ["proof (state)\nthis:\n  ac = assign \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (s \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\"\n        when \"ac = Assign\""], ["proof (prove)\nusing this:\n  ac = assign \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>x = Receive s\\<close> that"], ["proof (prove)\nusing this:\n  ac = assign \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>t\\<^sub>p (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  x = receive\\<langle>s\\<rangle>\\<^sub>s\\<^sub>t\n  ac = assign\n\ngoal (1 subgoal):\n 1. fv (s \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by auto"], ["proof (state)\nthis:\n  ac = assign \\<Longrightarrow>\n  fv (s \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)) (((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)@[Receive (s \\<cdot> \\<delta>)])\"\n        when \"ac = Assign\""], ["proof (prove)\nusing this:\n  ac = assign \\<Longrightarrow>\n  fv (s \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n      [receive\\<langle>s \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])", "using wf_rcv_append'''[OF **, of \"s \\<cdot> \\<delta>\"] that"], ["proof (prove)\nusing this:\n  ac = assign \\<Longrightarrow>\n  fv (s \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  fv (s \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>s \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n  ac = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n      [receive\\<langle>s \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])", "by metis"], ["proof (state)\nthis:\n  ac = assign \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>s \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (3 subgoals):\n 1. \\<And>x2.\n       x = receive\\<langle>x2\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 3. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  ac = assign \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>s \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using \\<open>x = Receive s\\<close> Assign"], ["proof (prove)\nusing this:\n  ac = assign \\<Longrightarrow>\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [receive\\<langle>s \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t])\n  x = receive\\<langle>s\\<rangle>\\<^sub>s\\<^sub>t\n  ac = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Equality ac' s s')"], ["proof (state)\nthis:\n  x = \\<langle>ac': s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (2 subgoals):\n 1. \\<And>x31 x32 x33.\n       x =\n       \\<langle>x31: x32 \\<doteq> x33\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "proof (cases ac')"], ["proof (state)\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case Assign"], ["proof (state)\nthis:\n  ac' = assign\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv s' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t (S@Equality ac t t'#S')\""], ["proof (prove)\nusing this:\n  ac' = assign\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using *** Equality"], ["proof (prove)\nusing this:\n  ac' = assign\n  wf\\<^sub>s\\<^sub>t\n   (V \\<union>\n    wfvarsoccs\\<^sub>s\\<^sub>t\n     (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S'))\n   [x]\n  x = \\<langle>ac': s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfvarsoccs\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by auto"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv s' \\<subseteq> V \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@Equality ac t t'#S')\""], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "using vars_snd_rcv_strand_subset2(4)[of \"S@Equality ac t t'#S'\"]"], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfvarsoccs\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (S @ \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')", "by blast"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv s' \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t (S@S')\""], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @\n                \\<langle>ac: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S')\n\ngoal (1 subgoal):\n 1. fv s'\n    \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')", "by (cases ac) auto"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "moreover"], ["proof (state)\nthis:\n  fv s'\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "have \"fv s' = fv_r\\<^sub>e\\<^sub>q ac' x\" \"fv (s' \\<cdot> \\<delta>) = fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv s' = fv_r\\<^sub>e\\<^sub>q ac' x &&&\n    fv (s' \\<cdot> \\<delta>) =\n    fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "using Equality"], ["proof (prove)\nusing this:\n  x = \\<langle>ac': s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. fv s' = fv_r\\<^sub>e\\<^sub>q ac' x &&&\n    fv (s' \\<cdot> \\<delta>) =\n    fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "by simp_all"], ["proof (state)\nthis:\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac' x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  fv s'\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac' x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)", "have\n            \"fv (s' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac' x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (t \\<cdot> \\<delta>) \\<union>\n                fv (t' \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using subst_apply_fv_subset_strand2[of \"fv_r\\<^sub>e\\<^sub>q ac'\" ac' x]"], ["proof (prove)\nusing this:\n  fv s'\n  \\<subseteq> V \\<union> fv t \\<union> fv t' \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t (S @ S')\n  fv s' = fv_r\\<^sub>e\\<^sub>q ac' x\n  fv (s' \\<cdot> \\<delta>) =\n  fv_r\\<^sub>e\\<^sub>q ac' (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n  \\<lbrakk>fv_r\\<^sub>e\\<^sub>q ac' = fv\\<^sub>s\\<^sub>t\\<^sub>p \\<or>\n           fv_r\\<^sub>e\\<^sub>q ac' = fv\\<^sub>r\\<^sub>c\\<^sub>v \\<or>\n           fv_r\\<^sub>e\\<^sub>q ac' = fv\\<^sub>s\\<^sub>n\\<^sub>d \\<or>\n           fv_r\\<^sub>e\\<^sub>q ac' = fv\\<^sub>e\\<^sub>q ac' \\<or>\n           fv_r\\<^sub>e\\<^sub>q ac' =\n           fv\\<^sub>i\\<^sub>n\\<^sub>e\\<^sub>q \\<or>\n           fv_r\\<^sub>e\\<^sub>q ac' = fv_r\\<^sub>e\\<^sub>q ac';\n   fv_r\\<^sub>e\\<^sub>q ac' x\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V;\n   bvars\\<^sub>s\\<^sub>t ?S \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {};\n   set (bvars\\<^sub>s\\<^sub>t\\<^sub>p x) \\<inter>\n   (subst_domain ?\\<delta> \\<union> range_vars ?\\<delta>) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> fv_r\\<^sub>e\\<^sub>q ac'\n                     (x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p ?\\<delta>)\n                    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                                 (?S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>) \\<union>\n                                fv\\<^sub>s\\<^sub>e\\<^sub>t (?\\<delta> ` ?V)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                fv (t \\<cdot> \\<delta>) \\<union>\n                fv (t' \\<cdot> \\<delta>) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis disj'(1) subst_apply_fv_subset_strand_trm2 subst_apply_fv_union sup_commute)"], ["proof (state)\nthis:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (t \\<cdot> \\<delta>) \\<union>\n              fv (t' \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence \"fv (s' \\<cdot> \\<delta>) \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (t \\<cdot> \\<delta>) \\<union>\n              fv (t' \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using * \\<open>ac = Assign\\<close>"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              fv (t \\<cdot> \\<delta>) \\<union>\n              fv (t' \\<cdot> \\<delta>) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (t \\<cdot> \\<delta>) \\<union> fv (t' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  ac = assign\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n                wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by blast"], ["proof (state)\nthis:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "hence ****:\n            \"fv (s' \\<cdot> \\<delta>) \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ((S@S') \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\""], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "using \\<open>x = Equality ac' s s'\\<close> \\<open>ac = Assign\\<close>"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V) \\<union>\n              wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  x = \\<langle>ac': s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n  ac = assign\n\ngoal (1 subgoal):\n 1. fv (s' \\<cdot> \\<delta>)\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n                fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)", "by auto"], ["proof (state)\nthis:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (2 subgoals):\n 1. ac' = assign \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n 2. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using \\<open>x = Equality ac' s s'\\<close> ** **** wf_eq_append' \\<open>ac = Assign\\<close>"], ["proof (prove)\nusing this:\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  x = \\<langle>ac': s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n  fv (s' \\<cdot> \\<delta>)\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t\n               (S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) \\<union>\n              fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V)\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t ?V (?S @ ?S');\n   fv ?t'\n   \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S \\<union> ?V\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>s\\<^sub>t ?V\n                     (?S @\n                      \\<langle>?a: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t #\n                      ?S')\n  ac = assign\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by (metis (no_types, lifting) append.assoc append_Nil2 strand_step.case(3)\n                strand_subst_hom subst_apply_strand_step_def)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case Check"], ["proof (state)\nthis:\n  ac' = check\n\ngoal (1 subgoal):\n 1. ac' = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  ac' = check\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_eq_check_append''[OF **] Equality"], ["proof (prove)\nusing this:\n  ac' = check\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<langle>check: ?t \\<doteq> ?t'\\<rangle>\\<^sub>s\\<^sub>t])\n  x = \\<langle>ac': s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "case (Inequality s s')"], ["proof (state)\nthis:\n  x = \\<forall>s\\<langle>\\<or>\\<noteq>: s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. \\<And>x41 x42.\n       x =\n       \\<forall>x41\\<langle>\\<or>\\<noteq>: x42\\<rangle>\\<^sub>s\\<^sub>t \\<Longrightarrow>\n       wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n        (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<forall>s\\<langle>\\<or>\\<noteq>: s'\\<rangle>\\<^sub>s\\<^sub>t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "using wf_ineq_append''[OF **]"], ["proof (prove)\nusing this:\n  x = \\<forall>s\\<langle>\\<or>\\<noteq>: s'\\<rangle>\\<^sub>s\\<^sub>t\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   ((S @ S' \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) @\n    [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. ac = check \\<Longrightarrow>\n    wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n     (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)", "qed (metis snoc.prems(1) wf_eq_check_append wf_subst_apply)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t (fv\\<^sub>s\\<^sub>e\\<^sub>t (\\<delta> ` V))\n   (S @ S' @ [x] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wf_rcv_prefix_ground:\n  \"wf\\<^sub>s\\<^sub>t {} ((map Receive M)@S) \\<Longrightarrow> vars\\<^sub>s\\<^sub>t (map Receive M) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>t {} (map Receive M @ S) \\<Longrightarrow>\n    vars\\<^sub>s\\<^sub>t (map Receive M) = {}", "by (induct M) auto"], ["", "lemma simple_wfvarsoccs\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>n\\<^sub>d:\n  assumes \"simple S\"\n  shows \"wfvarsoccs\\<^sub>s\\<^sub>t S = \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))", "using assms"], ["proof (prove)\nusing this:\n  simple S\n\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))", "unfolding simple_def"], ["proof (prove)\nusing this:\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S\n\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t S =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. list_all simple\\<^sub>s\\<^sub>t\\<^sub>p [] \\<Longrightarrow>\n    wfvarsoccs\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d []))\n 2. \\<And>a S.\n       \\<lbrakk>list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S \\<Longrightarrow>\n                wfvarsoccs\\<^sub>s\\<^sub>t S =\n                \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (a # S)\\<rbrakk>\n       \\<Longrightarrow> wfvarsoccs\\<^sub>s\\<^sub>t (a # S) =\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S)))", "case (Cons x S)"], ["proof (state)\nthis:\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S \\<Longrightarrow>\n  wfvarsoccs\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (x # S)\n\ngoal (2 subgoals):\n 1. list_all simple\\<^sub>s\\<^sub>t\\<^sub>p [] \\<Longrightarrow>\n    wfvarsoccs\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d []))\n 2. \\<And>a S.\n       \\<lbrakk>list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S \\<Longrightarrow>\n                wfvarsoccs\\<^sub>s\\<^sub>t S =\n                \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (a # S)\\<rbrakk>\n       \\<Longrightarrow> wfvarsoccs\\<^sub>s\\<^sub>t (a # S) =\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (a # S)))", "thus ?case"], ["proof (prove)\nusing this:\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p S \\<Longrightarrow>\n  wfvarsoccs\\<^sub>s\\<^sub>t S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  list_all simple\\<^sub>s\\<^sub>t\\<^sub>p (x # S)\n\ngoal (1 subgoal):\n 1. wfvarsoccs\\<^sub>s\\<^sub>t (x # S) =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S)))", "by (cases x) auto"], ["proof (state)\nthis:\n  wfvarsoccs\\<^sub>s\\<^sub>t (x # S) =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d (x # S)))\n\ngoal (1 subgoal):\n 1. list_all simple\\<^sub>s\\<^sub>t\\<^sub>p [] \\<Longrightarrow>\n    wfvarsoccs\\<^sub>s\\<^sub>t [] =\n    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d []))", "qed simp"], ["", "lemma wf\\<^sub>s\\<^sub>t_simple_induct[consumes 2, case_names Nil ConsSnd ConsRcv ConsIneq]:\n  fixes S::\"('a,'b) strand\"\n  assumes \"wf\\<^sub>s\\<^sub>t V S\" \"simple S\"\n          \"P []\"\n          \"\\<And>v S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Send (Var v)])\"\n          \"\\<And>t S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S; fv t \\<subseteq> V \\<union> \\<Union>(set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk> \\<Longrightarrow> P (S@[Receive t])\"\n          \"\\<And>X F S. \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk> \\<Longrightarrow> P (S@[Inequality X F])\"\n  shows \"P S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P S", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  simple S\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S;\n   fv ?t\n   \\<subseteq> V \\<union>\n               \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. P S", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_induct')"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 6. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "case (ConsSnd t S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V S\n  \\<lbrakk>simple S; P [];\n   \\<And>S v.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n       fv t\n       \\<subseteq> V \\<union>\n                   \\<Union>\n                    (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S;\n   fv ?t\n   \\<subseteq> V \\<union>\n               \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (6 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 6. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "hence \"P S\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  \\<lbrakk>simple S; P [];\n   \\<And>S v.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n       fv t\n       \\<subseteq> V \\<union>\n                   \\<Union>\n                    (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S;\n   fv ?t\n   \\<subseteq> V \\<union>\n               \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. P S", "by auto"], ["proof (state)\nthis:\n  P S\n\ngoal (6 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 6. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "obtain v where \"t = Var v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v. t = Var v \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using simple_snd_is_var[OF _ \\<open>simple (S@[Send t])\\<close>]"], ["proof (prove)\nusing this:\n  send\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set (S @\n             [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<Longrightarrow>\n  \\<exists>v. ?t = Var v\n\ngoal (1 subgoal):\n 1. (\\<And>v. t = Var v \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  t = Var v\n\ngoal (6 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 6. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "thus ?case"], ["proof (prove)\nusing this:\n  t = Var v\n\ngoal (1 subgoal):\n 1. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])", "using ConsSnd.prems(3)[OF \\<open>wf\\<^sub>s\\<^sub>t V S\\<close> _ \\<open>P S\\<close>] \\<open>simple (S@[Send t])\\<close>"], ["proof (prove)\nusing this:\n  t = Var v\n  simple S \\<Longrightarrow>\n  P (S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  simple (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])", "by auto"], ["proof (state)\nthis:\n  P (S @ [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (5 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "case (ConsRcv t S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<lbrakk>simple S; P [];\n   \\<And>S v.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n       fv t\n       \\<subseteq> V \\<union>\n                   \\<Union>\n                    (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S;\n   fv ?t\n   \\<subseteq> V \\<union>\n               \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (5 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]); P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "thus ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<lbrakk>simple S; P [];\n   \\<And>S v.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n       fv t\n       \\<subseteq> V \\<union>\n                   \\<Union>\n                    (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S;\n   fv ?t\n   \\<subseteq> V \\<union>\n               \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])", "using simple_wfvarsoccs\\<^sub>s\\<^sub>t_is_fv\\<^sub>s\\<^sub>n\\<^sub>d[of \"S@[Receive t]\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t V S\n  fv t \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<lbrakk>simple S; P [];\n   \\<And>S v.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S t.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n       fv t\n       \\<subseteq> V \\<union>\n                   \\<Union>\n                    (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n   \\<And>S X F.\n      \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n      \\<Longrightarrow> P (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n  \\<Longrightarrow> P S\n  simple (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  P []\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [send\\<langle>Var ?v\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S;\n   fv ?t\n   \\<subseteq> V \\<union>\n               \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\\<rbrakk>\n  \\<Longrightarrow> P (?S @ [receive\\<langle>?t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>wf\\<^sub>s\\<^sub>t V ?S; simple ?S; P ?S\\<rbrakk>\n  \\<Longrightarrow> P (?S @\n                       [\\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t])\n  simple\n   (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<Longrightarrow>\n  wfvarsoccs\\<^sub>s\\<^sub>t\n   (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) =\n  \\<Union>\n   (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d\n          (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])))\n\ngoal (1 subgoal):\n 1. P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])", "by auto"], ["proof (state)\nthis:\n  P (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (4 subgoals):\n 1. \\<lbrakk>simple []; P [];\n     \\<And>S v.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S t.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n         fv t\n         \\<subseteq> V \\<union>\n                     \\<Union>\n                      (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n     \\<And>S X F.\n        \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n        \\<Longrightarrow> P (S @\n                             [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n    \\<Longrightarrow> P []\n 2. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        fv t' \\<subseteq> V \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        simple\n         (S @ [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 3. \\<And>t t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @ [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<langle>check: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t])\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t V S;\n        \\<lbrakk>simple S; P [];\n         \\<And>S v.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [send\\<langle>Var\n          v\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S t.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n             fv t\n             \\<subseteq> V \\<union>\n                         \\<Union>\n                          (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n         \\<And>S X F.\n            \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n            \\<Longrightarrow> P (S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n        \\<Longrightarrow> P S;\n        simple\n         (S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        P [];\n        \\<And>S v.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [send\\<langle>Var\n         v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S t.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S;\n            fv t\n            \\<subseteq> V \\<union>\n                        \\<Union>\n                         (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<And>S X F.\n           \\<lbrakk>wf\\<^sub>s\\<^sub>t V S; simple S; P S\\<rbrakk>\n           \\<Longrightarrow> P (S @\n                                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\\<rbrakk>\n       \\<Longrightarrow> P (S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])", "qed (auto simp add: simple_def)"], ["", "lemma wf_trm_stp_dom_fv_disjoint:\n  \"\\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta>; t \\<in> trms\\<^sub>s\\<^sub>t S\\<rbrakk> \\<Longrightarrow> subst_domain \\<theta> \\<inter> fv t = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta>;\n     t \\<in> trms\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta> \\<inter> fv t = {}", "unfolding wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n             wf\\<^sub>s\\<^sub>t {} S \\<and>\n             subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S =\n             {} \\<and>\n             range_vars \\<theta> \\<inter> bvars\\<^sub>s\\<^sub>t S =\n             {} \\<and>\n             fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {};\n     t \\<in> trms\\<^sub>s\\<^sub>t S\\<rbrakk>\n    \\<Longrightarrow> subst_domain \\<theta> \\<inter> fv t = {}", "by force"], ["", "lemma wf_constr_bvars_disj: \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta> \\<Longrightarrow> (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S\n     \\<theta> \\<Longrightarrow>\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}", "unfolding range_vars_alt_def wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n    wf\\<^sub>s\\<^sub>t {} S \\<and>\n    subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} \\<and>\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} \\<and>\n    fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S =\n    {} \\<Longrightarrow>\n    (subst_domain \\<theta> \\<union>\n     fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<theta>)) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}", "by fastforce"], ["", "lemma wf_constr_bvars_disj':\n  assumes \"wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta>\" \"subst_domain \\<delta> \\<union> range_vars \\<delta> \\<subseteq> fv\\<^sub>s\\<^sub>t S\"\n  shows \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" (is ?A)\n  and \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) = {}\" (is ?B)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}\n 2. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "have \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\" \"fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} &&&\n    fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}", "using assms(1)"], ["proof (prove)\nusing this:\n  wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r S \\<theta>\n\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} &&&\n    fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}", "unfolding range_vars_alt_def wf\\<^sub>c\\<^sub>o\\<^sub>n\\<^sub>s\\<^sub>t\\<^sub>r_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<theta> \\<and>\n  wf\\<^sub>s\\<^sub>t {} S \\<and>\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} \\<and>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {} \\<and>\n  fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<theta> \\<union>\n     fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<theta>)) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} &&&\n    fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}", "by fastforce+"], ["proof (state)\nthis:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n  fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n\ngoal (2 subgoals):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}\n 2. (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "thus ?A and ?B"], ["proof (prove)\nusing this:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n  fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "using assms(2) bvars_subst_ident[of S \\<delta>]"], ["proof (prove)\nusing this:\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n  fv\\<^sub>s\\<^sub>t S \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\n  subst_domain \\<delta> \\<union> range_vars \\<delta>\n  \\<subseteq> fv\\<^sub>s\\<^sub>t S\n  bvars\\<^sub>s\\<^sub>t S =\n  bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {} &&&\n    (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n    {}", "by blast+"], ["proof (state)\nthis:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n  (subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>) =\n  {}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in intruder_model) wf_simple_strand_first_Send_var_split:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"simple S\" \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> v\"\n  shows \"\\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send (Var v)#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> t \\<cdot> \\<I> = \\<I> v\n                      \\<and> \\<not>(\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e. t \\<cdot> \\<I> = \\<I> w)\"\n    (is \"?P S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_simple_induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>v S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> va \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "case (ConsSnd v S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n\ngoal (4 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>v S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> va \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "proof (cases \"\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> w\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> = \\<I> w \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> = \\<I> w) \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "case True"], ["proof (state)\nthis:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> w\n\ngoal (2 subgoals):\n 1. \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> = \\<I> w \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> = \\<I> w) \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> w\n\ngoal (1 subgoal):\n 1. \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "using ConsSnd.IH"], ["proof (prove)\nusing this:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> w\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> va \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> = \\<I> w) \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> = \\<I> w) \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> = \\<I> w) \\<Longrightarrow>\n    \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "using ConsSnd.prems"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> va \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "by auto"], ["proof (state)\nthis:\n  \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> va \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>va S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var va\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> va \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "case (ConsRcv t' S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  fv t'\n  \\<subseteq> {} \\<union> \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "have \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using ConsRcv.hyps(3) vars_snd_rcv_strand_subset2(1)"], ["proof (prove)\nusing this:\n  fv t'\n  \\<subseteq> {} \\<union> \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S))\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t ?S\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by force"], ["proof (state)\nthis:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "hence \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> v\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> = \\<I> v", "using ConsRcv.prems(1)"], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> = \\<I> v", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> v\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "hence \"?P S\""], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> = \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "by (metis ConsRcv.IH)"], ["proof (state)\nthis:\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        fv ta\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "case (ConsIneq X F S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "moreover"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "have \"wfrestrictedvars\\<^sub>s\\<^sub>t (S @ [Inequality X F]) = wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t\n     (S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) =\n    wfrestrictedvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "ultimately"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S", "have \"?P S\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> = \\<I> v\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "by blast"], ["proof (state)\nthis:\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n        \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           S =\n           S\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n           S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n           t \\<cdot> \\<I> = \\<I> v \\<and>\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> = \\<I> w);\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> = \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            S @\n                            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                            S\\<^sub>p\\<^sub>r\\<^sub>e @\n                            send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n                            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                            t \\<cdot> \\<I> = \\<I> v \\<and>\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> = \\<I> w)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     S @ [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n     S\\<^sub>p\\<^sub>r\\<^sub>e @\n     send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n     S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n     t \\<cdot> \\<I> = \\<I> v \\<and>\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> = \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> = \\<I> v \\<Longrightarrow>\n    \\<exists>v S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       [] =\n       S\\<^sub>p\\<^sub>r\\<^sub>e @\n       send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t #\n       S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n       t \\<cdot> \\<I> = \\<I> v \\<and>\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> = \\<I> w)", "qed simp"], ["", "lemma (in intruder_model) wf_strand_first_Send_var_split:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\"\n  shows \"\\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. \\<not>(\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n            \\<and> ((\\<exists>t'. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Send t'#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n               \\<or> (\\<exists>t' t''. S = S\\<^sub>p\\<^sub>r\\<^sub>e@Equality Assign t' t''#S\\<^sub>s\\<^sub>u\\<^sub>f \\<and> t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\"\n    (is \"\\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f. ?P S\\<^sub>p\\<^sub>r\\<^sub>e \\<and> ?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_induct')"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 6. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "case (ConsSnd t' S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (6 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 6. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "proof (cases \"\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n 2. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "case True"], ["proof (state)\nthis:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w\n\ngoal (2 subgoals):\n 1. \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n 2. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w", "obtain S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f where \"?P S\\<^sub>p\\<^sub>r\\<^sub>e\" \"?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\""], ["proof (prove)\nusing this:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsSnd.IH"], ["proof (prove)\nusing this:\n  \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (2 subgoals):\n 1. \\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n 2. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'a.\n          S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n      (\\<exists>t'a t''.\n          S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)", "obtain v where v: \"v \\<in> fv t'\" \"t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv t'; t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsSnd.prems"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv t'; t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv t'\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "hence \"t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  v \\<in> fv t'\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>", "using subst_mono[of \"Var v\" t' \\<I>] vars_iff_subtermeq[of v t'] term.order_trans"], ["proof (prove)\nusing this:\n  v \\<in> fv t'\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  Var v \\<sqsubseteq> t' \\<Longrightarrow>\n  Var v \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>\n  (v \\<in> fv t') = (Var v \\<sqsubseteq> t')\n  \\<lbrakk>?x \\<sqsubseteq> ?y; ?y \\<sqsubseteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?x \\<sqsubseteq> ?z\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>", "by auto"], ["proof (state)\nthis:\n  t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "using False v"], ["proof (prove)\nusing this:\n  t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  v \\<in> fv t'\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "by auto"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'a.\n          S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n      (\\<exists>t'a t''.\n          S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'a.\n          S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n      (\\<exists>t'a t''.\n          S @ [send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n\ngoal (5 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "case (ConsRcv t' S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (5 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "have \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using ConsRcv.hyps vars_snd_rcv_strand_subset2(4)[of S]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by blast"], ["proof (state)\nthis:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (5 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "hence \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\""], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "using ConsRcv.prems"], ["proof (prove)\nusing this:\n  fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (5 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "obtain S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f where \"?P S\\<^sub>p\\<^sub>r\\<^sub>e\" \"?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\""], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsRcv.IH"], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (5 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv ta \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @ [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 5. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'a.\n            S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n        (\\<exists>t'a t''.\n            S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'a.\n          S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>) \\<or>\n      (\\<exists>t'a t''.\n          S @ [receive\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t'a \\<cdot> \\<I>))\n\ngoal (4 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "case (ConsEq s s' S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  fv s' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (4 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "have *: \"fv s' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv s' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using ConsEq.hyps vars_snd_rcv_strand_subset2(4)[of S]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  fv s' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S\n  wfvarsoccs\\<^sub>s\\<^sub>t S\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. fv s' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by blast"], ["proof (state)\nthis:\n  fv s' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        fv t' \\<subseteq> {} \\<union> wfvarsoccs\\<^sub>s\\<^sub>t S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>assign: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 4. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "proof (cases \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "case True"], ["proof (state)\nthis:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "obtain S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f where \"?P S\\<^sub>p\\<^sub>r\\<^sub>e\" \"?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\""], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsEq.IH"], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "case False"], ["proof (state)\nthis:\n  \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v)", "obtain v where \"v \\<in> fv s\" \"t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\""], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v)\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv s; t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsEq.prems *"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v)\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  fv s' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        \\<lbrakk>v \\<in> fv s; t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  v \\<in> fv s\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "hence \"t \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  v \\<in> fv s\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>", "using vars_iff_subtermeq[of v s] subst_mono[of \"Var v\" s \\<I>] term.order_trans"], ["proof (prove)\nusing this:\n  v \\<in> fv s\n  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  (v \\<in> fv s) = (Var v \\<sqsubseteq> s)\n  Var v \\<sqsubseteq> s \\<Longrightarrow>\n  Var v \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>\n  \\<lbrakk>?x \\<sqsubseteq> ?y; ?y \\<sqsubseteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?x \\<sqsubseteq> ?z\n\ngoal (1 subgoal):\n 1. t \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>", "by auto"], ["proof (state)\nthis:\n  t \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n               t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v) \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "using False"], ["proof (prove)\nusing this:\n  t \\<cdot> \\<I> \\<sqsubseteq> s \\<cdot> \\<I>\n  \\<not> (\\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S @ [\\<langle>assign: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "case (ConsEq2 s s' S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "have \"wfrestrictedvars\\<^sub>s\\<^sub>t (S@[Equality Check s s']) = wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfrestrictedvars\\<^sub>s\\<^sub>t\n     (S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]) =\n    wfrestrictedvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "hence \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\""], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "using ConsEq2.prems"], ["proof (prove)\nusing this:\n  wfrestrictedvars\\<^sub>s\\<^sub>t\n   (S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]) =\n  wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "by metis"], ["proof (state)\nthis:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "obtain S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f where \"?P S\\<^sub>p\\<^sub>r\\<^sub>e\" \"?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\""], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsEq2.IH"], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (3 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>ta t' S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'a.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t'a t''.\n                                 S @\n                                 [\\<langle>check: ta \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t'a \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t'a \\<cdot> \\<I>))\n 3. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S @ [\\<langle>check: s \\<doteq> s'\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "case (ConsIneq X F S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "hence \"\\<exists>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S. t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @\n                   [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "then"], ["proof (chain)\npicking this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v", "obtain S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f where \"?P S\\<^sub>p\\<^sub>r\\<^sub>e\" \"?Q S S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f\""], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ConsIneq.IH"], ["proof (prove)\nusing this:\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n     t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. (\\<And>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                            t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w);\n         (\\<exists>t'.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n         (\\<exists>t' t''.\n             S =\n             S\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n             S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (2 subgoals):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n 2. \\<And>X F S.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S;\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S.\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n        \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n           \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                                   S\\<^sub>p\\<^sub>r\\<^sub>e.\n                      t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n           ((\\<exists>t'.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n            (\\<exists>t' t''.\n                S =\n                S\\<^sub>p\\<^sub>r\\<^sub>e @\n                \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>));\n        \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                        (S @\n                         [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]).\n           t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e\n                            S\\<^sub>s\\<^sub>u\\<^sub>f.\n                            \\<not> (\\<exists>w\n       \\<in>wfrestrictedvars\\<^sub>s\\<^sub>t S\\<^sub>p\\<^sub>r\\<^sub>e.\n t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n                            ((\\<exists>t'.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>) \\<or>\n                             (\\<exists>t' t''.\n                                 S @\n                                 [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n                                 S\\<^sub>p\\<^sub>r\\<^sub>e @\n                                 \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n                                 S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n                                 t \\<cdot> \\<I> \\<sqsubseteq>\n                                 t' \\<cdot> \\<I>))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          S\\<^sub>p\\<^sub>r\\<^sub>e.\n             t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w)\n  (\\<exists>t'.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n  (\\<exists>t' t''.\n      S =\n      S\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n      S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            S @\n            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            S @\n            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "by fastforce"], ["proof (state)\nthis:\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n     ((\\<exists>t'.\n          S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n      (\\<exists>t' t''.\n          S @\n          [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t] =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))\n\ngoal (1 subgoal):\n 1. \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t [].\n       t \\<cdot> \\<I> \\<sqsubseteq> \\<I> v \\<Longrightarrow>\n    \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n       \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                               S\\<^sub>p\\<^sub>r\\<^sub>e.\n                  t \\<cdot> \\<I> \\<sqsubseteq> \\<I> w) \\<and>\n       ((\\<exists>t'.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>) \\<or>\n        (\\<exists>t' t''.\n            [] =\n            S\\<^sub>p\\<^sub>r\\<^sub>e @\n            \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n            S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n            t \\<cdot> \\<I> \\<sqsubseteq> t' \\<cdot> \\<I>))", "qed simp"], ["", "subsection \\<open>Constraint Semantics\\<close>"], ["", "context intruder_model\nbegin"], ["", "subsubsection \\<open>Definitions\\<close>"], ["", "text \\<open>The constraint semantics in which the intruder is limited to composition only\\<close>"], ["", "fun strand_sem_c::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) strand \\<Rightarrow> ('fun,'var) subst \\<Rightarrow> bool\" (\"\\<lbrakk>_; _\\<rbrakk>\\<^sub>c\")\nwhere\n  \"\\<lbrakk>M; []\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. True)\"\n| \"\\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. M \\<turnstile>\\<^sub>c t \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>)\"\n| \"\\<lbrakk>M; Receive t#S\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. \\<lbrakk>insert (t \\<cdot> \\<I>) M; S\\<rbrakk>\\<^sub>c \\<I>)\"\n| \"\\<lbrakk>M; Equality _ t t'#S\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. t \\<cdot> \\<I> = t' \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>)\"\n| \"\\<lbrakk>M; Inequality X F#S\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. ineq_model \\<I> X F \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>)\""], ["", "definition constr_sem_c (\"_ \\<Turnstile>\\<^sub>c \\<langle>_,_\\<rangle>\") where \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<equiv> (\\<theta> supports \\<I> \\<and> \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>)\""], ["", "abbreviation constr_sem_c' (\"_ \\<Turnstile>\\<^sub>c \\<langle>_\\<rangle>\" 90) where \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S\\<rangle> \\<equiv> \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,Var\\<rangle>\""], ["", "text \\<open>The full constraint semantics\\<close>"], ["", "fun strand_sem_d::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) strand \\<Rightarrow> ('fun,'var) subst \\<Rightarrow> bool\" (\"\\<lbrakk>_; _\\<rbrakk>\\<^sub>d\")\nwhere\n  \"\\<lbrakk>M; []\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. True)\"\n| \"\\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. M \\<turnstile> t \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>)\"\n| \"\\<lbrakk>M; Receive t#S\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. \\<lbrakk>insert (t \\<cdot> \\<I>) M; S\\<rbrakk>\\<^sub>d \\<I>)\"\n| \"\\<lbrakk>M; Equality _ t t'#S\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. t \\<cdot> \\<I> = t' \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>)\"\n| \"\\<lbrakk>M; Inequality X F#S\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. ineq_model \\<I> X F \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>)\""], ["", "definition constr_sem_d (\"_ \\<Turnstile> \\<langle>_,_\\<rangle>\") where \"\\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle> \\<equiv> (\\<theta> supports \\<I> \\<and> \\<lbrakk>{}; S\\<rbrakk>\\<^sub>d \\<I>)\""], ["", "abbreviation constr_sem_d' (\"_ \\<Turnstile> \\<langle>_\\<rangle>\" 90) where \"\\<I> \\<Turnstile> \\<langle>S\\<rangle> \\<equiv> \\<I> \\<Turnstile> \\<langle>S,Var\\<rangle>\""], ["", "lemmas strand_sem_induct = strand_sem_c.induct[case_names Nil ConsSnd ConsRcv ConsEq ConsIneq]"], ["", "subsubsection \\<open>Lemmata\\<close>"], ["", "lemma strand_sem_d_if_c: \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow> \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "assume *: \"\\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle>\""], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "{"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "fix M"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "have \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>", "proof (induction S rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<I>\n 2. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 3. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>c\n                    \\<I> \\<Longrightarrow>\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 4. \\<And>M uu_ t t' S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 5. \\<And>M X F S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (5 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<I>\n 2. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 3. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>c\n                    \\<I> \\<Longrightarrow>\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 4. \\<And>M uu_ t t' S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 5. \\<And>M X F S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>", "hence \"M \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\" \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<I> &&&\n    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>", "by auto"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\n\ngoal (5 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<I>\n 2. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 3. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>c\n                    \\<I> \\<Longrightarrow>\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 4. \\<And>M uu_ t t' S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 5. \\<And>M X F S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>", "thus ?case"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n     \\<I>", "using strand_sem_d.simps(2)[of M t S]"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d =\n  (\\<lambda>\\<I>.\n      M \\<turnstile> t \\<cdot> \\<I> \\<and>\n      \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n     \\<I>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   \\<I>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<I>\n 2. \\<And>M t S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>c\n                    \\<I> \\<Longrightarrow>\n                   \\<lbrakk>insert (t \\<cdot> x) M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 3. \\<And>M uu_ t t' S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>\n 4. \\<And>M X F S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>;\n        \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S\\<rbrakk>\\<^sub>d\n                          \\<I>", "qed (auto simp add: ineq_model_def)"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?M4; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n  \\<lbrakk>?M4; S\\<rbrakk>\\<^sub>d \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle> \\<Longrightarrow>\n    \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M4; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n  \\<lbrakk>?M4; S\\<rbrakk>\\<^sub>d \\<I>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "using *"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M4; S\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow>\n  \\<lbrakk>?M4; S\\<rbrakk>\\<^sub>d \\<I>\n  \\<I> \\<Turnstile>\\<^sub>c \\<langle>S,\\<theta>\\<rangle>\n\ngoal (1 subgoal):\n 1. \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>", "by (simp add: constr_sem_c_def constr_sem_d_def)"], ["proof (state)\nthis:\n  \\<I> \\<Turnstile> \\<langle>S,\\<theta>\\<rangle>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_sem_mono_ik:\n  \"\\<lbrakk>M \\<subseteq> M'; \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\" (is \"\\<lbrakk>?A'; ?A''\\<rbrakk> \\<Longrightarrow> ?A\")\n  \"\\<lbrakk>M \\<subseteq> M'; \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\" (is \"\\<lbrakk>?B'; ?B''\\<rbrakk> \\<Longrightarrow> ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>M \\<subseteq> M';\n      \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>) &&&\n    (\\<lbrakk>M \\<subseteq> M';\n      \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>M \\<subseteq> M';\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<lbrakk>M \\<subseteq> M';\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>", "show \"\\<lbrakk>?A'; ?A''\\<rbrakk> \\<Longrightarrow> ?A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<subseteq> M';\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>", "proof (induction M S arbitrary: M M' rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "case (ConsRcv M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n     \\<theta>", "using ConsRcv.IH[of \"insert (t \\<cdot> \\<theta>) M\" \"insert (t \\<cdot> \\<theta>) M'\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M\n           \\<subseteq> insert (t \\<cdot> \\<theta>) M';\n   \\<lbrakk>insert (t \\<cdot> \\<theta>) M; S\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>insert (t \\<cdot> \\<theta>)\n                              M'; S\\<rbrakk>\\<^sub>c\n                     \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n     \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n               S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence \"M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\" \"\\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta> &&&\n    \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>", "by auto"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence \"M' \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\""], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "using ideduct_synth_mono \\<open>M \\<subseteq> M'\\<close>"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>?M \\<turnstile>\\<^sub>c ?t; ?M \\<subseteq> ?M'\\<rbrakk>\n  \\<Longrightarrow> ?M' \\<turnstile>\\<^sub>c ?t\n  M \\<subseteq> M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "by metis"], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  M' \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n     \\<theta>", "using \\<open>\\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\\<close>"], ["proof (prove)\nusing this:\n  M' \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          \\<theta>", "qed auto"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<subseteq> M';\n   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<subseteq> M';\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>", "show \"\\<lbrakk>?B'; ?B''\\<rbrakk> \\<Longrightarrow> ?B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<subseteq> M';\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>", "proof (induction M S arbitrary: M M' rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case (ConsRcv M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>d\n     \\<theta>", "using ConsRcv.IH[of \"insert (t \\<cdot> \\<theta>) M\" \"insert (t \\<cdot> \\<theta>) M'\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M\n           \\<subseteq> insert (t \\<cdot> \\<theta>) M';\n   \\<lbrakk>insert (t \\<cdot> \\<theta>) M; S\\<rbrakk>\\<^sub>d\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>insert (t \\<cdot> \\<theta>)\n                              M'; S\\<rbrakk>\\<^sub>d\n                     \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>d\n     \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M'; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n               S\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence \"M \\<turnstile> t \\<cdot> \\<theta>\" \"\\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?M2 \\<subseteq> ?M'2;\n   \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M'2; S\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<subseteq> M'\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<theta> &&&\n    \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>", "by auto"], ["proof (state)\nthis:\n  M \\<turnstile> t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence \"M' \\<turnstile> t \\<cdot> \\<theta>\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t \\<cdot> \\<theta>", "using ideduct_mono \\<open>M \\<subseteq> M'\\<close>"], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\n  \\<lbrakk>?M \\<turnstile> ?t; ?M \\<subseteq> ?M'\\<rbrakk>\n  \\<Longrightarrow> ?M' \\<turnstile> ?t\n  M \\<subseteq> M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t \\<cdot> \\<theta>", "by metis"], ["proof (state)\nthis:\n  M' \\<turnstile> t \\<cdot> \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M t S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>d\n     \\<theta>", "using \\<open>\\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\\<close>"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t \\<cdot> \\<theta>\n  \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>d\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M'; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M Ma M'.\n       \\<lbrakk>Ma \\<subseteq> M';\n        \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; []\\<rbrakk>\\<^sub>d \\<theta>\n 2. \\<And>M uu_ t t' S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S Ma M'.\n       \\<lbrakk>\\<And>x M M'.\n                   \\<lbrakk>M \\<subseteq> M';\n                    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d\n\\<theta>;\n        Ma \\<subseteq> M';\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M'; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          \\<theta>", "qed auto"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<subseteq> M';\n   \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>M'; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal:\nNo subgoals!", "qed"], ["", "context\nbegin"], ["", "private"], ["", "lemma strand_sem_split_left:\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>) &&&\n    (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>)", "proof (induct S arbitrary: M)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "case (Cons x S)"], ["proof (state)\nthis:\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "case 1"], ["proof (state)\nthis:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>c \\<theta>", "using Cons"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>c \\<theta>", "by (cases x) simp_all"], ["proof (state)\nthis:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?Ma4; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?Ma4; x # S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?Ma4; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?Ma4; x # S\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "case 2"], ["proof (state)\nthis:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>d \\<theta>", "using Cons"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>d \\<theta>", "by (cases x) simp_all"], ["proof (state)\nthis:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?Ma4; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?Ma4; x # S\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>", "qed simp_all"], ["", "private"], ["", "lemma strand_sem_split_right:\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>c \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M \\<union>\n              (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n               \\<theta>); S'\\<rbrakk>\\<^sub>c\n      \\<theta>) &&&\n    (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M \\<union>\n              (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n               \\<theta>); S'\\<rbrakk>\\<^sub>d\n      \\<theta>)", "proof (induction S arbitrary: M rule: ik\\<^sub>s\\<^sub>t_induct)"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 6. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 8. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 10. \\<And>v va S M.\n        \\<lbrakk>\\<And>M.\n                    \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                     \\<theta> \\<Longrightarrow>\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>;\n         \\<And>M.\n            \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>;\n         \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) @\n                     S'\\<rbrakk>\\<^sub>d\n          \\<theta>\\<rbrakk>\n        \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                   (ik\\<^sub>s\\<^sub>t\n                                     (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\nS) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                    \\<theta>); S'\\<rbrakk>\\<^sub>d\n                           \\<theta>", "case (ConsRcv t S)"], ["proof (state)\nthis:\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2 \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2 \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (10 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 6. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 8. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 10. \\<And>v va S M.\n        \\<lbrakk>\\<And>M.\n                    \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                     \\<theta> \\<Longrightarrow>\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>;\n         \\<And>M.\n            \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>;\n         \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) @\n                     S'\\<rbrakk>\\<^sub>d\n          \\<theta>\\<rbrakk>\n        \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                   (ik\\<^sub>s\\<^sub>t\n                                     (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\nS) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                    \\<theta>); S'\\<rbrakk>\\<^sub>d\n                           \\<theta>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2 \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M2 \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (10 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 6. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 8. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 10. \\<And>v va S M.\n        \\<lbrakk>\\<And>M.\n                    \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                     \\<theta> \\<Longrightarrow>\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>;\n         \\<And>M.\n            \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>;\n         \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) @\n                     S'\\<rbrakk>\\<^sub>d\n          \\<theta>\\<rbrakk>\n        \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                   (ik\\<^sub>s\\<^sub>t\n                                     (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\nS) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                    \\<theta>); S'\\<rbrakk>\\<^sub>d\n                           \\<theta>", "case 1"], ["proof (state)\nthis:\n  \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n              S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (10 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 6. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 8. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 10. \\<And>v va S M.\n        \\<lbrakk>\\<And>M.\n                    \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                     \\<theta> \\<Longrightarrow>\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>;\n         \\<And>M.\n            \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>;\n         \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                      S) @\n                     S'\\<rbrakk>\\<^sub>d\n          \\<theta>\\<rbrakk>\n        \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                   (ik\\<^sub>s\\<^sub>t\n                                     (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\nS) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                    \\<theta>); S'\\<rbrakk>\\<^sub>d\n                           \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n              S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<union>\n             (ik\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<theta>); S'\\<rbrakk>\\<^sub>c\n     \\<theta>", "using ConsRcv.IH[of \"insert (t \\<cdot> \\<theta>) M\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n              S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M; S @ S'\\<rbrakk>\\<^sub>c\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M; S @ S'\\<rbrakk>\\<^sub>d\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<union>\n             (ik\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<theta>); S'\\<rbrakk>\\<^sub>c\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t\n             (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (9 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 6. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 8. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?Ma4; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                 S'\\<rbrakk>\\<^sub>c\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?Ma4 \\<union>\n           (ik\\<^sub>s\\<^sub>t\n             (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (9 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 6. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 8. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>?Ma4; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                 S'\\<rbrakk>\\<^sub>c\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?Ma4 \\<union>\n           (ik\\<^sub>s\\<^sub>t\n             (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (9 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 6. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 8. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case 2"], ["proof (state)\nthis:\n  \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n              S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (9 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>t S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 6. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 7. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 8. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 9. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n              S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<union>\n             (ik\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<theta>); S'\\<rbrakk>\\<^sub>d\n     \\<theta>", "using ConsRcv.IH[of \"insert (t \\<cdot> \\<theta>) M\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n              S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M; S @ S'\\<rbrakk>\\<^sub>c\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M; S @ S'\\<rbrakk>\\<^sub>d\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>insert (t \\<cdot> \\<theta>) M \\<union>\n           (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<union>\n             (ik\\<^sub>s\\<^sub>t\n               (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<theta>); S'\\<rbrakk>\\<^sub>d\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t\n             (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (8 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 6. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 7. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 8. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?Ma4; (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                 S'\\<rbrakk>\\<^sub>d\n   \\<theta> \\<Longrightarrow>\n  \\<lbrakk>?Ma4 \\<union>\n           (ik\\<^sub>s\\<^sub>t\n             (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (8 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>c\n        \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n       \\<lbrakk>M \\<union>\n                (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                 \\<theta>); S'\\<rbrakk>\\<^sub>d\n        \\<theta>\n 3. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>v S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t # S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (send\\<langle>v\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 6. \\<And>v va vb S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<langle>v: va \\<doteq> vb\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 7. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 8. \\<And>v va S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n                    \\<theta> \\<Longrightarrow>\n                   \\<lbrakk>M \\<union>\n                            (ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<theta>); S'\\<rbrakk>\\<^sub>c\n                    \\<theta>;\n        \\<And>M.\n           \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow>\n           \\<lbrakk>M \\<union>\n                    (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                     \\<theta>); S'\\<rbrakk>\\<^sub>d\n            \\<theta>;\n        \\<lbrakk>M; (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                     S) @\n                    S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M \\<union>\n                                  (ik\\<^sub>s\\<^sub>t\n                                    (\\<forall>v\\<langle>\\<or>\\<noteq>: va\\<rangle>\\<^sub>s\\<^sub>t #\n                                     S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                                   \\<theta>); S'\\<rbrakk>\\<^sub>d\n                          \\<theta>", "qed simp_all"], ["", "lemmas strand_sem_split[dest] =\n  strand_sem_split_left(1) strand_sem_split_right(1)\n  strand_sem_split_left(2) strand_sem_split_right(2)"], ["", "end"], ["", "lemma strand_sem_Send_split[dest]:\n  \"\\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>c \\<theta>\" (is \"\\<lbrakk>?A'; ?A''\\<rbrakk> \\<Longrightarrow> ?A\")\n  \"\\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>d \\<theta>\" (is \"\\<lbrakk>?B'; ?B''\\<rbrakk> \\<Longrightarrow> ?B\")\n  \"\\<lbrakk>\\<lbrakk>M; map Send T@S\\<rbrakk>\\<^sub>c \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>c \\<theta>\" (is \"\\<lbrakk>?C'; ?C''\\<rbrakk> \\<Longrightarrow> ?C\")\n  \"\\<lbrakk>\\<lbrakk>M; map Send T@S\\<rbrakk>\\<^sub>d \\<theta>; t \\<in> set T\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>d \\<theta>\" (is \"\\<lbrakk>?D'; ?D''\\<rbrakk> \\<Longrightarrow> ?D\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<theta>;\n       t \\<in> set T\\<rbrakk>\n      \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n                         \\<theta>) &&&\n     (\\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>;\n       t \\<in> set T\\<rbrakk>\n      \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n                         \\<theta>)) &&&\n    (\\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n      t \\<in> set T\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                   S\\<rbrakk>\\<^sub>c\n                        \\<theta>) &&&\n    (\\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n      t \\<in> set T\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                   S\\<rbrakk>\\<^sub>d\n                        \\<theta>)", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n                       \\<theta>\n 2. \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n                       \\<theta>\n 3. \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S\\<rbrakk>\\<^sub>c\n                       \\<theta>\n 4. \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S\\<rbrakk>\\<^sub>d\n                       \\<theta>", "show A: \"\\<lbrakk>?A'; ?A''\\<rbrakk> \\<Longrightarrow> ?A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n                       \\<theta>", "by (induct \"map Send T\" arbitrary: T rule: strand_sem_c.induct) auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<theta>;\n   t \\<in> set T\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n                     \\<theta>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n                       \\<theta>\n 2. \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S\\<rbrakk>\\<^sub>c\n                       \\<theta>\n 3. \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S\\<rbrakk>\\<^sub>d\n                       \\<theta>", "show B: \"\\<lbrakk>?B'; ?B''\\<rbrakk> \\<Longrightarrow> ?B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n                       \\<theta>", "by (induct \"map Send T\" arbitrary: T rule: strand_sem_d.induct) auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<theta>;\n   t \\<in> set T\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n                     \\<theta>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S\\<rbrakk>\\<^sub>c\n                       \\<theta>\n 2. \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n     t \\<in> set T\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                  S\\<rbrakk>\\<^sub>d\n                       \\<theta>", "show \"\\<lbrakk>?C'; ?C''\\<rbrakk> \\<Longrightarrow> ?C\" \"\\<lbrakk>?D'; ?D''\\<rbrakk> \\<Longrightarrow> ?D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n      t \\<in> set T\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                   S\\<rbrakk>\\<^sub>c\n                        \\<theta>) &&&\n    (\\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n      t \\<in> set T\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                   S\\<rbrakk>\\<^sub>d\n                        \\<theta>)", "using list.set_map list.simps(8) set_empty ik_snd_empty sup_bot.right_neutral"], ["proof (prove)\nusing this:\n  set (map ?f ?v) = ?f ` set ?v\n  map ?f [] = []\n  (set ?xs = {}) = (?xs = [])\n  ik\\<^sub>s\\<^sub>t (map Send ?X) = {}\n  sup ?a bot = ?a\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n      t \\<in> set T\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                   S\\<rbrakk>\\<^sub>c\n                        \\<theta>) &&&\n    (\\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n      t \\<in> set T\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                   S\\<rbrakk>\\<^sub>d\n                        \\<theta>)", "by (metis (no_types, lifting) A strand_sem_split(1,2) strand_sem_c.simps(2),\n        metis (no_types, lifting) B strand_sem_split(3,4) strand_sem_d.simps(2))"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>c \\<theta>;\n   t \\<in> set T\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                S\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>\\<lbrakk>M; map Send T @ S\\<rbrakk>\\<^sub>d \\<theta>;\n   t \\<in> set T\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                                S\\<rbrakk>\\<^sub>d\n                     \\<theta>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_sem_Send_map:\n  \"(\\<And>t. t \\<in> set T \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>c \\<I>) \\<Longrightarrow> \\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<I>\"\n  \"(\\<And>t. t \\<in> set T \\<Longrightarrow> \\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>d \\<I>) \\<Longrightarrow> \\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>t.\n         t \\<in> set T \\<Longrightarrow>\n         \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n          \\<I>) \\<Longrightarrow>\n     \\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>c \\<I>) &&&\n    ((\\<And>t.\n         t \\<in> set T \\<Longrightarrow>\n         \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n          \\<I>) \\<Longrightarrow>\n     \\<lbrakk>M; map Send T\\<rbrakk>\\<^sub>d \\<I>)", "by (induct T) auto"], ["", "lemma strand_sem_Receive_map: \"\\<lbrakk>M; map Receive T\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>M; map Receive T\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; map Receive T\\<rbrakk>\\<^sub>c \\<I> &&&\n    \\<lbrakk>M; map Receive T\\<rbrakk>\\<^sub>d \\<I>", "by (induct T arbitrary: M) auto"], ["", "lemma strand_sem_append[intro]:\n  \"\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>; \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>c \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c \\<theta>\"\n  \"\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>; \\<lbrakk>M \\<union> (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>); S'\\<rbrakk>\\<^sub>d \\<theta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n      \\<lbrakk>M \\<union>\n               (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>); S'\\<rbrakk>\\<^sub>c\n       \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c \\<theta>) &&&\n    (\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n      \\<lbrakk>M \\<union>\n               (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<theta>); S'\\<rbrakk>\\<^sub>d\n       \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>)", "proof (induction S arbitrary: M)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "case (Cons x S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>d\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>d\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "case 1"], ["proof (state)\nthis:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 4. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>", "using Cons"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>d\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>", "by (cases x) auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?Ma4; x # S\\<rbrakk>\\<^sub>c \\<theta>;\n   \\<lbrakk>?Ma4 \\<union>\n            (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?Ma4; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "{"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?Ma4; x # S\\<rbrakk>\\<^sub>c \\<theta>;\n   \\<lbrakk>?Ma4 \\<union>\n            (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?Ma4; (x # S) @ S'\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "case 2"], ["proof (state)\nthis:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>d \\<theta>\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>\n 3. \\<And>a S M.\n       \\<lbrakk>\\<And>M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<theta>;\n                    \\<lbrakk>M \\<union>\n                             (ik\\<^sub>s\\<^sub>t\n                               S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                              \\<theta>); S'\\<rbrakk>\\<^sub>c\n                     \\<theta>\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<And>M.\n           \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d \\<theta>;\n            \\<lbrakk>M \\<union>\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<theta>); S'\\<rbrakk>\\<^sub>d\n             \\<theta>\\<rbrakk>\n           \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M; a # S\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t (a # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; (a # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>d \\<theta>\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "using Cons"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; x # S\\<rbrakk>\\<^sub>d \\<theta>\n  \\<lbrakk>M \\<union>\n           (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            \\<theta>); S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>c\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d \\<theta>;\n   \\<lbrakk>?M2 \\<union>\n            (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>d\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>", "by (cases x) auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?Ma4; x # S\\<rbrakk>\\<^sub>d \\<theta>;\n   \\<lbrakk>?Ma4 \\<union>\n            (ik\\<^sub>s\\<^sub>t (x # S) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n             \\<theta>); S'\\<rbrakk>\\<^sub>d\n    \\<theta>\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?Ma4; (x # S) @ S'\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>c\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>c \\<theta>\n 2. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>d \\<theta>;\n        \\<lbrakk>M \\<union>\n                 (ik\\<^sub>s\\<^sub>t [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                  \\<theta>); S'\\<rbrakk>\\<^sub>d\n         \\<theta>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>M; [] @ S'\\<rbrakk>\\<^sub>d \\<theta>", "qed simp_all"], ["", "lemma ineq_model_subst:\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\"\n    and \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\"\n  shows \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "fix \\<sigma>::\"('a,'b) subst\" and t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "assume \\<sigma>: \"subst_domain \\<sigma> = set X\" \"ground (subst_range \\<sigma>)\"\n        and *: \"list_ex (\\<lambda>f. fst f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)) \\<noteq> snd f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))) F\""], ["proof (state)\nthis:\n  subst_domain \\<sigma> = set X\n  ground (subst_range \\<sigma>)\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n       snd f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n   F\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "obtain f where f: \"f \\<in> set F\" \"fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq> snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> set F;\n         fst f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n         snd f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using *"], ["proof (prove)\nusing this:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n       snd f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n   F\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> set F;\n         fst f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n         snd f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (induct F) auto"], ["proof (state)\nthis:\n  f \\<in> set F\n  fst f \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "have \"\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) = \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n    \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)", "by (metis (no_types, lifting) \\<sigma> subst_compose_assoc assms(1) inf_sup_aci(1)\n              subst_comp_eq_if_disjoint_vars sup_inf_absorb range_vars_alt_def)"], ["proof (state)\nthis:\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "hence \"(fst f \\<cdot> \\<delta>) \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq> (snd f \\<cdot> \\<delta>) \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\""], ["proof (prove)\nusing this:\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. fst f \\<cdot> \\<delta> \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n    snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>", "using f"], ["proof (prove)\nusing this:\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\n  f \\<in> set F\n  fst f \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. fst f \\<cdot> \\<delta> \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n    snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>", "by auto"], ["proof (state)\nthis:\n  fst f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "moreover"], ["proof (state)\nthis:\n  fst f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "have \"(fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>) \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>)\n    \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using f(1)"], ["proof (prove)\nusing this:\n  f \\<in> set F\n\ngoal (1 subgoal):\n 1. (fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>)\n    \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  (fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>)\n  \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  fst f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n  (fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>)\n  \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "have \"list_ex (\\<lambda>f. fst f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s \\<theta>) \\<noteq> snd f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s \\<theta>)) (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\nusing this:\n  fst f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n  (fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>)\n  \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n         snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>)\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using f(1) Bex_set"], ["proof (prove)\nusing this:\n  fst f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<delta> \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n  (fst f \\<cdot> \\<delta>, snd f \\<cdot> \\<delta>)\n  \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  f \\<in> set F\n  Bex (set ?xs) ?P = list_ex ?P ?xs\n\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n         snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>)\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by fastforce"], ["proof (state)\nthis:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n       snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>)\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s\n        (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n        snd f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n                         snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n                     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                      \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s\n        (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n        snd f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n                         snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n                     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                      \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s\n        (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n        snd f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n                         snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n                     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                      \\<delta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s\n        (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n        snd f \\<cdot>\n        ?\\<sigma>4 \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n                         snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n                     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                      \\<delta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n  \\<forall>\\<delta>'.\n     subst_domain \\<delta>' = set X \\<and>\n     ground (subst_range \\<delta>') \\<longrightarrow>\n     list_ex\n      (\\<lambda>f.\n          fst f \\<cdot>\n          \\<delta>' \\<circ>\\<^sub>s\n          (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n          snd f \\<cdot>\n          \\<delta>' \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n      F\n\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>'.\n       subst_domain \\<delta>' = set X \\<and>\n       ground (subst_range \\<delta>') \\<longrightarrow>\n       list_ex\n        (\\<lambda>f.\n            fst f \\<cdot> \\<delta>' \\<circ>\\<^sub>s \\<theta> \\<noteq>\n            snd f \\<cdot> \\<delta>' \\<circ>\\<^sub>s \\<theta>)\n        (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by simp"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ineq_model_subst':\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\"\n    and \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\"\n  shows \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "fix \\<sigma>::\"('a,'b) subst\" and t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "assume \\<sigma>: \"subst_domain \\<sigma> = set X\" \"ground (subst_range \\<sigma>)\"\n        and *: \"list_ex (\\<lambda>f. fst f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s \\<theta>) \\<noteq> snd f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s \\<theta>)) (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (state)\nthis:\n  subst_domain \\<sigma> = set X\n  ground (subst_range \\<sigma>)\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n       snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>)\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "obtain f where f: \"f \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\" \"fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq> snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                              \\<delta>);\n         fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n         snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using *"], ["proof (prove)\nusing this:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n       snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>)\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s\n                              \\<delta>);\n         fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n         snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (induct F) (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  f \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "then"], ["proof (chain)\npicking this:\n  f \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>", "obtain g where g: \"g \\<in> set F\" \"f = g \\<cdot>\\<^sub>p \\<delta>\""], ["proof (prove)\nusing this:\n  f \\<in> set (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> set F; f = g \\<cdot>\\<^sub>p \\<delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: subst_apply_pairs_def)"], ["proof (state)\nthis:\n  g \\<in> set F\n  f = g \\<cdot>\\<^sub>p \\<delta>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "have \"\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) = \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n    \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)", "by (metis (no_types, lifting) \\<sigma> subst_compose_assoc assms(1) inf_sup_aci(1)\n              subst_comp_eq_if_disjoint_vars sup_inf_absorb range_vars_alt_def)"], ["proof (state)\nthis:\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"fst g \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq> snd g \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. fst g \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n    snd g \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using f(2) g"], ["proof (prove)\nusing this:\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) =\n  \\<delta> \\<circ>\\<^sub>s (\\<sigma> \\<circ>\\<^sub>s \\<theta>)\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<theta>\n  g \\<in> set F\n  f = g \\<cdot>\\<^sub>p \\<delta>\n\ngoal (1 subgoal):\n 1. fst g \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n    snd g \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by (simp add: prod.case_eq_if)"], ["proof (state)\nthis:\n  fst g \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd g \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"list_ex (\\<lambda>f. fst f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)) \\<noteq> snd f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))) F\""], ["proof (prove)\nusing this:\n  fst g \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd g \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n         snd f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n     F", "using g Bex_set"], ["proof (prove)\nusing this:\n  fst g \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd g \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  g \\<in> set F\n  f = g \\<cdot>\\<^sub>p \\<delta>\n  Bex (set ?xs) ?P = list_ex ?P ?xs\n\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n         snd f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n     F", "by fastforce"], ["proof (state)\nthis:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n       snd f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n   F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "}"], ["proof (state)\nthis:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<theta>)\n    (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n  \\<forall>\\<delta>'.\n     subst_domain \\<delta>' = set X \\<and>\n     ground (subst_range \\<delta>') \\<longrightarrow>\n     list_ex\n      (\\<lambda>f.\n          fst f \\<cdot> \\<delta>' \\<circ>\\<^sub>s \\<theta> \\<noteq>\n          snd f \\<cdot> \\<delta>' \\<circ>\\<^sub>s \\<theta>)\n      (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>'.\n       subst_domain \\<delta>' = set X \\<and>\n       ground (subst_range \\<delta>') \\<longrightarrow>\n       list_ex\n        (\\<lambda>f.\n            fst f \\<cdot>\n            \\<delta>' \\<circ>\\<^sub>s\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n            snd f \\<cdot>\n            \\<delta>' \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n        F", "by simp"], ["proof (state)\nthis:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ineq_model_ground_subst:\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  assumes \"fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X \\<subseteq> subst_domain \\<delta>\"\n    and \"ground (subst_range \\<delta>)\"\n    and \"ineq_model \\<delta> X F\"\n  shows \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "fix \\<sigma>::\"('a,'b) subst\" and t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "assume \\<sigma>: \"subst_domain \\<sigma> = set X\" \"ground (subst_range \\<sigma>)\"\n        and *: \"list_ex (\\<lambda>f. fst f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s \\<delta>) \\<noteq> snd f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s \\<delta> )) F\""], ["proof (state)\nthis:\n  subst_domain \\<sigma> = set X\n  ground (subst_range \\<sigma>)\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n       snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>)\n   F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "obtain f where f: \"f \\<in> set F\" \"fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq> snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> set F;\n         fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n         snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using *"], ["proof (prove)\nusing this:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n       snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>)\n   F\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> set F;\n         fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n         snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (induct F) auto"], ["proof (state)\nthis:\n  f \\<in> set F\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"fv (fst f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\" \"fv (snd f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\""], ["proof (prove)\nusing this:\n  f \\<in> set F\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>\n\ngoal (1 subgoal):\n 1. fv (fst f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F &&&\n    fv (snd f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F", "by auto"], ["proof (state)\nthis:\n  fv (fst f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  fv (snd f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"fv (fst f) - set X \\<subseteq> subst_domain \\<delta>\" \"fv (snd f) - set X \\<subseteq> subst_domain \\<delta>\""], ["proof (prove)\nusing this:\n  fv (fst f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  fv (snd f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n\ngoal (1 subgoal):\n 1. fv (fst f) - set X \\<subseteq> subst_domain \\<delta> &&&\n    fv (snd f) - set X \\<subseteq> subst_domain \\<delta>", "using assms(1)"], ["proof (prove)\nusing this:\n  fv (fst f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  fv (snd f) \\<subseteq> fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. fv (fst f) - set X \\<subseteq> subst_domain \\<delta> &&&\n    fv (snd f) - set X \\<subseteq> subst_domain \\<delta>", "by auto"], ["proof (state)\nthis:\n  fv (fst f) - set X \\<subseteq> subst_domain \\<delta>\n  fv (snd f) - set X \\<subseteq> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"fv (fst f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\" \"fv (snd f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\""], ["proof (prove)\nusing this:\n  fv (fst f) - set X \\<subseteq> subst_domain \\<delta>\n  fv (snd f) - set X \\<subseteq> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. fv (fst f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta> &&&\n    fv (snd f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>", "using \\<sigma>"], ["proof (prove)\nusing this:\n  fv (fst f) - set X \\<subseteq> subst_domain \\<delta>\n  fv (snd f) - set X \\<subseteq> subst_domain \\<delta>\n  subst_domain \\<sigma> = set X\n  ground (subst_range \\<sigma>)\n\ngoal (1 subgoal):\n 1. fv (fst f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta> &&&\n    fv (snd f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>", "by (simp_all add: range_vars_alt_def subst_fv_unfold_ground_img)"], ["proof (state)\nthis:\n  fv (fst f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\n  fv (snd f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"fv (fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\" \"fv (snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\""], ["proof (prove)\nusing this:\n  fv (fst f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\n  fv (snd f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\n\ngoal (1 subgoal):\n 1. fv (fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {} &&&\n    fv (snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}", "using assms(2)"], ["proof (prove)\nusing this:\n  fv (fst f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\n  fv (snd f \\<cdot> \\<sigma>) \\<subseteq> subst_domain \\<delta>\n  ground (subst_range \\<delta>)\n\ngoal (1 subgoal):\n 1. fv (fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {} &&&\n    fv (snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}", "by (simp_all add: subst_fv_dom_ground_if_ground_img)"], ["proof (state)\nthis:\n  fv (fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\n  fv (snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq> snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  fv (fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\n  fv (snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\n\ngoal (1 subgoal):\n 1. fst f \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n    snd f \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using f(2) subst_ground_ident"], ["proof (prove)\nusing this:\n  fv (fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\n  fv (snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>) = {}\n  fst f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta> \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s \\<delta>\n  fv ?t = {} \\<Longrightarrow> ?t \\<cdot> ?s = ?t\n\ngoal (1 subgoal):\n 1. fst f \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n    snd f \\<cdot>\n    \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by fastforce"], ["proof (state)\nthis:\n  fst f \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "hence \"list_ex (\\<lambda>f. fst f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)) \\<noteq> snd f \\<cdot> (\\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))) F\""], ["proof (prove)\nusing this:\n  fst f \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n         snd f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n     F", "using f(1) Bex_set"], ["proof (prove)\nusing this:\n  fst f \\<cdot>\n  \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n  snd f \\<cdot> \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  f \\<in> set F\n  Bex (set ?xs) ?P = list_ex ?P ?xs\n\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n         snd f \\<cdot>\n         \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n     F", "by fastforce"], ["proof (state)\nthis:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n       snd f \\<cdot>\n       \\<sigma> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n   F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "}"], ["proof (state)\nthis:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta>)\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta>)\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta>)\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> subst_domain \\<delta>\n  ground (subst_range \\<delta>)\n  ineq_model \\<delta> X F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<sigma>4 = set X; ground (subst_range ?\\<sigma>4);\n   list_ex\n    (\\<lambda>f.\n        fst f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta> \\<noteq>\n        snd f \\<cdot> ?\\<sigma>4 \\<circ>\\<^sub>s \\<delta>)\n    F\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n                         snd f \\<cdot>\n                         ?\\<sigma>4 \\<circ>\\<^sub>s\n                         (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n                     F\n  fv\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s F - set X\n  \\<subseteq> subst_domain \\<delta>\n  ground (subst_range \\<delta>)\n  \\<forall>\\<delta>'.\n     subst_domain \\<delta>' = set X \\<and>\n     ground (subst_range \\<delta>') \\<longrightarrow>\n     list_ex\n      (\\<lambda>f.\n          fst f \\<cdot> \\<delta>' \\<circ>\\<^sub>s \\<delta> \\<noteq>\n          snd f \\<cdot> \\<delta>' \\<circ>\\<^sub>s \\<delta>)\n      F\n\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>'.\n       subst_domain \\<delta>' = set X \\<and>\n       ground (subst_range \\<delta>') \\<longrightarrow>\n       list_ex\n        (\\<lambda>f.\n            fst f \\<cdot>\n            \\<delta>' \\<circ>\\<^sub>s\n            (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<noteq>\n            snd f \\<cdot>\n            \\<delta>' \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n        F", "by simp"], ["proof (state)\nthis:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal:\nNo subgoals!", "qed"], ["", "context\nbegin"], ["", "private"], ["", "lemma strand_sem_subst_c:\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow>\n    \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>", "using assms"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow>\n    \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>", "proof (induction S arbitrary: \\<delta> M rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\" \"M \\<turnstile>\\<^sub>c t \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta> &&&\n    M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence \"M \\<turnstile>\\<^sub>c (t \\<cdot> \\<delta>) \\<cdot> \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>", "using subst_comp_all[of \\<delta> \\<theta> M] subst_subst_compose[of t \\<delta> \\<theta>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<theta>\n  t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>", "by simp"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta>", "using \\<open>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\\<close>"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta>", "unfolding subst_apply_strand_def"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n  \\<lbrakk>M; map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n               S\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; map (\\<lambda>x. x \\<cdot>\\<^sub>s\\<^sub>t\\<^sub>p \\<delta>)\n                 (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                  S)\\<rbrakk>\\<^sub>c\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "case (ConsRcv M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "have *: \"\\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>) M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n              M; S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using ConsRcv.prems(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n              M; S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n            M; S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "have \"bvars\\<^sub>s\\<^sub>t (Receive t#S) = bvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    bvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  bvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence **: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  bvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}", "using ConsRcv.prems(2)"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  bvars\\<^sub>s\\<^sub>t S\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}", "by blast"], ["proof (state)\nthis:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "have \"\\<lbrakk>M; Receive (t \\<cdot> \\<delta>)#(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>c \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t \\<cdot>\n                                \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>c\n     \\<theta>", "using ConsRcv.IH[OF * **]"], ["proof (prove)\nusing this:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t \\<cdot>\n                                \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>c\n     \\<theta>", "by (simp add: subst_all_insert)"], ["proof (state)\nthis:\n  \\<lbrakk>M; receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n              (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n              (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "case (ConsIneq M X F S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence *: \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\" and\n        ***: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta> &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "unfolding bvars\\<^sub>s\\<^sub>t_def ineq_model_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n           S))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta> &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "have **: \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "using ConsIneq"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>c\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "by (auto simp add: subst_compose_assoc ineq_model_def)"], ["proof (state)\nthis:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "have \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>)\n          \\<longrightarrow> (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "using * ** ***"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n  set X =\n  {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n       (subst_domain \\<gamma> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<gamma>)) =\n       {}", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>) \\<longrightarrow> \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>", "by (metis subst_comp_eq_if_disjoint_vars)"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "hence \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using ineq_model_subst[OF *** **]"], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by blast"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "moreover"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "have \"rm_vars (set X) \\<delta> = \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "using ConsIneq.prems(2)"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "by force"], ["proof (state)\nthis:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "ultimately"], ["proof (chain)\npicking this:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  rm_vars (set X) \\<delta> = \\<delta>", "show ?case"], ["proof (prove)\nusing this:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta>", "using *"], ["proof (prove)\nusing this:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  rm_vars (set X) \\<delta> = \\<delta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>c\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>c\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>c\n                          \\<theta>", "qed simp_all"], ["", "private"], ["", "lemma strand_sem_subst_c':\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta> \\<Longrightarrow>\n    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using assms"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta> \\<Longrightarrow>\n    \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "proof (induction S arbitrary: \\<delta> M rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<lbrakk>M; [Send t] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\" \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta> &&&\n    \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using ConsSnd.IH[OF _] ConsSnd.prems(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \"\\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \"M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>", "using \\<open>\\<lbrakk>M; [Send t] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>", "by auto"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"M \\<turnstile>\\<^sub>c t \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>", "using subst_subst_compose"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<cdot> \\<theta>\n  ?t \\<cdot> ?\\<sigma> \\<circ>\\<^sub>s ?\\<tau> =\n  ?t \\<cdot> ?\\<sigma> \\<cdot> ?\\<tau>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>", "by metis"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus \"\\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case (ConsRcv M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<lbrakk>(insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>) M); S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n              M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n     \\<theta>", "by (simp add: subst_all_insert)"], ["proof (state)\nthis:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using ConsRcv.IH ConsRcv.prems(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case (ConsIneq M X F S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \\<delta>: \"rm_vars (set X) \\<delta> = \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "using ConsIneq.prems(2)"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "by force"], ["proof (state)\nthis:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence *: \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\"\n    and ***: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\""], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>) &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "using ConsIneq"], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>) &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "unfolding bvars\\<^sub>s\\<^sub>t_def ineq_model_def"], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n           S))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>) &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have **: \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using ConsIneq.prems(1) \\<delta>"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by (auto simp add: subst_compose_assoc ineq_model_def)"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>)\n          \\<longrightarrow> (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "using * ** ***"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n  set X =\n  {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n       (subst_domain \\<gamma> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<gamma>)) =\n       {}", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>) \\<longrightarrow> \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>", "by (metis subst_comp_eq_if_disjoint_vars)"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "using ineq_model_subst'[OF *** **]"], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "by blast"], ["proof (state)\nthis:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using *"], ["proof (prove)\nusing this:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case ConsEq"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S_ =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>c\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>c\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S_ =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n                S_\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>c\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S_)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>c\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>c\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n                S_\\<rbrakk>\\<^sub>c\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>c\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>c\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "qed simp_all"], ["", "private"], ["", "lemma strand_sem_subst_d:\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow>\n    \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>", "using assms"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow>\n    \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>", "proof (induction S arbitrary: \\<delta> M rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\" \"M \\<turnstile> t \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta> &&&\n    M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence \"M \\<turnstile> (t \\<cdot> \\<delta>) \\<cdot> \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>", "using subst_comp_all[of \\<delta> \\<theta> M] subst_subst_compose[of t \\<delta> \\<theta>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<theta>\n  t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>", "by simp"], ["proof (state)\nthis:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "using \\<open>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\\<close>"], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case (ConsRcv M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "have *: \"\\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>) M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n              M; S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using ConsRcv.prems(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n              M; S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n            M; S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "have \"bvars\\<^sub>s\\<^sub>t (Receive t#S) = bvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n    bvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  bvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence **: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\""], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  bvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}", "using ConsRcv.prems(2)"], ["proof (prove)\nusing this:\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  bvars\\<^sub>s\\<^sub>t S\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n    bvars\\<^sub>s\\<^sub>t S =\n    {}", "by blast"], ["proof (state)\nthis:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "have \"\\<lbrakk>M; Receive (t \\<cdot> \\<delta>)#(S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t \\<cdot>\n                                \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>d\n     \\<theta>", "using ConsRcv.IH[OF * **]"], ["proof (prove)\nusing this:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t \\<cdot>\n                                \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n                (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>d\n     \\<theta>", "by (simp add: subst_all_insert)"], ["proof (state)\nthis:\n  \\<lbrakk>M; receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n              (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; receive\\<langle>t \\<cdot> \\<delta>\\<rangle>\\<^sub>s\\<^sub>t #\n              (S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>)\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case (ConsIneq M X F S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence *: \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\" and\n        ***: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta> &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "unfolding bvars\\<^sub>s\\<^sub>t_def ineq_model_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n           S))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta> &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "have **: \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "using ConsIneq"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "by (auto simp add: subst_compose_assoc ineq_model_def)"], ["proof (state)\nthis:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "have \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>)\n          \\<longrightarrow> (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "using * ** ***"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n  set X =\n  {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n       (subst_domain \\<gamma> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<gamma>)) =\n       {}", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>) \\<longrightarrow> \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>", "by (metis subst_comp_eq_if_disjoint_vars)"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "hence \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using ineq_model_subst[OF *** **]"], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by blast"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "moreover"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "have \"rm_vars (set X) \\<delta> = \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "using ConsIneq.prems(2)"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "by force"], ["proof (state)\nthis:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "ultimately"], ["proof (chain)\npicking this:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  rm_vars (set X) \\<delta> = \\<delta>", "show ?case"], ["proof (prove)\nusing this:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "using *"], ["proof (prove)\nusing this:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  rm_vars (set X) \\<delta> = \\<delta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "case ConsEq"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S_ =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n                             (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n           \\<delta>\\<rbrakk>\\<^sub>d\n\\<theta>;\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S\\<rbrakk>\\<^sub>d\n         (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S_ =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n                S_ \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>d\n            (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>);\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S_)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                                  ?\\<delta>2\\<rbrakk>\\<^sub>d\n                     \\<theta>\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n                S_ \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                 (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n\\<delta>\\<rbrakk>\\<^sub>d\n                          \\<theta>", "qed simp_all"], ["", "private"], ["", "lemma strand_sem_subst_d':\n  assumes \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta> \\<Longrightarrow>\n    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using assms"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t S =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta> \\<Longrightarrow>\n    \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "proof (induction S arbitrary: \\<delta> M rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case (ConsSnd M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<lbrakk>M; [Send t] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\" \"\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n                \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta> &&&\n    \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using ConsSnd.IH[OF _] ConsSnd.prems(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \"\\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \"M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>", "using \\<open>\\<lbrakk>M; [Send t] \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t] \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>", "by auto"], ["proof (state)\nthis:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"M \\<turnstile> t \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>", "using subst_subst_compose"], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<cdot> \\<theta>\n  ?t \\<cdot> ?\\<sigma> \\<circ>\\<^sub>s ?\\<tau> =\n  ?t \\<cdot> ?\\<sigma> \\<cdot> ?\\<tau>\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>", "by metis"], ["proof (state)\nthis:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus \"\\<lbrakk>M; [Send t]\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (5 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 5. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; [send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case (ConsRcv M t S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>) M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d \\<theta>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n              M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n     \\<theta>", "by (simp add: subst_all_insert)"], ["proof (state)\nthis:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (4 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M t S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 4. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using ConsRcv.IH ConsRcv.prems(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>insert (t \\<cdot> \\<delta> \\<cdot> \\<theta>)\n            M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t (receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case (ConsIneq M X F S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \\<delta>: \"rm_vars (set X) \\<delta> = \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "using ConsIneq.prems(2)"], ["proof (prove)\nusing this:\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. rm_vars (set X) \\<delta> = \\<delta>", "by force"], ["proof (state)\nthis:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence *: \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\"\n    and ***: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\""], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>) &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "using ConsIneq"], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t # S) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>) &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "unfolding bvars\\<^sub>s\\<^sub>t_def ineq_model_def"], ["proof (prove)\nusing this:\n  rm_vars (set X) \\<delta> = \\<delta>\n  \\<lbrakk>\\<lbrakk>?M2; S \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n           S))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>) &&&\n    (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have **: \"ineq_model \\<theta> X (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "using ConsIneq.prems(1) \\<delta>"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  rm_vars (set X) \\<delta> = \\<delta>\n\ngoal (1 subgoal):\n 1. ineq_model \\<theta> X\n     (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)", "by (auto simp add: subst_compose_assoc ineq_model_def)"], ["proof (state)\nthis:\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "have \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>)\n          \\<longrightarrow> (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "using * ** ***"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> set X = {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n       (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n       {}", "unfolding range_vars_alt_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n  ineq_model \\<theta> X\n   (F \\<cdot>\\<^sub>p\\<^sub>a\\<^sub>i\\<^sub>r\\<^sub>s \\<delta>)\n  (subst_domain \\<delta> \\<union>\n   fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n  set X =\n  {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       (subst_domain \\<delta> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<delta>)) \\<inter>\n       (subst_domain \\<gamma> \\<union>\n        fv\\<^sub>s\\<^sub>e\\<^sub>t (subst_range \\<gamma>)) =\n       {}", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"\\<forall>\\<gamma>. subst_domain \\<gamma> = set X \\<and> ground (subst_range \\<gamma>) \\<longrightarrow> \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n     (subst_domain \\<gamma> \\<union> range_vars \\<gamma>) =\n     {}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<gamma>.\n       subst_domain \\<gamma> = set X \\<and>\n       ground (subst_range \\<gamma>) \\<longrightarrow>\n       \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>", "by (metis subst_comp_eq_if_disjoint_vars)"], ["proof (state)\nthis:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "hence \"ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\""], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "using ineq_model_subst'[OF *** **]"], ["proof (prove)\nusing this:\n  \\<forall>\\<gamma>.\n     subst_domain \\<gamma> = set X \\<and>\n     ground (subst_range \\<gamma>) \\<longrightarrow>\n     \\<gamma> \\<circ>\\<^sub>s \\<delta> = \\<delta> \\<circ>\\<^sub>s \\<gamma>\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (1 subgoal):\n 1. ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F", "by blast"], ["proof (state)\nthis:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (3 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 3. \\<And>M X F S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n          S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using *"], ["proof (prove)\nusing this:\n  ineq_model (\\<delta> \\<circ>\\<^sub>s \\<theta>) X F\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "case ConsEq"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S_ =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_) =\n  {}\n\ngoal (2 subgoals):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n 2. \\<And>M uu_ t t' S \\<delta> Ma.\n       \\<lbrakk>\\<And>x \\<delta> M.\n                   \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t\n  \\<delta>\\<rbrakk>\\<^sub>d\n                             \\<theta>;\n                    (subst_domain \\<delta> \\<union>\n                     range_vars \\<delta>) \\<inter>\n                    bvars\\<^sub>s\\<^sub>t S =\n                    {}\\<rbrakk>\n                   \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d\n(\\<delta> \\<circ>\\<^sub>s \\<theta>);\n        \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n                     S \\<cdot>\\<^sub>s\\<^sub>t\n                     \\<delta>\\<rbrakk>\\<^sub>d\n         \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t\n         (\\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t # S) =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; \\<langle>uu_: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\nS\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   bvars\\<^sub>s\\<^sub>t S_ =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  bvars\\<^sub>s\\<^sub>t\n   (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n                S_\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "unfolding bvars\\<^sub>s\\<^sub>t_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>?M2; S_ \\<cdot>\\<^sub>s\\<^sub>t\n                         ?\\<delta>2\\<rbrakk>\\<^sub>d\n            \\<theta>;\n   (subst_domain ?\\<delta>2 \\<union> range_vars ?\\<delta>2) \\<inter>\n   \\<Union> (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p) S_)) =\n   {}\\<rbrakk>\n  \\<Longrightarrow> \\<lbrakk>?M2; S_\\<rbrakk>\\<^sub>d\n                     (?\\<delta>2 \\<circ>\\<^sub>s \\<theta>)\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_ \\<cdot>\\<^sub>s\\<^sub>t\n              \\<delta>\\<rbrakk>\\<^sub>d\n   \\<theta>\n  (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n  \\<Union>\n   (set (map (set \\<circ> bvars\\<^sub>s\\<^sub>t\\<^sub>p)\n          (\\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t # S_))) =\n  {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n                S_\\<rbrakk>\\<^sub>d\n     (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<langle>uu_: t_ \\<doteq> t'_\\<rangle>\\<^sub>s\\<^sub>t #\n              S_\\<rbrakk>\\<^sub>d\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<And>M \\<delta> Ma.\n       \\<lbrakk>\\<lbrakk>Ma; [] \\<cdot>\\<^sub>s\\<^sub>t\n                             \\<delta>\\<rbrakk>\\<^sub>d\n                 \\<theta>;\n        (subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter>\n        bvars\\<^sub>s\\<^sub>t [] =\n        {}\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk>Ma; []\\<rbrakk>\\<^sub>d\n                          (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "qed simp_all"], ["", "lemmas strand_sem_subst =\n  strand_sem_subst_c strand_sem_subst_c' strand_sem_subst_d strand_sem_subst_d'"], ["", "end"], ["", "lemma strand_sem_subst_subst_idem:\n  assumes \\<delta>: \"(subst_domain \\<delta> \\<union> range_vars \\<delta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n  shows \"\\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>); subst_idem \\<delta>\\<rbrakk> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<delta> \\<circ>\\<^sub>s \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n              (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n     subst_idem \\<delta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                       (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "using strand_sem_subst(2)[OF assms, of M \"\\<delta> \\<circ>\\<^sub>s \\<theta>\"] subst_compose_assoc[of \\<delta> \\<delta> \\<theta>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n  \\<delta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  \\<delta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n              (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n     subst_idem \\<delta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                       (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "unfolding subst_idem_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s \\<theta>) \\<Longrightarrow>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n   (\\<delta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>))\n  \\<delta> \\<circ>\\<^sub>s \\<delta> \\<circ>\\<^sub>s \\<theta> =\n  \\<delta> \\<circ>\\<^sub>s (\\<delta> \\<circ>\\<^sub>s \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>M; S \\<cdot>\\<^sub>s\\<^sub>t \\<delta>\\<rbrakk>\\<^sub>c\n              (\\<delta> \\<circ>\\<^sub>s \\<theta>);\n     \\<delta> \\<circ>\\<^sub>s \\<delta> = \\<delta>\\<rbrakk>\n    \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c\n                       (\\<delta> \\<circ>\\<^sub>s \\<theta>)", "by argo"], ["", "lemma strand_sem_subst_comp:\n  assumes \"(subst_domain \\<theta> \\<union> range_vars \\<theta>) \\<inter> bvars\\<^sub>s\\<^sub>t S = {}\"\n    and \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<delta>\" \"subst_domain \\<theta> \\<inter> (vars\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t M) = {}\"\n  shows \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "from assms(3)"], ["proof (chain)\npicking this:\n  subst_domain \\<theta> \\<inter>\n  (vars\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t M) =\n  {}", "have \"subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {}\" \"subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>e\\<^sub>t M = {}\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter>\n  (vars\\<^sub>s\\<^sub>t S \\<union> fv\\<^sub>s\\<^sub>e\\<^sub>t M) =\n  {}\n\ngoal (1 subgoal):\n 1. subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {} &&&\n    subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>e\\<^sub>t M = {}", "by auto"], ["proof (state)\nthis:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {}\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>e\\<^sub>t M = {}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "hence \"S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\" \"M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {}\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>e\\<^sub>t M = {}\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S &&&\n    M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M", "using strand_substI set_subst_ident[of M \\<theta>]"], ["proof (prove)\nusing this:\n  subst_domain \\<theta> \\<inter> vars\\<^sub>s\\<^sub>t S = {}\n  subst_domain \\<theta> \\<inter> fv\\<^sub>s\\<^sub>e\\<^sub>t M = {}\n  subst_domain ?\\<theta> \\<inter> fv\\<^sub>s\\<^sub>t ?S =\n  {} \\<Longrightarrow>\n  ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<theta> = ?S\n  subst_domain ?\\<theta> \\<inter> vars\\<^sub>s\\<^sub>t ?S =\n  {} \\<Longrightarrow>\n  ?S \\<cdot>\\<^sub>s\\<^sub>t ?\\<theta> = ?S\n  fv\\<^sub>s\\<^sub>e\\<^sub>t M \\<inter> subst_domain \\<theta> =\n  {} \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M\n\ngoal (1 subgoal):\n 1. S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S &&&\n    M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M", "by (blast, blast)"], ["proof (state)\nthis:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "using assms(2)"], ["proof (prove)\nusing this:\n  S \\<cdot>\\<^sub>s\\<^sub>t \\<theta> = S\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta> = M\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<delta>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)", "by (auto simp add: strand_sem_subst(2)[OF assms(1)])"], ["proof (state)\nthis:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c (\\<theta> \\<circ>\\<^sub>s \\<delta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_sem_c_imp_ineqs_neq:\n  assumes \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>\" \"Inequality X [(t,t')] \\<in> set S\"\n  shows \"t \\<noteq> t' \\<and> (\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>)\n                        \\<longrightarrow> t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and> t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<delta> \\<cdot> \\<I>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<and>\n    (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n        t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set S\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<and>\n    (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n        t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "proof (induction rule: strand_sem_induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set []\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<And>M ta S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 3. \\<And>M ta S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>insert (ta \\<cdot> x)\nM; S\\<rbrakk>\\<^sub>c\n                             \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 4. \\<And>M uu_ ta t'a S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; \\<langle>uu_: ta \\<doteq> t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<langle>uu_: ta \\<doteq> t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                   S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 5. \\<And>M Xa F S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; \\<forall>Xa\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<forall>Xa\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                   S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "case (ConsIneq M Y F S)"], ["proof (state)\nthis:\n  \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n   \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n   \\<in> set S\\<rbrakk>\n  \\<Longrightarrow> t \\<noteq> t' \\<and>\n                    (\\<forall>\\<delta>.\n                        subst_domain \\<delta> = set X \\<and>\n                        ground (subst_range \\<delta>) \\<longrightarrow>\n                        t \\<cdot> \\<delta> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<and>\n                        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n  \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n             S)\n\ngoal (5 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set []\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<And>M ta S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 3. \\<And>M ta S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>insert (ta \\<cdot> x)\nM; S\\<rbrakk>\\<^sub>c\n                             \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 4. \\<And>M uu_ ta t'a S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; \\<langle>uu_: ta \\<doteq> t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<langle>uu_: ta \\<doteq> t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                   S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 5. \\<And>M Xa F S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; \\<forall>Xa\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<forall>Xa\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                   S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n   \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n   \\<in> set S\\<rbrakk>\n  \\<Longrightarrow> t \\<noteq> t' \\<and>\n                    (\\<forall>\\<delta>.\n                        subst_domain \\<delta> = set X \\<and>\n                        ground (subst_range \\<delta>) \\<longrightarrow>\n                        t \\<cdot> \\<delta> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<and>\n                        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n  \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n             S)\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<and>\n    (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n        t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "proof (cases \"Inequality X [(t,t')] \\<in> set S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "case False"], ["proof (state)\nthis:\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<notin> set S\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "hence \"X = Y\" \"F = [(t,t')]\""], ["proof (prove)\nusing this:\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<notin> set S\n\ngoal (1 subgoal):\n 1. X = Y &&& F = [(t, t')]", "using ConsIneq"], ["proof (prove)\nusing this:\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<notin> set S\n  \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n   \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n   \\<in> set S\\<rbrakk>\n  \\<Longrightarrow> t \\<noteq> t' \\<and>\n                    (\\<forall>\\<delta>.\n                        subst_domain \\<delta> = set X \\<and>\n                        ground (subst_range \\<delta>) \\<longrightarrow>\n                        t \\<cdot> \\<delta> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<and>\n                        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n  \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n             S)\n\ngoal (1 subgoal):\n 1. X = Y &&& F = [(t, t')]", "by auto"], ["proof (state)\nthis:\n  X = Y\n  F = [(t, t')]\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "hence *: \"\\<forall>\\<theta>. subst_domain \\<theta> = set X \\<and> ground (subst_range \\<theta>) \\<longrightarrow> t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<theta> \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  X = Y\n  F = [(t, t')]\n\ngoal (1 subgoal):\n 1. \\<forall>\\<theta>.\n       subst_domain \\<theta> = set X \\<and>\n       ground (subst_range \\<theta>) \\<longrightarrow>\n       t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n       t' \\<cdot> \\<theta> \\<cdot> \\<I>", "using ConsIneq"], ["proof (prove)\nusing this:\n  X = Y\n  F = [(t, t')]\n  \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n   \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n   \\<in> set S\\<rbrakk>\n  \\<Longrightarrow> t \\<noteq> t' \\<and>\n                    (\\<forall>\\<delta>.\n                        subst_domain \\<delta> = set X \\<and>\n                        ground (subst_range \\<delta>) \\<longrightarrow>\n                        t \\<cdot> \\<delta> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<and>\n                        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                        t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n  \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n              S\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n  \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n             S)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<theta>.\n       subst_domain \\<theta> = set X \\<and>\n       ground (subst_range \\<theta>) \\<longrightarrow>\n       t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n       t' \\<cdot> \\<theta> \\<cdot> \\<I>", "by (auto simp add: ineq_model_def)"], ["proof (state)\nthis:\n  \\<forall>\\<theta>.\n     subst_domain \\<theta> = set X \\<and>\n     ground (subst_range \\<theta>) \\<longrightarrow>\n     t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<theta> \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<theta>.\n     subst_domain \\<theta> = set X \\<and>\n     ground (subst_range \\<theta>) \\<longrightarrow>\n     t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<theta> \\<cdot> \\<I>", "obtain \\<theta> where \\<theta>: \"subst_domain \\<theta> = set X\" \"ground (subst_range \\<theta>)\" \"t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<theta> \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  \\<forall>\\<theta>.\n     subst_domain \\<theta> = set X \\<and>\n     ground (subst_range \\<theta>) \\<longrightarrow>\n     t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<theta> \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<theta>.\n        \\<lbrakk>subst_domain \\<theta> = set X;\n         ground (subst_range \\<theta>);\n         t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n         t' \\<cdot> \\<theta> \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using interpretation_subst_exists'[of \"set X\"]"], ["proof (prove)\nusing this:\n  \\<forall>\\<theta>.\n     subst_domain \\<theta> = set X \\<and>\n     ground (subst_range \\<theta>) \\<longrightarrow>\n     t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<theta> \\<cdot> \\<I>\n  \\<exists>\\<theta>.\n     subst_domain \\<theta> = set X \\<and> ground (subst_range \\<theta>)\n\ngoal (1 subgoal):\n 1. (\\<And>\\<theta>.\n        \\<lbrakk>subst_domain \\<theta> = set X;\n         ground (subst_range \\<theta>);\n         t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n         t' \\<cdot> \\<theta> \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  subst_domain \\<theta> = set X\n  ground (subst_range \\<theta>)\n  t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<theta> \\<cdot> \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "hence \"t \\<noteq> t'\""], ["proof (prove)\nusing this:\n  subst_domain \\<theta> = set X\n  ground (subst_range \\<theta>)\n  t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<theta> \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. t \\<noteq> t'", "by auto"], ["proof (state)\nthis:\n  t \\<noteq> t'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "moreover"], ["proof (state)\nthis:\n  t \\<noteq> t'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "have \"\\<And>\\<I> \\<theta>. t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<theta> \\<cdot> \\<I> \\<Longrightarrow> t \\<cdot> \\<theta> \\<noteq> t' \\<cdot> \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<I> \\<theta>.\n       t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n       t' \\<cdot> \\<theta> \\<cdot> \\<I> \\<Longrightarrow>\n       t \\<cdot> \\<theta> \\<noteq> t' \\<cdot> \\<theta>", "by auto"], ["proof (state)\nthis:\n  t \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<noteq>\n  t' \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<Longrightarrow>\n  t \\<cdot> ?\\<theta>2 \\<noteq> t' \\<cdot> ?\\<theta>2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<notin> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "ultimately"], ["proof (chain)\npicking this:\n  t \\<noteq> t'\n  t \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<noteq>\n  t' \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<Longrightarrow>\n  t \\<cdot> ?\\<theta>2 \\<noteq> t' \\<cdot> ?\\<theta>2", "show ?thesis"], ["proof (prove)\nusing this:\n  t \\<noteq> t'\n  t \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<noteq>\n  t' \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<Longrightarrow>\n  t \\<cdot> ?\\<theta>2 \\<noteq> t' \\<cdot> ?\\<theta>2\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<and>\n    (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n        t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "using *"], ["proof (prove)\nusing this:\n  t \\<noteq> t'\n  t \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<noteq>\n  t' \\<cdot> ?\\<theta>2 \\<cdot> ?\\<I>2 \\<Longrightarrow>\n  t \\<cdot> ?\\<theta>2 \\<noteq> t' \\<cdot> ?\\<theta>2\n  \\<forall>\\<theta>.\n     subst_domain \\<theta> = set X \\<and>\n     ground (subst_range \\<theta>) \\<longrightarrow>\n     t \\<cdot> \\<theta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<theta> \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. t \\<noteq> t' \\<and>\n    (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n        t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n        t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "by auto"], ["proof (state)\nthis:\n  t \\<noteq> t' \\<and>\n  (\\<forall>\\<delta>.\n      subst_domain \\<delta> = set X \\<and>\n      ground (subst_range \\<delta>) \\<longrightarrow>\n      t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n      t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n      t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n              \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n            t')]\\<rangle>\\<^sub>s\\<^sub>t\n              \\<in> set S\\<rbrakk>\n             \\<Longrightarrow> t \\<noteq> t' \\<and>\n                               (\\<forall>\\<delta>.\n                                   subst_domain \\<delta> = set X \\<and>\n                                   ground\n                                    (subst_range \\<delta>) \\<longrightarrow>\n                                   t \\<cdot> \\<delta> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<and>\n                                   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                                   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n     \\<lbrakk>M; \\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                 S\\<rbrakk>\\<^sub>c\n      \\<I>;\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set (\\<forall>Y\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t #\n                S);\n     \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n     \\<in> set S\\<rbrakk>\n    \\<Longrightarrow> t \\<noteq> t' \\<and>\n                      (\\<forall>\\<delta>.\n                          subst_domain \\<delta> = set X \\<and>\n                          ground (subst_range \\<delta>) \\<longrightarrow>\n                          t \\<cdot> \\<delta> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<and>\n                          t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                          t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "qed simp"], ["proof (state)\nthis:\n  t \\<noteq> t' \\<and>\n  (\\<forall>\\<delta>.\n      subst_domain \\<delta> = set X \\<and>\n      ground (subst_range \\<delta>) \\<longrightarrow>\n      t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n      t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n      t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n\ngoal (4 subgoals):\n 1. \\<And>M.\n       \\<lbrakk>\\<lbrakk>M; []\\<rbrakk>\\<^sub>c \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set []\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 2. \\<And>M ta S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (send\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 3. \\<And>M ta S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>insert (ta \\<cdot> x)\nM; S\\<rbrakk>\\<^sub>c\n                             \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (receive\\<langle>ta\\<rangle>\\<^sub>s\\<^sub>t # S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)\n 4. \\<And>M uu_ ta t'a S.\n       \\<lbrakk>\\<And>x.\n                   \\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>;\n                    \\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n                  t')]\\<rangle>\\<^sub>s\\<^sub>t\n                    \\<in> set S\\<rbrakk>\n                   \\<Longrightarrow> t \\<noteq> t' \\<and>\n                                     (\\<forall>\\<delta>.\n   subst_domain \\<delta> = set X \\<and>\n   ground (subst_range \\<delta>) \\<longrightarrow>\n   t \\<cdot> \\<delta> \\<noteq> t' \\<cdot> \\<delta> \\<and>\n   t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n   t' \\<cdot> \\<delta> \\<cdot> \\<I>);\n        \\<lbrakk>M; \\<langle>uu_: ta \\<doteq> t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                    S\\<rbrakk>\\<^sub>c\n         \\<I>;\n        \\<forall>X\\<langle>\\<or>\\<noteq>: [(t, t')]\\<rangle>\\<^sub>s\\<^sub>t\n        \\<in> set (\\<langle>uu_: ta \\<doteq> t'a\\<rangle>\\<^sub>s\\<^sub>t #\n                   S)\\<rbrakk>\n       \\<Longrightarrow> t \\<noteq> t' \\<and>\n                         (\\<forall>\\<delta>.\n                             subst_domain \\<delta> = set X \\<and>\n                             ground (subst_range \\<delta>) \\<longrightarrow>\n                             t \\<cdot> \\<delta> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<and>\n                             t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n                             t' \\<cdot> \\<delta> \\<cdot> \\<I>)", "qed simp_all"], ["", "lemma strand_sem_c_imp_ineq_model:\n  assumes \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>\" \"Inequality X F \\<in> set S\"\n  shows \"ineq_model \\<I> X F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c \\<I>\n  \\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t \\<in> set S\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F", "by (induct S rule: strand_sem_induct) force+"], ["", "lemma strand_sem_wf_simple_fv_sat:\n  assumes \"wf\\<^sub>s\\<^sub>t {} S\" \"simple S\" \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\"\n  shows \"\\<And>v. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c \\<I> v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>v.\n       v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       \\<I> \\<turnstile>\\<^sub>c\n       \\<I> v", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n       \\<I> \\<turnstile>\\<^sub>c\n       \\<I> v", "proof (induction S rule: wf\\<^sub>s\\<^sub>t_simple_induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "case (ConsRcv t S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  fv t\n  \\<subseteq> {} \\<union> \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>{}; S @\n               [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "have \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using ConsRcv.hyps(3) ConsRcv.prems(1) vars_snd_rcv_strand2"], ["proof (prove)\nusing this:\n  fv t\n  \\<subseteq> {} \\<union> \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S))\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t])\n  wfrestrictedvars\\<^sub>s\\<^sub>t ?S =\n  \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d ?S)) \\<union>\n  \\<Union> (set (map fv\\<^sub>r\\<^sub>c\\<^sub>v ?S)) \\<union>\n  \\<Union> (set (map (fv\\<^sub>e\\<^sub>q assign) ?S))\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by fastforce"], ["proof (state)\nthis:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "moreover"], ["proof (state)\nthis:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "have \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>", "using \\<open>\\<lbrakk>{}; S@[Receive t]\\<rbrakk>\\<^sub>c \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @\n               [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "have \"ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<subseteq> ik\\<^sub>s\\<^sub>t (S@[Receive t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n    \\<subseteq> ik\\<^sub>s\\<^sub>t\n                 (S @\n                  [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<I>", "by auto"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n\ngoal (4 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>t S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        fv t\n        \\<subseteq> {} \\<union>\n                    \\<Union> (set (map fv\\<^sub>s\\<^sub>n\\<^sub>d S));\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @ [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 4. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "ultimately"], ["proof (chain)\npicking this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "using ConsRcv.IH ideduct_synth_mono"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  \\<lbrakk>?M \\<turnstile>\\<^sub>c ?t; ?M \\<subseteq> ?M'\\<rbrakk>\n  \\<Longrightarrow> ?M' \\<turnstile>\\<^sub>c ?t\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "by meson"], ["proof (state)\nthis:\n  intruder_synth\n   (ik\\<^sub>s\\<^sub>t\n     (S @\n      [receive\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I>)\n   (\\<I> v)\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "case (ConsIneq X F S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @\n            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>{}; S @\n               [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "hence \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @\n            [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>{}; S @\n               [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by fastforce"], ["proof (state)\nthis:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "moreover"], ["proof (state)\nthis:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "have \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>", "using \\<open>\\<lbrakk>{}; S@[Inequality X F]\\<rbrakk>\\<^sub>c \\<I>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; S @\n               [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "have \"ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<subseteq> ik\\<^sub>s\\<^sub>t (S@[Inequality X F]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n    \\<subseteq> ik\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<I>", "by auto"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n\ngoal (3 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va\n 3. \\<And>X F S v.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                 (S @\n                  [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "ultimately"], ["proof (chain)\npicking this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>", "show ?case"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "using ConsIneq.IH ideduct_synth_mono"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  \\<lbrakk>?M \\<turnstile>\\<^sub>c ?t; ?M \\<subseteq> ?M'\\<rbrakk>\n  \\<Longrightarrow> ?M' \\<turnstile>\\<^sub>c ?t\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "by meson"], ["proof (state)\nthis:\n  intruder_synth\n   (ik\\<^sub>s\\<^sub>t\n     (S @\n      [\\<forall>X\\<langle>\\<or>\\<noteq>: F\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I>)\n   (\\<I> v)\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va", "case (ConsSnd w S)"], ["proof (state)\nthis:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @ [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>{}; S @\n               [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va", "hence *: \"\\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\" \"ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c \\<I> w\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} S\n  simple S\n  \\<lbrakk>?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n   \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n  \\<Longrightarrow> intruder_synth\n                     (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                      \\<I>)\n                     (\\<I> ?v2)\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @ [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t])\n  \\<lbrakk>{}; S @\n               [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I> &&&\n    ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    \\<I> w", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  \\<I> w\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va", "have **: \"ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<subseteq> ik\\<^sub>s\\<^sub>t (S@[Send (Var w)]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n    \\<subseteq> ik\\<^sub>s\\<^sub>t\n                 (S @\n                  [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                \\<I>", "by simp"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>\n  \\<subseteq> ik\\<^sub>s\\<^sub>t\n               (S @\n                [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n              \\<I>\n\ngoal (2 subgoals):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v\n 2. \\<And>v S va.\n       \\<lbrakk>wf\\<^sub>s\\<^sub>t {} S; simple S;\n        \\<And>v.\n           \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S;\n            \\<lbrakk>{}; S\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n           \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                              S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                             \\<I> \\<turnstile>\\<^sub>c\n                             \\<I> v;\n        va \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n                  (S @ [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]);\n        \\<lbrakk>{}; S @\n                     [send\\<langle>Var v\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n         \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          (S @\n                           [send\\<langle>Var\n    v\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> va", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "proof (cases \"v = w\")"], ["proof (state)\ngoal (2 subgoals):\n 1. v = w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)\n 2. v \\<noteq> w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "case True"], ["proof (state)\nthis:\n  v = w\n\ngoal (2 subgoals):\n 1. v = w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)\n 2. v \\<noteq> w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v = w\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "using *(2) ideduct_synth_mono[OF _ **]"], ["proof (prove)\nusing this:\n  v = w\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  \\<I> w\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t\n   (S @\n    [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "by meson"], ["proof (state)\nthis:\n  intruder_synth\n   (ik\\<^sub>s\\<^sub>t\n     (S @\n      [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I>)\n   (\\<I> v)\n\ngoal (1 subgoal):\n 1. v \\<noteq> w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. v \\<noteq> w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "case False"], ["proof (state)\nthis:\n  v \\<noteq> w\n\ngoal (1 subgoal):\n 1. v \\<noteq> w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "hence \"v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\""], ["proof (prove)\nusing this:\n  v \\<noteq> w\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "using ConsSnd.prems(1)"], ["proof (prove)\nusing this:\n  v \\<noteq> w\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t\n           (S @ [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t])\n\ngoal (1 subgoal):\n 1. v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S", "by auto"], ["proof (state)\nthis:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. v \\<noteq> w \\<Longrightarrow>\n    intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "thus ?thesis"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "using ConsSnd.IH[OF _ *(1)] ideduct_synth_mono[OF _ **]"], ["proof (prove)\nusing this:\n  v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S\n  ?v2 \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n  intruder_synth (ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>)\n   (\\<I> ?v2)\n  ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t \\<Longrightarrow>\n  ik\\<^sub>s\\<^sub>t\n   (S @\n    [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  ?t\n\ngoal (1 subgoal):\n 1. intruder_synth\n     (ik\\<^sub>s\\<^sub>t\n       (S @\n        [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n      \\<I>)\n     (\\<I> v)", "by metis"], ["proof (state)\nthis:\n  intruder_synth\n   (ik\\<^sub>s\\<^sub>t\n     (S @\n      [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I>)\n   (\\<I> v)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  intruder_synth\n   (ik\\<^sub>s\\<^sub>t\n     (S @\n      [send\\<langle>Var w\\<rangle>\\<^sub>s\\<^sub>t]) \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I>)\n   (\\<I> v)\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       \\<lbrakk>v \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t [];\n        \\<lbrakk>{}; []\\<rbrakk>\\<^sub>c \\<I>\\<rbrakk>\n       \\<Longrightarrow> ik\\<^sub>s\\<^sub>t\n                          [] \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n                         \\<I> \\<turnstile>\\<^sub>c\n                         \\<I> v", "qed simp"], ["", "lemma strand_sem_wf_ik_or_assignment_rhs_fun_subterm:\n  assumes \"wf\\<^sub>s\\<^sub>t {} A\" \"\\<lbrakk>{}; A\\<rbrakk>\\<^sub>c \\<I>\" \"Var x \\<in> ik\\<^sub>s\\<^sub>t A\" \"\\<I> x = Fun f T\"\n          \"t\\<^sub>i \\<in> set T\" \"\\<not>ik\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t\\<^sub>i\" \"interpretation\\<^sub>s\\<^sub>u\\<^sub>b\\<^sub>s\\<^sub>t \\<I>\"\n  obtains S where\n    \"Fun f S \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (ik\\<^sub>s\\<^sub>t A) \\<or> Fun f S \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t (assignment_rhs\\<^sub>s\\<^sub>t A)\"\n    \"Fun f T = Fun f S \\<cdot> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A", "by (metis (no_types) assms(3) set_rev_mp term.set_intros(3) vars_subset_if_in_strand_ik2)"], ["proof (state)\nthis:\n  x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"Fun f T \\<cdot> \\<I> = Fun f T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f T \\<cdot> \\<I> = Fun f T", "by (metis subst_ground_ident interpretation_grounds_all assms(4,7))"], ["proof (state)\nthis:\n  Fun f T \\<cdot> \\<I> = Fun f T\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\n  Fun f T \\<cdot> \\<I> = Fun f T", "obtain A\\<^sub>p\\<^sub>r\\<^sub>e A\\<^sub>s\\<^sub>u\\<^sub>f where *:\n      \"\\<not>(\\<exists>w \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e. Fun f T \\<sqsubseteq> \\<I> w)\"\n      \"(\\<exists>t. A = A\\<^sub>p\\<^sub>r\\<^sub>e@Send t#A\\<^sub>s\\<^sub>u\\<^sub>f \\<and> Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n       (\\<exists>t t'. A = A\\<^sub>p\\<^sub>r\\<^sub>e@Equality Assign t t'#A\\<^sub>s\\<^sub>u\\<^sub>f \\<and> Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\""], ["proof (prove)\nusing this:\n  x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\n  Fun f T \\<cdot> \\<I> = Fun f T\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>p\\<^sub>r\\<^sub>e A\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   A\\<^sub>p\\<^sub>r\\<^sub>e.\n                            Fun f T \\<sqsubseteq> \\<I> w);\n         (\\<exists>t.\n             A =\n             A\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n             A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n         (\\<exists>t t'.\n             A =\n             A\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using wf_strand_first_Send_var_split[OF assms(1)] assms(4) subtermeqI'"], ["proof (prove)\nusing this:\n  x \\<in> wfrestrictedvars\\<^sub>s\\<^sub>t A\n  Fun f T \\<cdot> \\<I> = Fun f T\n  \\<exists>v\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t A.\n     ?t \\<cdot> ?\\<I> \\<sqsubseteq> ?\\<I> v \\<Longrightarrow>\n  \\<exists>S\\<^sub>p\\<^sub>r\\<^sub>e S\\<^sub>s\\<^sub>u\\<^sub>f.\n     \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                             S\\<^sub>p\\<^sub>r\\<^sub>e.\n                ?t \\<cdot> ?\\<I> \\<sqsubseteq> ?\\<I> w) \\<and>\n     ((\\<exists>t'.\n          A =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          send\\<langle>t'\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          ?t \\<cdot> ?\\<I> \\<sqsubseteq> t' \\<cdot> ?\\<I>) \\<or>\n      (\\<exists>t' t''.\n          A =\n          S\\<^sub>p\\<^sub>r\\<^sub>e @\n          \\<langle>assign: t' \\<doteq> t''\\<rangle>\\<^sub>s\\<^sub>t #\n          S\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n          ?t \\<cdot> ?\\<I> \\<sqsubseteq> t' \\<cdot> ?\\<I>))\n  \\<I> x = Fun f T\n  ?x = ?y \\<Longrightarrow> ?x \\<sqsubseteq> ?y\n\ngoal (1 subgoal):\n 1. (\\<And>A\\<^sub>p\\<^sub>r\\<^sub>e A\\<^sub>s\\<^sub>u\\<^sub>f.\n        \\<lbrakk>\\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n   A\\<^sub>p\\<^sub>r\\<^sub>e.\n                            Fun f T \\<sqsubseteq> \\<I> w);\n         (\\<exists>t.\n             A =\n             A\\<^sub>p\\<^sub>r\\<^sub>e @\n             send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n             A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n         (\\<exists>t t'.\n             A =\n             A\\<^sub>p\\<^sub>r\\<^sub>e @\n             \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n             A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n             Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n  (\\<exists>t.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n  (\\<exists>t t'.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n  (\\<exists>t.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n  (\\<exists>t t'.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "{"], ["proof (state)\nthis:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n  (\\<exists>t.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n  (\\<exists>t t'.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "assume **: \"A = A\\<^sub>p\\<^sub>r\\<^sub>e@Send t#A\\<^sub>s\\<^sub>u\\<^sub>f\" \"Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\""], ["proof (state)\nthis:\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # A\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence \"ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t \\<cdot> \\<I>\" \"\\<not>ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t\\<^sub>i\""], ["proof (prove)\nusing this:\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # A\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t\n     A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    t \\<cdot> \\<I> &&&\n    \\<not> ik\\<^sub>s\\<^sub>t\n            A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<^sub>i", "using assms(2,6)"], ["proof (prove)\nusing this:\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # A\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n  \\<lbrakk>{}; A\\<rbrakk>\\<^sub>c \\<I>\n  \\<not> ik\\<^sub>s\\<^sub>t A \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n         \\<I> \\<turnstile>\\<^sub>c\n         t\\<^sub>i\n\ngoal (1 subgoal):\n 1. ik\\<^sub>s\\<^sub>t\n     A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n    \\<I> \\<turnstile>\\<^sub>c\n    t \\<cdot> \\<I> &&&\n    \\<not> ik\\<^sub>s\\<^sub>t\n            A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<I> \\<turnstile>\\<^sub>c\n           t\\<^sub>i", "by (auto intro: ideduct_synth_mono)"], ["proof (state)\nthis:\n  ik\\<^sub>s\\<^sub>t\n   A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  t \\<cdot> \\<I>\n  \\<not> ik\\<^sub>s\\<^sub>t\n          A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n         \\<I> \\<turnstile>\\<^sub>c\n         t\\<^sub>i\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  ik\\<^sub>s\\<^sub>t\n   A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  t \\<cdot> \\<I>\n  \\<not> ik\\<^sub>s\\<^sub>t\n          A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n         \\<I> \\<turnstile>\\<^sub>c\n         t\\<^sub>i", "obtain s where s: \"s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\" \"Fun f T \\<sqsubseteq> s \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t\n   A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  t \\<cdot> \\<I>\n  \\<not> ik\\<^sub>s\\<^sub>t\n          A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n         \\<I> \\<turnstile>\\<^sub>c\n         t\\<^sub>i\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e;\n         Fun f T \\<sqsubseteq> s \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms(5) **(2)"], ["proof (prove)\nusing this:\n  ik\\<^sub>s\\<^sub>t\n   A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n  \\<I> \\<turnstile>\\<^sub>c\n  t \\<cdot> \\<I>\n  \\<not> ik\\<^sub>s\\<^sub>t\n          A\\<^sub>p\\<^sub>r\\<^sub>e \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n         \\<I> \\<turnstile>\\<^sub>c\n         t\\<^sub>i\n  t\\<^sub>i \\<in> set T\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>s.\n        \\<lbrakk>s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e;\n         Fun f T \\<sqsubseteq> s \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (induct rule: intruder_synth_induct) auto"], ["proof (state)\nthis:\n  s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n  Fun f T \\<sqsubseteq> s \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n  Fun f T \\<sqsubseteq> s \\<cdot> \\<I>", "obtain g S where gS: \"Fun g S \\<sqsubseteq> s\" \"Fun f T = Fun g S \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n  Fun f T \\<sqsubseteq> s \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>g S.\n        \\<lbrakk>Fun g S \\<sqsubseteq> s;\n         Fun f T = Fun g S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using subterm_subst_not_img_subterm[OF s(2)] *(1)"], ["proof (prove)\nusing this:\n  s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n  Fun f T \\<sqsubseteq> s \\<cdot> \\<I>\n  \\<not> (\\<exists>w\\<in>fv s.\n             Fun f T \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n  \\<exists>fa Ta.\n     Fun fa Ta \\<sqsubseteq> s \\<and> Fun f T = Fun fa Ta \\<cdot> \\<I>\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n\ngoal (1 subgoal):\n 1. (\\<And>g S.\n        \\<lbrakk>Fun g S \\<sqsubseteq> s;\n         Fun f T = Fun g S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  Fun g S \\<sqsubseteq> s\n  Fun f T = Fun g S \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence ?thesis"], ["proof (prove)\nusing this:\n  Fun g S \\<sqsubseteq> s\n  Fun f T = Fun g S \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. thesis", "using that **(1) s(1)"], ["proof (prove)\nusing this:\n  Fun g S \\<sqsubseteq> s\n  Fun f T = Fun g S \\<cdot> \\<I>\n  \\<lbrakk>Fun f ?S2 \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n           ik\\<^sub>s\\<^sub>t A \\<or>\n           Fun f ?S2 \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n           assignment_rhs\\<^sub>s\\<^sub>t A;\n   Fun f T = Fun f ?S2 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t # A\\<^sub>s\\<^sub>u\\<^sub>f\n  s \\<in> ik\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. thesis", "by force"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "}"], ["proof (state)\nthis:\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>?t4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>?t4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "{"], ["proof (state)\nthis:\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>?t4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "fix t t'"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "assume **: \"A = A\\<^sub>p\\<^sub>r\\<^sub>e@Equality Assign t t'#A\\<^sub>s\\<^sub>u\\<^sub>f\" \"Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\""], ["proof (state)\nthis:\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with assms(2)"], ["proof (chain)\npicking this:\n  \\<lbrakk>{}; A\\<rbrakk>\\<^sub>c \\<I>\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>", "have \"t \\<cdot> \\<I> = t' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>{}; A\\<rbrakk>\\<^sub>c \\<I>\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. Unifier \\<I> t t'", "by auto"], ["proof (state)\nthis:\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence \"Fun f T \\<sqsubseteq> t' \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  Unifier \\<I> t t'\n\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq> t' \\<cdot> \\<I>", "using **(2)"], ["proof (prove)\nusing this:\n  Unifier \\<I> t t'\n  Fun f T \\<sqsubseteq> t \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq> t' \\<cdot> \\<I>", "by auto"], ["proof (state)\nthis:\n  Fun f T \\<sqsubseteq> t' \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms(1) **(1)"], ["proof (chain)\npicking this:\n  wf\\<^sub>s\\<^sub>t {} A\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f", "have \"fv t' \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\""], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} A\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f\n\ngoal (1 subgoal):\n 1. fv t'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e", "using wf_eq_fv[of \"{}\" A\\<^sub>p\\<^sub>r\\<^sub>e t t' A\\<^sub>s\\<^sub>u\\<^sub>f] vars_snd_rcv_strand_subset2(4)[of A\\<^sub>p\\<^sub>r\\<^sub>e]"], ["proof (prove)\nusing this:\n  wf\\<^sub>s\\<^sub>t {} A\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f\n  wf\\<^sub>s\\<^sub>t {}\n   (A\\<^sub>p\\<^sub>r\\<^sub>e @\n    \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n    A\\<^sub>s\\<^sub>u\\<^sub>f) \\<Longrightarrow>\n  fv t'\n  \\<subseteq> wfvarsoccs\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e \\<union>\n              {}\n  wfvarsoccs\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. fv t'\n    \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e", "by blast"], ["proof (state)\nthis:\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e", "obtain g S where gS: \"Fun g S \\<sqsubseteq> t'\" \"Fun f T = Fun g S \\<cdot> \\<I>\""], ["proof (prove)\nusing this:\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n\ngoal (1 subgoal):\n 1. (\\<And>g S.\n        \\<lbrakk>Fun g S \\<sqsubseteq> t';\n         Fun f T = Fun g S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using subterm_subst_not_img_subterm[OF \\<open>Fun f T \\<sqsubseteq> t' \\<cdot> \\<I>\\<close>] *(1)"], ["proof (prove)\nusing this:\n  fv t'\n  \\<subseteq> wfrestrictedvars\\<^sub>s\\<^sub>t A\\<^sub>p\\<^sub>r\\<^sub>e\n  \\<not> (\\<exists>w\\<in>fv t'.\n             Fun f T \\<sqsubseteq> \\<I> w) \\<Longrightarrow>\n  \\<exists>fa Ta.\n     Fun fa Ta \\<sqsubseteq> t' \\<and> Fun f T = Fun fa Ta \\<cdot> \\<I>\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n\ngoal (1 subgoal):\n 1. (\\<And>g S.\n        \\<lbrakk>Fun g S \\<sqsubseteq> t';\n         Fun f T = Fun g S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fastforce"], ["proof (state)\nthis:\n  Fun g S \\<sqsubseteq> t'\n  Fun f T = Fun g S \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence ?thesis"], ["proof (prove)\nusing this:\n  Fun g S \\<sqsubseteq> t'\n  Fun f T = Fun g S \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. thesis", "using that **(1)"], ["proof (prove)\nusing this:\n  Fun g S \\<sqsubseteq> t'\n  Fun f T = Fun g S \\<cdot> \\<I>\n  \\<lbrakk>Fun f ?S2 \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n           ik\\<^sub>s\\<^sub>t A \\<or>\n           Fun f ?S2 \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n           assignment_rhs\\<^sub>s\\<^sub>t A;\n   Fun f T = Fun f ?S2 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  A =\n  A\\<^sub>p\\<^sub>r\\<^sub>e @\n  \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n  A\\<^sub>s\\<^sub>u\\<^sub>f\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "}"], ["proof (state)\nthis:\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           \\<langle>assign: ?t4 \\<doteq> ?t'4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 ik\\<^sub>s\\<^sub>t A \\<or>\n                 Fun f S \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                 assignment_rhs\\<^sub>s\\<^sub>t A;\n         Fun f T = Fun f S \\<cdot> \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n  (\\<exists>t.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n  (\\<exists>t t'.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>?t4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           \\<langle>assign: ?t4 \\<doteq> ?t'4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>w\\<in>wfrestrictedvars\\<^sub>s\\<^sub>t\n                          A\\<^sub>p\\<^sub>r\\<^sub>e.\n             Fun f T \\<sqsubseteq> \\<I> w)\n  (\\<exists>t.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      send\\<langle>t\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>) \\<or>\n  (\\<exists>t t'.\n      A =\n      A\\<^sub>p\\<^sub>r\\<^sub>e @\n      \\<langle>assign: t \\<doteq> t'\\<rangle>\\<^sub>s\\<^sub>t #\n      A\\<^sub>s\\<^sub>u\\<^sub>f \\<and>\n      Fun f T \\<sqsubseteq> t \\<cdot> \\<I>)\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           send\\<langle>?t4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n  \\<lbrakk>A =\n           A\\<^sub>p\\<^sub>r\\<^sub>e @\n           \\<langle>assign: ?t4 \\<doteq> ?t'4\\<rangle>\\<^sub>s\\<^sub>t #\n           A\\<^sub>s\\<^sub>u\\<^sub>f;\n   Fun f T \\<sqsubseteq> ?t4 \\<cdot> \\<I>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_sem_not_unif_is_sat_ineq:\n  assumes \"\\<nexists>\\<theta>. Unifier \\<theta> t t'\"\n  shows \"\\<lbrakk>M; [Inequality X [(t,t')]]\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>M; [Inequality X [(t,t')]]\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [\\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n               t')]\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>M; [\\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n               t')]\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     \\<I>", "using assms list_ex_simps(1)[of _ \"(t,t')\" \"[]\"] prod.sel[of t t']\n      strand_sem_c.simps(1,5) strand_sem_d.simps(1,5)"], ["proof (prove)\nusing this:\n  \\<nexists>\\<theta>. Unifier \\<theta> t t'\n  list_ex ?P [(t, t')] = (?P (t, t') \\<or> list_ex ?P [])\n  fst (t, t') = t\n  snd (t, t') = t'\n  \\<lbrakk>?M; []\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. True)\n  \\<lbrakk>?M; \\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t #\n               ?S\\<rbrakk>\\<^sub>c =\n  (\\<lambda>\\<I>.\n      ineq_model \\<I> ?X ?F \\<and> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c \\<I>)\n  \\<lbrakk>?M; []\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. True)\n  \\<lbrakk>?M; \\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t #\n               ?S\\<rbrakk>\\<^sub>d =\n  (\\<lambda>\\<I>.\n      ineq_model \\<I> ?X ?F \\<and> \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d \\<I>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [\\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n               t')]\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>M; [\\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n               t')]\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     \\<I>", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<nexists>\\<theta>. Unifier \\<theta> t t'\n  list_ex ?P [(t, t')] = (?P (t, t') \\<or> list_ex ?P [])\n  fst (t, t') = t\n  snd (t, t') = t'\n  \\<lbrakk>?M; []\\<rbrakk>\\<^sub>c = (\\<lambda>\\<I>. True)\n  \\<lbrakk>?M; \\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t #\n               ?S\\<rbrakk>\\<^sub>c =\n  (\\<lambda>\\<I>.\n      (\\<forall>\\<delta>.\n          subst_domain \\<delta> = set ?X \\<and>\n          ground (subst_range \\<delta>) \\<longrightarrow>\n          list_ex\n           (\\<lambda>f.\n               fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n               snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n           ?F) \\<and>\n      \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>c \\<I>)\n  \\<lbrakk>?M; []\\<rbrakk>\\<^sub>d = (\\<lambda>\\<I>. True)\n  \\<lbrakk>?M; \\<forall>?X\\<langle>\\<or>\\<noteq>: ?F\\<rangle>\\<^sub>s\\<^sub>t #\n               ?S\\<rbrakk>\\<^sub>d =\n  (\\<lambda>\\<I>.\n      (\\<forall>\\<delta>.\n          subst_domain \\<delta> = set ?X \\<and>\n          ground (subst_range \\<delta>) \\<longrightarrow>\n          list_ex\n           (\\<lambda>f.\n               fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n               snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n           ?F) \\<and>\n      \\<lbrakk>?M; ?S\\<rbrakk>\\<^sub>d \\<I>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M; [\\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n               t')]\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>M; [\\<forall>X\\<langle>\\<or>\\<noteq>: [(t,\n               t')]\\<rangle>\\<^sub>s\\<^sub>t]\\<rbrakk>\\<^sub>d\n     \\<I>", "by presburger+"], ["", "lemma ineq_model_singleI[intro]:\n  assumes \"\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>) \\<longrightarrow> t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<delta> \\<cdot> \\<I>\"\n  shows \"ineq_model \\<I> X [(t,t')]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X [(t, t')]", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>\\<delta>.\n     subst_domain \\<delta> = set X \\<and>\n     ground (subst_range \\<delta>) \\<longrightarrow>\n     t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<delta> \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X [(t, t')]", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<delta>.\n     subst_domain \\<delta> = set X \\<and>\n     ground (subst_range \\<delta>) \\<longrightarrow>\n     t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n     t' \\<cdot> \\<delta> \\<cdot> \\<I>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>.\n       subst_domain \\<delta> = set X \\<and>\n       ground (subst_range \\<delta>) \\<longrightarrow>\n       list_ex\n        (\\<lambda>f.\n            fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n            snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n        [(t, t')]", "by auto"], ["", "lemma ineq_model_singleE:\n  assumes \"ineq_model \\<I> X [(t,t')]\"\n  shows \"\\<forall>\\<delta>. subst_domain \\<delta> = set X \\<and> ground (subst_range \\<delta>) \\<longrightarrow> t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq> t' \\<cdot> \\<delta> \\<cdot> \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>.\n       subst_domain \\<delta> = set X \\<and>\n       ground (subst_range \\<delta>) \\<longrightarrow>\n       t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n       t' \\<cdot> \\<delta> \\<cdot> \\<I>", "using assms"], ["proof (prove)\nusing this:\n  ineq_model \\<I> X [(t, t')]\n\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>.\n       subst_domain \\<delta> = set X \\<and>\n       ground (subst_range \\<delta>) \\<longrightarrow>\n       t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n       t' \\<cdot> \\<delta> \\<cdot> \\<I>", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<delta>.\n     subst_domain \\<delta> = set X \\<and>\n     ground (subst_range \\<delta>) \\<longrightarrow>\n     list_ex\n      (\\<lambda>f.\n          fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n          snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n      [(t, t')]\n\ngoal (1 subgoal):\n 1. \\<forall>\\<delta>.\n       subst_domain \\<delta> = set X \\<and>\n       ground (subst_range \\<delta>) \\<longrightarrow>\n       t \\<cdot> \\<delta> \\<cdot> \\<I> \\<noteq>\n       t' \\<cdot> \\<delta> \\<cdot> \\<I>", "by auto"], ["", "lemma ineq_model_single_iff:\n  fixes F::\"(('a,'b) term \\<times> ('a,'b) term) list\"\n  shows \"ineq_model \\<I> X F \\<longleftrightarrow>\n         ineq_model \\<I> X [(Fun f (Fun c []#map fst F),Fun f (Fun c []#map snd F))]\"\n    (is \"?A \\<longleftrightarrow> ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "let ?P = \"\\<lambda>\\<delta> f. fst f \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>) \\<noteq> snd f \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>)\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "let ?Q = \"\\<lambda>\\<delta> t t'. t \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>) \\<noteq> t' \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>)\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "let ?T = \"\\<lambda>g. Fun c []#map g F\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "let ?S = \"\\<lambda>\\<delta> g. map (\\<lambda>x. x \\<cdot> (\\<delta> \\<circ>\\<^sub>s \\<I>)) (Fun c []#map g F)\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "let ?t = \"Fun f (?T fst)\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "let ?t' = \"Fun f (?T snd)\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "have len: \"\\<And>g h. length (?T g) = length (?T h)\"\n            \"\\<And>g h \\<delta>. length (?S \\<delta> g) = length (?T h)\"\n            \"\\<And>g h \\<delta>. length (?S \\<delta> g) = length (?T h)\"\n            \"\\<And>g h \\<delta> \\<sigma>. length (?S \\<delta> g) = length (?S \\<sigma> h)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<And>g h.\n         length (Fun c [] # map g F) = length (Fun c [] # map h F)) &&&\n     (\\<And>g h \\<delta>.\n         length\n          (Fun c [] # map g F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n           \\<delta> \\<circ>\\<^sub>s \\<I>) =\n         length (Fun c [] # map h F))) &&&\n    (\\<And>g h \\<delta>.\n        length\n         (Fun c [] # map g F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n          \\<delta> \\<circ>\\<^sub>s \\<I>) =\n        length (Fun c [] # map h F)) &&&\n    (\\<And>g h \\<delta> \\<sigma>.\n        length\n         (Fun c [] # map g F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n          \\<delta> \\<circ>\\<^sub>s \\<I>) =\n        length\n         (Fun c [] # map h F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n          \\<sigma> \\<circ>\\<^sub>s \\<I>))", "by simp_all"], ["proof (state)\nthis:\n  length (Fun c [] # map ?g6 F) = length (Fun c [] # map ?h6 F)\n  length\n   (Fun c [] # map ?g6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<delta>6 \\<circ>\\<^sub>s \\<I>) =\n  length (Fun c [] # map ?h6 F)\n  length\n   (Fun c [] # map ?g6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<delta>6 \\<circ>\\<^sub>s \\<I>) =\n  length (Fun c [] # map ?h6 F)\n  length\n   (Fun c [] # map ?g6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<delta>6 \\<circ>\\<^sub>s \\<I>) =\n  length\n   (Fun c [] # map ?h6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<sigma>6 \\<circ>\\<^sub>s \\<I>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "{"], ["proof (state)\nthis:\n  length (Fun c [] # map ?g6 F) = length (Fun c [] # map ?h6 F)\n  length\n   (Fun c [] # map ?g6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<delta>6 \\<circ>\\<^sub>s \\<I>) =\n  length (Fun c [] # map ?h6 F)\n  length\n   (Fun c [] # map ?g6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<delta>6 \\<circ>\\<^sub>s \\<I>) =\n  length (Fun c [] # map ?h6 F)\n  length\n   (Fun c [] # map ?g6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<delta>6 \\<circ>\\<^sub>s \\<I>) =\n  length\n   (Fun c [] # map ?h6 F \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n    ?\\<sigma>6 \\<circ>\\<^sub>s \\<I>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "fix \\<delta>::\"('a,'b) subst\""], ["proof (state)\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "assume \\<delta>: \"subst_domain \\<delta> = set X\" \"ground (subst_range \\<delta>)\""], ["proof (state)\nthis:\n  subst_domain \\<delta> = set X\n  ground (subst_range \\<delta>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "have \"list_ex (?P \\<delta>) F \\<longleftrightarrow> ?Q \\<delta> ?t ?t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F =\n    (Fun f (Fun c [] # map fst F) \\<cdot>\n     \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n     Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F \\<Longrightarrow>\n    Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\n 2. Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<Longrightarrow>\n    list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F", "assume \"list_ex (?P \\<delta>) F\""], ["proof (state)\nthis:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n       snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n   F\n\ngoal (2 subgoals):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F \\<Longrightarrow>\n    Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\n 2. Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<Longrightarrow>\n    list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F", "then"], ["proof (chain)\npicking this:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n       snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n   F", "obtain a where a: \"a \\<in> set F\" \"?P \\<delta> a\""], ["proof (prove)\nusing this:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n       snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n   F\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in> set F;\n         fst a \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd a \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (mono_tags, lifting) Bex_set)"], ["proof (state)\nthis:\n  a \\<in> set F\n  fst a \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n  snd a \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\n\ngoal (2 subgoals):\n 1. list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F \\<Longrightarrow>\n    Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\n 2. Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<Longrightarrow>\n    list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F", "thus \"?Q \\<delta> ?t ?t'\""], ["proof (prove)\nusing this:\n  a \\<in> set F\n  fst a \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n  snd a \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\n\ngoal (1 subgoal):\n 1. Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>", "by auto"], ["proof (state)\nthis:\n  Fun f (Fun c [] # map fst F) \\<cdot>\n  \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n  Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>\n\ngoal (1 subgoal):\n 1. Fun f (Fun c [] # map fst F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n    Fun f (Fun c [] # map snd F) \\<cdot>\n    \\<delta> \\<circ>\\<^sub>s \\<I> \\<Longrightarrow>\n    list_ex\n     (\\<lambda>f.\n         fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n         snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n     F", "qed (fastforce simp add: Bex_set)"], ["proof (state)\nthis:\n  list_ex\n   (\\<lambda>f.\n       fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n       snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n   F =\n  (Fun f (Fun c [] # map fst F) \\<cdot>\n   \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n   Fun f (Fun c [] # map snd F) \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "}"], ["proof (state)\nthis:\n  \\<lbrakk>subst_domain ?\\<delta>9 = set X;\n   ground (subst_range ?\\<delta>9)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<delta>9 \\<circ>\\<^sub>s \\<I> \\<noteq>\n                         snd f \\<cdot> ?\\<delta>9 \\<circ>\\<^sub>s \\<I>)\n                     F =\n                    (Fun f (Fun c [] # map fst F) \\<cdot>\n                     ?\\<delta>9 \\<circ>\\<^sub>s \\<I> \\<noteq>\n                     Fun f (Fun c [] # map snd F) \\<cdot>\n                     ?\\<delta>9 \\<circ>\\<^sub>s \\<I>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<delta>9 = set X;\n   ground (subst_range ?\\<delta>9)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<delta>9 \\<circ>\\<^sub>s \\<I> \\<noteq>\n                         snd f \\<cdot> ?\\<delta>9 \\<circ>\\<^sub>s \\<I>)\n                     F =\n                    (Fun f (Fun c [] # map fst F) \\<cdot>\n                     ?\\<delta>9 \\<circ>\\<^sub>s \\<I> \\<noteq>\n                     Fun f (Fun c [] # map snd F) \\<cdot>\n                     ?\\<delta>9 \\<circ>\\<^sub>s \\<I>)\n\ngoal (1 subgoal):\n 1. ineq_model \\<I> X F =\n    ineq_model \\<I> X\n     [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]", "unfolding ineq_model_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>subst_domain ?\\<delta>9 = set X;\n   ground (subst_range ?\\<delta>9)\\<rbrakk>\n  \\<Longrightarrow> list_ex\n                     (\\<lambda>f.\n                         fst f \\<cdot>\n                         ?\\<delta>9 \\<circ>\\<^sub>s \\<I> \\<noteq>\n                         snd f \\<cdot> ?\\<delta>9 \\<circ>\\<^sub>s \\<I>)\n                     F =\n                    (Fun f (Fun c [] # map fst F) \\<cdot>\n                     ?\\<delta>9 \\<circ>\\<^sub>s \\<I> \\<noteq>\n                     Fun f (Fun c [] # map snd F) \\<cdot>\n                     ?\\<delta>9 \\<circ>\\<^sub>s \\<I>)\n\ngoal (1 subgoal):\n 1. (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        list_ex\n         (\\<lambda>f.\n             fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n             snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n         F) =\n    (\\<forall>\\<delta>.\n        subst_domain \\<delta> = set X \\<and>\n        ground (subst_range \\<delta>) \\<longrightarrow>\n        list_ex\n         (\\<lambda>f.\n             fst f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I> \\<noteq>\n             snd f \\<cdot> \\<delta> \\<circ>\\<^sub>s \\<I>)\n         [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))])", "by auto"], ["proof (state)\nthis:\n  ineq_model \\<I> X F =\n  ineq_model \\<I> X\n   [(Fun f (Fun c [] # map fst F), Fun f (Fun c [] # map snd F))]\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Constraint Semantics (Alternative, Equivalent Version)\\<close>"], ["", "text \\<open>These are the constraint semantics used in the CSF 2017 paper\\<close>"], ["", "fun strand_sem_c'::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) strand \\<Rightarrow> ('fun,'var) subst \\<Rightarrow> bool\"  (\"\\<lbrakk>_; _\\<rbrakk>\\<^sub>c''\") \n  where\n  \"\\<lbrakk>M; []\\<rbrakk>\\<^sub>c' = (\\<lambda>\\<I>. True)\"\n| \"\\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>c' = (\\<lambda>\\<I>. M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile>\\<^sub>c t \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<I>)\"\n| \"\\<lbrakk>M; Receive t#S\\<rbrakk>\\<^sub>c' = \\<lbrakk>insert t M; S\\<rbrakk>\\<^sub>c'\"\n| \"\\<lbrakk>M; Equality _ t t'#S\\<rbrakk>\\<^sub>c' = (\\<lambda>\\<I>. t \\<cdot> \\<I> = t' \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<I>)\"\n| \"\\<lbrakk>M; Inequality X F#S\\<rbrakk>\\<^sub>c' = (\\<lambda>\\<I>. ineq_model \\<I> X F \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<I>)\""], ["", "fun strand_sem_d'::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) strand \\<Rightarrow> ('fun,'var) subst \\<Rightarrow> bool\" (\"\\<lbrakk>_; _\\<rbrakk>\\<^sub>d''\")\nwhere\n  \"\\<lbrakk>M; []\\<rbrakk>\\<^sub>d' = (\\<lambda>\\<I>. True)\"\n| \"\\<lbrakk>M; Send t#S\\<rbrakk>\\<^sub>d' = (\\<lambda>\\<I>. M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I> \\<turnstile> t \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<I>)\"\n| \"\\<lbrakk>M; Receive t#S\\<rbrakk>\\<^sub>d' = \\<lbrakk>insert t M; S\\<rbrakk>\\<^sub>d'\"\n| \"\\<lbrakk>M; Equality _ t t'#S\\<rbrakk>\\<^sub>d' = (\\<lambda>\\<I>. t \\<cdot> \\<I> = t' \\<cdot> \\<I> \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<I>)\"\n| \"\\<lbrakk>M; Inequality X F#S\\<rbrakk>\\<^sub>d' = (\\<lambda>\\<I>. ineq_model \\<I> X F \\<and> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<I>)\""], ["", "lemma strand_sem_eq_defs:\n  \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> = \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c \\<I>\"\n  \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> = \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I>\n 2. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "have 1: \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> \\<Longrightarrow> \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> \\<Longrightarrow>\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I>", "by (induct \\<A> arbitrary: M rule: strand_sem_induct) force+"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> \\<Longrightarrow>\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n   \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I>\n 2. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "have 2: \"\\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c \\<I> \\<Longrightarrow> \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I> \\<Longrightarrow>\n    \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I>", "by (induct \\<A> arbitrary: M rule: strand_sem_c'.induct) auto"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n   \\<I> \\<Longrightarrow>\n  \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I>\n 2. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "have 3: \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> \\<Longrightarrow> \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> \\<Longrightarrow>\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "by (induct \\<A> arbitrary: M rule: strand_sem_induct) force+"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> \\<Longrightarrow>\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n   \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I>\n 2. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "have 4: \"\\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d \\<I> \\<Longrightarrow> \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I> \\<Longrightarrow>\n    \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I>", "by (induct \\<A> arbitrary: M rule: strand_sem_d'.induct) auto"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n   \\<I> \\<Longrightarrow>\n  \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I>\n 2. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "show \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> = \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c \\<I>\" \"\\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> = \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d \\<I>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n     \\<I> &&&\n    \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n    \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n     \\<I>", "by (metis 1 2, metis 3 4)"], ["proof (state)\nthis:\n  \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>c' \\<I> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>c\n   \\<I>\n  \\<lbrakk>M; \\<A>\\<rbrakk>\\<^sub>d' \\<I> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<I>; \\<A>\\<rbrakk>\\<^sub>d\n   \\<I>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma strand_sem_split'[dest]:\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta>\" \n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c' \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta>\"\n  \"\\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d' \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow>\n      \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta>) &&&\n     (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow>\n      \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c'\n       \\<theta>)) &&&\n    (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta>) &&&\n    (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d'\n      \\<theta>)", "using strand_sem_eq_defs[of M \"S@S'\" \\<theta>]\n      strand_sem_eq_defs[of M S \\<theta>]\n      strand_sem_eq_defs[of \"M \\<union> ik\\<^sub>s\\<^sub>t S\" S' \\<theta>]\n      strand_sem_split(2,4)"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S @ S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S @ S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>; S\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>; S\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c' \\<theta> =\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d' \\<theta> =\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>?M; ?S @ ?S'\\<rbrakk>\\<^sub>c ?\\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M \\<union>\n           (ik\\<^sub>s\\<^sub>t ?S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            ?\\<theta>); ?S'\\<rbrakk>\\<^sub>c\n   ?\\<theta>\n  \\<lbrakk>?M; ?S @ ?S'\\<rbrakk>\\<^sub>d ?\\<theta> \\<Longrightarrow>\n  \\<lbrakk>?M \\<union>\n           (ik\\<^sub>s\\<^sub>t ?S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n            ?\\<theta>); ?S'\\<rbrakk>\\<^sub>d\n   ?\\<theta>\n\ngoal (1 subgoal):\n 1. ((\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow>\n      \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta>) &&&\n     (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow>\n      \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c'\n       \\<theta>)) &&&\n    (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta>) &&&\n    (\\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow>\n     \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d'\n      \\<theta>)", "by (auto simp add: image_Un)"], ["", "lemma strand_sem_append'[intro]:\n  \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>c' \\<theta>\"\n  \"\\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d' \\<theta> \\<Longrightarrow> \\<lbrakk>M; S@S'\\<rbrakk>\\<^sub>d' \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta>;\n      \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c'\n       \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta>) &&&\n    (\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta>;\n      \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d'\n       \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta>)", "using strand_sem_eq_defs[of M \"S@S'\" \\<theta>]\n      strand_sem_eq_defs[of M S \\<theta>]\n      strand_sem_eq_defs[of \"M \\<union> ik\\<^sub>s\\<^sub>t S\" S' \\<theta>]"], ["proof (prove)\nusing this:\n  \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S @ S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S @ S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>; S\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta> =\n  \\<lbrakk>M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<theta>; S\\<rbrakk>\\<^sub>d\n   \\<theta>\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c' \\<theta> =\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S'\\<rbrakk>\\<^sub>c\n   \\<theta>\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d' \\<theta> =\n  \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t\n           \\<theta>; S'\\<rbrakk>\\<^sub>d\n   \\<theta>\n\ngoal (1 subgoal):\n 1. (\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>c' \\<theta>;\n      \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>c'\n       \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>c' \\<theta>) &&&\n    (\\<lbrakk>\\<lbrakk>M; S\\<rbrakk>\\<^sub>d' \\<theta>;\n      \\<lbrakk>M \\<union> ik\\<^sub>s\\<^sub>t S; S'\\<rbrakk>\\<^sub>d'\n       \\<theta>\\<rbrakk>\n     \\<Longrightarrow> \\<lbrakk>M; S @ S'\\<rbrakk>\\<^sub>d' \\<theta>)", "by (auto simp add: image_Un)"], ["", "end"], ["", "subsection \\<open>Dual Strands\\<close>"], ["", "fun dual\\<^sub>s\\<^sub>t::\"('a,'b) strand \\<Rightarrow> ('a,'b) strand\" where\n  \"dual\\<^sub>s\\<^sub>t [] = []\"\n| \"dual\\<^sub>s\\<^sub>t (Receive t#S) = Send t#(dual\\<^sub>s\\<^sub>t S)\"\n| \"dual\\<^sub>s\\<^sub>t (Send t#S) = Receive t#(dual\\<^sub>s\\<^sub>t S)\"\n| \"dual\\<^sub>s\\<^sub>t (x#S) = x#(dual\\<^sub>s\\<^sub>t S)\""], ["", "lemma dual\\<^sub>s\\<^sub>t_append: \"dual\\<^sub>s\\<^sub>t (A@B) = (dual\\<^sub>s\\<^sub>t A)@(dual\\<^sub>s\\<^sub>t B)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dual\\<^sub>s\\<^sub>t (A @ B) =\n    dual\\<^sub>s\\<^sub>t A @ dual\\<^sub>s\\<^sub>t B", "by (induct A rule: dual\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma dual\\<^sub>s\\<^sub>t_self_inverse: \"dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t []) = []\n 2. \\<And>a S.\n       dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S \\<Longrightarrow>\n       dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (a # S)) = a # S", "case (Cons x S)"], ["proof (state)\nthis:\n  dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S\n\ngoal (2 subgoals):\n 1. dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t []) = []\n 2. \\<And>a S.\n       dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S \\<Longrightarrow>\n       dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (a # S)) = a # S", "thus ?case"], ["proof (prove)\nusing this:\n  dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = S\n\ngoal (1 subgoal):\n 1. dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (x # S)) = x # S", "by (cases x) auto"], ["proof (state)\nthis:\n  dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (x # S)) = x # S\n\ngoal (1 subgoal):\n 1. dual\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t []) = []", "qed simp"], ["", "lemma dual\\<^sub>s\\<^sub>t_trms_eq: \"trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = trms\\<^sub>s\\<^sub>t S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = trms\\<^sub>s\\<^sub>t S", "proof (induction S)"], ["proof (state)\ngoal (2 subgoals):\n 1. trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t []) = trms\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) =\n       trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (a # S)) =\n       trms\\<^sub>s\\<^sub>t (a # S)", "case (Cons x S)"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = trms\\<^sub>s\\<^sub>t S\n\ngoal (2 subgoals):\n 1. trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t []) = trms\\<^sub>s\\<^sub>t []\n 2. \\<And>a S.\n       trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) =\n       trms\\<^sub>s\\<^sub>t S \\<Longrightarrow>\n       trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (a # S)) =\n       trms\\<^sub>s\\<^sub>t (a # S)", "thus ?case"], ["proof (prove)\nusing this:\n  trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t S) = trms\\<^sub>s\\<^sub>t S\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (x # S)) =\n    trms\\<^sub>s\\<^sub>t (x # S)", "by (cases x) auto"], ["proof (state)\nthis:\n  trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t (x # S)) =\n  trms\\<^sub>s\\<^sub>t (x # S)\n\ngoal (1 subgoal):\n 1. trms\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t []) = trms\\<^sub>s\\<^sub>t []", "qed simp"], ["", "lemma dual\\<^sub>s\\<^sub>t_fv: \"fv\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t A) = fv\\<^sub>s\\<^sub>t A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t A) = fv\\<^sub>s\\<^sub>t A", "by (induct A rule: dual\\<^sub>s\\<^sub>t.induct) auto"], ["", "lemma dual\\<^sub>s\\<^sub>t_bvars: \"bvars\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t A) = bvars\\<^sub>s\\<^sub>t A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bvars\\<^sub>s\\<^sub>t (dual\\<^sub>s\\<^sub>t A) = bvars\\<^sub>s\\<^sub>t A", "by (induct A rule: dual\\<^sub>s\\<^sub>t.induct) fastforce+"], ["", "end"]]}