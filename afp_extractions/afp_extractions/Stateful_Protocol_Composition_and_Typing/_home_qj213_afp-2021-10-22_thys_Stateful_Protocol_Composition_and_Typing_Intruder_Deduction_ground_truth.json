{"file_name": "/home/qj213/afp-2021-10-22/thys/Stateful_Protocol_Composition_and_Typing/Intruder_Deduction.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Stateful_Protocol_Composition_and_Typing", "problem_names": ["lemma Ana_subterm: assumes \"Ana t = (K,T)\" shows \"set T \\<subset> subterms t\"", "lemma Ana_subterm': \"s \\<in> set (snd (Ana t)) \\<Longrightarrow> s \\<sqsubseteq> t\"", "lemma Ana_vars: assumes \"Ana t = (K,M)\" shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (set K) \\<subseteq> fv t\" \"fv\\<^sub>s\\<^sub>e\\<^sub>t (set M) \\<subseteq> fv t\"", "lemma disjoint_fun_syms: \"\\<Sigma>\\<^sub>f \\<inter> \\<C> = {}\"", "lemma id_union_univ: \"\\<Sigma>\\<^sub>f \\<union> \\<C> = UNIV\" \"\\<Sigma> = UNIV\"", "lemma const_arity_eq_zero[dest]: \"c \\<in> \\<C> \\<Longrightarrow> arity c = 0\"", "lemma const_pub_arity_eq_zero[dest]: \"c \\<in> \\<C>\\<^sub>p\\<^sub>u\\<^sub>b \\<Longrightarrow> arity c = 0 \\<and> public c\"", "lemma const_priv_arity_eq_zero[dest]: \"c \\<in> \\<C>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v \\<Longrightarrow> arity c = 0 \\<and> \\<not>public c\"", "lemma fun_arity_gt_zero[dest]: \"f \\<in> \\<Sigma>\\<^sub>f \\<Longrightarrow> arity f > 0\"", "lemma pub_fun_public[dest]: \"f \\<in> \\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b \\<Longrightarrow> public f\"", "lemma pub_fun_arity_gt_zero[dest]: \"f \\<in> \\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b \\<Longrightarrow> arity f > 0\"", "lemma \\<Sigma>\\<^sub>f_unfold: \"\\<Sigma>\\<^sub>f = {f::'fun. arity f > 0}\"", "lemma \\<C>_unfold: \"\\<C> = {f::'fun. arity f = 0}\"", "lemma \\<C>pub_unfold: \"\\<C>\\<^sub>p\\<^sub>u\\<^sub>b = {f::'fun. arity f = 0 \\<and> public f}\"", "lemma \\<C>priv_unfold: \"\\<C>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v = {f::'fun. arity f = 0 \\<and> \\<not>public f}\"", "lemma \\<Sigma>npub_unfold: \"(\\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b\\<^sup>n) = {f::'fun. arity f = n \\<and> public f}\"", "lemma \\<Sigma>npriv_unfold: \"(\\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v\\<^sup>n) = {f::'fun. arity f = n \\<and> \\<not>public f}\"", "lemma \\<Sigma>fpub_unfold: \"\\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b = {f::'fun. arity f > 0 \\<and> public f}\"", "lemma \\<Sigma>fpriv_unfold: \"\\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v = {f::'fun. arity f > 0 \\<and> \\<not>public f}\"", "lemma \\<Sigma>n_m_eq: \"\\<lbrakk>(\\<Sigma>\\<^sup>n) \\<noteq> {}; (\\<Sigma>\\<^sup>n) = (\\<Sigma>\\<^sup>m)\\<rbrakk> \\<Longrightarrow> n = m\"", "lemma Ana_keys_wf': \"Ana t = (K,T) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> k \\<in> set K \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m k\"", "lemma wf_trm_Var[simp]: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\"", "lemma wf_trm_subst_range_Var[simp]: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range Var)\"", "lemma wf_trm_subst_range_iff: \"(\\<forall>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)) \\<longleftrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\"", "lemma wf_trm_subst_rangeD: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)\"", "lemma wf_trm_subst_rangeI[intro]:\n  \"(\\<And>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> x)) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"", "lemma wf_trmI[intro]:\n  assumes \"\\<And>t. t \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"length T = arity f\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\"", "lemma wf_trm_subterm: \"\\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m t; s \\<sqsubset> t\\<rbrakk> \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s\"", "lemma wf_trm_subtermeq:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"s \\<sqsubseteq> t\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\"", "lemma wf_trm_param:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\" \"t \\<in> set T\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\"", "lemma wf_trm_param_idx:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\"\n    and \"i < length T\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (T ! i)\"", "lemma wf_trm_subst:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m t = wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\"", "lemma wf_trm_subst_singleton:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t'\" shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))\"", "lemma wf_trm_subst_rm_vars:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)\"", "lemma wf_trm_subst_rm_vars': \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> v) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (rm_vars X \\<delta> v)\"", "lemma wf_trms_subst:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\"", "lemma wf_trms_subst_rm_vars:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t rm_vars X \\<delta>)\"", "lemma wf_trms_subst_rm_vars':\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (rm_vars X \\<delta>))\"", "lemma wf_trms_subst_compose:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))\"", "lemma wf_trm_subst_compose:\n  fixes \\<delta>::\"('fun, 'v) subst\"\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)\" \"\\<And>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> x)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m ((\\<theta> \\<circ>\\<^sub>s \\<delta>) x)\"", "lemma wf_trms_Var_range:\n  assumes \"subst_range \\<delta> \\<subseteq> range Var\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"", "lemma wf_trms_subst_compose_Var_range:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\"\n    and \"subst_range \\<delta> \\<subseteq> range Var\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (\\<delta> \\<circ>\\<^sub>s \\<theta>))\"\n    and \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))\"", "lemma wf_trm_subst_inv: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\"", "lemma wf_trms_subst_inv: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M\"", "lemma wf_trm_subterms: \"wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms t)\"", "lemma wf_trms_subterms: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms\\<^sub>s\\<^sub>e\\<^sub>t M)\"", "lemma wf_trm_arity: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) \\<Longrightarrow> length T = arity f\"", "lemma wf_trm_subterm_arity: \"wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> Fun f T \\<sqsubseteq> t \\<Longrightarrow> length T = arity f\"", "lemma unify_list_wf_trm:\n  assumes \"Unification.unify E B = Some U\" \"\\<forall>(s,t) \\<in> set E. wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  and \"\\<forall>(v,t) \\<in> set B. wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  shows \"\\<forall>(v,t) \\<in> set U. wf\\<^sub>t\\<^sub>r\\<^sub>m t\"", "lemma mgu_wf_trm:\n  assumes \"mgu s t = Some \\<sigma>\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\"", "lemma mgu_wf_trms:\n  assumes \"mgu s t = Some \\<sigma>\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<sigma>)\"", "lemma intruder_deduct_induct[consumes 1, case_names Axiom Compose Decompose]:\n  assumes \"M \\<turnstile> t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M t\"\n          \"\\<And>T f. \\<lbrakk>length T = arity f; public f;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> P M t\\<rbrakk> \\<Longrightarrow> P M (Fun f T)\"\n          \"\\<And>t K T t\\<^sub>i. \\<lbrakk>M \\<turnstile> t; P M t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n                       \\<And>k. k \\<in> set K \\<Longrightarrow> P M k; t\\<^sub>i \\<in> set T\\<rbrakk> \\<Longrightarrow> P M t\\<^sub>i\"\n  shows \"P M t\"", "lemma intruder_synth_induct[consumes 1, case_names AxiomC ComposeC]:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M t\"\n          \"\\<And>T f. \\<lbrakk>length T = arity f; public f;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> P M t\\<rbrakk> \\<Longrightarrow> P M (Fun f T)\"\n  shows \"P M t\"", "lemma public_const_deduct:\n  assumes \"c \\<in> \\<C>\\<^sub>p\\<^sub>u\\<^sub>b\"\n  shows \"M \\<turnstile> Fun c []\" \"M \\<turnstile>\\<^sub>c Fun c []\"", "lemma public_const_deduct'[simp]:\n  assumes \"arity c = 0\" \"public c\"\n  shows \"M \\<turnstile> Fun c []\" \"M \\<turnstile>\\<^sub>c Fun c []\"", "lemma private_fun_deduct_in_ik:\n  assumes t: \"M \\<turnstile> t\" \"Fun f T \\<in> subterms t\"\n    and f: \"\\<not>public f\"\n  shows \"Fun f T \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M\"", "lemma private_fun_deduct_in_ik':\n  assumes t: \"M \\<turnstile> Fun f T\"\n    and f: \"\\<not>public f\"\n    and M: \"Fun f T \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M \\<Longrightarrow> Fun f T \\<in> M\"\n  shows \"Fun f T \\<in> M\"", "lemma pgwt_public: \"\\<lbrakk>public_ground_wf_term t; Fun f T \\<sqsubseteq> t\\<rbrakk> \\<Longrightarrow> public f\"", "lemma pgwt_ground: \"public_ground_wf_term t \\<Longrightarrow> fv t = {}\"", "lemma pgwt_fun: \"public_ground_wf_term t \\<Longrightarrow> \\<exists>f T. t = Fun f T\"", "lemma pgwt_arity: \"\\<lbrakk>public_ground_wf_term t; Fun f T \\<sqsubseteq> t\\<rbrakk> \\<Longrightarrow> arity f = length T\"", "lemma pgwt_wellformed: \"public_ground_wf_term t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\"", "lemma pgwt_deducible: \"public_ground_wf_term t \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\"", "lemma pgwt_is_empty_synth: \"public_ground_wf_term t \\<longleftrightarrow> {} \\<turnstile>\\<^sub>c t\"", "lemma ideduct_synth_subst_apply:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"{} \\<turnstile>\\<^sub>c t\" \"\\<And>v. M \\<turnstile>\\<^sub>c \\<theta> v\"\n  shows \"M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\"", "lemma ideduct_mono:\n  \"\\<lbrakk>M \\<turnstile> t; M \\<subseteq> M'\\<rbrakk> \\<Longrightarrow> M' \\<turnstile> t\"", "lemma ideduct_synth_mono:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  shows \"\\<lbrakk>M \\<turnstile>\\<^sub>c t; M \\<subseteq> M'\\<rbrakk> \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\"", "lemma ideduct_reduce:\n  \"\\<lbrakk>M \\<union> M' \\<turnstile> t; \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk> \\<Longrightarrow> M \\<turnstile> t\"", "lemma ideduct_synth_reduce:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  shows \"\\<lbrakk>M \\<union> M' \\<turnstile>\\<^sub>c t; \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile>\\<^sub>c t'\\<rbrakk> \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\"", "lemma ideduct_mono_eq:\n  assumes \"\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile> t\" shows \"M \\<union> N \\<turnstile> t \\<longleftrightarrow> M' \\<union> N \\<turnstile> t\"", "lemma deduct_synth_subterm:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\" \"s \\<in> subterms t\" \"\\<forall>m \\<in> M. \\<forall>s \\<in> subterms m. M \\<turnstile>\\<^sub>c s\"\n  shows \"M \\<turnstile>\\<^sub>c s\"", "lemma deduct_if_synth[intro, dest]: \"M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t\"", "lemma ideduct_ik_eq: assumes \"\\<forall>t \\<in> M. M' \\<turnstile> t\" shows \"M' \\<turnstile> t \\<longleftrightarrow> M' \\<union> M \\<turnstile> t\"", "lemma synth_if_deduct_empty: \"{} \\<turnstile> t \\<Longrightarrow> {} \\<turnstile>\\<^sub>c t\"", "lemma ideduct_deduct_synth_mono_eq:\n  assumes \"\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile>\\<^sub>c t\" \"M \\<subseteq> M'\"\n  and \"\\<forall>t. M' \\<union> N \\<turnstile> t \\<longleftrightarrow> M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t\"\n  shows \"M \\<union> N \\<turnstile> t \\<longleftrightarrow> M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t\"", "lemma ideduct_subst: \"M \\<turnstile> t \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> t \\<cdot> \\<delta>\"", "lemma ideduct_synth_subst:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\" and \\<delta>::\"('fun,'var) subst\"\n  shows \"M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c t \\<cdot> \\<delta>\"", "lemma ideduct_vars:\n  assumes \"M \\<turnstile> t\"\n  shows \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\"", "lemma ideduct_synth_vars:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\"\n  shows \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\"", "lemma ideduct_synth_priv_fun_in_ik:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\" \"f \\<in> funs_term t\" \"\\<not>public f\"\n  shows \"f \\<in> \\<Union>(funs_term ` M)\"", "lemma ideduct_synth_priv_const_in_ik:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c Fun c []\" \"\\<not>public c\"\n  shows \"Fun c [] \\<in> M\"", "lemma ideduct_synth_ik_replace:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"\\<forall>t \\<in> M. N \\<turnstile>\\<^sub>c t\"\n    and \"M \\<turnstile>\\<^sub>c t\"\n  shows \"N \\<turnstile>\\<^sub>c t\"", "lemma deducts_eq_if_analyzed: \"analyzed M \\<Longrightarrow> M \\<turnstile> t \\<longleftrightarrow> M \\<turnstile>\\<^sub>c t\"", "lemma closure_is_superset: \"decomp_closure M M' \\<Longrightarrow> M \\<subseteq> M'\"", "lemma deduct_if_closure_deduct: \"\\<lbrakk>M' \\<turnstile> t; decomp_closure M M'\\<rbrakk> \\<Longrightarrow> M \\<turnstile> t\"", "lemma deduct_if_closure_synth: \"\\<lbrakk>decomp_closure M M'; M' \\<turnstile>\\<^sub>c t\\<rbrakk> \\<Longrightarrow> M \\<turnstile> t\"", "lemma decomp_closure_subterms_composable:\n  assumes \"decomp_closure M M'\"\n  and \"M' \\<turnstile>\\<^sub>c t'\" \"M' \\<turnstile> t\" \"t \\<sqsubseteq> t'\"\n  shows \"M' \\<turnstile>\\<^sub>c t\"", "lemma decomp_closure_analyzed:\n  assumes \"decomp_closure M M'\"\n  shows \"analyzed M'\"", "lemma analyzed_if_all_analyzed_in:\n  assumes M: \"\\<forall>t \\<in> M. analyzed_in t M\"\n  shows \"analyzed M\"", "lemma analyzed_is_all_analyzed_in:\n  \"(\\<forall>t \\<in> M. analyzed_in t M) \\<longleftrightarrow> analyzed M\"", "lemma ik_has_synth_ik_closure:\n  fixes M :: \"('fun,'var) terms\"\n  shows \"\\<exists>M'. (\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile>\\<^sub>c t) \\<and> decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')\"", "lemma intruder_deduct_restricted_induct[consumes 1, case_names AxiomR ComposeR DecomposeR]:\n  assumes \"\\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M Q t\"\n          \"\\<And>T f. \\<lbrakk>length T = arity f; public f;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> P M Q t; Q (Fun f T)\n                  \\<rbrakk> \\<Longrightarrow> P M Q (Fun f T)\"\n          \"\\<And>t K T t\\<^sub>i. \\<lbrakk>\\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t; P M Q t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r k;\n                       \\<And>k. k \\<in> set K \\<Longrightarrow> P M Q k; t\\<^sub>i \\<in> set T\\<rbrakk> \\<Longrightarrow> P M Q t\\<^sub>i\"\n  shows \"P M Q t\"", "lemma intruder_deduct_num_induct[consumes 1, case_names AxiomN ComposeN DecomposeN]:\n  assumes \"\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M 0 t\"\n          \"\\<And>T f steps.\n              \\<lbrakk>length T = arity f; public f;\n               \\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n               \\<And>t. t \\<in> set T \\<Longrightarrow> P M (steps t) t\\<rbrakk>\n              \\<Longrightarrow> P M (Suc (Max (insert 0 (steps ` set T)))) (Fun f T)\"\n          \"\\<And>t K T t\\<^sub>i steps n.\n              \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; P M n t; Ana t = (K, T);\n               \\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n               t\\<^sub>i \\<in> set T; \\<And>k. k \\<in> set K \\<Longrightarrow> P M (steps k) k\\<rbrakk>\n              \\<Longrightarrow> P M (Suc (Max (insert n (steps ` set K)))) t\\<^sub>i\"\n  shows \"P M n t\"", "lemma ideduct_restricted_mono:\n  \"\\<lbrakk>\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r t; M \\<subseteq> M'\\<rbrakk> \\<Longrightarrow> \\<langle>M'; P\\<rangle> \\<turnstile>\\<^sub>r t\"", "lemma deduct_if_restricted_deduct: \"\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m \\<Longrightarrow> M \\<turnstile> m\"", "lemma restricted_deduct_if_restricted_ik:\n  assumes \"\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\" \"\\<forall>m \\<in> M. P m\"\n  and P: \"\\<forall>t t'. P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\"\n  shows \"P m\"", "lemma deduct_restricted_if_synth:\n  assumes P: \"P m\" \"\\<forall>t t'. P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\"\n  and m: \"M \\<turnstile>\\<^sub>c m\"\n  shows \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r m\"", "lemma deduct_zero_in_ik:\n  assumes \"\\<langle>M; 0\\<rangle> \\<turnstile>\\<^sub>n t\" shows \"t \\<in> M\"", "lemma deduct_if_deduct_num: \"\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow> M \\<turnstile> t\"", "lemma deduct_num_if_deduct: \"M \\<turnstile> t \\<Longrightarrow> \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\"", "lemma deduct_normalize:\n  assumes M: \"\\<forall>m \\<in> M. \\<forall>f T. Fun f T \\<sqsubseteq> m \\<longrightarrow> P f T\"\n  and t: \"\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\" \"Fun f T \\<sqsubseteq> t\" \"\\<not>P f T\"\n  shows \"\\<exists>l \\<le> k. (\\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T) \\<and> (\\<forall>t \\<in> set T. \\<exists>j < l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\"", "lemma deduct_inv:\n  assumes \"\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\"\n  shows \"t \\<in> M \\<or>\n         (\\<exists>f T. t = Fun f T \\<and> public f \\<and> length T = arity f \\<and> (\\<forall>t \\<in> set T. \\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n         (\\<exists>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and> (\\<forall>k \\<in> set (fst (Ana m)). \\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)))\"\n    (is \"?P t n \\<or> ?Q t n \\<or> ?R t n\")", "lemma restricted_deduct_if_deduct:\n  assumes M: \"\\<forall>m \\<in> M. \\<forall>f T. Fun f T \\<sqsubseteq> m \\<longrightarrow> P (Fun f T)\"\n  and P_subterm: \"\\<forall>f T t. M \\<turnstile> Fun f T \\<longrightarrow> P (Fun f T) \\<longrightarrow> t \\<in> set T \\<longrightarrow> P t\"\n  and P_Ana_key: \"\\<forall>t K T k. M \\<turnstile> t \\<longrightarrow> P t \\<longrightarrow> Ana t = (K, T) \\<longrightarrow> M \\<turnstile> k \\<longrightarrow> k \\<in> set K \\<longrightarrow> P k\"\n  and m: \"M \\<turnstile> m\" \"P m\"\n  shows \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r m\"", "lemma restricted_deduct_if_deduct':\n  assumes \"\\<forall>m \\<in> M. P m\"\n    and \"\\<forall>t t'. P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\"\n    and \"\\<forall>t K T k. P t \\<longrightarrow> Ana t = (K, T) \\<longrightarrow> k \\<in> set K \\<longrightarrow> P k\"\n    and \"M \\<turnstile> m\" \"P m\"\n  shows \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r m\"", "lemma private_const_deduct:\n  assumes c: \"\\<not>public c\" \"M \\<turnstile> (Fun c []::('fun,'var) term)\"\n  shows \"Fun c [] \\<in> M \\<or>\n         (\\<exists>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M. M \\<turnstile> m \\<and> (\\<forall>k \\<in> set (fst (Ana m)). M \\<turnstile> m) \\<and>\n                             Fun c [] \\<in> set (snd (Ana m)))\"", "lemma private_fun_deduct_in_ik'':\n  assumes t: \"M \\<turnstile> Fun f T\" \"Fun c [] \\<in> set T\" \"\\<forall>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M. Fun f T \\<notin> set (snd (Ana m))\"\n    and c: \"\\<not>public c\" \"Fun c [] \\<notin> M\" \"\\<forall>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M. Fun c [] \\<notin> set (snd (Ana m))\"\n  shows \"Fun f T \\<in> M\"", "lemma (in intruder_model) intruder_synth'_induct[consumes 1, case_names Var Fun]:\n  assumes \"intruder_synth' public arity M t\"\n          \"\\<And>x. intruder_synth' public arity M (Var x) \\<Longrightarrow> P (Var x)\"\n          \"\\<And>f T. (\\<And>z. z \\<in> set T \\<Longrightarrow> intruder_synth' public arity M z \\<Longrightarrow> P z) \\<Longrightarrow>\n                  intruder_synth' public arity M (Fun f T) \\<Longrightarrow> P (Fun f T) \"\n  shows \"P t\"", "lemma (in intruder_model) wf\\<^sub>t\\<^sub>r\\<^sub>m_code[code_unfold]:\n  \"wf\\<^sub>t\\<^sub>r\\<^sub>m t = wf\\<^sub>t\\<^sub>r\\<^sub>m' arity t\"", "lemma (in intruder_model) wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s_code[code_unfold]:\n  \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M = wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s' arity M\"", "lemma (in intruder_model) intruder_synth_code[code_unfold]:\n  \"intruder_synth M t = intruder_synth' public arity M t\"\n  (is \"?A \\<longleftrightarrow> ?B\")", "lemma (in intruder_model) analyzed_in_code[code_unfold]:\n  \"analyzed_in t M = analyzed_in' Ana public arity t M\""], "translations": [["", "lemma Ana_subterm: assumes \"Ana t = (K,T)\" shows \"set T \\<subset> subterms t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set T \\<subset> subterms t", "using assms"], ["proof (prove)\nusing this:\n  Ana t = (K, T)\n\ngoal (1 subgoal):\n 1. set T \\<subset> subterms t", "by (cases t)\n   (simp add: psubsetI,\n    metis Ana_fun_subterm Fun_gt_params UN_I term.order_refl\n          params_subterms psubsetI subset_antisym subset_trans)"], ["", "lemma Ana_subterm': \"s \\<in> set (snd (Ana t)) \\<Longrightarrow> s \\<sqsubseteq> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<in> set (snd (Ana t)) \\<Longrightarrow> s \\<sqsubseteq> t", "using Ana_subterm"], ["proof (prove)\nusing this:\n  Ana ?t = (?K, ?T) \\<Longrightarrow> set ?T \\<subset> subterms ?t\n\ngoal (1 subgoal):\n 1. s \\<in> set (snd (Ana t)) \\<Longrightarrow> s \\<sqsubseteq> t", "by (cases \"Ana t\") auto"], ["", "lemma Ana_vars: assumes \"Ana t = (K,M)\" shows \"fv\\<^sub>s\\<^sub>e\\<^sub>t (set K) \\<subseteq> fv t\" \"fv\\<^sub>s\\<^sub>e\\<^sub>t (set M) \\<subseteq> fv t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv\\<^sub>s\\<^sub>e\\<^sub>t (set K) \\<subseteq> fv t &&&\n    fv\\<^sub>s\\<^sub>e\\<^sub>t (set M) \\<subseteq> fv t", "by (rule Ana_keys_fv[OF assms]) (use Ana_subterm[OF assms] subtermeq_vars_subset in auto)"], ["", "abbreviation \\<V> where \"\\<V> \\<equiv> UNIV::'var set\""], ["", "abbreviation \\<Sigma>n (\"\\<Sigma>\\<^sup>_\") where \"\\<Sigma>\\<^sup>n \\<equiv> {f::'fun. arity f = n}\""], ["", "abbreviation \\<Sigma>npub (\"\\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b\\<^sup>_\") where \"\\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b\\<^sup>n \\<equiv> {f. public f} \\<inter> \\<Sigma>\\<^sup>n\""], ["", "abbreviation \\<Sigma>npriv (\"\\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v\\<^sup>_\") where \"\\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v\\<^sup>n \\<equiv> {f. \\<not>public f} \\<inter> \\<Sigma>\\<^sup>n\""], ["", "abbreviation \\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b where \"\\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b \\<equiv> (\\<Union>n. \\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b\\<^sup>n)\""], ["", "abbreviation \\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v where \"\\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v \\<equiv> (\\<Union>n. \\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v\\<^sup>n)\""], ["", "abbreviation \\<Sigma> where \"\\<Sigma> \\<equiv> (\\<Union>n. \\<Sigma>\\<^sup>n)\""], ["", "abbreviation \\<C> where \"\\<C> \\<equiv> \\<Sigma>\\<^sup>0\""], ["", "abbreviation \\<C>\\<^sub>p\\<^sub>u\\<^sub>b where \"\\<C>\\<^sub>p\\<^sub>u\\<^sub>b \\<equiv> {f. public f} \\<inter> \\<C>\""], ["", "abbreviation \\<C>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v where \"\\<C>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v \\<equiv> {f. \\<not>public f} \\<inter> \\<C>\""], ["", "abbreviation \\<Sigma>\\<^sub>f where \"\\<Sigma>\\<^sub>f \\<equiv> \\<Sigma> - \\<C>\""], ["", "abbreviation \\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b where \"\\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b \\<equiv> \\<Sigma>\\<^sub>f \\<inter> \\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b\""], ["", "abbreviation \\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v where \"\\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v \\<equiv> \\<Sigma>\\<^sub>f \\<inter> \\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v\""], ["", "lemma disjoint_fun_syms: \"\\<Sigma>\\<^sub>f \\<inter> \\<C> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union> (range \\<Sigma>n) - \\<C>) \\<inter> \\<C> = {}", "by auto"], ["", "lemma id_union_univ: \"\\<Sigma>\\<^sub>f \\<union> \\<C> = UNIV\" \"\\<Sigma> = UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (range \\<Sigma>n) - \\<C> \\<union> \\<C> = UNIV &&&\n    \\<Union> (range \\<Sigma>n) = UNIV", "by auto"], ["", "lemma const_arity_eq_zero[dest]: \"c \\<in> \\<C> \\<Longrightarrow> arity c = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<in> \\<C> \\<Longrightarrow> arity c = 0", "by simp"], ["", "lemma const_pub_arity_eq_zero[dest]: \"c \\<in> \\<C>\\<^sub>p\\<^sub>u\\<^sub>b \\<Longrightarrow> arity c = 0 \\<and> public c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<in> {f. public f} \\<inter> \\<C> \\<Longrightarrow>\n    arity c = 0 \\<and> public c", "by simp"], ["", "lemma const_priv_arity_eq_zero[dest]: \"c \\<in> \\<C>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v \\<Longrightarrow> arity c = 0 \\<and> \\<not>public c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<in> {f. \\<not> public f} \\<inter> \\<C> \\<Longrightarrow>\n    arity c = 0 \\<and> \\<not> public c", "by simp"], ["", "lemma fun_arity_gt_zero[dest]: \"f \\<in> \\<Sigma>\\<^sub>f \\<Longrightarrow> arity f > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> \\<Union> (range \\<Sigma>n) - \\<C> \\<Longrightarrow> 0 < arity f", "by fastforce"], ["", "lemma pub_fun_public[dest]: \"f \\<in> \\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b \\<Longrightarrow> public f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> (\\<Union> (range \\<Sigma>n) - \\<C>) \\<inter>\n            (\\<Union>n.\n                {f. public f} \\<inter> \\<Sigma>\\<^sup>n) \\<Longrightarrow>\n    public f", "by fastforce"], ["", "lemma pub_fun_arity_gt_zero[dest]: \"f \\<in> \\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b \\<Longrightarrow> arity f > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> (\\<Union> (range \\<Sigma>n) - \\<C>) \\<inter>\n            (\\<Union>n.\n                {f. public f} \\<inter> \\<Sigma>\\<^sup>n) \\<Longrightarrow>\n    0 < arity f", "by fastforce"], ["", "lemma \\<Sigma>\\<^sub>f_unfold: \"\\<Sigma>\\<^sub>f = {f::'fun. arity f > 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (range \\<Sigma>n) - \\<C> = {f. 0 < arity f}", "by auto"], ["", "lemma \\<C>_unfold: \"\\<C> = {f::'fun. arity f = 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<C> = \\<C>", "by auto"], ["", "lemma \\<C>pub_unfold: \"\\<C>\\<^sub>p\\<^sub>u\\<^sub>b = {f::'fun. arity f = 0 \\<and> public f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f. public f} \\<inter> \\<C> = {f. arity f = 0 \\<and> public f}", "by auto"], ["", "lemma \\<C>priv_unfold: \"\\<C>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v = {f::'fun. arity f = 0 \\<and> \\<not>public f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f. \\<not> public f} \\<inter> \\<C> =\n    {f. arity f = 0 \\<and> \\<not> public f}", "by auto"], ["", "lemma \\<Sigma>npub_unfold: \"(\\<Sigma>\\<^sub>p\\<^sub>u\\<^sub>b\\<^sup>n) = {f::'fun. arity f = n \\<and> public f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f. public f} \\<inter> \\<Sigma>\\<^sup>n =\n    {f. arity f = n \\<and> public f}", "by auto"], ["", "lemma \\<Sigma>npriv_unfold: \"(\\<Sigma>\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v\\<^sup>n) = {f::'fun. arity f = n \\<and> \\<not>public f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f. \\<not> public f} \\<inter> \\<Sigma>\\<^sup>n =\n    {f. arity f = n \\<and> \\<not> public f}", "by auto"], ["", "lemma \\<Sigma>fpub_unfold: \"\\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>u\\<^sub>b = {f::'fun. arity f > 0 \\<and> public f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union> (range \\<Sigma>n) - \\<C>) \\<inter>\n    (\\<Union>n. {f. public f} \\<inter> \\<Sigma>\\<^sup>n) =\n    {f. 0 < arity f \\<and> public f}", "by auto"], ["", "lemma \\<Sigma>fpriv_unfold: \"\\<Sigma>\\<^sub>f\\<^sub>p\\<^sub>r\\<^sub>i\\<^sub>v = {f::'fun. arity f > 0 \\<and> \\<not>public f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Union> (range \\<Sigma>n) - \\<C>) \\<inter>\n    (\\<Union>n. {f. \\<not> public f} \\<inter> \\<Sigma>\\<^sup>n) =\n    {f. 0 < arity f \\<and> \\<not> public f}", "by auto"], ["", "lemma \\<Sigma>n_m_eq: \"\\<lbrakk>(\\<Sigma>\\<^sup>n) \\<noteq> {}; (\\<Sigma>\\<^sup>n) = (\\<Sigma>\\<^sup>m)\\<rbrakk> \\<Longrightarrow> n = m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<Sigma>\\<^sup>n \\<noteq> {};\n     \\<Sigma>\\<^sup>n = \\<Sigma>\\<^sup>m\\<rbrakk>\n    \\<Longrightarrow> n = m", "by auto"], ["", "subsection \\<open>Term Well-formedness\\<close>"], ["", "definition \"wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<equiv> \\<forall>f T. Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f\""], ["", "abbreviation \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s T \\<equiv> \\<forall>t \\<in> T. wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["", "lemma Ana_keys_wf': \"Ana t = (K,T) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> k \\<in> set K \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Ana t = (K, T); wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n     k \\<in> set K\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m k", "using Ana_keys_wf"], ["proof (prove)\nusing this:\n  \\<lbrakk>Ana ?t = (?K, ?R);\n   \\<And>g S. Fun g S \\<sqsubseteq> ?t \\<Longrightarrow> length S = arity g;\n   ?k \\<in> set ?K; Fun ?f ?T \\<sqsubseteq> ?k\\<rbrakk>\n  \\<Longrightarrow> length ?T = arity ?f\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Ana t = (K, T); wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n     k \\<in> set K\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m k", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>Ana ?t = (?K, ?R);\n   \\<And>g S. Fun g S \\<sqsubseteq> ?t \\<Longrightarrow> length S = arity g;\n   ?k \\<in> set ?K; Fun ?f ?T \\<sqsubseteq> ?k\\<rbrakk>\n  \\<Longrightarrow> length ?T = arity ?f\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Ana t = (K, T);\n     \\<forall>f T.\n        Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f;\n     k \\<in> set K\\<rbrakk>\n    \\<Longrightarrow> \\<forall>f T.\n                         Fun f T \\<sqsubseteq> k \\<longrightarrow>\n                         length T = arity f", "by metis"], ["", "lemma wf_trm_Var[simp]: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f T.\n       Fun f T \\<sqsubseteq> Var x \\<longrightarrow> length T = arity f", "by simp"], ["", "lemma wf_trm_subst_range_Var[simp]: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range Var)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range Var)", "by simp"], ["", "lemma wf_trm_subst_range_iff: \"(\\<forall>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)) \\<longleftrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)) =\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)", "by force"], ["", "lemma wf_trm_subst_rangeD: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range \\<theta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)", "by (metis wf_trm_subst_range_iff)"], ["", "lemma wf_trm_subst_rangeI[intro]:\n  \"(\\<And>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> x)) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> x)) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "by (metis wf_trm_subst_range_iff)"], ["", "lemma wf_trmI[intro]:\n  assumes \"\\<And>t. t \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"length T = arity f\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)", "using assms"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  length T = arity f\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<forall>f T.\n     Fun f T \\<sqsubseteq> ?t2 \\<longrightarrow> length T = arity f\n  length T = arity f\n\ngoal (1 subgoal):\n 1. \\<forall>fa Ta.\n       Fun fa Ta \\<sqsubseteq> Fun f T \\<longrightarrow>\n       length Ta = arity fa", "by auto"], ["", "lemma wf_trm_subterm: \"\\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m t; s \\<sqsubset> t\\<rbrakk> \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m t; s \\<sqsubset> t\\<rbrakk>\n    \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>f T.\n                Fun f T \\<sqsubseteq> t \\<longrightarrow>\n                length T = arity f;\n     s \\<sqsubset> t\\<rbrakk>\n    \\<Longrightarrow> \\<forall>f T.\n                         Fun f T \\<sqsubseteq> s \\<longrightarrow>\n                         length T = arity f", "by (induct t) auto"], ["", "lemma wf_trm_subtermeq:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"s \\<sqsubseteq> t\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m s", "proof (cases \"s = t\")"], ["proof (state)\ngoal (2 subgoals):\n 1. s = t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s\n 2. s \\<noteq> t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s", "case False"], ["proof (state)\nthis:\n  s \\<noteq> t\n\ngoal (2 subgoals):\n 1. s = t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s\n 2. s \\<noteq> t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s", "thus \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\""], ["proof (prove)\nusing this:\n  s \\<noteq> t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m s", "using assms(2) wf_trm_subterm[OF assms(1)]"], ["proof (prove)\nusing this:\n  s \\<noteq> t\n  s \\<sqsubseteq> t\n  ?s \\<sqsubset> t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?s\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m s", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m s\n\ngoal (1 subgoal):\n 1. s = t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m s", "qed (metis assms(1))"], ["", "lemma wf_trm_param:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\" \"t \\<in> set T\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by (meson assms subtermeqI'' wf_trm_subtermeq)"], ["", "lemma wf_trm_param_idx:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\"\n    and \"i < length T\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (T ! i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (T ! i)", "using wf_trm_param[OF assms(1), of \"T ! i\"] assms(2)"], ["proof (prove)\nusing this:\n  T ! i \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (T ! i)\n  i < length T\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (T ! i)", "by fastforce"], ["", "lemma wf_trm_subst:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m t = wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t =\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\n 2. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m t", "show \"wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)", "proof (induction t)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m x2a\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> \\<delta>)", "case (Fun f T)"], ["proof (state)\nthis:\n  \\<lbrakk>?x2a2 \\<in> set T; wf\\<^sub>t\\<^sub>r\\<^sub>m ?x2a2\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m x2a\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> \\<delta>)", "hence \"\\<And>t. t \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2a2 \\<in> set T; wf\\<^sub>t\\<^sub>r\\<^sub>m ?x2a2\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>t. t \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by (meson wf\\<^sub>t\\<^sub>r\\<^sub>m_def Fun_param_is_subterm term.order_trans)"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m x2a\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> \\<delta>)", "hence \"\\<And>t. t \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\""], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)", "using Fun.IH"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  \\<lbrakk>?x2a2 \\<in> set T; wf\\<^sub>t\\<^sub>r\\<^sub>m ?x2a2\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m x2a\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> \\<delta>)", "moreover"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m x2a\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> \\<delta>)", "have \"length (map (\\<lambda>t. t \\<cdot> \\<delta>) T) = arity f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "using Fun.prems"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  \\<forall>fa Ta.\n     Fun fa Ta \\<sqsubseteq> Fun f T \\<longrightarrow> length Ta = arity fa\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "by auto"], ["proof (state)\nthis:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m x2a\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "show ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)", "by fastforce"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>)", "qed (simp add: wf_trm_subst_rangeD[OF assms])"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m t", "show \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m t", "proof (induction t)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x2a;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)", "case (Fun f T)"], ["proof (state)\nthis:\n  \\<lbrakk>?x2a2 \\<in> set T;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?x2a2\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x2a;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" when \"t \\<in> set (map (\\<lambda>s. s \\<cdot> \\<delta>) T)\" for t"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2a2 \\<in> set T;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?x2a2\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by (metis that wf\\<^sub>t\\<^sub>r\\<^sub>m_def Fun_param_is_subterm term.order_trans subst_apply_term.simps(2))"], ["proof (state)\nthis:\n  ?t2\n  \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x2a;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" when \"t \\<in> set T\" for t"], ["proof (prove)\nusing this:\n  ?t2\n  \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "using that Fun.IH"], ["proof (prove)\nusing this:\n  ?t2\n  \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  t \\<in> set T\n  \\<lbrakk>?x2a2 \\<in> set T;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?x2a2\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x2a;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)", "moreover"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x2a;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)", "have \"length (map (\\<lambda>t. t \\<cdot> \\<delta>) T) = arity f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "using Fun.prems"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  \\<forall>fa Ta.\n     Fun fa Ta \\<sqsubseteq> Fun f T \\<cdot> \\<delta> \\<longrightarrow>\n     length Ta = arity fa\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "by auto"], ["proof (state)\nthis:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x2a;\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2)", "ultimately"], ["proof (chain)\npicking this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f", "show ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)", "by fastforce"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x)", "qed (simp add: assms)"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wf_trm_subst_singleton:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t'\" shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))", "have \"wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) w)\" for w"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) w)", "using assms(2)"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) w)", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  \\<forall>f T.\n     Fun f T \\<sqsubseteq> t' \\<longrightarrow> length T = arity f\n\ngoal (1 subgoal):\n 1. \\<forall>f T.\n       Fun f T \\<sqsubseteq> (Var(v := t')) w \\<longrightarrow>\n       length T = arity f", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) ?w2)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))", "thus ?thesis"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) ?w2)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))", "using assms(1) wf_trm_subst[of \"Var(v := t')\" t, OF wf_trm_subst_rangeI]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) ?w2)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  (\\<And>x. wf\\<^sub>t\\<^sub>r\\<^sub>m ((Var(v := t')) x)) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))", "by simp"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> Var(v := t'))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wf_trm_subst_rm_vars:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)", "proof (induction t)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> rm_vars X \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> rm_vars X \\<delta>)", "case (Fun f T)"], ["proof (state)\nthis:\n  \\<lbrakk>?x2a2 \\<in> set T;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (?x2a2 \\<cdot> rm_vars X \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> rm_vars X \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> rm_vars X \\<delta>)", "have \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)\" when \"t \\<in> set T\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)", "using that wf_trm_param[of f \"map (\\<lambda>t. t \\<cdot> \\<delta>) T\"] Fun.prems"], ["proof (prove)\nusing this:\n  t \\<in> set T\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m\n            (Fun f (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>));\n   ?t \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                 \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> rm_vars X \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> rm_vars X \\<delta>)", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)\" when \"t \\<in> set T\" for t"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)", "using that Fun.IH"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> \\<delta>)\n  t \\<in> set T\n  \\<lbrakk>?x2a2 \\<in> set T;\n   wf\\<^sub>t\\<^sub>r\\<^sub>m (?x2a2 \\<cdot> \\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (?x2a2 \\<cdot> rm_vars X \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> rm_vars X \\<delta>)", "by simp"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> rm_vars X \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> rm_vars X \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> rm_vars X \\<delta>)", "moreover"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> rm_vars X \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> rm_vars X \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> rm_vars X \\<delta>)", "have \"length T = arity f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. length T = arity f", "using Fun.prems"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. length T = arity f", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  \\<forall>fa Ta.\n     Fun fa Ta \\<sqsubseteq> Fun f T \\<cdot> \\<delta> \\<longrightarrow>\n     length Ta = arity fa\n\ngoal (1 subgoal):\n 1. length T = arity f", "by auto"], ["proof (state)\nthis:\n  length T = arity f\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)\n 2. \\<And>x1a x2.\n       \\<lbrakk>\\<And>x2a.\n                   \\<lbrakk>x2a \\<in> set x2;\n                    wf\\<^sub>t\\<^sub>r\\<^sub>m\n                     (x2a \\<cdot> \\<delta>)\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(x2a \\<cdot> rm_vars X \\<delta>);\n        wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun x1a x2 \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n                          (Fun x1a x2 \\<cdot> rm_vars X \\<delta>)", "ultimately"], ["proof (chain)\npicking this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> rm_vars X \\<delta>)\n  length T = arity f", "show ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t2 \\<cdot> rm_vars X \\<delta>)\n  length T = arity f\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> rm_vars X \\<delta>)", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<forall>f T.\n     Fun f T \\<sqsubseteq> ?t2 \\<cdot> rm_vars X \\<delta> \\<longrightarrow>\n     length T = arity f\n  length T = arity f\n\ngoal (1 subgoal):\n 1. \\<forall>fa Ta.\n       Fun fa Ta \\<sqsubseteq>\n       Fun f T \\<cdot> rm_vars X \\<delta> \\<longrightarrow>\n       length Ta = arity fa", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T \\<cdot> rm_vars X \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> \\<delta>) \\<Longrightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m (Var x \\<cdot> rm_vars X \\<delta>)", "qed simp"], ["", "lemma wf_trm_subst_rm_vars': \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> v) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (rm_vars X \\<delta> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> v) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (rm_vars X \\<delta> v)", "by auto"], ["", "lemma wf_trms_subst:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)", "by (metis (no_types, lifting) assms imageE wf_trm_subst)"], ["", "lemma wf_trms_subst_rm_vars:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t rm_vars X \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t rm_vars X \\<delta>)", "using assms wf_trm_subst_rm_vars"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> ?\\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> rm_vars ?X ?\\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t rm_vars X \\<delta>)", "by blast"], ["", "lemma wf_trms_subst_rm_vars':\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (rm_vars X \\<delta>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (rm_vars X \\<delta>))", "using assms"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (rm_vars X \\<delta>))", "by force"], ["", "lemma wf_trms_subst_compose:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))", "using assms subst_img_comp_subset' wf_trm_subst"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\n  ?t \\<in> subst_range\n            (?\\<theta>1.0 \\<circ>\\<^sub>s ?\\<theta>2.0) \\<Longrightarrow>\n  ?t \\<in> subst_range ?\\<theta>2.0 \\<or>\n  (\\<exists>t'\\<in>subst_range ?\\<theta>1.0. ?t = t' \\<cdot> ?\\<theta>2.0)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (subst_range ?\\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> ?\\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))", "by blast"], ["", "lemma wf_trm_subst_compose:\n  fixes \\<delta>::\"('fun, 'v) subst\"\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)\" \"\\<And>x. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<delta> x)\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m ((\\<theta> \\<circ>\\<^sub>s \\<delta>) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m ((\\<theta> \\<circ>\\<^sub>s \\<delta>) x)", "using wf_trm_subst[of \\<delta> \"\\<theta> x\", OF wf_trm_subst_rangeI[OF assms(2)]] assms(1)\n      subst_subst_compose[of \"Var x\" \\<theta> \\<delta>]\n      subst_apply_term.simps(1)[of x \\<theta>]\n      subst_apply_term.simps(1)[of x \"\\<theta> \\<circ>\\<^sub>s \\<delta>\"]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x) =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x \\<cdot> \\<delta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> x)\n  Var x \\<cdot> \\<theta> \\<circ>\\<^sub>s \\<delta> =\n  Var x \\<cdot> \\<theta> \\<cdot> \\<delta>\n  Var x \\<cdot> \\<theta> = \\<theta> x\n  Var x \\<cdot> \\<theta> \\<circ>\\<^sub>s \\<delta> =\n  (\\<theta> \\<circ>\\<^sub>s \\<delta>) x\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m ((\\<theta> \\<circ>\\<^sub>s \\<delta>) x)", "by argo"], ["", "lemma wf_trms_Var_range:\n  assumes \"subst_range \\<delta> \\<subseteq> range Var\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "using assms"], ["proof (prove)\nusing this:\n  subst_range \\<delta> \\<subseteq> range Var\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<delta>)", "by fastforce"], ["", "lemma wf_trms_subst_compose_Var_range:\n  assumes \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\"\n    and \"subst_range \\<delta> \\<subseteq> range Var\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (\\<delta> \\<circ>\\<^sub>s \\<theta>))\"\n    and \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range (\\<delta> \\<circ>\\<^sub>s \\<theta>)) &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))", "using assms wf_trms_subst_compose wf_trms_Var_range"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<theta>)\n  subst_range \\<delta> \\<subseteq> range Var\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range ?\\<theta>);\n   wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range ?\\<delta>)\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n                     (subst_range (?\\<theta> \\<circ>\\<^sub>s ?\\<delta>))\n  subst_range ?\\<delta> \\<subseteq> range Var \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range ?\\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range (\\<delta> \\<circ>\\<^sub>s \\<theta>)) &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (subst_range (\\<theta> \\<circ>\\<^sub>s \\<delta>))", "by metis+"], ["", "lemma wf_trm_subst_inv: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> \\<delta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m t", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>f T.\n       Fun f T \\<sqsubseteq> t \\<cdot> \\<delta> \\<longrightarrow>\n       length T = arity f \\<Longrightarrow>\n    \\<forall>f T.\n       Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f", "by (induct t) auto"], ["", "lemma wf_trms_subst_inv: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>) \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M", "using wf_trm_subst_inv"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> ?\\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n     (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>) \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M", "by fast"], ["", "lemma wf_trm_subterms: \"wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms t)", "using wf_trm_subterm"], ["proof (prove)\nusing this:\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m ?t; ?s \\<sqsubset> ?t\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?s\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms t)", "by blast"], ["", "lemma wf_trms_subterms: \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms\\<^sub>s\\<^sub>e\\<^sub>t M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms\\<^sub>s\\<^sub>e\\<^sub>t M)", "using wf_trm_subterms"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms ?t)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M \\<Longrightarrow>\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subterms\\<^sub>s\\<^sub>e\\<^sub>t M)", "by blast"], ["", "lemma wf_trm_arity: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) \\<Longrightarrow> length T = arity f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) \\<Longrightarrow>\n    length T = arity f", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>fa Ta.\n       Fun fa Ta \\<sqsubseteq> Fun f T \\<longrightarrow>\n       length Ta = arity fa \\<Longrightarrow>\n    length T = arity f", "by blast"], ["", "lemma wf_trm_subterm_arity: \"wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow> Fun f T \\<sqsubseteq> t \\<Longrightarrow> length T = arity f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m t; Fun f T \\<sqsubseteq> t\\<rbrakk>\n    \\<Longrightarrow> length T = arity f", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>f T.\n                Fun f T \\<sqsubseteq> t \\<longrightarrow>\n                length T = arity f;\n     Fun f T \\<sqsubseteq> t\\<rbrakk>\n    \\<Longrightarrow> length T = arity f", "by blast"], ["", "lemma unify_list_wf_trm:\n  assumes \"Unification.unify E B = Some U\" \"\\<forall>(s,t) \\<in> set E. wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  and \"\\<forall>(v,t) \\<in> set B. wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  shows \"\\<forall>(v,t) \\<in> set U. wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(v, y)\\<in>set U. wf\\<^sub>t\\<^sub>r\\<^sub>m y", "using assms"], ["proof (prove)\nusing this:\n  unify E B = Some U\n  \\<forall>(s, t)\\<in>set E.\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>(v, y)\\<in>set B. wf\\<^sub>t\\<^sub>r\\<^sub>m y\n\ngoal (1 subgoal):\n 1. \\<forall>(v, y)\\<in>set U. wf\\<^sub>t\\<^sub>r\\<^sub>m y", "proof (induction E B arbitrary: U rule: Unification.unify.induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>bs U.\n       \\<lbrakk>unify [] bs = Some U;\n        \\<forall>(s, t)\\<in>set [].\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 4. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "case (1 B U)"], ["proof (state)\nthis:\n  unify [] B = Some U\n  \\<forall>a\\<in>set [].\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (4 subgoals):\n 1. \\<And>bs U.\n       \\<lbrakk>unify [] bs = Some U;\n        \\<forall>(s, t)\\<in>set [].\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 4. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "thus ?case"], ["proof (prove)\nusing this:\n  unify [] B = Some U\n  \\<forall>a\\<in>set [].\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "by auto"], ["proof (state)\nthis:\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "case (2 f T g S E B U)"], ["proof (state)\nthis:\n  \\<lbrakk>decompose (Fun f T) (Fun g S) = Some ?x2.2;\n   unify (?x2.2 @ E) B = Some ?U2;\n   \\<forall>a\\<in>set (?x2.2 @ E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set B.\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  unify ((Fun f T, Fun g S) # E) B = Some U\n  \\<forall>a\\<in>set ((Fun f T, Fun g S) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "have wf_fun: \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun g S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun g S)", "using \"2.prems\"(2)"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>set ((Fun f T, Fun g S) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T) &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun g S)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun g S)\n\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "from \"2.prems\"(1)"], ["proof (chain)\npicking this:\n  unify ((Fun f T, Fun g S) # E) B = Some U", "obtain E' where *: \"decompose (Fun f T) (Fun g S) = Some E'\"\n    and [simp]: \"f = g\" \"length T = length S\" \"E' = zip T S\"\n    and **: \"Unification.unify (E'@E) B = Some U\""], ["proof (prove)\nusing this:\n  unify ((Fun f T, Fun g S) # E) B = Some U\n\ngoal (1 subgoal):\n 1. (\\<And>E'.\n        \\<lbrakk>decompose (Fun f T) (Fun g S) = Some E'; f = g;\n         length T = length S; E' = zip T S;\n         unify (E' @ E) B = Some U\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto split: option.splits)"], ["proof (state)\nthis:\n  decompose (Fun f T) (Fun g S) = Some E'\n  f = g\n  length T = length S\n  E' = zip T S\n  unify (E' @ E) B = Some U\n\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "hence \"t \\<sqsubset> Fun f T\" \"t' \\<sqsubset> Fun g S\" when \"(t,t') \\<in> set E'\" for t t'"], ["proof (prove)\nusing this:\n  decompose (Fun f T) (Fun g S) = Some E'\n  f = g\n  length T = length S\n  E' = zip T S\n  unify (E' @ E) B = Some U\n\ngoal (1 subgoal):\n 1. t \\<sqsubset> Fun f T &&& t' \\<sqsubset> Fun g S", "using that"], ["proof (prove)\nusing this:\n  decompose (Fun f T) (Fun g S) = Some E'\n  f = g\n  length T = length S\n  E' = zip T S\n  unify (E' @ E) B = Some U\n  (t, t') \\<in> set E'\n\ngoal (1 subgoal):\n 1. t \\<sqsubset> Fun f T &&& t' \\<sqsubset> Fun g S", "by (metis zip_arg_subterm(1), metis zip_arg_subterm(2))"], ["proof (state)\nthis:\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> ?t2 \\<sqsubset> Fun f T\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> ?t'2 \\<sqsubset> Fun g S\n\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t'\" when \"(t,t') \\<in> set E'\" for t t'"], ["proof (prove)\nusing this:\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> ?t2 \\<sqsubset> Fun f T\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> ?t'2 \\<sqsubset> Fun g S\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t &&& wf\\<^sub>t\\<^sub>r\\<^sub>m t'", "using wf_trm_subterm wf_fun \\<open>f = g\\<close> that"], ["proof (prove)\nusing this:\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> ?t2 \\<sqsubset> Fun f T\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> ?t'2 \\<sqsubset> Fun g S\n  \\<lbrakk>wf\\<^sub>t\\<^sub>r\\<^sub>m ?t; ?s \\<sqsubset> ?t\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?s\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun g S)\n  f = g\n  (t, t') \\<in> set E'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t &&& wf\\<^sub>t\\<^sub>r\\<^sub>m t'", "by blast+"], ["proof (state)\nthis:\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t'2\n\ngoal (3 subgoals):\n 1. \\<And>f ss g ts E bs U.\n       \\<lbrakk>\\<And>x2 U.\n                   \\<lbrakk>decompose (Fun f ss) (Fun g ts) = Some x2;\n                    unify (x2 @ E) bs = Some U;\n                    \\<forall>(s, t)\\<in>set (x2 @ E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun f ss, Fun g ts) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun f ss, Fun g ts) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 3. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "thus ?case"], ["proof (prove)\nusing this:\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t'2\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "using \"2.IH\"[OF * ** _ \"2.prems\"(3)] \"2.prems\"(2)"], ["proof (prove)\nusing this:\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t2\n  (?t2, ?t'2) \\<in> set E' \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m ?t'2\n  \\<forall>a\\<in>set (E' @ E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m t \\<Longrightarrow>\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  \\<forall>a\\<in>set ((Fun f T, Fun g S) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (2 subgoals):\n 1. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "case (3 v t E B)"], ["proof (state)\nthis:\n  \\<lbrakk>t = Var v; unify E B = Some ?U2;\n   \\<forall>a\\<in>set E.\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set B.\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  \\<lbrakk>t \\<noteq> Var v; v \\<notin> fv t;\n   unify (subst_list (subst v t) E) ((v, t) # B) = Some ?U2;\n   \\<forall>a\\<in>set (subst_list (subst v t) E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set ((v, t) # B).\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  unify ((Var v, t) # E) B = Some U\n  \\<forall>a\\<in>set ((Var v, t) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (2 subgoals):\n 1. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "hence *: \"\\<forall>(w,x) \\<in> set ((v, t) # B). wf\\<^sub>t\\<^sub>r\\<^sub>m x\"\n      and **: \"\\<forall>(s,t) \\<in> set E. wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\nusing this:\n  \\<lbrakk>t = Var v; unify E B = Some ?U2;\n   \\<forall>a\\<in>set E.\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set B.\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  \\<lbrakk>t \\<noteq> Var v; v \\<notin> fv t;\n   unify (subst_list (subst v t) E) ((v, t) # B) = Some ?U2;\n   \\<forall>a\\<in>set (subst_list (subst v t) E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set ((v, t) # B).\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  unify ((Var v, t) # E) B = Some U\n  \\<forall>a\\<in>set ((Var v, t) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<forall>(w, y)\\<in>set ((v, t) # B). wf\\<^sub>t\\<^sub>r\\<^sub>m y &&&\n    \\<forall>(s, t)\\<in>set E.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by auto"], ["proof (state)\nthis:\n  \\<forall>(w, y)\\<in>set ((v, t) # B). wf\\<^sub>t\\<^sub>r\\<^sub>m y\n  \\<forall>(s, t)\\<in>set E.\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (2 subgoals):\n 1. \\<And>x t E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>t = Var x; unify E bs = Some U;\n                    \\<forall>(s, t)\\<in>set E.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set bs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        \\<And>U.\n           \\<lbrakk>t \\<noteq> Var x; x \\<notin> fv t;\n            unify (subst_list (subst x t) E) ((x, t) # bs) = Some U;\n            \\<forall>(s, t)\\<in>set (subst_list (subst x t) E).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n               wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n            \\<forall>(v, y)\\<in>set ((x, t) # bs).\n               wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n           \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                                wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Var x, t) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Var x, t) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y\n 2. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "proof (cases \"t = Var v\")"], ["proof (state)\ngoal (2 subgoals):\n 1. t = Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n 2. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "case True"], ["proof (state)\nthis:\n  t = Var v\n\ngoal (2 subgoals):\n 1. t = Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n 2. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "thus ?thesis"], ["proof (prove)\nusing this:\n  t = Var v\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "using \"3.prems\" \"3.IH\"(1)"], ["proof (prove)\nusing this:\n  t = Var v\n  unify ((Var v, t) # E) B = Some U\n  \\<forall>a\\<in>set ((Var v, t) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  \\<lbrakk>t = Var v; unify E B = Some ?U2;\n   \\<forall>a\\<in>set E.\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set B.\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "by auto"], ["proof (state)\nthis:\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "case False"], ["proof (state)\nthis:\n  t \\<noteq> Var v\n\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "hence \"v \\<notin> fv t\""], ["proof (prove)\nusing this:\n  t \\<noteq> Var v\n\ngoal (1 subgoal):\n 1. v \\<notin> fv t", "using \"3.prems\"(1)"], ["proof (prove)\nusing this:\n  t \\<noteq> Var v\n  unify ((Var v, t) # E) B = Some U\n\ngoal (1 subgoal):\n 1. v \\<notin> fv t", "by auto"], ["proof (state)\nthis:\n  v \\<notin> fv t\n\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "hence \"Unification.unify (subst_list (subst v t) E) ((v, t)#B) = Some U\""], ["proof (prove)\nusing this:\n  v \\<notin> fv t\n\ngoal (1 subgoal):\n 1. unify (subst_list (subst v t) E) ((v, t) # B) = Some U", "using \\<open>t \\<noteq> Var v\\<close> \"3.prems\"(1)"], ["proof (prove)\nusing this:\n  v \\<notin> fv t\n  t \\<noteq> Var v\n  unify ((Var v, t) # E) B = Some U\n\ngoal (1 subgoal):\n 1. unify (subst_list (subst v t) E) ((v, t) # B) = Some U", "by auto"], ["proof (state)\nthis:\n  unify (subst_list (subst v t) E) ((v, t) # B) = Some U\n\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "moreover"], ["proof (state)\nthis:\n  unify (subst_list (subst v t) E) ((v, t) # B) = Some U\n\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "have \"\\<forall>(s, t) \\<in> set (subst_list (subst v t) E). wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(s, t)\\<in>set (subst_list (subst v t) E).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "using wf_trm_subst_singleton[OF _ \\<open>wf\\<^sub>t\\<^sub>r\\<^sub>m t\\<close>] \"3.prems\"(2)"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> Var(?v := t))\n  \\<forall>a\\<in>set ((Var v, t) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>(s, t)\\<in>set (subst_list (subst v t) E).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "unfolding subst_list_def subst_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> Var(?v := t))\n  \\<forall>a\\<in>set ((Var v, t) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>(s, t)\n             \\<in>set (map (\\<lambda>p.\n                               (fst p \\<cdot> Var(v := t),\n                                snd p \\<cdot> Var(v := t)))\n                        E).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by auto"], ["proof (state)\nthis:\n  \\<forall>(s, t)\\<in>set (subst_list (subst v t) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. t \\<noteq> Var v \\<Longrightarrow>\n    \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "ultimately"], ["proof (chain)\npicking this:\n  unify (subst_list (subst v t) E) ((v, t) # B) = Some U\n  \\<forall>(s, t)\\<in>set (subst_list (subst v t) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "show ?thesis"], ["proof (prove)\nusing this:\n  unify (subst_list (subst v t) E) ((v, t) # B) = Some U\n  \\<forall>(s, t)\\<in>set (subst_list (subst v t) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "using \"3.IH\"(2)[OF \\<open>t \\<noteq> Var v\\<close> \\<open>v \\<notin> fv t\\<close> _ _ *]"], ["proof (prove)\nusing this:\n  unify (subst_list (subst v t) E) ((v, t) # B) = Some U\n  \\<forall>(s, t)\\<in>set (subst_list (subst v t) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<lbrakk>unify (subst_list (subst v t) E) ((v, t) # B) = Some ?U2;\n   \\<forall>a\\<in>set (subst_list (subst v t) E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m t\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "by metis"], ["proof (state)\nthis:\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "case (4 f T v E B U)"], ["proof (state)\nthis:\n  \\<lbrakk>v \\<notin> fv (Fun f T);\n   unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some ?U2;\n   \\<forall>a\\<in>set (subst_list (subst v (Fun f T)) E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set ((v, Fun f T) # B).\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  unify ((Fun f T, Var v) # E) B = Some U\n  \\<forall>a\\<in>set ((Fun f T, Var v) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "hence *: \"\\<forall>(w,x) \\<in> set ((v, Fun f T) # B). wf\\<^sub>t\\<^sub>r\\<^sub>m x\"\n      and **: \"\\<forall>(s,t) \\<in> set E. wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>v \\<notin> fv (Fun f T);\n   unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some ?U2;\n   \\<forall>a\\<in>set (subst_list (subst v (Fun f T)) E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>a\\<in>set ((v, Fun f T) # B).\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  unify ((Fun f T, Var v) # E) B = Some U\n  \\<forall>a\\<in>set ((Fun f T, Var v) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<forall>a\\<in>set B.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<forall>(w, y)\\<in>set ((v, Fun f T) # B).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m y &&&\n    \\<forall>(s, t)\\<in>set E.\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t &&&\n    wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)", "by auto"], ["proof (state)\nthis:\n  \\<forall>(w, y)\\<in>set ((v, Fun f T) # B). wf\\<^sub>t\\<^sub>r\\<^sub>m y\n  \\<forall>(s, t)\\<in>set E.\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "have \"v \\<notin> fv (Fun f T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<notin> fv (Fun f T)", "using \"4.prems\"(1)"], ["proof (prove)\nusing this:\n  unify ((Fun f T, Var v) # E) B = Some U\n\ngoal (1 subgoal):\n 1. v \\<notin> fv (Fun f T)", "by force"], ["proof (state)\nthis:\n  v \\<notin> fv (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "hence \"Unification.unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T)#B) = Some U\""], ["proof (prove)\nusing this:\n  v \\<notin> fv (Fun f T)\n\ngoal (1 subgoal):\n 1. unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U", "using \"4.prems\"(1)"], ["proof (prove)\nusing this:\n  v \\<notin> fv (Fun f T)\n  unify ((Fun f T, Var v) # E) B = Some U\n\ngoal (1 subgoal):\n 1. unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U", "by auto"], ["proof (state)\nthis:\n  unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "moreover"], ["proof (state)\nthis:\n  unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "have \"\\<forall>(s, t) \\<in> set (subst_list (subst v (Fun f T)) E). wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>(s, t)\\<in>set (subst_list (subst v (Fun f T)) E).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "using wf_trm_subst_singleton[OF _ \\<open>wf\\<^sub>t\\<^sub>r\\<^sub>m (Fun f T)\\<close>] \"4.prems\"(2)"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> Var(?v := Fun f T))\n  \\<forall>a\\<in>set ((Fun f T, Var v) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>(s, t)\\<in>set (subst_list (subst v (Fun f T)) E).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "unfolding subst_list_def subst_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (?t \\<cdot> Var(?v := Fun f T))\n  \\<forall>a\\<in>set ((Fun f T, Var v) # E).\n     case a of\n     (s, t) \\<Rightarrow>\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>(s, t)\n             \\<in>set (map (\\<lambda>p.\n                               (fst p \\<cdot> Var(v := Fun f T),\n                                snd p \\<cdot> Var(v := Fun f T)))\n                        E).\n       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by auto"], ["proof (state)\nthis:\n  \\<forall>(s, t)\\<in>set (subst_list (subst v (Fun f T)) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<And>v va x E bs U.\n       \\<lbrakk>\\<And>U.\n                   \\<lbrakk>x \\<notin> fv (Fun v va);\n                    unify (subst_list (subst x (Fun v va)) E)\n                     ((x, Fun v va) # bs) =\n                    Some U;\n                    \\<forall>(s, t)\n                             \\<in>set (subst_list (subst x (Fun v va)) E).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n                    \\<forall>(v, y)\\<in>set ((x, Fun v va) # bs).\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n  wf\\<^sub>t\\<^sub>r\\<^sub>m y;\n        unify ((Fun v va, Var x) # E) bs = Some U;\n        \\<forall>(s, t)\\<in>set ((Fun v va, Var x) # E).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n        \\<forall>(v, y)\\<in>set bs. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> \\<forall>(v, y)\\<in>set U.\n                            wf\\<^sub>t\\<^sub>r\\<^sub>m y", "ultimately"], ["proof (chain)\npicking this:\n  unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U\n  \\<forall>(s, t)\\<in>set (subst_list (subst v (Fun f T)) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "show ?case"], ["proof (prove)\nusing this:\n  unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U\n  \\<forall>(s, t)\\<in>set (subst_list (subst v (Fun f T)) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "using \"4.IH\"[OF \\<open>v \\<notin> fv (Fun f T)\\<close> _ _ *]"], ["proof (prove)\nusing this:\n  unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) = Some U\n  \\<forall>(s, t)\\<in>set (subst_list (subst v (Fun f T)) E).\n     wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<lbrakk>unify (subst_list (subst v (Fun f T)) E) ((v, Fun f T) # B) =\n           Some ?U2;\n   \\<forall>a\\<in>set (subst_list (subst v (Fun f T)) E).\n      case a of\n      (s, t) \\<Rightarrow>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and>\n        wf\\<^sub>t\\<^sub>r\\<^sub>m t\\<rbrakk>\n  \\<Longrightarrow> \\<forall>a\\<in>set ?U2.\n                       case a of\n                       (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (1 subgoal):\n 1. \\<forall>a\\<in>set U.\n       case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x", "by metis"], ["proof (state)\nthis:\n  \\<forall>a\\<in>set U.\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mgu_wf_trm:\n  assumes \"mgu s t = Some \\<sigma>\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "from assms"], ["proof (chain)\npicking this:\n  mgu s t = Some \\<sigma>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m s\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t", "obtain \\<sigma>' where \"subst_of \\<sigma>' = \\<sigma>\" \"\\<forall>(v,t) \\<in> set \\<sigma>'. wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\nusing this:\n  mgu s t = Some \\<sigma>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m s\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. (\\<And>\\<sigma>'.\n        \\<lbrakk>subst_of \\<sigma>' = \\<sigma>;\n         \\<forall>(v, y)\\<in>set \\<sigma>'.\n            wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using unify_list_wf_trm[of \"[(s,t)]\" \"[]\"]"], ["proof (prove)\nusing this:\n  mgu s t = Some \\<sigma>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m s\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  \\<lbrakk>unify [(s, t)] [] = Some ?U;\n   \\<forall>(s, t)\\<in>set [(s, t)].\n      wf\\<^sub>t\\<^sub>r\\<^sub>m s \\<and> wf\\<^sub>t\\<^sub>r\\<^sub>m t;\n   \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n  \\<Longrightarrow> \\<forall>(v, y)\\<in>set ?U. wf\\<^sub>t\\<^sub>r\\<^sub>m y\n\ngoal (1 subgoal):\n 1. (\\<And>\\<sigma>'.\n        \\<lbrakk>subst_of \\<sigma>' = \\<sigma>;\n         \\<forall>(v, y)\\<in>set \\<sigma>'.\n            wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto split: option.splits)"], ["proof (state)\nthis:\n  subst_of \\<sigma>' = \\<sigma>\n  \\<forall>(v, y)\\<in>set \\<sigma>'. wf\\<^sub>t\\<^sub>r\\<^sub>m y\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "thus ?thesis"], ["proof (prove)\nusing this:\n  subst_of \\<sigma>' = \\<sigma>\n  \\<forall>(v, y)\\<in>set \\<sigma>'. wf\\<^sub>t\\<^sub>r\\<^sub>m y\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "proof (induction \\<sigma>' arbitrary: \\<sigma> v rule: List.rev_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "case (snoc x \\<sigma>' \\<sigma> v)"], ["proof (state)\nthis:\n  \\<lbrakk>subst_of \\<sigma>' = ?\\<sigma>2;\n   \\<forall>a\\<in>set \\<sigma>'.\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (?\\<sigma>2 ?v2)\n  subst_of (\\<sigma>' @ [x]) = \\<sigma>\n  \\<forall>a\\<in>set (\\<sigma>' @ [x]).\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "define \\<theta> where \"\\<theta> = subst_of \\<sigma>'\""], ["proof (state)\nthis:\n  \\<theta> = subst_of \\<sigma>'\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "hence \"wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> v)\" for v"], ["proof (prove)\nusing this:\n  \\<theta> = subst_of \\<sigma>'\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> v)", "using snoc.prems(2) snoc.IH[of \\<theta>]"], ["proof (prove)\nusing this:\n  \\<theta> = subst_of \\<sigma>'\n  \\<forall>a\\<in>set (\\<sigma>' @ [x]).\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  \\<lbrakk>subst_of \\<sigma>' = \\<theta>;\n   \\<forall>a\\<in>set \\<sigma>'.\n      case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\\<rbrakk>\n  \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> v)", "by fastforce"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "moreover"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "obtain w t where x: \"x = (w,t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>w t. x = (w, t) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis surj_pair)"], ["proof (state)\nthis:\n  x = (w, t)\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "hence \\<sigma>: \"\\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>\""], ["proof (prove)\nusing this:\n  x = (w, t)\n\ngoal (1 subgoal):\n 1. \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>", "using snoc.prems(1)"], ["proof (prove)\nusing this:\n  x = (w, t)\n  subst_of (\\<sigma>' @ [x]) = \\<sigma>\n\ngoal (1 subgoal):\n 1. \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>", "by (simp add: subst_def \\<theta>_def)"], ["proof (state)\nthis:\n  \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "moreover"], ["proof (state)\nthis:\n  \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "have \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "using snoc.prems(2) x"], ["proof (prove)\nusing this:\n  \\<forall>a\\<in>set (\\<sigma>' @ [x]).\n     case a of (v, x) \\<Rightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m x\n  x = (w, t)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (2 subgoals):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n 2. \\<And>x xs \\<sigma> v.\n       \\<lbrakk>\\<And>\\<sigma> v.\n                   \\<lbrakk>subst_of xs = \\<sigma>;\n                    \\<forall>(v, y)\\<in>set xs.\n                       wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n                   \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m\n(\\<sigma> v);\n        subst_of (xs @ [x]) = \\<sigma>;\n        \\<forall>(v, y)\\<in>set (xs @ [x]).\n           wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "ultimately"], ["proof (chain)\npicking this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n  \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t", "show ?case"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n  \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "using wf_trm_subst[of _ t]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n  \\<sigma> = Var(w := t) \\<circ>\\<^sub>s \\<theta>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (subst_range ?\\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> ?\\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "unfolding subst_compose_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<theta> ?v2)\n  \\<sigma> = (\\<lambda>x. (Var(w := t)) x \\<cdot> \\<theta>)\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t\n  wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s\n   (subst_range ?\\<delta>) \\<Longrightarrow>\n  wf\\<^sub>t\\<^sub>r\\<^sub>m t =\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (t \\<cdot> ?\\<delta>)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "by auto"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n\ngoal (1 subgoal):\n 1. \\<And>\\<sigma> v.\n       \\<lbrakk>subst_of [] = \\<sigma>;\n        \\<forall>(v, y)\\<in>set []. wf\\<^sub>t\\<^sub>r\\<^sub>m y\\<rbrakk>\n       \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)", "qed (simp add: wf\\<^sub>t\\<^sub>r\\<^sub>m_def)"], ["proof (state)\nthis:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> v)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mgu_wf_trms:\n  assumes \"mgu s t = Some \\<sigma>\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m s\" \"wf\\<^sub>t\\<^sub>r\\<^sub>m t\"\n  shows \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<sigma>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<sigma>)", "using mgu_wf_trm[OF assms]"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m (\\<sigma> ?v)\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s (subst_range \\<sigma>)", "by simp"], ["", "subsection \\<open>Definitions: Intruder Deduction Relations\\<close>"], ["", "text \\<open>\n  A standard Dolev-Yao intruder.\n\\<close>"], ["", "inductive intruder_deduct::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) term \\<Rightarrow> bool\"\nwhere\n  Axiom[simp]:   \"t \\<in> M \\<Longrightarrow> intruder_deduct M t\"\n| Compose[simp]: \"\\<lbrakk>length T = arity f; public f; \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_deduct M t\\<rbrakk>\n                  \\<Longrightarrow> intruder_deduct M (Fun f T)\"\n| Decompose:     \"\\<lbrakk>intruder_deduct M t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_deduct M k;\n                   t\\<^sub>i \\<in> set T\\<rbrakk>\n                  \\<Longrightarrow> intruder_deduct M t\\<^sub>i\""], ["", "text \\<open>\n  A variant of the intruder relation which limits the intruder to composition only.\n\\<close>"], ["", "inductive intruder_synth::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) term \\<Rightarrow> bool\"\nwhere\n  AxiomC[simp]:   \"t \\<in> M \\<Longrightarrow> intruder_synth M t\"\n| ComposeC[simp]: \"\\<lbrakk>length T = arity f; public f; \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n                    \\<Longrightarrow> intruder_synth M (Fun f T)\""], ["", "adhoc_overloading INTRUDER_DEDUCT intruder_deduct"], ["", "adhoc_overloading INTRUDER_SYNTH intruder_synth"], ["", "lemma intruder_deduct_induct[consumes 1, case_names Axiom Compose Decompose]:\n  assumes \"M \\<turnstile> t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M t\"\n          \"\\<And>T f. \\<lbrakk>length T = arity f; public f;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> P M t\\<rbrakk> \\<Longrightarrow> P M (Fun f T)\"\n          \"\\<And>t K T t\\<^sub>i. \\<lbrakk>M \\<turnstile> t; P M t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n                       \\<And>k. k \\<in> set K \\<Longrightarrow> P M k; t\\<^sub>i \\<in> set T\\<rbrakk> \\<Longrightarrow> P M t\\<^sub>i\"\n  shows \"P M t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P M t", "using assms"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  ?t2 \\<in> M \\<Longrightarrow> P M ?t2\n  \\<lbrakk>length ?T2 = arity ?f2; public ?f2;\n   \\<And>t. t \\<in> set ?T2 \\<Longrightarrow> M \\<turnstile> t;\n   \\<And>t. t \\<in> set ?T2 \\<Longrightarrow> P M t\\<rbrakk>\n  \\<Longrightarrow> P M (Fun ?f2 ?T2)\n  \\<lbrakk>M \\<turnstile> ?t2; P M ?t2; Ana ?t2 = (?K2, ?T2);\n   \\<And>k. k \\<in> set ?K2 \\<Longrightarrow> M \\<turnstile> k;\n   \\<And>k. k \\<in> set ?K2 \\<Longrightarrow> P M k;\n   ?t\\<^sub>i2 \\<in> set ?T2\\<rbrakk>\n  \\<Longrightarrow> P M ?t\\<^sub>i2\n\ngoal (1 subgoal):\n 1. P M t", "by (induct rule: intruder_deduct.induct) blast+"], ["", "lemma intruder_synth_induct[consumes 1, case_names AxiomC ComposeC]:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M t\"\n          \"\\<And>T f. \\<lbrakk>length T = arity f; public f;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> P M t\\<rbrakk> \\<Longrightarrow> P M (Fun f T)\"\n  shows \"P M t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P M t", "using assms"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t\n  ?t2 \\<in> M \\<Longrightarrow> P M ?t2\n  \\<lbrakk>length ?T2 = arity ?f2; public ?f2;\n   \\<And>t. t \\<in> set ?T2 \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n   \\<And>t. t \\<in> set ?T2 \\<Longrightarrow> P M t\\<rbrakk>\n  \\<Longrightarrow> P M (Fun ?f2 ?T2)\n\ngoal (1 subgoal):\n 1. P M t", "by (induct rule: intruder_synth.induct) auto"], ["", "subsection \\<open>Definitions: Analyzed Knowledge and Public Ground Well-formed Terms (PGWTs)\\<close>"], ["", "definition analyzed::\"('fun,'var) terms \\<Rightarrow> bool\" where\n  \"analyzed M \\<equiv> \\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M \\<turnstile>\\<^sub>c t\""], ["", "definition analyzed_in where\n  \"analyzed_in t M \\<equiv> \\<forall>K R. (Ana t = (K,R) \\<and> (\\<forall>k \\<in> set K. M \\<turnstile>\\<^sub>c k)) \\<longrightarrow> (\\<forall>r \\<in> set R. M \\<turnstile>\\<^sub>c r)\""], ["", "definition decomp_closure::\"('fun,'var) terms \\<Rightarrow> ('fun,'var) terms \\<Rightarrow> bool\" where\n  \"decomp_closure M M' \\<equiv> \\<forall>t. M \\<turnstile> t \\<and> (\\<exists>t' \\<in> M. t \\<sqsubseteq> t') \\<longleftrightarrow> t \\<in> M'\""], ["", "inductive public_ground_wf_term::\"('fun,'var) term \\<Rightarrow> bool\" where\n  PGWT[simp]: \"\\<lbrakk>public f; arity f = length T;\n                \\<And>t. t \\<in> set T \\<Longrightarrow> public_ground_wf_term t\\<rbrakk>\n                  \\<Longrightarrow> public_ground_wf_term (Fun f T)\""], ["", "abbreviation \"public_ground_wf_terms \\<equiv> {t. public_ground_wf_term t}\""], ["", "lemma public_const_deduct:\n  assumes \"c \\<in> \\<C>\\<^sub>p\\<^sub>u\\<^sub>b\"\n  shows \"M \\<turnstile> Fun c []\" \"M \\<turnstile>\\<^sub>c Fun c []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile> Fun c [] &&& M \\<turnstile>\\<^sub>c Fun c []", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<turnstile> Fun c []\n 2. M \\<turnstile>\\<^sub>c Fun c []", "have \"arity c = 0\" \"public c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. arity c = 0 &&& public c", "using const_arity_eq_zero \\<open>c \\<in> \\<C>\\<^sub>p\\<^sub>u\\<^sub>b\\<close>"], ["proof (prove)\nusing this:\n  ?c \\<in> \\<C> \\<Longrightarrow> arity ?c = 0\n  c \\<in> {f. public f} \\<inter> \\<C>\n\ngoal (1 subgoal):\n 1. arity c = 0 &&& public c", "by auto"], ["proof (state)\nthis:\n  arity c = 0\n  public c\n\ngoal (2 subgoals):\n 1. M \\<turnstile> Fun c []\n 2. M \\<turnstile>\\<^sub>c Fun c []", "thus \"M \\<turnstile> Fun c []\" \"M \\<turnstile>\\<^sub>c Fun c []\""], ["proof (prove)\nusing this:\n  arity c = 0\n  public c\n\ngoal (1 subgoal):\n 1. M \\<turnstile> Fun c [] &&& M \\<turnstile>\\<^sub>c Fun c []", "using intruder_synth.ComposeC[OF _ \\<open>public c\\<close>, of \"[]\"]\n          intruder_deduct.Compose[OF _ \\<open>public c\\<close>, of \"[]\"]"], ["proof (prove)\nusing this:\n  arity c = 0\n  public c\n  \\<lbrakk>length [] = arity c;\n   \\<And>t.\n      t \\<in> set [] \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c Fun c []\n  \\<lbrakk>length [] = arity c;\n   \\<And>t. t \\<in> set [] \\<Longrightarrow> ?M \\<turnstile> t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> Fun c []\n\ngoal (1 subgoal):\n 1. M \\<turnstile> Fun c [] &&& M \\<turnstile>\\<^sub>c Fun c []", "by auto"], ["proof (state)\nthis:\n  M \\<turnstile> Fun c []\n  M \\<turnstile>\\<^sub>c Fun c []\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma public_const_deduct'[simp]:\n  assumes \"arity c = 0\" \"public c\"\n  shows \"M \\<turnstile> Fun c []\" \"M \\<turnstile>\\<^sub>c Fun c []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile> Fun c [] &&& M \\<turnstile>\\<^sub>c Fun c []", "using intruder_deduct.Compose[of \"[]\" c] intruder_synth.ComposeC[of \"[]\" c] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>length [] = arity c; public c;\n   \\<And>t. t \\<in> set [] \\<Longrightarrow> ?M \\<turnstile> t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> Fun c []\n  \\<lbrakk>length [] = arity c; public c;\n   \\<And>t.\n      t \\<in> set [] \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c Fun c []\n  arity c = 0\n  public c\n\ngoal (1 subgoal):\n 1. M \\<turnstile> Fun c [] &&& M \\<turnstile>\\<^sub>c Fun c []", "by simp_all"], ["", "lemma private_fun_deduct_in_ik:\n  assumes t: \"M \\<turnstile> t\" \"Fun f T \\<in> subterms t\"\n    and f: \"\\<not>public f\"\n  shows \"Fun f T \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "using t"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  Fun f T \\<sqsubseteq> t\n\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "proof (induction t rule: intruder_deduct.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; Fun f T \\<sqsubseteq> t\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n 2. \\<And>Ta fa M.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t. t \\<in> set Ta \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t\\<rbrakk>\n           \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                             M;\n        Fun f T \\<sqsubseteq> Fun fa Ta\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n 3. \\<And>M t K Ta t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        Fun f T \\<sqsubseteq> t \\<Longrightarrow>\n        Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M;\n        Ana t = (K, Ta);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k\\<rbrakk>\n           \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                             M;\n        t\\<^sub>i \\<in> set Ta; Fun f T \\<sqsubseteq> t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "case Decompose"], ["proof (state)\nthis:\n  M_ \\<turnstile> t_\n  Ana t_ = (K_, T_)\n  ?k2 \\<in> set K_ \\<Longrightarrow> M_ \\<turnstile> ?k2\n  t\\<^sub>i_ \\<in> set T_\n  Fun f T \\<sqsubseteq> t_ \\<Longrightarrow>\n  Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M_\n  \\<lbrakk>?k2 \\<in> set K_; Fun f T \\<sqsubseteq> ?k2\\<rbrakk>\n  \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M_\n  Fun f T \\<sqsubseteq> t\\<^sub>i_\n\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; Fun f T \\<sqsubseteq> t\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n 2. \\<And>Ta fa M.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t. t \\<in> set Ta \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t\\<rbrakk>\n           \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                             M;\n        Fun f T \\<sqsubseteq> Fun fa Ta\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n 3. \\<And>M t K Ta t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        Fun f T \\<sqsubseteq> t \\<Longrightarrow>\n        Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M;\n        Ana t = (K, Ta);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k\\<rbrakk>\n           \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                             M;\n        t\\<^sub>i \\<in> set Ta; Fun f T \\<sqsubseteq> t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "thus ?case"], ["proof (prove)\nusing this:\n  M_ \\<turnstile> t_\n  Ana t_ = (K_, T_)\n  ?k2 \\<in> set K_ \\<Longrightarrow> M_ \\<turnstile> ?k2\n  t\\<^sub>i_ \\<in> set T_\n  Fun f T \\<sqsubseteq> t_ \\<Longrightarrow>\n  Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M_\n  \\<lbrakk>?k2 \\<in> set K_; Fun f T \\<sqsubseteq> ?k2\\<rbrakk>\n  \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M_\n  Fun f T \\<sqsubseteq> t\\<^sub>i_\n\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M_", "by (meson Ana_subterm psubsetD term.order_trans)"], ["proof (state)\nthis:\n  Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M_\n\ngoal (2 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; Fun f T \\<sqsubseteq> t\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n 2. \\<And>Ta fa M.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t. t \\<in> set Ta \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t\\<rbrakk>\n           \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t\n                             M;\n        Fun f T \\<sqsubseteq> Fun fa Ta\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "qed (auto simp add: f in_subterms_Union)"], ["", "lemma private_fun_deduct_in_ik':\n  assumes t: \"M \\<turnstile> Fun f T\"\n    and f: \"\\<not>public f\"\n    and M: \"Fun f T \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M \\<Longrightarrow> Fun f T \\<in> M\"\n  shows \"Fun f T \\<in> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "by (rule M[OF private_fun_deduct_in_ik[OF t term.order_refl f]])"], ["", "lemma pgwt_public: \"\\<lbrakk>public_ground_wf_term t; Fun f T \\<sqsubseteq> t\\<rbrakk> \\<Longrightarrow> public f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>public_ground_wf_term t; Fun f T \\<sqsubseteq> t\\<rbrakk>\n    \\<Longrightarrow> public f", "by (induct t rule: public_ground_wf_term.induct) auto"], ["", "lemma pgwt_ground: \"public_ground_wf_term t \\<Longrightarrow> fv t = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. public_ground_wf_term t \\<Longrightarrow> fv t = {}", "by (induct t rule: public_ground_wf_term.induct) auto"], ["", "lemma pgwt_fun: \"public_ground_wf_term t \\<Longrightarrow> \\<exists>f T. t = Fun f T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. public_ground_wf_term t \\<Longrightarrow> \\<exists>f T. t = Fun f T", "using pgwt_ground[of t]"], ["proof (prove)\nusing this:\n  public_ground_wf_term t \\<Longrightarrow> fv t = {}\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t \\<Longrightarrow> \\<exists>f T. t = Fun f T", "by (cases t) auto"], ["", "lemma pgwt_arity: \"\\<lbrakk>public_ground_wf_term t; Fun f T \\<sqsubseteq> t\\<rbrakk> \\<Longrightarrow> arity f = length T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>public_ground_wf_term t; Fun f T \\<sqsubseteq> t\\<rbrakk>\n    \\<Longrightarrow> arity f = length T", "by (induct t rule: public_ground_wf_term.induct) auto"], ["", "lemma pgwt_wellformed: \"public_ground_wf_term t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. public_ground_wf_term t \\<Longrightarrow> wf\\<^sub>t\\<^sub>r\\<^sub>m t", "by (induct t rule: public_ground_wf_term.induct) auto"], ["", "lemma pgwt_deducible: \"public_ground_wf_term t \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. public_ground_wf_term t \\<Longrightarrow> M \\<turnstile>\\<^sub>c t", "by (induct t rule: public_ground_wf_term.induct) auto"], ["", "lemma pgwt_is_empty_synth: \"public_ground_wf_term t \\<longleftrightarrow> {} \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "fix M::\"('fun,'var) term set\""], ["proof (state)\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "assume \"M \\<turnstile>\\<^sub>c t\" \"M = {}\""], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t\n  M = {}\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "hence \"public_ground_wf_term t\""], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t\n  M = {}\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t", "by (induct t rule: intruder_synth.induct) auto"], ["proof (state)\nthis:\n  public_ground_wf_term t\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?M4 \\<turnstile>\\<^sub>c t; ?M4 = {}\\<rbrakk>\n  \\<Longrightarrow> public_ground_wf_term t\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M4 \\<turnstile>\\<^sub>c t; ?M4 = {}\\<rbrakk>\n  \\<Longrightarrow> public_ground_wf_term t\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "using pgwt_deducible"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M4 \\<turnstile>\\<^sub>c t; ?M4 = {}\\<rbrakk>\n  \\<Longrightarrow> public_ground_wf_term t\n  public_ground_wf_term ?t \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c ?t\n\ngoal (1 subgoal):\n 1. public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)", "by auto"], ["proof (state)\nthis:\n  public_ground_wf_term t = ({} \\<turnstile>\\<^sub>c t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ideduct_synth_subst_apply:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"{} \\<turnstile>\\<^sub>c t\" \"\\<And>v. M \\<turnstile>\\<^sub>c \\<theta> v\"\n  shows \"M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "fix M'::\"('fun,'var) term set\""], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "assume \"M' \\<turnstile>\\<^sub>c t\" \"M' = {}\""], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t\n  M' = {}\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "hence \"M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\""], ["proof (prove)\nusing this:\n  M' \\<turnstile>\\<^sub>c t\n  M' = {}\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "proof (induction t rule: intruder_synth.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; Ma = {}\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>;\n        Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c Fun f T \\<cdot> \\<theta>", "case (ComposeC T f M')"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t2\n  \\<lbrakk>?t2 \\<in> set T; M' = {}\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M (?t2 \\<cdot> \\<theta>)\n  M' = {}\n\ngoal (2 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; Ma = {}\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>;\n        Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c Fun f T \\<cdot> \\<theta>", "hence \"length (map (\\<lambda>t. t \\<cdot> \\<theta>) T) = arity f\" \"\\<And>x. x \\<in> set (map (\\<lambda>t. t \\<cdot> \\<theta>) T) \\<Longrightarrow> M \\<turnstile>\\<^sub>c x\""], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t2\n  \\<lbrakk>?t2 \\<in> set T; M' = {}\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M (?t2 \\<cdot> \\<theta>)\n  M' = {}\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<theta>) =\n    arity f &&&\n    (\\<And>x.\n        x \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                     \\<theta>) \\<Longrightarrow>\n        M \\<turnstile>\\<^sub>c x)", "by auto"], ["proof (state)\nthis:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<theta>) = arity f\n  ?x2\n  \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<theta>) \\<Longrightarrow>\n  M \\<turnstile>\\<^sub>c ?x2\n\ngoal (2 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; Ma = {}\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>;\n        Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c Fun f T \\<cdot> \\<theta>", "thus ?case"], ["proof (prove)\nusing this:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<theta>) = arity f\n  ?x2\n  \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<theta>) \\<Longrightarrow>\n  M \\<turnstile>\\<^sub>c ?x2\n\ngoal (1 subgoal):\n 1. intruder_synth M (Fun f T \\<cdot> \\<theta>)", "using intruder_synth.ComposeC[of \"map (\\<lambda>t. t \\<cdot> \\<theta>) T\" f M] \\<open>public f\\<close>"], ["proof (prove)\nusing this:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<theta>) = arity f\n  ?x2\n  \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<theta>) \\<Longrightarrow>\n  M \\<turnstile>\\<^sub>c ?x2\n  \\<lbrakk>length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<theta>) =\n           arity f;\n   public f;\n   \\<And>t.\n      t \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                   \\<theta>) \\<Longrightarrow>\n      M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> M \\<turnstile>\\<^sub>c\n                    Fun f\n                     (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<theta>)\n  public f\n\ngoal (1 subgoal):\n 1. intruder_synth M (Fun f T \\<cdot> \\<theta>)", "by fastforce"], ["proof (state)\nthis:\n  intruder_synth M (Fun f T \\<cdot> \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; Ma = {}\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "qed simp"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?M'4 \\<turnstile>\\<^sub>c t; ?M'4 = {}\\<rbrakk>\n  \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M'4 \\<turnstile>\\<^sub>c t; ?M'4 = {}\\<rbrakk>\n  \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M'4 \\<turnstile>\\<^sub>c t; ?M'4 = {}\\<rbrakk>\n  \\<Longrightarrow> M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n  {} \\<turnstile>\\<^sub>c t\n  M \\<turnstile>\\<^sub>c \\<theta> ?v2\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>", "by metis"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<cdot> \\<theta>\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Lemmata: Monotonicity, deduction private constants, etc.\\<close>"], ["", "context\nbegin"], ["", "lemma ideduct_mono:\n  \"\\<lbrakk>M \\<turnstile> t; M \\<subseteq> M'\\<rbrakk> \\<Longrightarrow> M' \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<turnstile> t; M \\<subseteq> M'\\<rbrakk>\n    \\<Longrightarrow> M' \\<turnstile> t", "proof (induction rule: intruder_deduct.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\n 2. \\<And>T f M.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> t;\n        M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> Fun f T\n 3. \\<And>M t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        M \\<subseteq> M' \\<Longrightarrow> M' \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\\<^sub>i", "case (Decompose M t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  M \\<subseteq> M' \\<Longrightarrow> intruder_deduct M' t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M' ?k2\n  M \\<subseteq> M'\n\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\n 2. \\<And>T f M.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> t;\n        M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> Fun f T\n 3. \\<And>M t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        M \\<subseteq> M' \\<Longrightarrow> M' \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\\<^sub>i", "have \"\\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k", "using Decompose.IH \\<open>M \\<subseteq> M'\\<close>"], ["proof (prove)\nusing this:\n  M \\<subseteq> M' \\<Longrightarrow> intruder_deduct M' t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M' ?k2\n  M \\<subseteq> M'\n\ngoal (1 subgoal):\n 1. \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k", "by simp"], ["proof (state)\nthis:\n  \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k\n\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\n 2. \\<And>T f M.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> t;\n        M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> Fun f T\n 3. \\<And>M t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        M \\<subseteq> M' \\<Longrightarrow> M' \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k\n\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\n 2. \\<And>T f M.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> t;\n        M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> Fun f T\n 3. \\<And>M t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        M \\<subseteq> M' \\<Longrightarrow> M' \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\\<^sub>i", "have \"M' \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<turnstile> t", "using Decompose.IH \\<open>M \\<subseteq> M'\\<close>"], ["proof (prove)\nusing this:\n  M \\<subseteq> M' \\<Longrightarrow> intruder_deduct M' t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M' ?k2\n  M \\<subseteq> M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t", "by simp"], ["proof (state)\nthis:\n  M' \\<turnstile> t\n\ngoal (3 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\n 2. \\<And>T f M.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> t;\n        M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> Fun f T\n 3. \\<And>M t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        M \\<subseteq> M' \\<Longrightarrow> M' \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\\<^sub>i", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k\n  M' \\<turnstile> t", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k\n  M' \\<turnstile> t\n\ngoal (1 subgoal):\n 1. intruder_deduct M' t\\<^sub>i", "using Decompose.hyps intruder_deduct.Decompose"], ["proof (prove)\nusing this:\n  \\<forall>k. k \\<in> set K \\<longrightarrow> M' \\<turnstile> k\n  M' \\<turnstile> t\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  \\<lbrakk>?M \\<turnstile> ?t; Ana ?t = (?K, ?T);\n   \\<And>k. k \\<in> set ?K \\<Longrightarrow> ?M \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set ?T\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct M' t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  intruder_deduct M' t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t M.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> t\n 2. \\<And>T f M.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> M' \\<turnstile> t;\n        M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> M' \\<turnstile> Fun f T", "qed auto"], ["", "lemma ideduct_synth_mono:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  shows \"\\<lbrakk>M \\<turnstile>\\<^sub>c t; M \\<subseteq> M'\\<rbrakk> \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<turnstile>\\<^sub>c t; M \\<subseteq> M'\\<rbrakk>\n    \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t", "by (induct rule: intruder_synth.induct) auto"], ["", "lemma ideduct_reduce:\n  \"\\<lbrakk>M \\<union> M' \\<turnstile> t; \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk> \\<Longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<union> M' \\<turnstile> t;\n     \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n    \\<Longrightarrow> M \\<turnstile> t", "proof (induction rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M \\<union> M';\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> M' \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<And>t'.\n               t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> M' \\<turnstile> t;\n        (\\<And>t'.\n            t' \\<in> M' \\<Longrightarrow>\n            M \\<turnstile> t') \\<Longrightarrow>\n        M \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> M' \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<And>t'.\n               t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\\<^sub>i", "case Decompose"], ["proof (state)\nthis:\n  M \\<union> M' \\<turnstile> t_\n  Ana t_ = (K_, T_)\n  ?k2 \\<in> set K_ \\<Longrightarrow> M \\<union> M' \\<turnstile> ?k2\n  t\\<^sub>i_ \\<in> set T_\n  (\\<And>t'.\n      t' \\<in> M' \\<Longrightarrow> intruder_deduct M t') \\<Longrightarrow>\n  intruder_deduct M t_\n  \\<lbrakk>?k2 \\<in> set K_;\n   \\<And>t'. t' \\<in> M' \\<Longrightarrow> intruder_deduct M t'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M ?k2\n  ?t'2 \\<in> M' \\<Longrightarrow> intruder_deduct M ?t'2\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M \\<union> M';\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> M' \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<And>t'.\n               t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> M' \\<turnstile> t;\n        (\\<And>t'.\n            t' \\<in> M' \\<Longrightarrow>\n            M \\<turnstile> t') \\<Longrightarrow>\n        M \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> M' \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<And>t'.\n               t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  M \\<union> M' \\<turnstile> t_\n  Ana t_ = (K_, T_)\n  ?k2 \\<in> set K_ \\<Longrightarrow> M \\<union> M' \\<turnstile> ?k2\n  t\\<^sub>i_ \\<in> set T_\n  (\\<And>t'.\n      t' \\<in> M' \\<Longrightarrow> intruder_deduct M t') \\<Longrightarrow>\n  intruder_deduct M t_\n  \\<lbrakk>?k2 \\<in> set K_;\n   \\<And>t'. t' \\<in> M' \\<Longrightarrow> intruder_deduct M t'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M ?k2\n  ?t'2 \\<in> M' \\<Longrightarrow> intruder_deduct M ?t'2\n\ngoal (1 subgoal):\n 1. intruder_deduct M t\\<^sub>i_", "using intruder_deduct.Decompose"], ["proof (prove)\nusing this:\n  M \\<union> M' \\<turnstile> t_\n  Ana t_ = (K_, T_)\n  ?k2 \\<in> set K_ \\<Longrightarrow> M \\<union> M' \\<turnstile> ?k2\n  t\\<^sub>i_ \\<in> set T_\n  (\\<And>t'.\n      t' \\<in> M' \\<Longrightarrow> intruder_deduct M t') \\<Longrightarrow>\n  intruder_deduct M t_\n  \\<lbrakk>?k2 \\<in> set K_;\n   \\<And>t'. t' \\<in> M' \\<Longrightarrow> intruder_deduct M t'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M ?k2\n  ?t'2 \\<in> M' \\<Longrightarrow> intruder_deduct M ?t'2\n  \\<lbrakk>?M \\<turnstile> ?t; Ana ?t = (?K, ?T);\n   \\<And>k. k \\<in> set ?K \\<Longrightarrow> ?M \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set ?T\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct M t\\<^sub>i_", "by blast"], ["proof (state)\nthis:\n  intruder_deduct M t\\<^sub>i_\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M \\<union> M';\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> M' \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<And>t'.\n               t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile> t'\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> Fun f T", "qed auto"], ["", "lemma ideduct_synth_reduce:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  shows \"\\<lbrakk>M \\<union> M' \\<turnstile>\\<^sub>c t; \\<And>t'. t' \\<in> M' \\<Longrightarrow> M \\<turnstile>\\<^sub>c t'\\<rbrakk> \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<union> M' \\<turnstile>\\<^sub>c t;\n     \\<And>t'.\n        t' \\<in> M' \\<Longrightarrow> M \\<turnstile>\\<^sub>c t'\\<rbrakk>\n    \\<Longrightarrow> M \\<turnstile>\\<^sub>c t", "by (induct rule: intruder_synth_induct) auto"], ["", "lemma ideduct_mono_eq:\n  assumes \"\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile> t\" shows \"M \\<union> N \\<turnstile> t \\<longleftrightarrow> M' \\<union> N \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) = (M' \\<union> N \\<turnstile> t)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<union> N \\<turnstile> t \\<Longrightarrow>\n    M' \\<union> N \\<turnstile> t\n 2. M' \\<union> N \\<turnstile> t \\<Longrightarrow>\n    M \\<union> N \\<turnstile> t", "show \"M \\<union> N \\<turnstile> t \\<Longrightarrow> M' \\<union> N \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<union> N \\<turnstile> t \\<Longrightarrow>\n    M' \\<union> N \\<turnstile> t", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<union> N \\<Longrightarrow>\n       intruder_deduct (M' \\<union> N) t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "case (Axiom t)"], ["proof (state)\nthis:\n  t \\<in> M \\<union> N\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<union> N \\<Longrightarrow>\n       intruder_deduct (M' \\<union> N) t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> M \\<union> N\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) t", "proof (cases \"t \\<in> M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>t \\<in> M \\<union> N; t \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\n 2. \\<lbrakk>t \\<in> M \\<union> N; t \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t", "case True"], ["proof (state)\nthis:\n  t \\<in> M\n\ngoal (2 subgoals):\n 1. \\<lbrakk>t \\<in> M \\<union> N; t \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\n 2. \\<lbrakk>t \\<in> M \\<union> N; t \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t", "hence \"M \\<turnstile> t\""], ["proof (prove)\nusing this:\n  t \\<in> M\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t", "using intruder_deduct.Axiom"], ["proof (prove)\nusing this:\n  t \\<in> M\n  ?t \\<in> ?M \\<Longrightarrow> ?M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t", "by metis"], ["proof (state)\nthis:\n  M \\<turnstile> t\n\ngoal (2 subgoals):\n 1. \\<lbrakk>t \\<in> M \\<union> N; t \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\n 2. \\<lbrakk>t \\<in> M \\<union> N; t \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t", "thus ?thesis"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) t", "using assms ideduct_mono[of M' t \"M' \\<union> N\"]"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  \\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile> t)\n  \\<lbrakk>M' \\<turnstile> t; M' \\<subseteq> M' \\<union> N\\<rbrakk>\n  \\<Longrightarrow> M' \\<union> N \\<turnstile> t\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) t", "by simp"], ["proof (state)\nthis:\n  intruder_deduct (M' \\<union> N) t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<in> M \\<union> N; t \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M' \\<union> N) t", "qed auto"], ["proof (state)\nthis:\n  intruder_deduct (M' \\<union> N) t\n\ngoal (2 subgoals):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) (Fun f T)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) (Fun f T)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "case (Compose T f)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow> intruder_deduct (M' \\<union> N) ?t2\n\ngoal (2 subgoals):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) (Fun f T)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow> intruder_deduct (M' \\<union> N) ?t2\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) (Fun f T)", "using intruder_deduct.Compose"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<union> N \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow> intruder_deduct (M' \\<union> N) ?t2\n  \\<lbrakk>length ?T = arity ?f; public ?f;\n   \\<And>t. t \\<in> set ?T \\<Longrightarrow> ?M \\<turnstile> t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> Fun ?f ?T\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) (Fun f T)", "by auto"], ["proof (state)\nthis:\n  intruder_deduct (M' \\<union> N) (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "case (Decompose t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M \\<union> N \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct (M' \\<union> N) t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct (M' \\<union> N) ?k2\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<union> N \\<turnstile> t;\n        intruder_deduct (M' \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M' \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M' \\<union> N) t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  M \\<union> N \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct (M' \\<union> N) t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct (M' \\<union> N) ?k2\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) t\\<^sub>i", "using intruder_deduct.Decompose[of \"M' \\<union> N\" t K T]"], ["proof (prove)\nusing this:\n  M \\<union> N \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct (M' \\<union> N) t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct (M' \\<union> N) ?k2\n  \\<lbrakk>M' \\<union> N \\<turnstile> t; Ana t = (K, T);\n   \\<And>k. k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set T\\<rbrakk>\n  \\<Longrightarrow> M' \\<union> N \\<turnstile> ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct (M' \\<union> N) t\\<^sub>i", "by auto"], ["proof (state)\nthis:\n  intruder_deduct (M' \\<union> N) t\\<^sub>i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  M \\<union> N \\<turnstile> t \\<Longrightarrow> M' \\<union> N \\<turnstile> t\n\ngoal (1 subgoal):\n 1. M' \\<union> N \\<turnstile> t \\<Longrightarrow>\n    M \\<union> N \\<turnstile> t", "show \"M' \\<union> N \\<turnstile> t \\<Longrightarrow> M \\<union> N \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<union> N \\<turnstile> t \\<Longrightarrow>\n    M \\<union> N \\<turnstile> t", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M' \\<union> N \\<Longrightarrow>\n       intruder_deduct (M \\<union> N) t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "case (Axiom t)"], ["proof (state)\nthis:\n  t \\<in> M' \\<union> N\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M' \\<union> N \\<Longrightarrow>\n       intruder_deduct (M \\<union> N) t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> M' \\<union> N\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) t", "proof (cases \"t \\<in> M'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>t \\<in> M' \\<union> N; t \\<in> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t\n 2. \\<lbrakk>t \\<in> M' \\<union> N; t \\<notin> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t", "case True"], ["proof (state)\nthis:\n  t \\<in> M'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>t \\<in> M' \\<union> N; t \\<in> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t\n 2. \\<lbrakk>t \\<in> M' \\<union> N; t \\<notin> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t", "hence \"M' \\<turnstile> t\""], ["proof (prove)\nusing this:\n  t \\<in> M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t", "using intruder_deduct.Axiom"], ["proof (prove)\nusing this:\n  t \\<in> M'\n  ?t \\<in> ?M \\<Longrightarrow> ?M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t", "by metis"], ["proof (state)\nthis:\n  M' \\<turnstile> t\n\ngoal (2 subgoals):\n 1. \\<lbrakk>t \\<in> M' \\<union> N; t \\<in> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t\n 2. \\<lbrakk>t \\<in> M' \\<union> N; t \\<notin> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t", "thus ?thesis"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) t", "using assms ideduct_mono[of M t \"M \\<union> N\"]"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  \\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile> t)\n  \\<lbrakk>M \\<turnstile> t; M \\<subseteq> M \\<union> N\\<rbrakk>\n  \\<Longrightarrow> M \\<union> N \\<turnstile> t\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) t", "by simp"], ["proof (state)\nthis:\n  intruder_deduct (M \\<union> N) t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<in> M' \\<union> N; t \\<notin> M'\\<rbrakk>\n    \\<Longrightarrow> intruder_deduct (M \\<union> N) t", "qed auto"], ["proof (state)\nthis:\n  intruder_deduct (M \\<union> N) t\n\ngoal (2 subgoals):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) (Fun f T)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) (Fun f T)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "case (Compose T f)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow> intruder_deduct (M \\<union> N) ?t2\n\ngoal (2 subgoals):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<union> N) t\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) (Fun f T)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow> intruder_deduct (M \\<union> N) ?t2\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) (Fun f T)", "using intruder_deduct.Compose"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<union> N \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow> intruder_deduct (M \\<union> N) ?t2\n  \\<lbrakk>length ?T = arity ?f; public ?f;\n   \\<And>t. t \\<in> set ?T \\<Longrightarrow> ?M \\<turnstile> t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> Fun ?f ?T\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) (Fun f T)", "by auto"], ["proof (state)\nthis:\n  intruder_deduct (M \\<union> N) (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "case (Decompose t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M' \\<union> N \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct (M \\<union> N) t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) ?k2\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M' \\<union> N \\<turnstile> t;\n        intruder_deduct (M \\<union> N) t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct (M \\<union> N) t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  M' \\<union> N \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct (M \\<union> N) t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) ?k2\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) t\\<^sub>i", "using intruder_deduct.Decompose[of \"M \\<union> N\" t K T]"], ["proof (prove)\nusing this:\n  M' \\<union> N \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<union> N \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct (M \\<union> N) t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct (M \\<union> N) ?k2\n  \\<lbrakk>M \\<union> N \\<turnstile> t; Ana t = (K, T);\n   \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<union> N \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set T\\<rbrakk>\n  \\<Longrightarrow> M \\<union> N \\<turnstile> ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<union> N) t\\<^sub>i", "by auto"], ["proof (state)\nthis:\n  intruder_deduct (M \\<union> N) t\\<^sub>i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  M' \\<union> N \\<turnstile> t \\<Longrightarrow> M \\<union> N \\<turnstile> t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma deduct_synth_subterm:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\" \"s \\<in> subterms t\" \"\\<forall>m \\<in> M. \\<forall>s \\<in> subterms m. M \\<turnstile>\\<^sub>c s\"\n  shows \"M \\<turnstile>\\<^sub>c s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c s", "using assms"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t\n  s \\<sqsubseteq> t\n  \\<forall>m\\<in>M. \\<forall>s\\<in>subterms m. M \\<turnstile>\\<^sub>c s\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c s", "by (induct t rule: intruder_synth.induct) auto"], ["", "lemma deduct_if_synth[intro, dest]: \"M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t", "by (induct rule: intruder_synth.induct) auto"], ["", "private"], ["", "lemma ideduct_ik_eq: assumes \"\\<forall>t \\<in> M. M' \\<turnstile> t\" shows \"M' \\<turnstile> t \\<longleftrightarrow> M' \\<union> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (M' \\<turnstile> t) = (M' \\<union> M \\<turnstile> t)", "by (meson assms ideduct_mono ideduct_reduce sup_ge1)"], ["", "private"], ["", "lemma synth_if_deduct_empty: \"{} \\<turnstile> t \\<Longrightarrow> {} \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {} \\<turnstile> t \\<Longrightarrow> {} \\<turnstile>\\<^sub>c t", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> {} \\<Longrightarrow> intruder_synth {} t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> {} \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> intruder_synth {} t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>{} \\<turnstile> t; intruder_synth {} t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> {} \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth {} k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} t\\<^sub>i", "case (Decompose t K M m)"], ["proof (state)\nthis:\n  {} \\<turnstile> t\n  Ana t = (K, M)\n  ?k2 \\<in> set K \\<Longrightarrow> {} \\<turnstile> ?k2\n  m \\<in> set M\n  intruder_synth {} t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth {} ?k2\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> {} \\<Longrightarrow> intruder_synth {} t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> {} \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> intruder_synth {} t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>{} \\<turnstile> t; intruder_synth {} t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> {} \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth {} k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} t\\<^sub>i", "then"], ["proof (chain)\npicking this:\n  {} \\<turnstile> t\n  Ana t = (K, M)\n  ?k2 \\<in> set K \\<Longrightarrow> {} \\<turnstile> ?k2\n  m \\<in> set M\n  intruder_synth {} t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth {} ?k2", "obtain f T where \"t = Fun f T\" \"m \\<in> set T\""], ["proof (prove)\nusing this:\n  {} \\<turnstile> t\n  Ana t = (K, M)\n  ?k2 \\<in> set K \\<Longrightarrow> {} \\<turnstile> ?k2\n  m \\<in> set M\n  intruder_synth {} t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth {} ?k2\n\ngoal (1 subgoal):\n 1. (\\<And>f T.\n        \\<lbrakk>t = Fun f T; m \\<in> set T\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Ana_fun_subterm Ana_var"], ["proof (prove)\nusing this:\n  {} \\<turnstile> t\n  Ana t = (K, M)\n  ?k2 \\<in> set K \\<Longrightarrow> {} \\<turnstile> ?k2\n  m \\<in> set M\n  intruder_synth {} t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth {} ?k2\n  Ana (Fun ?f ?T) = (?K, ?R) \\<Longrightarrow> set ?R \\<subseteq> set ?T\n  Ana (Var ?x) = ([], [])\n\ngoal (1 subgoal):\n 1. (\\<And>f T.\n        \\<lbrakk>t = Fun f T; m \\<in> set T\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases t) fastforce+"], ["proof (state)\nthis:\n  t = Fun f T\n  m \\<in> set T\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> {} \\<Longrightarrow> intruder_synth {} t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> {} \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> intruder_synth {} t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>{} \\<turnstile> t; intruder_synth {} t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> {} \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth {} k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} t\\<^sub>i", "with Decompose.IH(1)"], ["proof (chain)\npicking this:\n  intruder_synth {} t\n  t = Fun f T\n  m \\<in> set T", "show ?case"], ["proof (prove)\nusing this:\n  intruder_synth {} t\n  t = Fun f T\n  m \\<in> set T\n\ngoal (1 subgoal):\n 1. intruder_synth {} m", "by (induction rule: intruder_synth_induct) auto"], ["proof (state)\nthis:\n  intruder_synth {} m\n\ngoal (2 subgoals):\n 1. \\<And>t. t \\<in> {} \\<Longrightarrow> intruder_synth {} t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> {} \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow> intruder_synth {} t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth {} (Fun f T)", "qed auto"], ["", "private"], ["", "lemma ideduct_deduct_synth_mono_eq:\n  assumes \"\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile>\\<^sub>c t\" \"M \\<subseteq> M'\"\n  and \"\\<forall>t. M' \\<union> N \\<turnstile> t \\<longleftrightarrow> M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t\"\n  shows \"M \\<union> N \\<turnstile> t \\<longleftrightarrow> M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) =\n    (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) =\n    (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)", "have \"\\<forall>m \\<in> M'. M \\<turnstile> m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>m\\<in>M'. M \\<turnstile> m", "using assms(1)"], ["proof (prove)\nusing this:\n  \\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)\n\ngoal (1 subgoal):\n 1. \\<forall>m\\<in>M'. M \\<turnstile> m", "by auto"], ["proof (state)\nthis:\n  \\<forall>m\\<in>M'. M \\<turnstile> m\n\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) =\n    (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)", "hence \"\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile> t\""], ["proof (prove)\nusing this:\n  \\<forall>m\\<in>M'. M \\<turnstile> m\n\ngoal (1 subgoal):\n 1. \\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile> t)", "by (metis assms(1,2) deduct_if_synth ideduct_reduce sup.absorb2)"], ["proof (state)\nthis:\n  \\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile> t)\n\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) =\n    (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)", "hence \"\\<forall>t. M' \\<union> N \\<turnstile> t \\<longleftrightarrow> M \\<union> N \\<turnstile> t\""], ["proof (prove)\nusing this:\n  \\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile> t)\n\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M' \\<union> N \\<turnstile> t) = (M \\<union> N \\<turnstile> t)", "by (meson ideduct_mono_eq)"], ["proof (state)\nthis:\n  \\<forall>t. (M' \\<union> N \\<turnstile> t) = (M \\<union> N \\<turnstile> t)\n\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) =\n    (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>t. (M' \\<union> N \\<turnstile> t) = (M \\<union> N \\<turnstile> t)\n\ngoal (1 subgoal):\n 1. (M \\<union> N \\<turnstile> t) =\n    (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)", "by (meson assms(3))"], ["proof (state)\nthis:\n  (M \\<union> N \\<turnstile> t) =\n  (M' \\<union> N \\<union> D \\<turnstile>\\<^sub>c t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ideduct_subst: \"M \\<turnstile> t \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> t \\<cdot> \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<Longrightarrow>\n    M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\n    t \\<cdot> \\<delta>", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (t \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (Fun f T \\<cdot> \\<delta>)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "case (Compose T f)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?t2 \\<cdot> \\<delta>)\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (t \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (Fun f T \\<cdot> \\<delta>)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "hence \"length (map (\\<lambda>t. t \\<cdot> \\<delta>) T) = arity f\" \"\\<And>t. t \\<in> set T \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> t \\<cdot> \\<delta>\""], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?t2 \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) =\n    arity f &&&\n    (\\<And>t.\n        t \\<in> set T \\<Longrightarrow>\n        M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\n        t \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\n  ?t2 \\<cdot> \\<delta>\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (t \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (Fun f T \\<cdot> \\<delta>)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\n  ?t2 \\<cdot> \\<delta>\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n     (Fun f T \\<cdot> \\<delta>)", "using intruder_deduct.Compose[OF _ Compose.hyps(2), of \"map (\\<lambda>t. t \\<cdot> \\<delta>) T\"]"], ["proof (prove)\nusing this:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\n  ?t2 \\<cdot> \\<delta>\n  \\<lbrakk>length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) =\n           arity f;\n   \\<And>t.\n      t \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                   \\<delta>) \\<Longrightarrow>\n      ?M \\<turnstile> t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile>\n                    Fun f\n                     (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n     (Fun f T \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (Fun f T \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "case (Decompose t K M' m')"], ["proof (state)\nthis:\n  M \\<turnstile> t\n  Ana t = (K, M')\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  m' \\<in> set M'\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (t \\<cdot> \\<delta>)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?k2 \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "hence \"Ana (t \\<cdot> \\<delta>) = (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>, M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\"\n        \"\\<And>k. k \\<in> set (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> k\"\n        \"m' \\<cdot> \\<delta> \\<in> set (M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  Ana t = (K, M')\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  m' \\<in> set M'\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (t \\<cdot> \\<delta>)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?k2 \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. Ana (t \\<cdot> \\<delta>) =\n    (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>,\n     M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) &&&\n    (\\<And>k.\n        k \\<in> set (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                     \\<delta>) \\<Longrightarrow>\n        M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> k) &&&\n    m' \\<cdot> \\<delta>\n    \\<in> set (M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)", "using Ana_subst[OF Decompose.hyps(2)]"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  Ana t = (K, M')\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  m' \\<in> set M'\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (t \\<cdot> \\<delta>)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?k2 \\<cdot> \\<delta>)\n  K \\<noteq> [] \\<or> M' \\<noteq> [] \\<Longrightarrow>\n  Ana (t \\<cdot> ?\\<delta>) =\n  (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t ?\\<delta>,\n   M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t ?\\<delta>)\n\ngoal (1 subgoal):\n 1. Ana (t \\<cdot> \\<delta>) =\n    (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>,\n     M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) &&&\n    (\\<And>k.\n        k \\<in> set (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                     \\<delta>) \\<Longrightarrow>\n        M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> k) &&&\n    m' \\<cdot> \\<delta>\n    \\<in> set (M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)", "by fastforce+"], ["proof (state)\nthis:\n  Ana (t \\<cdot> \\<delta>) =\n  (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>,\n   M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n  ?k2\n  \\<in> set (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<delta>) \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> ?k2\n  m' \\<cdot> \\<delta>\n  \\<in> set (M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n         (t \\<cdot> \\<delta>);\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (k \\<cdot> \\<delta>);\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (t\\<^sub>i \\<cdot> \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  Ana (t \\<cdot> \\<delta>) =\n  (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>,\n   M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n  ?k2\n  \\<in> set (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<delta>) \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> ?k2\n  m' \\<cdot> \\<delta>\n  \\<in> set (M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n     (m' \\<cdot> \\<delta>)", "using intruder_deduct.Decompose[OF Decompose.IH(1)]"], ["proof (prove)\nusing this:\n  Ana (t \\<cdot> \\<delta>) =\n  (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>,\n   M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n  ?k2\n  \\<in> set (K \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n             \\<delta>) \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> ?k2\n  m' \\<cdot> \\<delta>\n  \\<in> set (M' \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n  \\<lbrakk>Ana (t \\<cdot> \\<delta>) = (?K, ?T);\n   \\<And>k.\n      k \\<in> set ?K \\<Longrightarrow>\n      M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set ?T\\<rbrakk>\n  \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\n                    ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n     (m' \\<cdot> \\<delta>)", "by metis"], ["proof (state)\nthis:\n  intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (m' \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_deduct (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)", "qed simp"], ["", "lemma ideduct_synth_subst:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\" and \\<delta>::\"('fun,'var) subst\"\n  shows \"M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c t \\<cdot> \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<Longrightarrow>\n    M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c\n    t \\<cdot> \\<delta>", "proof (induction t rule: intruder_synth_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (t \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> intruder_synth\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (Fun f T \\<cdot> \\<delta>)", "case (ComposeC T f)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?t2 \\<cdot> \\<delta>)\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (t \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> intruder_synth\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (Fun f T \\<cdot> \\<delta>)", "hence \"length (map (\\<lambda>t. t \\<cdot> \\<delta>) T) = arity f\" \"\\<And>t. t \\<in> set T \\<Longrightarrow> M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c t \\<cdot> \\<delta>\""], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (?t2 \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) =\n    arity f &&&\n    (\\<And>t.\n        t \\<in> set T \\<Longrightarrow>\n        M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c\n        t \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<delta>\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n            (t \\<cdot> \\<delta>)\\<rbrakk>\n       \\<Longrightarrow> intruder_synth\n                          (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n                          (Fun f T \\<cdot> \\<delta>)", "thus ?case"], ["proof (prove)\nusing this:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<delta>\n\ngoal (1 subgoal):\n 1. intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n     (Fun f T \\<cdot> \\<delta>)", "using intruder_synth.ComposeC[OF _ ComposeC.hyps(2), of \"map (\\<lambda>t. t \\<cdot> \\<delta>) T\"]"], ["proof (prove)\nusing this:\n  length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) = arity f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta> \\<turnstile>\\<^sub>c\n  ?t2 \\<cdot> \\<delta>\n  \\<lbrakk>length (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>) =\n           arity f;\n   \\<And>t.\n      t \\<in> set (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t\n                   \\<delta>) \\<Longrightarrow>\n      ?M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile>\\<^sub>c\n                    Fun f\n                     (T \\<cdot>\\<^sub>l\\<^sub>i\\<^sub>s\\<^sub>t \\<delta>)\n\ngoal (1 subgoal):\n 1. intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n     (Fun f T \\<cdot> \\<delta>)", "by auto"], ["proof (state)\nthis:\n  intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n   (Fun f T \\<cdot> \\<delta>)\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       intruder_synth (M \\<cdot>\\<^sub>s\\<^sub>e\\<^sub>t \\<delta>)\n        (t \\<cdot> \\<delta>)", "qed simp"], ["", "lemma ideduct_vars:\n  assumes \"M \\<turnstile> t\"\n  shows \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "using assms"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\\<rbrakk>\n       \\<Longrightarrow> fv (Fun f T)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           fv k \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> fv t\\<^sub>i\n                         \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "case (Decompose t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n  ?k2 \\<in> set K \\<Longrightarrow>\n  fv ?k2 \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\\<rbrakk>\n       \\<Longrightarrow> fv (Fun f T)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           fv k \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> fv t\\<^sub>i\n                         \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "thus ?case"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n  ?k2 \\<in> set K \\<Longrightarrow>\n  fv ?k2 \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n\ngoal (1 subgoal):\n 1. fv t\\<^sub>i \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "using Ana_vars(2) fv_subset"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n  ?k2 \\<in> set K \\<Longrightarrow>\n  fv ?k2 \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n  Ana ?t = (?K, ?M) \\<Longrightarrow>\n  fv\\<^sub>s\\<^sub>e\\<^sub>t (set ?M) \\<subseteq> fv ?t\n  ?t \\<in> ?M \\<Longrightarrow>\n  fv ?t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t ?M\n\ngoal (1 subgoal):\n 1. fv t\\<^sub>i \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "by blast"], ["proof (state)\nthis:\n  fv t\\<^sub>i \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\\<rbrakk>\n       \\<Longrightarrow> fv (Fun f T)\n                         \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "qed auto"], ["", "lemma ideduct_synth_vars:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\"\n  shows \"fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "using assms"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. fv t \\<subseteq> fv\\<^sub>s\\<^sub>e\\<^sub>t M", "by (induct t rule: intruder_synth_induct) auto"], ["", "lemma ideduct_synth_priv_fun_in_ik:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c t\" \"f \\<in> funs_term t\" \"\\<not>public f\"\n  shows \"f \\<in> \\<Union>(funs_term ` M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> \\<Union> (funs_term ` M)", "using assms"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t\n  f \\<in> funs_term t\n  \\<not> public f\n\ngoal (1 subgoal):\n 1. f \\<in> \\<Union> (funs_term ` M)", "by (induct t rule: intruder_synth_induct) auto"], ["", "lemma ideduct_synth_priv_const_in_ik:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"M \\<turnstile>\\<^sub>c Fun c []\" \"\\<not>public c\"\n  shows \"Fun c [] \\<in> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M", "using intruder_synth.cases[OF assms(1)] assms(2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>t Ma.\n              \\<lbrakk>M = Ma; Fun c [] = t; t \\<in> Ma\\<rbrakk>\n              \\<Longrightarrow> ?P;\n   \\<And>T f Ma.\n      \\<lbrakk>M = Ma; Fun c [] = Fun f T; length T = arity f; public f;\n       \\<And>t.\n          t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  \\<not> public c\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M", "by fast"], ["", "lemma ideduct_synth_ik_replace:\n  fixes M::\"('fun,'var) terms\" and t::\"('fun,'var) term\"\n  assumes \"\\<forall>t \\<in> M. N \\<turnstile>\\<^sub>c t\"\n    and \"M \\<turnstile>\\<^sub>c t\"\n  shows \"N \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. N \\<turnstile>\\<^sub>c t", "using assms(2,1)"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c t\n  \\<forall>t\\<in>M. N \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. N \\<turnstile>\\<^sub>c t", "by (induct t rule: intruder_synth.induct) auto"], ["", "end"], ["", "subsection \\<open>Lemmata: Analyzed Intruder Knowledge Closure\\<close>"], ["", "lemma deducts_eq_if_analyzed: \"analyzed M \\<Longrightarrow> M \\<turnstile> t \\<longleftrightarrow> M \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. analyzed M \\<Longrightarrow>\n    (M \\<turnstile> t) = (M \\<turnstile>\\<^sub>c t)", "unfolding analyzed_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M \\<turnstile> t) = (M \\<turnstile>\\<^sub>c t) \\<Longrightarrow>\n    (M \\<turnstile> t) = (M \\<turnstile>\\<^sub>c t)", "by auto"], ["", "lemma closure_is_superset: \"decomp_closure M M' \\<Longrightarrow> M \\<subseteq> M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decomp_closure M M' \\<Longrightarrow> M \\<subseteq> M'", "unfolding decomp_closure_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')) =\n       (t \\<in> M') \\<Longrightarrow>\n    M \\<subseteq> M'", "by force"], ["", "lemma deduct_if_closure_deduct: \"\\<lbrakk>M' \\<turnstile> t; decomp_closure M M'\\<rbrakk> \\<Longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M' \\<turnstile> t; decomp_closure M M'\\<rbrakk>\n    \\<Longrightarrow> M \\<turnstile> t", "proof (induction t rule: intruder_deduct.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> M \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\\<^sub>i", "case (Decompose M' t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  decomp_closure M M' \\<Longrightarrow> intruder_deduct M t\n  \\<lbrakk>?k2 \\<in> set K; decomp_closure M M'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M ?k2\n  decomp_closure M M'\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> M \\<turnstile> t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  decomp_closure M M' \\<Longrightarrow> intruder_deduct M t\n  \\<lbrakk>?k2 \\<in> set K; decomp_closure M M'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M ?k2\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. intruder_deduct M t\\<^sub>i", "using intruder_deduct.Decompose[OF _ \\<open>Ana t = (K,T)\\<close> _ \\<open>t\\<^sub>i \\<in> set T\\<close>]"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  decomp_closure M M' \\<Longrightarrow> intruder_deduct M t\n  \\<lbrakk>?k2 \\<in> set K; decomp_closure M M'\\<rbrakk>\n  \\<Longrightarrow> intruder_deduct M ?k2\n  decomp_closure M M'\n  \\<lbrakk>?M \\<turnstile> t;\n   \\<And>k. k \\<in> set K \\<Longrightarrow> ?M \\<turnstile> k\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct M t\\<^sub>i", "by simp"], ["proof (state)\nthis:\n  intruder_deduct M t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> M \\<turnstile> t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> M \\<turnstile> Fun f T", "qed (auto simp add: decomp_closure_def)"], ["", "lemma deduct_if_closure_synth: \"\\<lbrakk>decomp_closure M M'; M' \\<turnstile>\\<^sub>c t\\<rbrakk> \\<Longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>decomp_closure M M'; M' \\<turnstile>\\<^sub>c t\\<rbrakk>\n    \\<Longrightarrow> M \\<turnstile> t", "using deduct_if_closure_deduct"], ["proof (prove)\nusing this:\n  \\<lbrakk>?M' \\<turnstile> ?t; decomp_closure ?M ?M'\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>decomp_closure M M'; M' \\<turnstile>\\<^sub>c t\\<rbrakk>\n    \\<Longrightarrow> M \\<turnstile> t", "by blast"], ["", "lemma decomp_closure_subterms_composable:\n  assumes \"decomp_closure M M'\"\n  and \"M' \\<turnstile>\\<^sub>c t'\" \"M' \\<turnstile> t\" \"t \\<sqsubseteq> t'\"\n  shows \"M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "using \\<open>M' \\<turnstile>\\<^sub>c t'\\<close> assms"], ["proof (prove)\nusing this:\n  M' \\<turnstile>\\<^sub>c t'\n  decomp_closure M M'\n  M' \\<turnstile>\\<^sub>c t'\n  M' \\<turnstile> t\n  t \\<sqsubseteq> t'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "proof (induction t' rule: intruder_synth.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "case (AxiomC t' M')"], ["proof (state)\nthis:\n  t' \\<in> M'\n  decomp_closure M M'\n  intruder_synth M' t'\n  intruder_deduct M' t\n  t \\<sqsubseteq> t'\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "have \"M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile> t", "using \\<open>M' \\<turnstile> t\\<close> deduct_if_closure_deduct AxiomC.prems(1)"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  \\<lbrakk>?M' \\<turnstile> ?t; decomp_closure ?M ?M'\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> ?t\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. M \\<turnstile> t", "by blast"], ["proof (state)\nthis:\n  M \\<turnstile> t\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "moreover"], ["proof (state)\nthis:\n  M \\<turnstile> t\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "{"], ["proof (state)\nthis:\n  M \\<turnstile> t\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "have \"\\<exists>s \\<in> M. t' \\<sqsubseteq> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s\\<in>M. t' \\<sqsubseteq> s", "using \\<open>t' \\<in> M'\\<close> AxiomC.prems(1)"], ["proof (prove)\nusing this:\n  t' \\<in> M'\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. \\<exists>s\\<in>M. t' \\<sqsubseteq> s", "unfolding decomp_closure_def"], ["proof (prove)\nusing this:\n  t' \\<in> M'\n  \\<forall>t.\n     (M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')) =\n     (t \\<in> M')\n\ngoal (1 subgoal):\n 1. \\<exists>s\\<in>M. t' \\<sqsubseteq> s", "by blast"], ["proof (state)\nthis:\n  \\<exists>s\\<in>M. t' \\<sqsubseteq> s\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "hence \"\\<exists>s \\<in> M. t \\<sqsubseteq> s\""], ["proof (prove)\nusing this:\n  \\<exists>s\\<in>M. t' \\<sqsubseteq> s\n\ngoal (1 subgoal):\n 1. \\<exists>s\\<in>M. t \\<sqsubseteq> s", "using \\<open>t \\<sqsubseteq> t'\\<close> term.order_trans"], ["proof (prove)\nusing this:\n  \\<exists>s\\<in>M. t' \\<sqsubseteq> s\n  t \\<sqsubseteq> t'\n  \\<lbrakk>?x \\<sqsubseteq> ?y; ?y \\<sqsubseteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?x \\<sqsubseteq> ?z\n\ngoal (1 subgoal):\n 1. \\<exists>s\\<in>M. t \\<sqsubseteq> s", "by auto"], ["proof (state)\nthis:\n  \\<exists>s\\<in>M. t \\<sqsubseteq> s\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "}"], ["proof (state)\nthis:\n  \\<exists>s\\<in>M. t \\<sqsubseteq> s\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "ultimately"], ["proof (chain)\npicking this:\n  M \\<turnstile> t\n  \\<exists>s\\<in>M. t \\<sqsubseteq> s", "have \"t \\<in> M'\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  \\<exists>s\\<in>M. t \\<sqsubseteq> s\n\ngoal (1 subgoal):\n 1. t \\<in> M'", "using AxiomC.prems(1)"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  \\<exists>s\\<in>M. t \\<sqsubseteq> s\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. t \\<in> M'", "unfolding decomp_closure_def"], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  \\<exists>s\\<in>M. t \\<sqsubseteq> s\n  \\<forall>t.\n     (M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')) =\n     (t \\<in> M')\n\ngoal (1 subgoal):\n 1. t \\<in> M'", "by blast"], ["proof (state)\nthis:\n  t \\<in> M'\n\ngoal (2 subgoals):\n 1. \\<And>ta Ma.\n       \\<lbrakk>ta \\<in> Ma; decomp_closure M Ma;\n        Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n        t \\<sqsubseteq> ta\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> M'\n\ngoal (1 subgoal):\n 1. intruder_synth M' t", "by simp"], ["proof (state)\nthis:\n  intruder_synth M' t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "case (ComposeC T f M')"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t2\n  \\<lbrakk>?t2 \\<in> set T; decomp_closure M M'; intruder_synth M' ?t2;\n   intruder_deduct M' t; t \\<sqsubseteq> ?t2\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M' t\n  decomp_closure M M'\n  intruder_synth M' (Fun f T)\n  intruder_deduct M' t\n  t \\<sqsubseteq> Fun f T\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "let ?t' = \"Fun f T\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "assume \"t = ?t'\""], ["proof (state)\nthis:\n  t = Fun f T\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "have \"M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "using \\<open>M' \\<turnstile>\\<^sub>c ?t'\\<close> \\<open>t = ?t'\\<close>"], ["proof (prove)\nusing this:\n  M' \\<turnstile>\\<^sub>c Fun f T\n  t = Fun f T\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "by simp"], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "}"], ["proof (state)\nthis:\n  t = Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "moreover"], ["proof (state)\nthis:\n  t = Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "{"], ["proof (state)\nthis:\n  t = Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "assume \"t \\<noteq> ?t'\""], ["proof (state)\nthis:\n  t \\<noteq> Fun f T\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "have \"\\<exists>x \\<in> set T. t \\<sqsubseteq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>set T. t \\<sqsubseteq> x", "using \\<open>t \\<sqsubseteq> ?t'\\<close> \\<open>t \\<noteq> ?t'\\<close>"], ["proof (prove)\nusing this:\n  t \\<sqsubseteq> Fun f T\n  t \\<noteq> Fun f T\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>set T. t \\<sqsubseteq> x", "by simp"], ["proof (state)\nthis:\n  \\<exists>x\\<in>set T. t \\<sqsubseteq> x\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "hence \"M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>set T. t \\<sqsubseteq> x\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "using ComposeC.IH ComposeC.prems(1,3) ComposeC.hyps(3)"], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>set T. t \\<sqsubseteq> x\n  \\<lbrakk>?t2 \\<in> set T; decomp_closure M M'; intruder_synth M' ?t2;\n   intruder_deduct M' t; t \\<sqsubseteq> ?t2\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M' t\n  decomp_closure M M'\n  intruder_deduct M' t\n  ?t2 \\<in> set T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t2\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "by blast"], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "}"], ["proof (state)\nthis:\n  t \\<noteq> Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        \\<And>ta.\n           \\<lbrakk>ta \\<in> set T; decomp_closure M Ma;\n            Ma \\<turnstile>\\<^sub>c ta; Ma \\<turnstile> t;\n            t \\<sqsubseteq> ta\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma; Ma \\<turnstile>\\<^sub>c Fun f T;\n        Ma \\<turnstile> t; t \\<sqsubseteq> Fun f T\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t", "ultimately"], ["proof (chain)\npicking this:\n  t = Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n  t \\<noteq> Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t", "show ?case"], ["proof (prove)\nusing this:\n  t = Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n  t \\<noteq> Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. intruder_synth M' t", "using cases_simp[of \"t = ?t'\" \"M' \\<turnstile>\\<^sub>c t\"]"], ["proof (prove)\nusing this:\n  t = Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n  t \\<noteq> Fun f T \\<Longrightarrow> M' \\<turnstile>\\<^sub>c t\n  ((t = Fun f T \\<longrightarrow> M' \\<turnstile>\\<^sub>c t) \\<and>\n   (t \\<noteq> Fun f T \\<longrightarrow> M' \\<turnstile>\\<^sub>c t)) =\n  (M' \\<turnstile>\\<^sub>c t)\n\ngoal (1 subgoal):\n 1. intruder_synth M' t", "by simp"], ["proof (state)\nthis:\n  intruder_synth M' t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma decomp_closure_analyzed:\n  assumes \"decomp_closure M M'\"\n  shows \"analyzed M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. analyzed M'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. analyzed M'", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. analyzed M'", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. analyzed M'", "assume \"M' \\<turnstile> t\""], ["proof (state)\nthis:\n  M' \\<turnstile> t\n\ngoal (1 subgoal):\n 1. analyzed M'", "have \"M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "using \\<open>M' \\<turnstile> t\\<close> assms"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "proof (induction t rule: intruder_deduct.induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "case (Decompose M' t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  decomp_closure M M' \\<Longrightarrow> intruder_synth M' t\n  \\<lbrakk>?k2 \\<in> set K; decomp_closure M M'\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M' ?k2\n  decomp_closure M M'\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "hence \"M' \\<turnstile> t\\<^sub>i\""], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  decomp_closure M M' \\<Longrightarrow> intruder_synth M' t\n  \\<lbrakk>?k2 \\<in> set K; decomp_closure M M'\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M' ?k2\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t\\<^sub>i", "using Decompose.hyps intruder_deduct.Decompose"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  decomp_closure M M' \\<Longrightarrow> intruder_synth M' t\n  \\<lbrakk>?k2 \\<in> set K; decomp_closure M M'\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M' ?k2\n  decomp_closure M M'\n  M' \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M' \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  \\<lbrakk>?M \\<turnstile> ?t; Ana ?t = (?K, ?T);\n   \\<And>k. k \\<in> set ?K \\<Longrightarrow> ?M \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set ?T\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. M' \\<turnstile> t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  M' \\<turnstile> t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  M' \\<turnstile> t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "have \"t\\<^sub>i \\<sqsubseteq> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<sqsubseteq> t", "using Decompose.hyps(4) Ana_subterm[OF Decompose.hyps(2)]"], ["proof (prove)\nusing this:\n  t\\<^sub>i \\<in> set T\n  set T \\<subset> subterms t\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<sqsubseteq> t", "by blast"], ["proof (state)\nthis:\n  t\\<^sub>i \\<sqsubseteq> t\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  t\\<^sub>i \\<sqsubseteq> t\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "have \"M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "using Decompose.IH(1) Decompose.prems"], ["proof (prove)\nusing this:\n  decomp_closure M M' \\<Longrightarrow> intruder_synth M' t\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t", "by blast"], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t\n\ngoal (3 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T\n 3. \\<And>Ma t K T t\\<^sub>i.\n       \\<lbrakk>Ma \\<turnstile> t;\n        decomp_closure M Ma \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> Ma \\<turnstile> k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c k;\n        t\\<^sub>i \\<in> set T; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<^sub>i", "ultimately"], ["proof (chain)\npicking this:\n  M' \\<turnstile> t\\<^sub>i\n  t\\<^sub>i \\<sqsubseteq> t\n  M' \\<turnstile>\\<^sub>c t", "show \"M' \\<turnstile>\\<^sub>c t\\<^sub>i\""], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\\<^sub>i\n  t\\<^sub>i \\<sqsubseteq> t\n  M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t\\<^sub>i", "using decomp_closure_subterms_composable Decompose.prems"], ["proof (prove)\nusing this:\n  M' \\<turnstile> t\\<^sub>i\n  t\\<^sub>i \\<sqsubseteq> t\n  M' \\<turnstile>\\<^sub>c t\n  \\<lbrakk>decomp_closure ?M ?M'; ?M' \\<turnstile>\\<^sub>c ?t';\n   ?M' \\<turnstile> ?t; ?t \\<sqsubseteq> ?t'\\<rbrakk>\n  \\<Longrightarrow> ?M' \\<turnstile>\\<^sub>c ?t\n  decomp_closure M M'\n\ngoal (1 subgoal):\n 1. M' \\<turnstile>\\<^sub>c t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t Ma.\n       \\<lbrakk>t \\<in> Ma; decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\n 2. \\<And>T f Ma.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> Ma \\<turnstile> t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; decomp_closure M Ma\\<rbrakk>\n           \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t;\n        decomp_closure M Ma\\<rbrakk>\n       \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c Fun f T", "qed auto"], ["proof (state)\nthis:\n  M' \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. analyzed M'", "}"], ["proof (state)\nthis:\n  M' \\<turnstile> ?t4 \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t4\n\ngoal (1 subgoal):\n 1. analyzed M'", "moreover"], ["proof (state)\nthis:\n  M' \\<turnstile> ?t4 \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t4\n\ngoal (1 subgoal):\n 1. analyzed M'", "have \"\\<forall>t. M \\<turnstile>\\<^sub>c t \\<longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t. M \\<turnstile>\\<^sub>c t \\<longrightarrow> M \\<turnstile> t", "by auto"], ["proof (state)\nthis:\n  \\<forall>t. M \\<turnstile>\\<^sub>c t \\<longrightarrow> M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. analyzed M'", "ultimately"], ["proof (chain)\npicking this:\n  M' \\<turnstile> ?t4 \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t4\n  \\<forall>t. M \\<turnstile>\\<^sub>c t \\<longrightarrow> M \\<turnstile> t", "show ?thesis"], ["proof (prove)\nusing this:\n  M' \\<turnstile> ?t4 \\<Longrightarrow> M' \\<turnstile>\\<^sub>c ?t4\n  \\<forall>t. M \\<turnstile>\\<^sub>c t \\<longrightarrow> M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. analyzed M'", "by (auto simp add: decomp_closure_def analyzed_def)"], ["proof (state)\nthis:\n  analyzed M'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma analyzed_if_all_analyzed_in:\n  assumes M: \"\\<forall>t \\<in> M. analyzed_in t M\"\n  shows \"analyzed M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. analyzed M", "proof (unfold analyzed_def, intro allI iffI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t. M \\<turnstile> t \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\n 2. \\<And>t. M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t", "fix t"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t. M \\<turnstile> t \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\n 2. \\<And>t. M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t", "assume t: \"M \\<turnstile> t\""], ["proof (state)\nthis:\n  M \\<turnstile> t\n\ngoal (2 subgoals):\n 1. \\<And>t. M \\<turnstile> t \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\n 2. \\<And>t. M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t", "thus \"M \\<turnstile>\\<^sub>c t\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "case (Decompose t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_synth M t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth M ?k2\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "{"], ["proof (state)\nthis:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_synth M t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth M ?k2\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "assume \"t \\<in> M\""], ["proof (state)\nthis:\n  t \\<in> M\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "hence ?case"], ["proof (prove)\nusing this:\n  t \\<in> M\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "using M Decompose.IH(2) Decompose.hyps(2,4)"], ["proof (prove)\nusing this:\n  t \\<in> M\n  \\<forall>t\\<in>M. analyzed_in t M\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth M ?k2\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "unfolding analyzed_in_def"], ["proof (prove)\nusing this:\n  t \\<in> M\n  \\<forall>t\\<in>M.\n     \\<forall>K R.\n        Ana t = (K, R) \\<and>\n        (\\<forall>k\\<in>set K. M \\<turnstile>\\<^sub>c k) \\<longrightarrow>\n        (\\<forall>r\\<in>set R. M \\<turnstile>\\<^sub>c r)\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_synth M ?k2\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "by fastforce"], ["proof (state)\nthis:\n  intruder_synth M t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "}"], ["proof (state)\nthis:\n  t \\<in> M \\<Longrightarrow> intruder_synth M t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  t \\<in> M \\<Longrightarrow> intruder_synth M t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "{"], ["proof (state)\nthis:\n  t \\<in> M \\<Longrightarrow> intruder_synth M t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "fix f S"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "assume \"t = Fun f S\" \"\\<And>s. s \\<in> set S \\<Longrightarrow> M \\<turnstile>\\<^sub>c s\""], ["proof (state)\nthis:\n  t = Fun f S\n  ?s2 \\<in> set S \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?s2\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "hence ?case"], ["proof (prove)\nusing this:\n  t = Fun f S\n  ?s2 \\<in> set S \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?s2\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "using Ana_fun_subterm[of f S] Decompose.hyps(2,4)"], ["proof (prove)\nusing this:\n  t = Fun f S\n  ?s2 \\<in> set S \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?s2\n  Ana (Fun f S) = (?K, ?R) \\<Longrightarrow> set ?R \\<subseteq> set S\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  intruder_synth M t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "}"], ["proof (state)\nthis:\n  \\<lbrakk>t = Fun ?f4 ?S4;\n   \\<And>s.\n      s \\<in> set ?S4 \\<Longrightarrow> M \\<turnstile>\\<^sub>c s\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M t\\<^sub>i\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t; intruder_synth M t; Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_synth M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M t\\<^sub>i", "ultimately"], ["proof (chain)\npicking this:\n  t \\<in> M \\<Longrightarrow> intruder_synth M t\\<^sub>i\n  \\<lbrakk>t = Fun ?f4 ?S4;\n   \\<And>s.\n      s \\<in> set ?S4 \\<Longrightarrow> M \\<turnstile>\\<^sub>c s\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M t\\<^sub>i", "show ?case"], ["proof (prove)\nusing this:\n  t \\<in> M \\<Longrightarrow> intruder_synth M t\\<^sub>i\n  \\<lbrakk>t = Fun ?f4 ?S4;\n   \\<And>s.\n      s \\<in> set ?S4 \\<Longrightarrow> M \\<turnstile>\\<^sub>c s\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "using intruder_synth.cases[OF Decompose.IH(1), of ?case]"], ["proof (prove)\nusing this:\n  t \\<in> M \\<Longrightarrow> intruder_synth M t\\<^sub>i\n  \\<lbrakk>t = Fun ?f4 ?S4;\n   \\<And>s.\n      s \\<in> set ?S4 \\<Longrightarrow> M \\<turnstile>\\<^sub>c s\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M t\\<^sub>i\n  \\<lbrakk>\\<And>t Ma.\n              \\<lbrakk>M = Ma; t = t; t \\<in> Ma\\<rbrakk>\n              \\<Longrightarrow> intruder_synth M t\\<^sub>i;\n   \\<And>T f Ma.\n      \\<lbrakk>M = Ma; t = Fun f T; length T = arity f; public f;\n       \\<And>t.\n          t \\<in> set T \\<Longrightarrow> Ma \\<turnstile>\\<^sub>c t\\<rbrakk>\n      \\<Longrightarrow> intruder_synth M t\\<^sub>i\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_synth M t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  intruder_synth M t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_synth M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)", "qed simp_all"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t\n\ngoal (1 subgoal):\n 1. \\<And>t. M \\<turnstile>\\<^sub>c t \\<Longrightarrow> M \\<turnstile> t", "qed auto"], ["", "lemma analyzed_is_all_analyzed_in:\n  \"(\\<forall>t \\<in> M. analyzed_in t M) \\<longleftrightarrow> analyzed M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>t\\<in>M. analyzed_in t M) = analyzed M", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>t\\<in>M. analyzed_in t M \\<Longrightarrow> analyzed M\n 2. analyzed M \\<Longrightarrow> \\<forall>t\\<in>M. analyzed_in t M", "show \"analyzed M \\<Longrightarrow> \\<forall>t \\<in> M. analyzed_in t M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. analyzed M \\<Longrightarrow> \\<forall>t\\<in>M. analyzed_in t M", "unfolding analyzed_in_def analyzed_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M \\<turnstile> t) = (M \\<turnstile>\\<^sub>c t) \\<Longrightarrow>\n    \\<forall>t\\<in>M.\n       \\<forall>K R.\n          Ana t = (K, R) \\<and>\n          (\\<forall>k\\<in>set K. M \\<turnstile>\\<^sub>c k) \\<longrightarrow>\n          (\\<forall>r\\<in>set R. M \\<turnstile>\\<^sub>c r)", "by (auto intro: intruder_deduct.Decompose[OF intruder_deduct.Axiom])"], ["proof (state)\nthis:\n  analyzed M \\<Longrightarrow> \\<forall>t\\<in>M. analyzed_in t M\n\ngoal (1 subgoal):\n 1. \\<forall>t\\<in>M. analyzed_in t M \\<Longrightarrow> analyzed M", "qed (rule analyzed_if_all_analyzed_in)"], ["", "lemma ik_has_synth_ik_closure:\n  fixes M :: \"('fun,'var) terms\"\n  shows \"\\<exists>M'. (\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> M' \\<turnstile>\\<^sub>c t) \\<and> decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "let ?M' = \"{t. M \\<turnstile> t \\<and> (\\<exists>t' \\<in> M. t \\<sqsubseteq> t')}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "have M'_closes: \"decomp_closure M ?M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decomp_closure M\n     {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "unfolding decomp_closure_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')) =\n       (t \\<in> {t. M \\<turnstile> t \\<and>\n                    (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')})", "by simp"], ["proof (state)\nthis:\n  decomp_closure M\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "hence \"M \\<subseteq> ?M'\""], ["proof (prove)\nusing this:\n  decomp_closure M\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. M \\<subseteq> {t. M \\<turnstile> t \\<and>\n                      (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "using closure_is_superset"], ["proof (prove)\nusing this:\n  decomp_closure M\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n  decomp_closure ?M ?M' \\<Longrightarrow> ?M \\<subseteq> ?M'\n\ngoal (1 subgoal):\n 1. M \\<subseteq> {t. M \\<turnstile> t \\<and>\n                      (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "by simp"], ["proof (state)\nthis:\n  M \\<subseteq> {t. M \\<turnstile> t \\<and>\n                    (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "have \"\\<forall>t. ?M' \\<turnstile>\\<^sub>c t \\<longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       {t. M \\<turnstile> t \\<and>\n           (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n       t \\<longrightarrow>\n       M \\<turnstile> t", "using deduct_if_closure_synth[OF M'_closes]"], ["proof (prove)\nusing this:\n  {t. M \\<turnstile> t \\<and>\n      (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n  ?t \\<Longrightarrow>\n  M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. \\<forall>t.\n       {t. M \\<turnstile> t \\<and>\n           (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n       t \\<longrightarrow>\n       M \\<turnstile> t", "by blast"], ["proof (state)\nthis:\n  \\<forall>t.\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n     t \\<longrightarrow>\n     M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "moreover"], ["proof (state)\nthis:\n  \\<forall>t.\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n     t \\<longrightarrow>\n     M \\<turnstile> t\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "have \"\\<forall>t. M \\<turnstile> t \\<longrightarrow> ?M' \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       M \\<turnstile> t \\<longrightarrow>\n       {t. M \\<turnstile> t \\<and>\n           (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n       t", "using ideduct_mono[OF _ \\<open>M \\<subseteq> ?M'\\<close>]"], ["proof (prove)\nusing this:\n  M \\<turnstile> ?t \\<Longrightarrow>\n  {t. M \\<turnstile> t \\<and>\n      (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n  ?t\n\ngoal (1 subgoal):\n 1. \\<forall>t.\n       M \\<turnstile> t \\<longrightarrow>\n       {t. M \\<turnstile> t \\<and>\n           (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n       t", "by simp"], ["proof (state)\nthis:\n  \\<forall>t.\n     M \\<turnstile> t \\<longrightarrow>\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n     t\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "moreover"], ["proof (state)\nthis:\n  \\<forall>t.\n     M \\<turnstile> t \\<longrightarrow>\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n     t\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "have \"analyzed ?M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. analyzed\n     {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "using decomp_closure_analyzed[OF M'_closes]"], ["proof (prove)\nusing this:\n  analyzed\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. analyzed\n     {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "."], ["proof (state)\nthis:\n  analyzed\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>t.\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n     t \\<longrightarrow>\n     M \\<turnstile> t\n  \\<forall>t.\n     M \\<turnstile> t \\<longrightarrow>\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n     t\n  analyzed\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "have \"\\<forall>t. M \\<turnstile> t \\<longleftrightarrow> ?M' \\<turnstile>\\<^sub>c t\""], ["proof (prove)\nusing this:\n  \\<forall>t.\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n     t \\<longrightarrow>\n     M \\<turnstile> t\n  \\<forall>t.\n     M \\<turnstile> t \\<longrightarrow>\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n     t\n  analyzed\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M \\<turnstile> t) =\n       ({t. M \\<turnstile> t \\<and>\n            (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n        t)", "unfolding analyzed_def"], ["proof (prove)\nusing this:\n  \\<forall>t.\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n     t \\<longrightarrow>\n     M \\<turnstile> t\n  \\<forall>t.\n     M \\<turnstile> t \\<longrightarrow>\n     {t. M \\<turnstile> t \\<and>\n         (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n     t\n  \\<forall>t.\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\n      t) =\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n      t)\n\ngoal (1 subgoal):\n 1. \\<forall>t.\n       (M \\<turnstile> t) =\n       ({t. M \\<turnstile> t \\<and>\n            (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n        t)", "by blast"], ["proof (state)\nthis:\n  \\<forall>t.\n     (M \\<turnstile> t) =\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n      t)\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "moreover"], ["proof (state)\nthis:\n  \\<forall>t.\n     (M \\<turnstile> t) =\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n      t)\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "have \"finite M \\<longrightarrow> finite ?M'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite M \\<longrightarrow>\n    finite\n     {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "by auto"], ["proof (state)\nthis:\n  finite M \\<longrightarrow>\n  finite\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>t.\n     (M \\<turnstile> t) =\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n      t)\n  finite M \\<longrightarrow>\n  finite\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>t.\n     (M \\<turnstile> t) =\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n      t)\n  finite M \\<longrightarrow>\n  finite\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "using M'_closes"], ["proof (prove)\nusing this:\n  \\<forall>t.\n     (M \\<turnstile> t) =\n     ({t. M \\<turnstile> t \\<and>\n          (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')} \\<turnstile>\\<^sub>c\n      t)\n  finite M \\<longrightarrow>\n  finite\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n  decomp_closure M\n   {t. M \\<turnstile> t \\<and> (\\<exists>t'\\<in>M. t \\<sqsubseteq> t')}\n\ngoal (1 subgoal):\n 1. \\<exists>M'.\n       (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n       decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')", "by blast"], ["proof (state)\nthis:\n  \\<exists>M'.\n     (\\<forall>t. (M \\<turnstile> t) = (M' \\<turnstile>\\<^sub>c t)) \\<and>\n     decomp_closure M M' \\<and> (finite M \\<longrightarrow> finite M')\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Intruder Variants: Numbered and Composition-Restricted Intruder Deduction Relations\\<close>"], ["", "text \\<open>\n  A variant of the intruder relation which restricts composition to only those terms that satisfy\n  a given predicate Q.\n\\<close>"], ["", "inductive intruder_deduct_restricted::\n  \"('fun,'var) terms \\<Rightarrow> (('fun,'var) term \\<Rightarrow> bool) \\<Rightarrow> ('fun,'var) term \\<Rightarrow> bool\"\n  (\"\\<langle>_;_\\<rangle> \\<turnstile>\\<^sub>r _\" 50)\nwhere\n  AxiomR[simp]:   \"t \\<in> M \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t\"\n| ComposeR[simp]: \"\\<lbrakk>length T = arity f; public f; \\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t; Q (Fun f T)\\<rbrakk>\n                    \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r Fun f T\"\n| DecomposeR:     \"\\<lbrakk>\\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r k; t\\<^sub>i \\<in> set T\\<rbrakk>\n                    \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\""], ["", "text \\<open>\n  A variant of the intruder relation equipped with a number representing the heigth of the\n  derivation tree (i.e., \\<open>\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<close> iff k is the maximum number of applications of the compose\n  an decompose rules in any path of the derivation tree for \\<open>M \\<turnstile> t\\<close>).\n\\<close>"], ["", "inductive intruder_deduct_num::\n  \"('fun,'var) terms \\<Rightarrow> nat \\<Rightarrow> ('fun,'var) term \\<Rightarrow> bool\"\n  (\"\\<langle>_; _\\<rangle> \\<turnstile>\\<^sub>n _\" 50)\nwhere\n  AxiomN[simp]:   \"t \\<in> M \\<Longrightarrow> \\<langle>M; 0\\<rangle> \\<turnstile>\\<^sub>n t\"\n| ComposeN[simp]: \"\\<lbrakk>length T = arity f; public f; \\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n                    \\<Longrightarrow> \\<langle>M; Suc (Max (insert 0 (steps ` set T)))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\"\n| DecomposeN:     \"\\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k; t\\<^sub>i \\<in> set T\\<rbrakk>\n                    \\<Longrightarrow> \\<langle>M; Suc (Max (insert n (steps ` set K)))\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\""], ["", "lemma intruder_deduct_restricted_induct[consumes 1, case_names AxiomR ComposeR DecomposeR]:\n  assumes \"\\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M Q t\"\n          \"\\<And>T f. \\<lbrakk>length T = arity f; public f;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t;\n                  \\<And>t. t \\<in> set T \\<Longrightarrow> P M Q t; Q (Fun f T)\n                  \\<rbrakk> \\<Longrightarrow> P M Q (Fun f T)\"\n          \"\\<And>t K T t\\<^sub>i. \\<lbrakk>\\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r t; P M Q t; Ana t = (K, T); \\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; Q\\<rangle> \\<turnstile>\\<^sub>r k;\n                       \\<And>k. k \\<in> set K \\<Longrightarrow> P M Q k; t\\<^sub>i \\<in> set T\\<rbrakk> \\<Longrightarrow> P M Q t\\<^sub>i\"\n  shows \"P M Q t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P M Q t", "using assms"], ["proof (prove)\nusing this:\n  \\<langle>M;Q\\<rangle> \\<turnstile>\\<^sub>r t\n  ?t2 \\<in> M \\<Longrightarrow> P M Q ?t2\n  \\<lbrakk>length ?T2 = arity ?f2; public ?f2;\n   \\<And>t.\n      t \\<in> set ?T2 \\<Longrightarrow>\n      \\<langle>M;Q\\<rangle> \\<turnstile>\\<^sub>r t;\n   \\<And>t. t \\<in> set ?T2 \\<Longrightarrow> P M Q t;\n   Q (Fun ?f2 ?T2)\\<rbrakk>\n  \\<Longrightarrow> P M Q (Fun ?f2 ?T2)\n  \\<lbrakk>\\<langle>M;Q\\<rangle> \\<turnstile>\\<^sub>r ?t2; P M Q ?t2;\n   Ana ?t2 = (?K2, ?T2);\n   \\<And>k.\n      k \\<in> set ?K2 \\<Longrightarrow>\n      \\<langle>M;Q\\<rangle> \\<turnstile>\\<^sub>r k;\n   \\<And>k. k \\<in> set ?K2 \\<Longrightarrow> P M Q k;\n   ?t\\<^sub>i2 \\<in> set ?T2\\<rbrakk>\n  \\<Longrightarrow> P M Q ?t\\<^sub>i2\n\ngoal (1 subgoal):\n 1. P M Q t", "by (induct t rule: intruder_deduct_restricted.induct) blast+"], ["", "lemma intruder_deduct_num_induct[consumes 1, case_names AxiomN ComposeN DecomposeN]:\n  assumes \"\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\" \"\\<And>t. t \\<in> M \\<Longrightarrow> P M 0 t\"\n          \"\\<And>T f steps.\n              \\<lbrakk>length T = arity f; public f;\n               \\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n               \\<And>t. t \\<in> set T \\<Longrightarrow> P M (steps t) t\\<rbrakk>\n              \\<Longrightarrow> P M (Suc (Max (insert 0 (steps ` set T)))) (Fun f T)\"\n          \"\\<And>t K T t\\<^sub>i steps n.\n              \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; P M n t; Ana t = (K, T);\n               \\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n               t\\<^sub>i \\<in> set T; \\<And>k. k \\<in> set K \\<Longrightarrow> P M (steps k) k\\<rbrakk>\n              \\<Longrightarrow> P M (Suc (Max (insert n (steps ` set K)))) t\\<^sub>i\"\n  shows \"P M n t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P M n t", "using assms"], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  ?t2 \\<in> M \\<Longrightarrow> P M 0 ?t2\n  \\<lbrakk>length ?T2 = arity ?f2; public ?f2;\n   \\<And>t.\n      t \\<in> set ?T2 \\<Longrightarrow>\n      \\<langle>M; ?steps2 t\\<rangle> \\<turnstile>\\<^sub>n t;\n   \\<And>t. t \\<in> set ?T2 \\<Longrightarrow> P M (?steps2 t) t\\<rbrakk>\n  \\<Longrightarrow> P M (Suc (Max (insert 0 (?steps2 ` set ?T2))))\n                     (Fun ?f2 ?T2)\n  \\<lbrakk>\\<langle>M; ?n2\\<rangle> \\<turnstile>\\<^sub>n ?t2; P M ?n2 ?t2;\n   Ana ?t2 = (?K2, ?T2);\n   \\<And>k.\n      k \\<in> set ?K2 \\<Longrightarrow>\n      \\<langle>M; ?steps2 k\\<rangle> \\<turnstile>\\<^sub>n k;\n   ?t\\<^sub>i2 \\<in> set ?T2;\n   \\<And>k. k \\<in> set ?K2 \\<Longrightarrow> P M (?steps2 k) k\\<rbrakk>\n  \\<Longrightarrow> P M (Suc (Max (insert ?n2 (?steps2 ` set ?K2))))\n                     ?t\\<^sub>i2\n\ngoal (1 subgoal):\n 1. P M n t", "by (induct rule: intruder_deduct_num.induct) blast+"], ["", "lemma ideduct_restricted_mono:\n  \"\\<lbrakk>\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r t; M \\<subseteq> M'\\<rbrakk> \\<Longrightarrow> \\<langle>M'; P\\<rangle> \\<turnstile>\\<^sub>r t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n     M \\<subseteq> M'\\<rbrakk>\n    \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t", "proof (induction rule: intruder_deduct_restricted_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T); M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        M \\<subseteq> M' \\<Longrightarrow>\n        \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "case (DecomposeR t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  M \\<subseteq> M' \\<Longrightarrow>\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  M \\<subseteq> M'\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T); M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        M \\<subseteq> M' \\<Longrightarrow>\n        \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have \"\\<forall>k. k \\<in> set K \\<longrightarrow> \\<langle>M'; P\\<rangle> \\<turnstile>\\<^sub>r k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k.\n       k \\<in> set K \\<longrightarrow>\n       \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k", "using DecomposeR.IH \\<open>M \\<subseteq> M'\\<close>"], ["proof (prove)\nusing this:\n  M \\<subseteq> M' \\<Longrightarrow>\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  M \\<subseteq> M'\n\ngoal (1 subgoal):\n 1. \\<forall>k.\n       k \\<in> set K \\<longrightarrow>\n       \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k", "by simp"], ["proof (state)\nthis:\n  \\<forall>k.\n     k \\<in> set K \\<longrightarrow>\n     \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T); M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        M \\<subseteq> M' \\<Longrightarrow>\n        \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  \\<forall>k.\n     k \\<in> set K \\<longrightarrow>\n     \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T); M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        M \\<subseteq> M' \\<Longrightarrow>\n        \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have \"\\<langle>M'; P\\<rangle> \\<turnstile>\\<^sub>r t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t", "using DecomposeR.IH \\<open>M \\<subseteq> M'\\<close>"], ["proof (prove)\nusing this:\n  M \\<subseteq> M' \\<Longrightarrow>\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  M \\<subseteq> M'\n\ngoal (1 subgoal):\n 1. \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t", "by simp"], ["proof (state)\nthis:\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T); M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        M \\<subseteq> M' \\<Longrightarrow>\n        \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k;\n        t\\<^sub>i \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>k.\n     k \\<in> set K \\<longrightarrow>\n     \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t", "show ?case"], ["proof (prove)\nusing this:\n  \\<forall>k.\n     k \\<in> set K \\<longrightarrow>\n     \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n\ngoal (1 subgoal):\n 1. \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "using DecomposeR\n          intruder_deduct_restricted.DecomposeR[OF _ DecomposeR.hyps(2) _ DecomposeR.hyps(4)]"], ["proof (prove)\nusing this:\n  \\<forall>k.\n     k \\<in> set K \\<longrightarrow>\n     \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r k\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  M \\<subseteq> M' \\<Longrightarrow>\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<lbrakk>?k2 \\<in> set K; M \\<subseteq> M'\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  M \\<subseteq> M'\n  \\<lbrakk>\\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r t;\n   \\<And>k.\n      k \\<in> set K \\<Longrightarrow>\n      \\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r k\\<rbrakk>\n  \\<Longrightarrow> \\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; M \\<subseteq> M'\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T); M \\<subseteq> M'\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M';P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "qed auto"], ["", "subsection \\<open>Lemmata: Intruder Deduction Equivalences\\<close>"], ["", "lemma deduct_if_restricted_deduct: \"\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m \\<Longrightarrow> M \\<turnstile> m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m \\<Longrightarrow>\n    M \\<turnstile> m", "proof (induction m rule: intruder_deduct_restricted_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_deduct M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_deduct M t;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        intruder_deduct M t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_deduct M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct M t\\<^sub>i", "case (DecomposeR t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct M t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct M ?k2\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_deduct M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_deduct M t;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct M (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        intruder_deduct M t; Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> intruder_deduct M k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct M t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct M t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct M ?k2\n\ngoal (1 subgoal):\n 1. intruder_deduct M t\\<^sub>i", "using intruder_deduct.Decompose"], ["proof (prove)\nusing this:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  intruder_deduct M t\n  ?k2 \\<in> set K \\<Longrightarrow> intruder_deduct M ?k2\n  \\<lbrakk>?M \\<turnstile> ?t; Ana ?t = (?K, ?T);\n   \\<And>k. k \\<in> set ?K \\<Longrightarrow> ?M \\<turnstile> k;\n   ?t\\<^sub>i \\<in> set ?T\\<rbrakk>\n  \\<Longrightarrow> ?M \\<turnstile> ?t\\<^sub>i\n\ngoal (1 subgoal):\n 1. intruder_deduct M t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  intruder_deduct M t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_deduct M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> intruder_deduct M t;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> intruder_deduct M (Fun f T)", "qed simp_all"], ["", "lemma restricted_deduct_if_restricted_ik:\n  assumes \"\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\" \"\\<forall>m \\<in> M. P m\"\n  and P: \"\\<forall>t t'. P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\"\n  shows \"P m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P m", "using assms(1)"], ["proof (prove)\nusing this:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal (1 subgoal):\n 1. P m", "proof (induction m rule: intruder_deduct_restricted_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> P t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> P t; P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> P (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t; P t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> P k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> P t\\<^sub>i", "case (DecomposeR t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  P t\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> P t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> P t; P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> P (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t; P t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> P k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> P t\\<^sub>i", "obtain f S where \"t = Fun f S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f S. t = Fun f S \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Ana_var \\<open>t\\<^sub>i \\<in> set T\\<close> \\<open>Ana t = (K, T)\\<close>"], ["proof (prove)\nusing this:\n  Ana (Var ?x) = ([], [])\n  t\\<^sub>i \\<in> set T\n  Ana t = (K, T)\n\ngoal (1 subgoal):\n 1. (\\<And>f S. t = Fun f S \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases t) auto"], ["proof (state)\nthis:\n  t = Fun f S\n\ngoal (3 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> P t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> P t; P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> P (Fun f T)\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t; P t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<And>k. k \\<in> set K \\<Longrightarrow> P k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> P t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  t = Fun f S\n\ngoal (1 subgoal):\n 1. P t\\<^sub>i", "using DecomposeR assms(2) P Ana_subterm"], ["proof (prove)\nusing this:\n  t = Fun f S\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  t\\<^sub>i \\<in> set T\n  P t\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n  \\<forall>m\\<in>M. P m\n  \\<forall>t t'.\n     P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\n  Ana ?t = (?K, ?T) \\<Longrightarrow> set ?T \\<subset> subterms ?t\n\ngoal (1 subgoal):\n 1. P t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  P t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> P t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> P t; P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> P (Fun f T)", "qed (simp_all add: assms(2))"], ["", "lemma deduct_restricted_if_synth:\n  assumes P: \"P m\" \"\\<forall>t t'. P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\"\n  and m: \"M \\<turnstile>\\<^sub>c m\"\n  shows \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "using m P(1)"], ["proof (prove)\nusing this:\n  M \\<turnstile>\\<^sub>c m\n  P m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "proof (induction m rule: intruder_synth_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "case (ComposeC T f)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?t2\n  \\<lbrakk>?t2 \\<in> set T; P ?t2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n  P (Fun f T)\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "hence \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r t\" when t: \"t \\<in> set T\" for t"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?t2\n  \\<lbrakk>?t2 \\<in> set T; P ?t2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n  P (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "using t P(2) subtermeqI''[of _ T f]"], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c ?t2\n  \\<lbrakk>?t2 \\<in> set T; P ?t2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n  P (Fun f T)\n  t \\<in> set T\n  \\<forall>t t'.\n     P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\n  ?t \\<in> set T \\<Longrightarrow> ?t \\<sqsubseteq> Fun f T\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "by fastforce"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T; P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "thus ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "using intruder_deduct_restricted.ComposeR[OF ComposeC.hyps(1,2)] ComposeC.prems(1)"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n  \\<lbrakk>\\<And>t.\n              t \\<in> set T \\<Longrightarrow>\n              \\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r t;\n   ?Q (Fun f T)\\<rbrakk>\n  \\<Longrightarrow> \\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n  P (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "by metis"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "qed simp"], ["", "lemma deduct_zero_in_ik:\n  assumes \"\\<langle>M; 0\\<rangle> \\<turnstile>\\<^sub>n t\" shows \"t \\<in> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> M", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> M", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. t \\<in> M", "assume \"\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\""], ["proof (state)\nthis:\n  \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. t \\<in> M", "hence \"k > 0 \\<or> t \\<in> M\""], ["proof (prove)\nusing this:\n  \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. 0 < k \\<or> t \\<in> M", "by (induct t) auto"], ["proof (state)\nthis:\n  0 < k \\<or> t \\<in> M\n\ngoal (1 subgoal):\n 1. t \\<in> M", "}"], ["proof (state)\nthis:\n  \\<langle>M; ?k4\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow>\n  0 < ?k4 \\<or> t \\<in> M\n\ngoal (1 subgoal):\n 1. t \\<in> M", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>M; ?k4\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow>\n  0 < ?k4 \\<or> t \\<in> M\n\ngoal (1 subgoal):\n 1. t \\<in> M", "using assms"], ["proof (prove)\nusing this:\n  \\<langle>M; ?k4\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow>\n  0 < ?k4 \\<or> t \\<in> M\n  \\<langle>M; 0\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. t \\<in> M", "by auto"], ["proof (state)\nthis:\n  t \\<in> M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma deduct_if_deduct_num: \"\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow> M \\<turnstile> t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow>\n    M \\<turnstile> t", "by (induct t rule: intruder_deduct_num.induct)\n   (metis intruder_deduct.Axiom,\n    metis intruder_deduct.Compose,\n    metis intruder_deduct.Decompose)"], ["", "lemma deduct_num_if_deduct: \"M \\<turnstile> t \\<Longrightarrow> \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile> t \\<Longrightarrow>\n    \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t", "proof (induction t rule: intruder_deduct_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<exists>k.\n              \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "case (Compose T f)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?t2\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<exists>k.\n              \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "then"], ["proof (chain)\npicking this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?t2", "obtain steps where *: \"\\<forall>t \\<in> set T. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\""], ["proof (prove)\nusing this:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow> M \\<turnstile> ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?t2\n\ngoal (1 subgoal):\n 1. (\\<And>steps.\n        \\<forall>t\\<in>set T.\n           \\<langle>M; steps\n                        t\\<rangle> \\<turnstile>\\<^sub>n t \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<forall>t\\<in>set T. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<exists>k.\n              \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "then"], ["proof (chain)\npicking this:\n  \\<forall>t\\<in>set T. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t", "obtain n where \"\\<forall>t \\<in> set T. steps t \\<le> n\""], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>set T. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<forall>t\\<in>set T. steps t \\<le> n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using finite_nat_set_iff_bounded_le[of \"steps ` set T\"]"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>set T. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  finite (steps ` set T) =\n  (\\<exists>m. \\<forall>n\\<in>steps ` set T. n \\<le> m)\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<forall>t\\<in>set T. steps t \\<le> n \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>t\\<in>set T. steps t \\<le> n\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile> t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<exists>k.\n              \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T\n 3. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>set T. steps t \\<le> n\n\ngoal (1 subgoal):\n 1. \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun f T", "using ComposeN[OF Compose.hyps(1,2), of M steps] *"], ["proof (prove)\nusing this:\n  \\<forall>t\\<in>set T. steps t \\<le> n\n  (\\<And>t.\n      t \\<in> set T \\<Longrightarrow>\n      \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t) \\<Longrightarrow>\n  \\<langle>M; Suc (Max (insert 0\n                         (steps `\n                          set T)))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n  \\<forall>t\\<in>set T. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun f T", "by force"], ["proof (state)\nthis:\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "case (Decompose t K T t\\<^sub>i)"], ["proof (state)\nthis:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?k2\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "hence \"\\<And>u. u \\<in> insert t (set K) \\<Longrightarrow> \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n u\""], ["proof (prove)\nusing this:\n  M \\<turnstile> t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow> M \\<turnstile> ?k2\n  t\\<^sub>i \\<in> set T\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?k2\n\ngoal (1 subgoal):\n 1. \\<And>u.\n       u \\<in> insert t (set K) \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n u", "by auto"], ["proof (state)\nthis:\n  ?u2 \\<in> insert t (set K) \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?u2\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "then"], ["proof (chain)\npicking this:\n  ?u2 \\<in> insert t (set K) \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?u2", "obtain steps where *: \"\\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\" \"\\<forall>t \\<in> set K. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\""], ["proof (prove)\nusing this:\n  ?u2 \\<in> insert t (set K) \\<Longrightarrow>\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n ?u2\n\ngoal (1 subgoal):\n 1. (\\<And>steps.\n        \\<lbrakk>\\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n         \\<forall>t\\<in>set K.\n            \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>t\\<in>set K. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "then"], ["proof (chain)\npicking this:\n  \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>t\\<in>set K. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t", "obtain n where \"steps t \\<le> n\" \"\\<forall>t \\<in> set K. steps t \\<le> n\""], ["proof (prove)\nusing this:\n  \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>t\\<in>set K. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>steps t \\<le> n;\n         \\<forall>t\\<in>set K. steps t \\<le> n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using finite_nat_set_iff_bounded_le[of \"steps ` insert t (set K)\"]"], ["proof (prove)\nusing this:\n  \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>t\\<in>set K. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  finite (steps ` insert t (set K)) =\n  (\\<exists>m. \\<forall>n\\<in>steps ` insert t (set K). n \\<le> m)\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>steps t \\<le> n;\n         \\<forall>t\\<in>set K. steps t \\<le> n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  steps t \\<le> n\n  \\<forall>t\\<in>set K. steps t \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n 2. \\<And>t K T t\\<^sub>i.\n       \\<lbrakk>M \\<turnstile> t;\n        \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t;\n        Ana t = (K, T);\n        \\<And>k. k \\<in> set K \\<Longrightarrow> M \\<turnstile> k;\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<exists>ka. \\<langle>M; ka\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>k.\n                            \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  steps t \\<le> n\n  \\<forall>t\\<in>set K. steps t \\<le> n\n\ngoal (1 subgoal):\n 1. \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "using DecomposeN[OF _ Decompose.hyps(2) _ Decompose.hyps(4), of M _ steps] *"], ["proof (prove)\nusing this:\n  steps t \\<le> n\n  \\<forall>t\\<in>set K. steps t \\<le> n\n  \\<lbrakk>\\<langle>M; ?n\\<rangle> \\<turnstile>\\<^sub>n t;\n   \\<And>k.\n      k \\<in> set K \\<Longrightarrow>\n      \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M; Suc (Max\n(insert ?n (steps ` set K)))\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n  \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>t\\<in>set K. \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "by force"], ["proof (state)\nthis:\n  \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> M \\<Longrightarrow>\n       \\<exists>k. \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t", "qed (metis AxiomN)"], ["", "lemma deduct_normalize:\n  assumes M: \"\\<forall>m \\<in> M. \\<forall>f T. Fun f T \\<sqsubseteq> m \\<longrightarrow> P f T\"\n  and t: \"\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\" \"Fun f T \\<sqsubseteq> t\" \"\\<not>P f T\"\n  shows \"\\<exists>l \\<le> k. (\\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T) \\<and> (\\<forall>t \\<in> set T. \\<exists>j < l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>k.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "using t"], ["proof (prove)\nusing this:\n  \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n t\n  Fun f T \\<sqsubseteq> t\n  \\<not> P f T\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>k.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "proof (induction t rule: intruder_deduct_num_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>0.\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<And>Ta fa steps.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> Fun fa Ta; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert 0 (steps ` set Ta))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 3. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "case (AxiomN t)"], ["proof (state)\nthis:\n  t \\<in> M\n  Fun f T \\<sqsubseteq> t\n  \\<not> P f T\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M; Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>0.\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<And>Ta fa steps.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> Fun fa Ta; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert 0 (steps ` set Ta))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 3. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> M\n  Fun f T \\<sqsubseteq> t\n  \\<not> P f T\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>0.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "using M"], ["proof (prove)\nusing this:\n  t \\<in> M\n  Fun f T \\<sqsubseteq> t\n  \\<not> P f T\n  \\<forall>m\\<in>M.\n     \\<forall>f T. Fun f T \\<sqsubseteq> m \\<longrightarrow> P f T\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>0.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "by auto"], ["proof (state)\nthis:\n  \\<exists>l\\<le>0.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (2 subgoals):\n 1. \\<And>Ta fa steps.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> Fun fa Ta; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert 0 (steps ` set Ta))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Ta fa steps.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> Fun fa Ta; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert 0 (steps ` set Ta))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "case (ComposeN T' f' steps)"], ["proof (state)\nthis:\n  length T' = arity f'\n  public f'\n  ?t2 \\<in> set T' \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  \\<lbrakk>?t2 \\<in> set T'; Fun f T \\<sqsubseteq> ?t2;\n   \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?t2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  Fun f T \\<sqsubseteq> Fun f' T'\n  \\<not> P f T\n\ngoal (2 subgoals):\n 1. \\<And>Ta fa steps.\n       \\<lbrakk>length Ta = arity fa; public fa;\n        \\<And>t.\n           t \\<in> set Ta \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set Ta; Fun f T \\<sqsubseteq> t;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> Fun fa Ta; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert 0 (steps ` set Ta))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "thus ?case"], ["proof (prove)\nusing this:\n  length T' = arity f'\n  public f'\n  ?t2 \\<in> set T' \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  \\<lbrakk>?t2 \\<in> set T'; Fun f T \\<sqsubseteq> ?t2;\n   \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?t2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  Fun f T \\<sqsubseteq> Fun f' T'\n  \\<not> P f T\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "proof (cases \"Fun f' T' = Fun f T\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "case True"], ["proof (state)\nthis:\n  Fun f' T' = Fun f T\n\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "hence \"\\<langle>M; Suc (Max (insert 0 (steps ` set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\" \"T = T'\""], ["proof (prove)\nusing this:\n  Fun f' T' = Fun f T\n\ngoal (1 subgoal):\n 1. \\<langle>M; Suc (Max (insert 0\n                           (steps `\n                            set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                               T &&&\n    T = T'", "using intruder_deduct_num.ComposeN[OF ComposeN.hyps]"], ["proof (prove)\nusing this:\n  Fun f' T' = Fun f T\n  (\\<And>t.\n      t \\<in> set T' \\<Longrightarrow> t \\<in> set T') \\<Longrightarrow>\n  \\<langle>M; Suc (Max (insert 0\n                         (steps `\n                          set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f' T'\n\ngoal (1 subgoal):\n 1. \\<langle>M; Suc (Max (insert 0\n                           (steps `\n                            set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                               T &&&\n    T = T'", "by auto"], ["proof (state)\nthis:\n  \\<langle>M; Suc (Max (insert 0\n                         (steps `\n                          set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n  T = T'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "moreover"], ["proof (state)\nthis:\n  \\<langle>M; Suc (Max (insert 0\n                         (steps `\n                          set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n  T = T'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "have \"\\<And>t. t \\<in> set T \\<Longrightarrow> \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t", "using True ComposeN.hyps(3)"], ["proof (prove)\nusing this:\n  Fun f' T' = Fun f T\n  ?t2 \\<in> set T' \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "moreover"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "have \"\\<And>t. t \\<in> set T \\<Longrightarrow> steps t < Suc (Max (insert 0 (steps ` set T)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       steps t < Suc (Max (insert 0 (steps ` set T)))", "using Max_less_iff[of \"insert 0 (steps ` set T)\" \"Suc (Max (insert 0 (steps ` set T)))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert 0 (steps ` set T));\n   insert 0 (steps ` set T) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert 0 (steps ` set T))\n                     < Suc (Max (insert 0 (steps ` set T)))) =\n                    (\\<forall>a\\<in>insert 0 (steps ` set T).\n                        a < Suc (Max (insert 0 (steps ` set T))))\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       steps t < Suc (Max (insert 0 (steps ` set T)))", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' = Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n 2. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "ultimately"], ["proof (chain)\npicking this:\n  \\<langle>M; Suc (Max (insert 0\n                         (steps `\n                          set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n  T = T'\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>M; Suc (Max (insert 0\n                         (steps `\n                          set T')))\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n  T = T'\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "by auto"], ["proof (state)\nthis:\n  \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "case False"], ["proof (state)\nthis:\n  Fun f' T' \\<noteq> Fun f T\n\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "then"], ["proof (chain)\npicking this:\n  Fun f' T' \\<noteq> Fun f T", "obtain t' where t': \"t' \\<in> set T'\" \"Fun f T \\<sqsubseteq> t'\""], ["proof (prove)\nusing this:\n  Fun f' T' \\<noteq> Fun f T\n\ngoal (1 subgoal):\n 1. (\\<And>t'.\n        \\<lbrakk>t' \\<in> set T'; Fun f T \\<sqsubseteq> t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using ComposeN"], ["proof (prove)\nusing this:\n  Fun f' T' \\<noteq> Fun f T\n  length T' = arity f'\n  public f'\n  ?t2 \\<in> set T' \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  \\<lbrakk>?t2 \\<in> set T'; Fun f T \\<sqsubseteq> ?t2;\n   \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?t2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  Fun f T \\<sqsubseteq> Fun f' T'\n  \\<not> P f T\n\ngoal (1 subgoal):\n 1. (\\<And>t'.\n        \\<lbrakk>t' \\<in> set T'; Fun f T \\<sqsubseteq> t'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t' \\<in> set T'\n  Fun f T \\<sqsubseteq> t'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "hence \"\\<exists>l \\<le> steps t'. (\\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T) \\<and> (\\<forall>t \\<in> set T. \\<exists>j < l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\""], ["proof (prove)\nusing this:\n  t' \\<in> set T'\n  Fun f T \\<sqsubseteq> t'\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>steps t'.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "using ComposeN.IH[OF _ _ ComposeN.prems(2)]"], ["proof (prove)\nusing this:\n  t' \\<in> set T'\n  Fun f T \\<sqsubseteq> t'\n  \\<lbrakk>?t2 \\<in> set T'; Fun f T \\<sqsubseteq> ?t2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?t2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>steps t'.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "by auto"], ["proof (state)\nthis:\n  \\<exists>l\\<le>steps t'.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "moreover"], ["proof (state)\nthis:\n  \\<exists>l\\<le>steps t'.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "have \"steps t' < Suc (Max (insert 0 (steps ` set T')))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. steps t' < Suc (Max (insert 0 (steps ` set T')))", "using Max_less_iff[of \"insert 0 (steps ` set T')\" \"Suc (Max (insert 0 (steps ` set T')))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert 0 (steps ` set T'));\n   insert 0 (steps ` set T') \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert 0 (steps ` set T'))\n                     < Suc (Max (insert 0 (steps ` set T')))) =\n                    (\\<forall>a\\<in>insert 0 (steps ` set T').\n                        a < Suc (Max (insert 0 (steps ` set T'))))\n\ngoal (1 subgoal):\n 1. steps t' < Suc (Max (insert 0 (steps ` set T')))", "using t'(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert 0 (steps ` set T'));\n   insert 0 (steps ` set T') \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert 0 (steps ` set T'))\n                     < Suc (Max (insert 0 (steps ` set T')))) =\n                    (\\<forall>a\\<in>insert 0 (steps ` set T').\n                        a < Suc (Max (insert 0 (steps ` set T'))))\n  t' \\<in> set T'\n\ngoal (1 subgoal):\n 1. steps t' < Suc (Max (insert 0 (steps ` set T')))", "by auto"], ["proof (state)\nthis:\n  steps t' < Suc (Max (insert 0 (steps ` set T')))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>length T' = arity f'; public f';\n     \\<And>t.\n        t \\<in> set T' \\<Longrightarrow>\n        \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n     \\<And>t.\n        \\<lbrakk>t \\<in> set T'; Fun f T \\<sqsubseteq> t;\n         \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>steps t.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n     Fun f T \\<sqsubseteq> Fun f' T'; \\<not> P f T;\n     Fun f' T' \\<noteq> Fun f T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                                T \\<and>\n                         (\\<forall>t\\<in>set T.\n                             \\<exists>j<l.\n                                \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>l\\<le>steps t'.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  steps t' < Suc (Max (insert 0 (steps ` set T')))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>l\\<le>steps t'.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  steps t' < Suc (Max (insert 0 (steps ` set T')))\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "using ComposeN.hyps(3)[OF t'(1)]"], ["proof (prove)\nusing this:\n  \\<exists>l\\<le>steps t'.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  steps t' < Suc (Max (insert 0 (steps ` set T')))\n  \\<langle>M; steps t'\\<rangle> \\<turnstile>\\<^sub>n t'\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "by (meson Suc_le_eq le_Suc_eq le_trans)"], ["proof (state)\nthis:\n  \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>l\\<le>Suc (Max (insert 0 (steps ` set T'))).\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "case (DecomposeN t K T' t\\<^sub>i steps n)"], ["proof (state)\nthis:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T')\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  t\\<^sub>i \\<in> set T'\n  \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>n.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  \\<lbrakk>?k2 \\<in> set K; Fun f T \\<sqsubseteq> ?k2; \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?k2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  Fun f T \\<sqsubseteq> t\\<^sub>i\n  \\<not> P f T\n\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "hence *: \"Fun f T \\<sqsubseteq> t\""], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T')\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  t\\<^sub>i \\<in> set T'\n  \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>n.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  \\<lbrakk>?k2 \\<in> set K; Fun f T \\<sqsubseteq> ?k2; \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?k2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  Fun f T \\<sqsubseteq> t\\<^sub>i\n  \\<not> P f T\n\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq> t", "using term.order_trans[of \"Fun f T\" t\\<^sub>i t] Ana_subterm[of t K T']"], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T')\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  t\\<^sub>i \\<in> set T'\n  \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>n.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  \\<lbrakk>?k2 \\<in> set K; Fun f T \\<sqsubseteq> ?k2; \\<not> P f T\\<rbrakk>\n  \\<Longrightarrow> \\<exists>l\\<le>steps ?k2.\n                       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f\n                              T \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>j<l.\n                              \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n  Fun f T \\<sqsubseteq> t\\<^sub>i\n  \\<not> P f T\n  \\<lbrakk>Fun f T \\<sqsubseteq> t\\<^sub>i;\n   t\\<^sub>i \\<sqsubseteq> t\\<rbrakk>\n  \\<Longrightarrow> Fun f T \\<sqsubseteq> t\n  Ana t = (K, T') \\<Longrightarrow> set T' \\<subset> subterms t\n\ngoal (1 subgoal):\n 1. Fun f T \\<sqsubseteq> t", "by blast"], ["proof (state)\nthis:\n  Fun f T \\<sqsubseteq> t\n\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "have \"\\<exists>l \\<le> n. (\\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T) \\<and> (\\<forall>t' \\<in> set T. \\<exists>j < l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>n.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t'\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')", "using DecomposeN.IH(1)[OF * DecomposeN.prems(2)]"], ["proof (prove)\nusing this:\n  \\<exists>l\\<le>n.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>n.\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t'\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')", "by auto"], ["proof (state)\nthis:\n  \\<exists>l\\<le>n.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t'\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')\n\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "moreover"], ["proof (state)\nthis:\n  \\<exists>l\\<le>n.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t'\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')\n\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "have \"n < Suc (Max (insert n (steps ` set K)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n < Suc (Max (insert n (steps ` set K)))", "using Max_less_iff[of \"insert n (steps ` set K)\" \"Suc (Max (insert n (steps ` set K)))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert n (steps ` set K));\n   insert n (steps ` set K) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert n (steps ` set K))\n                     < Suc (Max (insert n (steps ` set K)))) =\n                    (\\<forall>a\\<in>insert n (steps ` set K).\n                        a < Suc (Max (insert n (steps ` set K))))\n\ngoal (1 subgoal):\n 1. n < Suc (Max (insert n (steps ` set K)))", "by auto"], ["proof (state)\nthis:\n  n < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<And>t K Ta t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>Fun f T \\<sqsubseteq> t; \\<not> P f T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>l\\<le>n.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                    f T \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>j<l.\n                                    \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Ana t = (K, Ta);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set Ta;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K; Fun f T \\<sqsubseteq> k;\n            \\<not> P f T\\<rbrakk>\n           \\<Longrightarrow> \\<exists>l\\<le>steps k.\n                                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n f T \\<and>\n                                (\\<forall>t\\<in>set T.\n                                    \\<exists>j<l.\n \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t);\n        Fun f T \\<sqsubseteq> t\\<^sub>i; \\<not> P f T\\<rbrakk>\n       \\<Longrightarrow> \\<exists>l\\<le>Suc\n   (Max (insert n (steps ` set K))).\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun\n                                   f T \\<and>\n                            (\\<forall>t\\<in>set T.\n                                \\<exists>j<l.\n                                   \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>l\\<le>n.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t'\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')\n  n < Suc (Max (insert n (steps ` set K)))", "show ?case"], ["proof (prove)\nusing this:\n  \\<exists>l\\<le>n.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t'\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')\n  n < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>Suc (Max (insert n (steps ` set K))).\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "using DecomposeN.hyps(4)"], ["proof (prove)\nusing this:\n  \\<exists>l\\<le>n.\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t'\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t')\n  n < Suc (Max (insert n (steps ` set K)))\n  t\\<^sub>i \\<in> set T'\n\ngoal (1 subgoal):\n 1. \\<exists>l\\<le>Suc (Max (insert n (steps ` set K))).\n       \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n       (\\<forall>t\\<in>set T.\n           \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)", "by (meson Suc_le_eq le_Suc_eq le_trans)"], ["proof (state)\nthis:\n  \\<exists>l\\<le>Suc (Max (insert n (steps ` set K))).\n     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n Fun f T \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma deduct_inv:\n  assumes \"\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\"\n  shows \"t \\<in> M \\<or>\n         (\\<exists>f T. t = Fun f T \\<and> public f \\<and> length T = arity f \\<and> (\\<forall>t \\<in> set T. \\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n         (\\<exists>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and> (\\<forall>k \\<in> set (fst (Ana m)). \\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)))\"\n    (is \"?P t n \\<or> ?Q t n \\<or> ?R t n\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "using assms"], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "proof (induction n arbitrary: t rule: nat_less_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n t.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "case (1 n t)"], ["proof (state)\nthis:\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. \\<And>n t.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "proof (cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<forall>m<n.\n                \\<forall>x.\n                   \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                   x \\<in> M \\<or>\n                   (\\<exists>f T.\n                       x = Fun f T \\<and>\n                       public f \\<and>\n                       length T = arity f \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                   (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                       (\\<exists>l<m.\n                           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                       (\\<forall>k\\<in>set (fst (Ana ma)).\n                           \\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                       x \\<in> set (snd (Ana ma)));\n     \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = 0\\<rbrakk>\n    \\<Longrightarrow> t \\<in> M \\<or>\n                      (\\<exists>f T.\n                          t = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<n.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana m)).\n                              \\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          t \\<in> set (snd (Ana m)))\n 2. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<forall>m<n.\n                \\<forall>x.\n                   \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                   x \\<in> M \\<or>\n                   (\\<exists>f T.\n                       x = Fun f T \\<and>\n                       public f \\<and>\n                       length T = arity f \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                   (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                       (\\<exists>l<m.\n                           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                       (\\<forall>k\\<in>set (fst (Ana ma)).\n                           \\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                       x \\<in> set (snd (Ana ma)));\n     \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = 0\\<rbrakk>\n    \\<Longrightarrow> t \\<in> M \\<or>\n                      (\\<exists>f T.\n                          t = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<n.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana m)).\n                              \\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          t \\<in> set (snd (Ana m)))\n 2. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "hence \"t \\<in> M\""], ["proof (prove)\nusing this:\n  n = 0\n\ngoal (1 subgoal):\n 1. t \\<in> M", "using deduct_zero_in_ik \"1.prems\"(1)"], ["proof (prove)\nusing this:\n  n = 0\n  \\<langle>?M; 0\\<rangle> \\<turnstile>\\<^sub>n ?t \\<Longrightarrow>\n  ?t \\<in> ?M\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. t \\<in> M", "by metis"], ["proof (state)\nthis:\n  t \\<in> M\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<forall>m<n.\n                \\<forall>x.\n                   \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                   x \\<in> M \\<or>\n                   (\\<exists>f T.\n                       x = Fun f T \\<and>\n                       public f \\<and>\n                       length T = arity f \\<and>\n                       (\\<forall>t\\<in>set T.\n                           \\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                   (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                       (\\<exists>l<m.\n                           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                       (\\<forall>k\\<in>set (fst (Ana ma)).\n                           \\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                       x \\<in> set (snd (Ana ma)));\n     \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = 0\\<rbrakk>\n    \\<Longrightarrow> t \\<in> M \\<or>\n                      (\\<exists>f T.\n                          t = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<n.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana m)).\n                              \\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          t \\<in> set (snd (Ana m)))\n 2. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> M\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "by auto"], ["proof (state)\nthis:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "case (Suc n')"], ["proof (state)\nthis:\n  n = Suc n'\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "hence \"\\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n t\"\n          \"\\<forall>m < Suc n'. \\<forall>x. (\\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x) \\<longrightarrow> ?P x m \\<or> ?Q x m \\<or> ?R x m\""], ["proof (prove)\nusing this:\n  n = Suc n'\n\ngoal (1 subgoal):\n 1. \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n t &&&\n    \\<forall>m<Suc n'.\n       \\<forall>x.\n          \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n          x \\<in> M \\<or>\n          (\\<exists>f T.\n              x = Fun f T \\<and>\n              public f \\<and>\n              length T = arity f \\<and>\n              (\\<forall>t\\<in>set T.\n                  \\<exists>l<m.\n                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n          (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n              (\\<exists>l<m.\n                  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n              (\\<forall>k\\<in>set (fst (Ana ma)).\n                  \\<exists>l<m.\n                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n              x \\<in> set (snd (Ana ma)))", "using \"1.prems\" \"1.IH\""], ["proof (prove)\nusing this:\n  n = Suc n'\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (1 subgoal):\n 1. \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n t &&&\n    \\<forall>m<Suc n'.\n       \\<forall>x.\n          \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n          x \\<in> M \\<or>\n          (\\<exists>f T.\n              x = Fun f T \\<and>\n              public f \\<and>\n              length T = arity f \\<and>\n              (\\<forall>t\\<in>set T.\n                  \\<exists>l<m.\n                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n          (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n              (\\<exists>l<m.\n                  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n              (\\<forall>k\\<in>set (fst (Ana ma)).\n                  \\<exists>l<m.\n                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n              x \\<in> set (snd (Ana ma)))", "by blast+"], ["proof (state)\nthis:\n  \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>m<Suc n'.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "hence \"?P t (Suc n') \\<or> ?Q t (Suc n') \\<or> ?R t (Suc n')\""], ["proof (prove)\nusing this:\n  \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>m<Suc n'.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc n'.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc n'.\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc n'.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "proof (induction t rule: intruder_deduct_num_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<0.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<0.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<0.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> t \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 t = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>ta\\<in>set T.\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ta)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps t.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>k\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                                 t \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<in> M \\<or>\n                         (\\<exists>fa Ta.\n                             Fun f T = Fun fa Ta \\<and>\n                             public fa \\<and>\n                             length Ta = arity fa \\<and>\n                             (\\<forall>t\\<in>set Ta.\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert 0 (steps ` set T))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             Fun f T \\<in> set (snd (Ana m)))\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "case (AxiomN t)"], ["proof (state)\nthis:\n  t \\<in> M\n  \\<forall>m<0.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<0.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<0.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<0.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> t \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 t = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>ta\\<in>set T.\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ta)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps t.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>k\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                                 t \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<in> M \\<or>\n                         (\\<exists>fa Ta.\n                             Fun f T = Fun fa Ta \\<and>\n                             public fa \\<and>\n                             length Ta = arity fa \\<and>\n                             (\\<forall>t\\<in>set Ta.\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert 0 (steps ` set T))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             Fun f T \\<in> set (snd (Ana m)))\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> M\n  \\<forall>m<0.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<0.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<0. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<0.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "by simp"], ["proof (state)\nthis:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<0.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<0. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<0.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal (2 subgoals):\n 1. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> t \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 t = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>ta\\<in>set T.\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ta)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps t.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>k\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                                 t \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<in> M \\<or>\n                         (\\<exists>fa Ta.\n                             Fun f T = Fun fa Ta \\<and>\n                             public fa \\<and>\n                             length Ta = arity fa \\<and>\n                             (\\<forall>t\\<in>set Ta.\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert 0 (steps ` set T))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             Fun f T \\<in> set (snd (Ana m)))\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> t \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 t = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>ta\\<in>set T.\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ta)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps t.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>k\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                                 t \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<in> M \\<or>\n                         (\\<exists>fa Ta.\n                             Fun f T = Fun fa Ta \\<and>\n                             public fa \\<and>\n                             length Ta = arity fa \\<and>\n                             (\\<forall>t\\<in>set Ta.\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert 0 (steps ` set T))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             Fun f T \\<in> set (snd (Ana m)))\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "case (ComposeN T f steps)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  \\<lbrakk>?t2 \\<in> set T;\n   \\<forall>m<steps ?t2.\n      \\<forall>x.\n         \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n         x \\<in> M \\<or>\n         (\\<exists>f T.\n             x = Fun f T \\<and>\n             public f \\<and>\n             length T = arity f \\<and>\n             (\\<forall>t\\<in>set T.\n                 \\<exists>l<m.\n                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n         (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n             (\\<exists>l<m.\n                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n             (\\<forall>k\\<in>set (fst (Ana ma)).\n                 \\<exists>l<m.\n                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n             x \\<in> set (snd (Ana ma)))\\<rbrakk>\n  \\<Longrightarrow> ?t2 \\<in> M \\<or>\n                    (\\<exists>f T.\n                        ?t2 = Fun f T \\<and>\n                        public f \\<and>\n                        length T = arity f \\<and>\n                        (\\<forall>t\\<in>set T.\n                            \\<exists>l<steps ?t2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                        (\\<exists>l<steps ?t2.\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                        (\\<forall>k\\<in>set (fst (Ana m)).\n                            \\<exists>l<steps ?t2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                        ?t2 \\<in> set (snd (Ana m)))\n  \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (2 subgoals):\n 1. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> t \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 t = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>ta\\<in>set T.\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ta)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps t.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>k\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                                 t \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<in> M \\<or>\n                         (\\<exists>fa Ta.\n                             Fun f T = Fun fa Ta \\<and>\n                             public fa \\<and>\n                             length Ta = arity fa \\<and>\n                             (\\<forall>t\\<in>set Ta.\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert 0 (steps ` set T))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             Fun f T \\<in> set (snd (Ana m)))\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have \"\\<And>t. t \\<in> set T \\<Longrightarrow> steps t < Suc (Max (insert 0 (steps ` set T)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       steps t < Suc (Max (insert 0 (steps ` set T)))", "using Max_less_iff[of \"insert 0 (steps ` set T)\" \"Suc (Max (insert 0 (steps ` set T)))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert 0 (steps ` set T));\n   insert 0 (steps ` set T) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert 0 (steps ` set T))\n                     < Suc (Max (insert 0 (steps ` set T)))) =\n                    (\\<forall>a\\<in>insert 0 (steps ` set T).\n                        a < Suc (Max (insert 0 (steps ` set T))))\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       t \\<in> set T \\<Longrightarrow>\n       steps t < Suc (Max (insert 0 (steps ` set T)))", "by auto"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))\n\ngoal (2 subgoals):\n 1. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> t \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 t = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>ta\\<in>set T.\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ta)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps t.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>k\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps t.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                                 t \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> Fun f T \\<in> M \\<or>\n                         (\\<exists>fa Ta.\n                             Fun f T = Fun fa Ta \\<and>\n                             public fa \\<and>\n                             length Ta = arity fa \\<and>\n                             (\\<forall>t\\<in>set Ta.\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert 0 (steps ` set T))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert 0 (steps ` set T))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             Fun f T \\<in> set (snd (Ana m)))\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "thus ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))\n\ngoal (1 subgoal):\n 1. Fun f T \\<in> M \\<or>\n    (\\<exists>fa Ta.\n        Fun f T = Fun fa Ta \\<and>\n        public fa \\<and>\n        length Ta = arity fa \\<and>\n        (\\<forall>t\\<in>set Ta.\n            \\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        Fun f T \\<in> set (snd (Ana m)))", "using ComposeN.hyps"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n\ngoal (1 subgoal):\n 1. Fun f T \\<in> M \\<or>\n    (\\<exists>fa Ta.\n        Fun f T = Fun fa Ta \\<and>\n        public fa \\<and>\n        length Ta = arity fa \\<and>\n        (\\<forall>t\\<in>set Ta.\n            \\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        Fun f T \\<in> set (snd (Ana m)))", "by metis"], ["proof (state)\nthis:\n  Fun f T \\<in> M \\<or>\n  (\\<exists>fa Ta.\n      Fun f T = Fun fa Ta \\<and>\n      public fa \\<and>\n      length Ta = arity fa \\<and>\n      (\\<forall>t\\<in>set Ta.\n          \\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc (Max (insert 0 (steps ` set T))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      Fun f T \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "case (DecomposeN t K T t\\<^sub>i steps n)"], ["proof (state)\nthis:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  t\\<^sub>i \\<in> set T\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n  \\<lbrakk>?k2 \\<in> set K;\n   \\<forall>m<steps ?k2.\n      \\<forall>x.\n         \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n         x \\<in> M \\<or>\n         (\\<exists>f T.\n             x = Fun f T \\<and>\n             public f \\<and>\n             length T = arity f \\<and>\n             (\\<forall>t\\<in>set T.\n                 \\<exists>l<m.\n                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n         (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n             (\\<exists>l<m.\n                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n             (\\<forall>k\\<in>set (fst (Ana ma)).\n                 \\<exists>l<m.\n                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n             x \\<in> set (snd (Ana ma)))\\<rbrakk>\n  \\<Longrightarrow> ?k2 \\<in> M \\<or>\n                    (\\<exists>f T.\n                        ?k2 = Fun f T \\<and>\n                        public f \\<and>\n                        length T = arity f \\<and>\n                        (\\<forall>t\\<in>set T.\n                            \\<exists>l<steps ?k2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                        (\\<exists>l<steps ?k2.\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                        (\\<forall>k\\<in>set (fst (Ana m)).\n                            \\<exists>l<steps ?k2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                        ?k2 \\<in> set (snd (Ana m)))\n  \\<forall>m<Suc (Max (insert n (steps ` set K))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 0: \"n < Suc (Max (insert n (steps ` set K)))\"\n              \"\\<And>k. k \\<in> set K \\<Longrightarrow> steps k < Suc (Max (insert n (steps ` set K)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n < Suc (Max (insert n (steps ` set K))) &&&\n    (\\<And>k.\n        k \\<in> set K \\<Longrightarrow>\n        steps k < Suc (Max (insert n (steps ` set K))))", "using Max_less_iff[of \"insert n (steps ` set K)\" \"Suc (Max (insert n (steps ` set K)))\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert n (steps ` set K));\n   insert n (steps ` set K) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert n (steps ` set K))\n                     < Suc (Max (insert n (steps ` set K)))) =\n                    (\\<forall>a\\<in>insert n (steps ` set K).\n                        a < Suc (Max (insert n (steps ` set K))))\n\ngoal (1 subgoal):\n 1. n < Suc (Max (insert n (steps ` set K))) &&&\n    (\\<And>k.\n        k \\<in> set K \\<Longrightarrow>\n        steps k < Suc (Max (insert n (steps ` set K))))", "by auto"], ["proof (state)\nthis:\n  n < Suc (Max (insert n (steps ` set K)))\n  ?k2 \\<in> set K \\<Longrightarrow>\n  steps ?k2 < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have IH1: \"?P t j \\<or> ?Q t j \\<or> ?R t j\" when jt: \"j < n\" \"\\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\" for j t"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<j.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<j. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<j.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "using jt DecomposeN.prems(1) 0(1)"], ["proof (prove)\nusing this:\n  j < n\n  \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\n  \\<forall>m<Suc (Max (insert n (steps ` set K))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma)))\n  n < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<j.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<j. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<j.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>?j2 < n;\n   \\<langle>M; ?j2\\<rangle> \\<turnstile>\\<^sub>n ?t2\\<rbrakk>\n  \\<Longrightarrow> ?t2 \\<in> M \\<or>\n                    (\\<exists>f T.\n                        ?t2 = Fun f T \\<and>\n                        public f \\<and>\n                        length T = arity f \\<and>\n                        (\\<forall>t\\<in>set T.\n                            \\<exists>l<?j2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                        (\\<exists>l<?j2.\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                        (\\<forall>k\\<in>set (fst (Ana m)).\n                            \\<exists>l<?j2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                        ?t2 \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have IH2: \"?P t n \\<or> ?Q t n \\<or> ?R t n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "using DecomposeN.IH(1) IH1"], ["proof (prove)\nusing this:\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        x \\<in> M \\<or>\n        (\\<exists>f T.\n            x = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<m.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana ma)).\n                \\<exists>l<m.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n  \\<lbrakk>?j2 < n;\n   \\<langle>M; ?j2\\<rangle> \\<turnstile>\\<^sub>n ?t2\\<rbrakk>\n  \\<Longrightarrow> ?t2 \\<in> M \\<or>\n                    (\\<exists>f T.\n                        ?t2 = Fun f T \\<and>\n                        public f \\<and>\n                        length T = arity f \\<and>\n                        (\\<forall>t\\<in>set T.\n                            \\<exists>l<?j2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                        (\\<exists>l<?j2.\n                            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                        (\\<forall>k\\<in>set (fst (Ana m)).\n                            \\<exists>l<?j2.\n                               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                        ?t2 \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "by simp"], ["proof (state)\nthis:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 1: \"\\<forall>k \\<in> set (fst (Ana t)). \\<exists>l < Suc (Max (insert n (steps ` set K))). \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k\\<in>set (fst (Ana t)).\n       \\<exists>l<Suc (Max (insert n (steps ` set K))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k", "using DecomposeN.hyps(1,2,3) 0(2)"], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  ?k2 \\<in> set K \\<Longrightarrow>\n  steps ?k2 < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<forall>k\\<in>set (fst (Ana t)).\n       \\<exists>l<Suc (Max (insert n (steps ` set K))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k", "by auto"], ["proof (state)\nthis:\n  \\<forall>k\\<in>set (fst (Ana t)).\n     \\<exists>l<Suc (Max (insert n (steps ` set K))).\n        \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 2: \"t\\<^sub>i \\<in> set (snd (Ana t))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> set (snd (Ana t))", "using DecomposeN.hyps(2,4)"], ["proof (prove)\nusing this:\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> set (snd (Ana t))", "by fastforce"], ["proof (state)\nthis:\n  t\\<^sub>i \\<in> set (snd (Ana t))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 3: \"t \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M\" when \"t \\<in> set (snd (Ana m))\" \"m \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\" for m"], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "using that(1) Ana_subterm[of m _ \"snd (Ana m)\"] in_subterms_subset_Union[OF that(2)]"], ["proof (prove)\nusing this:\n  t \\<in> set (snd (Ana m))\n  Ana m = (?K, snd (Ana m)) \\<Longrightarrow>\n  set (snd (Ana m)) \\<subset> subterms m\n  subterms m \\<subseteq> subterms\\<^sub>s\\<^sub>e\\<^sub>t M\n\ngoal (1 subgoal):\n 1. t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M", "by (metis (no_types, lifting) prod.collapse psubsetD subsetCE subsetD)"], ["proof (state)\nthis:\n  \\<lbrakk>t \\<in> set (snd (Ana ?m2));\n   ?m2 \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\\<rbrakk>\n  \\<Longrightarrow> t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 4: \"?R t\\<^sub>i (Suc (Max (insert n (steps ` set K))))\" when \"?R t n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n       (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n       (\\<forall>k\\<in>set (fst (Ana m)).\n           \\<exists>l<Suc (Max (insert n (steps ` set K))).\n              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n       t\\<^sub>i \\<in> set (snd (Ana m))", "using that 0(1) 1 2 3 DecomposeN.hyps(1)"], ["proof (prove)\nusing this:\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t \\<in> set (snd (Ana m))\n  n < Suc (Max (insert n (steps ` set K)))\n  \\<forall>k\\<in>set (fst (Ana t)).\n     \\<exists>l<Suc (Max (insert n (steps ` set K))).\n        \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k\n  t\\<^sub>i \\<in> set (snd (Ana t))\n  \\<lbrakk>t \\<in> set (snd (Ana ?m2));\n   ?m2 \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\\<rbrakk>\n  \\<Longrightarrow> t \\<sqsubseteq>\\<^sub>s\\<^sub>e\\<^sub>t M\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n       (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n       (\\<forall>k\\<in>set (fst (Ana m)).\n           \\<exists>l<Suc (Max (insert n (steps ` set K))).\n              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n       t\\<^sub>i \\<in> set (snd (Ana m))", "by (metis (no_types, lifting))"], ["proof (state)\nthis:\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t \\<in> set (snd (Ana m)) \\<Longrightarrow>\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t\\<^sub>i \\<in> set (snd (Ana m))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 5: \"?R t\\<^sub>i (Suc (Max (insert n (steps ` set K))))\" when \"?P t n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n       (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n       (\\<forall>k\\<in>set (fst (Ana m)).\n           \\<exists>l<Suc (Max (insert n (steps ` set K))).\n              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n       t\\<^sub>i \\<in> set (snd (Ana m))", "using that 0(1) 1 2 DecomposeN.hyps(1)"], ["proof (prove)\nusing this:\n  t \\<in> M\n  n < Suc (Max (insert n (steps ` set K)))\n  \\<forall>k\\<in>set (fst (Ana t)).\n     \\<exists>l<Suc (Max (insert n (steps ` set K))).\n        \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k\n  t\\<^sub>i \\<in> set (snd (Ana t))\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n       (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n           \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n       (\\<forall>k\\<in>set (fst (Ana m)).\n           \\<exists>l<Suc (Max (insert n (steps ` set K))).\n              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n       t\\<^sub>i \\<in> set (snd (Ana m))", "by blast"], ["proof (state)\nthis:\n  t \\<in> M \\<Longrightarrow>\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t\\<^sub>i \\<in> set (snd (Ana m))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "have 6: ?case when *: \"?Q t n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "obtain g S where g:\n            \"t = Fun g S\" \"public g\" \"length S = arity g\" \"\\<forall>t \\<in> set S. \\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g S.\n        \\<lbrakk>t = Fun g S; public g; length S = arity g;\n         \\<forall>t\\<in>set S.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using *"], ["proof (prove)\nusing this:\n  \\<exists>f T.\n     t = Fun f T \\<and>\n     public f \\<and>\n     length T = arity f \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. (\\<And>g S.\n        \\<lbrakk>t = Fun g S; public g; length S = arity g;\n         \\<forall>t\\<in>set S.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  t = Fun g S\n  public g\n  length S = arity g\n  \\<forall>t\\<in>set S.\n     \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "then"], ["proof (chain)\npicking this:\n  t = Fun g S\n  public g\n  length S = arity g\n  \\<forall>t\\<in>set S.\n     \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t", "obtain l where l: \"l < n\" \"\\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\""], ["proof (prove)\nusing this:\n  t = Fun g S\n  public g\n  length S = arity g\n  \\<forall>t\\<in>set S.\n     \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\n\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>l < n;\n         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 0(1) DecomposeN.hyps(2,4) Ana_fun_subterm[of g S K T]"], ["proof (prove)\nusing this:\n  t = Fun g S\n  public g\n  length S = arity g\n  \\<forall>t\\<in>set S.\n     \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\n  n < Suc (Max (insert n (steps ` set K)))\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n  Ana (Fun g S) = (K, T) \\<Longrightarrow> set T \\<subseteq> set S\n\ngoal (1 subgoal):\n 1. (\\<And>l.\n        \\<lbrakk>l < n;\n         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  l < n\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "have **: \"l < Suc (Max (insert n (steps ` set K)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l < Suc (Max (insert n (steps ` set K)))", "using l(1) 0(1)"], ["proof (prove)\nusing this:\n  l < n\n  n < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. l < Suc (Max (insert n (steps ` set K)))", "by simp"], ["proof (state)\nthis:\n  l < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "using IH1[OF l] less_trans[OF _ **]"], ["proof (prove)\nusing this:\n  t\\<^sub>i \\<in> M \\<or>\n  (\\<exists>f T.\n      t\\<^sub>i = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>la<l.\n             \\<langle>M; la\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>la<l. \\<langle>M; la\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>la<l.\n             \\<langle>M; la\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t\\<^sub>i \\<in> set (snd (Ana m)))\n  ?x < l \\<Longrightarrow> ?x < Suc (Max (insert n (steps ` set K)))\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "by fastforce"], ["proof (state)\nthis:\n  t\\<^sub>i \\<in> M \\<or>\n  (\\<exists>f T.\n      t\\<^sub>i = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t\\<^sub>i \\<in> set (snd (Ana m)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>f T.\n     t = Fun f T \\<and>\n     public f \\<and>\n     length T = arity f \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>l<n.\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t) \\<Longrightarrow>\n  t\\<^sub>i \\<in> M \\<or>\n  (\\<exists>f T.\n      t\\<^sub>i = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t\\<^sub>i \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<forall>m<n.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma))) \\<Longrightarrow>\n        t \\<in> M \\<or>\n        (\\<exists>f T.\n            t = Fun f T \\<and>\n            public f \\<and>\n            length T = arity f \\<and>\n            (\\<forall>t\\<in>set T.\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n        (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l<n.\n                \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k\\<in>set (fst (Ana m)).\n                \\<exists>l<n.\n                   \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n            t \\<in> set (snd (Ana m)));\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  x \\<in> M \\<or>\n                  (\\<exists>f T.\n                      x = Fun f T \\<and>\n                      public f \\<and>\n                      length T = arity f \\<and>\n                      (\\<forall>t\\<in>set T.\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                  (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                      (\\<exists>l<m.\n                          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                      (\\<forall>k\\<in>set (fst (Ana ma)).\n                          \\<exists>l<m.\n                             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                      x \\<in> set (snd (Ana ma)))\\<rbrakk>\n           \\<Longrightarrow> k \\<in> M \\<or>\n                             (\\<exists>f T.\n                                 k = Fun f T \\<and>\n                                 public f \\<and>\n                                 length T = arity f \\<and>\n                                 (\\<forall>t\\<in>set T.\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                             (\\<exists>m\n \\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                                 (\\<exists>l<steps k.\n                                     \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                                 (\\<forall>ka\\<in>set (fst (Ana m)).\n                                     \\<exists>l<steps k.\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ka) \\<and>\n                                 k \\<in> set (snd (Ana m)));\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              x \\<in> M \\<or>\n              (\\<exists>f T.\n                  x = Fun f T \\<and>\n                  public f \\<and>\n                  length T = arity f \\<and>\n                  (\\<forall>t\\<in>set T.\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n              (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                  (\\<exists>l<m.\n                      \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                  (\\<forall>k\\<in>set (fst (Ana ma)).\n                      \\<exists>l<m.\n                         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                  x \\<in> set (snd (Ana ma)))\\<rbrakk>\n       \\<Longrightarrow> t\\<^sub>i \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t\\<^sub>i = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<Suc\n    (Max (insert n (steps ` set K))).\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<Suc\n       (Max (insert n (steps ` set K))).\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t\\<^sub>i \\<in> set (snd (Ana m)))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "using IH2 4 5 6"], ["proof (prove)\nusing this:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t \\<in> set (snd (Ana m)) \\<Longrightarrow>\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t\\<^sub>i \\<in> set (snd (Ana m))\n  t \\<in> M \\<Longrightarrow>\n  \\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n         \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n     (\\<forall>k\\<in>set (fst (Ana m)).\n         \\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n     t\\<^sub>i \\<in> set (snd (Ana m))\n  \\<exists>f T.\n     t = Fun f T \\<and>\n     public f \\<and>\n     length T = arity f \\<and>\n     (\\<forall>t\\<in>set T.\n         \\<exists>l<n.\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t) \\<Longrightarrow>\n  t\\<^sub>i \\<in> M \\<or>\n  (\\<exists>f T.\n      t\\<^sub>i = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t\\<^sub>i \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. t\\<^sub>i \\<in> M \\<or>\n    (\\<exists>f T.\n        t\\<^sub>i = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n            \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<Suc (Max (insert n (steps ` set K))).\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t\\<^sub>i \\<in> set (snd (Ana m)))", "by argo"], ["proof (state)\nthis:\n  t\\<^sub>i \\<in> M \\<or>\n  (\\<exists>f T.\n      t\\<^sub>i = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc (Max (insert n (steps ` set K))).\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc (Max (insert n (steps ` set K))).\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t\\<^sub>i \\<in> set (snd (Ana m)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc n'.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc n'.\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc n'.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      x \\<in> M \\<or>\n                      (\\<exists>f T.\n                          x = Fun f T \\<and>\n                          public f \\<and>\n                          length T = arity f \\<and>\n                          (\\<forall>t\\<in>set T.\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                      (\\<exists>ma\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                          (\\<exists>l<m.\n                              \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n ma) \\<and>\n                          (\\<forall>k\\<in>set (fst (Ana ma)).\n                              \\<exists>l<m.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                          x \\<in> set (snd (Ana ma)));\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> t \\<in> M \\<or>\n                         (\\<exists>f T.\n                             t = Fun f T \\<and>\n                             public f \\<and>\n                             length T = arity f \\<and>\n                             (\\<forall>t\\<in>set T.\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n                         (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n                             (\\<exists>l<n.\n                                 \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n                             (\\<forall>k\\<in>set (fst (Ana m)).\n                                 \\<exists>l<n.\n                                    \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n                             t \\<in> set (snd (Ana m)))", "thus ?thesis"], ["proof (prove)\nusing this:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc n'.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc n'.\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc n'.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "using Suc"], ["proof (prove)\nusing this:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<Suc n'.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<Suc n'.\n          \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<Suc n'.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n  n = Suc n'\n\ngoal (1 subgoal):\n 1. t \\<in> M \\<or>\n    (\\<exists>f T.\n        t = Fun f T \\<and>\n        public f \\<and>\n        length T = arity f \\<and>\n        (\\<forall>t\\<in>set T.\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        t \\<in> set (snd (Ana m)))", "by fast"], ["proof (state)\nthis:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  t \\<in> M \\<or>\n  (\\<exists>f T.\n      t = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      t \\<in> set (snd (Ana m)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma restricted_deduct_if_deduct:\n  assumes M: \"\\<forall>m \\<in> M. \\<forall>f T. Fun f T \\<sqsubseteq> m \\<longrightarrow> P (Fun f T)\"\n  and P_subterm: \"\\<forall>f T t. M \\<turnstile> Fun f T \\<longrightarrow> P (Fun f T) \\<longrightarrow> t \\<in> set T \\<longrightarrow> P t\"\n  and P_Ana_key: \"\\<forall>t K T k. M \\<turnstile> t \\<longrightarrow> P t \\<longrightarrow> Ana t = (K, T) \\<longrightarrow> M \\<turnstile> k \\<longrightarrow> k \\<in> set K \\<longrightarrow> P k\"\n  and m: \"M \\<turnstile> m\" \"P m\"\n  shows \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "assume \"\\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n m\""], ["proof (state)\nthis:\n  \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "hence ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "using m(2)"], ["proof (prove)\nusing this:\n  \\<langle>M; k\\<rangle> \\<turnstile>\\<^sub>n m\n  P m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "proof (induction k arbitrary: m rule: nat_less_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n m.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "case (1 n m)"], ["proof (state)\nthis:\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m\n  P m\n\ngoal (1 subgoal):\n 1. \\<And>n m.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "thus ?case"], ["proof (prove)\nusing this:\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m\n  P m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "proof (cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<forall>m<n.\n                \\<forall>x.\n                   \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                   P x \\<longrightarrow>\n                   \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n     \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m; n = 0\\<rbrakk>\n    \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n 2. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<forall>m<n.\n                \\<forall>x.\n                   \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                   P x \\<longrightarrow>\n                   \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n     \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m; n = 0\\<rbrakk>\n    \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n 2. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "hence \"m \\<in> M\""], ["proof (prove)\nusing this:\n  n = 0\n\ngoal (1 subgoal):\n 1. m \\<in> M", "using deduct_zero_in_ik \"1.prems\"(1)"], ["proof (prove)\nusing this:\n  n = 0\n  \\<langle>?M; 0\\<rangle> \\<turnstile>\\<^sub>n ?t \\<Longrightarrow>\n  ?t \\<in> ?M\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m\n\ngoal (1 subgoal):\n 1. m \\<in> M", "by metis"], ["proof (state)\nthis:\n  m \\<in> M\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<forall>m<n.\n                \\<forall>x.\n                   \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                   P x \\<longrightarrow>\n                   \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n     \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m; n = 0\\<rbrakk>\n    \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n 2. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "thus ?thesis"], ["proof (prove)\nusing this:\n  m \\<in> M\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "by auto"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "case (Suc n')"], ["proof (state)\nthis:\n  n = Suc n'\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "hence \"\\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n m\"\n              \"\\<forall>m < Suc n'. \\<forall>x. (\\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x) \\<longrightarrow> P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\""], ["proof (prove)\nusing this:\n  n = Suc n'\n\ngoal (1 subgoal):\n 1. \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n m &&&\n    \\<forall>m<Suc n'.\n       \\<forall>x.\n          \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n          P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "using \"1.prems\" \"1.IH\""], ["proof (prove)\nusing this:\n  n = Suc n'\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m\n  P m\n  \\<forall>m<n.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n\ngoal (1 subgoal):\n 1. \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n m &&&\n    \\<forall>m<Suc n'.\n       \\<forall>x.\n          \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n          P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "by blast+"], ["proof (state)\nthis:\n  \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n m\n  \\<forall>m<Suc n'.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>\\<forall>m<n.\n                   \\<forall>x.\n                      \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                      P x \\<longrightarrow>\n                      \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n m; P m;\n        n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n m\n  \\<forall>m<Suc n'.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "using \"1.prems\"(2)"], ["proof (prove)\nusing this:\n  \\<langle>M; Suc n'\\<rangle> \\<turnstile>\\<^sub>n m\n  \\<forall>m<Suc n'.\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  P m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "proof (induction m rule: intruder_deduct_num_induct)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "case (ComposeN T f steps)"], ["proof (state)\nthis:\n  length T = arity f\n  public f\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M; steps ?t2\\<rangle> \\<turnstile>\\<^sub>n ?t2\n  \\<lbrakk>?t2 \\<in> set T;\n   \\<forall>m<steps ?t2.\n      \\<forall>x.\n         \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n         P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n   P ?t2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n  \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  P (Fun f T)\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have *: \"steps t < Suc (Max (insert 0 (steps ` set T)))\" when \"t \\<in> set T\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. steps t < Suc (Max (insert 0 (steps ` set T)))", "using Max_less_iff[of \"insert 0 (steps ` set T)\"] that"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (insert 0 (steps ` set T));\n   insert 0 (steps ` set T) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert 0 (steps ` set T)) < ?x) =\n                    (\\<forall>a\\<in>insert 0 (steps ` set T). a < ?x)\n  t \\<in> set T\n\ngoal (1 subgoal):\n 1. steps t < Suc (Max (insert 0 (steps ` set T)))", "by blast"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  steps ?t2 < Suc (Max (insert 0 (steps ` set T)))\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have **: \"P t\" when \"t \\<in> set T\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. P t", "using P_subterm ComposeN.prems(2) that\n                  Fun_param_is_subterm[OF that]\n                  intruder_deduct.Compose[OF ComposeN.hyps(1,2)]\n                  deduct_if_deduct_num[OF ComposeN.hyps(3)]"], ["proof (prove)\nusing this:\n  \\<forall>f T t.\n     M \\<turnstile> Fun f T \\<longrightarrow>\n     P (Fun f T) \\<longrightarrow> t \\<in> set T \\<longrightarrow> P t\n  P (Fun f T)\n  t \\<in> set T\n  t \\<sqsubset> Fun ?f T\n  (\\<And>t.\n      t \\<in> set T \\<Longrightarrow> ?M \\<turnstile> t) \\<Longrightarrow>\n  ?M \\<turnstile> Fun f T\n  ?t \\<in> set T \\<Longrightarrow> M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. P t", "by blast"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow> P ?t2\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r t\" when \"t \\<in> set T\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "using ComposeN.prems(1) ComposeN.hyps(3)[OF that] *[OF that] **[OF that]"], ["proof (prove)\nusing this:\n  \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t\n  steps t < Suc (Max (insert 0 (steps ` set T)))\n  P t\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "by blast"], ["proof (state)\nthis:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n\ngoal (3 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>T f steps.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           \\<langle>M; steps t\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<And>t.\n           \\<lbrakk>t \\<in> set T;\n            \\<forall>m<steps t.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P t\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        \\<forall>m<Suc (Max (insert 0 (steps ` set T))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n 3. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "thus ?case"], ["proof (prove)\nusing this:\n  ?t2 \\<in> set T \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?t2\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T", "by (metis intruder_deduct_restricted.ComposeR[OF ComposeN.hyps(1,2)] ComposeN.prems(2))"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r Fun f T\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "case (DecomposeN t K T t\\<^sub>i steps l)"], ["proof (state)\nthis:\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  t\\<^sub>i \\<in> set T\n  \\<lbrakk>\\<forall>m<l.\n              \\<forall>x.\n                 \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                 P x \\<longrightarrow>\n                 \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n   P t\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<lbrakk>?k2 \\<in> set K;\n   \\<forall>m<steps ?k2.\n      \\<forall>x.\n         \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n         P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n   P ?k2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  \\<forall>m<Suc (Max (insert l (steps ` set K))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  P t\\<^sub>i\n\ngoal (2 subgoals):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n 2. \\<And>t K T t\\<^sub>i steps n.\n       \\<lbrakk>\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n t;\n        \\<lbrakk>\\<forall>m<n.\n                    \\<forall>x.\n                       \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                       P x \\<longrightarrow>\n                       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n         P t\\<rbrakk>\n        \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t;\n        Ana t = (K, T);\n        \\<And>k.\n           k \\<in> set K \\<Longrightarrow>\n           \\<langle>M; steps k\\<rangle> \\<turnstile>\\<^sub>n k;\n        t\\<^sub>i \\<in> set T;\n        \\<And>k.\n           \\<lbrakk>k \\<in> set K;\n            \\<forall>m<steps k.\n               \\<forall>x.\n                  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n                  P x \\<longrightarrow>\n                  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n            P k\\<rbrakk>\n           \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k;\n        \\<forall>m<Suc (Max (insert n (steps ` set K))).\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<^sub>i\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "proof (cases \"P t\")"], ["proof (state)\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "case True"], ["proof (state)\nthis:\n  P t\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "hence \"\\<And>k. k \\<in> set K \\<Longrightarrow> P k\""], ["proof (prove)\nusing this:\n  P t\n\ngoal (1 subgoal):\n 1. \\<And>k. k \\<in> set K \\<Longrightarrow> P k", "using P_Ana_key DecomposeN.hyps(1,2,3) deduct_if_deduct_num"], ["proof (prove)\nusing this:\n  P t\n  \\<forall>t K T k.\n     M \\<turnstile> t \\<longrightarrow>\n     P t \\<longrightarrow>\n     Ana t = (K, T) \\<longrightarrow>\n     M \\<turnstile> k \\<longrightarrow> k \\<in> set K \\<longrightarrow> P k\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\n  Ana t = (K, T)\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M; steps ?k2\\<rangle> \\<turnstile>\\<^sub>n ?k2\n  \\<langle>?M; ?k\\<rangle> \\<turnstile>\\<^sub>n ?t \\<Longrightarrow>\n  ?M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. \\<And>k. k \\<in> set K \\<Longrightarrow> P k", "by blast"], ["proof (state)\nthis:\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have\n                \"\\<And>k m x. k \\<in> set K \\<Longrightarrow> m < steps k \\<Longrightarrow> \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<Longrightarrow> P x \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k m x.\n       \\<lbrakk>k \\<in> set K; m < steps k;\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x; P x\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k m x.\n       \\<lbrakk>k \\<in> set K; m < steps k;\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x; P x\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "fix k m x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k m x.\n       \\<lbrakk>k \\<in> set K; m < steps k;\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x; P x\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "assume *: \"k \\<in> set K\" \"m < steps k\" \"\\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x\" \"P x\""], ["proof (state)\nthis:\n  k \\<in> set K\n  m < steps k\n  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x\n  P x\n\ngoal (1 subgoal):\n 1. \\<And>k m x.\n       \\<lbrakk>k \\<in> set K; m < steps k;\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x; P x\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "have \"steps k \\<in> insert l (steps ` set K)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. steps k \\<in> insert l (steps ` set K)", "using *(1)"], ["proof (prove)\nusing this:\n  k \\<in> set K\n\ngoal (1 subgoal):\n 1. steps k \\<in> insert l (steps ` set K)", "by simp"], ["proof (state)\nthis:\n  steps k \\<in> insert l (steps ` set K)\n\ngoal (1 subgoal):\n 1. \\<And>k m x.\n       \\<lbrakk>k \\<in> set K; m < steps k;\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x; P x\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "hence \"m < Suc (Max (insert l (steps ` set K)))\""], ["proof (prove)\nusing this:\n  steps k \\<in> insert l (steps ` set K)\n\ngoal (1 subgoal):\n 1. m < Suc (Max (insert l (steps ` set K)))", "using less_trans[OF *(2), of \"Suc (Max (insert l (steps ` set K)))\"]\n                      Max_less_iff[of \"insert l (steps ` set K)\"\n                                      \"Suc (Max (insert l (steps ` set K)))\"]"], ["proof (prove)\nusing this:\n  steps k \\<in> insert l (steps ` set K)\n  steps k < Suc (Max (insert l (steps ` set K))) \\<Longrightarrow>\n  m < Suc (Max (insert l (steps ` set K)))\n  \\<lbrakk>finite (insert l (steps ` set K));\n   insert l (steps ` set K) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert l (steps ` set K))\n                     < Suc (Max (insert l (steps ` set K)))) =\n                    (\\<forall>a\\<in>insert l (steps ` set K).\n                        a < Suc (Max (insert l (steps ` set K))))\n\ngoal (1 subgoal):\n 1. m < Suc (Max (insert l (steps ` set K)))", "by auto"], ["proof (state)\nthis:\n  m < Suc (Max (insert l (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<And>k m x.\n       \\<lbrakk>k \\<in> set K; m < steps k;\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x; P x\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "thus \"\\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\""], ["proof (prove)\nusing this:\n  m < Suc (Max (insert l (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "using DecomposeN.prems(1) *(3,4)"], ["proof (prove)\nusing this:\n  m < Suc (Max (insert l (steps ` set K)))\n  \\<forall>m<Suc (Max (insert l (steps ` set K))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x\n  P x\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x", "by simp"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?k2 \\<in> set K; ?m2 < steps ?k2;\n   \\<langle>M; ?m2\\<rangle> \\<turnstile>\\<^sub>n ?x2; P ?x2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?x2\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "ultimately"], ["proof (chain)\npicking this:\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n  \\<lbrakk>?k2 \\<in> set K; ?m2 < steps ?k2;\n   \\<langle>M; ?m2\\<rangle> \\<turnstile>\\<^sub>n ?x2; P ?x2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?x2", "have \"\\<And>k. k \\<in> set K \\<Longrightarrow> \\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r k\""], ["proof (prove)\nusing this:\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n  \\<lbrakk>?k2 \\<in> set K; ?m2 < steps ?k2;\n   \\<langle>M; ?m2\\<rangle> \\<turnstile>\\<^sub>n ?x2; P ?x2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?x2\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> set K \\<Longrightarrow>\n       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k", "using DecomposeN.IH(2)"], ["proof (prove)\nusing this:\n  ?k2 \\<in> set K \\<Longrightarrow> P ?k2\n  \\<lbrakk>?k2 \\<in> set K; ?m2 < steps ?k2;\n   \\<langle>M; ?m2\\<rangle> \\<turnstile>\\<^sub>n ?x2; P ?x2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?x2\n  \\<lbrakk>?k2 \\<in> set K;\n   \\<forall>m<steps ?k2.\n      \\<forall>x.\n         \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n         P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n   P ?k2\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n\ngoal (1 subgoal):\n 1. \\<And>k.\n       k \\<in> set K \\<Longrightarrow>\n       \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r k", "by auto"], ["proof (state)\nthis:\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "moreover"], ["proof (state)\nthis:\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "using True DecomposeN.prems(1) DecomposeN.hyps(1) le_imp_less_Suc\n                    Max_less_iff[of \"insert l (steps ` set K)\" \"Suc (Max (insert l (steps ` set K)))\"]"], ["proof (prove)\nusing this:\n  P t\n  \\<forall>m<Suc (Max (insert l (steps ` set K))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t\n  ?m \\<le> ?n \\<Longrightarrow> ?m < Suc ?n\n  \\<lbrakk>finite (insert l (steps ` set K));\n   insert l (steps ` set K) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert l (steps ` set K))\n                     < Suc (Max (insert l (steps ` set K)))) =\n                    (\\<forall>a\\<in>insert l (steps ` set K).\n                        a < Suc (Max (insert l (steps ` set K))))\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "by blast"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n\ngoal (2 subgoals):\n 1. P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n 2. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "ultimately"], ["proof (chain)\npicking this:\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "show ?thesis"], ["proof (prove)\nusing this:\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "using intruder_deduct_restricted.DecomposeR[OF _ DecomposeN.hyps(2)\n                                                             _ DecomposeN.hyps(4)]"], ["proof (prove)\nusing this:\n  ?k2 \\<in> set K \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r ?k2\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\n  \\<lbrakk>\\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r t;\n   \\<And>k.\n      k \\<in> set K \\<Longrightarrow>\n      \\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r k\\<rbrakk>\n  \\<Longrightarrow> \\<langle>?M;?Q\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "by metis"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "case False"], ["proof (state)\nthis:\n  \\<not> P t\n\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "obtain g S where gS: \"t = Fun g S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g S. t = Fun g S \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using DecomposeN.hyps(2,4)"], ["proof (prove)\nusing this:\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n\ngoal (1 subgoal):\n 1. (\\<And>g S. t = Fun g S \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases t) moura+"], ["proof (state)\nthis:\n  t = Fun g S\n\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "hence *: \"Fun g S \\<sqsubseteq> t\" \"\\<not>P (Fun g S)\""], ["proof (prove)\nusing this:\n  t = Fun g S\n\ngoal (1 subgoal):\n 1. Fun g S \\<sqsubseteq> t &&& \\<not> P (Fun g S)", "using False"], ["proof (prove)\nusing this:\n  t = Fun g S\n  \\<not> P t\n\ngoal (1 subgoal):\n 1. Fun g S \\<sqsubseteq> t &&& \\<not> P (Fun g S)", "by force+"], ["proof (state)\nthis:\n  Fun g S \\<sqsubseteq> t\n  \\<not> P (Fun g S)\n\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "have \"\\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "using gS DecomposeN.hyps(2,4) Ana_fun_subterm[of g S K T]\n                    deduct_normalize[of M \"\\<lambda>f T. P (Fun f T)\", OF M DecomposeN.hyps(1) *]"], ["proof (prove)\nusing this:\n  t = Fun g S\n  Ana t = (K, T)\n  t\\<^sub>i \\<in> set T\n  Ana (Fun g S) = (K, T) \\<Longrightarrow> set T \\<subseteq> set S\n  \\<exists>la\\<le>l.\n     \\<langle>M; la\\<rangle> \\<turnstile>\\<^sub>n Fun g S \\<and>\n     (\\<forall>t\\<in>set S.\n         \\<exists>j<la. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t)\n\ngoal (1 subgoal):\n 1. \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "by force"], ["proof (state)\nthis:\n  \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "hence \"\\<exists>j<Suc (Max (insert l (steps ` set K))). \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\""], ["proof (prove)\nusing this:\n  \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<exists>j<Suc (Max (insert l (steps ` set K))).\n       \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "using Max_less_iff[of \"insert l (steps ` set K)\"\n                                    \"Suc (Max (insert l (steps ` set K)))\"]\n                    less_trans[of _ l \"Suc (Max (insert l (steps ` set K)))\"]"], ["proof (prove)\nusing this:\n  \\<exists>j<l. \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n  \\<lbrakk>finite (insert l (steps ` set K));\n   insert l (steps ` set K) \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (Max (insert l (steps ` set K))\n                     < Suc (Max (insert l (steps ` set K)))) =\n                    (\\<forall>a\\<in>insert l (steps ` set K).\n                        a < Suc (Max (insert l (steps ` set K))))\n  \\<lbrakk>?x < l; l < Suc (Max (insert l (steps ` set K)))\\<rbrakk>\n  \\<Longrightarrow> ?x < Suc (Max (insert l (steps ` set K)))\n\ngoal (1 subgoal):\n 1. \\<exists>j<Suc (Max (insert l (steps ` set K))).\n       \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i", "by blast"], ["proof (state)\nthis:\n  \\<exists>j<Suc (Max (insert l (steps ` set K))).\n     \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<not> P t \\<Longrightarrow>\n    \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>j<Suc (Max (insert l (steps ` set K))).\n     \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "using DecomposeN.prems(1,2)"], ["proof (prove)\nusing this:\n  \\<exists>j<Suc (Max (insert l (steps ` set K))).\n     \\<langle>M; j\\<rangle> \\<turnstile>\\<^sub>n t\\<^sub>i\n  \\<forall>m<Suc (Max (insert l (steps ` set K))).\n     \\<forall>x.\n        \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n        P x \\<longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x\n  P t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i", "by meson"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t\\<^sub>i\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>t \\<in> M;\n        \\<forall>m<0.\n           \\<forall>x.\n              \\<langle>M; m\\<rangle> \\<turnstile>\\<^sub>n x \\<longrightarrow>\n              P x \\<longrightarrow>\n              \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r x;\n        P t\\<rbrakk>\n       \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r t", "qed auto"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "}"], ["proof (state)\nthis:\n  \\<langle>M; ?k4\\<rangle> \\<turnstile>\\<^sub>n m \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<langle>M; ?k4\\<rangle> \\<turnstile>\\<^sub>n m \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "using deduct_num_if_deduct m(1)"], ["proof (prove)\nusing this:\n  \\<langle>M; ?k4\\<rangle> \\<turnstile>\\<^sub>n m \\<Longrightarrow>\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n  ?M \\<turnstile> ?t \\<Longrightarrow>\n  \\<exists>k. \\<langle>?M; k\\<rangle> \\<turnstile>\\<^sub>n ?t\n  M \\<turnstile> m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "by metis"], ["proof (state)\nthis:\n  \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma restricted_deduct_if_deduct':\n  assumes \"\\<forall>m \\<in> M. P m\"\n    and \"\\<forall>t t'. P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\"\n    and \"\\<forall>t K T k. P t \\<longrightarrow> Ana t = (K, T) \\<longrightarrow> k \\<in> set K \\<longrightarrow> P k\"\n    and \"M \\<turnstile> m\" \"P m\"\n  shows \"\\<langle>M; P\\<rangle> \\<turnstile>\\<^sub>r m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "using restricted_deduct_if_deduct[of M P m] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>m\\<in>M.\n              \\<forall>f T.\n                 Fun f T \\<sqsubseteq> m \\<longrightarrow> P (Fun f T);\n   \\<forall>f T t.\n      M \\<turnstile> Fun f T \\<longrightarrow>\n      P (Fun f T) \\<longrightarrow> t \\<in> set T \\<longrightarrow> P t;\n   \\<forall>t K T k.\n      M \\<turnstile> t \\<longrightarrow>\n      P t \\<longrightarrow>\n      Ana t = (K, T) \\<longrightarrow>\n      M \\<turnstile> k \\<longrightarrow>\n      k \\<in> set K \\<longrightarrow> P k;\n   M \\<turnstile> m; P m\\<rbrakk>\n  \\<Longrightarrow> \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m\n  \\<forall>m\\<in>M. P m\n  \\<forall>t t'.\n     P t \\<longrightarrow> t' \\<sqsubseteq> t \\<longrightarrow> P t'\n  \\<forall>t K T k.\n     P t \\<longrightarrow>\n     Ana t = (K, T) \\<longrightarrow> k \\<in> set K \\<longrightarrow> P k\n  M \\<turnstile> m\n  P m\n\ngoal (1 subgoal):\n 1. \\<langle>M;P\\<rangle> \\<turnstile>\\<^sub>r m", "by blast"], ["", "lemma private_const_deduct:\n  assumes c: \"\\<not>public c\" \"M \\<turnstile> (Fun c []::('fun,'var) term)\"\n  shows \"Fun c [] \\<in> M \\<or>\n         (\\<exists>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M. M \\<turnstile> m \\<and> (\\<forall>k \\<in> set (fst (Ana m)). M \\<turnstile> m) \\<and>\n                             Fun c [] \\<in> set (snd (Ana m)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        M \\<turnstile> m \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        M \\<turnstile> m \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "obtain n where \"\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c\n               [] \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using c(2) deduct_num_if_deduct"], ["proof (prove)\nusing this:\n  M \\<turnstile> Fun c []\n  ?M \\<turnstile> ?t \\<Longrightarrow>\n  \\<exists>k. \\<langle>?M; k\\<rangle> \\<turnstile>\\<^sub>n ?t\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c\n               [] \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by moura"], ["proof (state)\nthis:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        M \\<turnstile> m \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "hence \"Fun c [] \\<in> M \\<or>\n         (\\<exists>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n            (\\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n            (\\<forall>k \\<in> set (fst (Ana m)). \\<exists>l < n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and> Fun c [] \\<in> set (snd (Ana m)))\""], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "using deduct_inv[of M n \"Fun c []\"] c(1)"], ["proof (prove)\nusing this:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c [] \\<Longrightarrow>\n  Fun c [] \\<in> M \\<or>\n  (\\<exists>f T.\n      Fun c [] = Fun f T \\<and>\n      public f \\<and>\n      length T = arity f \\<and>\n      (\\<forall>t\\<in>set T.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      Fun c [] \\<in> set (snd (Ana m)))\n  \\<not> public c\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)).\n            \\<exists>l<n.\n               \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "by fast"], ["proof (state)\nthis:\n  Fun c [] \\<in> M \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      Fun c [] \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        M \\<turnstile> m \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "thus ?thesis"], ["proof (prove)\nusing this:\n  Fun c [] \\<in> M \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      Fun c [] \\<in> set (snd (Ana m)))\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        M \\<turnstile> m \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "using deduct_if_deduct_num[of M]"], ["proof (prove)\nusing this:\n  Fun c [] \\<in> M \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      Fun c [] \\<in> set (snd (Ana m)))\n  \\<langle>M; ?k\\<rangle> \\<turnstile>\\<^sub>n ?t \\<Longrightarrow>\n  M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. Fun c [] \\<in> M \\<or>\n    (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n        M \\<turnstile> m \\<and>\n        (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n        Fun c [] \\<in> set (snd (Ana m)))", "by blast"], ["proof (state)\nthis:\n  Fun c [] \\<in> M \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      M \\<turnstile> m \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)). M \\<turnstile> m) \\<and>\n      Fun c [] \\<in> set (snd (Ana m)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma private_fun_deduct_in_ik'':\n  assumes t: \"M \\<turnstile> Fun f T\" \"Fun c [] \\<in> set T\" \"\\<forall>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M. Fun f T \\<notin> set (snd (Ana m))\"\n    and c: \"\\<not>public c\" \"Fun c [] \\<notin> M\" \"\\<forall>m \\<in> subterms\\<^sub>s\\<^sub>e\\<^sub>t M. Fun c [] \\<notin> set (snd (Ana m))\"\n  shows \"Fun f T \\<in> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "have *: \"\\<nexists>n. \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<nexists>n. \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []", "using private_const_deduct[OF c(1)] c(2,3) deduct_if_deduct_num"], ["proof (prove)\nusing this:\n  ?M \\<turnstile> Fun c [] \\<Longrightarrow>\n  Fun c [] \\<in> ?M \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t ?M.\n      ?M \\<turnstile> m \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)). ?M \\<turnstile> m) \\<and>\n      Fun c [] \\<in> set (snd (Ana m)))\n  Fun c [] \\<notin> M\n  \\<forall>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     Fun c [] \\<notin> set (snd (Ana m))\n  \\<langle>?M; ?k\\<rangle> \\<turnstile>\\<^sub>n ?t \\<Longrightarrow>\n  ?M \\<turnstile> ?t\n\ngoal (1 subgoal):\n 1. \\<nexists>n. \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []", "by blast"], ["proof (state)\nthis:\n  \\<nexists>n. \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\n\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "obtain n where n: \"\\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun f T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun f\n               T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using t(1) deduct_num_if_deduct"], ["proof (prove)\nusing this:\n  M \\<turnstile> Fun f T\n  ?M \\<turnstile> ?t \\<Longrightarrow>\n  \\<exists>k. \\<langle>?M; k\\<rangle> \\<turnstile>\\<^sub>n ?t\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun f\n               T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun f T\n\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "using deduct_inv[OF n] t(2,3) *"], ["proof (prove)\nusing this:\n  Fun f T \\<in> M \\<or>\n  (\\<exists>fa Ta.\n      Fun f T = Fun fa Ta \\<and>\n      public fa \\<and>\n      length Ta = arity fa \\<and>\n      (\\<forall>t\\<in>set Ta.\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n t)) \\<or>\n  (\\<exists>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n      (\\<exists>l<n. \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n m) \\<and>\n      (\\<forall>k\\<in>set (fst (Ana m)).\n          \\<exists>l<n.\n             \\<langle>M; l\\<rangle> \\<turnstile>\\<^sub>n k) \\<and>\n      Fun f T \\<in> set (snd (Ana m)))\n  Fun c [] \\<in> set T\n  \\<forall>m\\<in>subterms\\<^sub>s\\<^sub>e\\<^sub>t M.\n     Fun f T \\<notin> set (snd (Ana m))\n  \\<nexists>n. \\<langle>M; n\\<rangle> \\<turnstile>\\<^sub>n Fun c []\n\ngoal (1 subgoal):\n 1. Fun f T \\<in> M", "by blast"], ["proof (state)\nthis:\n  Fun f T \\<in> M\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "subsection \\<open>Executable Definitions for Code Generation\\<close>"], ["", "fun intruder_synth' where\n  \"intruder_synth' pu ar M (Var x) = (Var x \\<in> M)\"\n| \"intruder_synth' pu ar M (Fun f T) = (\n    Fun f T \\<in> M \\<or> (pu f \\<and> length T = ar f \\<and> list_all (intruder_synth' pu ar M) T))\""], ["", "definition \"wf\\<^sub>t\\<^sub>r\\<^sub>m' ar t \\<equiv> (\\<forall>s \\<in> subterms t. is_Fun s \\<longrightarrow> ar (the_Fun s) = length (args s))\""], ["", "definition \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s' ar M \\<equiv> (\\<forall>t \\<in> M. wf\\<^sub>t\\<^sub>r\\<^sub>m' ar t)\""], ["", "definition \"analyzed_in' An pu ar t M \\<equiv> (case An t of\n    (K,T) \\<Rightarrow> (\\<forall>k \\<in> set K. intruder_synth' pu ar M k) \\<longrightarrow> (\\<forall>s \\<in> set T. intruder_synth' pu ar M s))\""], ["", "lemma (in intruder_model) intruder_synth'_induct[consumes 1, case_names Var Fun]:\n  assumes \"intruder_synth' public arity M t\"\n          \"\\<And>x. intruder_synth' public arity M (Var x) \\<Longrightarrow> P (Var x)\"\n          \"\\<And>f T. (\\<And>z. z \\<in> set T \\<Longrightarrow> intruder_synth' public arity M z \\<Longrightarrow> P z) \\<Longrightarrow>\n                  intruder_synth' public arity M (Fun f T) \\<Longrightarrow> P (Fun f T) \"\n  shows \"P t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P t", "using assms"], ["proof (prove)\nusing this:\n  intruder_synth' public arity M t\n  intruder_synth' public arity M (Var ?x2) \\<Longrightarrow> P (Var ?x2)\n  \\<lbrakk>\\<And>z.\n              \\<lbrakk>z \\<in> set ?T2;\n               intruder_synth' public arity M z\\<rbrakk>\n              \\<Longrightarrow> P z;\n   intruder_synth' public arity M (Fun ?f2 ?T2)\\<rbrakk>\n  \\<Longrightarrow> P (Fun ?f2 ?T2)\n\ngoal (1 subgoal):\n 1. P t", "by (induct public arity M t rule: intruder_synth'.induct) auto"], ["", "lemma (in intruder_model) wf\\<^sub>t\\<^sub>r\\<^sub>m_code[code_unfold]:\n  \"wf\\<^sub>t\\<^sub>r\\<^sub>m t = wf\\<^sub>t\\<^sub>r\\<^sub>m' arity t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m t = wf\\<^sub>t\\<^sub>r\\<^sub>m' arity t", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m_def wf\\<^sub>t\\<^sub>r\\<^sub>m'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>f T.\n        Fun f T \\<sqsubseteq> t \\<longrightarrow> length T = arity f) =\n    (\\<forall>s\\<in>subterms t.\n        is_Fun s \\<longrightarrow> arity (the_Fun s) = length (args s))", "by auto"], ["", "lemma (in intruder_model) wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s_code[code_unfold]:\n  \"wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M = wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s' arity M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M =\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s' arity M", "using wf\\<^sub>t\\<^sub>r\\<^sub>m_code"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t = wf\\<^sub>t\\<^sub>r\\<^sub>m' arity ?t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M =\n    wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s' arity M", "unfolding wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s'_def"], ["proof (prove)\nusing this:\n  wf\\<^sub>t\\<^sub>r\\<^sub>m ?t = wf\\<^sub>t\\<^sub>r\\<^sub>m' arity ?t\n\ngoal (1 subgoal):\n 1. wf\\<^sub>t\\<^sub>r\\<^sub>m\\<^sub>s M =\n    (\\<forall>t\\<in>M. wf\\<^sub>t\\<^sub>r\\<^sub>m' arity t)", "by auto"], ["", "lemma (in intruder_model) intruder_synth_code[code_unfold]:\n  \"intruder_synth M t = intruder_synth' public arity M t\"\n  (is \"?A \\<longleftrightarrow> ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (M \\<turnstile>\\<^sub>c t) = intruder_synth' public arity M t", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<turnstile>\\<^sub>c t \\<Longrightarrow>\n    intruder_synth' public arity M t\n 2. intruder_synth' public arity M t \\<Longrightarrow>\n    M \\<turnstile>\\<^sub>c t", "show \"?A \\<Longrightarrow> ?B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<turnstile>\\<^sub>c t \\<Longrightarrow>\n    intruder_synth' public arity M t", "proof (induction t rule: intruder_synth_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth' public arity M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_synth' public arity M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth' public arity M (Fun f T)", "case (AxiomC t)"], ["proof (state)\nthis:\n  t \\<in> M\n\ngoal (2 subgoals):\n 1. \\<And>t. t \\<in> M \\<Longrightarrow> intruder_synth' public arity M t\n 2. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_synth' public arity M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth' public arity M (Fun f T)", "thus ?case"], ["proof (prove)\nusing this:\n  t \\<in> M\n\ngoal (1 subgoal):\n 1. intruder_synth' public arity M t", "by (cases t) auto"], ["proof (state)\nthis:\n  intruder_synth' public arity M t\n\ngoal (1 subgoal):\n 1. \\<And>T f.\n       \\<lbrakk>length T = arity f; public f;\n        \\<And>t. t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t;\n        \\<And>t.\n           t \\<in> set T \\<Longrightarrow>\n           intruder_synth' public arity M t\\<rbrakk>\n       \\<Longrightarrow> intruder_synth' public arity M (Fun f T)", "qed (fastforce simp add: list_all_iff)"], ["proof (state)\nthis:\n  M \\<turnstile>\\<^sub>c t \\<Longrightarrow>\n  intruder_synth' public arity M t\n\ngoal (1 subgoal):\n 1. intruder_synth' public arity M t \\<Longrightarrow>\n    M \\<turnstile>\\<^sub>c t", "show \"?B \\<Longrightarrow> ?A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. intruder_synth' public arity M t \\<Longrightarrow>\n    M \\<turnstile>\\<^sub>c t", "proof (induction t rule: intruder_synth'_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       intruder_synth' public arity M (Var x) \\<Longrightarrow>\n       intruder_synth M (Var x)\n 2. \\<And>f T.\n       \\<lbrakk>\\<And>z.\n                   \\<lbrakk>z \\<in> set T;\n                    intruder_synth' public arity M z\\<rbrakk>\n                   \\<Longrightarrow> intruder_synth M z;\n        intruder_synth' public arity M (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)", "case (Fun f T)"], ["proof (state)\nthis:\n  \\<lbrakk>?z2 \\<in> set T; intruder_synth' public arity M ?z2\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M ?z2\n  intruder_synth' public arity M (Fun f T)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       intruder_synth' public arity M (Var x) \\<Longrightarrow>\n       intruder_synth M (Var x)\n 2. \\<And>f T.\n       \\<lbrakk>\\<And>z.\n                   \\<lbrakk>z \\<in> set T;\n                    intruder_synth' public arity M z\\<rbrakk>\n                   \\<Longrightarrow> intruder_synth M z;\n        intruder_synth' public arity M (Fun f T)\\<rbrakk>\n       \\<Longrightarrow> intruder_synth M (Fun f T)", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>?z2 \\<in> set T; intruder_synth' public arity M ?z2\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M ?z2\n  intruder_synth' public arity M (Fun f T)\n\ngoal (1 subgoal):\n 1. intruder_synth M (Fun f T)", "proof (cases \"Fun f T \\<in> M\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)\n 2. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)", "case False"], ["proof (state)\nthis:\n  Fun f T \\<notin> M\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)\n 2. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)", "hence \"public f\" \"length T = arity f\" \"list_all (intruder_synth' public arity M) T\""], ["proof (prove)\nusing this:\n  Fun f T \\<notin> M\n\ngoal (1 subgoal):\n 1. public f &&&\n    length T = arity f &&& list_all (intruder_synth' public arity M) T", "using Fun.hyps"], ["proof (prove)\nusing this:\n  Fun f T \\<notin> M\n  intruder_synth' public arity M (Fun f T)\n\ngoal (1 subgoal):\n 1. public f &&&\n    length T = arity f &&& list_all (intruder_synth' public arity M) T", "by fastforce+"], ["proof (state)\nthis:\n  public f\n  length T = arity f\n  list_all (intruder_synth' public arity M) T\n\ngoal (2 subgoals):\n 1. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)\n 2. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<notin> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)", "thus ?thesis"], ["proof (prove)\nusing this:\n  public f\n  length T = arity f\n  list_all (intruder_synth' public arity M) T\n\ngoal (1 subgoal):\n 1. intruder_synth M (Fun f T)", "using Fun.IH intruder_synth.ComposeC[of T f M] Ball_set[of T]"], ["proof (prove)\nusing this:\n  public f\n  length T = arity f\n  list_all (intruder_synth' public arity M) T\n  \\<lbrakk>?z2 \\<in> set T; intruder_synth' public arity M ?z2\\<rbrakk>\n  \\<Longrightarrow> intruder_synth M ?z2\n  \\<lbrakk>length T = arity f; public f;\n   \\<And>t.\n      t \\<in> set T \\<Longrightarrow> M \\<turnstile>\\<^sub>c t\\<rbrakk>\n  \\<Longrightarrow> M \\<turnstile>\\<^sub>c Fun f T\n  Ball (set T) ?P = list_all ?P T\n\ngoal (1 subgoal):\n 1. intruder_synth M (Fun f T)", "by blast"], ["proof (state)\nthis:\n  intruder_synth M (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>z.\n                \\<lbrakk>z \\<in> set T;\n                 intruder_synth' public arity M z\\<rbrakk>\n                \\<Longrightarrow> intruder_synth M z;\n     intruder_synth' public arity M (Fun f T); Fun f T \\<in> M\\<rbrakk>\n    \\<Longrightarrow> intruder_synth M (Fun f T)", "qed simp"], ["proof (state)\nthis:\n  intruder_synth M (Fun f T)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       intruder_synth' public arity M (Var x) \\<Longrightarrow>\n       intruder_synth M (Var x)", "qed simp"], ["proof (state)\nthis:\n  intruder_synth' public arity M t \\<Longrightarrow>\n  M \\<turnstile>\\<^sub>c t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma (in intruder_model) analyzed_in_code[code_unfold]:\n  \"analyzed_in t M = analyzed_in' Ana public arity t M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. analyzed_in t M = analyzed_in' Ana public arity t M", "using intruder_synth_code[of M]"], ["proof (prove)\nusing this:\n  (M \\<turnstile>\\<^sub>c ?t) = intruder_synth' public arity M ?t\n\ngoal (1 subgoal):\n 1. analyzed_in t M = analyzed_in' Ana public arity t M", "unfolding analyzed_in_def analyzed_in'_def"], ["proof (prove)\nusing this:\n  (M \\<turnstile>\\<^sub>c ?t) = intruder_synth' public arity M ?t\n\ngoal (1 subgoal):\n 1. (\\<forall>K R.\n        Ana t = (K, R) \\<and>\n        (\\<forall>k\\<in>set K. M \\<turnstile>\\<^sub>c k) \\<longrightarrow>\n        (\\<forall>r\\<in>set R. M \\<turnstile>\\<^sub>c r)) =\n    (case Ana t of\n     (K, T) \\<Rightarrow>\n       (\\<forall>k\\<in>set K.\n           intruder_synth' public arity M k) \\<longrightarrow>\n       (\\<forall>s\\<in>set T. intruder_synth' public arity M s))", "by fastforce"], ["", "end"]]}